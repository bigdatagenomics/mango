(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.pileup = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
!function(t,e){if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,s){t.Backbone=e(t,s,i,n)});else if("undefined"!=typeof exports){var i=require("underscore");e(t,exports,i)}else t.Backbone=e(t,{},t._,t.jQuery||t.Zepto||t.ender||t.$)}(this,function(t,e,i,n){var s=t.Backbone,r=[],a=(r.push,r.slice);r.splice;e.VERSION="1.1.2",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var o=e.Events={on:function(t,e,i){if(!c(this,"on",t,[e,i])||!e)return this;this._events||(this._events={});var n=this._events[t]||(this._events[t]=[]);return n.push({callback:e,context:i,ctx:i||this}),this},once:function(t,e,n){if(!c(this,"once",t,[e,n])||!e)return this;var s=this,r=i.once(function(){s.off(t,r),e.apply(this,arguments)});return r._callback=e,this.on(t,r,n)},off:function(t,e,n){var s,r,a,o,h,u,l,d;if(!this._events||!c(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events=void 0,this;for(o=t?[t]:i.keys(this._events),h=0,u=o.length;h<u;h++)if(t=o[h],a=this._events[t]){if(this._events[t]=s=[],e||n)for(l=0,d=a.length;l<d;l++)r=a[l],(e&&e!==r.callback&&e!==r.callback._callback||n&&n!==r.context)&&s.push(r);s.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=a.call(arguments,1);if(!c(this,"trigger",t,e))return this;var i=this._events[t],n=this._events.all;return i&&u(i,e),n&&u(n,arguments),this},stopListening:function(t,e,n){var s=this._listeningTo;if(!s)return this;var r=!e&&!n;n||"object"!=typeof e||(n=this),t&&((s={})[t._listenId]=t);for(var a in s)t=s[a],t.off(e,n,this),(r||i.isEmpty(t._events))&&delete this._listeningTo[a];return this}},h=/\s+/,c=function(t,e,i,n){if(!i)return!0;if("object"==typeof i){for(var s in i)t[e].apply(t,[s,i[s]].concat(n));return!1}if(h.test(i)){for(var r=i.split(h),a=0,o=r.length;a<o;a++)t[e].apply(t,[r[a]].concat(n));return!1}return!0},u=function(t,e){var i,n=-1,s=t.length,r=e[0],a=e[1],o=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,r,a,o);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}},l={listenTo:"on",listenToOnce:"once"};i.each(l,function(t,e){o[e]=function(e,n,s){var r=this._listeningTo||(this._listeningTo={}),a=e._listenId||(e._listenId=i.uniqueId("l"));return r[a]=e,s||"object"!=typeof n||(s=this),e[t](n,s,this),this}}),o.bind=o.on,o.unbind=o.off,i.extend(e,o);var d=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=i.defaults({},n,i.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(d.prototype,o,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var s,r,a,o,h,c,u,l;if(null==t)return this;if("object"==typeof t?(r=t,n=e):(r={})[t]=e,n||(n={}),!this._validate(r,n))return!1;a=n.unset,h=n.silent,o=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=i.clone(this.attributes),this.changed={}),l=this.attributes,u=this._previousAttributes,this.idAttribute in r&&(this.id=r[this.idAttribute]);for(s in r)e=r[s],i.isEqual(l[s],e)||o.push(s),i.isEqual(u[s],e)?delete this.changed[s]:this.changed[s]=e,a?delete l[s]:l[s]=e;if(!h){o.length&&(this._pending=n);for(var d=0,f=o.length;d<f;d++)this.trigger("change:"+o[d],this,l[o[d]],n)}if(c)return this;if(!h)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e,n=!1,s=this._changing?this._previousAttributes:this.attributes;for(var r in t)i.isEqual(s[r],e=t[r])||((n||(n={}))[r]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(i){return!!e.set(e.parse(i,t),t)&&(n&&n(e,i,t),void e.trigger("sync",e,i,t))},U(this,t),this.sync("read",this,t)},save:function(t,e,n){var s,r,a,o=this.attributes;if(null==t||"object"==typeof t?(s=t,n=e):(s={})[t]=e,n=i.extend({validate:!0},n),s&&!n.wait){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;s&&n.wait&&(this.attributes=i.extend({},o,s)),void 0===n.parse&&(n.parse=!0);var h=this,c=n.success;return n.success=function(t){h.attributes=o;var e=h.parse(t,n);return n.wait&&(e=i.extend(s||{},e)),!(i.isObject(e)&&!h.set(e,n))&&(c&&c(h,t,n),void h.trigger("sync",h,t,n))},U(this,n),r=this.isNew()?"create":n.patch?"patch":"update","patch"===r&&(n.attrs=s),a=this.sync(r,this,n),s&&n.wait&&(this.attributes=o),a},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=function(){e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&s(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;U(this,t);var r=this.sync("delete",this,t);return t.wait||s(),r},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||j();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1)}});var f=["keys","values","pairs","invert","pick","omit"];i.each(f,function(t){d.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.attributes),i[t].apply(i,e)}});var p=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},g={add:!0,remove:!0,merge:!0},v={add:!0,remove:!1};i.extend(p.prototype,o,{model:d,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,v))},remove:function(t,e){var n=!i.isArray(t);t=n?[t]:i.clone(t),e||(e={});var s,r,a,o;for(s=0,r=t.length;s<r;s++)o=t[s]=this.get(t[s]),o&&(delete this._byId[o.id],delete this._byId[o.cid],a=this.indexOf(o),this.models.splice(a,1),this.length--,e.silent||(e.index=a,o.trigger("remove",o,this,e)),this._removeReference(o,e));return n?t[0]:t},set:function(t,e){e=i.defaults({},e,g),e.parse&&(t=this.parse(t,e));var n=!i.isArray(t);t=n?t?[t]:[]:i.clone(t);var s,r,a,o,h,c,u,l=e.at,f=this.model,p=this.comparator&&null==l&&e.sort!==!1,v=i.isString(this.comparator)?this.comparator:null,m=[],y=[],_={},b=e.add,w=e.merge,x=e.remove,E=!(p||!b||!x)&&[];for(s=0,r=t.length;s<r;s++){if(h=t[s]||{},a=h instanceof d?o=h:h[f.prototype.idAttribute||"id"],c=this.get(a))x&&(_[c.cid]=!0),w&&(h=h===o?o.attributes:h,e.parse&&(h=c.parse(h,e)),c.set(h,e),p&&!u&&c.hasChanged(v)&&(u=!0)),t[s]=c;else if(b){if(o=t[s]=this._prepareModel(h,e),!o)continue;m.push(o),this._addReference(o,e)}o=c||o,!E||!o.isNew()&&_[o.id]||E.push(o),_[o.id]=!0}if(x){for(s=0,r=this.length;s<r;++s)_[(o=this.models[s]).cid]||y.push(o);y.length&&this.remove(y,e)}if(m.length||E&&E.length)if(p&&(u=!0),this.length+=m.length,null!=l)for(s=0,r=m.length;s<r;s++)this.models.splice(l+s,0,m[s]);else{E&&(this.models.length=0);var k=E||m;for(s=0,r=k.length;s<r;s++)this.models.push(k[s])}if(u&&this.sort({silent:!0}),!e.silent){for(s=0,r=m.length;s<r;s++)(o=m[s]).trigger("add",o,this,e);(u||E&&E.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,s=this.models.length;n<s;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[t.id]||this._byId[t.cid]},at:function(t){return this.models[t]},where:function(t,e){return i.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var i in t)if(t[i]!==e.get(i))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),i.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(i.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return i.invoke(this.models,"get",t)},fetch:function(t){t=t?i.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e(n,i,t),n.trigger("sync",n,i,t)},U(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?i.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,s=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),s&&s(t,i,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(t instanceof d)return t;e=e?i.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_addReference:function(t,e){this._byId[t.cid]=t,null!=t.id&&(this._byId[t.id]=t),t.collection||(t.collection=this),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){("add"!==t&&"remove"!==t||i===this)&&("destroy"===t&&this.remove(e,n),e&&t==="change:"+e.idAttribute&&(delete this._byId[e.previous(e.idAttribute)],null!=e.id&&(this._byId[e.id]=e)),this.trigger.apply(this,arguments))}});var m=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];i.each(m,function(t){p.prototype[t]=function(){var e=a.call(arguments);return e.unshift(this.models),i[t].apply(i,e)}});var y=["groupBy","countBy","sortBy","indexBy"];i.each(y,function(t){p.prototype[t]=function(e,n){var s=i.isFunction(e)?e:function(t){return t.get(e)};return i[t](this.models,s,n)}});var _=e.View=function(t){this.cid=i.uniqueId("view"),t||(t={}),i.extend(this,i.pick(t,w)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},b=/^(\S+)\s*(.*)$/,w=["model","collection","el","id","attributes","className","tagName","events"];i.extend(_.prototype,o,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(t){if(!t&&!(t=i.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(i.isFunction(n)||(n=this[t[e]]),n){var s=e.match(b),r=s[1],a=s[2];n=i.bind(n,this),r+=".delegateEvents"+this.cid,""===a?this.$el.on(r,n):this.$el.on(r,a,n)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"),!1);else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className"));var n=e.$("<"+i.result(this,"tagName")+">").attr(t);this.setElement(n,!1)}}}),e.sync=function(t,n,s){var r=E[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var a={type:r,dataType:"json"};if(s.url||(a.url=i.result(n,"url")||j()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(a.contentType="application/json",a.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),s.emulateHTTP&&("PUT"===r||"DELETE"===r||"PATCH"===r)){a.type="POST",s.emulateJSON&&(a.data._method=r);var o=s.beforeSend;s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",r),o)return o.apply(this,arguments)}}"GET"===a.type||s.emulateJSON||(a.processData=!1),"PATCH"===a.type&&x&&(a.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var h=s.xhr=e.ajax(i.extend(a,s));return n.trigger("request",n,h,s),h};var x=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),E={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var k=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},T=/\((.*?)\)/g,$=/(\(\?)?:\w+/g,S=/\*\w+/g,H=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(k.prototype,o,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var r=this;return e.history.route(t,function(i){var a=r._extractParameters(t,i);r.execute(s,a),r.trigger.apply(r,["route:"+n].concat(a)),r.trigger("route",n,a),e.history.trigger("route",r,n,a)}),this},execute:function(t,e){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(H,"\\$&").replace(T,"(?:$1)?").replace($,function(t,e){return e?t:"([^/?]+)"}).replace(S,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var A=e.History=function(){this.handlers=[],i.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},I=/^[#\/]|\s+$/g,N=/^\/+|\/+$/g,R=/msie [\w.]+/,O=/\/$/,P=/#.*$/;A.started=!1,i.extend(A.prototype,o,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getFragment:function(t,e){if(null==t)if(this._hasPushState||!this._wantsHashChange||e){t=decodeURI(this.location.pathname+this.location.search);var i=this.root.replace(O,"");t.indexOf(i)||(t=t.slice(i.length))}else t=this.getHash();return t.replace(I,"")},start:function(t){if(A.started)throw new Error("Backbone.history has already been started");A.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var n=this.getFragment(),s=document.documentMode,r=R.exec(navigator.userAgent.toLowerCase())&&(!s||s<=7);if(this.root=("/"+this.root+"/").replace(N,"/"),r&&this._wantsHashChange){var a=e.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=a.hide().appendTo("body")[0].contentWindow,this.navigate(n)}this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!r?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=n;var o=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&o.hash&&(this.fragment=this.getHash().replace(I,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),A.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e!==this.fragment&&(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(t){return t=this.fragment=this.getFragment(t),i.any(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0})},navigate:function(t,e){if(!A.started)return!1;e&&e!==!0||(e={trigger:!!e});var i=this.root+(t=this.getFragment(t||""));if(t=t.replace(P,""),this.fragment!==t){if(this.fragment=t,""===t&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getFragment(this.getHash(this.iframe))&&(e.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,t,e.replace))}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new A;var C=function(t,e){var n,s=this;n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e);var r=function(){this.constructor=n};return r.prototype=s.prototype,n.prototype=new r,t&&i.extend(n.prototype,t),n.__super__=s.prototype,n};d.extend=p.extend=k.extend=_.extend=A.extend=C;var j=function(){throw new Error('A "url" property or function must be specified')},U=function(t,e){var i=e.error;e.error=function(n){i&&i(t,n,e),t.trigger("error",t,n,e)}};return e});

},{"underscore":177}],2:[function(require,module,exports){
(function (global){
"use strict";function typedArraySupport(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function Buffer(t){return this instanceof Buffer?(Buffer.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?fromNumber(this,t):"string"==typeof t?fromString(this,t,arguments.length>1?arguments[1]:"utf8"):fromObject(this,t)):arguments.length>1?new Buffer(t,arguments[1]):new Buffer(t)}function fromNumber(t,e){if(t=allocate(t,e<0?0:0|checked(e)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;r++)t[r]=0;return t}function fromString(t,e,r){"string"==typeof r&&""!==r||(r="utf8");var n=0|byteLength(e,r);return t=allocate(t,n),t.write(e,r),t}function fromObject(t,e){if(Buffer.isBuffer(e))return fromBuffer(t,e);if(isArray(e))return fromArray(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return fromTypedArray(t,e);if(e instanceof ArrayBuffer)return fromArrayBuffer(t,e)}return e.length?fromArrayLike(t,e):fromJsonObject(t,e)}function fromBuffer(t,e){var r=0|checked(e.length);return t=allocate(t,r),e.copy(t,0,0,r),t}function fromArray(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromTypedArray(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromArrayBuffer(t,e){return Buffer.TYPED_ARRAY_SUPPORT?(e.byteLength,t=Buffer._augment(new Uint8Array(e))):t=fromTypedArray(t,new Uint8Array(e)),t}function fromArrayLike(t,e){var r=0|checked(e.length);t=allocate(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromJsonObject(t,e){var r,n=0;"Buffer"===e.type&&isArray(e.data)&&(r=e.data,n=0|checked(r.length)),t=allocate(t,n);for(var f=0;f<n;f+=1)t[f]=255&r[f];return t}function allocate(t,e){Buffer.TYPED_ARRAY_SUPPORT?(t=Buffer._augment(new Uint8Array(e)),t.__proto__=Buffer.prototype):(t.length=e,t._isBuffer=!0);var r=0!==e&&e<=Buffer.poolSize>>>1;return r&&(t.parent=rootParent),t}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|t}function SlowBuffer(t,e){if(!(this instanceof SlowBuffer))return new SlowBuffer(t,e);var r=new Buffer(t,e);return delete r.parent,r}function byteLength(t,e){"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(t).length;default:if(n)return utf8ToBytes(t).length;e=(""+e).toLowerCase(),n=!0}}function slowToString(t,e,r){var n=!1;if(e=0|e,r=void 0===r||r===1/0?this.length:0|r,t||(t="utf8"),e<0&&(e=0),r>this.length&&(r=this.length),r<=e)return"";for(;;)switch(t){case"hex":return hexSlice(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return asciiSlice(this,e,r);case"binary":return binarySlice(this,e,r);case"base64":return base64Slice(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function hexWrite(t,e,r,n){r=Number(r)||0;var f=t.length-r;n?(n=Number(n),n>f&&(n=f)):n=f;var i=e.length;if(i%2!==0)throw new Error("Invalid hex string");n>i/2&&(n=i/2);for(var o=0;o<n;o++){var u=parseInt(e.substr(2*o,2),16);if(isNaN(u))throw new Error("Invalid hex string");t[r+o]=u}return o}function utf8Write(t,e,r,n){return blitBuffer(utf8ToBytes(e,t.length-r),t,r,n)}function asciiWrite(t,e,r,n){return blitBuffer(asciiToBytes(e),t,r,n)}function binaryWrite(t,e,r,n){return asciiWrite(t,e,r,n)}function base64Write(t,e,r,n){return blitBuffer(base64ToBytes(e),t,r,n)}function ucs2Write(t,e,r,n){return blitBuffer(utf16leToBytes(e,t.length-r),t,r,n)}function base64Slice(t,e,r){return 0===e&&r===t.length?base64.fromByteArray(t):base64.fromByteArray(t.slice(e,r))}function utf8Slice(t,e,r){r=Math.min(t.length,r);for(var n=[],f=e;f<r;){var i=t[f],o=null,u=i>239?4:i>223?3:i>191?2:1;if(f+u<=r){var s,a,h,c;switch(u){case 1:i<128&&(o=i);break;case 2:s=t[f+1],128===(192&s)&&(c=(31&i)<<6|63&s,c>127&&(o=c));break;case 3:s=t[f+1],a=t[f+2],128===(192&s)&&128===(192&a)&&(c=(15&i)<<12|(63&s)<<6|63&a,c>2047&&(c<55296||c>57343)&&(o=c));break;case 4:s=t[f+1],a=t[f+2],h=t[f+3],128===(192&s)&&128===(192&a)&&128===(192&h)&&(c=(15&i)<<18|(63&s)<<12|(63&a)<<6|63&h,c>65535&&c<1114112&&(o=c))}}null===o?(o=65533,u=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),f+=u}return decodeCodePointsArray(n)}function decodeCodePointsArray(t){var e=t.length;if(e<=MAX_ARGUMENTS_LENGTH)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=MAX_ARGUMENTS_LENGTH));return r}function asciiSlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;f++)n+=String.fromCharCode(127&t[f]);return n}function binarySlice(t,e,r){var n="";r=Math.min(t.length,r);for(var f=e;f<r;f++)n+=String.fromCharCode(t[f]);return n}function hexSlice(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var f="",i=e;i<r;i++)f+=toHex(t[i]);return f}function utf16leSlice(t,e,r){for(var n=t.slice(e,r),f="",i=0;i<n.length;i+=2)f+=String.fromCharCode(n[i]+256*n[i+1]);return f}function checkOffset(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,r,n,f,i){if(!Buffer.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>f||e<i)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range")}function objectWriteUInt16(t,e,r,n){e<0&&(e=65535+e+1);for(var f=0,i=Math.min(t.length-r,2);f<i;f++)t[r+f]=(e&255<<8*(n?f:1-f))>>>8*(n?f:1-f)}function objectWriteUInt32(t,e,r,n){e<0&&(e=4294967295+e+1);for(var f=0,i=Math.min(t.length-r,4);f<i;f++)t[r+f]=e>>>8*(n?f:3-f)&255}function checkIEEE754(t,e,r,n,f,i){if(e>f||e<i)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(r<0)throw new RangeError("index out of range")}function writeFloat(t,e,r,n,f){return f||checkIEEE754(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),ieee754.write(t,e,r,n,23,4),r+4}function writeDouble(t,e,r,n,f){return f||checkIEEE754(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),ieee754.write(t,e,r,n,52,8),r+8}function base64clean(t){if(t=stringtrim(t).replace(INVALID_BASE64_RE,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function toHex(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,e){e=e||1/0;for(var r,n=t.length,f=null,i=[],o=0;o<n;o++){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!f){if(r>56319){(e-=3)>-1&&i.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&i.push(239,191,189);continue}f=r;continue}if(r<56320){(e-=3)>-1&&i.push(239,191,189),f=r;continue}r=(f-55296<<10|r-56320)+65536}else f&&(e-=3)>-1&&i.push(239,191,189);if(f=null,r<128){if((e-=1)<0)break;i.push(r)}else if(r<2048){if((e-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function asciiToBytes(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function utf16leToBytes(t,e){for(var r,n,f,i=[],o=0;o<t.length&&!((e-=2)<0);o++)r=t.charCodeAt(o),n=r>>8,f=r%256,i.push(f),i.push(n);return i}function base64ToBytes(t){return base64.toByteArray(base64clean(t))}function blitBuffer(t,e,r,n){for(var f=0;f<n&&!(f+r>=e.length||f>=t.length);f++)e[f+r]=t[f];return f}var base64=require("base64-js"),ieee754=require("ieee754"),isArray=require("isarray");exports.Buffer=Buffer,exports.SlowBuffer=SlowBuffer,exports.INSPECT_MAX_BYTES=50,Buffer.poolSize=8192;var rootParent={};Buffer.TYPED_ARRAY_SUPPORT=void 0!==global.TYPED_ARRAY_SUPPORT?global.TYPED_ARRAY_SUPPORT:typedArraySupport(),Buffer.TYPED_ARRAY_SUPPORT?(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array):(Buffer.prototype.length=void 0,Buffer.prototype.parent=void 0),Buffer.isBuffer=function(t){return!(null==t||!t._isBuffer)},Buffer.compare=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,f=0,i=Math.min(r,n);f<i&&t[f]===e[f];)++f;return f!==i&&(r=t[f],n=e[f]),r<n?-1:n<r?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!isArray(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new Buffer(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var n=new Buffer(e),f=0;for(r=0;r<t.length;r++){var i=t[r];i.copy(n,f),f+=i.length}return n},Buffer.byteLength=byteLength,Buffer.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?utf8Slice(this,0,t):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){var t="",e=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:Buffer.compare(this,t)},Buffer.prototype.indexOf=function(t,e){function r(t,e,r){for(var n=-1,f=0;r+f<t.length;f++)if(t[r+f]===e[n===-1?0:f-n]){if(n===-1&&(n=f),f-n+1===e.length)return r+n}else n=-1;return-1}if(e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(e<0&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(Buffer.isBuffer(t))return r(this,t,e);if("number"==typeof t)return Buffer.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):r(this,[t],e);throw new TypeError("val must be string, number or Buffer")},Buffer.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},Buffer.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},Buffer.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(r)?(r=0|r,void 0===n&&(n="utf8")):(n=r,r=void 0);else{var f=n;n=e,e=0|r,r=f}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return hexWrite(this,t,e,r);case"utf8":case"utf-8":return utf8Write(this,t,e,r);case"ascii":return asciiWrite(this,t,e,r);case"binary":return binaryWrite(this,t,e,r);case"base64":return base64Write(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var MAX_ARGUMENTS_LENGTH=4096;Buffer.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);var n;if(Buffer.TYPED_ARRAY_SUPPORT)n=Buffer._augment(this.subarray(t,e));else{var f=e-t;n=new Buffer(f,void 0);for(var i=0;i<f;i++)n[i]=this[i+t]}return n.length&&(n.parent=this.parent||this),n},Buffer.prototype.readUIntLE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return n},Buffer.prototype.readUIntBE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t+--e],f=1;e>0&&(f*=256);)n+=this[t+--e]*f;return n},Buffer.prototype.readUInt8=function(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=this[t],f=1,i=0;++i<e&&(f*=256);)n+=this[t+i]*f;return f*=128,n>=f&&(n-=Math.pow(2,8*e)),n},Buffer.prototype.readIntBE=function(t,e,r){t=0|t,e=0|e,r||checkOffset(t,e,this.length);for(var n=e,f=1,i=this[t+--n];n>0&&(f*=256);)i+=this[t+--n]*f;return f*=128,i>=f&&(i-=Math.pow(2,8*e)),i},Buffer.prototype.readInt8=function(t,e){return e||checkOffset(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},Buffer.prototype.readInt16LE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||checkOffset(t,4,this.length),ieee754.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return e||checkOffset(t,8,this.length),ieee754.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var f=1,i=0;for(this[e]=255&t;++i<r&&(f*=256);)this[e+i]=t/f&255;return e+r},Buffer.prototype.writeUIntBE=function(t,e,r,n){t=+t,e=0|e,r=0|r,n||checkInt(this,t,e,r,Math.pow(2,8*r),0);var f=r-1,i=1;for(this[e+f]=255&t;--f>=0&&(i*=256);)this[e+f]=t/i&255;return e+r},Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e=0|e,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=0,o=1,u=t<0?1:0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e=0|e,!n){var f=Math.pow(2,8*r-1);checkInt(this,t,e,r,f-1,-f)}var i=r-1,o=1,u=t<0?1:0;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=(t/o>>0)-u&255;return e+r},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e=0|e,r||checkInt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return writeDouble(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var f,i=n-r;if(this===t&&r<e&&e<n)for(f=i-1;f>=0;f--)t[f+e]=this[f+r];else if(i<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(f=0;f<i;f++)t[f+e]=this[f+r];else t._set(this.subarray(r,r+i),e);return i},Buffer.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),r<e)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(e<0||e>=this.length)throw new RangeError("start out of bounds");if(r<0||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;n<r;n++)this[n]=t;else{var f=utf8ToBytes(t.toString()),i=f.length;for(n=e;n<r;n++)this[n]=f[n%i]}return this}},Buffer.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(Buffer.TYPED_ARRAY_SUPPORT)return new Buffer(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;e<r;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var BP=Buffer.prototype;Buffer._augment=function(t){return t.constructor=Buffer,t._isBuffer=!0,t._set=t.set,t.get=BP.get,t.set=BP.set,t.write=BP.write,t.toString=BP.toString,t.toLocaleString=BP.toString,t.toJSON=BP.toJSON,t.equals=BP.equals,t.compare=BP.compare,t.indexOf=BP.indexOf,t.copy=BP.copy,t.slice=BP.slice,t.readUIntLE=BP.readUIntLE,t.readUIntBE=BP.readUIntBE,t.readUInt8=BP.readUInt8,t.readUInt16LE=BP.readUInt16LE,t.readUInt16BE=BP.readUInt16BE,t.readUInt32LE=BP.readUInt32LE,t.readUInt32BE=BP.readUInt32BE,t.readIntLE=BP.readIntLE,t.readIntBE=BP.readIntBE,t.readInt8=BP.readInt8,t.readInt16LE=BP.readInt16LE,t.readInt16BE=BP.readInt16BE,t.readInt32LE=BP.readInt32LE,t.readInt32BE=BP.readInt32BE,t.readFloatLE=BP.readFloatLE,t.readFloatBE=BP.readFloatBE,t.readDoubleLE=BP.readDoubleLE,t.readDoubleBE=BP.readDoubleBE,t.writeUInt8=BP.writeUInt8,t.writeUIntLE=BP.writeUIntLE,t.writeUIntBE=BP.writeUIntBE,t.writeUInt16LE=BP.writeUInt16LE,t.writeUInt16BE=BP.writeUInt16BE,t.writeUInt32LE=BP.writeUInt32LE,t.writeUInt32BE=BP.writeUInt32BE,t.writeIntLE=BP.writeIntLE,t.writeIntBE=BP.writeIntBE,t.writeInt8=BP.writeInt8,t.writeInt16LE=BP.writeInt16LE,t.writeInt16BE=BP.writeInt16BE,t.writeInt32LE=BP.writeInt32LE,t.writeInt32BE=BP.writeInt32BE,t.writeFloatLE=BP.writeFloatLE,t.writeFloatBE=BP.writeFloatBE,t.writeDoubleLE=BP.writeDoubleLE,t.writeDoubleBE=BP.writeDoubleBE,t.fill=BP.fill,t.inspect=BP.inspect,t.toArrayBuffer=BP.toArrayBuffer,t};var INVALID_BASE64_RE=/[^+\/0-9A-Za-z-_]/g;

}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{"base64-js":3,"ieee754":4,"isarray":5}],3:[function(require,module,exports){
var lookup="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function r(t){var r=t.charCodeAt(0);return r===h||r===u?62:r===c||r===f?63:r<o?-1:r<o+10?r-o+26+26:r<i+26?r-i:r<A+26?r-A+26:void 0}function e(t){function e(t){i[f++]=t}var n,h,c,o,A,i;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=t.length;A="="===t.charAt(u-2)?2:"="===t.charAt(u-1)?1:0,i=new a(3*t.length/4-A),c=A>0?t.length-4:t.length;var f=0;for(n=0,h=0;n<c;n+=4,h+=3)o=r(t.charAt(n))<<18|r(t.charAt(n+1))<<12|r(t.charAt(n+2))<<6|r(t.charAt(n+3)),e((16711680&o)>>16),e((65280&o)>>8),e(255&o);return 2===A?(o=r(t.charAt(n))<<2|r(t.charAt(n+1))>>4,e(255&o)):1===A&&(o=r(t.charAt(n))<<10|r(t.charAt(n+1))<<4|r(t.charAt(n+2))>>2,e(o>>8&255),e(255&o)),i}function n(t){function r(t){return lookup.charAt(t)}function e(t){return r(t>>18&63)+r(t>>12&63)+r(t>>6&63)+r(63&t)}var n,a,h,c=t.length%3,o="";for(n=0,h=t.length-c;n<h;n+=3)a=(t[n]<<16)+(t[n+1]<<8)+t[n+2],o+=e(a);switch(c){case 1:a=t[t.length-1],o+=r(a>>2),o+=r(a<<4&63),o+="==";break;case 2:a=(t[t.length-2]<<8)+t[t.length-1],o+=r(a>>10),o+=r(a>>4&63),o+=r(a<<2&63),o+="="}return o}var a="undefined"!=typeof Uint8Array?Uint8Array:Array,h="+".charCodeAt(0),c="/".charCodeAt(0),o="0".charCodeAt(0),A="a".charCodeAt(0),i="A".charCodeAt(0),u="-".charCodeAt(0),f="_".charCodeAt(0);t.toByteArray=e,t.fromByteArray=n}("undefined"==typeof exports?this.base64js={}:exports);

},{}],4:[function(require,module,exports){
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:(s?-1:1)*(1/0);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),o+=p+N>=1?n/f:n*Math.pow(2,1-N),o*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};

},{}],5:[function(require,module,exports){
var toString={}.toString;module.exports=Array.isArray||function(r){return"[object Array]"==toString.call(r)};

},{}],6:[function(require,module,exports){
function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(t){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(t){return cachedClearTimeout.call(this,e)}}}function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue=currentQueue.concat(queue):queueIndex=-1,queue.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue.length;t;){for(currentQueue=queue,queue=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop(){}var process=module.exports={},cachedSetTimeout,cachedClearTimeout;!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var queue=[],draining=!1,currentQueue,queueIndex=-1;process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var u=1;u<arguments.length;u++)t[u-1]=arguments[u];queue.push(new Item(e,t)),1!==queue.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};

},{}],7:[function(require,module,exports){
!function(){"use strict";function t(t,e,n){n=n||!1;for(var r in e)!function(r){"function"==typeof e[r]?n||(t[r]=e[r].bind(e)):Object.defineProperty(t,r,{get:function(){return e[r]},set:function(t){e[r]=t}})}(r)}function e(e){t(this,e),this.pushObject=this.popObject=this.reset=function(){}}function n(t){if(t instanceof HTMLCanvasElement)return n(t.getContext("2d"));var r=t;if(u)return u(r);for(var o=0;o<n.cache.length;o++){var i=n.cache[o];if(i[0]==r)return i[1]}var c=new e(r);return n.cache.push([r,c]),c}function r(e){t(this,e,!0);var n=[];this.calls=n;for(var i in e)(function(t){"function"==typeof e[t]&&(this[t]=function(){var r=Array.prototype.slice.call(arguments);return n.push([t].concat(r)),e[t].apply(e,arguments)})}).bind(this)(i);this.pushObject=function(t){n.push(["pushObject",t])},this.popObject=function(){n.push(["popObject"])},this.reset=function(){this.calls=n=[]};var c=this.drawImage;this.drawImage=function(t){var i=r.recorderForCanvas(t);i?(e.drawImage.apply(e,arguments),n=n.concat(o(i.calls,arguments)),this.calls=n):c.apply(e,arguments)}}function o(t,e){var n,r,o=e[0],a=0,s=0,u=o.width,h=o.height,d=o.width,p=o.height;3==e.length?(n=e[1],r=e[2]):5==e.length?(n=e[1],r=e[2],d=e[3],p=e[4]):9==e.length&&(a=e[1],s=e[2],u=e[3],h=e[4],n=e[5],r=e[6],d=e[7],p=e[8]);var v=i(a,a+u,n,n+d),g=c(a,a+u,n,n+d),b=i(s,s+h,r,r+p),C=c(s,s+h,r,r+p),w=function(t){var e=t.slice(),n=e[0];if(n in l){var r=l[n];"number"==typeof r&&(r=[r]),r.forEach(function(t){e[1+t]=g(e[1+t]),e[2+t]=C(e[2+t])})}if(n in f){var o=f[n];"number"==typeof o&&(o=[o]),o.forEach(function(t){e[1+t]*=v,e[2+t]*=b})}return e};return t.map(w)}function i(t,e,n,r){return(r-n)/(e-t)}function c(t,e,n,r){var o=i(t,e,n,r);return function(e){return n+o*(e-t)}}function a(t,e){if(t)return r.recorderForSelector(t,e);if(r.recorders){if(0==r.recorders.length)throw"Called a RecordingContext method, but no canvases are being recorded.";if(r.recorders.length>1)throw"Called a RecordingContext method while multiple canvases were being recorded. Specify one using a div and selector.";return r.recorders[0][1]}throw"You must call RecordingContext.recordAll() before using other RecordingContext static methods"}function s(e,n,r){function o(){c.hits.unshift(Array.prototype.slice.call(i)),c.hit=c.hits[0]}t(this,e);var i=[];this.hits=[],this.hit=null;var c=this;this.pushObject=function(t){i.unshift(t)},this.popObject=function(){i.shift()},this.reset=function(){this.hits=[],this.hit=null},this.clearRect=function(t,e,n,r){},this.fillRect=function(t,e,i,c){n>=t&&n<=t+i&&r>=e&&r<=e+c&&o()},this.strokeRect=function(t,e,n,r){},this.fill=function(t){e.isPointInPath(n,r)&&o()},this.stroke=function(){e.isPointInStroke(n,r)&&o()},this.fillText=function(t,e,n,r){},this.strokeText=function(t,e,n,r){}}var u=null;n.cache=[];var l={clearRect:0,fillRect:0,strokeRect:0,fillText:1,strokeText:1,moveTo:0,lineTo:0,bezierCurveTo:[0,2,4],quadraticCurveTo:[0,2],rect:0},f={clearRect:2,fillRect:2,strokeRect:2,rect:2};r.prototype.drawnObjectsWith=function(t){return t||(t=function(){return!0}),this.callsOf("pushObject").filter(function(e){return t(e[1])}).map(function(t){return t[1]})},r.prototype.drawnObjects=r.prototype.drawnObjectsWith,r.prototype.callsOf=function(t){return this.calls.filter(function(e){return e[0]==t})},r.recordAll=function(){if(null!=u)throw"You forgot to call RecordingContext.reset()";r.recorders=[],u=function(t){var e=r.recorderForCanvas(t.canvas);return e?e:(e=new r(t),r.recorders.push([t.canvas,e]),e)}},r.reset=function(){if(!u)throw"Called RecordingContext.reset() before RecordingContext.recordAll()";u=null,r.recorders=null},r.recorderForCanvas=function(t){var e=r.recorders;if(null==e)throw"You must call RecordingContext.recordAll() before using other RecordingContext static methods";for(var n=0;n<e.length;n++){var o=e[n];if(o[0]==t)return o[1]}return null},r.recorderForSelector=function(t,e){var n=t.querySelector(e+" canvas")||t.querySelector(e);if(!n)throw"Unable to find a canvas matching "+e;if(!(n instanceof HTMLCanvasElement))throw"Selector "+e+" neither matches nor contains a canvas";return r.recorderForCanvas(n)},r.drawnObjectsWith=function(t,e,n){"function"!=typeof t&&0!=arguments.length||(n=t,t=null);var r=a(t,e);return n=n||function(){return!0},r?r.drawnObjectsWith(n):[]},r.drawnObjects=r.drawnObjectsWith,r.callsOf=function(t,e,n){"string"==typeof t&&(n=t,t=null);var r=a(t,e);return r?r.callsOf(n):[]};var h={DataContext:e,RecordingContext:r,ClickTrackingContext:s,getDataContext:n};"undefined"!=typeof module?module.exports=h:window.dataCanvas=h}();

},{}],8:[function(require,module,exports){
!function(t){var e=this;"object"==typeof exports?module.exports=t(e,require("jdataview")):"function"==typeof define&&define.amd?define(["jdataview"],function(i){return t(e,i)}):e.jBinary=t(e,e.jDataView)}(function(t,e){"use strict";function i(t,e){return e&&t instanceof e}function n(t){for(var e=1,i=arguments.length;i>e;++e){var n=arguments[e];for(var r in n)void 0!==n[r]&&(t[r]=n[r])}return t}function r(t){return arguments[0]=l(t),n.apply(null,arguments)}function a(t,e,n){return i(n,Function)?n.call(t,e.contexts[0]):n}function s(t){return function(){var e=arguments,n=e.length-1,r=t.length-1,a=e[n];if(e.length=r+1,!i(a,Function)){var s=this;return new f(function(i,n){e[r]=function(t,e){return t?n(t):i(e)},t.apply(s,e)})}e[n]=void 0,e[r]=a,t.apply(this,e)}}function o(t,n){return i(t,o)?t.as(n):(i(t,e)||(t=new e(t,void 0,void 0,n?n["jBinary.littleEndian"]:void 0)),i(this,o)?(this.view=t,this.view.seek(0),this.contexts=[],this.as(n,!0)):new o(t,n))}function h(t){return r(h.prototype,t)}function u(t){return r(u.prototype,t,{createProperty:function(){var e=(t.createProperty||u.prototype.createProperty).apply(this,arguments);return e.getBaseType&&(e.baseType=e.binary.getType(e.getBaseType(e.binary.contexts[0]))),e}})}var c=t.document;"atob"in t&&"btoa"in t||!function(){function e(t){var e,i,r,a,s,o;for(r=t.length,i=0,e="";r>i;){if(a=255&t.charCodeAt(i++),i==r){e+=n.charAt(a>>2),e+=n.charAt((3&a)<<4),e+="==";break}if(s=t.charCodeAt(i++),i==r){e+=n.charAt(a>>2),e+=n.charAt((3&a)<<4|(240&s)>>4),e+=n.charAt((15&s)<<2),e+="=";break}o=t.charCodeAt(i++),e+=n.charAt(a>>2),e+=n.charAt((3&a)<<4|(240&s)>>4),e+=n.charAt((15&s)<<2|(192&o)>>6),e+=n.charAt(63&o)}return e}function i(t){var e,i,n,a,s,o,h;for(o=t.length,s=0,h="";o>s;){do e=r[255&t.charCodeAt(s++)];while(o>s&&-1==e);if(-1==e)break;do i=r[255&t.charCodeAt(s++)];while(o>s&&-1==i);if(-1==i)break;h+=String.fromCharCode(e<<2|(48&i)>>4);do{if(n=255&t.charCodeAt(s++),61==n)return h;n=r[n]}while(o>s&&-1==n);if(-1==n)break;h+=String.fromCharCode((15&i)<<4|(60&n)>>2);do{if(a=255&t.charCodeAt(s++),61==a)return h;a=r[a]}while(o>s&&-1==a);if(-1==a)break;h+=String.fromCharCode((3&n)<<6|a)}return h}var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1];t.btoa||(t.btoa=e),t.atob||(t.atob=i)}();var f=t.Promise||function(t){this.then=t},l=Object.create;l||(l=function(t){var e=function(){};return e.prototype=t,new e});var p=o.prototype,y=p.typeSet={};p.toValue=function(t){return a(this,this,t)},p._named=function(t,e,i){return t.displayName=e+" @ "+(void 0!==i?i:this.view.tell()),t};var d=Object.defineProperty;if(d)try{d({},"x",{})}catch(t){d=void 0}else d=function(t,e,i,n){n&&(t[e]=i.value)};var v="jBinary.Cache",b=0;if(p._getCached=function(t,e,i){if(t.hasOwnProperty(this.cacheKey))return t[this.cacheKey];var n=e.call(this,t);return d(t,this.cacheKey,{value:n},i),n},p.getContext=function(t){switch(typeof t){case"undefined":t=0;case"number":return this.contexts[t];case"string":return this.getContext(function(e){return t in e});case"function":for(var e=0,i=this.contexts.length;i>e;e++){var n=this.contexts[e];if(t.call(this,n))return n}}},p.inContext=function(t,e){this.contexts.unshift(t);var i=e.call(this);return this.contexts.shift(),i},h.prototype={inherit:function(t,e){function i(t,e){var i=a[t];i&&(n||(n=r(a)),e.call(n,i),n[t]=null)}var n,a=this;return i("params",function(e){for(var i=0,n=e.length;n>i;i++)this[e[i]]=t[i]}),i("setParams",function(e){e.apply(this,t)}),i("typeParams",function(t){for(var i=0,n=t.length;n>i;i++){var r=t[i],a=this[r];a&&(this[r]=e(a))}}),i("resolve",function(t){t.call(this,e)}),n||a},createProperty:function(t){return r(this,{binary:t,view:t.view})},toValue:function(t,e){return e!==!1&&"string"==typeof t?this.binary.getContext(t)[t]:a(this,this.binary,t)}},o.Type=h,u.prototype=r(h.prototype,{setParams:function(){this.baseType&&(this.typeParams=["baseType"].concat(this.typeParams||[]))},baseRead:function(){return this.binary.read(this.baseType)},baseWrite:function(t){return this.binary.write(this.baseType,t)}}),n(u.prototype,{read:u.prototype.baseRead,write:u.prototype.baseWrite}),o.Template=u,p.as=function(t,e){var i=e?this:r(this);return t=t||y,i.typeSet=t===y||y.isPrototypeOf(t)?t:r(y,t),i.cacheKey=v,i.cacheKey=i._getCached(t,function(){return v+"."+ ++b},!0),i},p.seek=function(t,e){if(t=this.toValue(t),void 0!==e){var i=this.view.tell();this.view.seek(t);var n=e.call(this);return this.view.seek(i),n}return this.view.seek(t)},p.tell=function(){return this.view.tell()},p.skip=function(t,e){return this.seek(this.tell()+this.toValue(t),e)},p.slice=function(t,e,i){return new o(this.view.slice(t,e,i),this.typeSet)},p._getType=function(t,e){switch(typeof t){case"string":if(!(t in this.typeSet))throw new ReferenceError("Unknown type: "+t);return this._getType(this.typeSet[t],e);case"number":return this._getType(y.bitfield,[t]);case"object":if(i(t,h)){var n=this;return t.inherit(e||[],function(t){return n.getType(t)})}return i(t,Array)?this._getCached(t,function(t){return this.getType(t[0],t.slice(1))},!0):this._getCached(t,function(t){return this.getType(y.object,[t])},!1)}},p.getType=function(t,e){var n=this._getType(t,e);return n&&!i(t,h)&&(n.name="object"==typeof t?i(t,Array)?t[0]+"("+t.slice(1).join(", ")+")":"object":String(t)),n},p._action=function(t,e,i){if(void 0!==t){t=this.getType(t);var n=this._named(function(){return i.call(this,t.createProperty(this),this.contexts[0])},"["+t.name+"]",e);return void 0!==e?this.seek(e,n):n.call(this)}},p.read=function(t,e){return this._action(t,e,function(t,e){return t.read(e)})},p.readAll=function(){return this.read("jBinary.all",0)},p.write=function(t,e,i){return this._action(t,i,function(t,i){var n=this.tell();return t.write(e,i),this.tell()-n})},p.writeAll=function(t){return this.write("jBinary.all",t,0)},function(t,e){for(var i=0,n=e.length;n>i;i++){var a=e[i];y[a.toLowerCase()]=r(t,{dataType:a})}}(h({params:["littleEndian"],read:function(){return this.view["get"+this.dataType](void 0,this.littleEndian)},write:function(t){this.view["write"+this.dataType](t,this.littleEndian)}}),["Uint8","Uint16","Uint32","Uint64","Int8","Int16","Int32","Int64","Float32","Float64","Char"]),n(y,{byte:y.uint8,float:y.float32,double:y.float64}),y.array=u({params:["baseType","length"],read:function(){var t=this.toValue(this.length);if(this.baseType===y.uint8)return this.view.getBytes(t,void 0,!0,!0);var e;if(void 0!==t){e=new Array(t);for(var i=0;t>i;i++)e[i]=this.baseRead()}else{var n=this.view.byteLength;for(e=[];this.binary.tell()<n;)e.push(this.baseRead())}return e},write:function(t){if(this.baseType===y.uint8)return this.view.writeBytes(t);for(var e=0,i=t.length;i>e;e++)this.baseWrite(t[e])}}),y.binary=u({params:["length","typeSet"],read:function(){var t=this.binary.tell(),e=this.binary.skip(this.toValue(this.length)),i=this.view.slice(t,e);return new o(i,this.typeSet)},write:function(t){this.binary.write("blob",t.read("blob",0))}}),y.bitfield=h({params:["bitSize"],read:function(){return this.view.getUnsigned(this.bitSize)},write:function(t){this.view.writeUnsigned(t,this.bitSize)}}),y.blob=h({params:["length"],read:function(){return this.view.getBytes(this.toValue(this.length))},write:function(t){this.view.writeBytes(t,!0)}}),y.const=u({params:["baseType","value","strict"],read:function(){var t=this.baseRead();if(this.strict&&t!==this.value){if(i(this.strict,Function))return this.strict(t);throw new TypeError("Unexpected value ("+t+" !== "+this.value+").")}return t},write:function(t){this.baseWrite(this.strict||void 0===t?this.value:t)}}),y.enum=u({params:["baseType","matches"],setParams:function(t,e){this.backMatches={};for(var i in e)this.backMatches[e[i]]=i},read:function(){var t=this.baseRead();return t in this.matches?this.matches[t]:t},write:function(t){this.baseWrite(t in this.backMatches?this.backMatches[t]:t)}}),y.extend=h({setParams:function(){this.parts=arguments},resolve:function(t){for(var e=this.parts,i=e.length,n=new Array(i),r=0;i>r;r++)n[r]=t(e[r]);this.parts=n},read:function(){var t=this.parts,e=this.binary.read(t[0]);return this.binary.inContext(e,function(){for(var i=1,r=t.length;r>i;i++)n(e,this.read(t[i]))}),e},write:function(t){var e=this.parts;this.binary.inContext(t,function(){for(var i=0,n=e.length;n>i;i++)this.write(e[i],t)})}}),y.if=u({params:["condition","trueType","falseType"],typeParams:["trueType","falseType"],getBaseType:function(){return this.toValue(this.condition)?this.trueType:this.falseType}}),y.if_not=y.ifNot=u({setParams:function(t,e,i){this.baseType=["if",t,i,e]}}),y.lazy=u({marker:"jBinary.Lazy",params:["innerType","length"],getBaseType:function(){return["binary",this.length,this.binary.typeSet]},read:function(){var t=function(e){return 0===arguments.length?"value"in t?t.value:t.value=t.binary.read(t.innerType):n(t,{wasChanged:!0,value:e}).value};return t[this.marker]=!0,n(t,{binary:n(this.baseRead(),{contexts:this.binary.contexts.slice()}),innerType:this.innerType})},write:function(t){t.wasChanged||!t[this.marker]?this.binary.write(this.innerType,t()):this.baseWrite(t.binary)}}),y.object=h({params:["structure","proto"],resolve:function(t){var e={};for(var n in this.structure)e[n]=i(this.structure[n],Function)?this.structure[n]:t(this.structure[n]);this.structure=e},read:function(){var t=this,e=this.structure,n=this.proto?r(this.proto):{};return this.binary.inContext(n,function(){for(var r in e)this._named(function(){var a=i(e[r],Function)?e[r].call(t,n):this.read(e[r]);void 0!==a&&(n[r]=a)},r).call(this)}),n},write:function(t){var e=this,n=this.structure;this.binary.inContext(t,function(){for(var r in n)this._named(function(){i(n[r],Function)?t[r]=n[r].call(e,t):this.write(n[r],t[r])},r).call(this)})}}),y.skip=h({params:["length"],read:function(){this.view.skip(this.toValue(this.length))},write:function(){this.read()}}),y.string=u({params:["length","encoding"],read:function(){return this.view.getString(this.toValue(this.length),void 0,this.encoding)},write:function(t){this.view.writeString(t,this.encoding)}}),y.string0=h({params:["length","encoding"],read:function(){var t=this.view,e=this.length;if(void 0===e){var i,n=t.tell(),r=0;for(e=t.byteLength-n;e>r&&(i=t.getUint8());)r++;var a=t.getString(r,n,this.encoding);return e>r&&t.skip(1),a}return t.getString(e,void 0,this.encoding).replace(/\0.*$/,"")},write:function(t){var e=this.view,i=void 0===this.length?1:this.length-t.length;e.writeString(t,void 0,this.encoding),i>0&&(e.writeUint8(0),e.skip(i-1))}}),o.loadData=s(function(e,n){var r;if(i(e,t.Blob)){var a;if("FileReader"in t)a=new FileReader,a.onload=a.onerror=function(){n(this.error,this.result)},a.readAsArrayBuffer(e);else{a=new FileReaderSync;var s,o;try{o=a.readAsArrayBuffer(e)}catch(t){s=t}finally{n(s,o)}}}else if("string"!=typeof e)n(new TypeError("Unsupported source type."));else if(r=e.match(/^data:(.+?)(;base64)?,(.*)$/))try{var h=r[2],u=r[3];n(null,(h?atob:decodeURIComponent)(u))}catch(t){n(t)}else if("XMLHttpRequest"in t){var c=new XMLHttpRequest;c.open("GET",e,!0),"responseType"in c?c.responseType="arraybuffer":"overrideMimeType"in c?c.overrideMimeType("text/plain; charset=x-user-defined"):c.setRequestHeader("Accept-Charset","x-user-defined"),"onload"in c||(c.onreadystatechange=function(){4===this.readyState&&this.onload()});var f=function(t){n(new Error(t))};c.onload=function(){return 0!==this.status&&200!==this.status?f("HTTP Error #"+this.status+": "+this.statusText):("response"in this||(this.response=new VBArray(this.responseBody).toArray()),void n(null,this.response))},c.onerror=function(){f("Network error.")},c.send(null)}else n(new TypeError("Unsupported source type."))}),o.load=s(function(t,e,i){var n=o.loadData(t);o.load.getTypeSet(t,e,function(t){n.then(function(e){i(null,new o(e,t))},i)})}),o.load.getTypeSet=function(t,e,i){i(e)},p._toURI="URL"in t&&"createObjectURL"in URL?function(t){var e=this.seek(0,function(){return this.view.getBytes()});return URL.createObjectURL(new Blob([e],{type:t}))}:function(t){var e=this.seek(0,function(){return this.view.getString(void 0,void 0,"binary")});return"data:"+t+";base64,"+btoa(e)},p._mimeType=function(t){return t||this.typeSet["jBinary.mimeType"]||"application/octet-stream"},p.toURI=function(t){return this._toURI(this._mimeType(t))},c){var g=o.downloader=c.createElement("a");g.style.display="none"}return p.saveAs=s(function(t,e,i){"string"==typeof t?("msSaveBlob"in navigator?navigator.msSaveBlob(new Blob([this.read("blob",0)],{type:this._mimeType(e)}),t):c?(g.parentNode||c.body.appendChild(g),g.href=this.toURI(e),g.download=t,g.click(),g.href=g.download=""):i(new TypeError("Saving from Web Worker is not supported.")),i()):i(new TypeError("Unsupported storage type."))}),o});

},{"jdataview":9}],9:[function(require,module,exports){
(function (Buffer){
!function(t){var e=this;module.exports=t(e)}(function(t){"use strict";function e(t,e){return"object"==typeof t&&null!==t&&(t.constructor===e||Object.prototype.toString.call(t)==="[object "+e.name+"]")}function i(t,i){return!i&&e(t,Array)?t:Array.prototype.slice.call(t)}function n(t,e){return void 0!==t?t:e}function r(t,i,f,s){if(r.is(t)){var o=t.slice(i,i+f);return o._littleEndian=n(s,o._littleEndian),o}if(!r.is(this))return new r(t,i,f,s);if(this.buffer=t=r.wrapBuffer(t),this._isArrayBuffer=h.ArrayBuffer&&e(t,ArrayBuffer),this._isPixelData=!1,this._isDataView=h.DataView&&this._isArrayBuffer,this._isNodeBuffer=h.NodeBuffer&&e(t,Buffer),!this._isNodeBuffer&&!this._isArrayBuffer&&!e(t,Array))throw new TypeError("jDataView buffer has an incompatible type");this._littleEndian=!!s;var u="byteLength"in t?t.byteLength:t.length;this.byteOffset=i=n(i,0),this.byteLength=f=n(f,u-i),this._offset=this._bitOffset=0,this._isDataView?this._view=new DataView(t,i,f):this._checkBounds(i,f,u),this._engineAction=this._isDataView?this._dataViewAction:this._isNodeBuffer?this._nodeBufferAction:this._isArrayBuffer?this._arrayBufferAction:this._arrayAction}function f(t){if(h.NodeBuffer)return new Buffer(t,"binary");for(var e=h.ArrayBuffer?Uint8Array:Array,i=new e(t.length),n=0,r=t.length;r>n;n++)i[n]=255&t.charCodeAt(n);return i}function s(t){return t>=0&&31>t?1<<t:s[t]||(s[t]=Math.pow(2,t))}function o(t,e){this.lo=t,this.hi=e}function u(){o.apply(this,arguments)}var h={NodeBuffer:"Buffer"in t,DataView:"DataView"in t,ArrayBuffer:"ArrayBuffer"in t,PixelData:!1},a=t.TextEncoder,_=t.TextDecoder;h.NodeBuffer&&!function(t){try{t.writeFloatLE(1/0,0)}catch(t){h.NodeBuffer=!1}}(new Buffer(4));var c={Int8:1,Int16:2,Int32:4,Uint8:1,Uint16:2,Uint32:4,Float32:4,Float64:8};r.wrapBuffer=function(t){switch(typeof t){case"number":if(h.NodeBuffer)t=new Buffer(t),t.fill(0);else if(h.ArrayBuffer)t=new Uint8Array(t).buffer;else{t=new Array(t);for(var n=0;n<t.length;n++)t[n]=0}return t;case"string":t=f(t);default:return"length"in t&&!(h.NodeBuffer&&e(t,Buffer)||h.ArrayBuffer&&e(t,ArrayBuffer))&&(h.NodeBuffer?t=new Buffer(t):h.ArrayBuffer?e(t,ArrayBuffer)||(t=new Uint8Array(t).buffer,e(t,ArrayBuffer)||(t=new Uint8Array(i(t,!0)).buffer)):t=i(t)),t}},r.is=function(t){return t&&t.jDataView},r.from=function(){return new r(arguments)},r.Uint64=o,o.prototype={valueOf:function(){return this.lo+s(32)*this.hi},toString:function(){return Number.prototype.toString.apply(this.valueOf(),arguments)}},o.fromNumber=function(t){var e=Math.floor(t/s(32)),i=t-e*s(32);return new o(i,e)},r.Int64=u,u.prototype="create"in Object?Object.create(o.prototype):new o,u.prototype.valueOf=function(){return this.hi<s(31)?o.prototype.valueOf.apply(this,arguments):-(s(32)-this.lo+s(32)*(s(32)-1-this.hi))},u.fromNumber=function(t){var e,i;if(t>=0){var n=o.fromNumber(t);e=n.lo,i=n.hi}else i=Math.floor(t/s(32)),e=t-i*s(32),i+=s(32);return new u(e,i)};var y=r.prototype={compatibility:h,jDataView:!0,_checkBounds:function(t,e,i){if("number"!=typeof t)throw new TypeError("Offset is not a number.");if("number"!=typeof e)throw new TypeError("Size is not a number.");if(0>e)throw new RangeError("Length is negative.");if(0>t||t+e>n(i,this.byteLength))throw new RangeError("Offsets are out of bounds.")},_action:function(t,e,i,r,f){return this._engineAction(t,e,n(i,this._offset),n(r,this._littleEndian),f)},_dataViewAction:function(t,e,i,n,r){return this._offset=i+c[t],e?this._view["get"+t](i,n):this._view["set"+t](i,r,n)},_arrayBufferAction:function(e,i,r,f,s){var o,u=c[e],h=t[e+"Array"];if(f=n(f,this._littleEndian),1===u||(this.byteOffset+r)%u===0&&f)return o=new h(this.buffer,this.byteOffset+r,1),this._offset=r+u,i?o[0]:o[0]=s;var a=new Uint8Array(i?this.getBytes(u,r,f,!0):u);return o=new h(a.buffer,0,1),i?o[0]:(o[0]=s,void this._setBytes(r,a,f))},_arrayAction:function(t,e,i,n,r){return e?this["_get"+t](i,n):this["_set"+t](i,r,n)},_getBytes:function(t,e,r){r=n(r,this._littleEndian),e=n(e,this._offset),t=n(t,this.byteLength-e),this._checkBounds(e,t),e+=this.byteOffset,this._offset=e-this.byteOffset+t;var f=this._isArrayBuffer?new Uint8Array(this.buffer,e,t):(this.buffer.slice||Array.prototype.slice).call(this.buffer,e,e+t);return r||1>=t?f:i(f).reverse()},getBytes:function(t,e,r,f){var s=this._getBytes(t,e,n(r,!0));return f?i(s):s},_setBytes:function(t,e,r){var f=e.length;if(0!==f){if(r=n(r,this._littleEndian),t=n(t,this._offset),this._checkBounds(t,f),!r&&f>1&&(e=i(e,!0).reverse()),t+=this.byteOffset,this._isArrayBuffer)new Uint8Array(this.buffer,t,f).set(e);else if(this._isNodeBuffer)new Buffer(e).copy(this.buffer,t);else for(var s=0;f>s;s++)this.buffer[t+s]=e[s];this._offset=t-this.byteOffset+f}},setBytes:function(t,e,i){this._setBytes(t,e,n(i,!0))},getString:function(t,e,i){if(this._isNodeBuffer)return e=n(e,this._offset),t=n(t,this.byteLength-e),this._checkBounds(e,t),this._offset=e+t,this.buffer.toString(i||"binary",this.byteOffset+e,this.byteOffset+this._offset);var r=this._getBytes(t,e,!0);if(i="utf8"===i?"utf-8":i||"binary",_&&"binary"!==i)return new _(i).decode(this._isArrayBuffer?r:new Uint8Array(r));var f="";t=r.length;for(var s=0;t>s;s++)f+=String.fromCharCode(r[s]);return"utf-8"===i&&(f=decodeURIComponent(escape(f))),f},setString:function(t,e,i){if(this._isNodeBuffer)return t=n(t,this._offset),this._checkBounds(t,e.length),void(this._offset=t+this.buffer.write(e,this.byteOffset+t,i||"binary"));i="utf8"===i?"utf-8":i||"binary";var r;a&&"binary"!==i?r=new a(i).encode(e):("utf-8"===i&&(e=unescape(encodeURIComponent(e))),r=f(e)),this._setBytes(t,r,!0)},getChar:function(t){return this.getString(1,t)},setChar:function(t,e){this.setString(t,e)},tell:function(){return this._offset},seek:function(t){return this._checkBounds(t,0),this._offset=t},skip:function(t){return this.seek(this._offset+t)},slice:function(t,e,i){function f(t,e){return 0>t?t+e:t}return t=f(t,this.byteLength),e=f(n(e,this.byteLength),this.byteLength),i?new r(this.getBytes(e-t,t,!0,!0),void 0,void 0,this._littleEndian):new r(this.buffer,this.byteOffset+t,e-t,this._littleEndian)},alignBy:function(t){return this._bitOffset=0,1!==n(t,1)?this.skip(t-(this._offset%t||t)):this._offset},_getFloat64:function(t,e){var i=this._getBytes(8,t,e),n=1-2*(i[7]>>7),r=((i[7]<<1&255)<<3|i[6]>>4)-1023,f=(15&i[6])*s(48)+i[5]*s(40)+i[4]*s(32)+i[3]*s(24)+i[2]*s(16)+i[1]*s(8)+i[0];return 1024===r?0!==f?NaN:1/0*n:-1023===r?n*f*s(-1074):n*(1+f*s(-52))*s(r)},_getFloat32:function(t,e){var i=this._getBytes(4,t,e),n=1-2*(i[3]>>7),r=(i[3]<<1&255|i[2]>>7)-127,f=(127&i[2])<<16|i[1]<<8|i[0];return 128===r?0!==f?NaN:1/0*n:-127===r?n*f*s(-149):n*(1+f*s(-23))*s(r)},_get64:function(t,e,i){i=n(i,this._littleEndian),e=n(e,this._offset);for(var r=i?[0,4]:[4,0],f=0;2>f;f++)r[f]=this.getUint32(e+r[f],i);return this._offset=e+8,new t(r[0],r[1])},getInt64:function(t,e){return this._get64(u,t,e)},getUint64:function(t,e){return this._get64(o,t,e)},_getInt32:function(t,e){var i=this._getBytes(4,t,e);return i[3]<<24|i[2]<<16|i[1]<<8|i[0]},_getUint32:function(t,e){return this._getInt32(t,e)>>>0},_getInt16:function(t,e){return this._getUint16(t,e)<<16>>16},_getUint16:function(t,e){var i=this._getBytes(2,t,e);return i[1]<<8|i[0]},_getInt8:function(t){return this._getUint8(t)<<24>>24},_getUint8:function(t){return this._getBytes(1,t)[0]},_getBitRangeData:function(t,e){var i=(n(e,this._offset)<<3)+this._bitOffset,r=i+t,f=i>>>3,s=r+7>>>3,o=this._getBytes(s-f,f,!0),u=0;(this._bitOffset=7&r)&&(this._bitOffset-=8);for(var h=0,a=o.length;a>h;h++)u=u<<8|o[h];return{start:f,bytes:o,wideValue:u}},getSigned:function(t,e){var i=32-t;return this.getUnsigned(t,e)<<i>>i},getUnsigned:function(t,e){var i=this._getBitRangeData(t,e).wideValue>>>-this._bitOffset;return 32>t?i&~(-1<<t):i},_setBinaryFloat:function(t,e,i,n,r){var f,o,u=0>e?1:0,h=~(-1<<n-1),a=1-h;0>e&&(e=-e),0===e?(f=0,o=0):isNaN(e)?(f=2*h+1,o=1):1/0===e?(f=2*h+1,o=0):(f=Math.floor(Math.log(e)/Math.LN2),f>=a&&h>=f?(o=Math.floor((e*s(-f)-1)*s(i)),f+=h):(o=Math.floor(e/s(a-i)),f=0));for(var _=[];i>=8;)_.push(o%256),o=Math.floor(o/256),i-=8;for(f=f<<i|o,n+=i;n>=8;)_.push(255&f),f>>>=8,n-=8;_.push(u<<n|f),this._setBytes(t,_,r)},_setFloat32:function(t,e,i){this._setBinaryFloat(t,e,23,8,i)},_setFloat64:function(t,e,i){this._setBinaryFloat(t,e,52,11,i)},_set64:function(t,e,i,r){"object"!=typeof i&&(i=t.fromNumber(i)),r=n(r,this._littleEndian),e=n(e,this._offset);var f=r?{lo:0,hi:4}:{lo:4,hi:0};for(var s in f)this.setUint32(e+f[s],i[s],r);this._offset=e+8},setInt64:function(t,e,i){this._set64(u,t,e,i)},setUint64:function(t,e,i){this._set64(o,t,e,i)},_setUint32:function(t,e,i){this._setBytes(t,[255&e,e>>>8&255,e>>>16&255,e>>>24],i)},_setUint16:function(t,e,i){this._setBytes(t,[255&e,e>>>8&255],i)},_setUint8:function(t,e){this._setBytes(t,[255&e])},setUnsigned:function(t,e,i){var n=this._getBitRangeData(i,t),r=n.wideValue,f=n.bytes;r&=~(~(-1<<i)<<-this._bitOffset),r|=(32>i?e&~(-1<<i):e)<<-this._bitOffset;for(var s=f.length-1;s>=0;s--)f[s]=255&r,r>>>=8;this._setBytes(n.start,f,!0)}},l={Int8:"Int8",Int16:"Int16",Int32:"Int32",Uint8:"UInt8",Uint16:"UInt16",Uint32:"UInt32",Float32:"Float",Float64:"Double"};y._nodeBufferAction=function(t,e,i,n,r){this._offset=i+c[t];var f=l[t]+("Int8"===t||"Uint8"===t?"":n?"LE":"BE");return i+=this.byteOffset,e?this.buffer["read"+f](i):this.buffer["write"+f](r,i)};for(var g in c)!function(t){y["get"+t]=function(e,i){return this._action(t,!0,e,i)},y["set"+t]=function(e,i,n){this._action(t,!1,e,n,i)}}(g);y._setInt32=y._setUint32,y._setInt16=y._setUint16,y._setInt8=y._setUint8,y.setSigned=y.setUnsigned;for(var B in y)"set"===B.slice(0,3)&&!function(t){y["write"+t]=function(){Array.prototype.unshift.call(arguments,void 0),this["set"+t].apply(this,arguments)}}(B.slice(3));return r});

}).call(this,require("buffer").Buffer)

},{"buffer":2}],10:[function(require,module,exports){
"use strict";function Inflate(t){if(!(this instanceof Inflate))return new Inflate(t);this.options=utils.assign({chunkSize:16384,windowBits:0,to:""},t||{});var i=this.options;i.raw&&i.windowBits>=0&&i.windowBits<16&&(i.windowBits=-i.windowBits,0===i.windowBits&&(i.windowBits=-15)),!(i.windowBits>=0&&i.windowBits<16)||t&&t.windowBits||(i.windowBits+=32),i.windowBits>15&&i.windowBits<48&&0===(15&i.windowBits)&&(i.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZStream,this.strm.avail_out=0;var n=zlib_inflate.inflateInit2(this.strm,i.windowBits);if(n!==c.Z_OK)throw new Error(msg[n]);this.header=new GZheader,zlib_inflate.inflateGetHeader(this.strm,this.header)}function inflate(t,i){var n=new Inflate(i);if(n.push(t,!0),n.err)throw n.msg;return n.result}function inflateRaw(t,i){return i=i||{},i.raw=!0,inflate(t,i)}var zlib_inflate=require("./zlib/inflate"),utils=require("./utils/common"),strings=require("./utils/strings"),c=require("./zlib/constants"),msg=require("./zlib/messages"),ZStream=require("./zlib/zstream"),GZheader=require("./zlib/gzheader"),toString=Object.prototype.toString;Inflate.prototype.push=function(t,i){var n,s,e,r,o,a,u=this.strm,l=this.options.chunkSize,h=this.options.dictionary,_=!1;if(this.ended)return!1;s=i===~~i?i:i===!0?c.Z_FINISH:c.Z_NO_FLUSH,"string"==typeof t?u.input=strings.binstring2buf(t):"[object ArrayBuffer]"===toString.call(t)?u.input=new Uint8Array(t):u.input=t,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=new utils.Buf8(l),u.next_out=0,u.avail_out=l),n=zlib_inflate.inflate(u,c.Z_NO_FLUSH),n===c.Z_NEED_DICT&&h&&(a="string"==typeof h?strings.string2buf(h):"[object ArrayBuffer]"===toString.call(h)?new Uint8Array(h):h,n=zlib_inflate.inflateSetDictionary(this.strm,a)),n===c.Z_BUF_ERROR&&_===!0&&(n=c.Z_OK,_=!1),n!==c.Z_STREAM_END&&n!==c.Z_OK)return this.onEnd(n),this.ended=!0,!1;u.next_out&&(0!==u.avail_out&&n!==c.Z_STREAM_END&&(0!==u.avail_in||s!==c.Z_FINISH&&s!==c.Z_SYNC_FLUSH)||("string"===this.options.to?(e=strings.utf8border(u.output,u.next_out),r=u.next_out-e,o=strings.buf2string(u.output,e),u.next_out=r,u.avail_out=l-r,r&&utils.arraySet(u.output,u.output,e,r,0),this.onData(o)):this.onData(utils.shrinkBuf(u.output,u.next_out)))),0===u.avail_in&&0===u.avail_out&&(_=!0)}while((u.avail_in>0||0===u.avail_out)&&n!==c.Z_STREAM_END);return n===c.Z_STREAM_END&&(s=c.Z_FINISH),s===c.Z_FINISH?(n=zlib_inflate.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===c.Z_OK):s!==c.Z_SYNC_FLUSH||(this.onEnd(c.Z_OK),u.avail_out=0,!0)},Inflate.prototype.onData=function(t){this.chunks.push(t)},Inflate.prototype.onEnd=function(t){t===c.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=utils.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},exports.Inflate=Inflate,exports.inflate=inflate,exports.inflateRaw=inflateRaw,exports.ungzip=inflate;

},{"./utils/common":11,"./utils/strings":12,"./zlib/constants":14,"./zlib/gzheader":16,"./zlib/inflate":18,"./zlib/messages":20,"./zlib/zstream":21}],11:[function(require,module,exports){
"use strict";var TYPED_OK="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;exports.assign=function(r){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var e=t.shift();if(e){if("object"!=typeof e)throw new TypeError(e+"must be non-object");for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n])}}return r},exports.shrinkBuf=function(r,t){return r.length===t?r:r.subarray?r.subarray(0,t):(r.length=t,r)};var fnTyped={arraySet:function(r,t,e,n,a){if(t.subarray&&r.subarray)return void r.set(t.subarray(e,e+n),a);for(var o=0;o<n;o++)r[a+o]=t[e+o]},flattenChunks:function(r){var t,e,n,a,o,s;for(n=0,t=0,e=r.length;t<e;t++)n+=r[t].length;for(s=new Uint8Array(n),a=0,t=0,e=r.length;t<e;t++)o=r[t],s.set(o,a),a+=o.length;return s}},fnUntyped={arraySet:function(r,t,e,n,a){for(var o=0;o<n;o++)r[a+o]=t[e+o]},flattenChunks:function(r){return[].concat.apply([],r)}};exports.setTyped=function(r){r?(exports.Buf8=Uint8Array,exports.Buf16=Uint16Array,exports.Buf32=Int32Array,exports.assign(exports,fnTyped)):(exports.Buf8=Array,exports.Buf16=Array,exports.Buf32=Array,exports.assign(exports,fnUntyped))},exports.setTyped(TYPED_OK);

},{}],12:[function(require,module,exports){
"use strict";function buf2binstring(r,t){if(t<65537&&(r.subarray&&STR_APPLY_UIA_OK||!r.subarray&&STR_APPLY_OK))return String.fromCharCode.apply(null,utils.shrinkBuf(r,t));for(var n="",e=0;e<t;e++)n+=String.fromCharCode(r[e]);return n}var utils=require("./common"),STR_APPLY_OK=!0,STR_APPLY_UIA_OK=!0;try{String.fromCharCode.apply(null,[0])}catch(r){STR_APPLY_OK=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(r){STR_APPLY_UIA_OK=!1}for(var _utf8len=new utils.Buf8(256),q=0;q<256;q++)_utf8len[q]=q>=252?6:q>=248?5:q>=240?4:q>=224?3:q>=192?2:1;_utf8len[254]=_utf8len[254]=1,exports.string2buf=function(r){var t,n,e,u,f,o=r.length,i=0;for(u=0;u<o;u++)n=r.charCodeAt(u),55296===(64512&n)&&u+1<o&&(e=r.charCodeAt(u+1),56320===(64512&e)&&(n=65536+(n-55296<<10)+(e-56320),u++)),i+=n<128?1:n<2048?2:n<65536?3:4;for(t=new utils.Buf8(i),f=0,u=0;f<i;u++)n=r.charCodeAt(u),55296===(64512&n)&&u+1<o&&(e=r.charCodeAt(u+1),56320===(64512&e)&&(n=65536+(n-55296<<10)+(e-56320),u++)),n<128?t[f++]=n:n<2048?(t[f++]=192|n>>>6,t[f++]=128|63&n):n<65536?(t[f++]=224|n>>>12,t[f++]=128|n>>>6&63,t[f++]=128|63&n):(t[f++]=240|n>>>18,t[f++]=128|n>>>12&63,t[f++]=128|n>>>6&63,t[f++]=128|63&n);return t},exports.buf2binstring=function(r){return buf2binstring(r,r.length)},exports.binstring2buf=function(r){for(var t=new utils.Buf8(r.length),n=0,e=t.length;n<e;n++)t[n]=r.charCodeAt(n);return t},exports.buf2string=function(r,t){var n,e,u,f,o=t||r.length,i=new Array(2*o);for(e=0,n=0;n<o;)if(u=r[n++],u<128)i[e++]=u;else if(f=_utf8len[u],f>4)i[e++]=65533,n+=f-1;else{for(u&=2===f?31:3===f?15:7;f>1&&n<o;)u=u<<6|63&r[n++],f--;f>1?i[e++]=65533:u<65536?i[e++]=u:(u-=65536,i[e++]=55296|u>>10&1023,i[e++]=56320|1023&u)}return buf2binstring(i,e)},exports.utf8border=function(r,t){var n;for(t=t||r.length,t>r.length&&(t=r.length),n=t-1;n>=0&&128===(192&r[n]);)n--;return n<0?t:0===n?t:n+_utf8len[r[n]]>t?n:t};

},{"./common":11}],13:[function(require,module,exports){
"use strict";function adler32(e,r,o,t){for(var d=65535&e|0,l=e>>>16&65535|0,u=0;0!==o;){u=o>2e3?2e3:o,o-=u;do d=d+r[t++]|0,l=l+d|0;while(--u);d%=65521,l%=65521}return d|l<<16|0}module.exports=adler32;

},{}],14:[function(require,module,exports){
"use strict";module.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};

},{}],15:[function(require,module,exports){
"use strict";function makeTable(){for(var r,a=[],c=0;c<256;c++){r=c;for(var e=0;e<8;e++)r=1&r?3988292384^r>>>1:r>>>1;a[c]=r}return a}function crc32(r,a,c,e){var o=crcTable,t=e+c;r^=-1;for(var n=e;n<t;n++)r=r>>>8^o[255&(r^a[n])];return r^-1}var crcTable=makeTable();module.exports=crc32;

},{}],16:[function(require,module,exports){
"use strict";function GZheader(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}module.exports=GZheader;

},{}],17:[function(require,module,exports){
"use strict";var BAD=30,TYPE=12;module.exports=function(i,e){var o,a,t,d,n,l,s,f,r,b,c,u,v,m,w,h,k,_,x,g,A,B,D,p,E;o=i.state,a=i.next_in,p=i.input,t=a+(i.avail_in-5),d=i.next_out,E=i.output,n=d-(e-i.avail_out),l=d+(i.avail_out-257),s=o.dmax,f=o.wsize,r=o.whave,b=o.wnext,c=o.window,u=o.hold,v=o.bits,m=o.lencode,w=o.distcode,h=(1<<o.lenbits)-1,k=(1<<o.distbits)-1;i:do{v<15&&(u+=p[a++]<<v,v+=8,u+=p[a++]<<v,v+=8),_=m[u&h];e:for(;;){if(x=_>>>24,u>>>=x,v-=x,x=_>>>16&255,0===x)E[d++]=65535&_;else{if(!(16&x)){if(0===(64&x)){_=m[(65535&_)+(u&(1<<x)-1)];continue e}if(32&x){o.mode=TYPE;break i}i.msg="invalid literal/length code",o.mode=BAD;break i}g=65535&_,x&=15,x&&(v<x&&(u+=p[a++]<<v,v+=8),g+=u&(1<<x)-1,u>>>=x,v-=x),v<15&&(u+=p[a++]<<v,v+=8,u+=p[a++]<<v,v+=8),_=w[u&k];o:for(;;){if(x=_>>>24,u>>>=x,v-=x,x=_>>>16&255,!(16&x)){if(0===(64&x)){_=w[(65535&_)+(u&(1<<x)-1)];continue o}i.msg="invalid distance code",o.mode=BAD;break i}if(A=65535&_,x&=15,v<x&&(u+=p[a++]<<v,v+=8,v<x&&(u+=p[a++]<<v,v+=8)),A+=u&(1<<x)-1,A>s){i.msg="invalid distance too far back",o.mode=BAD;break i}if(u>>>=x,v-=x,x=d-n,A>x){if(x=A-x,x>r&&o.sane){i.msg="invalid distance too far back",o.mode=BAD;break i}if(B=0,D=c,0===b){if(B+=f-x,x<g){g-=x;do E[d++]=c[B++];while(--x);B=d-A,D=E}}else if(b<x){if(B+=f+b-x,x-=b,x<g){g-=x;do E[d++]=c[B++];while(--x);if(B=0,b<g){x=b,g-=x;do E[d++]=c[B++];while(--x);B=d-A,D=E}}}else if(B+=b-x,x<g){g-=x;do E[d++]=c[B++];while(--x);B=d-A,D=E}for(;g>2;)E[d++]=D[B++],E[d++]=D[B++],E[d++]=D[B++],g-=3;g&&(E[d++]=D[B++],g>1&&(E[d++]=D[B++]))}else{B=d-A;do E[d++]=E[B++],E[d++]=E[B++],E[d++]=E[B++],g-=3;while(g>2);g&&(E[d++]=E[B++],g>1&&(E[d++]=E[B++]))}break}}break}}while(a<t&&d<l);g=v>>3,a-=g,v-=g<<3,u&=(1<<v)-1,i.next_in=a,i.next_out=d,i.avail_in=a<t?5+(t-a):5-(a-t),i.avail_out=d<l?257+(l-d):257-(d-l),o.hold=u,o.bits=v};

},{}],18:[function(require,module,exports){
"use strict";function zswap32(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function InflateState(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new utils.Buf16(320),this.work=new utils.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function inflateResetKeep(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=HEAD,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new utils.Buf32(ENOUGH_LENS),t.distcode=t.distdyn=new utils.Buf32(ENOUGH_DISTS),t.sane=1,t.back=-1,Z_OK):Z_STREAM_ERROR}function inflateReset(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,inflateResetKeep(e)):Z_STREAM_ERROR}function inflateReset2(e,t){var a,i;return e&&e.state?(i=e.state,t<0?(a=0,t=-t):(a=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?Z_STREAM_ERROR:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=a,i.wbits=t,inflateReset(e))):Z_STREAM_ERROR}function inflateInit2(e,t){var a,i;return e?(i=new InflateState,e.state=i,i.window=null,a=inflateReset2(e,t),a!==Z_OK&&(e.state=null),a):Z_STREAM_ERROR}function inflateInit(e){return inflateInit2(e,DEF_WBITS)}function fixedtables(e){if(virgin){var t;for(lenfix=new utils.Buf32(512),distfix=new utils.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(inflate_table(LENS,e.lens,0,288,lenfix,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;inflate_table(DISTS,e.lens,0,32,distfix,0,e.work,{bits:5}),virgin=!1}e.lencode=lenfix,e.lenbits=9,e.distcode=distfix,e.distbits=5}function updatewindow(e,t,a,i){var n,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new utils.Buf8(s.wsize)),i>=s.wsize?(utils.arraySet(s.window,t,a-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):(n=s.wsize-s.wnext,n>i&&(n=i),utils.arraySet(s.window,t,a-i,n,s.wnext),i-=n,i?(utils.arraySet(s.window,t,a-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0}function inflate(e,t){var a,i,n,s,l,r,o,d,f,c,h,E,b,_,k,m,w,u,R,T,D,g,S,x,A=0,v=new utils.Buf8(4),O=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return Z_STREAM_ERROR;a=e.state,a.mode===TYPE&&(a.mode=TYPEDO),l=e.next_out,n=e.output,o=e.avail_out,s=e.next_in,i=e.input,r=e.avail_in,d=a.hold,f=a.bits,c=r,h=o,g=Z_OK;e:for(;;)switch(a.mode){case HEAD:if(0===a.wrap){a.mode=TYPEDO;break}for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(2&a.wrap&&35615===d){a.check=0,v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0),d=0,f=0,a.mode=FLAGS;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",a.mode=BAD;break}if((15&d)!==Z_DEFLATED){e.msg="unknown compression method",a.mode=BAD;break}if(d>>>=4,f-=4,D=(15&d)+8,0===a.wbits)a.wbits=D;else if(D>a.wbits){e.msg="invalid window size",a.mode=BAD;break}a.dmax=1<<D,e.adler=a.check=1,a.mode=512&d?DICTID:TYPE,d=0,f=0;break;case FLAGS:for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(a.flags=d,(255&a.flags)!==Z_DEFLATED){e.msg="unknown compression method",a.mode=BAD;break}if(57344&a.flags){e.msg="unknown header flags set",a.mode=BAD;break}a.head&&(a.head.text=d>>8&1),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0,a.mode=TIME;case TIME:for(;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.head&&(a.head.time=d),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,v[2]=d>>>16&255,v[3]=d>>>24&255,a.check=crc32(a.check,v,4,0)),d=0,f=0,a.mode=OS;case OS:for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.head&&(a.head.xflags=255&d,a.head.os=d>>8),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0,a.mode=EXLEN;case EXLEN:if(1024&a.flags){for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.length=d,a.head&&(a.head.extra_len=d),512&a.flags&&(v[0]=255&d,v[1]=d>>>8&255,a.check=crc32(a.check,v,2,0)),d=0,f=0}else a.head&&(a.head.extra=null);a.mode=EXTRA;case EXTRA:if(1024&a.flags&&(E=a.length,E>r&&(E=r),E&&(a.head&&(D=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),utils.arraySet(a.head.extra,i,s,E,D)),512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,a.length-=E),a.length))break e;a.length=0,a.mode=NAME;case NAME:if(2048&a.flags){if(0===r)break e;E=0;do D=i[s+E++],a.head&&D&&a.length<65536&&(a.head.name+=String.fromCharCode(D));while(D&&E<r);if(512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,D)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=COMMENT;case COMMENT:if(4096&a.flags){if(0===r)break e;E=0;do D=i[s+E++],a.head&&D&&a.length<65536&&(a.head.comment+=String.fromCharCode(D));while(D&&E<r);if(512&a.flags&&(a.check=crc32(a.check,i,E,s)),r-=E,s+=E,D)break e}else a.head&&(a.head.comment=null);a.mode=HCRC;case HCRC:if(512&a.flags){for(;f<16;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d!==(65535&a.check)){e.msg="header crc mismatch",a.mode=BAD;break}d=0,f=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=TYPE;break;case DICTID:for(;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}e.adler=a.check=zswap32(d),d=0,f=0,a.mode=DICT;case DICT:if(0===a.havedict)return e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,Z_NEED_DICT;e.adler=a.check=1,a.mode=TYPE;case TYPE:if(t===Z_BLOCK||t===Z_TREES)break e;case TYPEDO:if(a.last){d>>>=7&f,f-=7&f,a.mode=CHECK;break}for(;f<3;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}switch(a.last=1&d,d>>>=1,f-=1,3&d){case 0:a.mode=STORED;break;case 1:if(fixedtables(a),a.mode=LEN_,t===Z_TREES){d>>>=2,f-=2;break e}break;case 2:a.mode=TABLE;break;case 3:e.msg="invalid block type",a.mode=BAD}d>>>=2,f-=2;break;case STORED:for(d>>>=7&f,f-=7&f;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if((65535&d)!==(d>>>16^65535)){e.msg="invalid stored block lengths",a.mode=BAD;break}if(a.length=65535&d,d=0,f=0,a.mode=COPY_,t===Z_TREES)break e;case COPY_:a.mode=COPY;case COPY:if(E=a.length){if(E>r&&(E=r),E>o&&(E=o),0===E)break e;utils.arraySet(n,i,s,E,l),r-=E,s+=E,o-=E,l+=E,a.length-=E;break}a.mode=TYPE;break;case TABLE:for(;f<14;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(a.nlen=(31&d)+257,d>>>=5,f-=5,a.ndist=(31&d)+1,d>>>=5,f-=5,a.ncode=(15&d)+4,d>>>=4,f-=4,a.nlen>286||a.ndist>30){e.msg="too many length or distance symbols",a.mode=BAD;break}a.have=0,a.mode=LENLENS;case LENLENS:for(;a.have<a.ncode;){for(;f<3;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.lens[O[a.have++]]=7&d,d>>>=3,f-=3}for(;a.have<19;)a.lens[O[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,S={bits:a.lenbits},g=inflate_table(CODES,a.lens,0,19,a.lencode,0,a.work,S),a.lenbits=S.bits,g){e.msg="invalid code lengths set",a.mode=BAD;break}a.have=0,a.mode=CODELENS;case CODELENS:for(;a.have<a.nlen+a.ndist;){for(;A=a.lencode[d&(1<<a.lenbits)-1],k=A>>>24,m=A>>>16&255,w=65535&A,!(k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(w<16)d>>>=k,f-=k,a.lens[a.have++]=w;else{if(16===w){for(x=k+2;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d>>>=k,f-=k,0===a.have){e.msg="invalid bit length repeat",a.mode=BAD;break}D=a.lens[a.have-1],E=3+(3&d),d>>>=2,f-=2}else if(17===w){for(x=k+3;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=k,f-=k,D=0,E=3+(7&d),d>>>=3,f-=3}else{for(x=k+7;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=k,f-=k,D=0,E=11+(127&d),d>>>=7,f-=7}if(a.have+E>a.nlen+a.ndist){e.msg="invalid bit length repeat",a.mode=BAD;break}for(;E--;)a.lens[a.have++]=D}}if(a.mode===BAD)break;if(0===a.lens[256]){e.msg="invalid code -- missing end-of-block",a.mode=BAD;break}if(a.lenbits=9,S={bits:a.lenbits},g=inflate_table(LENS,a.lens,0,a.nlen,a.lencode,0,a.work,S),a.lenbits=S.bits,g){e.msg="invalid literal/lengths set",a.mode=BAD;break}if(a.distbits=6,a.distcode=a.distdyn,S={bits:a.distbits},g=inflate_table(DISTS,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,S),a.distbits=S.bits,g){e.msg="invalid distances set",a.mode=BAD;break}if(a.mode=LEN_,t===Z_TREES)break e;case LEN_:a.mode=LEN;case LEN:if(r>=6&&o>=258){e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,inflate_fast(e,h),l=e.next_out,n=e.output,o=e.avail_out,s=e.next_in,i=e.input,r=e.avail_in,d=a.hold,f=a.bits,a.mode===TYPE&&(a.back=-1);break}for(a.back=0;A=a.lencode[d&(1<<a.lenbits)-1],k=A>>>24,m=A>>>16&255,w=65535&A,!(k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(m&&0===(240&m)){for(u=k,R=m,T=w;A=a.lencode[T+((d&(1<<u+R)-1)>>u)],k=A>>>24,m=A>>>16&255,w=65535&A,!(u+k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=u,f-=u,a.back+=u}if(d>>>=k,f-=k,a.back+=k,a.length=w,0===m){a.mode=LIT;break}if(32&m){a.back=-1,a.mode=TYPE;break}if(64&m){e.msg="invalid literal/length code",a.mode=BAD;break}a.extra=15&m,a.mode=LENEXT;case LENEXT:if(a.extra){for(x=a.extra;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.length+=d&(1<<a.extra)-1,d>>>=a.extra,f-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=DIST;case DIST:for(;A=a.distcode[d&(1<<a.distbits)-1],k=A>>>24,m=A>>>16&255,w=65535&A,!(k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(0===(240&m)){for(u=k,R=m,T=w;A=a.distcode[T+((d&(1<<u+R)-1)>>u)],k=A>>>24,m=A>>>16&255,w=65535&A,!(u+k<=f);){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}d>>>=u,f-=u,a.back+=u}if(d>>>=k,f-=k,a.back+=k,64&m){e.msg="invalid distance code",a.mode=BAD;break}a.offset=w,a.extra=15&m,a.mode=DISTEXT;case DISTEXT:if(a.extra){for(x=a.extra;f<x;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}a.offset+=d&(1<<a.extra)-1,d>>>=a.extra,f-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg="invalid distance too far back",a.mode=BAD;break}a.mode=MATCH;case MATCH:if(0===o)break e;if(E=h-o,a.offset>E){if(E=a.offset-E,E>a.whave&&a.sane){e.msg="invalid distance too far back",a.mode=BAD;break}E>a.wnext?(E-=a.wnext,b=a.wsize-E):b=a.wnext-E,E>a.length&&(E=a.length),_=a.window}else _=n,b=l-a.offset,E=a.length;E>o&&(E=o),o-=E,a.length-=E;do n[l++]=_[b++];while(--E);0===a.length&&(a.mode=LEN);break;case LIT:if(0===o)break e;n[l++]=a.length,o--,a.mode=LEN;break;case CHECK:if(a.wrap){for(;f<32;){if(0===r)break e;r--,d|=i[s++]<<f,f+=8}if(h-=o,e.total_out+=h,a.total+=h,h&&(e.adler=a.check=a.flags?crc32(a.check,n,h,l-h):adler32(a.check,n,h,l-h)),h=o,(a.flags?d:zswap32(d))!==a.check){e.msg="incorrect data check",a.mode=BAD;break}d=0,f=0}a.mode=LENGTH;case LENGTH:if(a.wrap&&a.flags){for(;f<32;){if(0===r)break e;r--,d+=i[s++]<<f,f+=8}if(d!==(4294967295&a.total)){e.msg="incorrect length check",a.mode=BAD;break}d=0,f=0}a.mode=DONE;case DONE:g=Z_STREAM_END;break e;case BAD:g=Z_DATA_ERROR;break e;case MEM:return Z_MEM_ERROR;case SYNC:default:return Z_STREAM_ERROR}return e.next_out=l,e.avail_out=o,e.next_in=s,e.avail_in=r,a.hold=d,a.bits=f,(a.wsize||h!==e.avail_out&&a.mode<BAD&&(a.mode<CHECK||t!==Z_FINISH))&&updatewindow(e,e.output,e.next_out,h-e.avail_out)?(a.mode=MEM,Z_MEM_ERROR):(c-=e.avail_in,h-=e.avail_out,e.total_in+=c,e.total_out+=h,a.total+=h,a.wrap&&h&&(e.adler=a.check=a.flags?crc32(a.check,n,h,e.next_out-h):adler32(a.check,n,h,e.next_out-h)),e.data_type=a.bits+(a.last?64:0)+(a.mode===TYPE?128:0)+(a.mode===LEN_||a.mode===COPY_?256:0),(0===c&&0===h||t===Z_FINISH)&&g===Z_OK&&(g=Z_BUF_ERROR),g)}function inflateEnd(e){if(!e||!e.state)return Z_STREAM_ERROR;var t=e.state;return t.window&&(t.window=null),e.state=null,Z_OK}function inflateGetHeader(e,t){var a;return e&&e.state?(a=e.state,0===(2&a.wrap)?Z_STREAM_ERROR:(a.head=t,t.done=!1,Z_OK)):Z_STREAM_ERROR}function inflateSetDictionary(e,t){var a,i,n,s=t.length;return e&&e.state?(a=e.state,0!==a.wrap&&a.mode!==DICT?Z_STREAM_ERROR:a.mode===DICT&&(i=1,i=adler32(i,t,s,0),i!==a.check)?Z_DATA_ERROR:(n=updatewindow(e,t,s,s))?(a.mode=MEM,Z_MEM_ERROR):(a.havedict=1,Z_OK)):Z_STREAM_ERROR}var utils=require("../utils/common"),adler32=require("./adler32"),crc32=require("./crc32"),inflate_fast=require("./inffast"),inflate_table=require("./inftrees"),CODES=0,LENS=1,DISTS=2,Z_FINISH=4,Z_BLOCK=5,Z_TREES=6,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_MEM_ERROR=-4,Z_BUF_ERROR=-5,Z_DEFLATED=8,HEAD=1,FLAGS=2,TIME=3,OS=4,EXLEN=5,EXTRA=6,NAME=7,COMMENT=8,HCRC=9,DICTID=10,DICT=11,TYPE=12,TYPEDO=13,STORED=14,COPY_=15,COPY=16,TABLE=17,LENLENS=18,CODELENS=19,LEN_=20,LEN=21,LENEXT=22,DIST=23,DISTEXT=24,MATCH=25,LIT=26,CHECK=27,LENGTH=28,DONE=29,BAD=30,MEM=31,SYNC=32,ENOUGH_LENS=852,ENOUGH_DISTS=592,MAX_WBITS=15,DEF_WBITS=MAX_WBITS,virgin=!0,lenfix,distfix;exports.inflateReset=inflateReset,exports.inflateReset2=inflateReset2,exports.inflateResetKeep=inflateResetKeep,exports.inflateInit=inflateInit,exports.inflateInit2=inflateInit2,exports.inflate=inflate,exports.inflateEnd=inflateEnd,exports.inflateGetHeader=inflateGetHeader,exports.inflateSetDictionary=inflateSetDictionary,exports.inflateInfo="pako inflate (from Nodeca project)";

},{"../utils/common":11,"./adler32":13,"./crc32":15,"./inffast":17,"./inftrees":19}],19:[function(require,module,exports){
"use strict";var utils=require("../utils/common"),MAXBITS=15,ENOUGH_LENS=852,ENOUGH_DISTS=592,CODES=0,LENS=1,DISTS=2,lbase=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],lext=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],dbase=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],dext=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];module.exports=function(r,S,e,f,t,i,u,o){var E,l,s,n,I,N,T,B,D,O=o.bits,a=0,b=0,A=0,L=0,M=0,X=0,d=0,G=0,H=0,U=0,_=null,x=0,c=new utils.Buf16(MAXBITS+1),m=new utils.Buf16(MAXBITS+1),v=null,w=0;for(a=0;a<=MAXBITS;a++)c[a]=0;for(b=0;b<f;b++)c[S[e+b]]++;for(M=O,L=MAXBITS;L>=1&&0===c[L];L--);if(M>L&&(M=L),0===L)return t[i++]=20971520,t[i++]=20971520,o.bits=1,0;for(A=1;A<L&&0===c[A];A++);for(M<A&&(M=A),G=1,a=1;a<=MAXBITS;a++)if(G<<=1,G-=c[a],G<0)return-1;if(G>0&&(r===CODES||1!==L))return-1;for(m[1]=0,a=1;a<MAXBITS;a++)m[a+1]=m[a]+c[a];for(b=0;b<f;b++)0!==S[e+b]&&(u[m[S[e+b]]++]=b);if(r===CODES?(_=v=u,N=19):r===LENS?(_=lbase,x-=257,v=lext,w-=257,N=256):(_=dbase,v=dext,N=-1),U=0,b=0,a=A,I=i,X=M,d=0,s=-1,H=1<<M,n=H-1,r===LENS&&H>ENOUGH_LENS||r===DISTS&&H>ENOUGH_DISTS)return 1;for(var C=0;;){C++,T=a-d,u[b]<N?(B=0,D=u[b]):u[b]>N?(B=v[w+u[b]],D=_[x+u[b]]):(B=96,D=0),E=1<<a-d,l=1<<X,A=l;do l-=E,t[I+(U>>d)+l]=T<<24|B<<16|D|0;while(0!==l);for(E=1<<a-1;U&E;)E>>=1;if(0!==E?(U&=E-1,U+=E):U=0,b++,0===--c[a]){if(a===L)break;a=S[e+u[b]]}if(a>M&&(U&n)!==s){for(0===d&&(d=M),I+=A,X=a-d,G=1<<X;X+d<L&&(G-=c[X+d],!(G<=0));)X++,G<<=1;if(H+=1<<X,r===LENS&&H>ENOUGH_LENS||r===DISTS&&H>ENOUGH_DISTS)return 1;s=U&n,t[s]=M<<24|X<<16|I-i|0}}return 0!==U&&(t[I+U]=a-d<<24|64<<16|0),o.bits=M,0};

},{"../utils/common":11}],20:[function(require,module,exports){
"use strict";module.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};

},{}],21:[function(require,module,exports){
"use strict";function ZStream(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}module.exports=ZStream;

},{}],22:[function(require,module,exports){
(function (process){
!function(t){"use strict";if("function"==typeof bootstrap)bootstrap("promise",t);else if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define(t);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else{if("undefined"==typeof window&&"undefined"==typeof self)throw new Error("This environment was not anticipated by Q. Please file a bug.");var n="undefined"!=typeof window?window:self,e=n.Q;n.Q=t(),n.Q.noConflict=function(){return n.Q=e,this}}}(function(){"use strict";function t(t){return function(){return J.apply(t,arguments)}}function n(t){return t===Object(t)}function e(t){return"[object StopIteration]"===nt(t)||t instanceof H}function r(t,n){if(V&&n.stack&&"object"==typeof t&&null!==t&&t.stack&&t.stack.indexOf(et)===-1){for(var e=[],r=n;r;r=r.source)r.stack&&e.unshift(r.stack);e.unshift(t.stack);var i=e.join("\n"+et+"\n");t.stack=o(i)}}function o(t){for(var n=t.split("\n"),e=[],r=0;r<n.length;++r){var o=n[r];c(o)||i(o)||!o||e.push(o)}return e.join("\n")}function i(t){return t.indexOf("(module.js:")!==-1||t.indexOf("(node.js:")!==-1}function u(t){var n=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(n)return[n[1],Number(n[2])];var e=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(e)return[e[1],Number(e[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function c(t){var n=u(t);if(!n)return!1;var e=n[0],r=n[1];return e===G&&r>=_&&r<=ct}function f(){if(V)try{throw new Error}catch(r){var t=r.stack.split("\n"),n=t[0].indexOf("@")>0?t[1]:t[2],e=u(n);if(!e)return;return G=e[0],e[1]}}function s(t,n,e){return function(){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(n+" is deprecated, use "+e+" instead.",new Error("").stack),t.apply(t,arguments)}}function p(t){return t instanceof h?t:k(t)?O(t):E(t)}function a(){function t(t){n=t,i.source=t,L(e,function(n,e){p.nextTick(function(){t.promiseDispatch.apply(t,e)})},void 0),e=void 0,r=void 0}var n,e=[],r=[],o=Y(a.prototype),i=Y(h.prototype);if(i.promiseDispatch=function(t,o,i){var u=K(arguments);e?(e.push(u),"when"===o&&i[1]&&r.push(i[1])):p.nextTick(function(){n.promiseDispatch.apply(n,u)})},i.valueOf=function(){if(e)return i;var t=v(n);return m(t)&&(n=t),t},i.inspect=function(){return n?n.inspect():{state:"pending"}},p.longStackSupport&&V)try{throw new Error}catch(t){i.stack=t.stack.substring(t.stack.indexOf("\n")+1)}return o.promise=i,o.resolve=function(e){n||t(p(e))},o.fulfill=function(e){n||t(E(e))},o.reject=function(e){n||t(R(e))},o.notify=function(t){n||L(r,function(n,e){p.nextTick(function(){e(t)})},void 0)},o}function l(t){if("function"!=typeof t)throw new TypeError("resolver must be a function.");var n=a();try{t(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}return n.promise}function d(t){return l(function(n,e){for(var r=0,o=t.length;r<o;r++)p(t[r]).then(n,e)})}function h(t,n,e){void 0===n&&(n=function(t){return R(new Error("Promise does not support operation: "+t))}),void 0===e&&(e=function(){return{state:"unknown"}});var r=Y(h.prototype);if(r.promiseDispatch=function(e,o,i){var u;try{u=t[o]?t[o].apply(r,i):n.call(r,o,i)}catch(t){u=R(t)}e&&e(u)},r.inspect=e,e){var o=e();"rejected"===o.state&&(r.exception=o.reason),r.valueOf=function(){var t=e();return"pending"===t.state||"rejected"===t.state?r:t.value}}return r}function y(t,n,e,r){return p(t).then(n,e,r)}function v(t){if(m(t)){var n=t.inspect();if("fulfilled"===n.state)return n.value}return t}function m(t){return t instanceof h}function k(t){return n(t)&&"function"==typeof t.then}function j(t){return m(t)&&"pending"===t.inspect().state}function w(t){return!m(t)||"fulfilled"===t.inspect().state}function g(t){return m(t)&&"rejected"===t.inspect().state}function b(){rt.length=0,ot.length=0,ut||(ut=!0)}function x(t,n){ut&&("object"==typeof process&&"function"==typeof process.emit&&p.nextTick.runAfter(function(){W(ot,t)!==-1&&(process.emit("unhandledRejection",n,t),it.push(t))}),ot.push(t),n&&"undefined"!=typeof n.stack?rt.push(n.stack):rt.push("(no stack) "+n))}function T(t){if(ut){var n=W(ot,t);n!==-1&&("object"==typeof process&&"function"==typeof process.emit&&p.nextTick.runAfter(function(){var e=W(it,t);e!==-1&&(process.emit("rejectionHandled",rt[n],t),it.splice(e,1))}),ot.splice(n,1),rt.splice(n,1))}}function R(t){var n=h({when:function(n){return n&&T(this),n?n(t):this}},function(){return this},function(){return{state:"rejected",reason:t}});return x(n,t),n}function E(t){return h({when:function(){return t},get:function(n){return t[n]},set:function(n,e){t[n]=e},delete:function(n){delete t[n]},post:function(n,e){return null===n||void 0===n?t.apply(void 0,e):t[n].apply(t,e)},apply:function(n,e){return t.apply(n,e)},keys:function(){return tt(t)}},void 0,function(){return{state:"fulfilled",value:t}})}function O(t){var n=a();return p.nextTick(function(){try{t.then(n.resolve,n.reject,n.notify)}catch(t){n.reject(t)}}),n.promise}function S(t){return h({isDef:function(){}},function(n,e){return A(t,n,e)},function(){return p(t).inspect()})}function N(t,n,e){return p(t).spread(n,e)}function D(t){return function(){function n(t,n){var u;if("undefined"==typeof StopIteration){try{u=r[t](n)}catch(t){return R(t)}return u.done?p(u.value):y(u.value,o,i)}try{u=r[t](n)}catch(t){return e(t)?p(t.value):R(t)}return y(u,o,i)}var r=t.apply(this,arguments),o=n.bind(n,"next"),i=n.bind(n,"throw");return o()}}function P(t){p.done(p.async(t)())}function C(t){throw new H(t)}function Q(t){return function(){return N([this,I(arguments)],function(n,e){return t.apply(n,e)})}}function A(t,n,e){return p(t).dispatch(n,e)}function I(t){return y(t,function(t){var n=0,e=a();return L(t,function(r,o,i){var u;m(o)&&"fulfilled"===(u=o.inspect()).state?t[i]=u.value:(++n,y(o,function(r){t[i]=r,0===--n&&e.resolve(t)},e.reject,function(t){e.notify({index:i,value:t})}))},void 0),0===n&&e.resolve(t),e.promise})}function U(t){if(0===t.length)return p.resolve();var n=p.defer(),e=0;return L(t,function(r,o,i){function u(t){n.resolve(t)}function c(){e--,0===e&&n.reject(new Error("Can't get fulfillment value from any promise, all promises were rejected."))}function f(t){n.notify({index:i,value:t})}var s=t[i];e++,y(s,u,c,f)},void 0),n.promise}function F(t){return y(t,function(t){return t=X(t,p),y(I(X(t,function(t){return y(t,q,q)})),function(){return t})})}function M(t){return p(t).allSettled()}function B(t,n){return p(t).then(void 0,void 0,n)}function $(t,n){return p(t).nodeify(n)}var V=!1;try{throw new Error}catch(t){V=!!t.stack}var G,H,_=f(),q=function(){},z=function(){function t(){for(var t,r;e.next;)e=e.next,t=e.task,e.task=void 0,r=e.domain,r&&(e.domain=void 0,r.enter()),n(t,r);for(;c.length;)t=c.pop(),n(t);o=!1}function n(n,e){try{n()}catch(n){if(u)throw e&&e.exit(),setTimeout(t,0),e&&e.enter(),n;setTimeout(function(){throw n},0)}e&&e.exit()}var e={task:void 0,next:null},r=e,o=!1,i=void 0,u=!1,c=[];if(z=function(t){r=r.next={task:t,domain:u&&process.domain,next:null},o||(o=!0,i())},"object"==typeof process&&"[object process]"===process.toString()&&process.nextTick)u=!0,i=function(){process.nextTick(t)};else if("function"==typeof setImmediate)i="undefined"!=typeof window?setImmediate.bind(window,t):function(){setImmediate(t)};else if("undefined"!=typeof MessageChannel){var f=new MessageChannel;f.port1.onmessage=function(){i=s,f.port1.onmessage=t,t()};var s=function(){f.port2.postMessage(0)};i=function(){setTimeout(t,0),s()}}else i=function(){setTimeout(t,0)};return z.runAfter=function(t){c.push(t),o||(o=!0,i())},z}(),J=Function.call,K=t(Array.prototype.slice),L=t(Array.prototype.reduce||function(t,n){var e=0,r=this.length;if(1===arguments.length)for(;;){if(e in this){n=this[e++];break}if(++e>=r)throw new TypeError}for(;e<r;e++)e in this&&(n=t(n,this[e],e));return n}),W=t(Array.prototype.indexOf||function(t){for(var n=0;n<this.length;n++)if(this[n]===t)return n;return-1}),X=t(Array.prototype.map||function(t,n){var e=this,r=[];return L(e,function(o,i,u){r.push(t.call(n,i,u,e))},void 0),r}),Y=Object.create||function(t){function n(){}return n.prototype=t,new n},Z=t(Object.prototype.hasOwnProperty),tt=Object.keys||function(t){var n=[];for(var e in t)Z(t,e)&&n.push(e);return n},nt=t(Object.prototype.toString);H="undefined"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var et="From previous event:";p.resolve=p,p.nextTick=z,p.longStackSupport=!1,"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(p.longStackSupport=!0),p.defer=a,a.prototype.makeNodeResolver=function(){var t=this;return function(n,e){n?t.reject(n):arguments.length>2?t.resolve(K(arguments,1)):t.resolve(e)}},p.Promise=l,p.promise=l,l.race=d,l.all=I,l.reject=R,l.resolve=p,p.passByCopy=function(t){return t},h.prototype.passByCopy=function(){return this},p.join=function(t,n){return p(t).join(n)},h.prototype.join=function(t){return p([this,t]).spread(function(t,n){if(t===n)return t;throw new Error("Can't join: not the same: "+t+" "+n)})},p.race=d,h.prototype.race=function(){return this.then(p.race)},p.makePromise=h,h.prototype.toString=function(){return"[object Promise]"},h.prototype.then=function(t,n,e){function o(n){try{return"function"==typeof t?t(n):n}catch(t){return R(t)}}function i(t){if("function"==typeof n){r(t,c);try{return n(t)}catch(t){return R(t)}}return R(t)}function u(t){return"function"==typeof e?e(t):t}var c=this,f=a(),s=!1;return p.nextTick(function(){c.promiseDispatch(function(t){s||(s=!0,f.resolve(o(t)))},"when",[function(t){s||(s=!0,f.resolve(i(t)))}])}),c.promiseDispatch(void 0,"when",[void 0,function(t){var n,e=!1;try{n=u(t)}catch(t){if(e=!0,!p.onerror)throw t;p.onerror(t)}e||f.notify(n)}]),f.promise},p.tap=function(t,n){return p(t).tap(n)},h.prototype.tap=function(t){return t=p(t),this.then(function(n){return t.fcall(n).thenResolve(n)})},p.when=y,h.prototype.thenResolve=function(t){return this.then(function(){return t})},p.thenResolve=function(t,n){return p(t).thenResolve(n)},h.prototype.thenReject=function(t){return this.then(function(){throw t})},p.thenReject=function(t,n){return p(t).thenReject(n)},p.nearer=v,p.isPromise=m,p.isPromiseAlike=k,p.isPending=j,h.prototype.isPending=function(){return"pending"===this.inspect().state},p.isFulfilled=w,h.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state},p.isRejected=g,h.prototype.isRejected=function(){return"rejected"===this.inspect().state};var rt=[],ot=[],it=[],ut=!0;p.resetUnhandledRejections=b,p.getUnhandledReasons=function(){return rt.slice()},p.stopUnhandledRejectionTracking=function(){b(),ut=!1},b(),p.reject=R,p.fulfill=E,p.master=S,p.spread=N,h.prototype.spread=function(t,n){return this.all().then(function(n){return t.apply(void 0,n)},n)},p.async=D,p.spawn=P,p.return=C,p.promised=Q,p.dispatch=A,h.prototype.dispatch=function(t,n){var e=this,r=a();return p.nextTick(function(){e.promiseDispatch(r.resolve,t,n)}),r.promise},p.get=function(t,n){return p(t).dispatch("get",[n])},h.prototype.get=function(t){return this.dispatch("get",[t])},p.set=function(t,n,e){return p(t).dispatch("set",[n,e])},h.prototype.set=function(t,n){return this.dispatch("set",[t,n])},p.del=p.delete=function(t,n){return p(t).dispatch("delete",[n])},h.prototype.del=h.prototype.delete=function(t){return this.dispatch("delete",[t])},p.mapply=p.post=function(t,n,e){return p(t).dispatch("post",[n,e])},h.prototype.mapply=h.prototype.post=function(t,n){return this.dispatch("post",[t,n])},p.send=p.mcall=p.invoke=function(t,n){return p(t).dispatch("post",[n,K(arguments,2)])},h.prototype.send=h.prototype.mcall=h.prototype.invoke=function(t){return this.dispatch("post",[t,K(arguments,1)])},p.fapply=function(t,n){return p(t).dispatch("apply",[void 0,n])},h.prototype.fapply=function(t){return this.dispatch("apply",[void 0,t])},p.try=p.fcall=function(t){return p(t).dispatch("apply",[void 0,K(arguments,1)])},h.prototype.fcall=function(){return this.dispatch("apply",[void 0,K(arguments)])},p.fbind=function(t){var n=p(t),e=K(arguments,1);return function(){return n.dispatch("apply",[this,e.concat(K(arguments))])}},h.prototype.fbind=function(){var t=this,n=K(arguments);return function(){return t.dispatch("apply",[this,n.concat(K(arguments))])}},p.keys=function(t){return p(t).dispatch("keys",[])},h.prototype.keys=function(){return this.dispatch("keys",[])},p.all=I,h.prototype.all=function(){return I(this)},p.any=U,h.prototype.any=function(){return U(this)},p.allResolved=s(F,"allResolved","allSettled"),h.prototype.allResolved=function(){return F(this)},p.allSettled=M,h.prototype.allSettled=function(){return this.then(function(t){return I(X(t,function(t){function n(){return t.inspect()}return t=p(t),t.then(n,n)}))})},p.fail=p.catch=function(t,n){return p(t).then(void 0,n)},h.prototype.fail=h.prototype.catch=function(t){return this.then(void 0,t)},p.progress=B,h.prototype.progress=function(t){return this.then(void 0,void 0,t)},p.fin=p.finally=function(t,n){return p(t).finally(n)},h.prototype.fin=h.prototype.finally=function(t){return t=p(t),this.then(function(n){return t.fcall().then(function(){return n})},function(n){return t.fcall().then(function(){throw n})})},p.done=function(t,n,e,r){return p(t).done(n,e,r)},h.prototype.done=function(t,n,e){var o=function(t){p.nextTick(function(){if(r(t,i),!p.onerror)throw t;p.onerror(t)})},i=t||n||e?this.then(t,n,e):this;"object"==typeof process&&process&&process.domain&&(o=process.domain.bind(o)),i.then(void 0,o)},p.timeout=function(t,n,e){return p(t).timeout(n,e)},h.prototype.timeout=function(t,n){var e=a(),r=setTimeout(function(){n&&"string"!=typeof n||(n=new Error(n||"Timed out after "+t+" ms"),n.code="ETIMEDOUT"),e.reject(n)},t);return this.then(function(t){clearTimeout(r),e.resolve(t)},function(t){clearTimeout(r),e.reject(t)},e.notify),e.promise},p.delay=function(t,n){return void 0===n&&(n=t,t=void 0),p(t).delay(n)},h.prototype.delay=function(t){return this.then(function(n){var e=a();return setTimeout(function(){e.resolve(n)},t),e.promise})},p.nfapply=function(t,n){return p(t).nfapply(n)},h.prototype.nfapply=function(t){var n=a(),e=K(t);return e.push(n.makeNodeResolver()),this.fapply(e).fail(n.reject),n.promise},p.nfcall=function(t){var n=K(arguments,1);return p(t).nfapply(n)},h.prototype.nfcall=function(){var t=K(arguments),n=a();return t.push(n.makeNodeResolver()),this.fapply(t).fail(n.reject),n.promise},p.nfbind=p.denodeify=function(t){var n=K(arguments,1);return function(){var e=n.concat(K(arguments)),r=a();return e.push(r.makeNodeResolver()),p(t).fapply(e).fail(r.reject),r.promise}},h.prototype.nfbind=h.prototype.denodeify=function(){var t=K(arguments);return t.unshift(this),p.denodeify.apply(void 0,t)},p.nbind=function(t,n){var e=K(arguments,2);return function(){function r(){return t.apply(n,arguments)}var o=e.concat(K(arguments)),i=a();return o.push(i.makeNodeResolver()),p(r).fapply(o).fail(i.reject),i.promise}},h.prototype.nbind=function(){var t=K(arguments,0);return t.unshift(this),p.nbind.apply(void 0,t)},p.nmapply=p.npost=function(t,n,e){return p(t).npost(n,e)},h.prototype.nmapply=h.prototype.npost=function(t,n){var e=K(n||[]),r=a();return e.push(r.makeNodeResolver()),this.dispatch("post",[t,e]).fail(r.reject),r.promise},p.nsend=p.nmcall=p.ninvoke=function(t,n){var e=K(arguments,2),r=a();return e.push(r.makeNodeResolver()),p(t).dispatch("post",[n,e]).fail(r.reject),r.promise},h.prototype.nsend=h.prototype.nmcall=h.prototype.ninvoke=function(t){var n=K(arguments,1),e=a();return n.push(e.makeNodeResolver()),this.dispatch("post",[t,n]).fail(e.reject),e.promise},p.nodeify=$,h.prototype.nodeify=function(t){return t?void this.then(function(n){p.nextTick(function(){t(null,n)})},function(n){p.nextTick(function(){t(n)})}):this},p.noConflict=function(){throw new Error("Q.noConflict only works when Q is used as a global")};var ct=f();return p});

}).call(this,require('_process'))

},{"_process":6}],23:[function(require,module,exports){
"use strict";module.exports=require("react/lib/ReactDOM");

},{"react/lib/ReactDOM":58}],24:[function(require,module,exports){
"use strict";var ReactMount=require("./ReactMount"),findDOMNode=require("./findDOMNode"),focusNode=require("fbjs/lib/focusNode"),Mixin={componentDidMount:function(){this.props.autoFocus&&focusNode(findDOMNode(this))}},AutoFocusUtils={Mixin:Mixin,focusDOMComponent:function(){focusNode(ReactMount.getNode(this._rootNodeID))}};module.exports=AutoFocusUtils;

},{"./ReactMount":86,"./findDOMNode":129,"fbjs/lib/focusNode":159}],25:[function(require,module,exports){
"use strict";function isPresto(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function isKeypressCommand(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function getCompositionEventType(e){switch(e){case topLevelTypes.topCompositionStart:return eventTypes.compositionStart;case topLevelTypes.topCompositionEnd:return eventTypes.compositionEnd;case topLevelTypes.topCompositionUpdate:return eventTypes.compositionUpdate}}function isFallbackCompositionStart(e,t){return e===topLevelTypes.topKeyDown&&t.keyCode===START_KEYCODE}function isFallbackCompositionEnd(e,t){switch(e){case topLevelTypes.topKeyUp:return END_KEYCODES.indexOf(t.keyCode)!==-1;case topLevelTypes.topKeyDown:return t.keyCode!==START_KEYCODE;case topLevelTypes.topKeyPress:case topLevelTypes.topMouseDown:case topLevelTypes.topBlur:return!0;default:return!1}}function getDataFromCustomEvent(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function extractCompositionEvent(e,t,o,n,p){var s,i;if(canUseCompositionEvent?s=getCompositionEventType(e):currentComposition?isFallbackCompositionEnd(e,n)&&(s=eventTypes.compositionEnd):isFallbackCompositionStart(e,n)&&(s=eventTypes.compositionStart),!s)return null;useFallbackCompositionData&&(currentComposition||s!==eventTypes.compositionStart?s===eventTypes.compositionEnd&&currentComposition&&(i=currentComposition.getData()):currentComposition=FallbackCompositionState.getPooled(t));var r=SyntheticCompositionEvent.getPooled(s,o,n,p);if(i)r.data=i;else{var a=getDataFromCustomEvent(n);null!==a&&(r.data=a)}return EventPropagators.accumulateTwoPhaseDispatches(r),r}function getNativeBeforeInputChars(e,t){switch(e){case topLevelTypes.topCompositionEnd:return getDataFromCustomEvent(t);case topLevelTypes.topKeyPress:var o=t.which;return o!==SPACEBAR_CODE?null:(hasSpaceKeypress=!0,SPACEBAR_CHAR);case topLevelTypes.topTextInput:var n=t.data;return n===SPACEBAR_CHAR&&hasSpaceKeypress?null:n;default:return null}}function getFallbackBeforeInputChars(e,t){if(currentComposition){if(e===topLevelTypes.topCompositionEnd||isFallbackCompositionEnd(e,t)){var o=currentComposition.getData();return FallbackCompositionState.release(currentComposition),currentComposition=null,o}return null}switch(e){case topLevelTypes.topPaste:return null;case topLevelTypes.topKeyPress:return t.which&&!isKeypressCommand(t)?String.fromCharCode(t.which):null;case topLevelTypes.topCompositionEnd:return useFallbackCompositionData?null:t.data;default:return null}}function extractBeforeInputEvent(e,t,o,n,p){var s;if(s=canUseTextInputEvent?getNativeBeforeInputChars(e,n):getFallbackBeforeInputChars(e,n),!s)return null;var i=SyntheticInputEvent.getPooled(eventTypes.beforeInput,o,n,p);return i.data=s,EventPropagators.accumulateTwoPhaseDispatches(i),i}var EventConstants=require("./EventConstants"),EventPropagators=require("./EventPropagators"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),FallbackCompositionState=require("./FallbackCompositionState"),SyntheticCompositionEvent=require("./SyntheticCompositionEvent"),SyntheticInputEvent=require("./SyntheticInputEvent"),keyOf=require("fbjs/lib/keyOf"),END_KEYCODES=[9,13,27,32],START_KEYCODE=229,canUseCompositionEvent=ExecutionEnvironment.canUseDOM&&"CompositionEvent"in window,documentMode=null;ExecutionEnvironment.canUseDOM&&"documentMode"in document&&(documentMode=document.documentMode);var canUseTextInputEvent=ExecutionEnvironment.canUseDOM&&"TextEvent"in window&&!documentMode&&!isPresto(),useFallbackCompositionData=ExecutionEnvironment.canUseDOM&&(!canUseCompositionEvent||documentMode&&documentMode>8&&documentMode<=11),SPACEBAR_CODE=32,SPACEBAR_CHAR=String.fromCharCode(SPACEBAR_CODE),topLevelTypes=EventConstants.topLevelTypes,eventTypes={beforeInput:{phasedRegistrationNames:{bubbled:keyOf({onBeforeInput:null}),captured:keyOf({onBeforeInputCapture:null})},dependencies:[topLevelTypes.topCompositionEnd,topLevelTypes.topKeyPress,topLevelTypes.topTextInput,topLevelTypes.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:keyOf({onCompositionEnd:null}),captured:keyOf({onCompositionEndCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionEnd,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:keyOf({onCompositionStart:null}),captured:keyOf({onCompositionStartCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionStart,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:keyOf({onCompositionUpdate:null}),captured:keyOf({onCompositionUpdateCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topCompositionUpdate,topLevelTypes.topKeyDown,topLevelTypes.topKeyPress,topLevelTypes.topKeyUp,topLevelTypes.topMouseDown]}},hasSpaceKeypress=!1,currentComposition=null,BeforeInputEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,o,n,p){return[extractCompositionEvent(e,t,o,n,p),extractBeforeInputEvent(e,t,o,n,p)]}};module.exports=BeforeInputEventPlugin;

},{"./EventConstants":37,"./EventPropagators":41,"./FallbackCompositionState":42,"./SyntheticCompositionEvent":111,"./SyntheticInputEvent":115,"fbjs/lib/ExecutionEnvironment":151,"fbjs/lib/keyOf":169}],26:[function(require,module,exports){
"use strict";function prefixKey(o,r){return o+r.charAt(0).toUpperCase()+r.substring(1)}var isUnitlessNumber={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0},prefixes=["Webkit","ms","Moz","O"];Object.keys(isUnitlessNumber).forEach(function(o){prefixes.forEach(function(r){isUnitlessNumber[prefixKey(r,o)]=isUnitlessNumber[o]})});var shorthandPropertyExpansions={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},CSSProperty={isUnitlessNumber:isUnitlessNumber,shorthandPropertyExpansions:shorthandPropertyExpansions};module.exports=CSSProperty;

},{}],27:[function(require,module,exports){
"use strict";var CSSProperty=require("./CSSProperty"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),ReactPerf=require("./ReactPerf"),camelizeStyleName=require("fbjs/lib/camelizeStyleName"),dangerousStyleValue=require("./dangerousStyleValue"),hyphenateStyleName=require("fbjs/lib/hyphenateStyleName"),memoizeStringOnly=require("fbjs/lib/memoizeStringOnly"),warning=require("fbjs/lib/warning"),processStyleName=memoizeStringOnly(function(e){return hyphenateStyleName(e)}),hasShorthandPropertyBug=!1,styleFloatAccessor="cssFloat";if(ExecutionEnvironment.canUseDOM){var tempStyle=document.createElement("div").style;try{tempStyle.font=""}catch(e){hasShorthandPropertyBug=!0}void 0===document.documentElement.style.cssFloat&&(styleFloatAccessor="styleFloat")}var badVendoredStyleNamePattern,badStyleValueWithSemicolonPattern,warnedStyleNames,warnedStyleValues,warnHyphenatedStyleName,warnBadVendoredStyleName,warnStyleValueWithSemicolon,warnValidStyle,CSSPropertyOperations={createMarkupForStyles:function(e){var r="";for(var t in e)if(e.hasOwnProperty(t)){var a=e[t];null!=a&&(r+=processStyleName(t)+":",r+=dangerousStyleValue(t,a)+";")}return r||null},setValueForStyles:function(e,r){var t=e.style;for(var a in r)if(r.hasOwnProperty(a)){var n=dangerousStyleValue(a,r[a]);if("float"===a&&(a=styleFloatAccessor),n)t[a]=n;else{var l=hasShorthandPropertyBug&&CSSProperty.shorthandPropertyExpansions[a];if(l)for(var o in l)t[o]="";else t[a]=""}}}};ReactPerf.measureMethods(CSSPropertyOperations,"CSSPropertyOperations",{setValueForStyles:"setValueForStyles"}),module.exports=CSSPropertyOperations;

},{"./CSSProperty":26,"./ReactPerf":92,"./dangerousStyleValue":126,"fbjs/lib/ExecutionEnvironment":151,"fbjs/lib/camelizeStyleName":153,"fbjs/lib/hyphenateStyleName":164,"fbjs/lib/memoizeStringOnly":171,"fbjs/lib/warning":174}],28:[function(require,module,exports){
"use strict";function CallbackQueue(){this._callbacks=null,this._contexts=null}var PooledClass=require("./PooledClass"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant");assign(CallbackQueue.prototype,{enqueue:function(t,l){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(t),this._contexts.push(l)},notifyAll:function(){var t=this._callbacks,l=this._contexts;if(t){t.length!==l.length?invariant(!1):void 0,this._callbacks=null,this._contexts=null;for(var s=0;s<t.length;s++)t[s].call(l[s]);t.length=0,l.length=0}},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),PooledClass.addPoolingTo(CallbackQueue),module.exports=CallbackQueue;

},{"./Object.assign":45,"./PooledClass":46,"fbjs/lib/invariant":165}],29:[function(require,module,exports){
"use strict";function shouldUseChangeEvent(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function manualDispatchChangeEvent(e){var t=SyntheticEvent.getPooled(eventTypes.change,activeElementID,e,getEventTarget(e));EventPropagators.accumulateTwoPhaseDispatches(t),ReactUpdates.batchedUpdates(runEventInBatch,t)}function runEventInBatch(e){EventPluginHub.enqueueEvents(e),EventPluginHub.processEventQueue(!1)}function startWatchingForChangeEventIE8(e,t){activeElement=e,activeElementID=t,activeElement.attachEvent("onchange",manualDispatchChangeEvent)}function stopWatchingForChangeEventIE8(){activeElement&&(activeElement.detachEvent("onchange",manualDispatchChangeEvent),activeElement=null,activeElementID=null)}function getTargetIDForChangeEvent(e,t,n){if(e===topLevelTypes.topChange)return n}function handleEventsForChangeEventIE8(e,t,n){e===topLevelTypes.topFocus?(stopWatchingForChangeEventIE8(),startWatchingForChangeEventIE8(t,n)):e===topLevelTypes.topBlur&&stopWatchingForChangeEventIE8()}function startWatchingForValueChange(e,t){activeElement=e,activeElementID=t,activeElementValue=e.value,activeElementValueProp=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(activeElement,"value",newValueProp),activeElement.attachEvent("onpropertychange",handlePropertyChange)}function stopWatchingForValueChange(){activeElement&&(delete activeElement.value,activeElement.detachEvent("onpropertychange",handlePropertyChange),activeElement=null,activeElementID=null,activeElementValue=null,activeElementValueProp=null)}function handlePropertyChange(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==activeElementValue&&(activeElementValue=t,manualDispatchChangeEvent(e))}}function getTargetIDForInputEvent(e,t,n){if(e===topLevelTypes.topInput)return n}function handleEventsForInputEventIE(e,t,n){e===topLevelTypes.topFocus?(stopWatchingForValueChange(),startWatchingForValueChange(t,n)):e===topLevelTypes.topBlur&&stopWatchingForValueChange()}function getTargetIDForInputEventIE(e,t,n){if((e===topLevelTypes.topSelectionChange||e===topLevelTypes.topKeyUp||e===topLevelTypes.topKeyDown)&&activeElement&&activeElement.value!==activeElementValue)return activeElementValue=activeElement.value,activeElementID}function shouldUseClickEvent(e){return e.nodeName&&"input"===e.nodeName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function getTargetIDForClickEvent(e,t,n){if(e===topLevelTypes.topClick)return n}var EventConstants=require("./EventConstants"),EventPluginHub=require("./EventPluginHub"),EventPropagators=require("./EventPropagators"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),ReactUpdates=require("./ReactUpdates"),SyntheticEvent=require("./SyntheticEvent"),getEventTarget=require("./getEventTarget"),isEventSupported=require("./isEventSupported"),isTextInputElement=require("./isTextInputElement"),keyOf=require("fbjs/lib/keyOf"),topLevelTypes=EventConstants.topLevelTypes,eventTypes={change:{phasedRegistrationNames:{bubbled:keyOf({onChange:null}),captured:keyOf({onChangeCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topChange,topLevelTypes.topClick,topLevelTypes.topFocus,topLevelTypes.topInput,topLevelTypes.topKeyDown,topLevelTypes.topKeyUp,topLevelTypes.topSelectionChange]}},activeElement=null,activeElementID=null,activeElementValue=null,activeElementValueProp=null,doesChangeEventBubble=!1;ExecutionEnvironment.canUseDOM&&(doesChangeEventBubble=isEventSupported("change")&&(!("documentMode"in document)||document.documentMode>8));var isInputEventSupported=!1;ExecutionEnvironment.canUseDOM&&(isInputEventSupported=isEventSupported("input")&&(!("documentMode"in document)||document.documentMode>9));var newValueProp={get:function(){return activeElementValueProp.get.call(this)},set:function(e){activeElementValue=""+e,activeElementValueProp.set.call(this,e)}},ChangeEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,n,a,o){var l,u;if(shouldUseChangeEvent(t)?doesChangeEventBubble?l=getTargetIDForChangeEvent:u=handleEventsForChangeEventIE8:isTextInputElement(t)?isInputEventSupported?l=getTargetIDForInputEvent:(l=getTargetIDForInputEventIE,u=handleEventsForInputEventIE):shouldUseClickEvent(t)&&(l=getTargetIDForClickEvent),l){var v=l(e,t,n);if(v){var p=SyntheticEvent.getPooled(eventTypes.change,v,a,o);return p.type="change",EventPropagators.accumulateTwoPhaseDispatches(p),p}}u&&u(e,t,n)}};module.exports=ChangeEventPlugin;

},{"./EventConstants":37,"./EventPluginHub":38,"./EventPropagators":41,"./ReactUpdates":104,"./SyntheticEvent":113,"./getEventTarget":135,"./isEventSupported":140,"./isTextInputElement":141,"fbjs/lib/ExecutionEnvironment":151,"fbjs/lib/keyOf":169}],30:[function(require,module,exports){
"use strict";var nextReactRootIndex=0,ClientReactRootIndex={createReactRootIndex:function(){return nextReactRootIndex++}};module.exports=ClientReactRootIndex;

},{}],31:[function(require,module,exports){
"use strict";function insertChildAt(e,t,n){var r=n>=e.childNodes.length?null:e.childNodes.item(n);e.insertBefore(t,r)}var Danger=require("./Danger"),ReactMultiChildUpdateTypes=require("./ReactMultiChildUpdateTypes"),ReactPerf=require("./ReactPerf"),setInnerHTML=require("./setInnerHTML"),setTextContent=require("./setTextContent"),invariant=require("fbjs/lib/invariant"),DOMChildrenOperations={dangerouslyReplaceNodeWithMarkup:Danger.dangerouslyReplaceNodeWithMarkup,updateTextContent:setTextContent,processUpdates:function(e,t){for(var n,r=null,a=null,i=0;i<e.length;i++)if(n=e[i],n.type===ReactMultiChildUpdateTypes.MOVE_EXISTING||n.type===ReactMultiChildUpdateTypes.REMOVE_NODE){var d=n.fromIndex,l=n.parentNode.childNodes[d],p=n.parentID;l?void 0:invariant(!1),r=r||{},r[p]=r[p]||[],r[p][d]=l,a=a||[],a.push(l)}var s;if(s=t.length&&"string"==typeof t[0]?Danger.dangerouslyRenderMarkup(t):t,a)for(var o=0;o<a.length;o++)a[o].parentNode.removeChild(a[o]);for(var u=0;u<e.length;u++)switch(n=e[u],n.type){case ReactMultiChildUpdateTypes.INSERT_MARKUP:insertChildAt(n.parentNode,s[n.markupIndex],n.toIndex);break;case ReactMultiChildUpdateTypes.MOVE_EXISTING:insertChildAt(n.parentNode,r[n.parentID][n.fromIndex],n.toIndex);break;case ReactMultiChildUpdateTypes.SET_MARKUP:setInnerHTML(n.parentNode,n.content);break;case ReactMultiChildUpdateTypes.TEXT_CONTENT:setTextContent(n.parentNode,n.content);break;case ReactMultiChildUpdateTypes.REMOVE_NODE:}}};ReactPerf.measureMethods(DOMChildrenOperations,"DOMChildrenOperations",{updateTextContent:"updateTextContent"}),module.exports=DOMChildrenOperations;

},{"./Danger":34,"./ReactMultiChildUpdateTypes":88,"./ReactPerf":92,"./setInnerHTML":145,"./setTextContent":146,"fbjs/lib/invariant":165}],32:[function(require,module,exports){
"use strict";function checkMask(t,e){return(t&e)===e}var invariant=require("fbjs/lib/invariant"),DOMPropertyInjection={MUST_USE_ATTRIBUTE:1,MUST_USE_PROPERTY:2,HAS_SIDE_EFFECTS:4,HAS_BOOLEAN_VALUE:8,HAS_NUMERIC_VALUE:16,HAS_POSITIVE_NUMERIC_VALUE:48,HAS_OVERLOADED_BOOLEAN_VALUE:64,injectDOMPropertyConfig:function(t){var e=DOMPropertyInjection,r=t.Properties||{},a=t.DOMAttributeNamespaces||{},o=t.DOMAttributeNames||{},i=t.DOMPropertyNames||{},s=t.DOMMutationMethods||{};t.isCustomAttribute&&DOMProperty._isCustomAttributeFunctions.push(t.isCustomAttribute);for(var u in r){DOMProperty.properties.hasOwnProperty(u)?invariant(!1):void 0;var n=u.toLowerCase(),c=r[u],E={attributeName:n,attributeNamespace:null,propertyName:u,mutationMethod:null,mustUseAttribute:checkMask(c,e.MUST_USE_ATTRIBUTE),mustUseProperty:checkMask(c,e.MUST_USE_PROPERTY),hasSideEffects:checkMask(c,e.HAS_SIDE_EFFECTS),hasBooleanValue:checkMask(c,e.HAS_BOOLEAN_VALUE),hasNumericValue:checkMask(c,e.HAS_NUMERIC_VALUE),hasPositiveNumericValue:checkMask(c,e.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:checkMask(c,e.HAS_OVERLOADED_BOOLEAN_VALUE)};if(E.mustUseAttribute&&E.mustUseProperty?invariant(!1):void 0,!E.mustUseProperty&&E.hasSideEffects?invariant(!1):void 0,E.hasBooleanValue+E.hasNumericValue+E.hasOverloadedBooleanValue<=1?void 0:invariant(!1),o.hasOwnProperty(u)){var A=o[u];E.attributeName=A}a.hasOwnProperty(u)&&(E.attributeNamespace=a[u]),i.hasOwnProperty(u)&&(E.propertyName=i[u]),s.hasOwnProperty(u)&&(E.mutationMethod=s[u]),DOMProperty.properties[u]=E}}},defaultValueCache={},DOMProperty={ID_ATTRIBUTE_NAME:"data-reactid",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(t){for(var e=0;e<DOMProperty._isCustomAttributeFunctions.length;e++){var r=DOMProperty._isCustomAttributeFunctions[e];if(r(t))return!0}return!1},getDefaultValueForProperty:function(t,e){var r,a=defaultValueCache[t];return a||(defaultValueCache[t]=a={}),e in a||(r=document.createElement(t),a[e]=r[e]),a[e]},injection:DOMPropertyInjection};module.exports=DOMProperty;

},{"fbjs/lib/invariant":165}],33:[function(require,module,exports){
"use strict";function isAttributeNameSafe(e){return!!validatedAttributeNameCache.hasOwnProperty(e)||!illegalAttributeNameCache.hasOwnProperty(e)&&(VALID_ATTRIBUTE_NAME_REGEX.test(e)?(validatedAttributeNameCache[e]=!0,!0):(illegalAttributeNameCache[e]=!0,!1))}function shouldIgnoreValue(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&t===!1}var DOMProperty=require("./DOMProperty"),ReactPerf=require("./ReactPerf"),quoteAttributeValueForBrowser=require("./quoteAttributeValueForBrowser"),warning=require("fbjs/lib/warning"),VALID_ATTRIBUTE_NAME_REGEX=/^[a-zA-Z_][\w\.\-]*$/,illegalAttributeNameCache={},validatedAttributeNameCache={},reactProps,warnedProperties,warnUnknownProperty,DOMPropertyOperations={createMarkupForID:function(e){return DOMProperty.ID_ATTRIBUTE_NAME+"="+quoteAttributeValueForBrowser(e)},setAttributeForID:function(e,t){e.setAttribute(DOMProperty.ID_ATTRIBUTE_NAME,t)},createMarkupForProperty:function(e,t){var r=DOMProperty.properties.hasOwnProperty(e)?DOMProperty.properties[e]:null;if(r){if(shouldIgnoreValue(r,t))return"";var o=r.attributeName;return r.hasBooleanValue||r.hasOverloadedBooleanValue&&t===!0?o+'=""':o+"="+quoteAttributeValueForBrowser(t)}return DOMProperty.isCustomAttribute(e)?null==t?"":e+"="+quoteAttributeValueForBrowser(t):null},createMarkupForCustomAttribute:function(e,t){return isAttributeNameSafe(e)&&null!=t?e+"="+quoteAttributeValueForBrowser(t):""},setValueForProperty:function(e,t,r){var o=DOMProperty.properties.hasOwnProperty(t)?DOMProperty.properties[t]:null;if(o){var a=o.mutationMethod;if(a)a(e,r);else if(shouldIgnoreValue(o,r))this.deleteValueForProperty(e,t);else if(o.mustUseAttribute){var u=o.attributeName,i=o.attributeNamespace;i?e.setAttributeNS(i,u,""+r):o.hasBooleanValue||o.hasOverloadedBooleanValue&&r===!0?e.setAttribute(u,""):e.setAttribute(u,""+r)}else{var s=o.propertyName;o.hasSideEffects&&""+e[s]==""+r||(e[s]=r)}}else DOMProperty.isCustomAttribute(t)&&DOMPropertyOperations.setValueForAttribute(e,t,r)},setValueForAttribute:function(e,t,r){isAttributeNameSafe(t)&&(null==r?e.removeAttribute(t):e.setAttribute(t,""+r))},deleteValueForProperty:function(e,t){var r=DOMProperty.properties.hasOwnProperty(t)?DOMProperty.properties[t]:null;if(r){var o=r.mutationMethod;if(o)o(e,void 0);else if(r.mustUseAttribute)e.removeAttribute(r.attributeName);else{var a=r.propertyName,u=DOMProperty.getDefaultValueForProperty(e.nodeName,a);r.hasSideEffects&&""+e[a]===u||(e[a]=u)}}else DOMProperty.isCustomAttribute(t)&&e.removeAttribute(t)}};ReactPerf.measureMethods(DOMPropertyOperations,"DOMPropertyOperations",{setValueForProperty:"setValueForProperty",setValueForAttribute:"setValueForAttribute",deleteValueForProperty:"deleteValueForProperty"}),module.exports=DOMPropertyOperations;

},{"./DOMProperty":32,"./ReactPerf":92,"./quoteAttributeValueForBrowser":143,"fbjs/lib/warning":174}],34:[function(require,module,exports){
"use strict";function getNodeName(e){return e.substring(1,e.indexOf(" "))}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),createNodesFromMarkup=require("fbjs/lib/createNodesFromMarkup"),emptyFunction=require("fbjs/lib/emptyFunction"),getMarkupWrap=require("fbjs/lib/getMarkupWrap"),invariant=require("fbjs/lib/invariant"),OPEN_TAG_NAME_EXP=/^(<[^ \/>]+)/,RESULT_INDEX_ATTR="data-danger-index",Danger={dangerouslyRenderMarkup:function(e){ExecutionEnvironment.canUseDOM?void 0:invariant(!1);for(var r,n={},t=0;t<e.length;t++)e[t]?void 0:invariant(!1),r=getNodeName(e[t]),r=getMarkupWrap(r)?r:"*",n[r]=n[r]||[],n[r][t]=e[t];var i=[],a=0;for(r in n)if(n.hasOwnProperty(r)){var o,u=n[r];for(o in u)if(u.hasOwnProperty(o)){var v=u[o];u[o]=v.replace(OPEN_TAG_NAME_EXP,"$1 "+RESULT_INDEX_ATTR+'="'+o+'" ')}for(var d=createNodesFromMarkup(u.join(""),emptyFunction),p=0;p<d.length;++p){var s=d[p];s.hasAttribute&&s.hasAttribute(RESULT_INDEX_ATTR)&&(o=+s.getAttribute(RESULT_INDEX_ATTR),s.removeAttribute(RESULT_INDEX_ATTR),i.hasOwnProperty(o)?invariant(!1):void 0,i[o]=s,a+=1)}}return a!==i.length?invariant(!1):void 0,i.length!==e.length?invariant(!1):void 0,i},dangerouslyReplaceNodeWithMarkup:function(e,r){ExecutionEnvironment.canUseDOM?void 0:invariant(!1),r?void 0:invariant(!1),"html"===e.tagName.toLowerCase()?invariant(!1):void 0;var n;n="string"==typeof r?createNodesFromMarkup(r,emptyFunction)[0]:r,e.parentNode.replaceChild(n,e)}};module.exports=Danger;

},{"fbjs/lib/ExecutionEnvironment":151,"fbjs/lib/createNodesFromMarkup":156,"fbjs/lib/emptyFunction":157,"fbjs/lib/getMarkupWrap":161,"fbjs/lib/invariant":165}],35:[function(require,module,exports){
"use strict";var keyOf=require("fbjs/lib/keyOf"),DefaultEventPluginOrder=[keyOf({ResponderEventPlugin:null}),keyOf({SimpleEventPlugin:null}),keyOf({TapEventPlugin:null}),keyOf({EnterLeaveEventPlugin:null}),keyOf({ChangeEventPlugin:null}),keyOf({SelectEventPlugin:null}),keyOf({BeforeInputEventPlugin:null})];module.exports=DefaultEventPluginOrder;

},{"fbjs/lib/keyOf":169}],36:[function(require,module,exports){
"use strict";var EventConstants=require("./EventConstants"),EventPropagators=require("./EventPropagators"),SyntheticMouseEvent=require("./SyntheticMouseEvent"),ReactMount=require("./ReactMount"),keyOf=require("fbjs/lib/keyOf"),topLevelTypes=EventConstants.topLevelTypes,getFirstReactDOM=ReactMount.getFirstReactDOM,eventTypes={mouseEnter:{registrationName:keyOf({onMouseEnter:null}),dependencies:[topLevelTypes.topMouseOut,topLevelTypes.topMouseOver]},mouseLeave:{registrationName:keyOf({onMouseLeave:null}),dependencies:[topLevelTypes.topMouseOut,topLevelTypes.topMouseOver]}},extractedEvents=[null,null],EnterLeaveEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,n,o,r){if(e===topLevelTypes.topMouseOver&&(o.relatedTarget||o.fromElement))return null;if(e!==topLevelTypes.topMouseOut&&e!==topLevelTypes.topMouseOver)return null;var s;if(t.window===t)s=t;else{var a=t.ownerDocument;s=a?a.defaultView||a.parentWindow:window}var u,v,p="",l="";if(e===topLevelTypes.topMouseOut?(u=t,p=n,v=getFirstReactDOM(o.relatedTarget||o.toElement),v?l=ReactMount.getID(v):v=s,v=v||s):(u=s,v=t,l=n),u===v)return null;var i=SyntheticMouseEvent.getPooled(eventTypes.mouseLeave,p,o,r);i.type="mouseleave",i.target=u,i.relatedTarget=v;var y=SyntheticMouseEvent.getPooled(eventTypes.mouseEnter,l,o,r);return y.type="mouseenter",y.target=v,y.relatedTarget=u,EventPropagators.accumulateEnterLeaveDispatches(i,y,p,l),extractedEvents[0]=i,extractedEvents[1]=y,extractedEvents}};module.exports=EnterLeaveEventPlugin;

},{"./EventConstants":37,"./EventPropagators":41,"./ReactMount":86,"./SyntheticMouseEvent":117,"fbjs/lib/keyOf":169}],37:[function(require,module,exports){
"use strict";var keyMirror=require("fbjs/lib/keyMirror"),PropagationPhases=keyMirror({bubbled:null,captured:null}),topLevelTypes=keyMirror({topAbort:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topVolumeChange:null,topWaiting:null,topWheel:null}),EventConstants={topLevelTypes:topLevelTypes,PropagationPhases:PropagationPhases};module.exports=EventConstants;

},{"fbjs/lib/keyMirror":168}],38:[function(require,module,exports){
"use strict";function validateInstanceHandle(){InstanceHandle&&InstanceHandle.traverseTwoPhase&&InstanceHandle.traverseEnterLeave}var EventPluginRegistry=require("./EventPluginRegistry"),EventPluginUtils=require("./EventPluginUtils"),ReactErrorUtils=require("./ReactErrorUtils"),accumulateInto=require("./accumulateInto"),forEachAccumulated=require("./forEachAccumulated"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),listenerBank={},eventQueue=null,executeDispatchesAndRelease=function(e,n){e&&(EventPluginUtils.executeDispatchesInOrder(e,n),e.isPersistent()||e.constructor.release(e))},executeDispatchesAndReleaseSimulated=function(e){return executeDispatchesAndRelease(e,!0)},executeDispatchesAndReleaseTopLevel=function(e){return executeDispatchesAndRelease(e,!1)},InstanceHandle=null,EventPluginHub={injection:{injectMount:EventPluginUtils.injection.injectMount,injectInstanceHandle:function(e){InstanceHandle=e},getInstanceHandle:function(){return InstanceHandle},injectEventPluginOrder:EventPluginRegistry.injectEventPluginOrder,injectEventPluginsByName:EventPluginRegistry.injectEventPluginsByName},eventNameDispatchConfigs:EventPluginRegistry.eventNameDispatchConfigs,registrationNameModules:EventPluginRegistry.registrationNameModules,putListener:function(e,n,t){"function"!=typeof t?invariant(!1):void 0;var i=listenerBank[n]||(listenerBank[n]={});i[e]=t;var r=EventPluginRegistry.registrationNameModules[n];r&&r.didPutListener&&r.didPutListener(e,n,t)},getListener:function(e,n){var t=listenerBank[n];return t&&t[e]},deleteListener:function(e,n){var t=EventPluginRegistry.registrationNameModules[n];t&&t.willDeleteListener&&t.willDeleteListener(e,n);var i=listenerBank[n];i&&delete i[e]},deleteAllListeners:function(e){for(var n in listenerBank)if(listenerBank[n][e]){var t=EventPluginRegistry.registrationNameModules[n];t&&t.willDeleteListener&&t.willDeleteListener(e,n),delete listenerBank[n][e]}},extractEvents:function(e,n,t,i,r){for(var a,u=EventPluginRegistry.plugins,s=0;s<u.length;s++){var l=u[s];if(l){var c=l.extractEvents(e,n,t,i,r);c&&(a=accumulateInto(a,c))}}return a},enqueueEvents:function(e){e&&(eventQueue=accumulateInto(eventQueue,e))},processEventQueue:function(e){var n=eventQueue;eventQueue=null,e?forEachAccumulated(n,executeDispatchesAndReleaseSimulated):forEachAccumulated(n,executeDispatchesAndReleaseTopLevel),eventQueue?invariant(!1):void 0,ReactErrorUtils.rethrowCaughtError()},__purge:function(){listenerBank={}},__getListenerBank:function(){return listenerBank}};module.exports=EventPluginHub;

},{"./EventPluginRegistry":39,"./EventPluginUtils":40,"./ReactErrorUtils":77,"./accumulateInto":123,"./forEachAccumulated":131,"fbjs/lib/invariant":165,"fbjs/lib/warning":174}],39:[function(require,module,exports){
"use strict";function recomputePluginOrdering(){if(EventPluginOrder)for(var e in namesToPlugins){var n=namesToPlugins[e],i=EventPluginOrder.indexOf(e);if(i>-1?void 0:invariant(!1),!EventPluginRegistry.plugins[i]){n.extractEvents?void 0:invariant(!1),EventPluginRegistry.plugins[i]=n;var r=n.eventTypes;for(var t in r)publishEventForPlugin(r[t],n,t)?void 0:invariant(!1)}}}function publishEventForPlugin(e,n,i){EventPluginRegistry.eventNameDispatchConfigs.hasOwnProperty(i)?invariant(!1):void 0,EventPluginRegistry.eventNameDispatchConfigs[i]=e;var r=e.phasedRegistrationNames;if(r){for(var t in r)if(r.hasOwnProperty(t)){var a=r[t];publishRegistrationName(a,n,i)}return!0}return!!e.registrationName&&(publishRegistrationName(e.registrationName,n,i),!0)}function publishRegistrationName(e,n,i){EventPluginRegistry.registrationNameModules[e]?invariant(!1):void 0,EventPluginRegistry.registrationNameModules[e]=n,EventPluginRegistry.registrationNameDependencies[e]=n.eventTypes[i].dependencies}var invariant=require("fbjs/lib/invariant"),EventPluginOrder=null,namesToPlugins={},EventPluginRegistry={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},injectEventPluginOrder:function(e){EventPluginOrder?invariant(!1):void 0,EventPluginOrder=Array.prototype.slice.call(e),recomputePluginOrdering()},injectEventPluginsByName:function(e){var n=!1;for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];namesToPlugins.hasOwnProperty(i)&&namesToPlugins[i]===r||(namesToPlugins[i]?invariant(!1):void 0,namesToPlugins[i]=r,n=!0)}n&&recomputePluginOrdering()},getPluginModuleForEvent:function(e){var n=e.dispatchConfig;if(n.registrationName)return EventPluginRegistry.registrationNameModules[n.registrationName]||null;for(var i in n.phasedRegistrationNames)if(n.phasedRegistrationNames.hasOwnProperty(i)){var r=EventPluginRegistry.registrationNameModules[n.phasedRegistrationNames[i]];if(r)return r}return null},_resetEventPlugins:function(){EventPluginOrder=null;for(var e in namesToPlugins)namesToPlugins.hasOwnProperty(e)&&delete namesToPlugins[e];EventPluginRegistry.plugins.length=0;var n=EventPluginRegistry.eventNameDispatchConfigs;for(var i in n)n.hasOwnProperty(i)&&delete n[i];var r=EventPluginRegistry.registrationNameModules;for(var t in r)r.hasOwnProperty(t)&&delete r[t]}};module.exports=EventPluginRegistry;

},{"fbjs/lib/invariant":165}],40:[function(require,module,exports){
"use strict";function isEndish(e){return e===topLevelTypes.topMouseUp||e===topLevelTypes.topTouchEnd||e===topLevelTypes.topTouchCancel}function isMoveish(e){return e===topLevelTypes.topMouseMove||e===topLevelTypes.topTouchMove}function isStartish(e){return e===topLevelTypes.topMouseDown||e===topLevelTypes.topTouchStart}function executeDispatch(e,t,i,n){var s=e.type||"unknown-event";e.currentTarget=injection.Mount.getNode(n),t?ReactErrorUtils.invokeGuardedCallbackWithCatch(s,i,e,n):ReactErrorUtils.invokeGuardedCallback(s,i,e,n),e.currentTarget=null}function executeDispatchesInOrder(e,t){var i=e._dispatchListeners,n=e._dispatchIDs;if(Array.isArray(i))for(var s=0;s<i.length&&!e.isPropagationStopped();s++)executeDispatch(e,t,i[s],n[s]);else i&&executeDispatch(e,t,i,n);e._dispatchListeners=null,e._dispatchIDs=null}function executeDispatchesInOrderStopAtTrueImpl(e){var t=e._dispatchListeners,i=e._dispatchIDs;if(Array.isArray(t)){for(var n=0;n<t.length&&!e.isPropagationStopped();n++)if(t[n](e,i[n]))return i[n]}else if(t&&t(e,i))return i;return null}function executeDispatchesInOrderStopAtTrue(e){var t=executeDispatchesInOrderStopAtTrueImpl(e);return e._dispatchIDs=null,e._dispatchListeners=null,t}function executeDirectDispatch(e){var t=e._dispatchListeners,i=e._dispatchIDs;Array.isArray(t)?invariant(!1):void 0;var n=t?t(e,i):null;return e._dispatchListeners=null,e._dispatchIDs=null,n}function hasDispatches(e){return!!e._dispatchListeners}var EventConstants=require("./EventConstants"),ReactErrorUtils=require("./ReactErrorUtils"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),injection={Mount:null,injectMount:function(e){injection.Mount=e}},topLevelTypes=EventConstants.topLevelTypes,validateEventDispatches,EventPluginUtils={isEndish:isEndish,isMoveish:isMoveish,isStartish:isStartish,executeDirectDispatch:executeDirectDispatch,executeDispatchesInOrder:executeDispatchesInOrder,executeDispatchesInOrderStopAtTrue:executeDispatchesInOrderStopAtTrue,hasDispatches:hasDispatches,getNode:function(e){return injection.Mount.getNode(e)},getID:function(e){return injection.Mount.getID(e)},injection:injection};module.exports=EventPluginUtils;

},{"./EventConstants":37,"./ReactErrorUtils":77,"fbjs/lib/invariant":165,"fbjs/lib/warning":174}],41:[function(require,module,exports){
"use strict";function listenerAtPhase(e,a,t){var c=a.dispatchConfig.phasedRegistrationNames[t];return getListener(e,c)}function accumulateDirectionalDispatches(e,a,t){var c=a?PropagationPhases.bubbled:PropagationPhases.captured,s=listenerAtPhase(e,t,c);s&&(t._dispatchListeners=accumulateInto(t._dispatchListeners,s),t._dispatchIDs=accumulateInto(t._dispatchIDs,e))}function accumulateTwoPhaseDispatchesSingle(e){e&&e.dispatchConfig.phasedRegistrationNames&&EventPluginHub.injection.getInstanceHandle().traverseTwoPhase(e.dispatchMarker,accumulateDirectionalDispatches,e)}function accumulateTwoPhaseDispatchesSingleSkipTarget(e){e&&e.dispatchConfig.phasedRegistrationNames&&EventPluginHub.injection.getInstanceHandle().traverseTwoPhaseSkipTarget(e.dispatchMarker,accumulateDirectionalDispatches,e)}function accumulateDispatches(e,a,t){if(t&&t.dispatchConfig.registrationName){var c=t.dispatchConfig.registrationName,s=getListener(e,c);s&&(t._dispatchListeners=accumulateInto(t._dispatchListeners,s),t._dispatchIDs=accumulateInto(t._dispatchIDs,e))}}function accumulateDirectDispatchesSingle(e){e&&e.dispatchConfig.registrationName&&accumulateDispatches(e.dispatchMarker,null,e)}function accumulateTwoPhaseDispatches(e){forEachAccumulated(e,accumulateTwoPhaseDispatchesSingle)}function accumulateTwoPhaseDispatchesSkipTarget(e){forEachAccumulated(e,accumulateTwoPhaseDispatchesSingleSkipTarget)}function accumulateEnterLeaveDispatches(e,a,t,c){EventPluginHub.injection.getInstanceHandle().traverseEnterLeave(t,c,accumulateDispatches,e,a)}function accumulateDirectDispatches(e){forEachAccumulated(e,accumulateDirectDispatchesSingle)}var EventConstants=require("./EventConstants"),EventPluginHub=require("./EventPluginHub"),warning=require("fbjs/lib/warning"),accumulateInto=require("./accumulateInto"),forEachAccumulated=require("./forEachAccumulated"),PropagationPhases=EventConstants.PropagationPhases,getListener=EventPluginHub.getListener,EventPropagators={accumulateTwoPhaseDispatches:accumulateTwoPhaseDispatches,accumulateTwoPhaseDispatchesSkipTarget:accumulateTwoPhaseDispatchesSkipTarget,accumulateDirectDispatches:accumulateDirectDispatches,accumulateEnterLeaveDispatches:accumulateEnterLeaveDispatches};module.exports=EventPropagators;

},{"./EventConstants":37,"./EventPluginHub":38,"./accumulateInto":123,"./forEachAccumulated":131,"fbjs/lib/warning":174}],42:[function(require,module,exports){
"use strict";function FallbackCompositionState(t){this._root=t,this._startText=this.getText(),this._fallbackText=null}var PooledClass=require("./PooledClass"),assign=require("./Object.assign"),getTextContentAccessor=require("./getTextContentAccessor");assign(FallbackCompositionState.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[getTextContentAccessor()]},getData:function(){if(this._fallbackText)return this._fallbackText;var t,e,o=this._startText,s=o.length,a=this.getText(),l=a.length;for(t=0;t<s&&o[t]===a[t];t++);var i=s-t;for(e=1;e<=i&&o[s-e]===a[l-e];e++);var r=e>1?1-e:void 0;return this._fallbackText=a.slice(t,r),this._fallbackText}}),PooledClass.addPoolingTo(FallbackCompositionState),module.exports=FallbackCompositionState;

},{"./Object.assign":45,"./PooledClass":46,"./getTextContentAccessor":138}],43:[function(require,module,exports){
"use strict";var DOMProperty=require("./DOMProperty"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),MUST_USE_ATTRIBUTE=DOMProperty.injection.MUST_USE_ATTRIBUTE,MUST_USE_PROPERTY=DOMProperty.injection.MUST_USE_PROPERTY,HAS_BOOLEAN_VALUE=DOMProperty.injection.HAS_BOOLEAN_VALUE,HAS_SIDE_EFFECTS=DOMProperty.injection.HAS_SIDE_EFFECTS,HAS_NUMERIC_VALUE=DOMProperty.injection.HAS_NUMERIC_VALUE,HAS_POSITIVE_NUMERIC_VALUE=DOMProperty.injection.HAS_POSITIVE_NUMERIC_VALUE,HAS_OVERLOADED_BOOLEAN_VALUE=DOMProperty.injection.HAS_OVERLOADED_BOOLEAN_VALUE,hasSVG;if(ExecutionEnvironment.canUseDOM){var implementation=document.implementation;hasSVG=implementation&&implementation.hasFeature&&implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}var HTMLDOMPropertyConfig={isCustomAttribute:RegExp.prototype.test.bind(/^(data|aria)-[a-z_][a-z\d_.\-]*$/),Properties:{accept:null,acceptCharset:null,accessKey:null,action:null,allowFullScreen:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,allowTransparency:MUST_USE_ATTRIBUTE,alt:null,async:HAS_BOOLEAN_VALUE,autoComplete:null,autoPlay:HAS_BOOLEAN_VALUE,capture:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,cellPadding:null,cellSpacing:null,charSet:MUST_USE_ATTRIBUTE,challenge:MUST_USE_ATTRIBUTE,checked:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,classID:MUST_USE_ATTRIBUTE,className:hasSVG?MUST_USE_ATTRIBUTE:MUST_USE_PROPERTY,cols:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,colSpan:null,content:null,contentEditable:null,contextMenu:MUST_USE_ATTRIBUTE,controls:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,coords:null,crossOrigin:null,data:null,dateTime:MUST_USE_ATTRIBUTE,default:HAS_BOOLEAN_VALUE,defer:HAS_BOOLEAN_VALUE,dir:null,disabled:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,download:HAS_OVERLOADED_BOOLEAN_VALUE,draggable:null,encType:null,form:MUST_USE_ATTRIBUTE,formAction:MUST_USE_ATTRIBUTE,formEncType:MUST_USE_ATTRIBUTE,formMethod:MUST_USE_ATTRIBUTE,formNoValidate:HAS_BOOLEAN_VALUE,formTarget:MUST_USE_ATTRIBUTE,frameBorder:MUST_USE_ATTRIBUTE,headers:null,height:MUST_USE_ATTRIBUTE,hidden:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,high:null,href:null,hrefLang:null,htmlFor:null,httpEquiv:null,icon:null,id:MUST_USE_PROPERTY,inputMode:MUST_USE_ATTRIBUTE,integrity:null,is:MUST_USE_ATTRIBUTE,keyParams:MUST_USE_ATTRIBUTE,keyType:MUST_USE_ATTRIBUTE,kind:null,label:null,lang:null,list:MUST_USE_ATTRIBUTE,loop:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,low:null,manifest:MUST_USE_ATTRIBUTE,marginHeight:null,marginWidth:null,max:null,maxLength:MUST_USE_ATTRIBUTE,media:MUST_USE_ATTRIBUTE,mediaGroup:null,method:null,min:null,minLength:MUST_USE_ATTRIBUTE,multiple:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,muted:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,name:null,nonce:MUST_USE_ATTRIBUTE,noValidate:HAS_BOOLEAN_VALUE,open:HAS_BOOLEAN_VALUE,optimum:null,pattern:null,placeholder:null,poster:null,preload:null,radioGroup:null,readOnly:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,rel:null,required:HAS_BOOLEAN_VALUE,reversed:HAS_BOOLEAN_VALUE,role:MUST_USE_ATTRIBUTE,rows:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,rowSpan:null,sandbox:null,scope:null,scoped:HAS_BOOLEAN_VALUE,scrolling:null,seamless:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,selected:MUST_USE_PROPERTY|HAS_BOOLEAN_VALUE,shape:null,size:MUST_USE_ATTRIBUTE|HAS_POSITIVE_NUMERIC_VALUE,sizes:MUST_USE_ATTRIBUTE,span:HAS_POSITIVE_NUMERIC_VALUE,spellCheck:null,src:null,srcDoc:MUST_USE_PROPERTY,srcLang:null,srcSet:MUST_USE_ATTRIBUTE,start:HAS_NUMERIC_VALUE,step:null,style:null,summary:null,tabIndex:null,target:null,title:null,type:null,useMap:null,value:MUST_USE_PROPERTY|HAS_SIDE_EFFECTS,width:MUST_USE_ATTRIBUTE,wmode:MUST_USE_ATTRIBUTE,wrap:null,about:MUST_USE_ATTRIBUTE,datatype:MUST_USE_ATTRIBUTE,inlist:MUST_USE_ATTRIBUTE,prefix:MUST_USE_ATTRIBUTE,property:MUST_USE_ATTRIBUTE,resource:MUST_USE_ATTRIBUTE,typeof:MUST_USE_ATTRIBUTE,vocab:MUST_USE_ATTRIBUTE,autoCapitalize:MUST_USE_ATTRIBUTE,autoCorrect:MUST_USE_ATTRIBUTE,autoSave:null,color:null,itemProp:MUST_USE_ATTRIBUTE,itemScope:MUST_USE_ATTRIBUTE|HAS_BOOLEAN_VALUE,itemType:MUST_USE_ATTRIBUTE,itemID:MUST_USE_ATTRIBUTE,itemRef:MUST_USE_ATTRIBUTE,results:null,security:MUST_USE_ATTRIBUTE,unselectable:MUST_USE_ATTRIBUTE},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{autoComplete:"autocomplete",autoFocus:"autofocus",autoPlay:"autoplay",autoSave:"autosave",encType:"encoding",hrefLang:"hreflang",radioGroup:"radiogroup",spellCheck:"spellcheck",srcDoc:"srcdoc",srcSet:"srcset"}};module.exports=HTMLDOMPropertyConfig;

},{"./DOMProperty":32,"fbjs/lib/ExecutionEnvironment":151}],44:[function(require,module,exports){
"use strict";function _assertSingleLink(e){null!=e.checkedLink&&null!=e.valueLink?invariant(!1):void 0}function _assertValueLink(e){_assertSingleLink(e),null!=e.value||null!=e.onChange?invariant(!1):void 0}function _assertCheckedLink(e){_assertSingleLink(e),null!=e.checked||null!=e.onChange?invariant(!1):void 0}function getDeclarationErrorAddendum(e){if(e){var n=e.getName();if(n)return" Check the render method of `"+n+"`."}return""}var ReactPropTypes=require("./ReactPropTypes"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),hasReadOnlyValue={button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0},propTypes={value:function(e,n,a){return!e[n]||hasReadOnlyValue[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,n,a){return!e[n]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:ReactPropTypes.func},loggedTypeFailures={},LinkedValueUtils={checkPropTypes:function(e,n,a){for(var r in propTypes){if(propTypes.hasOwnProperty(r))var i=propTypes[r](n,r,e,ReactPropTypeLocations.prop);if(i instanceof Error&&!(i.message in loggedTypeFailures)){loggedTypeFailures[i.message]=!0;getDeclarationErrorAddendum(a)}}},getValue:function(e){return e.valueLink?(_assertValueLink(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(_assertCheckedLink(e),e.checkedLink.value):e.checked},executeOnChange:function(e,n){return e.valueLink?(_assertValueLink(e),e.valueLink.requestChange(n.target.value)):e.checkedLink?(_assertCheckedLink(e),e.checkedLink.requestChange(n.target.checked)):e.onChange?e.onChange.call(void 0,n):void 0}};module.exports=LinkedValueUtils;

},{"./ReactPropTypeLocations":94,"./ReactPropTypes":95,"fbjs/lib/invariant":165,"fbjs/lib/warning":174}],45:[function(require,module,exports){
"use strict";function assign(r,e){if(null==r)throw new TypeError("Object.assign target cannot be null or undefined");for(var n=Object(r),t=Object.prototype.hasOwnProperty,o=1;o<arguments.length;o++){var a=arguments[o];if(null!=a){var l=Object(a);for(var s in l)t.call(l,s)&&(n[s]=l[s])}}return n}module.exports=assign;

},{}],46:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),oneArgumentPooler=function(o){var e=this;if(e.instancePool.length){var n=e.instancePool.pop();return e.call(n,o),n}return new e(o)},twoArgumentPooler=function(o,e){var n=this;if(n.instancePool.length){var r=n.instancePool.pop();return n.call(r,o,e),r}return new n(o,e)},threeArgumentPooler=function(o,e,n){var r=this;if(r.instancePool.length){var t=r.instancePool.pop();return r.call(t,o,e,n),t}return new r(o,e,n)},fourArgumentPooler=function(o,e,n,r){var t=this;if(t.instancePool.length){var l=t.instancePool.pop();return t.call(l,o,e,n,r),l}return new t(o,e,n,r)},fiveArgumentPooler=function(o,e,n,r,t){var l=this;if(l.instancePool.length){var i=l.instancePool.pop();return l.call(i,o,e,n,r,t),i}return new l(o,e,n,r,t)},standardReleaser=function(o){var e=this;o instanceof e?void 0:invariant(!1),o.destructor(),e.instancePool.length<e.poolSize&&e.instancePool.push(o)},DEFAULT_POOL_SIZE=10,DEFAULT_POOLER=oneArgumentPooler,addPoolingTo=function(o,e){var n=o;return n.instancePool=[],n.getPooled=e||DEFAULT_POOLER,n.poolSize||(n.poolSize=DEFAULT_POOL_SIZE),n.release=standardReleaser,n},PooledClass={addPoolingTo:addPoolingTo,oneArgumentPooler:oneArgumentPooler,twoArgumentPooler:twoArgumentPooler,threeArgumentPooler:threeArgumentPooler,fourArgumentPooler:fourArgumentPooler,fiveArgumentPooler:fiveArgumentPooler};module.exports=PooledClass;

},{"fbjs/lib/invariant":165}],47:[function(require,module,exports){
"use strict";var ReactDOM=require("./ReactDOM"),ReactDOMServer=require("./ReactDOMServer"),ReactIsomorphic=require("./ReactIsomorphic"),assign=require("./Object.assign"),deprecated=require("./deprecated"),React={};assign(React,ReactIsomorphic),assign(React,{findDOMNode:deprecated("findDOMNode","ReactDOM","react-dom",ReactDOM,ReactDOM.findDOMNode),render:deprecated("render","ReactDOM","react-dom",ReactDOM,ReactDOM.render),unmountComponentAtNode:deprecated("unmountComponentAtNode","ReactDOM","react-dom",ReactDOM,ReactDOM.unmountComponentAtNode),renderToString:deprecated("renderToString","ReactDOMServer","react-dom/server",ReactDOMServer,ReactDOMServer.renderToString),renderToStaticMarkup:deprecated("renderToStaticMarkup","ReactDOMServer","react-dom/server",ReactDOMServer,ReactDOMServer.renderToStaticMarkup)}),React.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ReactDOM,React.__SECRET_DOM_SERVER_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ReactDOMServer,module.exports=React;

},{"./Object.assign":45,"./ReactDOM":58,"./ReactDOMServer":68,"./ReactIsomorphic":84,"./deprecated":127}],48:[function(require,module,exports){
"use strict";var ReactInstanceMap=require("./ReactInstanceMap"),findDOMNode=require("./findDOMNode"),warning=require("fbjs/lib/warning"),didWarnKey="_getDOMNodeDidWarn",ReactBrowserComponentMixin={getDOMNode:function(){return this.constructor[didWarnKey]=!0,findDOMNode(this)}};module.exports=ReactBrowserComponentMixin;

},{"./ReactInstanceMap":83,"./findDOMNode":129,"fbjs/lib/warning":174}],49:[function(require,module,exports){
"use strict";function getListeningForDocument(e){return Object.prototype.hasOwnProperty.call(e,topListenersIDKey)||(e[topListenersIDKey]=reactTopListenersCounter++,alreadyListeningTo[e[topListenersIDKey]]={}),alreadyListeningTo[e[topListenersIDKey]]}var EventConstants=require("./EventConstants"),EventPluginHub=require("./EventPluginHub"),EventPluginRegistry=require("./EventPluginRegistry"),ReactEventEmitterMixin=require("./ReactEventEmitterMixin"),ReactPerf=require("./ReactPerf"),ViewportMetrics=require("./ViewportMetrics"),assign=require("./Object.assign"),isEventSupported=require("./isEventSupported"),alreadyListeningTo={},isMonitoringScrollValue=!1,reactTopListenersCounter=0,topEventMapping={topAbort:"abort",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},topListenersIDKey="_reactListenersID"+String(Math.random()).slice(2),ReactBrowserEventEmitter=assign({},ReactEventEmitterMixin,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(ReactBrowserEventEmitter.handleTopLevel),ReactBrowserEventEmitter.ReactEventListener=e}},setEnabled:function(e){ReactBrowserEventEmitter.ReactEventListener&&ReactBrowserEventEmitter.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!ReactBrowserEventEmitter.ReactEventListener||!ReactBrowserEventEmitter.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var r=t,n=getListeningForDocument(r),o=EventPluginRegistry.registrationNameDependencies[e],i=EventConstants.topLevelTypes,a=0;a<o.length;a++){var s=o[a];n.hasOwnProperty(s)&&n[s]||(s===i.topWheel?isEventSupported("wheel")?ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topWheel,"wheel",r):isEventSupported("mousewheel")?ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topWheel,"mousewheel",r):ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topWheel,"DOMMouseScroll",r):s===i.topScroll?isEventSupported("scroll",!0)?ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(i.topScroll,"scroll",r):ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topScroll,"scroll",ReactBrowserEventEmitter.ReactEventListener.WINDOW_HANDLE):s===i.topFocus||s===i.topBlur?(isEventSupported("focus",!0)?(ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(i.topFocus,"focus",r),ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(i.topBlur,"blur",r)):isEventSupported("focusin")&&(ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topFocus,"focusin",r),ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(i.topBlur,"focusout",r)),n[i.topBlur]=!0,n[i.topFocus]=!0):topEventMapping.hasOwnProperty(s)&&ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(s,topEventMapping[s],r),n[s]=!0)}},trapBubbledEvent:function(e,t,r){return ReactBrowserEventEmitter.ReactEventListener.trapBubbledEvent(e,t,r)},trapCapturedEvent:function(e,t,r){return ReactBrowserEventEmitter.ReactEventListener.trapCapturedEvent(e,t,r)},ensureScrollValueMonitoring:function(){if(!isMonitoringScrollValue){var e=ViewportMetrics.refreshScrollValues;ReactBrowserEventEmitter.ReactEventListener.monitorScrollValue(e),isMonitoringScrollValue=!0}},eventNameDispatchConfigs:EventPluginHub.eventNameDispatchConfigs,registrationNameModules:EventPluginHub.registrationNameModules,putListener:EventPluginHub.putListener,getListener:EventPluginHub.getListener,deleteListener:EventPluginHub.deleteListener,deleteAllListeners:EventPluginHub.deleteAllListeners});ReactPerf.measureMethods(ReactBrowserEventEmitter,"ReactBrowserEventEmitter",{putListener:"putListener",deleteListener:"deleteListener"}),module.exports=ReactBrowserEventEmitter;

},{"./EventConstants":37,"./EventPluginHub":38,"./EventPluginRegistry":39,"./Object.assign":45,"./ReactEventEmitterMixin":78,"./ReactPerf":92,"./ViewportMetrics":122,"./isEventSupported":140}],50:[function(require,module,exports){
"use strict";function instantiateChild(e,n,t){var r=void 0===e[t];null!=n&&r&&(e[t]=instantiateReactComponent(n,null))}var ReactReconciler=require("./ReactReconciler"),instantiateReactComponent=require("./instantiateReactComponent"),shouldUpdateReactComponent=require("./shouldUpdateReactComponent"),traverseAllChildren=require("./traverseAllChildren"),warning=require("fbjs/lib/warning"),ReactChildReconciler={instantiateChildren:function(e,n,t){if(null==e)return null;var r={};return traverseAllChildren(e,instantiateChild,r),r},updateChildren:function(e,n,t,r){if(!n&&!e)return null;var i;for(i in n)if(n.hasOwnProperty(i)){var o=e&&e[i],a=o&&o._currentElement,l=n[i];if(null!=o&&shouldUpdateReactComponent(a,l))ReactReconciler.receiveComponent(o,l,t,r),n[i]=o;else{o&&ReactReconciler.unmountComponent(o,i);var c=instantiateReactComponent(l,null);n[i]=c}}for(i in e)!e.hasOwnProperty(i)||n&&n.hasOwnProperty(i)||ReactReconciler.unmountComponent(e[i]);return n},unmountChildren:function(e){for(var n in e)if(e.hasOwnProperty(n)){var t=e[n];ReactReconciler.unmountComponent(t)}}};module.exports=ReactChildReconciler;

},{"./ReactReconciler":97,"./instantiateReactComponent":139,"./shouldUpdateReactComponent":147,"./traverseAllChildren":148,"fbjs/lib/warning":174}],51:[function(require,module,exports){
"use strict";function escapeUserProvidedKey(e){return(""+e).replace(userProvidedKeyEscapeRegex,"//")}function ForEachBookKeeping(e,n){this.func=e,this.context=n,this.count=0}function forEachSingleChild(e,n,t){var r=e.func,o=e.context;r.call(o,n,e.count++)}function forEachChildren(e,n,t){if(null==e)return e;var r=ForEachBookKeeping.getPooled(n,t);traverseAllChildren(e,forEachSingleChild,r),ForEachBookKeeping.release(r)}function MapBookKeeping(e,n,t,r){this.result=e,this.keyPrefix=n,this.func=t,this.context=r,this.count=0}function mapSingleChildIntoContext(e,n,t){var r=e.result,o=e.keyPrefix,l=e.func,i=e.context,u=l.call(i,n,e.count++);Array.isArray(u)?mapIntoWithKeyPrefixInternal(u,r,t,emptyFunction.thatReturnsArgument):null!=u&&(ReactElement.isValidElement(u)&&(u=ReactElement.cloneAndReplaceKey(u,o+(u!==n?escapeUserProvidedKey(u.key||"")+"/":"")+t)),r.push(u))}function mapIntoWithKeyPrefixInternal(e,n,t,r,o){var l="";null!=t&&(l=escapeUserProvidedKey(t)+"/");var i=MapBookKeeping.getPooled(n,l,r,o);traverseAllChildren(e,mapSingleChildIntoContext,i),MapBookKeeping.release(i)}function mapChildren(e,n,t){if(null==e)return e;var r=[];return mapIntoWithKeyPrefixInternal(e,r,null,n,t),r}function forEachSingleChildDummy(e,n,t){return null}function countChildren(e,n){return traverseAllChildren(e,forEachSingleChildDummy,null)}function toArray(e){var n=[];return mapIntoWithKeyPrefixInternal(e,n,null,emptyFunction.thatReturnsArgument),n}var PooledClass=require("./PooledClass"),ReactElement=require("./ReactElement"),emptyFunction=require("fbjs/lib/emptyFunction"),traverseAllChildren=require("./traverseAllChildren"),twoArgumentPooler=PooledClass.twoArgumentPooler,fourArgumentPooler=PooledClass.fourArgumentPooler,userProvidedKeyEscapeRegex=/\/(?!\/)/g;ForEachBookKeeping.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(ForEachBookKeeping,twoArgumentPooler),MapBookKeeping.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},PooledClass.addPoolingTo(MapBookKeeping,fourArgumentPooler);var ReactChildren={forEach:forEachChildren,map:mapChildren,mapIntoWithKeyPrefixInternal:mapIntoWithKeyPrefixInternal,count:countChildren,toArray:toArray};module.exports=ReactChildren;

},{"./PooledClass":46,"./ReactElement":73,"./traverseAllChildren":148,"fbjs/lib/emptyFunction":157}],52:[function(require,module,exports){
"use strict";function warnSetProps(){warnedSetProps||(warnedSetProps=!0)}function validateTypeDef(e,t,n){for(var i in t)t.hasOwnProperty(i)}function validateMethodOverride(e,t){var n=ReactClassInterface.hasOwnProperty(t)?ReactClassInterface[t]:null;ReactClassMixin.hasOwnProperty(t)&&(n!==SpecPolicy.OVERRIDE_BASE?invariant(!1):void 0),e.hasOwnProperty(t)&&(n!==SpecPolicy.DEFINE_MANY&&n!==SpecPolicy.DEFINE_MANY_MERGED?invariant(!1):void 0)}function mixSpecIntoComponent(e,t){if(t){"function"==typeof t?invariant(!1):void 0,ReactElement.isValidElement(t)?invariant(!1):void 0;var n=e.prototype;t.hasOwnProperty(MIXINS_KEY)&&RESERVED_SPEC_KEYS.mixins(e,t.mixins);for(var i in t)if(t.hasOwnProperty(i)&&i!==MIXINS_KEY){var o=t[i];if(validateMethodOverride(n,i),RESERVED_SPEC_KEYS.hasOwnProperty(i))RESERVED_SPEC_KEYS[i](e,o);else{var a=ReactClassInterface.hasOwnProperty(i),r=n.hasOwnProperty(i),c="function"==typeof o,p=c&&!a&&!r&&t.autobind!==!1;if(p)n.__reactAutoBindMap||(n.__reactAutoBindMap={}),n.__reactAutoBindMap[i]=o,n[i]=o;else if(r){var s=ReactClassInterface[i];!a||s!==SpecPolicy.DEFINE_MANY_MERGED&&s!==SpecPolicy.DEFINE_MANY?invariant(!1):void 0,s===SpecPolicy.DEFINE_MANY_MERGED?n[i]=createMergedResultFunction(n[i],o):s===SpecPolicy.DEFINE_MANY&&(n[i]=createChainedFunction(n[i],o))}else n[i]=o}}}}function mixStaticSpecIntoComponent(e,t){if(t)for(var n in t){var i=t[n];if(t.hasOwnProperty(n)){var o=n in RESERVED_SPEC_KEYS;o?invariant(!1):void 0;var a=n in e;a?invariant(!1):void 0,e[n]=i}}}function mergeIntoWithNoDuplicateKeys(e,t){e&&t&&"object"==typeof e&&"object"==typeof t?void 0:invariant(!1);for(var n in t)t.hasOwnProperty(n)&&(void 0!==e[n]?invariant(!1):void 0,e[n]=t[n]);return e}function createMergedResultFunction(e,t){return function(){var n=e.apply(this,arguments),i=t.apply(this,arguments);if(null==n)return i;if(null==i)return n;var o={};return mergeIntoWithNoDuplicateKeys(o,n),mergeIntoWithNoDuplicateKeys(o,i),o}}function createChainedFunction(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function bindAutoBindMethod(e,t){var n=t.bind(e);return n}function bindAutoBindMethods(e){for(var t in e.__reactAutoBindMap)if(e.__reactAutoBindMap.hasOwnProperty(t)){var n=e.__reactAutoBindMap[t];e[t]=bindAutoBindMethod(e,n)}}var ReactComponent=require("./ReactComponent"),ReactElement=require("./ReactElement"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),ReactNoopUpdateQueue=require("./ReactNoopUpdateQueue"),assign=require("./Object.assign"),emptyObject=require("fbjs/lib/emptyObject"),invariant=require("fbjs/lib/invariant"),keyMirror=require("fbjs/lib/keyMirror"),keyOf=require("fbjs/lib/keyOf"),warning=require("fbjs/lib/warning"),MIXINS_KEY=keyOf({mixins:null}),SpecPolicy=keyMirror({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),injectedMixins=[],warnedSetProps=!1,ReactClassInterface={mixins:SpecPolicy.DEFINE_MANY,statics:SpecPolicy.DEFINE_MANY,propTypes:SpecPolicy.DEFINE_MANY,contextTypes:SpecPolicy.DEFINE_MANY,childContextTypes:SpecPolicy.DEFINE_MANY,getDefaultProps:SpecPolicy.DEFINE_MANY_MERGED,getInitialState:SpecPolicy.DEFINE_MANY_MERGED,getChildContext:SpecPolicy.DEFINE_MANY_MERGED,render:SpecPolicy.DEFINE_ONCE,componentWillMount:SpecPolicy.DEFINE_MANY,componentDidMount:SpecPolicy.DEFINE_MANY,componentWillReceiveProps:SpecPolicy.DEFINE_MANY,shouldComponentUpdate:SpecPolicy.DEFINE_ONCE,componentWillUpdate:SpecPolicy.DEFINE_MANY,componentDidUpdate:SpecPolicy.DEFINE_MANY,componentWillUnmount:SpecPolicy.DEFINE_MANY,updateComponent:SpecPolicy.OVERRIDE_BASE},RESERVED_SPEC_KEYS={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)mixSpecIntoComponent(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=assign({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=assign({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=createMergedResultFunction(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=assign({},e.propTypes,t)},statics:function(e,t){mixStaticSpecIntoComponent(e,t)},autobind:function(){}},ReactClassMixin={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e),t&&this.updater.enqueueCallback(this,t)},isMounted:function(){return this.updater.isMounted(this)},setProps:function(e,t){this.updater.enqueueSetProps(this,e),t&&this.updater.enqueueCallback(this,t)},replaceProps:function(e,t){this.updater.enqueueReplaceProps(this,e),t&&this.updater.enqueueCallback(this,t)}},ReactClassComponent=function(){};assign(ReactClassComponent.prototype,ReactComponent.prototype,ReactClassMixin);var ReactClass={createClass:function(e){var t=function(e,t,n){this.__reactAutoBindMap&&bindAutoBindMethods(this),this.props=e,this.context=t,this.refs=emptyObject,this.updater=n||ReactNoopUpdateQueue,this.state=null;var i=this.getInitialState?this.getInitialState():null;"object"!=typeof i||Array.isArray(i)?invariant(!1):void 0,this.state=i};t.prototype=new ReactClassComponent,t.prototype.constructor=t,injectedMixins.forEach(mixSpecIntoComponent.bind(null,t)),mixSpecIntoComponent(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),t.prototype.render?void 0:invariant(!1);for(var n in ReactClassInterface)t.prototype[n]||(t.prototype[n]=null);return t},injection:{injectMixin:function(e){injectedMixins.push(e)}}};module.exports=ReactClass;

},{"./Object.assign":45,"./ReactComponent":53,"./ReactElement":73,"./ReactNoopUpdateQueue":90,"./ReactPropTypeLocationNames":93,"./ReactPropTypeLocations":94,"fbjs/lib/emptyObject":158,"fbjs/lib/invariant":165,"fbjs/lib/keyMirror":168,"fbjs/lib/keyOf":169,"fbjs/lib/warning":174}],53:[function(require,module,exports){
"use strict";function ReactComponent(e,t,n){this.props=e,this.context=t,this.refs=emptyObject,this.updater=n||ReactNoopUpdateQueue}var ReactNoopUpdateQueue=require("./ReactNoopUpdateQueue"),canDefineProperty=require("./canDefineProperty"),emptyObject=require("fbjs/lib/emptyObject"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning");ReactComponent.prototype.isReactComponent={},ReactComponent.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e?invariant(!1):void 0,this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t)},ReactComponent.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e)};var deprecatedAPIs,defineDeprecationWarning,fnName;module.exports=ReactComponent;

},{"./ReactNoopUpdateQueue":90,"./canDefineProperty":125,"fbjs/lib/emptyObject":158,"fbjs/lib/invariant":165,"fbjs/lib/warning":174}],54:[function(require,module,exports){
"use strict";var ReactDOMIDOperations=require("./ReactDOMIDOperations"),ReactMount=require("./ReactMount"),ReactComponentBrowserEnvironment={processChildrenUpdates:ReactDOMIDOperations.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkupByID:ReactDOMIDOperations.dangerouslyReplaceNodeWithMarkupByID,unmountIDFromEnvironment:function(e){ReactMount.purgeID(e)}};module.exports=ReactComponentBrowserEnvironment;

},{"./ReactDOMIDOperations":63,"./ReactMount":86}],55:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),injected=!1,ReactComponentEnvironment={unmountIDFromEnvironment:null,replaceNodeWithMarkupByID:null,processChildrenUpdates:null,injection:{injectEnvironment:function(n){injected?invariant(!1):void 0,ReactComponentEnvironment.unmountIDFromEnvironment=n.unmountIDFromEnvironment,ReactComponentEnvironment.replaceNodeWithMarkupByID=n.replaceNodeWithMarkupByID,ReactComponentEnvironment.processChildrenUpdates=n.processChildrenUpdates,injected=!0}}};module.exports=ReactComponentEnvironment;

},{"fbjs/lib/invariant":165}],56:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" Check the render method of `"+n+"`."}return""}function StatelessComponent(e){}var ReactComponentEnvironment=require("./ReactComponentEnvironment"),ReactCurrentOwner=require("./ReactCurrentOwner"),ReactElement=require("./ReactElement"),ReactInstanceMap=require("./ReactInstanceMap"),ReactPerf=require("./ReactPerf"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),ReactReconciler=require("./ReactReconciler"),ReactUpdateQueue=require("./ReactUpdateQueue"),assign=require("./Object.assign"),emptyObject=require("fbjs/lib/emptyObject"),invariant=require("fbjs/lib/invariant"),shouldUpdateReactComponent=require("./shouldUpdateReactComponent"),warning=require("fbjs/lib/warning");StatelessComponent.prototype.render=function(){var e=ReactInstanceMap.get(this)._currentElement.type;return e(this.props,this.context,this.updater)};var nextMountID=1,ReactCompositeComponentMixin={construct:function(e){this._currentElement=e,this._rootNodeID=null,this._instance=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null},mountComponent:function(e,t,n){this._context=n,this._mountOrder=nextMountID++,this._rootNodeID=e;var o,i,r=this._processProps(this._currentElement.props),a=this._processContext(n),s=this._currentElement.type,c="prototype"in s;c&&(o=new s(r,a,ReactUpdateQueue)),c&&null!==o&&o!==!1&&!ReactElement.isValidElement(o)||(i=o,o=new StatelessComponent(s)),o.props=r,o.context=a,o.refs=emptyObject,o.updater=ReactUpdateQueue,this._instance=o,ReactInstanceMap.set(o,this);var p=o.state;void 0===p&&(o.state=p=null),"object"!=typeof p||Array.isArray(p)?invariant(!1):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),void 0===i&&(i=this._renderValidatedComponent()),this._renderedComponent=this._instantiateReactComponent(i);var u=ReactReconciler.mountComponent(this._renderedComponent,e,t,this._processChildContext(n));return o.componentDidMount&&t.getReactMountReady().enqueue(o.componentDidMount,o),u},unmountComponent:function(){var e=this._instance;e.componentWillUnmount&&e.componentWillUnmount(),ReactReconciler.unmountComponent(this._renderedComponent),this._renderedComponent=null,this._instance=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=null,this._topLevelWrapper=null,ReactInstanceMap.remove(e)},_maskContext:function(e){var t=null,n=this._currentElement.type,o=n.contextTypes;if(!o)return emptyObject;t={};for(var i in o)t[i]=e[i];return t},_processContext:function(e){var t=this._maskContext(e);return t},_processChildContext:function(e){var t=this._currentElement.type,n=this._instance,o=n.getChildContext&&n.getChildContext();if(o){"object"!=typeof t.childContextTypes?invariant(!1):void 0;for(var i in o)i in t.childContextTypes?void 0:invariant(!1);return assign({},e,o)}return e},_processProps:function(e){return e},_checkPropTypes:function(e,t,n){var o=this.getName();for(var i in e)if(e.hasOwnProperty(i)){var r;try{"function"!=typeof e[i]?invariant(!1):void 0,r=e[i](t,i,o,n)}catch(e){r=e}if(r instanceof Error){getDeclarationErrorAddendum(this);n===ReactPropTypeLocations.prop}}},receiveComponent:function(e,t,n){var o=this._currentElement,i=this._context;this._pendingElement=null,this.updateComponent(t,o,e,i,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement&&ReactReconciler.receiveComponent(this,this._pendingElement||this._currentElement,e,this._context),(null!==this._pendingStateQueue||this._pendingForceUpdate)&&this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context)},updateComponent:function(e,t,n,o,i){var r,a=this._instance,s=this._context===i?a.context:this._processContext(i);t===n?r=n.props:(r=this._processProps(n.props),a.componentWillReceiveProps&&a.componentWillReceiveProps(r,s));var c=this._processPendingState(r,s),p=this._pendingForceUpdate||!a.shouldComponentUpdate||a.shouldComponentUpdate(r,c,s);p?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,r,c,s,e,i)):(this._currentElement=n,this._context=i,a.props=r,a.state=c,a.context=s)},_processPendingState:function(e,t){var n=this._instance,o=this._pendingStateQueue,i=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!o)return n.state;if(i&&1===o.length)return o[0];for(var r=assign({},i?o[0]:n.state),a=i?1:0;a<o.length;a++){var s=o[a];assign(r,"function"==typeof s?s.call(n,r,e,t):s)}return r},_performComponentUpdate:function(e,t,n,o,i,r){var a,s,c,p=this._instance,u=Boolean(p.componentDidUpdate);u&&(a=p.props,s=p.state,c=p.context),p.componentWillUpdate&&p.componentWillUpdate(t,n,o),this._currentElement=e,this._context=r,p.props=t,p.state=n,p.context=o,this._updateRenderedComponent(i,r),u&&i.getReactMountReady().enqueue(p.componentDidUpdate.bind(p,a,s,c),p)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,o=n._currentElement,i=this._renderValidatedComponent();if(shouldUpdateReactComponent(o,i))ReactReconciler.receiveComponent(n,i,e,this._processChildContext(t));else{var r=this._rootNodeID,a=n._rootNodeID;ReactReconciler.unmountComponent(n),this._renderedComponent=this._instantiateReactComponent(i);var s=ReactReconciler.mountComponent(this._renderedComponent,r,e,this._processChildContext(t));this._replaceNodeWithMarkupByID(a,s)}},_replaceNodeWithMarkupByID:function(e,t){ReactComponentEnvironment.replaceNodeWithMarkupByID(e,t)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e=this._instance,t=e.render();return t},_renderValidatedComponent:function(){var e;ReactCurrentOwner.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{ReactCurrentOwner.current=null}return null===e||e===!1||ReactElement.isValidElement(e)?void 0:invariant(!1),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n?invariant(!1):void 0;var o=t.getPublicInstance(),i=n.refs===emptyObject?n.refs={}:n.refs;i[e]=o},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return e instanceof StatelessComponent?null:e},_instantiateReactComponent:null};ReactPerf.measureMethods(ReactCompositeComponentMixin,"ReactCompositeComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent",_renderValidatedComponent:"_renderValidatedComponent"});var ReactCompositeComponent={Mixin:ReactCompositeComponentMixin};module.exports=ReactCompositeComponent;

},{"./Object.assign":45,"./ReactComponentEnvironment":55,"./ReactCurrentOwner":57,"./ReactElement":73,"./ReactInstanceMap":83,"./ReactPerf":92,"./ReactPropTypeLocationNames":93,"./ReactPropTypeLocations":94,"./ReactReconciler":97,"./ReactUpdateQueue":103,"./shouldUpdateReactComponent":147,"fbjs/lib/emptyObject":158,"fbjs/lib/invariant":165,"fbjs/lib/warning":174}],57:[function(require,module,exports){
"use strict";var ReactCurrentOwner={current:null};module.exports=ReactCurrentOwner;

},{}],58:[function(require,module,exports){
"use strict";var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactDOMTextComponent=require("./ReactDOMTextComponent"),ReactDefaultInjection=require("./ReactDefaultInjection"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMount=require("./ReactMount"),ReactPerf=require("./ReactPerf"),ReactReconciler=require("./ReactReconciler"),ReactUpdates=require("./ReactUpdates"),ReactVersion=require("./ReactVersion"),findDOMNode=require("./findDOMNode"),renderSubtreeIntoContainer=require("./renderSubtreeIntoContainer"),warning=require("fbjs/lib/warning");ReactDefaultInjection.inject();var render=ReactPerf.measure("React","render",ReactMount.render),React={findDOMNode:findDOMNode,render:render,unmountComponentAtNode:ReactMount.unmountComponentAtNode,version:ReactVersion,unstable_batchedUpdates:ReactUpdates.batchedUpdates,unstable_renderSubtreeIntoContainer:renderSubtreeIntoContainer};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({CurrentOwner:ReactCurrentOwner,InstanceHandles:ReactInstanceHandles,Mount:ReactMount,Reconciler:ReactReconciler,TextComponent:ReactDOMTextComponent});var ExecutionEnvironment,ieCompatibilityMode,expectedFeatures,i;module.exports=React;

},{"./ReactCurrentOwner":57,"./ReactDOMTextComponent":69,"./ReactDefaultInjection":72,"./ReactInstanceHandles":82,"./ReactMount":86,"./ReactPerf":92,"./ReactReconciler":97,"./ReactUpdates":104,"./ReactVersion":105,"./findDOMNode":129,"./renderSubtreeIntoContainer":144,"fbjs/lib/warning":174}],59:[function(require,module,exports){
"use strict";var mouseListenerNames={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},ReactDOMButton={getNativeProps:function(e,o,n){if(!o.disabled)return o;var t={};for(var u in o)o.hasOwnProperty(u)&&!mouseListenerNames[u]&&(t[u]=o[u]);return t}};module.exports=ReactDOMButton;

},{}],60:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(e){if(e){var t=e._currentElement._owner||null;if(t){var r=t.getName();if(r)return" This DOM node was rendered by `"+r+"`."}}return""}function legacyGetDOMNode(){return this}function legacyIsMounted(){var e=this._reactInternalComponent;return!!e}function legacySetStateEtc(){}function legacySetProps(e,t){var r=this._reactInternalComponent;r&&(ReactUpdateQueue.enqueueSetPropsInternal(r,e),t&&ReactUpdateQueue.enqueueCallbackInternal(r,t))}function legacyReplaceProps(e,t){var r=this._reactInternalComponent;r&&(ReactUpdateQueue.enqueueReplacePropsInternal(r,e),t&&ReactUpdateQueue.enqueueCallbackInternal(r,t))}function friendlyStringify(e){if("object"==typeof e){if(Array.isArray(e))return"["+e.map(friendlyStringify).join(", ")+"]";var t=[];for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=/^[a-z$_][\w$_]*$/i.test(r)?r:JSON.stringify(r);t.push(n+": "+friendlyStringify(e[r]))}return"{"+t.join(", ")+"}"}return"string"==typeof e?JSON.stringify(e):"function"==typeof e?"[function object]":String(e)}function checkAndWarnForMutatedStyle(e,t,r){if(null!=e&&null!=t&&!shallowEqual(e,t)){var n,a=r._tag,o=r._currentElement._owner;o&&(n=o.getName());var i=n+"|"+a;styleMutationWarning.hasOwnProperty(i)||(styleMutationWarning[i]=!0)}}function assertValidProps(e,t){t&&(null!=t.dangerouslySetInnerHTML&&(null!=t.children?invariant(!1):void 0,"object"==typeof t.dangerouslySetInnerHTML&&HTML in t.dangerouslySetInnerHTML?void 0:invariant(!1)),null!=t.style&&"object"!=typeof t.style?invariant(!1):void 0)}function enqueuePutListener(e,t,r,n){var a=ReactMount.findReactContainerForID(e);if(a){var o=a.nodeType===ELEMENT_NODE_TYPE?a.ownerDocument:a;listenTo(t,o)}n.getReactMountReady().enqueue(putListener,{id:e,registrationName:t,listener:r})}function putListener(){var e=this;ReactBrowserEventEmitter.putListener(e.id,e.registrationName,e.listener)}function trapBubbledEventsLocal(){var e=this;e._rootNodeID?void 0:invariant(!1);var t=ReactMount.getNode(e._rootNodeID);switch(t?void 0:invariant(!1),e._tag){case"iframe":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad,"load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var r in mediaEvents)mediaEvents.hasOwnProperty(r)&&e._wrapperState.listeners.push(ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes[r],mediaEvents[r],t));break;case"img":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topError,"error",t),ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topLoad,"load",t)];break;case"form":e._wrapperState.listeners=[ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topReset,"reset",t),ReactBrowserEventEmitter.trapBubbledEvent(EventConstants.topLevelTypes.topSubmit,"submit",t)]}}function mountReadyInputWrapper(){ReactDOMInput.mountReadyWrapper(this)}function postUpdateSelectWrapper(){ReactDOMSelect.postUpdateWrapper(this)}function validateDangerousTag(e){hasOwnProperty.call(validatedTagCache,e)||(VALID_TAG_REGEX.test(e)?void 0:invariant(!1),validatedTagCache[e]=!0)}function processChildContextDev(e,t){e=assign({},e);var r=e[validateDOMNesting.ancestorInfoContextKey];return e[validateDOMNesting.ancestorInfoContextKey]=validateDOMNesting.updatedAncestorInfo(r,t._tag,t),e}function isCustomComponent(e,t){return e.indexOf("-")>=0||null!=t.is}function ReactDOMComponent(e){validateDangerousTag(e),this._tag=e.toLowerCase(),this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._rootNodeID=null,this._wrapperState=null,this._topLevelWrapper=null,this._nodeWithLegacyProperties=null}var AutoFocusUtils=require("./AutoFocusUtils"),CSSPropertyOperations=require("./CSSPropertyOperations"),DOMProperty=require("./DOMProperty"),DOMPropertyOperations=require("./DOMPropertyOperations"),EventConstants=require("./EventConstants"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment"),ReactDOMButton=require("./ReactDOMButton"),ReactDOMInput=require("./ReactDOMInput"),ReactDOMOption=require("./ReactDOMOption"),ReactDOMSelect=require("./ReactDOMSelect"),ReactDOMTextarea=require("./ReactDOMTextarea"),ReactMount=require("./ReactMount"),ReactMultiChild=require("./ReactMultiChild"),ReactPerf=require("./ReactPerf"),ReactUpdateQueue=require("./ReactUpdateQueue"),assign=require("./Object.assign"),canDefineProperty=require("./canDefineProperty"),escapeTextContentForBrowser=require("./escapeTextContentForBrowser"),invariant=require("fbjs/lib/invariant"),isEventSupported=require("./isEventSupported"),keyOf=require("fbjs/lib/keyOf"),setInnerHTML=require("./setInnerHTML"),setTextContent=require("./setTextContent"),shallowEqual=require("fbjs/lib/shallowEqual"),validateDOMNesting=require("./validateDOMNesting"),warning=require("fbjs/lib/warning"),deleteListener=ReactBrowserEventEmitter.deleteListener,listenTo=ReactBrowserEventEmitter.listenTo,registrationNameModules=ReactBrowserEventEmitter.registrationNameModules,CONTENT_TYPES={string:!0,number:!0},CHILDREN=keyOf({children:null}),STYLE=keyOf({style:null}),HTML=keyOf({__html:null}),ELEMENT_NODE_TYPE=1,legacyPropsDescriptor,styleMutationWarning={},mediaEvents={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},omittedCloseTags={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},newlineEatingTags={listing:!0,pre:!0,textarea:!0},voidElementTags=assign({menuitem:!0},omittedCloseTags),VALID_TAG_REGEX=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,validatedTagCache={},hasOwnProperty={}.hasOwnProperty;ReactDOMComponent.displayName="ReactDOMComponent",ReactDOMComponent.Mixin={construct:function(e){this._currentElement=e},mountComponent:function(e,t,r){this._rootNodeID=e;var n=this._currentElement.props;switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":this._wrapperState={listeners:null},t.getReactMountReady().enqueue(trapBubbledEventsLocal,this);break;case"button":n=ReactDOMButton.getNativeProps(this,n,r);break;case"input":ReactDOMInput.mountWrapper(this,n,r),n=ReactDOMInput.getNativeProps(this,n,r);break;case"option":ReactDOMOption.mountWrapper(this,n,r),n=ReactDOMOption.getNativeProps(this,n,r);break;case"select":ReactDOMSelect.mountWrapper(this,n,r),n=ReactDOMSelect.getNativeProps(this,n,r),r=ReactDOMSelect.processChildContext(this,n,r);break;case"textarea":ReactDOMTextarea.mountWrapper(this,n,r),n=ReactDOMTextarea.getNativeProps(this,n,r)}assertValidProps(this,n);var a;if(t.useCreateElement){var o=r[ReactMount.ownerDocumentContextKey],i=o.createElement(this._currentElement.type);DOMPropertyOperations.setAttributeForID(i,this._rootNodeID),ReactMount.getID(i),this._updateDOMProperties({},n,t,i),this._createInitialChildren(t,n,r,i),a=i}else{var s=this._createOpenTagMarkupAndPutListeners(t,n),p=this._createContentMarkup(t,n,r);a=!p&&omittedCloseTags[this._tag]?s+"/>":s+">"+p+"</"+this._currentElement.type+">"}switch(this._tag){case"input":t.getReactMountReady().enqueue(mountReadyInputWrapper,this);case"button":case"select":case"textarea":n.autoFocus&&t.getReactMountReady().enqueue(AutoFocusUtils.focusDOMComponent,this)}return a},_createOpenTagMarkupAndPutListeners:function(e,t){var r="<"+this._currentElement.type;for(var n in t)if(t.hasOwnProperty(n)){var a=t[n];if(null!=a)if(registrationNameModules.hasOwnProperty(n))a&&enqueuePutListener(this._rootNodeID,n,a,e);else{n===STYLE&&(a&&(a=this._previousStyleCopy=assign({},t.style)),a=CSSPropertyOperations.createMarkupForStyles(a));var o=null;null!=this._tag&&isCustomComponent(this._tag,t)?n!==CHILDREN&&(o=DOMPropertyOperations.createMarkupForCustomAttribute(n,a)):o=DOMPropertyOperations.createMarkupForProperty(n,a),o&&(r+=" "+o)}}if(e.renderToStaticMarkup)return r;var i=DOMPropertyOperations.createMarkupForID(this._rootNodeID);return r+" "+i},_createContentMarkup:function(e,t,r){var n="",a=t.dangerouslySetInnerHTML;if(null!=a)null!=a.__html&&(n=a.__html);else{var o=CONTENT_TYPES[typeof t.children]?t.children:null,i=null!=o?null:t.children;if(null!=o)n=escapeTextContentForBrowser(o);else if(null!=i){var s=this.mountChildren(i,e,r);n=s.join("")}}return newlineEatingTags[this._tag]&&"\n"===n.charAt(0)?"\n"+n:n},_createInitialChildren:function(e,t,r,n){var a=t.dangerouslySetInnerHTML;if(null!=a)null!=a.__html&&setInnerHTML(n,a.__html);else{var o=CONTENT_TYPES[typeof t.children]?t.children:null,i=null!=o?null:t.children;if(null!=o)setTextContent(n,o);else if(null!=i)for(var s=this.mountChildren(i,e,r),p=0;p<s.length;p++)n.appendChild(s[p])}},receiveComponent:function(e,t,r){var n=this._currentElement;this._currentElement=e,this.updateComponent(t,n,e,r)},updateComponent:function(e,t,r,n){var a=t.props,o=this._currentElement.props;switch(this._tag){case"button":a=ReactDOMButton.getNativeProps(this,a),o=ReactDOMButton.getNativeProps(this,o);break;case"input":ReactDOMInput.updateWrapper(this),a=ReactDOMInput.getNativeProps(this,a),o=ReactDOMInput.getNativeProps(this,o);break;case"option":a=ReactDOMOption.getNativeProps(this,a),o=ReactDOMOption.getNativeProps(this,o);break;case"select":a=ReactDOMSelect.getNativeProps(this,a),o=ReactDOMSelect.getNativeProps(this,o);break;case"textarea":ReactDOMTextarea.updateWrapper(this),a=ReactDOMTextarea.getNativeProps(this,a),o=ReactDOMTextarea.getNativeProps(this,o)}assertValidProps(this,o),this._updateDOMProperties(a,o,e,null),this._updateDOMChildren(a,o,e,n),!canDefineProperty&&this._nodeWithLegacyProperties&&(this._nodeWithLegacyProperties.props=o),"select"===this._tag&&e.getReactMountReady().enqueue(postUpdateSelectWrapper,this)},_updateDOMProperties:function(e,t,r,n){var a,o,i;for(a in e)if(!t.hasOwnProperty(a)&&e.hasOwnProperty(a))if(a===STYLE){var s=this._previousStyleCopy;for(o in s)s.hasOwnProperty(o)&&(i=i||{},i[o]="");this._previousStyleCopy=null}else registrationNameModules.hasOwnProperty(a)?e[a]&&deleteListener(this._rootNodeID,a):(DOMProperty.properties[a]||DOMProperty.isCustomAttribute(a))&&(n||(n=ReactMount.getNode(this._rootNodeID)),DOMPropertyOperations.deleteValueForProperty(n,a));for(a in t){var p=t[a],u=a===STYLE?this._previousStyleCopy:e[a];if(t.hasOwnProperty(a)&&p!==u)if(a===STYLE)if(p?p=this._previousStyleCopy=assign({},p):this._previousStyleCopy=null,u){for(o in u)!u.hasOwnProperty(o)||p&&p.hasOwnProperty(o)||(i=i||{},i[o]="");for(o in p)p.hasOwnProperty(o)&&u[o]!==p[o]&&(i=i||{},i[o]=p[o])}else i=p;else registrationNameModules.hasOwnProperty(a)?p?enqueuePutListener(this._rootNodeID,a,p,r):u&&deleteListener(this._rootNodeID,a):isCustomComponent(this._tag,t)?(n||(n=ReactMount.getNode(this._rootNodeID)),a===CHILDREN&&(p=null),DOMPropertyOperations.setValueForAttribute(n,a,p)):(DOMProperty.properties[a]||DOMProperty.isCustomAttribute(a))&&(n||(n=ReactMount.getNode(this._rootNodeID)),null!=p?DOMPropertyOperations.setValueForProperty(n,a,p):DOMPropertyOperations.deleteValueForProperty(n,a))}i&&(n||(n=ReactMount.getNode(this._rootNodeID)),CSSPropertyOperations.setValueForStyles(n,i))},_updateDOMChildren:function(e,t,r,n){var a=CONTENT_TYPES[typeof e.children]?e.children:null,o=CONTENT_TYPES[typeof t.children]?t.children:null,i=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,p=null!=a?null:e.children,u=null!=o?null:t.children,l=null!=a||null!=i,c=null!=o||null!=s;null!=p&&null==u?this.updateChildren(null,r,n):l&&!c&&this.updateTextContent(""),null!=o?a!==o&&this.updateTextContent(""+o):null!=s?i!==s&&this.updateMarkup(""+s):null!=u&&this.updateChildren(u,r,n)},unmountComponent:function(){switch(this._tag){case"iframe":case"img":case"form":case"video":case"audio":var e=this._wrapperState.listeners;if(e)for(var t=0;t<e.length;t++)e[t].remove();break;case"input":ReactDOMInput.unmountWrapper(this);break;case"html":case"head":case"body":invariant(!1)}if(this.unmountChildren(),ReactBrowserEventEmitter.deleteAllListeners(this._rootNodeID),ReactComponentBrowserEnvironment.unmountIDFromEnvironment(this._rootNodeID),this._rootNodeID=null,this._wrapperState=null,this._nodeWithLegacyProperties){var r=this._nodeWithLegacyProperties;r._reactInternalComponent=null,this._nodeWithLegacyProperties=null}},getPublicInstance:function(){if(!this._nodeWithLegacyProperties){var e=ReactMount.getNode(this._rootNodeID);e._reactInternalComponent=this,e.getDOMNode=legacyGetDOMNode,e.isMounted=legacyIsMounted,e.setState=legacySetStateEtc,e.replaceState=legacySetStateEtc,e.forceUpdate=legacySetStateEtc,e.setProps=legacySetProps,e.replaceProps=legacyReplaceProps,e.props=this._currentElement.props,this._nodeWithLegacyProperties=e}return this._nodeWithLegacyProperties}},ReactPerf.measureMethods(ReactDOMComponent,"ReactDOMComponent",{mountComponent:"mountComponent",updateComponent:"updateComponent"}),assign(ReactDOMComponent.prototype,ReactDOMComponent.Mixin,ReactMultiChild.Mixin),module.exports=ReactDOMComponent;

},{"./AutoFocusUtils":24,"./CSSPropertyOperations":27,"./DOMProperty":32,"./DOMPropertyOperations":33,"./EventConstants":37,"./Object.assign":45,"./ReactBrowserEventEmitter":49,"./ReactComponentBrowserEnvironment":54,"./ReactDOMButton":59,"./ReactDOMInput":64,"./ReactDOMOption":65,"./ReactDOMSelect":66,"./ReactDOMTextarea":70,"./ReactMount":86,"./ReactMultiChild":87,"./ReactPerf":92,"./ReactUpdateQueue":103,"./canDefineProperty":125,"./escapeTextContentForBrowser":128,"./isEventSupported":140,"./setInnerHTML":145,"./setTextContent":146,"./validateDOMNesting":149,"fbjs/lib/invariant":165,"fbjs/lib/keyOf":169,"fbjs/lib/shallowEqual":172,"fbjs/lib/warning":174}],61:[function(require,module,exports){
"use strict";function createDOMFactory(e){return ReactElement.createFactory(e)}var ReactElement=require("./ReactElement"),ReactElementValidator=require("./ReactElementValidator"),mapObject=require("fbjs/lib/mapObject"),ReactDOMFactories=mapObject({a:"a",abbr:"abbr",address:"address",area:"area",article:"article",aside:"aside",audio:"audio",b:"b",base:"base",bdi:"bdi",bdo:"bdo",big:"big",blockquote:"blockquote",body:"body",br:"br",button:"button",canvas:"canvas",caption:"caption",cite:"cite",code:"code",col:"col",colgroup:"colgroup",data:"data",datalist:"datalist",dd:"dd",del:"del",details:"details",dfn:"dfn",dialog:"dialog",div:"div",dl:"dl",dt:"dt",em:"em",embed:"embed",fieldset:"fieldset",figcaption:"figcaption",figure:"figure",footer:"footer",form:"form",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",head:"head",header:"header",hgroup:"hgroup",hr:"hr",html:"html",i:"i",iframe:"iframe",img:"img",input:"input",ins:"ins",kbd:"kbd",keygen:"keygen",label:"label",legend:"legend",li:"li",link:"link",main:"main",map:"map",mark:"mark",menu:"menu",menuitem:"menuitem",meta:"meta",meter:"meter",nav:"nav",noscript:"noscript",object:"object",ol:"ol",optgroup:"optgroup",option:"option",output:"output",p:"p",param:"param",picture:"picture",pre:"pre",progress:"progress",q:"q",rp:"rp",rt:"rt",ruby:"ruby",s:"s",samp:"samp",script:"script",section:"section",select:"select",small:"small",source:"source",span:"span",strong:"strong",style:"style",sub:"sub",summary:"summary",sup:"sup",table:"table",tbody:"tbody",td:"td",textarea:"textarea",tfoot:"tfoot",th:"th",thead:"thead",time:"time",title:"title",tr:"tr",track:"track",u:"u",ul:"ul",var:"var",video:"video",wbr:"wbr",circle:"circle",clipPath:"clipPath",defs:"defs",ellipse:"ellipse",g:"g",image:"image",line:"line",linearGradient:"linearGradient",mask:"mask",path:"path",pattern:"pattern",polygon:"polygon",polyline:"polyline",radialGradient:"radialGradient",rect:"rect",stop:"stop",svg:"svg",text:"text",tspan:"tspan"},createDOMFactory);module.exports=ReactDOMFactories;

},{"./ReactElement":73,"./ReactElementValidator":74,"fbjs/lib/mapObject":170}],62:[function(require,module,exports){
"use strict";var ReactDOMFeatureFlags={useCreateElement:!1};module.exports=ReactDOMFeatureFlags;

},{}],63:[function(require,module,exports){
"use strict";var DOMChildrenOperations=require("./DOMChildrenOperations"),DOMPropertyOperations=require("./DOMPropertyOperations"),ReactMount=require("./ReactMount"),ReactPerf=require("./ReactPerf"),invariant=require("fbjs/lib/invariant"),INVALID_PROPERTY_ERRORS={dangerouslySetInnerHTML:"`dangerouslySetInnerHTML` must be set using `updateInnerHTMLByID()`.",style:"`style` must be set using `updateStylesByID()`."},ReactDOMIDOperations={updatePropertyByID:function(e,r,t){var a=ReactMount.getNode(e);INVALID_PROPERTY_ERRORS.hasOwnProperty(r)?invariant(!1):void 0,null!=t?DOMPropertyOperations.setValueForProperty(a,r,t):DOMPropertyOperations.deleteValueForProperty(a,r)},dangerouslyReplaceNodeWithMarkupByID:function(e,r){var t=ReactMount.getNode(e);DOMChildrenOperations.dangerouslyReplaceNodeWithMarkup(t,r)},dangerouslyProcessChildrenUpdates:function(e,r){for(var t=0;t<e.length;t++)e[t].parentNode=ReactMount.getNode(e[t].parentID);DOMChildrenOperations.processUpdates(e,r)}};ReactPerf.measureMethods(ReactDOMIDOperations,"ReactDOMIDOperations",{dangerouslyReplaceNodeWithMarkupByID:"dangerouslyReplaceNodeWithMarkupByID",dangerouslyProcessChildrenUpdates:"dangerouslyProcessChildrenUpdates"}),module.exports=ReactDOMIDOperations;

},{"./DOMChildrenOperations":31,"./DOMPropertyOperations":33,"./ReactMount":86,"./ReactPerf":92,"fbjs/lib/invariant":165}],64:[function(require,module,exports){
"use strict";function forceUpdateIfMounted(){this._rootNodeID&&ReactDOMInput.updateWrapper(this)}function _handleChange(e){var t=this._currentElement.props,a=LinkedValueUtils.executeOnChange(t,e);ReactUpdates.asap(forceUpdateIfMounted,this);var n=t.name;if("radio"===t.type&&null!=n){for(var r=ReactMount.getNode(this._rootNodeID),i=r;i.parentNode;)i=i.parentNode;for(var o=i.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),u=0;u<o.length;u++){var d=o[u];if(d!==r&&d.form===r.form){var l=ReactMount.getID(d);l?void 0:invariant(!1);var p=instancesByReactID[l];p?void 0:invariant(!1),ReactUpdates.asap(forceUpdateIfMounted,p)}}}return a}var ReactDOMIDOperations=require("./ReactDOMIDOperations"),LinkedValueUtils=require("./LinkedValueUtils"),ReactMount=require("./ReactMount"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),instancesByReactID={},ReactDOMInput={getNativeProps:function(e,t,a){var n=LinkedValueUtils.getValue(t),r=LinkedValueUtils.getChecked(t),i=assign({},t,{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=r?r:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange});return i},mountWrapper:function(e,t){var a=t.defaultValue;e._wrapperState={initialChecked:t.defaultChecked||!1,initialValue:null!=a?a:null,onChange:_handleChange.bind(e)}},mountReadyWrapper:function(e){instancesByReactID[e._rootNodeID]=e},unmountWrapper:function(e){delete instancesByReactID[e._rootNodeID]},updateWrapper:function(e){var t=e._currentElement.props,a=t.checked;null!=a&&ReactDOMIDOperations.updatePropertyByID(e._rootNodeID,"checked",a||!1);var n=LinkedValueUtils.getValue(t);null!=n&&ReactDOMIDOperations.updatePropertyByID(e._rootNodeID,"value",""+n)}};module.exports=ReactDOMInput;

},{"./LinkedValueUtils":44,"./Object.assign":45,"./ReactDOMIDOperations":63,"./ReactMount":86,"./ReactUpdates":104,"fbjs/lib/invariant":165}],65:[function(require,module,exports){
"use strict";var ReactChildren=require("./ReactChildren"),ReactDOMSelect=require("./ReactDOMSelect"),assign=require("./Object.assign"),warning=require("fbjs/lib/warning"),valueContextKey=ReactDOMSelect.valueContextKey,ReactDOMOption={mountWrapper:function(e,t,r){var a=r[valueContextKey],n=null;if(null!=a)if(n=!1,Array.isArray(a)){for(var l=0;l<a.length;l++)if(""+a[l]==""+t.value){n=!0;break}}else n=""+a==""+t.value;e._wrapperState={selected:n}},getNativeProps:function(e,t,r){var a=assign({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(a.selected=e._wrapperState.selected);var n="";return ReactChildren.forEach(t.children,function(e){null!=e&&("string"!=typeof e&&"number"!=typeof e||(n+=e))}),n&&(a.children=n),a}};module.exports=ReactDOMOption;

},{"./Object.assign":45,"./ReactChildren":51,"./ReactDOMSelect":66,"fbjs/lib/warning":174}],66:[function(require,module,exports){
"use strict";function updateOptionsIfPendingUpdateAndMounted(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=LinkedValueUtils.getValue(e);null!=t&&updateOptions(this,Boolean(e.multiple),t)}}function getDeclarationErrorAddendum(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function checkSelectPropTypes(e,t){var a=e._currentElement._owner;LinkedValueUtils.checkPropTypes("select",t,a);for(var n=0;n<valuePropNames.length;n++){var l=valuePropNames[n];null!=t[l]&&t.multiple}}function updateOptions(e,t,a){var n,l,r=ReactMount.getNode(e._rootNodeID).options;if(t){for(n={},l=0;l<a.length;l++)n[""+a[l]]=!0;for(l=0;l<r.length;l++){var i=n.hasOwnProperty(r[l].value);r[l].selected!==i&&(r[l].selected=i)}}else{for(n=""+a,l=0;l<r.length;l++)if(r[l].value===n)return void(r[l].selected=!0);r.length&&(r[0].selected=!0)}}function _handleChange(e){var t=this._currentElement.props,a=LinkedValueUtils.executeOnChange(t,e);return this._wrapperState.pendingUpdate=!0,ReactUpdates.asap(updateOptionsIfPendingUpdateAndMounted,this),a}var LinkedValueUtils=require("./LinkedValueUtils"),ReactMount=require("./ReactMount"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),warning=require("fbjs/lib/warning"),valueContextKey="__ReactDOMSelect_value$"+Math.random().toString(36).slice(2),valuePropNames=["value","defaultValue"],ReactDOMSelect={valueContextKey:valueContextKey,getNativeProps:function(e,t,a){return assign({},t,{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var a=LinkedValueUtils.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=a?a:t.defaultValue,onChange:_handleChange.bind(e),wasMultiple:Boolean(t.multiple)}},processChildContext:function(e,t,a){var n=assign({},a);return n[valueContextKey]=e._wrapperState.initialValue,n},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var a=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var n=LinkedValueUtils.getValue(t);null!=n?(e._wrapperState.pendingUpdate=!1,updateOptions(e,Boolean(t.multiple),n)):a!==Boolean(t.multiple)&&(null!=t.defaultValue?updateOptions(e,Boolean(t.multiple),t.defaultValue):updateOptions(e,Boolean(t.multiple),t.multiple?[]:""))}};module.exports=ReactDOMSelect;

},{"./LinkedValueUtils":44,"./Object.assign":45,"./ReactMount":86,"./ReactUpdates":104,"fbjs/lib/warning":174}],67:[function(require,module,exports){
"use strict";function isCollapsed(e,t,n,o){return e===n&&t===o}function getIEOffsets(e){var t=document.selection,n=t.createRange(),o=n.text.length,s=n.duplicate();s.moveToElementText(e),s.setEndPoint("EndToStart",n);var r=s.text.length,a=r+o;return{start:r,end:a}}function getModernOffsets(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,o=t.anchorOffset,s=t.focusNode,r=t.focusOffset,a=t.getRangeAt(0);try{a.startContainer.nodeType,a.endContainer.nodeType}catch(e){return null}var f=isCollapsed(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),d=f?0:a.toString().length,c=a.cloneRange();c.selectNodeContents(e),c.setEnd(a.startContainer,a.startOffset);var i=isCollapsed(c.startContainer,c.startOffset,c.endContainer,c.endOffset),l=i?0:c.toString().length,u=l+d,g=document.createRange();g.setStart(n,o),g.setEnd(s,r);var O=g.collapsed;return{start:O?u:l,end:O?l:u}}function setIEOffsets(e,t){var n,o,s=document.selection.createRange().duplicate();"undefined"==typeof t.end?(n=t.start,o=n):t.start>t.end?(n=t.end,o=t.start):(n=t.start,o=t.end),s.moveToElementText(e),s.moveStart("character",n),s.setEndPoint("EndToStart",s),s.moveEnd("character",o-n),s.select()}function setModernOffsets(e,t){if(window.getSelection){var n=window.getSelection(),o=e[getTextContentAccessor()].length,s=Math.min(t.start,o),r="undefined"==typeof t.end?s:Math.min(t.end,o);if(!n.extend&&s>r){var a=r;r=s,s=a}var f=getNodeForCharacterOffset(e,s),d=getNodeForCharacterOffset(e,r);if(f&&d){var c=document.createRange();c.setStart(f.node,f.offset),n.removeAllRanges(),s>r?(n.addRange(c),n.extend(d.node,d.offset)):(c.setEnd(d.node,d.offset),n.addRange(c))}}}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),getNodeForCharacterOffset=require("./getNodeForCharacterOffset"),getTextContentAccessor=require("./getTextContentAccessor"),useIEOffsets=ExecutionEnvironment.canUseDOM&&"selection"in document&&!("getSelection"in window),ReactDOMSelection={getOffsets:useIEOffsets?getIEOffsets:getModernOffsets,setOffsets:useIEOffsets?setIEOffsets:setModernOffsets};module.exports=ReactDOMSelection;

},{"./getNodeForCharacterOffset":137,"./getTextContentAccessor":138,"fbjs/lib/ExecutionEnvironment":151}],68:[function(require,module,exports){
"use strict";var ReactDefaultInjection=require("./ReactDefaultInjection"),ReactServerRendering=require("./ReactServerRendering"),ReactVersion=require("./ReactVersion");ReactDefaultInjection.inject();var ReactDOMServer={renderToString:ReactServerRendering.renderToString,renderToStaticMarkup:ReactServerRendering.renderToStaticMarkup,version:ReactVersion};module.exports=ReactDOMServer;

},{"./ReactDefaultInjection":72,"./ReactServerRendering":101,"./ReactVersion":105}],69:[function(require,module,exports){
"use strict";var DOMChildrenOperations=require("./DOMChildrenOperations"),DOMPropertyOperations=require("./DOMPropertyOperations"),ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment"),ReactMount=require("./ReactMount"),assign=require("./Object.assign"),escapeTextContentForBrowser=require("./escapeTextContentForBrowser"),setTextContent=require("./setTextContent"),validateDOMNesting=require("./validateDOMNesting"),ReactDOMTextComponent=function(e){};assign(ReactDOMTextComponent.prototype,{construct:function(e){this._currentElement=e,this._stringText=""+e,this._rootNodeID=null,this._mountIndex=0},mountComponent:function(e,t,n){if(this._rootNodeID=e,t.useCreateElement){var r=n[ReactMount.ownerDocumentContextKey],o=r.createElement("span");return DOMPropertyOperations.setAttributeForID(o,e),ReactMount.getID(o),setTextContent(o,this._stringText),o}var i=escapeTextContentForBrowser(this._stringText);return t.renderToStaticMarkup?i:"<span "+DOMPropertyOperations.createMarkupForID(e)+">"+i+"</span>"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var r=ReactMount.getNode(this._rootNodeID);DOMChildrenOperations.updateTextContent(r,n)}}},unmountComponent:function(){ReactComponentBrowserEnvironment.unmountIDFromEnvironment(this._rootNodeID)}}),module.exports=ReactDOMTextComponent;

},{"./DOMChildrenOperations":31,"./DOMPropertyOperations":33,"./Object.assign":45,"./ReactComponentBrowserEnvironment":54,"./ReactMount":86,"./escapeTextContentForBrowser":128,"./setTextContent":146,"./validateDOMNesting":149}],70:[function(require,module,exports){
"use strict";function forceUpdateIfMounted(){this._rootNodeID&&ReactDOMTextarea.updateWrapper(this)}function _handleChange(e){var a=this._currentElement.props,t=LinkedValueUtils.executeOnChange(a,e);return ReactUpdates.asap(forceUpdateIfMounted,this),t}var LinkedValueUtils=require("./LinkedValueUtils"),ReactDOMIDOperations=require("./ReactDOMIDOperations"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ReactDOMTextarea={getNativeProps:function(e,a,t){null!=a.dangerouslySetInnerHTML?invariant(!1):void 0;var n=assign({},a,{defaultValue:void 0,value:void 0,children:e._wrapperState.initialValue,onChange:e._wrapperState.onChange});return n},mountWrapper:function(e,a){var t=a.defaultValue,n=a.children;null!=n&&(null!=t?invariant(!1):void 0,Array.isArray(n)&&(n.length<=1?void 0:invariant(!1),n=n[0]),t=""+n),null==t&&(t="");var r=LinkedValueUtils.getValue(a);e._wrapperState={initialValue:""+(null!=r?r:t),onChange:_handleChange.bind(e)}},updateWrapper:function(e){var a=e._currentElement.props,t=LinkedValueUtils.getValue(a);null!=t&&ReactDOMIDOperations.updatePropertyByID(e._rootNodeID,"value",""+t)}};module.exports=ReactDOMTextarea;

},{"./LinkedValueUtils":44,"./Object.assign":45,"./ReactDOMIDOperations":63,"./ReactUpdates":104,"fbjs/lib/invariant":165,"fbjs/lib/warning":174}],71:[function(require,module,exports){
"use strict";function ReactDefaultBatchingStrategyTransaction(){this.reinitializeTransaction()}var ReactUpdates=require("./ReactUpdates"),Transaction=require("./Transaction"),assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),RESET_BATCHED_UPDATES={initialize:emptyFunction,close:function(){ReactDefaultBatchingStrategy.isBatchingUpdates=!1}},FLUSH_BATCHED_UPDATES={initialize:emptyFunction,close:ReactUpdates.flushBatchedUpdates.bind(ReactUpdates)},TRANSACTION_WRAPPERS=[FLUSH_BATCHED_UPDATES,RESET_BATCHED_UPDATES];assign(ReactDefaultBatchingStrategyTransaction.prototype,Transaction.Mixin,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS}});var transaction=new ReactDefaultBatchingStrategyTransaction,ReactDefaultBatchingStrategy={isBatchingUpdates:!1,batchedUpdates:function(t,a,e,i,n,c){var r=ReactDefaultBatchingStrategy.isBatchingUpdates;ReactDefaultBatchingStrategy.isBatchingUpdates=!0,r?t(a,e,i,n,c):transaction.perform(t,null,a,e,i,n,c)}};module.exports=ReactDefaultBatchingStrategy;

},{"./Object.assign":45,"./ReactUpdates":104,"./Transaction":121,"fbjs/lib/emptyFunction":157}],72:[function(require,module,exports){
"use strict";function inject(){if(!alreadyInjected){alreadyInjected=!0,ReactInjection.EventEmitter.injectReactEventListener(ReactEventListener),ReactInjection.EventPluginHub.injectEventPluginOrder(DefaultEventPluginOrder),ReactInjection.EventPluginHub.injectInstanceHandle(ReactInstanceHandles),ReactInjection.EventPluginHub.injectMount(ReactMount),ReactInjection.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:SimpleEventPlugin,EnterLeaveEventPlugin:EnterLeaveEventPlugin,ChangeEventPlugin:ChangeEventPlugin,SelectEventPlugin:SelectEventPlugin,BeforeInputEventPlugin:BeforeInputEventPlugin}),ReactInjection.NativeComponent.injectGenericComponentClass(ReactDOMComponent),ReactInjection.NativeComponent.injectTextComponentClass(ReactDOMTextComponent),ReactInjection.Class.injectMixin(ReactBrowserComponentMixin),ReactInjection.DOMProperty.injectDOMPropertyConfig(HTMLDOMPropertyConfig),ReactInjection.DOMProperty.injectDOMPropertyConfig(SVGDOMPropertyConfig),ReactInjection.EmptyComponent.injectEmptyComponent("noscript"),ReactInjection.Updates.injectReconcileTransaction(ReactReconcileTransaction),ReactInjection.Updates.injectBatchingStrategy(ReactDefaultBatchingStrategy),ReactInjection.RootIndex.injectCreateReactRootIndex(ExecutionEnvironment.canUseDOM?ClientReactRootIndex.createReactRootIndex:ServerReactRootIndex.createReactRootIndex),ReactInjection.Component.injectEnvironment(ReactComponentBrowserEnvironment)}}var BeforeInputEventPlugin=require("./BeforeInputEventPlugin"),ChangeEventPlugin=require("./ChangeEventPlugin"),ClientReactRootIndex=require("./ClientReactRootIndex"),DefaultEventPluginOrder=require("./DefaultEventPluginOrder"),EnterLeaveEventPlugin=require("./EnterLeaveEventPlugin"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),HTMLDOMPropertyConfig=require("./HTMLDOMPropertyConfig"),ReactBrowserComponentMixin=require("./ReactBrowserComponentMixin"),ReactComponentBrowserEnvironment=require("./ReactComponentBrowserEnvironment"),ReactDefaultBatchingStrategy=require("./ReactDefaultBatchingStrategy"),ReactDOMComponent=require("./ReactDOMComponent"),ReactDOMTextComponent=require("./ReactDOMTextComponent"),ReactEventListener=require("./ReactEventListener"),ReactInjection=require("./ReactInjection"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMount=require("./ReactMount"),ReactReconcileTransaction=require("./ReactReconcileTransaction"),SelectEventPlugin=require("./SelectEventPlugin"),ServerReactRootIndex=require("./ServerReactRootIndex"),SimpleEventPlugin=require("./SimpleEventPlugin"),SVGDOMPropertyConfig=require("./SVGDOMPropertyConfig"),alreadyInjected=!1;module.exports={inject:inject};

},{"./BeforeInputEventPlugin":25,"./ChangeEventPlugin":29,"./ClientReactRootIndex":30,"./DefaultEventPluginOrder":35,"./EnterLeaveEventPlugin":36,"./HTMLDOMPropertyConfig":43,"./ReactBrowserComponentMixin":48,"./ReactComponentBrowserEnvironment":54,"./ReactDOMComponent":60,"./ReactDOMTextComponent":69,"./ReactDefaultBatchingStrategy":71,"./ReactEventListener":79,"./ReactInjection":80,"./ReactInstanceHandles":82,"./ReactMount":86,"./ReactReconcileTransaction":96,"./SVGDOMPropertyConfig":106,"./SelectEventPlugin":107,"./ServerReactRootIndex":108,"./SimpleEventPlugin":109,"fbjs/lib/ExecutionEnvironment":151}],73:[function(require,module,exports){
"use strict";var ReactCurrentOwner=require("./ReactCurrentOwner"),assign=require("./Object.assign"),canDefineProperty=require("./canDefineProperty"),REACT_ELEMENT_TYPE="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,RESERVED_PROPS={key:!0,ref:!0,__self:!0,__source:!0},ReactElement=function(e,r,n,t,l,o,c){var a={$$typeof:REACT_ELEMENT_TYPE,type:e,key:r,ref:n,props:c,_owner:o};return a};ReactElement.createElement=function(e,r,n){var t,l={},o=null,c=null,a=null,f=null;if(null!=r){c=void 0===r.ref?null:r.ref,o=void 0===r.key?null:""+r.key,a=void 0===r.__self?null:r.__self,f=void 0===r.__source?null:r.__source;for(t in r)r.hasOwnProperty(t)&&!RESERVED_PROPS.hasOwnProperty(t)&&(l[t]=r[t])}var u=arguments.length-2;if(1===u)l.children=n;else if(u>1){for(var i=Array(u),E=0;E<u;E++)i[E]=arguments[E+2];l.children=i}if(e&&e.defaultProps){var s=e.defaultProps;for(t in s)"undefined"==typeof l[t]&&(l[t]=s[t])}return ReactElement(e,o,c,a,f,ReactCurrentOwner.current,l)},ReactElement.createFactory=function(e){var r=ReactElement.createElement.bind(null,e);return r.type=e,r},ReactElement.cloneAndReplaceKey=function(e,r){var n=ReactElement(e.type,r,e.ref,e._self,e._source,e._owner,e.props);return n},ReactElement.cloneAndReplaceProps=function(e,r){var n=ReactElement(e.type,e.key,e.ref,e._self,e._source,e._owner,r);return n},ReactElement.cloneElement=function(e,r,n){var t,l=assign({},e.props),o=e.key,c=e.ref,a=e._self,f=e._source,u=e._owner;if(null!=r){void 0!==r.ref&&(c=r.ref,u=ReactCurrentOwner.current),void 0!==r.key&&(o=""+r.key);for(t in r)r.hasOwnProperty(t)&&!RESERVED_PROPS.hasOwnProperty(t)&&(l[t]=r[t])}var i=arguments.length-2;if(1===i)l.children=n;else if(i>1){for(var E=Array(i),s=0;s<i;s++)E[s]=arguments[s+2];l.children=E}return ReactElement(e.type,o,c,a,f,u,l)},ReactElement.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===REACT_ELEMENT_TYPE},module.exports=ReactElement;

},{"./Object.assign":45,"./ReactCurrentOwner":57,"./canDefineProperty":125}],74:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(){if(ReactCurrentOwner.current){var e=ReactCurrentOwner.current.getName();if(e)return" Check the render method of `"+e+"`."}return""}function validateExplicitKey(e,r){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;getAddendaForKeyUse("uniqueKey",e,r)}}function getAddendaForKeyUse(e,r,t){var a=getDeclarationErrorAddendum();if(!a){var n="string"==typeof t?t:t.displayName||t.name;n&&(a=" Check the top-level render call using <"+n+">.")}var i=ownerHasKeyUseWarning[e]||(ownerHasKeyUseWarning[e]={});if(i[a])return null;i[a]=!0;var o={parentOrOwner:a,url:" See https://fb.me/react-warning-keys for more information.",childOwner:null};return r&&r._owner&&r._owner!==ReactCurrentOwner.current&&(o.childOwner=" It was passed a child from "+r._owner.getName()+"."),o}function validateChildKeys(e,r){if("object"==typeof e)if(Array.isArray(e))for(var t=0;t<e.length;t++){var a=e[t];ReactElement.isValidElement(a)&&validateExplicitKey(a,r)}else if(ReactElement.isValidElement(e))e._store&&(e._store.validated=!0);else if(e){var n=getIteratorFn(e);if(n&&n!==e.entries)for(var i,o=n.call(e);!(i=o.next()).done;)ReactElement.isValidElement(i.value)&&validateExplicitKey(i.value,r)}}function checkPropTypes(e,r,t,a){for(var n in r)if(r.hasOwnProperty(n)){var i;try{"function"!=typeof r[n]?invariant(!1):void 0,i=r[n](t,n,e,a)}catch(e){i=e}if(i instanceof Error&&!(i.message in loggedTypeFailures)){loggedTypeFailures[i.message]=!0;getDeclarationErrorAddendum()}}}function validatePropTypes(e){var r=e.type;if("function"==typeof r){var t=r.displayName||r.name;r.propTypes&&checkPropTypes(t,r.propTypes,e.props,ReactPropTypeLocations.prop),"function"==typeof r.getDefaultProps}}var ReactElement=require("./ReactElement"),ReactPropTypeLocations=require("./ReactPropTypeLocations"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),ReactCurrentOwner=require("./ReactCurrentOwner"),canDefineProperty=require("./canDefineProperty"),getIteratorFn=require("./getIteratorFn"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ownerHasKeyUseWarning={},loggedTypeFailures={},ReactElementValidator={createElement:function(e,r,t){var a="string"==typeof e||"function"==typeof e,n=ReactElement.createElement.apply(this,arguments);if(null==n)return n;if(a)for(var i=2;i<arguments.length;i++)validateChildKeys(arguments[i],e);return validatePropTypes(n),n},createFactory:function(e){var r=ReactElementValidator.createElement.bind(null,e);return r.type=e,r},cloneElement:function(e,r,t){for(var a=ReactElement.cloneElement.apply(this,arguments),n=2;n<arguments.length;n++)validateChildKeys(arguments[n],a.type);return validatePropTypes(a),a}};module.exports=ReactElementValidator;

},{"./ReactCurrentOwner":57,"./ReactElement":73,"./ReactPropTypeLocationNames":93,"./ReactPropTypeLocations":94,"./canDefineProperty":125,"./getIteratorFn":136,"fbjs/lib/invariant":165,"fbjs/lib/warning":174}],75:[function(require,module,exports){
"use strict";function registerNullComponentID(){ReactEmptyComponentRegistry.registerNullComponentID(this._rootNodeID)}var ReactElement=require("./ReactElement"),ReactEmptyComponentRegistry=require("./ReactEmptyComponentRegistry"),ReactReconciler=require("./ReactReconciler"),assign=require("./Object.assign"),placeholderElement,ReactEmptyComponentInjection={injectEmptyComponent:function(e){placeholderElement=ReactElement.createElement(e)}},ReactEmptyComponent=function(e){this._currentElement=null,this._rootNodeID=null,this._renderedComponent=e(placeholderElement)};assign(ReactEmptyComponent.prototype,{construct:function(e){},mountComponent:function(e,t,n){return t.getReactMountReady().enqueue(registerNullComponentID,this),this._rootNodeID=e,ReactReconciler.mountComponent(this._renderedComponent,e,t,n)},receiveComponent:function(){},unmountComponent:function(e,t,n){ReactReconciler.unmountComponent(this._renderedComponent),ReactEmptyComponentRegistry.deregisterNullComponentID(this._rootNodeID),this._rootNodeID=null,this._renderedComponent=null}}),ReactEmptyComponent.injection=ReactEmptyComponentInjection,module.exports=ReactEmptyComponent;

},{"./Object.assign":45,"./ReactElement":73,"./ReactEmptyComponentRegistry":76,"./ReactReconciler":97}],76:[function(require,module,exports){
"use strict";function isNullComponentID(e){return!!nullComponentIDsRegistry[e]}function registerNullComponentID(e){nullComponentIDsRegistry[e]=!0}function deregisterNullComponentID(e){delete nullComponentIDsRegistry[e]}var nullComponentIDsRegistry={},ReactEmptyComponentRegistry={isNullComponentID:isNullComponentID,registerNullComponentID:registerNullComponentID,deregisterNullComponentID:deregisterNullComponentID};module.exports=ReactEmptyComponentRegistry;

},{}],77:[function(require,module,exports){
"use strict";function invokeGuardedCallback(r,a,t,o){try{return a(t,o)}catch(r){return void(null===caughtError&&(caughtError=r))}}var caughtError=null,ReactErrorUtils={invokeGuardedCallback:invokeGuardedCallback,invokeGuardedCallbackWithCatch:invokeGuardedCallback,rethrowCaughtError:function(){if(caughtError){var r=caughtError;throw caughtError=null,r}}},fakeNode;module.exports=ReactErrorUtils;

},{}],78:[function(require,module,exports){
"use strict";function runEventQueueInBatch(e){EventPluginHub.enqueueEvents(e),EventPluginHub.processEventQueue(!1)}var EventPluginHub=require("./EventPluginHub"),ReactEventEmitterMixin={handleTopLevel:function(e,n,t,u,i){var v=EventPluginHub.extractEvents(e,n,t,u,i);runEventQueueInBatch(v)}};module.exports=ReactEventEmitterMixin;

},{"./EventPluginHub":38}],79:[function(require,module,exports){
"use strict";function findParent(e){var t=ReactMount.getID(e),n=ReactInstanceHandles.getReactRootIDFromNodeID(t),a=ReactMount.findReactContainerForID(n),o=ReactMount.getFirstReactDOM(a);return o}function TopLevelCallbackBookKeeping(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function handleTopLevelImpl(e){handleTopLevelWithoutPath(e)}function handleTopLevelWithoutPath(e){for(var t=ReactMount.getFirstReactDOM(getEventTarget(e.nativeEvent))||window,n=t;n;)e.ancestors.push(n),n=findParent(n);for(var a=0;a<e.ancestors.length;a++){t=e.ancestors[a];var o=ReactMount.getID(t)||"";ReactEventListener._handleTopLevel(e.topLevelType,t,o,e.nativeEvent,getEventTarget(e.nativeEvent))}}function handleTopLevelWithPath(e){for(var t=e.nativeEvent.path,n=t[0],a=0,o=0;o<t.length;o++){var l=t[o];l.nodeType===DOCUMENT_FRAGMENT_NODE_TYPE&&(n=t[o+1]);var i=ReactMount.getFirstReactDOM(l);if(i===l){var r=ReactMount.getID(l),s=ReactInstanceHandles.getReactRootIDFromNodeID(r);e.ancestors.push(l);var v=ReactMount.getID(l)||"";for(a++,ReactEventListener._handleTopLevel(e.topLevelType,l,v,e.nativeEvent,n);r!==s;)o++,l=t[o],r=ReactMount.getID(l)}}0===a&&ReactEventListener._handleTopLevel(e.topLevelType,window,"",e.nativeEvent,getEventTarget(e.nativeEvent))}function scrollValueMonitor(e){var t=getUnboundedScrollPosition(window);e(t)}var EventListener=require("fbjs/lib/EventListener"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),PooledClass=require("./PooledClass"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMount=require("./ReactMount"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),getEventTarget=require("./getEventTarget"),getUnboundedScrollPosition=require("fbjs/lib/getUnboundedScrollPosition"),DOCUMENT_FRAGMENT_NODE_TYPE=11;assign(TopLevelCallbackBookKeeping.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),PooledClass.addPoolingTo(TopLevelCallbackBookKeeping,PooledClass.twoArgumentPooler);var ReactEventListener={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:ExecutionEnvironment.canUseDOM?window:null,setHandleTopLevel:function(e){ReactEventListener._handleTopLevel=e},setEnabled:function(e){ReactEventListener._enabled=!!e},isEnabled:function(){return ReactEventListener._enabled},trapBubbledEvent:function(e,t,n){var a=n;return a?EventListener.listen(a,t,ReactEventListener.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var a=n;return a?EventListener.capture(a,t,ReactEventListener.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=scrollValueMonitor.bind(null,e);EventListener.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(ReactEventListener._enabled){var n=TopLevelCallbackBookKeeping.getPooled(e,t);try{ReactUpdates.batchedUpdates(handleTopLevelImpl,n)}finally{TopLevelCallbackBookKeeping.release(n)}}}};module.exports=ReactEventListener;

},{"./Object.assign":45,"./PooledClass":46,"./ReactInstanceHandles":82,"./ReactMount":86,"./ReactUpdates":104,"./getEventTarget":135,"fbjs/lib/EventListener":150,"fbjs/lib/ExecutionEnvironment":151,"fbjs/lib/getUnboundedScrollPosition":162}],80:[function(require,module,exports){
"use strict";var DOMProperty=require("./DOMProperty"),EventPluginHub=require("./EventPluginHub"),ReactComponentEnvironment=require("./ReactComponentEnvironment"),ReactClass=require("./ReactClass"),ReactEmptyComponent=require("./ReactEmptyComponent"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactNativeComponent=require("./ReactNativeComponent"),ReactPerf=require("./ReactPerf"),ReactRootIndex=require("./ReactRootIndex"),ReactUpdates=require("./ReactUpdates"),ReactInjection={Component:ReactComponentEnvironment.injection,Class:ReactClass.injection,DOMProperty:DOMProperty.injection,EmptyComponent:ReactEmptyComponent.injection,EventPluginHub:EventPluginHub.injection,EventEmitter:ReactBrowserEventEmitter.injection,NativeComponent:ReactNativeComponent.injection,Perf:ReactPerf.injection,RootIndex:ReactRootIndex.injection,Updates:ReactUpdates.injection};module.exports=ReactInjection;

},{"./DOMProperty":32,"./EventPluginHub":38,"./ReactBrowserEventEmitter":49,"./ReactClass":52,"./ReactComponentEnvironment":55,"./ReactEmptyComponent":75,"./ReactNativeComponent":89,"./ReactPerf":92,"./ReactRootIndex":99,"./ReactUpdates":104}],81:[function(require,module,exports){
"use strict";function isInDocument(e){return containsNode(document.documentElement,e)}var ReactDOMSelection=require("./ReactDOMSelection"),containsNode=require("fbjs/lib/containsNode"),focusNode=require("fbjs/lib/focusNode"),getActiveElement=require("fbjs/lib/getActiveElement"),ReactInputSelection={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=getActiveElement();return{focusedElem:e,selectionRange:ReactInputSelection.hasSelectionCapabilities(e)?ReactInputSelection.getSelection(e):null}},restoreSelection:function(e){var t=getActiveElement(),n=e.focusedElem,o=e.selectionRange;t!==n&&isInDocument(n)&&(ReactInputSelection.hasSelectionCapabilities(n)&&ReactInputSelection.setSelection(n,o),focusNode(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=ReactDOMSelection.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,o=t.end;if("undefined"==typeof o&&(o=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(o,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var c=e.createTextRange();c.collapse(!0),c.moveStart("character",n),c.moveEnd("character",o-n),c.select()}else ReactDOMSelection.setOffsets(e,t)}};module.exports=ReactInputSelection;

},{"./ReactDOMSelection":67,"fbjs/lib/containsNode":154,"fbjs/lib/focusNode":159,"fbjs/lib/getActiveElement":160}],82:[function(require,module,exports){
"use strict";function getReactRootIDString(t){return SEPARATOR+t.toString(36)}function isBoundary(t,e){return t.charAt(e)===SEPARATOR||e===t.length}function isValidID(t){return""===t||t.charAt(0)===SEPARATOR&&t.charAt(t.length-1)!==SEPARATOR}function isAncestorIDOf(t,e){return 0===e.indexOf(t)&&isBoundary(e,t.length)}function getParentID(t){return t?t.substr(0,t.lastIndexOf(SEPARATOR)):""}function getNextDescendantID(t,e){if(isValidID(t)&&isValidID(e)?void 0:invariant(!1),isAncestorIDOf(t,e)?void 0:invariant(!1),t===e)return t;var r,n=t.length+SEPARATOR_LENGTH;for(r=n;r<e.length&&!isBoundary(e,r);r++);return e.substr(0,r)}function getFirstCommonAncestorID(t,e){var r=Math.min(t.length,e.length);if(0===r)return"";for(var n=0,a=0;a<=r;a++)if(isBoundary(t,a)&&isBoundary(e,a))n=a;else if(t.charAt(a)!==e.charAt(a))break;var i=t.substr(0,n);return isValidID(i)?void 0:invariant(!1),i}function traverseParentPath(t,e,r,n,a,i){t=t||"",e=e||"",t===e?invariant(!1):void 0;var o=isAncestorIDOf(e,t);o||isAncestorIDOf(t,e)?void 0:invariant(!1);for(var s=0,c=o?getParentID:getNextDescendantID,R=t;;R=c(R,e)){var A;if(a&&R===t||i&&R===e||(A=r(R,o,n)),A===!1||R===e)break;s++<MAX_TREE_DEPTH?void 0:invariant(!1)}}var ReactRootIndex=require("./ReactRootIndex"),invariant=require("fbjs/lib/invariant"),SEPARATOR=".",SEPARATOR_LENGTH=SEPARATOR.length,MAX_TREE_DEPTH=1e4,ReactInstanceHandles={createReactRootID:function(){return getReactRootIDString(ReactRootIndex.createReactRootIndex())},createReactID:function(t,e){return t+e},getReactRootIDFromNodeID:function(t){if(t&&t.charAt(0)===SEPARATOR&&t.length>1){var e=t.indexOf(SEPARATOR,1);return e>-1?t.substr(0,e):t}return null},traverseEnterLeave:function(t,e,r,n,a){var i=getFirstCommonAncestorID(t,e);i!==t&&traverseParentPath(t,i,r,n,!1,!0),i!==e&&traverseParentPath(i,e,r,a,!0,!1)},traverseTwoPhase:function(t,e,r){t&&(traverseParentPath("",t,e,r,!0,!1),traverseParentPath(t,"",e,r,!1,!0))},traverseTwoPhaseSkipTarget:function(t,e,r){t&&(traverseParentPath("",t,e,r,!0,!0),traverseParentPath(t,"",e,r,!0,!0))},traverseAncestors:function(t,e,r){traverseParentPath("",t,e,r,!0,!1)},getFirstCommonAncestorID:getFirstCommonAncestorID,_getNextDescendantID:getNextDescendantID,isAncestorIDOf:isAncestorIDOf,SEPARATOR:SEPARATOR};module.exports=ReactInstanceHandles;

},{"./ReactRootIndex":99,"fbjs/lib/invariant":165}],83:[function(require,module,exports){
"use strict";var ReactInstanceMap={remove:function(n){n._reactInternalInstance=void 0},get:function(n){return n._reactInternalInstance},has:function(n){return void 0!==n._reactInternalInstance},set:function(n,t){n._reactInternalInstance=t}};module.exports=ReactInstanceMap;

},{}],84:[function(require,module,exports){
"use strict";var ReactChildren=require("./ReactChildren"),ReactComponent=require("./ReactComponent"),ReactClass=require("./ReactClass"),ReactDOMFactories=require("./ReactDOMFactories"),ReactElement=require("./ReactElement"),ReactElementValidator=require("./ReactElementValidator"),ReactPropTypes=require("./ReactPropTypes"),ReactVersion=require("./ReactVersion"),assign=require("./Object.assign"),onlyChild=require("./onlyChild"),createElement=ReactElement.createElement,createFactory=ReactElement.createFactory,cloneElement=ReactElement.cloneElement,React={Children:{map:ReactChildren.map,forEach:ReactChildren.forEach,count:ReactChildren.count,toArray:ReactChildren.toArray,only:onlyChild},Component:ReactComponent,createElement:createElement,cloneElement:cloneElement,isValidElement:ReactElement.isValidElement,PropTypes:ReactPropTypes,createClass:ReactClass.createClass,createFactory:createFactory,createMixin:function(e){return e},DOM:ReactDOMFactories,version:ReactVersion,__spread:assign};module.exports=React;

},{"./Object.assign":45,"./ReactChildren":51,"./ReactClass":52,"./ReactComponent":53,"./ReactDOMFactories":61,"./ReactElement":73,"./ReactElementValidator":74,"./ReactPropTypes":95,"./ReactVersion":105,"./onlyChild":142}],85:[function(require,module,exports){
"use strict";var adler32=require("./adler32"),TAG_END=/\/?>/,ReactMarkupChecksum={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var r=adler32(e);return e.replace(TAG_END," "+ReactMarkupChecksum.CHECKSUM_ATTR_NAME+'="'+r+'"$&')},canReuseMarkup:function(e,r){var a=r.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);a=a&&parseInt(a,10);var u=adler32(e);return u===a}};module.exports=ReactMarkupChecksum;

},{"./adler32":124}],86:[function(require,module,exports){
"use strict";function firstDifferenceIndex(e,t){for(var n=Math.min(e.length,t.length),o=0;o<n;o++)if(e.charAt(o)!==t.charAt(o))return o;return e.length===t.length?-1:n}function getReactRootElementInContainer(e){return e?e.nodeType===DOC_NODE_TYPE?e.documentElement:e.firstChild:null}function getReactRootID(e){var t=getReactRootElementInContainer(e);return t&&ReactMount.getID(t)}function getID(e){var t=internalGetID(e);if(t)if(nodeCache.hasOwnProperty(t)){var n=nodeCache[t];n!==e&&(isValid(n,t)?invariant(!1):void 0,nodeCache[t]=e)}else nodeCache[t]=e;return t}function internalGetID(e){return e&&e.getAttribute&&e.getAttribute(ATTR_NAME)||""}function setID(e,t){var n=internalGetID(e);n!==t&&delete nodeCache[n],e.setAttribute(ATTR_NAME,t),nodeCache[t]=e}function getNode(e){return nodeCache.hasOwnProperty(e)&&isValid(nodeCache[e],e)||(nodeCache[e]=ReactMount.findReactNodeByID(e)),nodeCache[e]}function getNodeFromInstance(e){var t=ReactInstanceMap.get(e)._rootNodeID;return ReactEmptyComponentRegistry.isNullComponentID(t)?null:(nodeCache.hasOwnProperty(t)&&isValid(nodeCache[t],t)||(nodeCache[t]=ReactMount.findReactNodeByID(t)),nodeCache[t])}function isValid(e,t){if(e){internalGetID(e)!==t?invariant(!1):void 0;var n=ReactMount.findReactContainerForID(t);if(n&&containsNode(n,e))return!0}return!1}function purgeID(e){delete nodeCache[e]}function findDeepestCachedAncestorImpl(e){var t=nodeCache[e];return!(!t||!isValid(t,e))&&void(deepestNodeSoFar=t)}function findDeepestCachedAncestor(e){deepestNodeSoFar=null,ReactInstanceHandles.traverseAncestors(e,findDeepestCachedAncestorImpl);var t=deepestNodeSoFar;return deepestNodeSoFar=null,t}function mountComponentIntoNode(e,t,n,o,r,a){ReactDOMFeatureFlags.useCreateElement&&(a=assign({},a),n.nodeType===DOC_NODE_TYPE?a[ownerDocumentContextKey]=n:a[ownerDocumentContextKey]=n.ownerDocument);var c=ReactReconciler.mountComponent(e,t,o,a);e._renderedComponent._topLevelWrapper=e,ReactMount._mountImageIntoNode(c,n,r,o)}function batchedMountComponentIntoNode(e,t,n,o,r){var a=ReactUpdates.ReactReconcileTransaction.getPooled(o);a.perform(mountComponentIntoNode,null,e,t,n,a,o,r),ReactUpdates.ReactReconcileTransaction.release(a)}function unmountComponentFromNode(e,t){for(ReactReconciler.unmountComponent(e),t.nodeType===DOC_NODE_TYPE&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function hasNonRootReactChild(e){var t=getReactRootID(e);return!!t&&t!==ReactInstanceHandles.getReactRootIDFromNodeID(t)}function findFirstReactDOMImpl(e){for(;e&&e.parentNode!==e;e=e.parentNode)if(1===e.nodeType){var t=internalGetID(e);if(t){var n,o=ReactInstanceHandles.getReactRootIDFromNodeID(t),r=e;do if(n=internalGetID(r),r=r.parentNode,null==r)return null;while(n!==o);if(r===containersByReactRootID[o])return e}}return null}var DOMProperty=require("./DOMProperty"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactCurrentOwner=require("./ReactCurrentOwner"),ReactDOMFeatureFlags=require("./ReactDOMFeatureFlags"),ReactElement=require("./ReactElement"),ReactEmptyComponentRegistry=require("./ReactEmptyComponentRegistry"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactInstanceMap=require("./ReactInstanceMap"),ReactMarkupChecksum=require("./ReactMarkupChecksum"),ReactPerf=require("./ReactPerf"),ReactReconciler=require("./ReactReconciler"),ReactUpdateQueue=require("./ReactUpdateQueue"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),emptyObject=require("fbjs/lib/emptyObject"),containsNode=require("fbjs/lib/containsNode"),instantiateReactComponent=require("./instantiateReactComponent"),invariant=require("fbjs/lib/invariant"),setInnerHTML=require("./setInnerHTML"),shouldUpdateReactComponent=require("./shouldUpdateReactComponent"),validateDOMNesting=require("./validateDOMNesting"),warning=require("fbjs/lib/warning"),ATTR_NAME=DOMProperty.ID_ATTRIBUTE_NAME,nodeCache={},ELEMENT_NODE_TYPE=1,DOC_NODE_TYPE=9,DOCUMENT_FRAGMENT_NODE_TYPE=11,ownerDocumentContextKey="__ReactMount_ownerDocument$"+Math.random().toString(36).slice(2),instancesByReactRootID={},containersByReactRootID={},rootElementsByReactRootID,findComponentRootReusableArray=[],deepestNodeSoFar=null,TopLevelWrapper=function(){};TopLevelWrapper.prototype.isReactComponent={},TopLevelWrapper.prototype.render=function(){return this.props};var ReactMount={TopLevelWrapper:TopLevelWrapper,_instancesByReactRootID:instancesByReactRootID,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,o){return ReactMount.scrollMonitor(n,function(){ReactUpdateQueue.enqueueElementInternal(e,t),o&&ReactUpdateQueue.enqueueCallbackInternal(e,o)}),e},_registerComponent:function(e,t){!t||t.nodeType!==ELEMENT_NODE_TYPE&&t.nodeType!==DOC_NODE_TYPE&&t.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE?invariant(!1):void 0,ReactBrowserEventEmitter.ensureScrollValueMonitoring();var n=ReactMount.registerContainer(t);return instancesByReactRootID[n]=e,n},_renderNewRootComponent:function(e,t,n,o){var r=instantiateReactComponent(e,null),a=ReactMount._registerComponent(r,t);return ReactUpdates.batchedUpdates(batchedMountComponentIntoNode,r,a,t,n,o),r},renderSubtreeIntoContainer:function(e,t,n,o){return null==e||null==e._reactInternalInstance?invariant(!1):void 0,ReactMount._renderSubtreeIntoContainer(e,t,n,o)},_renderSubtreeIntoContainer:function(e,t,n,o){ReactElement.isValidElement(t)?void 0:invariant(!1);var r=new ReactElement(TopLevelWrapper,null,null,null,null,null,t),a=instancesByReactRootID[getReactRootID(n)];if(a){var c=a._currentElement,i=c.props;if(shouldUpdateReactComponent(i,t)){var u=a._renderedComponent.getPublicInstance(),d=o&&function(){o.call(u)};return ReactMount._updateRootComponent(a,r,n,d),u}ReactMount.unmountComponentAtNode(n)}var R=getReactRootElementInContainer(n),s=R&&!!internalGetID(R),l=hasNonRootReactChild(n),p=s&&!a&&!l,C=ReactMount._renderNewRootComponent(r,n,p,null!=e?e._reactInternalInstance._processChildContext(e._reactInternalInstance._context):emptyObject)._renderedComponent.getPublicInstance();return o&&o.call(C),C},render:function(e,t,n){return ReactMount._renderSubtreeIntoContainer(null,e,t,n)},registerContainer:function(e){var t=getReactRootID(e);return t&&(t=ReactInstanceHandles.getReactRootIDFromNodeID(t)),t||(t=ReactInstanceHandles.createReactRootID()),containersByReactRootID[t]=e,t},unmountComponentAtNode:function(e){!e||e.nodeType!==ELEMENT_NODE_TYPE&&e.nodeType!==DOC_NODE_TYPE&&e.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE?invariant(!1):void 0;var t=getReactRootID(e),n=instancesByReactRootID[t];if(!n){var o=(hasNonRootReactChild(e),internalGetID(e));o&&o===ReactInstanceHandles.getReactRootIDFromNodeID(o);return!1}return ReactUpdates.batchedUpdates(unmountComponentFromNode,n,e),delete instancesByReactRootID[t],delete containersByReactRootID[t],!0},findReactContainerForID:function(e){var t=ReactInstanceHandles.getReactRootIDFromNodeID(e),n=containersByReactRootID[t];return n},findReactNodeByID:function(e){var t=ReactMount.findReactContainerForID(e);return ReactMount.findComponentRoot(t,e)},getFirstReactDOM:function(e){return findFirstReactDOMImpl(e)},findComponentRoot:function(e,t){var n=findComponentRootReusableArray,o=0,r=findDeepestCachedAncestor(t)||e;for(n[0]=r.firstChild,n.length=1;o<n.length;){for(var a,c=n[o++];c;){var i=ReactMount.getID(c);i?t===i?a=c:ReactInstanceHandles.isAncestorIDOf(i,t)&&(n.length=o=0,n.push(c.firstChild)):n.push(c.firstChild),c=c.nextSibling}if(a)return n.length=0,a}n.length=0,invariant(!1)},_mountImageIntoNode:function(e,t,n,o){if(!t||t.nodeType!==ELEMENT_NODE_TYPE&&t.nodeType!==DOC_NODE_TYPE&&t.nodeType!==DOCUMENT_FRAGMENT_NODE_TYPE?invariant(!1):void 0,n){var r=getReactRootElementInContainer(t);if(ReactMarkupChecksum.canReuseMarkup(e,r))return;var a=r.getAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);r.removeAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME);var c=r.outerHTML;r.setAttribute(ReactMarkupChecksum.CHECKSUM_ATTR_NAME,a);var i=e,u=firstDifferenceIndex(i,c);" (client) "+i.substring(u-20,u+20)+"\n (server) "+c.substring(u-20,u+20);t.nodeType===DOC_NODE_TYPE?invariant(!1):void 0}if(t.nodeType===DOC_NODE_TYPE?invariant(!1):void 0,o.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);t.appendChild(e)}else setInnerHTML(t,e)},ownerDocumentContextKey:ownerDocumentContextKey,getReactRootID:getReactRootID,getID:getID,setID:setID,getNode:getNode,getNodeFromInstance:getNodeFromInstance,isValid:isValid,purgeID:purgeID};ReactPerf.measureMethods(ReactMount,"ReactMount",{_renderNewRootComponent:"_renderNewRootComponent",_mountImageIntoNode:"_mountImageIntoNode"}),module.exports=ReactMount;

},{"./DOMProperty":32,"./Object.assign":45,"./ReactBrowserEventEmitter":49,"./ReactCurrentOwner":57,"./ReactDOMFeatureFlags":62,"./ReactElement":73,"./ReactEmptyComponentRegistry":76,"./ReactInstanceHandles":82,"./ReactInstanceMap":83,"./ReactMarkupChecksum":85,"./ReactPerf":92,"./ReactReconciler":97,"./ReactUpdateQueue":103,"./ReactUpdates":104,"./instantiateReactComponent":139,"./setInnerHTML":145,"./shouldUpdateReactComponent":147,"./validateDOMNesting":149,"fbjs/lib/containsNode":154,"fbjs/lib/emptyObject":158,"fbjs/lib/invariant":165,"fbjs/lib/warning":174}],87:[function(require,module,exports){
"use strict";function enqueueInsertMarkup(e,n,t){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.INSERT_MARKUP,markupIndex:markupQueue.push(n)-1,content:null,fromIndex:null,toIndex:t})}function enqueueMove(e,n,t){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.MOVE_EXISTING,markupIndex:null,content:null,fromIndex:n,toIndex:t})}function enqueueRemove(e,n){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.REMOVE_NODE,markupIndex:null,content:null,fromIndex:n,toIndex:null})}function enqueueSetMarkup(e,n){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.SET_MARKUP,markupIndex:null,content:n,fromIndex:null,toIndex:null})}function enqueueTextContent(e,n){updateQueue.push({parentID:e,parentNode:null,type:ReactMultiChildUpdateTypes.TEXT_CONTENT,markupIndex:null,content:n,fromIndex:null,toIndex:null})}function processQueue(){updateQueue.length&&(ReactComponentEnvironment.processChildrenUpdates(updateQueue,markupQueue),clearQueue())}function clearQueue(){updateQueue.length=0,markupQueue.length=0}var ReactComponentEnvironment=require("./ReactComponentEnvironment"),ReactMultiChildUpdateTypes=require("./ReactMultiChildUpdateTypes"),ReactCurrentOwner=require("./ReactCurrentOwner"),ReactReconciler=require("./ReactReconciler"),ReactChildReconciler=require("./ReactChildReconciler"),flattenChildren=require("./flattenChildren"),updateDepth=0,updateQueue=[],markupQueue=[],ReactMultiChild={Mixin:{_reconcilerInstantiateChildren:function(e,n,t){return ReactChildReconciler.instantiateChildren(e,n,t)},_reconcilerUpdateChildren:function(e,n,t,u){var r;return r=flattenChildren(n),ReactChildReconciler.updateChildren(e,r,t,u)},mountChildren:function(e,n,t){var u=this._reconcilerInstantiateChildren(e,n,t);this._renderedChildren=u;var r=[],i=0;for(var o in u)if(u.hasOwnProperty(o)){var d=u[o],a=this._rootNodeID+o,l=ReactReconciler.mountComponent(d,a,n,t);d._mountIndex=i++,r.push(l)}return r},updateTextContent:function(e){updateDepth++;var n=!0;try{var t=this._renderedChildren;ReactChildReconciler.unmountChildren(t);for(var u in t)t.hasOwnProperty(u)&&this._unmountChild(t[u]);this.setTextContent(e),n=!1}finally{updateDepth--,updateDepth||(n?clearQueue():processQueue())}},updateMarkup:function(e){updateDepth++;var n=!0;try{var t=this._renderedChildren;ReactChildReconciler.unmountChildren(t);for(var u in t)t.hasOwnProperty(u)&&this._unmountChildByName(t[u],u);this.setMarkup(e),n=!1}finally{updateDepth--,updateDepth||(n?clearQueue():processQueue())}},updateChildren:function(e,n,t){updateDepth++;var u=!0;try{this._updateChildren(e,n,t),u=!1}finally{updateDepth--,updateDepth||(u?clearQueue():processQueue())}},_updateChildren:function(e,n,t){var u=this._renderedChildren,r=this._reconcilerUpdateChildren(u,e,n,t);if(this._renderedChildren=r,r||u){var i,o=0,d=0;for(i in r)if(r.hasOwnProperty(i)){var a=u&&u[i],l=r[i];a===l?(this.moveChild(a,d,o),o=Math.max(a._mountIndex,o),a._mountIndex=d):(a&&(o=Math.max(a._mountIndex,o),this._unmountChild(a)),this._mountChildByNameAtIndex(l,i,d,n,t)),d++}for(i in u)!u.hasOwnProperty(i)||r&&r.hasOwnProperty(i)||this._unmountChild(u[i])}},unmountChildren:function(){var e=this._renderedChildren;ReactChildReconciler.unmountChildren(e),this._renderedChildren=null},moveChild:function(e,n,t){e._mountIndex<t&&enqueueMove(this._rootNodeID,e._mountIndex,n)},createChild:function(e,n){enqueueInsertMarkup(this._rootNodeID,n,e._mountIndex)},removeChild:function(e){enqueueRemove(this._rootNodeID,e._mountIndex)},setTextContent:function(e){enqueueTextContent(this._rootNodeID,e)},setMarkup:function(e){enqueueSetMarkup(this._rootNodeID,e)},_mountChildByNameAtIndex:function(e,n,t,u,r){var i=this._rootNodeID+n,o=ReactReconciler.mountComponent(e,i,u,r);e._mountIndex=t,this.createChild(e,o)},_unmountChild:function(e){this.removeChild(e),e._mountIndex=null}}};module.exports=ReactMultiChild;

},{"./ReactChildReconciler":50,"./ReactComponentEnvironment":55,"./ReactCurrentOwner":57,"./ReactMultiChildUpdateTypes":88,"./ReactReconciler":97,"./flattenChildren":130}],88:[function(require,module,exports){
"use strict";var keyMirror=require("fbjs/lib/keyMirror"),ReactMultiChildUpdateTypes=keyMirror({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});module.exports=ReactMultiChildUpdateTypes;

},{"fbjs/lib/keyMirror":168}],89:[function(require,module,exports){
"use strict";function getComponentClassForElement(n){if("function"==typeof n.type)return n.type;var e=n.type,t=tagToComponentClass[e];return null==t&&(tagToComponentClass[e]=t=autoGenerateWrapperClass(e)),t}function createInternalComponent(n){return genericComponentClass?void 0:invariant(!1),new genericComponentClass(n.type,n.props)}function createInstanceForText(n){return new textComponentClass(n)}function isTextComponent(n){return n instanceof textComponentClass}var assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),autoGenerateWrapperClass=null,genericComponentClass=null,tagToComponentClass={},textComponentClass=null,ReactNativeComponentInjection={injectGenericComponentClass:function(n){genericComponentClass=n},injectTextComponentClass:function(n){textComponentClass=n},injectComponentClasses:function(n){assign(tagToComponentClass,n)}},ReactNativeComponent={getComponentClassForElement:getComponentClassForElement,createInternalComponent:createInternalComponent,createInstanceForText:createInstanceForText,isTextComponent:isTextComponent,injection:ReactNativeComponentInjection};module.exports=ReactNativeComponent;

},{"./Object.assign":45,"fbjs/lib/invariant":165}],90:[function(require,module,exports){
"use strict";function warnTDZ(e,n){}var warning=require("fbjs/lib/warning"),ReactNoopUpdateQueue={isMounted:function(e){return!1},enqueueCallback:function(e,n){},enqueueForceUpdate:function(e){warnTDZ(e,"forceUpdate")},enqueueReplaceState:function(e,n){warnTDZ(e,"replaceState")},enqueueSetState:function(e,n){warnTDZ(e,"setState")},enqueueSetProps:function(e,n){warnTDZ(e,"setProps")},enqueueReplaceProps:function(e,n){warnTDZ(e,"replaceProps")}};module.exports=ReactNoopUpdateQueue;

},{"fbjs/lib/warning":174}],91:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),ReactOwner={isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,n,t){ReactOwner.isValidOwner(t)?void 0:invariant(!1),t.attachRef(n,e)},removeComponentAsRefFrom:function(e,n,t){ReactOwner.isValidOwner(t)?void 0:invariant(!1),t.getPublicInstance().refs[n]===e.getPublicInstance()&&t.detachRef(n)}};module.exports=ReactOwner;

},{"fbjs/lib/invariant":165}],92:[function(require,module,exports){
"use strict";function _noMeasure(e,r,t){return t}var ReactPerf={enableMeasure:!1,storedMeasure:_noMeasure,measureMethods:function(e,r,t){},measure:function(e,r,t){return t},injection:{injectMeasure:function(e){ReactPerf.storedMeasure=e}}};module.exports=ReactPerf;

},{}],93:[function(require,module,exports){
"use strict";var ReactPropTypeLocationNames={};module.exports=ReactPropTypeLocationNames;

},{}],94:[function(require,module,exports){
"use strict";var keyMirror=require("fbjs/lib/keyMirror"),ReactPropTypeLocations=keyMirror({prop:null,context:null,childContext:null});module.exports=ReactPropTypeLocations;

},{"fbjs/lib/keyMirror":168}],95:[function(require,module,exports){
"use strict";function createChainableTypeChecker(e){function r(r,n,t,a,c,o){if(a=a||ANONYMOUS,o=o||t,null==n[t]){var i=ReactPropTypeLocationNames[c];return r?new Error("Required "+i+" `"+o+"` was not specified in "+("`"+a+"`.")):null}return e(n,t,a,c,o)}var n=r.bind(null,!1);return n.isRequired=r.bind(null,!0),n}function createPrimitiveTypeChecker(e){function r(r,n,t,a,c){var o=r[n],i=getPropType(o);if(i!==e){var u=ReactPropTypeLocationNames[a],p=getPreciseType(o);return new Error("Invalid "+u+" `"+c+"` of type "+("`"+p+"` supplied to `"+t+"`, expected ")+("`"+e+"`."))}return null}return createChainableTypeChecker(r)}function createAnyTypeChecker(){return createChainableTypeChecker(emptyFunction.thatReturns(null))}function createArrayOfTypeChecker(e){function r(r,n,t,a,c){var o=r[n];if(!Array.isArray(o)){var i=ReactPropTypeLocationNames[a],u=getPropType(o);return new Error("Invalid "+i+" `"+c+"` of type "+("`"+u+"` supplied to `"+t+"`, expected an array."))}for(var p=0;p<o.length;p++){var l=e(o,p,t,a,c+"["+p+"]");if(l instanceof Error)return l}return null}return createChainableTypeChecker(r)}function createElementTypeChecker(){function e(e,r,n,t,a){if(!ReactElement.isValidElement(e[r])){var c=ReactPropTypeLocationNames[t];return new Error("Invalid "+c+" `"+a+"` supplied to "+("`"+n+"`, expected a single ReactElement."))}return null}return createChainableTypeChecker(e)}function createInstanceTypeChecker(e){function r(r,n,t,a,c){if(!(r[n]instanceof e)){var o=ReactPropTypeLocationNames[a],i=e.name||ANONYMOUS,u=getClassName(r[n]);return new Error("Invalid "+o+" `"+c+"` of type "+("`"+u+"` supplied to `"+t+"`, expected ")+("instance of `"+i+"`."))}return null}return createChainableTypeChecker(r)}function createEnumTypeChecker(e){function r(r,n,t,a,c){for(var o=r[n],i=0;i<e.length;i++)if(o===e[i])return null;var u=ReactPropTypeLocationNames[a],p=JSON.stringify(e);return new Error("Invalid "+u+" `"+c+"` of value `"+o+"` "+("supplied to `"+t+"`, expected one of "+p+"."))}return createChainableTypeChecker(Array.isArray(e)?r:function(){return new Error("Invalid argument supplied to oneOf, expected an instance of array.")})}function createObjectOfTypeChecker(e){function r(r,n,t,a,c){var o=r[n],i=getPropType(o);if("object"!==i){var u=ReactPropTypeLocationNames[a];return new Error("Invalid "+u+" `"+c+"` of type "+("`"+i+"` supplied to `"+t+"`, expected an object."))}for(var p in o)if(o.hasOwnProperty(p)){var l=e(o,p,t,a,c+"."+p);if(l instanceof Error)return l}return null}return createChainableTypeChecker(r)}function createUnionTypeChecker(e){function r(r,n,t,a,c){for(var o=0;o<e.length;o++){var i=e[o];if(null==i(r,n,t,a,c))return null}var u=ReactPropTypeLocationNames[a];return new Error("Invalid "+u+" `"+c+"` supplied to "+("`"+t+"`."))}return createChainableTypeChecker(Array.isArray(e)?r:function(){return new Error("Invalid argument supplied to oneOfType, expected an instance of array.")})}function createNodeChecker(){function e(e,r,n,t,a){if(!isNode(e[r])){var c=ReactPropTypeLocationNames[t];return new Error("Invalid "+c+" `"+a+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return createChainableTypeChecker(e)}function createShapeTypeChecker(e){function r(r,n,t,a,c){var o=r[n],i=getPropType(o);if("object"!==i){var u=ReactPropTypeLocationNames[a];return new Error("Invalid "+u+" `"+c+"` of type `"+i+"` "+("supplied to `"+t+"`, expected `object`."))}for(var p in e){var l=e[p];if(l){var y=l(o,p,t,a,c+"."+p);if(y)return y}}return null}return createChainableTypeChecker(r)}function isNode(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(isNode);if(null===e||ReactElement.isValidElement(e))return!0;var r=getIteratorFn(e);if(!r)return!1;var n,t=r.call(e);if(r!==e.entries){for(;!(n=t.next()).done;)if(!isNode(n.value))return!1}else for(;!(n=t.next()).done;){var a=n.value;if(a&&!isNode(a[1]))return!1}return!0;default:return!1}}function getPropType(e){var r=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":r}function getPreciseType(e){var r=getPropType(e);if("object"===r){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return r}function getClassName(e){return e.constructor&&e.constructor.name?e.constructor.name:"<<anonymous>>"}var ReactElement=require("./ReactElement"),ReactPropTypeLocationNames=require("./ReactPropTypeLocationNames"),emptyFunction=require("fbjs/lib/emptyFunction"),getIteratorFn=require("./getIteratorFn"),ANONYMOUS="<<anonymous>>",ReactPropTypes={array:createPrimitiveTypeChecker("array"),bool:createPrimitiveTypeChecker("boolean"),func:createPrimitiveTypeChecker("function"),number:createPrimitiveTypeChecker("number"),object:createPrimitiveTypeChecker("object"),string:createPrimitiveTypeChecker("string"),any:createAnyTypeChecker(),arrayOf:createArrayOfTypeChecker,element:createElementTypeChecker(),instanceOf:createInstanceTypeChecker,node:createNodeChecker(),objectOf:createObjectOfTypeChecker,oneOf:createEnumTypeChecker,oneOfType:createUnionTypeChecker,shape:createShapeTypeChecker};module.exports=ReactPropTypes;

},{"./ReactElement":73,"./ReactPropTypeLocationNames":93,"./getIteratorFn":136,"fbjs/lib/emptyFunction":157}],96:[function(require,module,exports){
"use strict";function ReactReconcileTransaction(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=CallbackQueue.getPooled(null),this.useCreateElement=!e&&ReactDOMFeatureFlags.useCreateElement}var CallbackQueue=require("./CallbackQueue"),PooledClass=require("./PooledClass"),ReactBrowserEventEmitter=require("./ReactBrowserEventEmitter"),ReactDOMFeatureFlags=require("./ReactDOMFeatureFlags"),ReactInputSelection=require("./ReactInputSelection"),Transaction=require("./Transaction"),assign=require("./Object.assign"),SELECTION_RESTORATION={initialize:ReactInputSelection.getSelectionInformation,close:ReactInputSelection.restoreSelection},EVENT_SUPPRESSION={initialize:function(){var e=ReactBrowserEventEmitter.isEnabled();return ReactBrowserEventEmitter.setEnabled(!1),e},close:function(e){ReactBrowserEventEmitter.setEnabled(e)}},ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},TRANSACTION_WRAPPERS=[SELECTION_RESTORATION,EVENT_SUPPRESSION,ON_DOM_READY_QUEUEING],Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},destructor:function(){CallbackQueue.release(this.reactMountReady),this.reactMountReady=null}};assign(ReactReconcileTransaction.prototype,Transaction.Mixin,Mixin),PooledClass.addPoolingTo(ReactReconcileTransaction),module.exports=ReactReconcileTransaction;

},{"./CallbackQueue":28,"./Object.assign":45,"./PooledClass":46,"./ReactBrowserEventEmitter":49,"./ReactDOMFeatureFlags":62,"./ReactInputSelection":81,"./Transaction":121}],97:[function(require,module,exports){
"use strict";function attachRefs(){ReactRef.attachRefs(this,this._currentElement)}var ReactRef=require("./ReactRef"),ReactReconciler={mountComponent:function(e,t,n,c){var r=e.mountComponent(t,n,c);return e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(attachRefs,e),r},unmountComponent:function(e){ReactRef.detachRefs(e,e._currentElement),e.unmountComponent()},receiveComponent:function(e,t,n,c){var r=e._currentElement;if(t!==r||c!==e._context){var a=ReactRef.shouldUpdateRefs(r,t);a&&ReactRef.detachRefs(e,r),e.receiveComponent(t,n,c),a&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(attachRefs,e)}},performUpdateIfNecessary:function(e,t){e.performUpdateIfNecessary(t)}};module.exports=ReactReconciler;

},{"./ReactRef":98}],98:[function(require,module,exports){
"use strict";function attachRef(e,n,t){"function"==typeof e?e(n.getPublicInstance()):ReactOwner.addComponentAsRefTo(n,e,t)}function detachRef(e,n,t){"function"==typeof e?e(null):ReactOwner.removeComponentAsRefFrom(n,e,t)}var ReactOwner=require("./ReactOwner"),ReactRef={};ReactRef.attachRefs=function(e,n){if(null!==n&&n!==!1){var t=n.ref;null!=t&&attachRef(t,e,n._owner)}},ReactRef.shouldUpdateRefs=function(e,n){var t=null===e||e===!1,f=null===n||n===!1;return t||f||n._owner!==e._owner||n.ref!==e.ref},ReactRef.detachRefs=function(e,n){if(null!==n&&n!==!1){var t=n.ref;null!=t&&detachRef(t,e,n._owner)}},module.exports=ReactRef;

},{"./ReactOwner":91}],99:[function(require,module,exports){
"use strict";var ReactRootIndexInjection={injectCreateReactRootIndex:function(e){ReactRootIndex.createReactRootIndex=e}},ReactRootIndex={createReactRootIndex:null,injection:ReactRootIndexInjection};module.exports=ReactRootIndex;

},{}],100:[function(require,module,exports){
"use strict";var ReactServerBatchingStrategy={isBatchingUpdates:!1,batchedUpdates:function(t){}};module.exports=ReactServerBatchingStrategy;

},{}],101:[function(require,module,exports){
"use strict";function renderToString(e){ReactElement.isValidElement(e)?void 0:invariant(!1);var t;try{ReactUpdates.injection.injectBatchingStrategy(ReactServerBatchingStrategy);var a=ReactInstanceHandles.createReactRootID();return t=ReactServerRenderingTransaction.getPooled(!1),t.perform(function(){var n=instantiateReactComponent(e,null),r=n.mountComponent(a,t,emptyObject);return ReactMarkupChecksum.addChecksumToMarkup(r)},null)}finally{ReactServerRenderingTransaction.release(t),ReactUpdates.injection.injectBatchingStrategy(ReactDefaultBatchingStrategy)}}function renderToStaticMarkup(e){ReactElement.isValidElement(e)?void 0:invariant(!1);var t;try{ReactUpdates.injection.injectBatchingStrategy(ReactServerBatchingStrategy);var a=ReactInstanceHandles.createReactRootID();return t=ReactServerRenderingTransaction.getPooled(!0),t.perform(function(){var n=instantiateReactComponent(e,null);return n.mountComponent(a,t,emptyObject)},null)}finally{ReactServerRenderingTransaction.release(t),ReactUpdates.injection.injectBatchingStrategy(ReactDefaultBatchingStrategy)}}var ReactDefaultBatchingStrategy=require("./ReactDefaultBatchingStrategy"),ReactElement=require("./ReactElement"),ReactInstanceHandles=require("./ReactInstanceHandles"),ReactMarkupChecksum=require("./ReactMarkupChecksum"),ReactServerBatchingStrategy=require("./ReactServerBatchingStrategy"),ReactServerRenderingTransaction=require("./ReactServerRenderingTransaction"),ReactUpdates=require("./ReactUpdates"),emptyObject=require("fbjs/lib/emptyObject"),instantiateReactComponent=require("./instantiateReactComponent"),invariant=require("fbjs/lib/invariant");module.exports={renderToString:renderToString,renderToStaticMarkup:renderToStaticMarkup};

},{"./ReactDefaultBatchingStrategy":71,"./ReactElement":73,"./ReactInstanceHandles":82,"./ReactMarkupChecksum":85,"./ReactServerBatchingStrategy":100,"./ReactServerRenderingTransaction":102,"./ReactUpdates":104,"./instantiateReactComponent":139,"fbjs/lib/emptyObject":158,"fbjs/lib/invariant":165}],102:[function(require,module,exports){
"use strict";function ReactServerRenderingTransaction(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.reactMountReady=CallbackQueue.getPooled(null),this.useCreateElement=!1}var PooledClass=require("./PooledClass"),CallbackQueue=require("./CallbackQueue"),Transaction=require("./Transaction"),assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),ON_DOM_READY_QUEUEING={initialize:function(){this.reactMountReady.reset()},close:emptyFunction},TRANSACTION_WRAPPERS=[ON_DOM_READY_QUEUEING],Mixin={getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},getReactMountReady:function(){return this.reactMountReady},destructor:function(){CallbackQueue.release(this.reactMountReady),this.reactMountReady=null}};assign(ReactServerRenderingTransaction.prototype,Transaction.Mixin,Mixin),PooledClass.addPoolingTo(ReactServerRenderingTransaction),module.exports=ReactServerRenderingTransaction;

},{"./CallbackQueue":28,"./Object.assign":45,"./PooledClass":46,"./Transaction":121,"fbjs/lib/emptyFunction":157}],103:[function(require,module,exports){
"use strict";function enqueueUpdate(e){ReactUpdates.enqueueUpdate(e)}function getInternalInstanceReadyForUpdate(e,n){var t=ReactInstanceMap.get(e);return t?t:null}var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactElement=require("./ReactElement"),ReactInstanceMap=require("./ReactInstanceMap"),ReactUpdates=require("./ReactUpdates"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ReactUpdateQueue={isMounted:function(e){var n=ReactInstanceMap.get(e);return!!n&&!!n._renderedComponent},enqueueCallback:function(e,n){"function"!=typeof n?invariant(!1):void 0;var t=getInternalInstanceReadyForUpdate(e);return t?(t._pendingCallbacks?t._pendingCallbacks.push(n):t._pendingCallbacks=[n],void enqueueUpdate(t)):null},enqueueCallbackInternal:function(e,n){"function"!=typeof n?invariant(!1):void 0,e._pendingCallbacks?e._pendingCallbacks.push(n):e._pendingCallbacks=[n],enqueueUpdate(e)},enqueueForceUpdate:function(e){var n=getInternalInstanceReadyForUpdate(e,"forceUpdate");n&&(n._pendingForceUpdate=!0,enqueueUpdate(n))},enqueueReplaceState:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"replaceState");t&&(t._pendingStateQueue=[n],t._pendingReplaceState=!0,enqueueUpdate(t))},enqueueSetState:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"setState");if(t){var a=t._pendingStateQueue||(t._pendingStateQueue=[]);a.push(n),enqueueUpdate(t)}},enqueueSetProps:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"setProps");t&&ReactUpdateQueue.enqueueSetPropsInternal(t,n)},enqueueSetPropsInternal:function(e,n){var t=e._topLevelWrapper;t?void 0:invariant(!1);var a=t._pendingElement||t._currentElement,r=a.props,u=assign({},r.props,n);t._pendingElement=ReactElement.cloneAndReplaceProps(a,ReactElement.cloneAndReplaceProps(r,u)),enqueueUpdate(t)},enqueueReplaceProps:function(e,n){var t=getInternalInstanceReadyForUpdate(e,"replaceProps");t&&ReactUpdateQueue.enqueueReplacePropsInternal(t,n)},enqueueReplacePropsInternal:function(e,n){var t=e._topLevelWrapper;t?void 0:invariant(!1);var a=t._pendingElement||t._currentElement,r=a.props;t._pendingElement=ReactElement.cloneAndReplaceProps(a,ReactElement.cloneAndReplaceProps(r,n)),enqueueUpdate(t)},enqueueElementInternal:function(e,n){e._pendingElement=n,enqueueUpdate(e)}};module.exports=ReactUpdateQueue;

},{"./Object.assign":45,"./ReactCurrentOwner":57,"./ReactElement":73,"./ReactInstanceMap":83,"./ReactUpdates":104,"fbjs/lib/invariant":165,"fbjs/lib/warning":174}],104:[function(require,module,exports){
"use strict";function ensureInjected(){ReactUpdates.ReactReconcileTransaction&&batchingStrategy?void 0:invariant(!1)}function ReactUpdatesFlushTransaction(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,this.callbackQueue=CallbackQueue.getPooled(),this.reconcileTransaction=ReactUpdates.ReactReconcileTransaction.getPooled(!1)}function batchedUpdates(e,t,a,n,i,c){ensureInjected(),batchingStrategy.batchedUpdates(e,t,a,n,i,c)}function mountOrderComparator(e,t){return e._mountOrder-t._mountOrder}function runBatchedUpdates(e){var t=e.dirtyComponentsLength;t!==dirtyComponents.length?invariant(!1):void 0,dirtyComponents.sort(mountOrderComparator);for(var a=0;a<t;a++){var n=dirtyComponents[a],i=n._pendingCallbacks;if(n._pendingCallbacks=null,ReactReconciler.performUpdateIfNecessary(n,e.reconcileTransaction),i)for(var c=0;c<i.length;c++)e.callbackQueue.enqueue(i[c],n.getPublicInstance())}}function enqueueUpdate(e){return ensureInjected(),batchingStrategy.isBatchingUpdates?void dirtyComponents.push(e):void batchingStrategy.batchedUpdates(enqueueUpdate,e)}function asap(e,t){batchingStrategy.isBatchingUpdates?void 0:invariant(!1),asapCallbackQueue.enqueue(e,t),asapEnqueued=!0}var CallbackQueue=require("./CallbackQueue"),PooledClass=require("./PooledClass"),ReactPerf=require("./ReactPerf"),ReactReconciler=require("./ReactReconciler"),Transaction=require("./Transaction"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),dirtyComponents=[],asapCallbackQueue=CallbackQueue.getPooled(),asapEnqueued=!1,batchingStrategy=null,NESTED_UPDATES={initialize:function(){this.dirtyComponentsLength=dirtyComponents.length},close:function(){this.dirtyComponentsLength!==dirtyComponents.length?(dirtyComponents.splice(0,this.dirtyComponentsLength),flushBatchedUpdates()):dirtyComponents.length=0}},UPDATE_QUEUEING={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},TRANSACTION_WRAPPERS=[NESTED_UPDATES,UPDATE_QUEUEING];assign(ReactUpdatesFlushTransaction.prototype,Transaction.Mixin,{getTransactionWrappers:function(){return TRANSACTION_WRAPPERS},destructor:function(){this.dirtyComponentsLength=null,CallbackQueue.release(this.callbackQueue),this.callbackQueue=null,ReactUpdates.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,a){return Transaction.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,a)}}),PooledClass.addPoolingTo(ReactUpdatesFlushTransaction);var flushBatchedUpdates=function(){for(;dirtyComponents.length||asapEnqueued;){if(dirtyComponents.length){var e=ReactUpdatesFlushTransaction.getPooled();e.perform(runBatchedUpdates,null,e),ReactUpdatesFlushTransaction.release(e)}if(asapEnqueued){asapEnqueued=!1;var t=asapCallbackQueue;asapCallbackQueue=CallbackQueue.getPooled(),t.notifyAll(),CallbackQueue.release(t)}}};flushBatchedUpdates=ReactPerf.measure("ReactUpdates","flushBatchedUpdates",flushBatchedUpdates);var ReactUpdatesInjection={injectReconcileTransaction:function(e){e?void 0:invariant(!1),ReactUpdates.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e?void 0:invariant(!1),"function"!=typeof e.batchedUpdates?invariant(!1):void 0,"boolean"!=typeof e.isBatchingUpdates?invariant(!1):void 0,batchingStrategy=e}},ReactUpdates={ReactReconcileTransaction:null,batchedUpdates:batchedUpdates,enqueueUpdate:enqueueUpdate,flushBatchedUpdates:flushBatchedUpdates,injection:ReactUpdatesInjection,asap:asap};module.exports=ReactUpdates;

},{"./CallbackQueue":28,"./Object.assign":45,"./PooledClass":46,"./ReactPerf":92,"./ReactReconciler":97,"./Transaction":121,"fbjs/lib/invariant":165}],105:[function(require,module,exports){
"use strict";module.exports="0.14.8";

},{}],106:[function(require,module,exports){
"use strict";var DOMProperty=require("./DOMProperty"),MUST_USE_ATTRIBUTE=DOMProperty.injection.MUST_USE_ATTRIBUTE,NS={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},SVGDOMPropertyConfig={Properties:{clipPath:MUST_USE_ATTRIBUTE,cx:MUST_USE_ATTRIBUTE,cy:MUST_USE_ATTRIBUTE,d:MUST_USE_ATTRIBUTE,dx:MUST_USE_ATTRIBUTE,dy:MUST_USE_ATTRIBUTE,fill:MUST_USE_ATTRIBUTE,fillOpacity:MUST_USE_ATTRIBUTE,fontFamily:MUST_USE_ATTRIBUTE,fontSize:MUST_USE_ATTRIBUTE,fx:MUST_USE_ATTRIBUTE,fy:MUST_USE_ATTRIBUTE,gradientTransform:MUST_USE_ATTRIBUTE,gradientUnits:MUST_USE_ATTRIBUTE,markerEnd:MUST_USE_ATTRIBUTE,markerMid:MUST_USE_ATTRIBUTE,markerStart:MUST_USE_ATTRIBUTE,offset:MUST_USE_ATTRIBUTE,opacity:MUST_USE_ATTRIBUTE,patternContentUnits:MUST_USE_ATTRIBUTE,patternUnits:MUST_USE_ATTRIBUTE,points:MUST_USE_ATTRIBUTE,preserveAspectRatio:MUST_USE_ATTRIBUTE,r:MUST_USE_ATTRIBUTE,rx:MUST_USE_ATTRIBUTE,ry:MUST_USE_ATTRIBUTE,spreadMethod:MUST_USE_ATTRIBUTE,stopColor:MUST_USE_ATTRIBUTE,stopOpacity:MUST_USE_ATTRIBUTE,stroke:MUST_USE_ATTRIBUTE,strokeDasharray:MUST_USE_ATTRIBUTE,strokeLinecap:MUST_USE_ATTRIBUTE,strokeOpacity:MUST_USE_ATTRIBUTE,strokeWidth:MUST_USE_ATTRIBUTE,textAnchor:MUST_USE_ATTRIBUTE,transform:MUST_USE_ATTRIBUTE,version:MUST_USE_ATTRIBUTE,viewBox:MUST_USE_ATTRIBUTE,x1:MUST_USE_ATTRIBUTE,x2:MUST_USE_ATTRIBUTE,x:MUST_USE_ATTRIBUTE,xlinkActuate:MUST_USE_ATTRIBUTE,xlinkArcrole:MUST_USE_ATTRIBUTE,xlinkHref:MUST_USE_ATTRIBUTE,xlinkRole:MUST_USE_ATTRIBUTE,xlinkShow:MUST_USE_ATTRIBUTE,xlinkTitle:MUST_USE_ATTRIBUTE,xlinkType:MUST_USE_ATTRIBUTE,xmlBase:MUST_USE_ATTRIBUTE,xmlLang:MUST_USE_ATTRIBUTE,xmlSpace:MUST_USE_ATTRIBUTE,y1:MUST_USE_ATTRIBUTE,y2:MUST_USE_ATTRIBUTE,y:MUST_USE_ATTRIBUTE},DOMAttributeNamespaces:{xlinkActuate:NS.xlink,xlinkArcrole:NS.xlink,xlinkHref:NS.xlink,xlinkRole:NS.xlink,xlinkShow:NS.xlink,xlinkTitle:NS.xlink,xlinkType:NS.xlink,xmlBase:NS.xml,xmlLang:NS.xml,xmlSpace:NS.xml},DOMAttributeNames:{clipPath:"clip-path",fillOpacity:"fill-opacity",fontFamily:"font-family",fontSize:"font-size",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",patternContentUnits:"patternContentUnits",patternUnits:"patternUnits",preserveAspectRatio:"preserveAspectRatio",spreadMethod:"spreadMethod",stopColor:"stop-color",stopOpacity:"stop-opacity",strokeDasharray:"stroke-dasharray",strokeLinecap:"stroke-linecap",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",textAnchor:"text-anchor",viewBox:"viewBox",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlLang:"xml:lang",xmlSpace:"xml:space"}};module.exports=SVGDOMPropertyConfig;

},{"./DOMProperty":32}],107:[function(require,module,exports){
"use strict";function getSelection(e){if("selectionStart"in e&&ReactInputSelection.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function constructSelectEvent(e,t){if(mouseDown||null==activeElement||activeElement!==getActiveElement())return null;var n=getSelection(activeElement);if(!lastSelection||!shallowEqual(lastSelection,n)){lastSelection=n;var o=SyntheticEvent.getPooled(eventTypes.select,activeElementID,e,t);return o.type="select",o.target=activeElement,EventPropagators.accumulateTwoPhaseDispatches(o),o}return null}var EventConstants=require("./EventConstants"),EventPropagators=require("./EventPropagators"),ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),ReactInputSelection=require("./ReactInputSelection"),SyntheticEvent=require("./SyntheticEvent"),getActiveElement=require("fbjs/lib/getActiveElement"),isTextInputElement=require("./isTextInputElement"),keyOf=require("fbjs/lib/keyOf"),shallowEqual=require("fbjs/lib/shallowEqual"),topLevelTypes=EventConstants.topLevelTypes,skipSelectionChangeEvent=ExecutionEnvironment.canUseDOM&&"documentMode"in document&&document.documentMode<=11,eventTypes={select:{phasedRegistrationNames:{bubbled:keyOf({onSelect:null}),captured:keyOf({onSelectCapture:null})},dependencies:[topLevelTypes.topBlur,topLevelTypes.topContextMenu,topLevelTypes.topFocus,topLevelTypes.topKeyDown,topLevelTypes.topMouseDown,topLevelTypes.topMouseUp,topLevelTypes.topSelectionChange]}},activeElement=null,activeElementID=null,lastSelection=null,mouseDown=!1,hasListener=!1,ON_SELECT_KEY=keyOf({onSelect:null}),SelectEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,n,o,l){if(!hasListener)return null;switch(e){case topLevelTypes.topFocus:(isTextInputElement(t)||"true"===t.contentEditable)&&(activeElement=t,activeElementID=n,lastSelection=null);break;case topLevelTypes.topBlur:activeElement=null,activeElementID=null,lastSelection=null;break;case topLevelTypes.topMouseDown:mouseDown=!0;break;case topLevelTypes.topContextMenu:case topLevelTypes.topMouseUp:return mouseDown=!1,constructSelectEvent(o,l);case topLevelTypes.topSelectionChange:if(skipSelectionChangeEvent)break;case topLevelTypes.topKeyDown:case topLevelTypes.topKeyUp:return constructSelectEvent(o,l)}return null},didPutListener:function(e,t,n){t===ON_SELECT_KEY&&(hasListener=!0)}};module.exports=SelectEventPlugin;

},{"./EventConstants":37,"./EventPropagators":41,"./ReactInputSelection":81,"./SyntheticEvent":113,"./isTextInputElement":141,"fbjs/lib/ExecutionEnvironment":151,"fbjs/lib/getActiveElement":160,"fbjs/lib/keyOf":169,"fbjs/lib/shallowEqual":172}],108:[function(require,module,exports){
"use strict";var GLOBAL_MOUNT_POINT_MAX=Math.pow(2,53),ServerReactRootIndex={createReactRootIndex:function(){return Math.ceil(Math.random()*GLOBAL_MOUNT_POINT_MAX)}};module.exports=ServerReactRootIndex;

},{}],109:[function(require,module,exports){
"use strict";var EventConstants=require("./EventConstants"),EventListener=require("fbjs/lib/EventListener"),EventPropagators=require("./EventPropagators"),ReactMount=require("./ReactMount"),SyntheticClipboardEvent=require("./SyntheticClipboardEvent"),SyntheticEvent=require("./SyntheticEvent"),SyntheticFocusEvent=require("./SyntheticFocusEvent"),SyntheticKeyboardEvent=require("./SyntheticKeyboardEvent"),SyntheticMouseEvent=require("./SyntheticMouseEvent"),SyntheticDragEvent=require("./SyntheticDragEvent"),SyntheticTouchEvent=require("./SyntheticTouchEvent"),SyntheticUIEvent=require("./SyntheticUIEvent"),SyntheticWheelEvent=require("./SyntheticWheelEvent"),emptyFunction=require("fbjs/lib/emptyFunction"),getEventCharCode=require("./getEventCharCode"),invariant=require("fbjs/lib/invariant"),keyOf=require("fbjs/lib/keyOf"),topLevelTypes=EventConstants.topLevelTypes,eventTypes={abort:{phasedRegistrationNames:{bubbled:keyOf({onAbort:!0}),captured:keyOf({onAbortCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:keyOf({onBlur:!0}),captured:keyOf({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:keyOf({onCanPlay:!0}),captured:keyOf({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:keyOf({onCanPlayThrough:!0}),captured:keyOf({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:keyOf({onClick:!0}),captured:keyOf({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:keyOf({onContextMenu:!0}),captured:keyOf({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:keyOf({onCopy:!0}),captured:keyOf({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:keyOf({onCut:!0}),captured:keyOf({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:keyOf({onDoubleClick:!0}),captured:keyOf({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:keyOf({onDrag:!0}),captured:keyOf({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:keyOf({onDragEnd:!0}),captured:keyOf({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:keyOf({onDragEnter:!0}),captured:keyOf({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:keyOf({onDragExit:!0}),captured:keyOf({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:keyOf({onDragLeave:!0}),captured:keyOf({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:keyOf({onDragOver:!0}),captured:keyOf({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:keyOf({onDragStart:!0}),captured:keyOf({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:keyOf({onDrop:!0}),captured:keyOf({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:keyOf({onDurationChange:!0}),captured:keyOf({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:keyOf({onEmptied:!0}),captured:keyOf({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:keyOf({onEncrypted:!0}),captured:keyOf({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:keyOf({onEnded:!0}),captured:keyOf({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:keyOf({onError:!0}),captured:keyOf({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:keyOf({onFocus:!0}),captured:keyOf({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:keyOf({onInput:!0}),captured:keyOf({onInputCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:keyOf({onKeyDown:!0}),captured:keyOf({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:keyOf({onKeyPress:!0}),captured:keyOf({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:keyOf({onKeyUp:!0}),captured:keyOf({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:keyOf({onLoad:!0}),captured:keyOf({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:keyOf({onLoadedData:!0}),captured:keyOf({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:keyOf({onLoadedMetadata:!0}),captured:keyOf({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:keyOf({onLoadStart:!0}),captured:keyOf({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:keyOf({onMouseDown:!0}),captured:keyOf({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:keyOf({onMouseMove:!0}),captured:keyOf({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:keyOf({onMouseOut:!0}),captured:keyOf({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:keyOf({onMouseOver:!0}),captured:keyOf({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:keyOf({onMouseUp:!0}),captured:keyOf({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:keyOf({onPaste:!0}),captured:keyOf({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:keyOf({onPause:!0}),captured:keyOf({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:keyOf({onPlay:!0}),captured:keyOf({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:keyOf({onPlaying:!0}),captured:keyOf({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:keyOf({onProgress:!0}),captured:keyOf({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:keyOf({onRateChange:!0}),captured:keyOf({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:keyOf({onReset:!0}),captured:keyOf({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:keyOf({onScroll:!0}),captured:keyOf({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:keyOf({onSeeked:!0}),captured:keyOf({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:keyOf({onSeeking:!0}),captured:keyOf({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:keyOf({onStalled:!0}),captured:keyOf({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:keyOf({onSubmit:!0}),captured:keyOf({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:keyOf({onSuspend:!0}),captured:keyOf({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:keyOf({onTimeUpdate:!0}),captured:keyOf({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:keyOf({onTouchCancel:!0}),captured:keyOf({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:keyOf({onTouchEnd:!0}),captured:keyOf({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:keyOf({onTouchMove:!0}),captured:keyOf({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:keyOf({onTouchStart:!0}),captured:keyOf({onTouchStartCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:keyOf({onVolumeChange:!0}),captured:keyOf({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:keyOf({onWaiting:!0}),captured:keyOf({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:keyOf({onWheel:!0}),captured:keyOf({onWheelCapture:!0})}}},topLevelEventsToDispatchConfig={topAbort:eventTypes.abort,topBlur:eventTypes.blur,topCanPlay:eventTypes.canPlay,topCanPlayThrough:eventTypes.canPlayThrough,topClick:eventTypes.click,topContextMenu:eventTypes.contextMenu,topCopy:eventTypes.copy,topCut:eventTypes.cut,topDoubleClick:eventTypes.doubleClick,topDrag:eventTypes.drag,topDragEnd:eventTypes.dragEnd,topDragEnter:eventTypes.dragEnter,topDragExit:eventTypes.dragExit,topDragLeave:eventTypes.dragLeave,topDragOver:eventTypes.dragOver,topDragStart:eventTypes.dragStart,topDrop:eventTypes.drop,topDurationChange:eventTypes.durationChange,topEmptied:eventTypes.emptied,topEncrypted:eventTypes.encrypted,topEnded:eventTypes.ended,topError:eventTypes.error,topFocus:eventTypes.focus,topInput:eventTypes.input,topKeyDown:eventTypes.keyDown,topKeyPress:eventTypes.keyPress,topKeyUp:eventTypes.keyUp,topLoad:eventTypes.load,topLoadedData:eventTypes.loadedData,topLoadedMetadata:eventTypes.loadedMetadata,topLoadStart:eventTypes.loadStart,topMouseDown:eventTypes.mouseDown,topMouseMove:eventTypes.mouseMove,topMouseOut:eventTypes.mouseOut,topMouseOver:eventTypes.mouseOver,topMouseUp:eventTypes.mouseUp,topPaste:eventTypes.paste,topPause:eventTypes.pause,topPlay:eventTypes.play,topPlaying:eventTypes.playing,topProgress:eventTypes.progress,topRateChange:eventTypes.rateChange,topReset:eventTypes.reset,topScroll:eventTypes.scroll,topSeeked:eventTypes.seeked,topSeeking:eventTypes.seeking,topStalled:eventTypes.stalled,topSubmit:eventTypes.submit,topSuspend:eventTypes.suspend,topTimeUpdate:eventTypes.timeUpdate,topTouchCancel:eventTypes.touchCancel,topTouchEnd:eventTypes.touchEnd,topTouchMove:eventTypes.touchMove,topTouchStart:eventTypes.touchStart,topVolumeChange:eventTypes.volumeChange,topWaiting:eventTypes.waiting,topWheel:eventTypes.wheel};for(var type in topLevelEventsToDispatchConfig)topLevelEventsToDispatchConfig[type].dependencies=[type];var ON_CLICK_KEY=keyOf({onClick:null}),onClickListeners={},SimpleEventPlugin={eventTypes:eventTypes,extractEvents:function(e,t,a,o,p){var s=topLevelEventsToDispatchConfig[e];if(!s)return null;var n;switch(e){case topLevelTypes.topAbort:case topLevelTypes.topCanPlay:case topLevelTypes.topCanPlayThrough:case topLevelTypes.topDurationChange:case topLevelTypes.topEmptied:case topLevelTypes.topEncrypted:case topLevelTypes.topEnded:case topLevelTypes.topError:case topLevelTypes.topInput:case topLevelTypes.topLoad:case topLevelTypes.topLoadedData:case topLevelTypes.topLoadedMetadata:case topLevelTypes.topLoadStart:case topLevelTypes.topPause:case topLevelTypes.topPlay:case topLevelTypes.topPlaying:case topLevelTypes.topProgress:case topLevelTypes.topRateChange:case topLevelTypes.topReset:case topLevelTypes.topSeeked:case topLevelTypes.topSeeking:case topLevelTypes.topStalled:case topLevelTypes.topSubmit:case topLevelTypes.topSuspend:case topLevelTypes.topTimeUpdate:case topLevelTypes.topVolumeChange:case topLevelTypes.topWaiting:n=SyntheticEvent;break;case topLevelTypes.topKeyPress:if(0===getEventCharCode(o))return null;case topLevelTypes.topKeyDown:case topLevelTypes.topKeyUp:n=SyntheticKeyboardEvent;break;case topLevelTypes.topBlur:case topLevelTypes.topFocus:n=SyntheticFocusEvent;break;case topLevelTypes.topClick:if(2===o.button)return null;case topLevelTypes.topContextMenu:case topLevelTypes.topDoubleClick:case topLevelTypes.topMouseDown:case topLevelTypes.topMouseMove:case topLevelTypes.topMouseOut:case topLevelTypes.topMouseOver:case topLevelTypes.topMouseUp:n=SyntheticMouseEvent;break;case topLevelTypes.topDrag:case topLevelTypes.topDragEnd:case topLevelTypes.topDragEnter:case topLevelTypes.topDragExit:case topLevelTypes.topDragLeave:case topLevelTypes.topDragOver:case topLevelTypes.topDragStart:case topLevelTypes.topDrop:n=SyntheticDragEvent;break;case topLevelTypes.topTouchCancel:case topLevelTypes.topTouchEnd:case topLevelTypes.topTouchMove:case topLevelTypes.topTouchStart:n=SyntheticTouchEvent;break;case topLevelTypes.topScroll:n=SyntheticUIEvent;break;case topLevelTypes.topWheel:n=SyntheticWheelEvent;break;case topLevelTypes.topCopy:case topLevelTypes.topCut:case topLevelTypes.topPaste:n=SyntheticClipboardEvent}n?void 0:invariant(!1);var r=n.getPooled(s,a,o,p);return EventPropagators.accumulateTwoPhaseDispatches(r),r},didPutListener:function(e,t,a){if(t===ON_CLICK_KEY){var o=ReactMount.getNode(e);onClickListeners[e]||(onClickListeners[e]=EventListener.listen(o,"click",emptyFunction))}},willDeleteListener:function(e,t){t===ON_CLICK_KEY&&(onClickListeners[e].remove(),delete onClickListeners[e])}};module.exports=SimpleEventPlugin;

},{"./EventConstants":37,"./EventPropagators":41,"./ReactMount":86,"./SyntheticClipboardEvent":110,"./SyntheticDragEvent":112,"./SyntheticEvent":113,"./SyntheticFocusEvent":114,"./SyntheticKeyboardEvent":116,"./SyntheticMouseEvent":117,"./SyntheticTouchEvent":118,"./SyntheticUIEvent":119,"./SyntheticWheelEvent":120,"./getEventCharCode":132,"fbjs/lib/EventListener":150,"fbjs/lib/emptyFunction":157,"fbjs/lib/invariant":165,"fbjs/lib/keyOf":169}],110:[function(require,module,exports){
"use strict";function SyntheticClipboardEvent(t,e,n,a){SyntheticEvent.call(this,t,e,n,a)}var SyntheticEvent=require("./SyntheticEvent"),ClipboardEventInterface={clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}};SyntheticEvent.augmentClass(SyntheticClipboardEvent,ClipboardEventInterface),module.exports=SyntheticClipboardEvent;

},{"./SyntheticEvent":113}],111:[function(require,module,exports){
"use strict";function SyntheticCompositionEvent(t,n,e,i){SyntheticEvent.call(this,t,n,e,i)}var SyntheticEvent=require("./SyntheticEvent"),CompositionEventInterface={data:null};SyntheticEvent.augmentClass(SyntheticCompositionEvent,CompositionEventInterface),module.exports=SyntheticCompositionEvent;

},{"./SyntheticEvent":113}],112:[function(require,module,exports){
"use strict";function SyntheticDragEvent(t,e,n,a){SyntheticMouseEvent.call(this,t,e,n,a)}var SyntheticMouseEvent=require("./SyntheticMouseEvent"),DragEventInterface={dataTransfer:null};SyntheticMouseEvent.augmentClass(SyntheticDragEvent,DragEventInterface),module.exports=SyntheticDragEvent;

},{"./SyntheticMouseEvent":117}],113:[function(require,module,exports){
"use strict";function SyntheticEvent(t,e,n,r){this.dispatchConfig=t,this.dispatchMarker=e,this.nativeEvent=n;var s=this.constructor.Interface;for(var a in s)if(s.hasOwnProperty(a)){var i=s[a];i?this[a]=i(n):"target"===a?this.target=r:this[a]=n[a]}var o=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;o?this.isDefaultPrevented=emptyFunction.thatReturnsTrue:this.isDefaultPrevented=emptyFunction.thatReturnsFalse,this.isPropagationStopped=emptyFunction.thatReturnsFalse}var PooledClass=require("./PooledClass"),assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),warning=require("fbjs/lib/warning"),EventInterface={type:null,target:null,currentTarget:emptyFunction.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};assign(SyntheticEvent.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():t.returnValue=!1,this.isDefaultPrevented=emptyFunction.thatReturnsTrue)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,this.isPropagationStopped=emptyFunction.thatReturnsTrue)},persist:function(){this.isPersistent=emptyFunction.thatReturnsTrue},isPersistent:emptyFunction.thatReturnsFalse,destructor:function(){var t=this.constructor.Interface;for(var e in t)this[e]=null;this.dispatchConfig=null,this.dispatchMarker=null,this.nativeEvent=null}}),SyntheticEvent.Interface=EventInterface,SyntheticEvent.augmentClass=function(t,e){var n=this,r=Object.create(n.prototype);assign(r,t.prototype),t.prototype=r,t.prototype.constructor=t,t.Interface=assign({},n.Interface,e),t.augmentClass=n.augmentClass,PooledClass.addPoolingTo(t,PooledClass.fourArgumentPooler)},PooledClass.addPoolingTo(SyntheticEvent,PooledClass.fourArgumentPooler),module.exports=SyntheticEvent;

},{"./Object.assign":45,"./PooledClass":46,"fbjs/lib/emptyFunction":157,"fbjs/lib/warning":174}],114:[function(require,module,exports){
"use strict";function SyntheticFocusEvent(t,e,n,c){SyntheticUIEvent.call(this,t,e,n,c)}var SyntheticUIEvent=require("./SyntheticUIEvent"),FocusEventInterface={relatedTarget:null};SyntheticUIEvent.augmentClass(SyntheticFocusEvent,FocusEventInterface),module.exports=SyntheticFocusEvent;

},{"./SyntheticUIEvent":119}],115:[function(require,module,exports){
"use strict";function SyntheticInputEvent(t,n,e,c){SyntheticEvent.call(this,t,n,e,c)}var SyntheticEvent=require("./SyntheticEvent"),InputEventInterface={data:null};SyntheticEvent.augmentClass(SyntheticInputEvent,InputEventInterface),module.exports=SyntheticInputEvent;

},{"./SyntheticEvent":113}],116:[function(require,module,exports){
"use strict";function SyntheticKeyboardEvent(e,t,n,r){SyntheticUIEvent.call(this,e,t,n,r)}var SyntheticUIEvent=require("./SyntheticUIEvent"),getEventCharCode=require("./getEventCharCode"),getEventKey=require("./getEventKey"),getEventModifierState=require("./getEventModifierState"),KeyboardEventInterface={key:getEventKey,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:getEventModifierState,charCode:function(e){return"keypress"===e.type?getEventCharCode(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?getEventCharCode(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};SyntheticUIEvent.augmentClass(SyntheticKeyboardEvent,KeyboardEventInterface),module.exports=SyntheticKeyboardEvent;

},{"./SyntheticUIEvent":119,"./getEventCharCode":132,"./getEventKey":133,"./getEventModifierState":134}],117:[function(require,module,exports){
"use strict";function SyntheticMouseEvent(e,t,n,r){SyntheticUIEvent.call(this,e,t,n,r)}var SyntheticUIEvent=require("./SyntheticUIEvent"),ViewportMetrics=require("./ViewportMetrics"),getEventModifierState=require("./getEventModifierState"),MouseEventInterface={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:getEventModifierState,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+ViewportMetrics.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+ViewportMetrics.currentScrollTop}};SyntheticUIEvent.augmentClass(SyntheticMouseEvent,MouseEventInterface),module.exports=SyntheticMouseEvent;

},{"./SyntheticUIEvent":119,"./ViewportMetrics":122,"./getEventModifierState":134}],118:[function(require,module,exports){
"use strict";function SyntheticTouchEvent(e,t,n,c){SyntheticUIEvent.call(this,e,t,n,c)}var SyntheticUIEvent=require("./SyntheticUIEvent"),getEventModifierState=require("./getEventModifierState"),TouchEventInterface={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:getEventModifierState};SyntheticUIEvent.augmentClass(SyntheticTouchEvent,TouchEventInterface),module.exports=SyntheticTouchEvent;

},{"./SyntheticUIEvent":119,"./getEventModifierState":134}],119:[function(require,module,exports){
"use strict";function SyntheticUIEvent(e,t,n,i){SyntheticEvent.call(this,e,t,n,i)}var SyntheticEvent=require("./SyntheticEvent"),getEventTarget=require("./getEventTarget"),UIEventInterface={view:function(e){if(e.view)return e.view;var t=getEventTarget(e);if(null!=t&&t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};SyntheticEvent.augmentClass(SyntheticUIEvent,UIEventInterface),module.exports=SyntheticUIEvent;

},{"./SyntheticEvent":113,"./getEventTarget":135}],120:[function(require,module,exports){
"use strict";function SyntheticWheelEvent(e,t,n,l){SyntheticMouseEvent.call(this,e,t,n,l)}var SyntheticMouseEvent=require("./SyntheticMouseEvent"),WheelEventInterface={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};SyntheticMouseEvent.augmentClass(SyntheticWheelEvent,WheelEventInterface),module.exports=SyntheticWheelEvent;

},{"./SyntheticMouseEvent":117}],121:[function(require,module,exports){
"use strict";var invariant=require("fbjs/lib/invariant"),Mixin={reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(i,t,a,n,r,s,l,e){this.isInTransaction()?invariant(!1):void 0;var c,o;try{this._isInTransaction=!0,c=!0,this.initializeAll(0),o=i.call(t,a,n,r,s,l,e),c=!1}finally{try{if(c)try{this.closeAll(0)}catch(i){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return o},initializeAll:function(i){for(var t=this.transactionWrappers,a=i;a<t.length;a++){var n=t[a];try{this.wrapperInitData[a]=Transaction.OBSERVED_ERROR,this.wrapperInitData[a]=n.initialize?n.initialize.call(this):null}finally{if(this.wrapperInitData[a]===Transaction.OBSERVED_ERROR)try{this.initializeAll(a+1)}catch(i){}}}},closeAll:function(i){this.isInTransaction()?void 0:invariant(!1);for(var t=this.transactionWrappers,a=i;a<t.length;a++){var n,r=t[a],s=this.wrapperInitData[a];try{n=!0,s!==Transaction.OBSERVED_ERROR&&r.close&&r.close.call(this,s),n=!1}finally{if(n)try{this.closeAll(a+1)}catch(i){}}}this.wrapperInitData.length=0}},Transaction={Mixin:Mixin,OBSERVED_ERROR:{}};module.exports=Transaction;

},{"fbjs/lib/invariant":165}],122:[function(require,module,exports){
"use strict";var ViewportMetrics={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(r){ViewportMetrics.currentScrollLeft=r.x,ViewportMetrics.currentScrollTop=r.y}};module.exports=ViewportMetrics;

},{}],123:[function(require,module,exports){
"use strict";function accumulateInto(r,a){if(null==a?invariant(!1):void 0,null==r)return a;var n=Array.isArray(r),i=Array.isArray(a);return n&&i?(r.push.apply(r,a),r):n?(r.push(a),r):i?[r].concat(a):[r,a]}var invariant=require("fbjs/lib/invariant");module.exports=accumulateInto;

},{"fbjs/lib/invariant":165}],124:[function(require,module,exports){
"use strict";function adler32(r){for(var e=1,t=0,o=0,a=r.length,d=a&-4;o<d;){for(;o<Math.min(o+4096,d);o+=4)t+=(e+=r.charCodeAt(o))+(e+=r.charCodeAt(o+1))+(e+=r.charCodeAt(o+2))+(e+=r.charCodeAt(o+3));e%=MOD,t%=MOD}for(;o<a;o++)t+=e+=r.charCodeAt(o);return e%=MOD,t%=MOD,e|t<<16}var MOD=65521;module.exports=adler32;

},{}],125:[function(require,module,exports){
"use strict";var canDefineProperty=!1;module.exports=canDefineProperty;

},{}],126:[function(require,module,exports){
"use strict";function dangerousStyleValue(e,r){var s=null==r||"boolean"==typeof r||""===r;if(s)return"";var t=isNaN(r);return t||0===r||isUnitlessNumber.hasOwnProperty(e)&&isUnitlessNumber[e]?""+r:("string"==typeof r&&(r=r.trim()),r+"px")}var CSSProperty=require("./CSSProperty"),isUnitlessNumber=CSSProperty.isUnitlessNumber;module.exports=dangerousStyleValue;

},{"./CSSProperty":26}],127:[function(require,module,exports){
"use strict";function deprecated(e,r,i,n,s){return s}var assign=require("./Object.assign"),warning=require("fbjs/lib/warning");module.exports=deprecated;

},{"./Object.assign":45,"fbjs/lib/warning":174}],128:[function(require,module,exports){
"use strict";function escaper(e){return ESCAPE_LOOKUP[e]}function escapeTextContentForBrowser(e){return(""+e).replace(ESCAPE_REGEX,escaper)}var ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g;module.exports=escapeTextContentForBrowser;

},{}],129:[function(require,module,exports){
"use strict";function findDOMNode(e){return null==e?null:1===e.nodeType?e:ReactInstanceMap.has(e)?ReactMount.getNodeFromInstance(e):(null!=e.render&&"function"==typeof e.render?invariant(!1):void 0,void invariant(!1))}var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactInstanceMap=require("./ReactInstanceMap"),ReactMount=require("./ReactMount"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning");module.exports=findDOMNode;

},{"./ReactCurrentOwner":57,"./ReactInstanceMap":83,"./ReactMount":86,"fbjs/lib/invariant":165,"fbjs/lib/warning":174}],130:[function(require,module,exports){
"use strict";function flattenSingleChildIntoContext(e,n,r){var l=e,t=void 0===l[r];t&&null!=n&&(l[r]=n)}function flattenChildren(e){if(null==e)return e;var n={};return traverseAllChildren(e,flattenSingleChildIntoContext,n),n}var traverseAllChildren=require("./traverseAllChildren"),warning=require("fbjs/lib/warning");module.exports=flattenChildren;

},{"./traverseAllChildren":148,"fbjs/lib/warning":174}],131:[function(require,module,exports){
"use strict";var forEachAccumulated=function(c,r,a){Array.isArray(c)?c.forEach(r,a):c&&r.call(a,c)};module.exports=forEachAccumulated;

},{}],132:[function(require,module,exports){
"use strict";function getEventCharCode(e){var r,t=e.keyCode;return"charCode"in e?(r=e.charCode,0===r&&13===t&&(r=13)):r=t,r>=32||13===r?r:0}module.exports=getEventCharCode;

},{}],133:[function(require,module,exports){
"use strict";function getEventKey(e){if(e.key){var r=normalizeKey[e.key]||e.key;if("Unidentified"!==r)return r}if("keypress"===e.type){var t=getEventCharCode(e);return 13===t?"Enter":String.fromCharCode(t)}return"keydown"===e.type||"keyup"===e.type?translateToKey[e.keyCode]||"Unidentified":""}var getEventCharCode=require("./getEventCharCode"),normalizeKey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},translateToKey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};module.exports=getEventKey;

},{"./getEventCharCode":132}],134:[function(require,module,exports){
"use strict";function modifierStateGetter(t){var e=this,r=e.nativeEvent;if(r.getModifierState)return r.getModifierState(t);var i=modifierKeyToProp[t];return!!i&&!!r[i]}function getEventModifierState(t){return modifierStateGetter}var modifierKeyToProp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};module.exports=getEventModifierState;

},{}],135:[function(require,module,exports){
"use strict";function getEventTarget(e){var t=e.target||e.srcElement||window;return 3===t.nodeType?t.parentNode:t}module.exports=getEventTarget;

},{}],136:[function(require,module,exports){
"use strict";function getIteratorFn(t){var r=t&&(ITERATOR_SYMBOL&&t[ITERATOR_SYMBOL]||t[FAUX_ITERATOR_SYMBOL]);if("function"==typeof r)return r}var ITERATOR_SYMBOL="function"==typeof Symbol&&Symbol.iterator,FAUX_ITERATOR_SYMBOL="@@iterator";module.exports=getIteratorFn;

},{}],137:[function(require,module,exports){
"use strict";function getLeafNode(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function getSiblingNode(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function getNodeForCharacterOffset(e,t){for(var o=getLeafNode(e),n=0,r=0;o;){if(3===o.nodeType){if(r=n+o.textContent.length,n<=t&&r>=t)return{node:o,offset:t-n};n=r}o=getLeafNode(getSiblingNode(o))}}module.exports=getNodeForCharacterOffset;

},{}],138:[function(require,module,exports){
"use strict";function getTextContentAccessor(){return!contentKey&&ExecutionEnvironment.canUseDOM&&(contentKey="textContent"in document.documentElement?"textContent":"innerText"),contentKey}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),contentKey=null;module.exports=getTextContentAccessor;

},{"fbjs/lib/ExecutionEnvironment":151}],139:[function(require,module,exports){
"use strict";function getDeclarationErrorAddendum(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function isInternalComponentType(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function instantiateReactComponent(e){var t;if(null===e||e===!1)t=new ReactEmptyComponent(instantiateReactComponent);else if("object"==typeof e){var n=e;!n||"function"!=typeof n.type&&"string"!=typeof n.type?invariant(!1):void 0,t="string"==typeof n.type?ReactNativeComponent.createInternalComponent(n):isInternalComponentType(n.type)?new n.type(n):new ReactCompositeComponentWrapper}else"string"==typeof e||"number"==typeof e?t=ReactNativeComponent.createInstanceForText(e):invariant(!1);return t.construct(e),t._mountIndex=0,t._mountImage=null,t}var ReactCompositeComponent=require("./ReactCompositeComponent"),ReactEmptyComponent=require("./ReactEmptyComponent"),ReactNativeComponent=require("./ReactNativeComponent"),assign=require("./Object.assign"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),ReactCompositeComponentWrapper=function(){};assign(ReactCompositeComponentWrapper.prototype,ReactCompositeComponent.Mixin,{_instantiateReactComponent:instantiateReactComponent}),module.exports=instantiateReactComponent;

},{"./Object.assign":45,"./ReactCompositeComponent":56,"./ReactEmptyComponent":75,"./ReactNativeComponent":89,"fbjs/lib/invariant":165,"fbjs/lib/warning":174}],140:[function(require,module,exports){
"use strict";function isEventSupported(e,t){if(!ExecutionEnvironment.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,u=n in document;if(!u){var i=document.createElement("div");i.setAttribute(n,"return;"),u="function"==typeof i[n]}return!u&&useHasFeature&&"wheel"===e&&(u=document.implementation.hasFeature("Events.wheel","3.0")),u}var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),useHasFeature;ExecutionEnvironment.canUseDOM&&(useHasFeature=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),module.exports=isEventSupported;

},{"fbjs/lib/ExecutionEnvironment":151}],141:[function(require,module,exports){
"use strict";function isTextInputElement(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&supportedInputTypes[e.type]||"textarea"===t)}var supportedInputTypes={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};module.exports=isTextInputElement;

},{}],142:[function(require,module,exports){
"use strict";function onlyChild(e){return ReactElement.isValidElement(e)?void 0:invariant(!1),e}var ReactElement=require("./ReactElement"),invariant=require("fbjs/lib/invariant");module.exports=onlyChild;

},{"./ReactElement":73,"fbjs/lib/invariant":165}],143:[function(require,module,exports){
"use strict";function quoteAttributeValueForBrowser(e){return'"'+escapeTextContentForBrowser(e)+'"'}var escapeTextContentForBrowser=require("./escapeTextContentForBrowser");module.exports=quoteAttributeValueForBrowser;

},{"./escapeTextContentForBrowser":128}],144:[function(require,module,exports){
"use strict";var ReactMount=require("./ReactMount");module.exports=ReactMount.renderSubtreeIntoContainer;

},{"./ReactMount":86}],145:[function(require,module,exports){
"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),WHITESPACE_TEST=/^[ \r\n\t\f]/,NONVISIBLE_TEST=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,setInnerHTML=function(e,n){e.innerHTML=n};if("undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction&&(setInnerHTML=function(e,n){MSApp.execUnsafeLocalFunction(function(){e.innerHTML=n})}),ExecutionEnvironment.canUseDOM){var testElement=document.createElement("div");testElement.innerHTML=" ",""===testElement.innerHTML&&(setInnerHTML=function(e,n){if(e.parentNode&&e.parentNode.replaceChild(e,e),WHITESPACE_TEST.test(n)||"<"===n[0]&&NONVISIBLE_TEST.test(n)){e.innerHTML=String.fromCharCode(65279)+n;var t=e.firstChild;1===t.data.length?e.removeChild(t):t.deleteData(0,1)}else e.innerHTML=n})}module.exports=setInnerHTML;

},{"fbjs/lib/ExecutionEnvironment":151}],146:[function(require,module,exports){
"use strict";var ExecutionEnvironment=require("fbjs/lib/ExecutionEnvironment"),escapeTextContentForBrowser=require("./escapeTextContentForBrowser"),setInnerHTML=require("./setInnerHTML"),setTextContent=function(e,t){e.textContent=t};ExecutionEnvironment.canUseDOM&&("textContent"in document.documentElement||(setTextContent=function(e,t){setInnerHTML(e,escapeTextContentForBrowser(t))})),module.exports=setTextContent;

},{"./escapeTextContentForBrowser":128,"./setInnerHTML":145,"fbjs/lib/ExecutionEnvironment":151}],147:[function(require,module,exports){
"use strict";function shouldUpdateReactComponent(e,t){var n=null===e||e===!1,o=null===t||t===!1;if(n||o)return n===o;var r=typeof e,u=typeof t;return"string"===r||"number"===r?"string"===u||"number"===u:"object"===u&&e.type===t.type&&e.key===t.key}module.exports=shouldUpdateReactComponent;

},{}],148:[function(require,module,exports){
"use strict";function userProvidedKeyEscaper(e){return userProvidedKeyEscaperLookup[e]}function getComponentKey(e,r){return e&&null!=e.key?wrapUserProvidedKey(e.key):r.toString(36)}function escapeUserProvidedKey(e){return(""+e).replace(userProvidedKeyEscapeRegex,userProvidedKeyEscaper)}function wrapUserProvidedKey(e){return"$"+escapeUserProvidedKey(e)}function traverseAllChildrenImpl(e,r,n,t){var a=typeof e;if("undefined"!==a&&"boolean"!==a||(e=null),null===e||"string"===a||"number"===a||ReactElement.isValidElement(e))return n(t,e,""===r?SEPARATOR+getComponentKey(e,0):r),1;var i,l,o=0,s=""===r?SEPARATOR:r+SUBSEPARATOR;if(Array.isArray(e))for(var d=0;d<e.length;d++)i=e[d],l=s+getComponentKey(i,d),o+=traverseAllChildrenImpl(i,l,n,t);else{var u=getIteratorFn(e);if(u){var v,c=u.call(e);if(u!==e.entries)for(var p=0;!(v=c.next()).done;)i=v.value,l=s+getComponentKey(i,p++),o+=traverseAllChildrenImpl(i,l,n,t);else for(;!(v=c.next()).done;){var A=v.value;A&&(i=A[1],l=s+wrapUserProvidedKey(A[0])+SUBSEPARATOR+getComponentKey(i,0),o+=traverseAllChildrenImpl(i,l,n,t))}}else if("object"===a){String(e);invariant(!1)}}return o}function traverseAllChildren(e,r,n){return null==e?0:traverseAllChildrenImpl(e,"",r,n)}var ReactCurrentOwner=require("./ReactCurrentOwner"),ReactElement=require("./ReactElement"),ReactInstanceHandles=require("./ReactInstanceHandles"),getIteratorFn=require("./getIteratorFn"),invariant=require("fbjs/lib/invariant"),warning=require("fbjs/lib/warning"),SEPARATOR=ReactInstanceHandles.SEPARATOR,SUBSEPARATOR=":",userProvidedKeyEscaperLookup={"=":"=0",".":"=1",":":"=2"},userProvidedKeyEscapeRegex=/[=.:]/g,didWarnAboutMaps=!1;module.exports=traverseAllChildren;

},{"./ReactCurrentOwner":57,"./ReactElement":73,"./ReactInstanceHandles":82,"./getIteratorFn":136,"fbjs/lib/invariant":165,"fbjs/lib/warning":174}],149:[function(require,module,exports){
"use strict";var assign=require("./Object.assign"),emptyFunction=require("fbjs/lib/emptyFunction"),warning=require("fbjs/lib/warning"),validateDOMNesting=emptyFunction,specialTags,inScopeTags,buttonScopeTags,impliedEndTags,emptyAncestorInfo,updatedAncestorInfo,isTagValidWithParent,findInvalidAncestorForTag,findOwnerStack,didWarn;module.exports=validateDOMNesting;

},{"./Object.assign":45,"fbjs/lib/emptyFunction":157,"fbjs/lib/warning":174}],150:[function(require,module,exports){
"use strict";var emptyFunction=require("./emptyFunction"),EventListener={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:emptyFunction}},registerDefault:function(){}};module.exports=EventListener;

},{"./emptyFunction":157}],151:[function(require,module,exports){
"use strict";var canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),ExecutionEnvironment={canUseDOM:canUseDOM,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:canUseDOM&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:canUseDOM&&!!window.screen,isInWorker:!canUseDOM};module.exports=ExecutionEnvironment;

},{}],152:[function(require,module,exports){
"use strict";function camelize(e){return e.replace(_hyphenPattern,function(e,t){return t.toUpperCase()})}var _hyphenPattern=/-(.)/g;module.exports=camelize;

},{}],153:[function(require,module,exports){
"use strict";function camelizeStyleName(e){return camelize(e.replace(msPattern,"ms-"))}var camelize=require("./camelize"),msPattern=/^-ms-/;module.exports=camelizeStyleName;

},{"./camelize":152}],154:[function(require,module,exports){
"use strict";function containsNode(e,o){var t=!0;e:for(;t;){var n=e,i=o;if(t=!1,n&&i){if(n===i)return!0;if(isTextNode(n))return!1;if(isTextNode(i)){e=n,o=i.parentNode,t=!0;continue e}return n.contains?n.contains(i):!!n.compareDocumentPosition&&!!(16&n.compareDocumentPosition(i))}return!1}}var isTextNode=require("./isTextNode");module.exports=containsNode;

},{"./isTextNode":167}],155:[function(require,module,exports){
"use strict";function hasArrayNature(r){return!!r&&("object"==typeof r||"function"==typeof r)&&"length"in r&&!("setInterval"in r)&&"number"!=typeof r.nodeType&&(Array.isArray(r)||"callee"in r||"item"in r)}function createArrayFromMixed(r){return hasArrayNature(r)?Array.isArray(r)?r.slice():toArray(r):[r]}var toArray=require("./toArray");module.exports=createArrayFromMixed;

},{"./toArray":173}],156:[function(require,module,exports){
"use strict";function getNodeName(e){var r=e.match(nodeNamePattern);return r&&r[1].toLowerCase()}function createNodesFromMarkup(e,r){var a=dummyNode;dummyNode?void 0:invariant(!1);var t=getNodeName(e),n=t&&getMarkupWrap(t);if(n){a.innerHTML=n[1]+e+n[2];for(var i=n[0];i--;)a=a.lastChild}else a.innerHTML=e;var o=a.getElementsByTagName("script");o.length&&(r?void 0:invariant(!1),createArrayFromMixed(o).forEach(r));for(var d=createArrayFromMixed(a.childNodes);a.lastChild;)a.removeChild(a.lastChild);return d}var ExecutionEnvironment=require("./ExecutionEnvironment"),createArrayFromMixed=require("./createArrayFromMixed"),getMarkupWrap=require("./getMarkupWrap"),invariant=require("./invariant"),dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null,nodeNamePattern=/^\s*<(\w+)/;module.exports=createNodesFromMarkup;

},{"./ExecutionEnvironment":151,"./createArrayFromMixed":155,"./getMarkupWrap":161,"./invariant":165}],157:[function(require,module,exports){
"use strict";function makeEmptyFunction(t){return function(){return t}}function emptyFunction(){}emptyFunction.thatReturns=makeEmptyFunction,emptyFunction.thatReturnsFalse=makeEmptyFunction(!1),emptyFunction.thatReturnsTrue=makeEmptyFunction(!0),emptyFunction.thatReturnsNull=makeEmptyFunction(null),emptyFunction.thatReturnsThis=function(){return this},emptyFunction.thatReturnsArgument=function(t){return t},module.exports=emptyFunction;

},{}],158:[function(require,module,exports){
"use strict";var emptyObject={};module.exports=emptyObject;

},{}],159:[function(require,module,exports){
"use strict";function focusNode(o){try{o.focus()}catch(o){}}module.exports=focusNode;

},{}],160:[function(require,module,exports){
"use strict";function getActiveElement(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(e){return document.body}}module.exports=getActiveElement;

},{}],161:[function(require,module,exports){
"use strict";function getMarkupWrap(e){return dummyNode?void 0:invariant(!1),markupWrap.hasOwnProperty(e)||(e="*"),shouldWrap.hasOwnProperty(e)||("*"===e?dummyNode.innerHTML="<link />":dummyNode.innerHTML="<"+e+"></"+e+">",shouldWrap[e]=!dummyNode.firstChild),shouldWrap[e]?markupWrap[e]:null}var ExecutionEnvironment=require("./ExecutionEnvironment"),invariant=require("./invariant"),dummyNode=ExecutionEnvironment.canUseDOM?document.createElement("div"):null,shouldWrap={},selectWrap=[1,'<select multiple="true">',"</select>"],tableWrap=[1,"<table>","</table>"],trWrap=[3,"<table><tbody><tr>","</tr></tbody></table>"],svgWrap=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],markupWrap={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:selectWrap,option:selectWrap,caption:tableWrap,colgroup:tableWrap,tbody:tableWrap,tfoot:tableWrap,thead:tableWrap,td:trWrap,th:trWrap},svgElements=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];svgElements.forEach(function(e){markupWrap[e]=svgWrap,shouldWrap[e]=!0}),module.exports=getMarkupWrap;

},{"./ExecutionEnvironment":151,"./invariant":165}],162:[function(require,module,exports){
"use strict";function getUnboundedScrollPosition(o){return o===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:o.scrollLeft,y:o.scrollTop}}module.exports=getUnboundedScrollPosition;

},{}],163:[function(require,module,exports){
"use strict";function hyphenate(e){return e.replace(_uppercasePattern,"-$1").toLowerCase()}var _uppercasePattern=/([A-Z])/g;module.exports=hyphenate;

},{}],164:[function(require,module,exports){
"use strict";function hyphenateStyleName(e){return hyphenate(e).replace(msPattern,"-ms-")}var hyphenate=require("./hyphenate"),msPattern=/^ms-/;module.exports=hyphenateStyleName;

},{"./hyphenate":163}],165:[function(require,module,exports){
"use strict";function invariant(e,n,r,i,o,a,t,f){if(!e){var s;if(void 0===n)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=[r,i,o,a,t,f],l=0;s=new Error(n.replace(/%s/g,function(){return d[l++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}module.exports=invariant;

},{}],166:[function(require,module,exports){
"use strict";function isNode(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}module.exports=isNode;

},{}],167:[function(require,module,exports){
"use strict";function isTextNode(e){return isNode(e)&&3==e.nodeType}var isNode=require("./isNode");module.exports=isTextNode;

},{"./isNode":166}],168:[function(require,module,exports){
"use strict";var invariant=require("./invariant"),keyMirror=function(r){var i,n={};r instanceof Object&&!Array.isArray(r)?void 0:invariant(!1);for(i in r)r.hasOwnProperty(i)&&(n[i]=i);return n};module.exports=keyMirror;

},{"./invariant":165}],169:[function(require,module,exports){
"use strict";var keyOf=function(r){var e;for(e in r)if(r.hasOwnProperty(e))return e;return null};module.exports=keyOf;

},{}],170:[function(require,module,exports){
"use strict";function mapObject(r,t,e){if(!r)return null;var a={};for(var n in r)hasOwnProperty.call(r,n)&&(a[n]=t.call(e,r[n],n,r));return a}var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=mapObject;

},{}],171:[function(require,module,exports){
"use strict";function memoizeStringOnly(n){var r={};return function(t){return r.hasOwnProperty(t)||(r[t]=n.call(this,t)),r[t]}}module.exports=memoizeStringOnly;

},{}],172:[function(require,module,exports){
"use strict";function shallowEqual(e,t){if(e===t)return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(var o=hasOwnProperty.bind(t),l=0;l<r.length;l++)if(!o(r[l])||e[r[l]]!==t[r[l]])return!1;return!0}var hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=shallowEqual;

},{}],173:[function(require,module,exports){
"use strict";function toArray(r){var t=r.length;if(Array.isArray(r)||"object"!=typeof r&&"function"!=typeof r?invariant(!1):void 0,"number"!=typeof t?invariant(!1):void 0,0===t||t-1 in r?void 0:invariant(!1),r.hasOwnProperty)try{return Array.prototype.slice.call(r)}catch(r){}for(var a=Array(t),i=0;i<t;i++)a[i]=r[i];return a}var invariant=require("./invariant");module.exports=toArray;

},{"./invariant":165}],174:[function(require,module,exports){
"use strict";var emptyFunction=require("./emptyFunction"),warning=emptyFunction;module.exports=warning;

},{"./emptyFunction":157}],175:[function(require,module,exports){
"use strict";module.exports=require("./lib/React");

},{"./lib/React":47}],176:[function(require,module,exports){
function shallow(r,n,t){var a=Array.isArray(r),e=Array.isArray(n);if(a!==e)return!1;var o=typeof r,f=typeof n;return o===f&&(flat(o)?t?t(r,n):r===n:a?shallowArray(r,n,t):shallowObject(r,n,t))}function shallowArray(r,n,t){var a=r.length;if(a!==n.length)return!1;if(t){for(var e=0;e<a;e++)if(!t(r[e],n[e]))return!1}else for(var e=0;e<a;e++)if(r[e]!==n[e])return!1;return!0}function shallowObject(r,n,t){var a=0,e=0;if(t)for(var o in r){if(r.hasOwnProperty(o)&&!t(r[o],n[o]))return!1;a++}else for(var o in r){if(r.hasOwnProperty(o)&&r[o]!==n[o])return!1;a++}for(var o in n)n.hasOwnProperty(o)&&e++;return a===e}function flat(r){return"function"!==r&&"object"!==r}module.exports=shallow;

},{}],177:[function(require,module,exports){
(function(){function n(n){function t(t,r,e,u,i,o){for(;i>=0&&i<o;i+=n){var a=u?u[i]:i;e=r(e,t[a],a,t)}return e}return function(r,e,u,i){e=b(e,i,4);var o=!k(r)&&m.keys(r),a=(o||r).length,c=n>0?0:a-1;return arguments.length<3&&(u=r[o?o[c]:c],c+=n),t(r,e,u,o,c,a)}}function t(n){return function(t,r,e){r=x(r,e);for(var u=O(t),i=n>0?0:u-1;i>=0&&i<u;i+=n)if(r(t[i],i,t))return i;return-1}}function r(n,t,r){return function(e,u,i){var o=0,a=O(e);if("number"==typeof i)n>0?o=i>=0?i:Math.max(i+a,o):a=i>=0?Math.min(i+1,a):i+a+1;else if(r&&i&&a)return i=r(e,u),e[i]===u?i:-1;if(u!==u)return i=t(l.call(e,o,a),m.isNaN),i>=0?i+o:-1;for(i=n>0?o:a-1;i>=0&&i<a;i+=n)if(e[i]===u)return i;return-1}}function e(n,t){var r=I.length,e=n.constructor,u=m.isFunction(e)&&e.prototype||a,i="constructor";for(m.has(n,i)&&!m.contains(t,i)&&t.push(i);r--;)i=I[r],i in n&&n[i]!==u[i]&&!m.contains(t,i)&&t.push(i)}var u=this,i=u._,o=Array.prototype,a=Object.prototype,c=Function.prototype,f=o.push,l=o.slice,s=a.toString,p=a.hasOwnProperty,h=Array.isArray,v=Object.keys,y=c.bind,d=Object.create,g=function(){},m=function(n){return n instanceof m?n:this instanceof m?void(this._wrapped=n):new m(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=m),exports._=m):u._=m,m.VERSION="1.8.3";var b=function(n,t,r){if(void 0===t)return n;switch(null==r?3:r){case 1:return function(r){return n.call(t,r)};case 2:return function(r,e){return n.call(t,r,e)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,i){return n.call(t,r,e,u,i)}}return function(){return n.apply(t,arguments)}},x=function(n,t,r){return null==n?m.identity:m.isFunction(n)?b(n,t,r):m.isObject(n)?m.matcher(n):m.property(n)};m.iteratee=function(n,t){return x(n,t,1/0)};var _=function(n,t){return function(r){var e=arguments.length;if(e<2||null==r)return r;for(var u=1;u<e;u++)for(var i=arguments[u],o=n(i),a=o.length,c=0;c<a;c++){var f=o[c];t&&void 0!==r[f]||(r[f]=i[f])}return r}},j=function(n){if(!m.isObject(n))return{};if(d)return d(n);g.prototype=n;var t=new g;return g.prototype=null,t},w=function(n){return function(t){return null==t?void 0:t[n]}},A=Math.pow(2,53)-1,O=w("length"),k=function(n){var t=O(n);return"number"==typeof t&&t>=0&&t<=A};m.each=m.forEach=function(n,t,r){t=b(t,r);var e,u;if(k(n))for(e=0,u=n.length;e<u;e++)t(n[e],e,n);else{var i=m.keys(n);for(e=0,u=i.length;e<u;e++)t(n[i[e]],i[e],n)}return n},m.map=m.collect=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=Array(u),o=0;o<u;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},m.reduce=m.foldl=m.inject=n(1),m.reduceRight=m.foldr=n(-1),m.find=m.detect=function(n,t,r){var e;if(e=k(n)?m.findIndex(n,t,r):m.findKey(n,t,r),void 0!==e&&e!==-1)return n[e]},m.filter=m.select=function(n,t,r){var e=[];return t=x(t,r),m.each(n,function(n,r,u){t(n,r,u)&&e.push(n)}),e},m.reject=function(n,t,r){return m.filter(n,m.negate(x(t)),r)},m.every=m.all=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},m.some=m.any=function(n,t,r){t=x(t,r);for(var e=!k(n)&&m.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},m.contains=m.includes=m.include=function(n,t,r,e){return k(n)||(n=m.values(n)),("number"!=typeof r||e)&&(r=0),m.indexOf(n,t,r)>=0},m.invoke=function(n,t){var r=l.call(arguments,2),e=m.isFunction(t);return m.map(n,function(n){var u=e?t:n[t];return null==u?u:u.apply(n,r)})},m.pluck=function(n,t){return m.map(n,m.property(t))},m.where=function(n,t){return m.filter(n,m.matcher(t))},m.findWhere=function(n,t){return m.find(n,m.matcher(t))},m.max=function(n,t,r){var e,u,i=-(1/0),o=-(1/0);if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;a<c;a++)e=n[a],e>i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u>o||u===-(1/0)&&i===-(1/0))&&(i=n,o=u)});return i},m.min=function(n,t,r){var e,u,i=1/0,o=1/0;if(null==t&&null!=n){n=k(n)?n:m.values(n);for(var a=0,c=n.length;a<c;a++)e=n[a],e<i&&(i=e)}else t=x(t,r),m.each(n,function(n,r,e){u=t(n,r,e),(u<o||u===1/0&&i===1/0)&&(i=n,o=u)});return i},m.shuffle=function(n){for(var t,r=k(n)?n:m.values(n),e=r.length,u=Array(e),i=0;i<e;i++)t=m.random(0,i),t!==i&&(u[i]=u[t]),u[t]=r[i];return u},m.sample=function(n,t,r){return null==t||r?(k(n)||(n=m.values(n)),n[m.random(n.length-1)]):m.shuffle(n).slice(0,Math.max(0,t))},m.sortBy=function(n,t,r){return t=x(t,r),m.pluck(m.map(n,function(n,r,e){return{value:n,index:r,criteria:t(n,r,e)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(r>e||void 0===r)return 1;if(r<e||void 0===e)return-1}return n.index-t.index}),"value")};var F=function(n){return function(t,r,e){var u={};return r=x(r,e),m.each(t,function(e,i){var o=r(e,i,t);n(u,e,o)}),u}};m.groupBy=F(function(n,t,r){m.has(n,r)?n[r].push(t):n[r]=[t]}),m.indexBy=F(function(n,t,r){n[r]=t}),m.countBy=F(function(n,t,r){m.has(n,r)?n[r]++:n[r]=1}),m.toArray=function(n){return n?m.isArray(n)?l.call(n):k(n)?m.map(n,m.identity):m.values(n):[]},m.size=function(n){return null==n?0:k(n)?n.length:m.keys(n).length},m.partition=function(n,t,r){t=x(t,r);var e=[],u=[];return m.each(n,function(n,r,i){(t(n,r,i)?e:u).push(n)}),[e,u]},m.first=m.head=m.take=function(n,t,r){if(null!=n)return null==t||r?n[0]:m.initial(n,n.length-t)},m.initial=function(n,t,r){return l.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},m.last=function(n,t,r){if(null!=n)return null==t||r?n[n.length-1]:m.rest(n,Math.max(0,n.length-t))},m.rest=m.tail=m.drop=function(n,t,r){return l.call(n,null==t||r?1:t)},m.compact=function(n){return m.filter(n,m.identity)};var S=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=O(n);o<a;o++){var c=n[o];if(k(c)&&(m.isArray(c)||m.isArguments(c))){t||(c=S(c,t,r));var f=0,l=c.length;for(u.length+=l;f<l;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};m.flatten=function(n,t){return S(n,t,!1)},m.without=function(n){return m.difference(n,l.call(arguments,1))},m.uniq=m.unique=function(n,t,r,e){m.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=x(r,e));for(var u=[],i=[],o=0,a=O(n);o<a;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?m.contains(i,f)||(i.push(f),u.push(c)):m.contains(u,c)||u.push(c)}return u},m.union=function(){return m.uniq(S(arguments,!0,!0))},m.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=O(n);e<u;e++){var i=n[e];if(!m.contains(t,i)){for(var o=1;o<r&&m.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},m.difference=function(n){var t=S(arguments,!0,!0,1);return m.filter(n,function(n){return!m.contains(t,n)})},m.zip=function(){return m.unzip(arguments)},m.unzip=function(n){for(var t=n&&m.max(n,O).length||0,r=Array(t),e=0;e<t;e++)r[e]=m.pluck(n,e);return r},m.object=function(n,t){for(var r={},e=0,u=O(n);e<u;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},m.findIndex=t(1),m.findLastIndex=t(-1),m.sortedIndex=function(n,t,r,e){r=x(r,e,1);for(var u=r(t),i=0,o=O(n);i<o;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},m.indexOf=r(1,m.findIndex,m.sortedIndex),m.lastIndexOf=r(-1,m.findLastIndex),m.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;i<e;i++,n+=r)u[i]=n;return u};var E=function(n,t,r,e,u){if(!(e instanceof t))return n.apply(r,u);var i=j(n.prototype),o=n.apply(i,u);return m.isObject(o)?o:i};m.bind=function(n,t){if(y&&n.bind===y)return y.apply(n,l.call(arguments,1));if(!m.isFunction(n))throw new TypeError("Bind must be called on a function");var r=l.call(arguments,2),e=function(){return E(n,e,t,this,r.concat(l.call(arguments)))};return e},m.partial=function(n){var t=l.call(arguments,1),r=function(){for(var e=0,u=t.length,i=Array(u),o=0;o<u;o++)i[o]=t[o]===m?arguments[e++]:t[o];for(;e<arguments.length;)i.push(arguments[e++]);return E(n,r,this,this,i)};return r},m.bindAll=function(n){var t,r,e=arguments.length;if(e<=1)throw new Error("bindAll must be passed function names");for(t=1;t<e;t++)r=arguments[t],n[r]=m.bind(n[r],n);return n},m.memoize=function(n,t){var r=function(e){var u=r.cache,i=""+(t?t.apply(this,arguments):e);return m.has(u,i)||(u[i]=n.apply(this,arguments)),u[i]};return r.cache={},r},m.delay=function(n,t){var r=l.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},m.defer=m.partial(m.delay,m,1),m.throttle=function(n,t,r){var e,u,i,o=null,a=0;r||(r={});var c=function(){a=r.leading===!1?0:m.now(),o=null,i=n.apply(e,u),o||(e=u=null)};return function(){var f=m.now();a||r.leading!==!1||(a=f);var l=t-(f-a);return e=this,u=arguments,l<=0||l>t?(o&&(clearTimeout(o),o=null),a=f,i=n.apply(e,u),o||(e=u=null)):o||r.trailing===!1||(o=setTimeout(c,l)),i}},m.debounce=function(n,t,r){var e,u,i,o,a,c=function(){var f=m.now()-o;f<t&&f>=0?e=setTimeout(c,t-f):(e=null,r||(a=n.apply(i,u),e||(i=u=null)))};return function(){i=this,u=arguments,o=m.now();var f=r&&!e;return e||(e=setTimeout(c,t)),f&&(a=n.apply(i,u),i=u=null),a}},m.wrap=function(n,t){return m.partial(t,n)},m.negate=function(n){return function(){return!n.apply(this,arguments)}},m.compose=function(){var n=arguments,t=n.length-1;return function(){for(var r=t,e=n[t].apply(this,arguments);r--;)e=n[r].call(this,e);return e}},m.after=function(n,t){return function(){if(--n<1)return t.apply(this,arguments)}},m.before=function(n,t){var r;return function(){return--n>0&&(r=t.apply(this,arguments)),n<=1&&(t=null),r}},m.once=m.partial(m.before,2);var M=!{toString:null}.propertyIsEnumerable("toString"),I=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];m.keys=function(n){if(!m.isObject(n))return[];if(v)return v(n);var t=[];for(var r in n)m.has(n,r)&&t.push(r);return M&&e(n,t),t},m.allKeys=function(n){if(!m.isObject(n))return[];var t=[];for(var r in n)t.push(r);return M&&e(n,t),t},m.values=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;u<r;u++)e[u]=n[t[u]];return e},m.mapObject=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=u.length,o={},a=0;a<i;a++)e=u[a],o[e]=t(n[e],e,n);return o},m.pairs=function(n){for(var t=m.keys(n),r=t.length,e=Array(r),u=0;u<r;u++)e[u]=[t[u],n[t[u]]];return e},m.invert=function(n){for(var t={},r=m.keys(n),e=0,u=r.length;e<u;e++)t[n[r[e]]]=r[e];return t},m.functions=m.methods=function(n){var t=[];for(var r in n)m.isFunction(n[r])&&t.push(r);return t.sort()},m.extend=_(m.allKeys),m.extendOwn=m.assign=_(m.keys),m.findKey=function(n,t,r){t=x(t,r);for(var e,u=m.keys(n),i=0,o=u.length;i<o;i++)if(e=u[i],t(n[e],e,n))return e},m.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;m.isFunction(t)?(u=m.allKeys(o),e=b(t,r)):(u=S(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;a<c;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},m.omit=function(n,t,r){if(m.isFunction(t))t=m.negate(t);else{var e=m.map(S(arguments,!1,!1,1),String);t=function(n,t){return!m.contains(e,t)}}return m.pick(n,t,r)},m.defaults=_(m.allKeys,!0),m.create=function(n,t){var r=j(n);return t&&m.extendOwn(r,t),r},m.clone=function(n){return m.isObject(n)?m.isArray(n)?n.slice():m.extend({},n):n},m.tap=function(n,t){return t(n),n},m.isMatch=function(n,t){var r=m.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;i<e;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var N=function(n,t,r,e){if(n===t)return 0!==n||1/n===1/t;if(null==n||null==t)return n===t;n instanceof m&&(n=n._wrapped),t instanceof m&&(t=t._wrapped);var u=s.call(n);if(u!==s.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!==+n?+t!==+t:0===+n?1/+n===1/t:+n===+t;case"[object Date]":case"[object Boolean]":return+n===+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,a=t.constructor;if(o!==a&&!(m.isFunction(o)&&o instanceof o&&m.isFunction(a)&&a instanceof a)&&"constructor"in n&&"constructor"in t)return!1}r=r||[],e=e||[];for(var c=r.length;c--;)if(r[c]===n)return e[c]===t;if(r.push(n),e.push(t),i){if(c=n.length,c!==t.length)return!1;for(;c--;)if(!N(n[c],t[c],r,e))return!1}else{var f,l=m.keys(n);if(c=l.length,m.keys(t).length!==c)return!1;for(;c--;)if(f=l[c],!m.has(t,f)||!N(n[f],t[f],r,e))return!1}return r.pop(),e.pop(),!0};m.isEqual=function(n,t){return N(n,t)},m.isEmpty=function(n){return null==n||(k(n)&&(m.isArray(n)||m.isString(n)||m.isArguments(n))?0===n.length:0===m.keys(n).length)},m.isElement=function(n){return!(!n||1!==n.nodeType)},m.isArray=h||function(n){return"[object Array]"===s.call(n)},m.isObject=function(n){var t=typeof n;return"function"===t||"object"===t&&!!n},m.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(n){m["is"+n]=function(t){return s.call(t)==="[object "+n+"]"}}),m.isArguments(arguments)||(m.isArguments=function(n){return m.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(m.isFunction=function(n){return"function"==typeof n||!1}),m.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},m.isNaN=function(n){return m.isNumber(n)&&n!==+n},m.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"===s.call(n)},m.isNull=function(n){return null===n},m.isUndefined=function(n){return void 0===n},m.has=function(n,t){return null!=n&&p.call(n,t)},m.noConflict=function(){return u._=i,this},m.identity=function(n){return n},m.constant=function(n){return function(){return n}},m.noop=function(){},m.property=w,m.propertyOf=function(n){return null==n?function(){}:function(t){return n[t]}},m.matcher=m.matches=function(n){return n=m.extendOwn({},n),function(t){return m.isMatch(t,n)}},m.times=function(n,t,r){var e=Array(Math.max(0,n));t=b(t,r,1);for(var u=0;u<n;u++)e[u]=t(u);return e},m.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},m.now=Date.now||function(){return(new Date).getTime()};var B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},T=m.invert(B),R=function(n){var t=function(t){return n[t]},r="(?:"+m.keys(n).join("|")+")",e=RegExp(r),u=RegExp(r,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}};m.escape=R(B),m.unescape=R(T),m.result=function(n,t,r){var e=null==n?void 0:n[t];return void 0===e&&(e=r),m.isFunction(e)?e.call(n):e};var q=0;m.uniqueId=function(n){var t=++q+"";return n?n+t:t},m.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var K=/(.)^/,z={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},D=/\\|'|\r|\n|\u2028|\u2029/g,L=function(n){return"\\"+z[n]};m.template=function(n,t,r){!t&&r&&(t=r),t=m.defaults({},t,m.templateSettings);var e=RegExp([(t.escape||K).source,(t.interpolate||K).source,(t.evaluate||K).source].join("|")+"|$","g"),u=0,i="__p+='";n.replace(e,function(t,r,e,o,a){return i+=n.slice(u,a).replace(D,L),u=a+t.length,r?i+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":e?i+="'+\n((__t=("+e+"))==null?'':__t)+\n'":o&&(i+="';\n"+o+"\n__p+='"),t}),i+="';\n",t.variable||(i="with(obj||{}){\n"+i+"}\n"),i="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+i+"return __p;\n";try{var o=new Function(t.variable||"obj","_",i)}catch(n){throw n.source=i,n}var a=function(n){return o.call(this,n,m)},c=t.variable||"obj";return a.source="function("+c+"){\n"+i+"}",a},m.chain=function(n){var t=m(n);return t._chain=!0,t};var P=function(n,t){return n._chain?m(t).chain():t};m.mixin=function(n){m.each(m.functions(n),function(t){var r=m[t]=n[t];m.prototype[t]=function(){var n=[this._wrapped];return f.apply(n,arguments),P(this,r.apply(m,n))}})},m.mixin(m),m.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=o[n];m.prototype[n]=function(){var r=this._wrapped;return t.apply(r,arguments),"shift"!==n&&"splice"!==n||0!==r.length||delete r[0],P(this,r)}}),m.each(["concat","join","slice"],function(n){var t=o[n];m.prototype[n]=function(){return P(this,t.apply(this._wrapped,arguments))}}),m.prototype.value=function(){return this._wrapped},m.prototype.valueOf=m.prototype.toJSON=m.prototype.value,m.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return m})}).call(this);

},{}],178:[function(require,module,exports){
!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function n(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function e(t){return t}function r(t,n,e){return function(){var r=e.apply(n,arguments);return r===n?t:r}}function i(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var e=0,r=W.length;e<r;++e){var i=W[e]+n;if(i in t)return i}}function o(t,n){for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}function u(){this._=Object.create(null)}function a(t){return(t+="")===F||t[0]===J?J+t:t}function s(t){return(t+="")[0]===J?t.slice(1):t}function c(t){return a(t)in this._}function l(t){return(t=a(t))in this._&&delete this._[t]}function f(){var t=[];for(var n in this._)t.push(s(n));return t}function h(){var t=0;for(var n in this._)++t;return t}function p(){for(var t in this._)return!1;return!0}function v(){}function d(){}function _(t){function n(){for(var n,r=e,i=-1,o=r.length;++i<o;)(n=r[i].on)&&n.apply(this,arguments);return t}var e=[],r=new u;return n.on=function(n,i){var o,u=r.get(n);return arguments.length<2?u&&u.on:(u&&(u.on=null,e=e.slice(0,o=e.indexOf(u)).concat(e.slice(o+1)),r.remove(n)),i&&e.push(r.set(n,{on:i})),t)},n}function g(){U.event.preventDefault()}function y(){for(var t,n=U.event;t=n.sourceEvent;)n=t;return n}function m(t){for(var n=new d,e=0,r=arguments.length;++e<r;)n[arguments[e]]=_(n);return n.of=function(e,r){return function(i){try{var o=i.sourceEvent=U.event;i.target=t,U.event=i,n[i.type].apply(e,r)}finally{U.event=o}}},n}function w(t){return nt(t,ot),t}function x(t){return"function"==typeof t?t:function(){return et(t,this)}}function b(t){return"function"==typeof t?t:function(){return rt(t,this)}}function N(t,n){function e(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,n)}function o(){this.setAttributeNS(t.space,t.local,n)}function u(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}function a(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}return t=U.ns.qualify(t),null==n?t.local?r:e:"function"==typeof n?t.local?a:u:t.local?o:i}function A(t){return t.trim().replace(/\s+/g," ")}function S(t){return new RegExp("(?:^|\\s+)"+U.requote(t)+"(?:\\s+|$)","g")}function E(t){return(t+"").trim().split(/^|\s+/)}function z(t,n){function e(){for(var e=-1;++e<i;)t[e](this,n)}function r(){for(var e=-1,r=n.apply(this,arguments);++e<i;)t[e](this,r)}t=E(t).map(T);var i=t.length;return"function"==typeof n?r:e}function T(t){var n=S(t);return function(e,r){if(i=e.classList)return r?i.add(t):i.remove(t);var i=e.getAttribute("class")||"";r?(n.lastIndex=0,n.test(i)||e.setAttribute("class",A(i+" "+t))):e.setAttribute("class",A(i.replace(n," ")))}}function C(t,n,e){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,n,e)}function o(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}return null==n?r:"function"==typeof n?o:i}function L(t,n){function e(){delete this[t]}function r(){this[t]=n}function i(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}return null==n?e:"function"==typeof n?i:r}function P(t){function n(){var n=this.ownerDocument,e=this.namespaceURI;return e===ut&&n.documentElement.namespaceURI===ut?n.createElement(t):n.createElementNS(e,t)}function e(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=U.ns.qualify(t)).local?e:n}function O(){var t=this.parentNode;t&&t.removeChild(this)}function q(){this._=Object.create(null)}function M(t){return{__data__:t}}function D(t){return function(){return it(this,t)}}function $(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function k(t){return arguments.length||(t=$),function(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}}function V(t,n){for(var e=0,r=t.length;e<r;e++)for(var i,o=t[e],u=0,a=o.length;u<a;u++)(i=o[u])&&n(i,u,e);return t}function R(t){return nt(t,st),t}function X(t){var n,e;return function(r,i,o){var u,a=t[o].update,s=a.length;for(o!=e&&(e=o,n=0),i>=n&&(n=i+1);!(u=a[n])&&++n<s;);return u}}function j(t,n,e){function r(){var n=this[u];n&&(this.removeEventListener(t,n,n.$),delete this[u])}function i(){var i=s(n,Z(arguments));r.call(this),this.addEventListener(t,this[u]=i,i.$=e),i._=n}function o(){var n,e=new RegExp("^__on([^.]+)"+U.requote(t)+"$");for(var r in this)if(n=r.match(e)){var i=this[r];this.removeEventListener(n[1],i,i.$),delete this[r]}}var u="__on"+t,a=t.indexOf("."),s=H;a>0&&(t=t.slice(0,a));var c=ct.get(t);return c&&(t=c,s=Y),a?n?i:r:n?v:o}function H(t,n){return function(e){var r=U.event;U.event=e,n[0]=this.__data__;try{t.apply(this,n)}finally{U.event=r}}}function Y(t,n){var e=H(t,n);return function(t){var n=this,r=t.relatedTarget;r&&(r===n||8&r.compareDocumentPosition(n))||e.call(n,t)}}function B(e){var r=".dragsuppress-"+ ++ft,o="click"+r,u=U.select(n(e)).on("touchmove"+r,g).on("dragstart"+r,g).on("selectstart"+r,g);if(null==lt&&(lt=!("onselectstart"in e)&&i(e.style,"userSelect")),lt){var a=t(e).style,s=a[lt];a[lt]="none"}return function(t){if(u.on(r,null),lt&&(a[lt]=s),t){var n=function(){u.on(o,null)};u.on(o,function(){g(),n()},!0),setTimeout(n,0)}}}function G(t,e){e.changedTouches&&(e=e.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(ht<0){var o=n(t);if(o.scrollX||o.scrollY){r=U.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var u=r[0][0].getScreenCTM();ht=!(u.f||u.e),r.remove()}}return ht?(i.x=e.pageX,i.y=e.pageY):(i.x=e.clientX,i.y=e.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}function I(){return U.event.changedTouches[0].identifier}var U={version:"3.5.17"},K=this.document;U.rebind=function(t,n){for(var e,i=1,o=arguments.length;++i<o;)t[e=arguments[i]]=r(t,n,n[e]);return t};var W=["webkit","ms","moz","Moz","o","O"];U.map=function(t,n){var e=new u;if(t instanceof u)t.forEach(function(t,n){e.set(t,n)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n.call(t,r=t[i],i),r)}else for(var a in t)e.set(a,t[a]);return e};var F="__proto__",J="\0";o(u,{has:c,get:function(t){return this._[a(t)]},set:function(t,n){return this._[a(t)]=n},remove:l,keys:f,values:function(){var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:s(n),value:this._[n]});return t},size:h,empty:p,forEach:function(t){for(var n in this._)t.call(this,s(n),this._[n])}});var Q=[].slice,Z=function(t){return Q.call(t)};U.dispatch=function(){for(var t=new d,n=-1,e=arguments.length;++n<e;)t[arguments[n]]=_(t);return t},d.prototype.on=function(t,n){var e=t.indexOf("."),r="";if(e>=0&&(r=t.slice(e+1),t=t.slice(0,e)),t)return arguments.length<2?this[t].on(r):this[t].on(r,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},U.event=null,U.requote=function(t){return t.replace(tt,"\\$&")};var tt=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,nt={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]},et=function(t,n){return n.querySelector(t)},rt=function(t,n){return n.querySelectorAll(t)},it=function(t,n){var e=t.matches||t[i(t,"matchesSelector")];return(it=function(t,n){return e.call(t,n)})(t,n)};"function"==typeof Sizzle&&(et=function(t,n){return Sizzle(t,n)[0]||null},rt=Sizzle,it=Sizzle.matchesSelector),U.selection=function(){return U.select(K.documentElement)};var ot=U.selection.prototype=[];ot.select=function(t){var n,e,r,i,o=[];t=x(t);for(var u=-1,a=this.length;++u<a;){o.push(n=[]),n.parentNode=(r=this[u]).parentNode;for(var s=-1,c=r.length;++s<c;)(i=r[s])?(n.push(e=t.call(i,i.__data__,s,u)),e&&"__data__"in i&&(e.__data__=i.__data__)):n.push(null)}return w(o)},ot.selectAll=function(t){var n,e,r=[];t=b(t);for(var i=-1,o=this.length;++i<o;)for(var u=this[i],a=-1,s=u.length;++a<s;)(e=u[a])&&(r.push(n=Z(t.call(e,e.__data__,a,i))),n.parentNode=e);return w(r)};var ut="http://www.w3.org/1999/xhtml",at={svg:"http://www.w3.org/2000/svg",xhtml:ut,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};U.ns={prefix:at,qualify:function(t){var n=t.indexOf(":"),e=t;return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),at.hasOwnProperty(e)?{space:at[e],local:t}:t}},ot.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node();return t=U.ns.qualify(t),t.local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)}for(n in t)this.each(N(n,t[n]));return this}return this.each(N(t,n))},ot.classed=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node(),r=(t=E(t)).length,i=-1;if(n=e.classList){for(;++i<r;)if(!n.contains(t[i]))return!1}else for(n=e.getAttribute("class");++i<r;)if(!S(t[i]).test(n))return!1;return!0}for(n in t)this.each(z(n,t[n]));return this}return this.each(z(t,n))},ot.style=function(t,e,r){var i=arguments.length;if(i<3){if("string"!=typeof t){i<2&&(e="");for(r in t)this.each(C(r,t[r],e));return this}if(i<2){var o=this.node();return n(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(C(t,e,r))},ot.property=function(t,n){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(n in t)this.each(L(n,t[n]));return this}return this.each(L(t,n))},ot.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},ot.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},ot.append=function(t){return t=P(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},ot.insert=function(t,n){return t=P(t),n=x(n),this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})},ot.remove=function(){return this.each(O)},U.set=function(t){var n=new q;if(t)for(var e=0,r=t.length;e<r;++e)n.add(t[e]);return n},o(q,{has:c,add:function(t){return this._[a(t+="")]=!0,t},remove:l,values:f,size:h,empty:p,forEach:function(t){for(var n in this._)t.call(this,s(n))}}),ot.data=function(t,n){function e(t,e){var r,i,o,a=t.length,f=e.length,h=Math.min(a,f),p=new Array(f),v=new Array(f),d=new Array(a);if(n){var _,g=new u,y=new Array(a);for(r=-1;++r<a;)(i=t[r])&&(g.has(_=n.call(i,i.__data__,r))?d[r]=i:g.set(_,i),y[r]=_);for(r=-1;++r<f;)(i=g.get(_=n.call(e,o=e[r],r)))?i!==!0&&(p[r]=i,i.__data__=o):v[r]=M(o),g.set(_,!0);for(r=-1;++r<a;)r in y&&g.get(y[r])!==!0&&(d[r]=t[r])}else{for(r=-1;++r<h;)i=t[r],o=e[r],i?(i.__data__=o,p[r]=i):v[r]=M(o);for(;r<f;++r)v[r]=M(e[r]);for(;r<a;++r)d[r]=t[r]}v.update=p,v.parentNode=p.parentNode=d.parentNode=t.parentNode,s.push(v),c.push(p),l.push(d)}var r,i,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(t[o]=i.__data__);return t}var s=R([]),c=w([]),l=w([]);if("function"==typeof t)for(;++o<a;)e(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<a;)e(r=this[o],t);return c.enter=function(){return s},c.exit=function(){return l},c},ot.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},ot.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=D(t));for(var o=0,u=this.length;o<u;o++){i.push(n=[]),n.parentNode=(e=this[o]).parentNode;for(var a=0,s=e.length;a<s;a++)(r=e[a])&&t.call(r,r.__data__,a,o)&&n.push(r)}return w(i)},ot.order=function(){for(var t=-1,n=this.length;++t<n;)for(var e,r=this[t],i=r.length-1,o=r[i];--i>=0;)(e=r[i])&&(o&&o!==e.nextSibling&&o.parentNode.insertBefore(e,o),o=e);return this},U.ascending=$,ot.sort=function(t){t=k.apply(this,arguments);for(var n=-1,e=this.length;++n<e;)this[n].sort(t);return this.order()},ot.each=function(t){return V(this,function(n,e,r){t.call(n,n.__data__,e,r)})},ot.call=function(t){var n=Z(arguments);return t.apply(n[0]=this,n),this},ot.empty=function(){return!this.node()},ot.node=function(){for(var t=0,n=this.length;t<n;t++)for(var e=this[t],r=0,i=e.length;r<i;r++){var o=e[r];if(o)return o}return null},ot.size=function(){var t=0;return V(this,function(){++t}),t};var st=[];U.selection.enter=R,U.selection.enter.prototype=st,st.append=ot.append,st.empty=ot.empty,st.node=ot.node,st.call=ot.call,st.size=ot.size,st.select=function(t){for(var n,e,r,i,o,u=[],a=-1,s=this.length;++a<s;){r=(i=this[a]).update,u.push(n=[]),n.parentNode=i.parentNode;for(var c=-1,l=i.length;++c<l;)(o=i[c])?(n.push(r[c]=e=t.call(i.parentNode,o.__data__,c,a)),e.__data__=o.__data__):n.push(null)}return w(u)},st.insert=function(t,n){return arguments.length<2&&(n=X(this)),ot.insert.call(this,t,n)},U.select=function(n){var e;return"string"==typeof n?(e=[et(n,K)],e.parentNode=K.documentElement):(e=[n],e.parentNode=t(n)),w([e])},U.selectAll=function(t){var n;return"string"==typeof t?(n=Z(rt(t,K)),n.parentNode=K.documentElement):(n=Z(t),n.parentNode=null),w([n])},ot.on=function(t,n,e){var r=arguments.length;if(r<3){if("string"!=typeof t){r<2&&(n=!1);for(e in t)this.each(j(e,t[e],n));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;e=!1}return this.each(j(t,n,e))};var ct=U.map({mouseenter:"mouseover",mouseleave:"mouseout"});K&&ct.forEach(function(t){"on"+t in K&&ct.remove(t)});var lt,ft=0;U.mouse=function(t){return G(t,y())};var ht=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;U.touch=function(t,n,e){if(arguments.length<3&&(e=n,n=y().changedTouches),n)for(var r,i=0,o=n.length;i<o;++i)if((r=n[i]).identifier===e)return G(t,r)},U.behavior={},U.behavior.drag=function(){function t(){this.on("mousedown.drag",u).on("touchstart.drag",a)}function r(t,n,e,r,u){return function(){function a(){var t,e,r=n(h,d);r&&(t=r[0]-m[0],e=r[1]-m[1],v|=t|e,m=r,p({type:"drag",x:r[0]+c[0],y:r[1]+c[1],dx:t,dy:e}))}function s(){n(h,d)&&(g.on(r+_,null).on(u+_,null),y(v),p({type:"dragend"}))}var c,l=this,f=U.event.target.correspondingElement||U.event.target,h=l.parentNode,p=i.of(l,arguments),v=0,d=t(),_=".drag"+(null==d?"":"-"+d),g=U.select(e(f)).on(r+_,a).on(u+_,s),y=B(f),m=n(h,d);o?(c=o.apply(l,arguments),c=[c.x-m[0],c.y-m[1]]):c=[0,0],p({type:"dragstart"})}}var i=m(t,"drag","dragstart","dragend"),o=null,u=r(v,U.mouse,n,"mousemove","mouseup"),a=r(I,U.touch,e,"touchmove","touchend");return t.origin=function(n){return arguments.length?(o=n,t):o},U.rebind(t,i,"on")},"function"==typeof define&&define.amd?(this.d3=U,define(U)):"object"==typeof module&&module.exports?module.exports=U:this.d3=U}();

},{}],179:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),AbstractFile=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getBytes",value:function(e,t){throw new TypeError("Method getBytes is not implemented")}},{key:"getAll",value:function(){throw new TypeError("Method getAll is not implemented")}},{key:"getAllString",value:function(){throw new TypeError("Method getAllString is not implemented")}},{key:"getSize",value:function(){throw new TypeError("Method getSize is not implemented")}}]),e}();module.exports=AbstractFile;

},{}],180:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(n,e,i){return e&&t(n.prototype,e),i&&t(n,i),n}}(),_Interval=require("./Interval"),_Interval2=_interopRequireDefault(_Interval),_utils=require("./utils"),ContigInterval=function(){function t(n,e,i){_classCallCheck(this,t),this.contig=n,this.interval=new _Interval2.default(e,i)}return _createClass(t,[{key:"start",value:function(){return this.interval.start}},{key:"stop",value:function(){return this.interval.stop}},{key:"length",value:function(){return this.interval.length()}},{key:"intersects",value:function(t){return this.contig===t.contig&&this.interval.intersects(t.interval)}},{key:"chrIntersects",value:function(t){return this.chrOnContig(t.contig)&&this.interval.intersects(t.interval)}},{key:"containsInterval",value:function(t){return this.contig===t.contig&&this.interval.containsInterval(t.interval)}},{key:"isAdjacentTo",value:function(t){return this.contig===t.contig&&(this.start()==1+t.stop()||this.stop()+1==t.start())}},{key:"isCoveredBy",value:function(t){var n=this,e=t.filter(function(t){return t.contig===n.contig}).map(function(t){return t.interval});return this.interval.isCoveredBy(e)}},{key:"containsLocus",value:function(t,n){return this.contig===t&&this.interval.contains(n)}},{key:"chrContainsLocus",value:function(t,n){return this.chrOnContig(t)&&this.interval.contains(n)}},{key:"chrOnContig",value:function(t){return this.contig===t||this.contig==="chr"+t||"chr"+this.contig===t}},{key:"clone",value:function(){return new t(this.contig,this.interval.start,this.interval.stop)}},{key:"complementIntervals",value:function(n){var e=this;return this.interval.complementIntervals((0,_utils.flatMap)(n,function(t){return t.contig===e.contig?[t.interval]:[]})).map(function(n){return new t(e.contig,n.start,n.stop)})}},{key:"toString",value:function(){return this.contig+":"+this.start()+"-"+this.stop()}},{key:"toGenomeRange",value:function(){if(!("string"==typeof this.contig||this.contig instanceof String))throw"Cannot convert numeric ContigInterval to GenomeRange";return{contig:this.contig,start:this.start(),stop:this.stop()}}}],[{key:"compare",value:function(t,n){return t.contig>n.contig?-1:t.contig<n.contig?1:t.start()-n.start()}},{key:"coalesce",value:function(n){n.sort(t.compare);var e=[];return n.forEach(function(t){if(0===e.length)return void e.push(t);var n=e[e.length-1];t.intersects(n)||t.isAdjacentTo(n)?(n=e[e.length-1]=n.clone(),n.interval.stop=Math.max(t.interval.stop,n.interval.stop)):e.push(t)}),e}},{key:"fromGenomeRange",value:function(n){return new t(n.contig,n.start,n.stop)}}]),t}();module.exports=ContigInterval;

},{"./Interval":183,"./utils":218}],181:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_get=function(t,e,n){for(var r=!0;r;){var o=t,a=e,i=n;r=!1,null===o&&(o=Function.prototype);var u=Object.getOwnPropertyDescriptor(o,a);if(void 0!==u){if("value"in u)return u.value;var s=u.get;if(void 0===s)return;return s.call(i)}var l=Object.getPrototypeOf(o);if(null===l)return;t=l,e=a,n=i,r=!0,u=l=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_utils=require("./utils"),_utils2=_interopRequireDefault(_utils),_Interval=require("./Interval"),_Interval2=_interopRequireDefault(_Interval),Controls=function(t){function e(t){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t)}return _inherits(e,t),_createClass(e,[{key:"makeRange",value:function(){return{contig:this.refs.contig.value,start:Number(this.refs.start.value),stop:Number(this.refs.stop.value)}}},{key:"completeRange",value:function(t){var e=this;if(t=t||{},t.start&&void 0===t.stop&&(t.stop=t.start+20,t.start-=20),t.contig){var n;!function(){var r=t.contig;n=_underscore2.default.find(e.props.contigList,function(t){return _utils2.default.isChrMatch(r,t)}),n&&(t.contig=n)}()}return _underscore2.default.extend({},this.props.range,t)}},{key:"handleContigChange",value:function(t){this.props.onChange(this.completeRange({contig:this.refs.contig.value}))}},{key:"handleFormSubmit",value:function(t){t.preventDefault();var e=this.completeRange(_utils2.default.parseRange(this.refs.position.value));this.props.onChange(e)}},{key:"updateRangeUI",value:function(){var t=this.props.range;if(t&&(this.refs.position.value=_utils2.default.formatInterval(new _Interval2.default(t.start,t.stop)),this.props.contigList)){var e=this.props.contigList.indexOf(t.contig);this.refs.contig.selectedIndex=e}}},{key:"zoomIn",value:function(t){t.preventDefault(),this.zoomByFactor(.5)}},{key:"zoomOut",value:function(t){t.preventDefault(),this.zoomByFactor(2)}},{key:"zoomByFactor",value:function(t){var e=this.props.range;if(e){var n=_utils2.default.scaleRange(new _Interval2.default(e.start,e.stop),t);this.props.onChange({contig:e.contig,start:n.start,stop:n.stop})}}},{key:"render",value:function(){var t=this.props.contigList?this.props.contigList.map(function(t,e){return _react2.default.createElement("option",{key:e},t)}):null;return _react2.default.createElement("form",{className:"controls",onSubmit:this.handleFormSubmit.bind(this)},_react2.default.createElement("select",{ref:"contig",onChange:this.handleContigChange.bind(this)},t)," ",_react2.default.createElement("input",{ref:"position",type:"text"})," ",_react2.default.createElement("button",{className:"btn-submit",onClick:this.handleFormSubmit.bind(this)},"Go")," ",_react2.default.createElement("div",{className:"zoom-controls"},_react2.default.createElement("button",{className:"btn-zoom-out",onClick:this.zoomOut.bind(this)})," ",_react2.default.createElement("button",{className:"btn-zoom-in",onClick:this.zoomIn.bind(this)})))}},{key:"componentDidUpdate",value:function(t){_underscore2.default.isEqual(t.range,this.props.range)||this.updateRangeUI()}},{key:"componentDidMount",value:function(){this.updateRangeUI()}}]),e}(_react2.default.Component);module.exports=Controls;

},{"./Interval":183,"./utils":218,"react":175,"underscore":177}],182:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_ContigInterval=require("./ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataSamRead=require("./data/SamRead"),_dataSamRead2=_interopRequireDefault(_dataSamRead),OP_MAP={ALIGNMENT_MATCH:"M",INSERT:"I",DELETE:"D",SKIP:"N",CLIP_SOFT:"S",CLIP_HARD:"H",PAD:"P",SEQUENCE_MATCH:"=",SEQUENCE_MISMATCH:"X"},GA4GHAlignment=function(){function e(t){_classCallCheck(this,e),this.alignment=t,this.pos=t.alignment.position.position,this.ref=t.alignment.position.referenceName,this.name=t.fragmentName,this.cigarOps=t.alignment.cigar.map(function(e){var t=e.operation,n=e.operationLength;return{op:OP_MAP[t],length:n}}),this._interval=new _ContigInterval2.default(this.ref,this.pos,this.pos+this.getReferenceLength()-1)}return _createClass(e,[{key:"getKey",value:function(){return e.keyFromGA4GHResponse(this.alignment)}},{key:"getStrand",value:function(){return this.alignment.alignment.position.reverseStrand?"-":"+"}},{key:"getQualityScores",value:function(){return this.alignment.alignedQuality}},{key:"getSequence",value:function(){return this.alignment.alignedSequence}},{key:"getInterval",value:function(){return this._interval}},{key:"intersects",value:function(e){return e.intersects(this.getInterval())}},{key:"getReferenceLength",value:function(){return _dataSamRead2.default.referenceLengthFromOps(this.cigarOps)}},{key:"getMateProperties",value:function(){var e=this.alignment.nextMatePosition;return e&&{ref:e.referenceName,pos:e.position,strand:e.reverseStrand?"-":"+"}}},{key:"getInferredInsertSize",value:function(){var e=this.getMateProperties();if(e&&e.ref==this.ref){var t=this._interval.start(),n=this._interval.stop(),r=e.pos,a=r+this.getSequence().length;return Math.max(n,a)-Math.min(t,r)}return 0}}],[{key:"keyFromGA4GHResponse",value:function(e){return e.fragmentName+":"+e.readNumber}}]),e}();module.exports=GA4GHAlignment;

},{"./ContigInterval":180,"./data/SamRead":193}],183:[function(require,module,exports){
"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(n,r,e){return r&&t(n.prototype,r),e&&t(n,e),n}}(),Interval=function(){function t(n,r){_classCallCheck(this,t),this.start=n,this.stop=r}return _createClass(t,[{key:"length",value:function(){return Math.max(0,this.stop-this.start+1)}},{key:"intersect",value:function(n){return new t(Math.max(this.start,n.start),Math.min(this.stop,n.stop))}},{key:"intersects",value:function(t){return this.start<=t.stop&&t.start<=this.stop}},{key:"contains",value:function(t){return t>=this.start&&t<=this.stop}},{key:"containsInterval",value:function(t){return this.contains(t.start)&&this.contains(t.stop)}},{key:"clone",value:function(){return new t(this.start,this.stop)}},{key:"isCoveredBy",value:function(t){for(var n=this.clone(),r=0;r<t.length;r++){var e=t[r];if(r&&e.start<t[r-1].start)throw"isCoveredBy must be called with sorted ranges";if(e.start>n.start)return!1;if(n.start=Math.max(n.start,e.stop+1),n.length()<=0)return!0}return!1}},{key:"subtract",value:function(n){return this.intersects(n)?this.containsInterval(n)?[new t(this.start,n.start-1),new t(n.stop+1,this.stop)].filter(function(t){return t.length()>0}):n.containsInterval(this)?[]:n.start<this.start?[new t(n.stop+1,this.stop)]:[new t(this.start,n.start-1)]:[this]}},{key:"complementIntervals",value:function(t){var n=[this];return t.forEach(function(t){var r=[];n.forEach(function(n){r=r.concat(n.subtract(t))}),n=r}),n}},{key:"toString",value:function(){return"["+this.start+", "+this.stop+"]"}}],[{key:"intersectAll",value:function(t){if(!t.length)throw new Error("Tried to intersect zero intervals");var n=t[0].clone();return t.slice(1).forEach(function(t){var r=t.start,e=t.stop;n.start=Math.max(r,n.start),n.stop=Math.min(e,n.stop)}),n}},{key:"boundingInterval",value:function(t){if(!t.length)throw new Error("Tried to bound zero intervals");var n=t[0].clone();return t.slice(1).forEach(function(t){var r=t.start,e=t.stop;n.start=Math.min(r,n.start),n.stop=Math.max(e,n.stop)}),n}}]),t}();module.exports=Interval;

},{}],184:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var i=e,o=t,u=r;n=!1,null===i&&(i=Function.prototype);var l=Object.getOwnPropertyDescriptor(i,o);if(void 0!==l){if("value"in l)return l.value;var a=l.get;if(void 0===a)return;return a.call(u)}var f=Object.getPrototypeOf(i);if(null===f)return;e=f,t=o,r=u,n=!0,l=f=void 0}},_q=require("q"),_q2=_interopRequireDefault(_q),_AbstractFile2=require("./AbstractFile"),_AbstractFile3=_interopRequireDefault(_AbstractFile2),LocalStringFile=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.fileLength=e.length,this.buffer=new ArrayBuffer(e.length),this.content=e;for(var r=new Uint8Array(this.buffer),n=0;n<this.fileLength;n++)r[n]=e.charCodeAt(n)}return _inherits(t,e),_createClass(t,[{key:"getBytes",value:function(e,t){if(t<0)return _q2.default.reject("Requested <0 bytes ("+t+")");var r=e+t-1;this.fileLength!=-1&&(r=Math.min(this.fileLength-1,r));var n=this.getFromCache(e,r);return _q2.default.when(n)}},{key:"getAll",value:function(){var e=this.getFromCache(0,this.fileLength-1);return _q2.default.when(e)}},{key:"getAllString",value:function(){return _q2.default.when(this.content)}},{key:"getSize",value:function(){return _q2.default.when(this.fileLength)}},{key:"getFromCache",value:function(e,t){return this.buffer.slice(e,t+1)}}]),t}(_AbstractFile3.default);module.exports=LocalStringFile;

},{"./AbstractFile":179,"q":22}],185:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var a=e,c=t,o=r;n=!1,null===a&&(a=Function.prototype);var u=Object.getOwnPropertyDescriptor(a,c);if(void 0!==u){if("value"in u)return u.value;var i=u.get;if(void 0===i)return;return i.call(o)}var l=Object.getPrototypeOf(a);if(null===l)return;e=l,t=c,r=o,n=!0,u=l=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),Menu=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"clickHandler",value:function(e,t){t.preventDefault();var r=this.props.items[e];"string"!=typeof r&&this.props.onSelect(r.key)}},{key:"render",value:function(){var e=this,t=function(t){return e.clickHandler.bind(e,t)},r=[];return this.props.header&&r.push(_react2.default.createElement("div",{key:"header",className:"menu-header"},this.props.header)),r=r.concat(this.props.items.map(function(e,r){if("string"==typeof e)return _react2.default.createElement("div",{key:r,className:"menu-separator"});var n="check"+(e.checked?" checked":"");return _react2.default.createElement("div",{key:r,className:"menu-item",onClick:t(r)},_react2.default.createElement("span",{className:n}),_react2.default.createElement("span",{className:"menu-item-label"},e.label))})),_react2.default.createElement("div",{className:"menu"},r)}}]),t}(_react2.default.Component);module.exports=Menu;

},{"react":175}],186:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _slicedToArray=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var u,s=e[Symbol.iterator]();!(n=(u=s.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_get=function(e,t,r){for(var n=!0;n;){var i=e,o=t,u=r;n=!1,null===i&&(i=Function.prototype);var s=Object.getOwnPropertyDescriptor(i,o);if(void 0!==s){if("value"in s)return s.value;var a=s.get;if(void 0===a)return;return a.call(u)}var l=Object.getPrototypeOf(i);if(null===l)return;e=l,t=o,r=u,n=!0,s=l=void 0}},_q=require("q"),_q2=_interopRequireDefault(_q),_AbstractFile2=require("./AbstractFile"),_AbstractFile3=_interopRequireDefault(_AbstractFile2),RemoteFile=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.url=e,this.fileLength=-1,this.chunks=[],this.numNetworkRequests=0}return _inherits(t,e),_createClass(t,[{key:"getBytes",value:function(e,t){if(t<0)return _q2.default.reject("Requested <0 bytes ("+t+") from "+this.url);var r=e+t-1;this.fileLength!=-1&&(r=Math.min(this.fileLength-1,r));var n=this.getFromCache(e,r);return n?_q2.default.when(n):this.getFromNetwork(e,r)}},{key:"getAll",value:function(){var e=this;if(this.fileLength!=-1){var t=this.getFromCache(0,this.fileLength-1);if(t)return _q2.default.when(t)}var r=new XMLHttpRequest;return r.open("GET",this.url),r.responseType="arraybuffer",this.promiseXHR(r).then(function(t){var r=_slicedToArray(t,1),n=r[0];return e.fileLength=n.byteLength,e.chunks=[{start:0,stop:e.fileLength-1,buffer:n}],n})}},{key:"getAllString",value:function(){var e=new XMLHttpRequest;return e.open("GET",this.url),this.promiseXHR(e).then(function(e){var t=_slicedToArray(e,1),r=t[0];return r})}},{key:"getSize",value:function(){if(this.fileLength!=-1)return _q2.default.when(this.fileLength);var e=new XMLHttpRequest;return e.open("HEAD",this.url),this.promiseXHR(e).then(function(){var t=e.getResponseHeader("Content-Length");if(null!==t)return Number(t);throw"Remote resource has unknown length"})}},{key:"getFromCache",value:function(e,t){for(var r=0;r<this.chunks.length;r++){var n=this.chunks[r];if(n.start<=e&&n.stop>=t)return n.buffer.slice(e-n.start,t-n.start+1)}return null}},{key:"getFromNetwork",value:function(e,t){var r=this,n=t-e+1;if(n>5e7)throw"Monster request: Won't fetch "+n+" bytes from "+this.url;var i=new XMLHttpRequest;return i.open("GET",this.url),i.responseType="arraybuffer",i.setRequestHeader("Range","bytes="+e+"-"+t),this.promiseXHR(i).then(function(t){var n=_slicedToArray(t,1),o=n[0],u={start:e,stop:e+o.byteLength-1,buffer:o};r.chunks.push(u);var s=r._getLengthFromContentRange(i);return null!==s&&void 0!==s&&(r.fileLength!=-1&&r.fileLength!=s?console.warn("Size of remote file "+r.url+" changed from "+(r.fileLength+" to "+s)):r.fileLength=s),o})}},{key:"promiseXHR",value:function(e){var t=this.url,r=_q2.default.defer();return e.addEventListener("load",function(e){this.status>=400?r.reject("Request for "+t+" failed with status: "+this.status+" "+this.statusText):r.resolve([this.response,e])}),e.addEventListener("error",function(e){r.reject("Request for "+t+" failed with status: "+this.status+" "+this.statusText)}),this.numNetworkRequests++,e.send(),r.promise}},{key:"_getLengthFromContentRange",value:function(e){if(!/Content-Range/i.exec(e.getAllResponseHeaders()))return null;var t=e.getResponseHeader("Content-Range"),r=/\/(\d+)$/.exec(t);return r?Number(r[1]):(console.warn("Received improper Content-Range value for "+(this.url+": "+t)),null)}},{key:"clearCache",value:function(){this.chunks=[]}}]),t}(_AbstractFile3.default);module.exports=RemoteFile;

},{"./AbstractFile":179,"q":22}],187:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_q=require("q"),_q2=_interopRequireDefault(_q),_ContigInterval=require("./ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),BASE_PAIRS_PER_FETCH=1e3,MONSTER_REQUEST=5e6,RemoteRequest=function(){function e(t,r){_classCallCheck(this,e),this.url=t,r?this.basePairsPerFetch=r:this.basePairsPerFetch=BASE_PAIRS_PER_FETCH,this.numNetworkRequests=0}return _createClass(e,[{key:"expandRange",value:function(e){var t=this,r=function(e){return e-e%t.basePairsPerFetch},n=Math.max(1,r(e.start())),s=r(e.stop()+this.basePairsPerFetch-1);return new _ContigInterval2.default(e.contig,n,s)}},{key:"getFeaturesInRange",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],r=this.expandRange(e);return this.get(r,t)}},{key:"get",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?"":arguments[1],r=e.stop()-e.start();if(r<=0)return _q2.default.reject("Requested <0 interval ("+r+") from "+this.url);if(r>MONSTER_REQUEST)throw"Monster request: Won't fetch "+r+" sized ranges from "+this.url;var n=this.getEndpointFromContig(e.contig,e.start(),e.stop(),t);return this.getFromNetwork(n)}},{key:"getFromNetwork",value:function(e){var t=new XMLHttpRequest;return t.open("GET",e),t.responseType="json",t.setRequestHeader("Content-Type","application/json"),this.promiseXHR(t).then(function(e){return e[0]})}},{key:"getEndpointFromContig",value:function(e,t,r){var n=arguments.length<=3||void 0===arguments[3]?"":arguments[3];return n.length<1?this.url+"/"+e+"?start="+t+"&end="+r:this.url+"/"+e+"?start="+t+"&end="+r+"&"+n}},{key:"promiseXHR",value:function(e){var t=this.url,r=_q2.default.defer();return e.addEventListener("load",function(e){this.status>=400?r.reject("Request for "+t+" failed with status: "+this.status+" "+this.statusText):r.resolve([this])}),e.addEventListener("error",function(e){r.reject("Request for "+t+" failed with status: "+this.status+" "+this.statusText)}),this.numNetworkRequests++,e.send(),r.promise}}]),e}();module.exports={RemoteRequest:RemoteRequest,MONSTER_REQUEST:MONSTER_REQUEST};

},{"./ContigInterval":180,"q":22}],188:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_Interval=require("./Interval"),_Interval2=_interopRequireDefault(_Interval),_ContigInterval=require("./ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),ResolutionCache=function(){function e(t,n){_classCallCheck(this,e),this.coveredRanges=[],this.cache={},this.filterFunction=t,this.keyFunction=n}return _createClass(e,[{key:"get",value:function(e,t){var n=this;if(!e)return[];var r={};return r=t?_underscore2.default.filter(this.cache[t],function(t){return n.filterFunction(e,t)}):_underscore2.default.filter(this.cache[1],function(t){return n.filterFunction(e,t)})}},{key:"complementInterval",value:function(t,n){n||(n=e.getResolution(t.interval));var r=_underscore2.default.filter(this.coveredRanges,function(e){return e.resolution==n}).map(function(e){return e.contigInterval});return t.complementIntervals(r)}},{key:"coverRange",value:function(t,n){n||(n=e.getResolution(t.interval));var r=new ResolutionCacheKey(t,n);this.coveredRanges.push(r),this.coveredRanges=ResolutionCacheKey.coalesce(this.coveredRanges)}},{key:"put",value:function(e,t){t||(t=1);var n=this.keyFunction(e);this.cache[t]||(this.cache[t]={}),this.cache[t][n]||(this.cache[t][n]=e)}},{key:"coversRange",value:function(t,n){n||(n=e.getResolution(t.interval));var r=_underscore2.default.filter(this.coveredRanges,function(e){return e.resolution==n});return!!t.isCoveredBy(r.map(function(e){return e.contigInterval}))}},{key:"clear",value:function(){this.coveredRanges=[],this.cache={}}}],[{key:"getResolution",value:function(e){var t=e.length()-1;return t<1e4?1:t>=1e4&&t<1e5?10:t>=1e5&&t<1e6?100:1e3}}]),e}(),ResolutionCacheKey=function(){function e(t,n){_classCallCheck(this,e),this.contigInterval=t,this.resolution=n}return _createClass(e,[{key:"clone",value:function(){return new e(this.contigInterval.clone(),this.resolution)}}],[{key:"coalesce",value:function(t){t.sort(e.compare);var n=[];return t.forEach(function(e){if(0===n.length)return void n.push(e);var t=n[n.length-1];(e.contigInterval.intersects(t.contigInterval)||e.contigInterval.isAdjacentTo(t.contigInterval))&&e.resolution==t.resolution?(t=n[n.length-1]=t.clone(),t.contigInterval.interval.stop=Math.max(e.contigInterval.interval.stop,t.contigInterval.interval.stop)):n.push(e)}),n}},{key:"compare",value:function(e,t){return e.contigInterval.contig>t.contigInterval.contig?-1:e.contigInterval.contig<t.contigInterval.contig?1:e.contigInterval.start()-t.contigInterval.start()}}]),e}();module.exports={ResolutionCache:ResolutionCache};

},{"./ContigInterval":180,"./Interval":183,"underscore":177}],189:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_get=function(e,t,n){for(var r=!0;r;){var a=e,i=t,o=n;r=!1,null===a&&(a=Function.prototype);var s=Object.getOwnPropertyDescriptor(a,i);if(void 0!==s){if("value"in s)return s.value;var c=s.get;if(void 0===c)return;return c.call(o)}var u=Object.getPrototypeOf(a);if(null===u)return;e=u,t=i,n=o,r=!0,s=u=void 0}},_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_react=require("react"),_react2=_interopRequireDefault(_react),_Controls=require("./Controls"),_Controls2=_interopRequireDefault(_Controls),_Menu=require("./Menu"),_Menu2=_interopRequireDefault(_Menu),_VisualizationWrapper=require("./VisualizationWrapper"),_VisualizationWrapper2=_interopRequireDefault(_VisualizationWrapper),Root=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={contigList:this.props.referenceSource.contigList(),contigNames:_underscore2.default.map(this.props.referenceSource.contigList(),function(e){return e.name}),range:null,settingsMenuKey:null}}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){var e=this;this.props.referenceSource.on("contigs",function(){e.setState({contigList:e.props.referenceSource.contigList()})}),this.state.range||this.handleRangeChange(this.props.initialRange),this.setState({contigList:this.props.referenceSource.contigList()})}},{key:"handleRangeChange",value:function(e){var t=this;e.start<0&&(e.start=0);var n=_underscore2.default.find(this.state.contigList,function(t){return t.name==e.contig});n&&e.stop>n.length&&(e.stop=n.length),this.props.referenceSource.normalizeRange(e).then(function(e){t.setState({range:e}),t.props.tracks.forEach(function(t){t.source.rangeChanged(e)})}).done()}},{key:"toggleSettingsMenu",value:function(e,t){this.state.settingsMenuKey==e?this.setState({settingsMenuKey:null}):this.setState({settingsMenuKey:e})}},{key:"handleSelectOption",value:function(e,t){this.setState({settingsMenuKey:null});var n=this.props.tracks[Number(e)].visualization,r=n.options,a=n.component.handleSelectOption(t,r);n.options=a,a!=r&&this.forceUpdate()}},{key:"makeDivForTrack",value:function(e,t){var n=_react2.default.createElement(_VisualizationWrapper2.default,{visualization:t.visualization,range:this.state.range,onRangeChange:this.handleRangeChange.bind(this),source:t.source,referenceSource:this.props.referenceSource}),r=t.track.name||"(track name)",a=null,i=null;if(t.visualization.component.getOptionsMenu&&(a=_react2.default.createElement("span",{ref:"gear-"+e,className:"gear",onClick:this.toggleSettingsMenu.bind(this,e)},"⚙")),this.state.settingsMenuKey==e){var o=this.refs["gear-"+e],s=o.offsetLeft,c=o.offsetWidth,u=o.offsetTop,l={position:"absolute",left:s+c+"px",top:u+"px"},p=t.visualization.component.getOptionsMenu(t.visualization.options);i=_react2.default.createElement("div",{className:"menu-container",style:l},_react2.default.createElement(_Menu2.default,{header:r,items:p,onSelect:this.handleSelectOption.bind(this,e)}))}var f=["track",t.visualization.component.displayName||"",t.track.cssClass||""].join(" ");return _react2.default.createElement("div",{key:e,className:f},_react2.default.createElement("div",{className:"track-label"},_react2.default.createElement("span",null,r),_react2.default.createElement("br",null),a,i),_react2.default.createElement("div",{className:"track-content"},n))}},{key:"render",value:function(){var e=this,t=this.props.tracks.map(function(t,n){return e.makeDivForTrack(""+n,t)});return _react2.default.createElement("div",{className:"pileup-root"},_react2.default.createElement("div",{className:"track controls"},_react2.default.createElement("div",{className:"track-label"}," "),_react2.default.createElement("div",{className:"track-content"},_react2.default.createElement(_Controls2.default,{contigList:this.state.contigNames,range:this.state.range,onChange:this.handleRangeChange.bind(this)}))),t)}}]),t}(_react2.default.Component);Root.displayName="Root",module.exports=Root;

},{"./Controls":181,"./Menu":185,"./VisualizationWrapper":191,"react":175,"underscore":177}],190:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_utils=require("./utils"),CHUNK_SIZE=1e3,SequenceStore=function(){function t(){_classCallCheck(this,t),this.contigMap={}}return _createClass(t,[{key:"setRange",value:function(t,e){if(0!==t.length()){if(t.length()!=e.length)throw"setRange length mismatch";var n=this._getSequences(t.contig);n||(n=this.contigMap[t.contig]={});var r=!0,u=!1,a=void 0;try{for(var i,o=this._chunkForInterval(t.interval)[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var l=i.value,s=l.chunkStart+l.offset-t.start();this._setChunk(n,l,e.slice(s,s+l.length))}}catch(t){u=!0,a=t}finally{try{!r&&o.return&&o.return()}finally{if(u)throw a}}}}},{key:"getAsString",value:function(t){var e=this._getSequences(t.contig);if(!e)return".".repeat(t.length());var n=this._chunkForInterval(t.interval),r="",u=!0,a=!1,i=void 0;try{for(var o,l=n[Symbol.iterator]();!(u=(o=l.next()).done);u=!0){var s=o.value,c=e[s.chunkStart];r+=c?0===s.offset&&s.length==c.length?c:c.slice(s.offset,s.offset+s.length):".".repeat(s.length)}}catch(t){a=!0,i=t}finally{try{!u&&l.return&&l.return()}finally{if(a)throw i}}return r}},{key:"getAsObjects",value:function(t){return _underscore2.default.object(_underscore2.default.map(this.getAsString(t),function(e,n){return[t.contig+":"+(t.start()+n),"."==e?null:e]}))}},{key:"_getChunk",value:function(t,e){return t[e]||".".repeat(CHUNK_SIZE)}},{key:"_chunkForInterval",value:function(t){var e=t.start%CHUNK_SIZE,n=t.start-e,r=[{chunkStart:n,offset:e,length:Math.min(CHUNK_SIZE-e,t.length())}];for(n+=CHUNK_SIZE;n<=t.stop;n+=CHUNK_SIZE)r.push({chunkStart:n,offset:0,length:Math.min(CHUNK_SIZE,t.stop-n+1)});return r}},{key:"_setChunk",value:function(t,e,n){if(0===e.offset&&n.length==CHUNK_SIZE)return void(t[e.chunkStart]=n);var r=this._getChunk(t,e.chunkStart);t[e.chunkStart]=r.slice(0,e.offset)+n+r.slice(e.offset+n.length)}},{key:"_getSequences",value:function(t){return this.contigMap[t]||this.contigMap[(0,_utils.altContigName)(t)]||null}}]),t}();module.exports=SequenceStore;

},{"./utils":218,"underscore":177}],191:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),_get=function(e,t,r){for(var i=!0;i;){var n=e,a=t,o=r;i=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,a);if(void 0!==s){if("value"in s)return s.value;var u=s.get;if(void 0===u)return;return u.call(o)}var l=Object.getPrototypeOf(n);if(null===l)return;e=l,t=a,r=o,i=!0,s=l=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_vizD3utils=require("./viz/d3utils"),_vizD3utils2=_interopRequireDefault(_vizD3utils),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_libMinid3=require("../lib/minid3"),_libMinid32=_interopRequireDefault(_libMinid3),VisualizationWrapper=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.hasDragBeenInitialized=!1,this.state={width:0,height:0}}return _inherits(t,e),_createClass(t,[{key:"updateSize",value:function(){var e=_reactDom2.default.findDOMNode(this).parentNode;this.setState({width:e.offsetWidth,height:e.offsetHeight})}},{key:"componentDidMount",value:function(){var e=this;this.onResizeListener=function(){return e.updateSize()},window.addEventListener("resize",this.onResizeListener),this.updateSize(),this.props.range&&!this.hasDragBeenInitialized&&this.addDragInterface()}},{key:"componentDidUpdate",value:function(){this.props.range&&!this.hasDragBeenInitialized&&this.addDragInterface()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResizeListener)}},{key:"getScale",value:function(){return this.props.range?_vizD3utils2.default.getTrackScale(this.props.range,this.state.width):function(e){return e}}},{key:"addDragInterface",value:function(){function e(){s()}var t=this;this.hasDragBeenInitialized=!0;var r,i,n=_reactDom2.default.findDOMNode(this),a=0,o=function(){_libMinid32.default.event.sourceEvent.stopPropagation(),a=0,r=_underscore2.default.clone(t.props.range),i=t.getScale()},s=function(){if(i&&r){var e=i.invert(-a),n=Math.round(e),o=i(e)-i(n),s={contig:r.contig,start:n,stop:n+(r.stop-r.start),offsetPx:o};t.props.onRangeChange(s)}},u=function(){a+=_libMinid32.default.event.dx,s()},l=_libMinid32.default.behavior.drag().on("dragstart",o).on("drag",u).on("dragend",e);_libMinid32.default.select(n).call(l).on("click",this.handleClick.bind(this))}},{key:"handleClick",value:function(){_libMinid32.default.event.defaultPrevented&&_libMinid32.default.event.stopPropagation()}},{key:"render",value:function(){var e=this.props.range,t=this.props.visualization.component;if(!e)return _react2.default.createElement(EmptyTrack,{className:t.displayName});var r=_react2.default.createElement(t,{range:e,source:this.props.source,referenceSource:this.props.referenceSource,width:this.state.width,height:this.state.height,options:this.props.visualization.options});return _react2.default.createElement("div",{className:"drag-wrapper"},r)}}]),t}(_react2.default.Component);VisualizationWrapper.displayName="VisualizationWrapper";var EmptyTrack=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props.className+" empty";return _react2.default.createElement("div",{className:e})}}]),t}(_react2.default.Component);module.exports=VisualizationWrapper;

},{"../lib/minid3":178,"./viz/d3utils":234,"react":175,"react-dom":23,"underscore":177}],192:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function parseHeader(e){return new _jbinary2.default(e,_formatsBbi2.default.TYPE_SET).read("Header")}function parseCirTree(e){return new _jbinary2.default(e,_formatsBbi2.default.TYPE_SET).read("CirTree")}function generateContigMap(e){var t=e.chromosomeTree.nodes.contents;if(!t)throw"Invalid chromosome tree";return _underscore2.default.object(t.map(function(e){var t=e.id,r=e.key;return[r.replace(/\0.*/,""),t]}))}function reverseContigMap(e){var t=[];return _underscore2.default.each(e,function(e,r){t[e]=r}),t}function extractFeaturesFromBlock(e,t,r,n){var a=r.offset-t.start,i=a+r.size,o=e.slice(a+(n?2:0),i),u=n?_pakoLibInflate2.default.inflateRaw(new Uint8Array(o)):o,s=new _jbinary2.default(u,_formatsBbi2.default.TYPE_SET);return s.read("BedBlock")}var _slicedToArray=function(){function e(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_q=require("q"),_q2=_interopRequireDefault(_q),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_pakoLibInflate=require("pako/lib/inflate"),_pakoLibInflate2=_interopRequireDefault(_pakoLibInflate),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_formatsBbi=require("./formats/bbi"),_formatsBbi2=_interopRequireDefault(_formatsBbi),ImmediateBigBed=function(){function e(t,r,n,a){_classCallCheck(this,e),this.remoteFile=t,this.header=r,this.cirTree=n,this.contigMap=a,this.chrIdToContig=reverseContigMap(a)}return _createClass(e,[{key:"getContigId",value:function(e){if(e in this.contigMap)return this.contigMap[e];var t="chr"+e;if(t in this.contigMap)return this.contigMap[t];throw"Invalid contig "+e}},{key:"getChrIdInterval",value:function(e){return new _ContigInterval2.default(this.getContigId(e.contig),e.start(),e.stop())}},{key:"getContigInterval",value:function(e){return new _ContigInterval2.default(this.chrIdToContig[e.contig],e.start(),e.stop())}},{key:"attachContigToBedRows",value:function(e){var t=this;return e.map(function(e){return{contig:t.chrIdToContig[e.chrId],start:e.start,stop:e.stop,rest:e.rest}})}},{key:"findOverlappingBlocks",value:function(e){var t=[],r=[[e.contig,e.start()],[e.contig,e.stop()]],n=function e(n){if(n.contents)n.contents.forEach(e);else{var a=[[n.startChromIx,n.startBase],[n.endChromIx,n.endBase]];_utils2.default.tupleRangeOverlaps(a,r)&&t.push(n)}};return n(this.cirTree.blocks),t}},{key:"fetchFeaturesByBlock",value:function(e){var t=this.findOverlappingBlocks(e);if(0===t.length)return _q2.default.when([]);var r=_Interval2.default.boundingInterval(t.map(function(e){return new _Interval2.default(+e.offset,e.offset+e.size)})),n=this.header.uncompressBufSize>0;return this.remoteFile.getBytes(r.start,r.length()).then(function(e){return t.map(function(t){var a=extractFeaturesFromBlock(e,r,t,n);if(t.startChromIx!=t.endChromIx)throw"Can't handle blocks which span chromosomes!";return{range:new _ContigInterval2.default(t.startChromIx,t.startBase,t.endBase),rows:a}})})}},{key:"fetchFeatures",value:function(e){var t=this;return this.fetchFeaturesByBlock(e).then(function(r){var n=_underscore2.default.flatten(r.map(function(e){return e.rows}));return n=n.filter(function(t){var r=new _ContigInterval2.default(t.chrId,t.start,t.stop-1);return e.intersects(r)}),t.attachContigToBedRows(n)})}},{key:"getFeaturesInRange",value:function(e){return this.fetchFeatures(this.getChrIdInterval(e))}},{key:"getFeatureBlocksOverlapping",value:function(e){var t=this,r=this.getChrIdInterval(e);return this.fetchFeaturesByBlock(r).then(function(e){return e.map(function(e){return{range:t.getContigInterval(e.range),rows:t.attachContigToBedRows(e.rows)}})})}}]),e}(),BigBed=function(){function e(t){var r=this;_classCallCheck(this,e),this.remoteFile=new _RemoteFile2.default(t),this.header=this.remoteFile.getBytes(0,65536).then(parseHeader),this.contigMap=this.header.then(generateContigMap),this.cirTree=this.header.then(function(e){var t=e.unzoomedIndexOffset,n=e.zoomHeaders[0],a=n?n.dataOffset-t:4096;return r.remoteFile.getBytes(t,a).then(parseCirTree)}),this.immediate=_q2.default.all([this.header,this.cirTree,this.contigMap]).then(function(e){var t=_slicedToArray(e,3),n=t[0],a=t[1],i=t[2],o=i;return new ImmediateBigBed(r.remoteFile,n,a,o)}),this.immediate.done()}return _createClass(e,[{key:"getFeaturesInRange",value:function(e,t,r){var n=new _ContigInterval2.default(e,t,r);return this.immediate.then(function(e){return e.getFeaturesInRange(n)})}},{key:"getFeatureBlocksOverlapping",value:function(e){return this.immediate.then(function(t){return t.getFeatureBlocksOverlapping(e)})}}]),e}();module.exports=BigBed;

},{"../ContigInterval":180,"../Interval":183,"../RemoteFile":186,"../utils":218,"./formats/bbi":201,"jbinary":8,"pako/lib/inflate":10,"q":22,"underscore":177}],193:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function strandFlagToString(e){return e?"-":"+"}function makeCigarString(e){return e.map(function(e){var t=e.op,r=e.length;return r+t}).join("")}function makeAsciiPhred(e){return 0===e.length?"":_underscore2.default.every(e,function(e){return 255==e})?"*":e.map(function(e){return String.fromCharCode(33+e)}).join("")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_jdataview=require("jdataview"),_jdataview2=_interopRequireDefault(_jdataview),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_formatsBamTypes=require("./formats/bamTypes"),_formatsBamTypes2=_interopRequireDefault(_formatsBamTypes),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),CIGAR_OPS=["M","I","D","N","S","H","P","=","X"],SEQUENCE_VALUES=["=","A","C","M","G","R","S","V","T","W","Y","H","K","D","B","N"],SamRead=function(){function e(t,r,n){_classCallCheck(this,e),this.buffer=t,this.offset=r;var i=this._getJDataView();this.refID=i.getInt32(0),this.ref=n,this.pos=i.getInt32(4),this.l_seq=i.getInt32(16),this.cigarOps=this._getCigarOps(),this.name=this._getName()}return _createClass(e,[{key:"toString",value:function(){var e=this.pos+this.l_seq;return this.ref+":"+(1+this.pos)+"-"+e}},{key:"_getJDataView",value:function(){var e=this.buffer;return new _jdataview2.default(e,0,e.byteLength,!0)}},{key:"getKey",value:function(){return this.offset.toString()}},{key:"_getName",value:function(){var e=this._getJDataView(),t=e.getUint8(8);return e.seek(32),e.getString(t-1)}},{key:"getFlag",value:function(){return this._getJDataView().getUint16(14)}},{key:"getInferredInsertSize",value:function(){return this._getJDataView().getUint16(28)}},{key:"getStrand",value:function(){return strandFlagToString(this.getFlag()&_formatsBamTypes2.default.Flags.READ_STRAND)}},{key:"getFull",value:function(){if(this._full)return this._full;var e=new _jbinary2.default(this.buffer,_formatsBamTypes2.default.TYPE_SET),t=e.read(_formatsBamTypes2.default.ThickAlignment,0);return this._full=t,t}},{key:"getInterval",value:function(){if(this._interval)return this._interval;var e=new _ContigInterval2.default(this.ref,this.pos,this.pos+this.getReferenceLength()-1);return e}},{key:"intersects",value:function(e){return e.intersects(this.getInterval())}},{key:"_getCigarOps",value:function(){for(var e=this._getJDataView(),t=e.getUint8(8),r=e.getUint16(12),n=32+t,i=new Array(r),a=0;a<r;a++){var u=e.getUint32(n+4*a);i[a]={op:CIGAR_OPS[15&u],length:u>>4}}return i}},{key:"getQualityScores",value:function(){var e=this._getJDataView(),t=e.getUint8(8),r=e.getUint16(12),n=e.getInt32(16),i=32+t+4*r+Math.ceil(n/2);return e.getBytes(n,i,!0,!0)}},{key:"getCigarString",value:function(){return makeCigarString(this.getFull().cigar)}},{key:"getQualPhred",value:function(){return makeAsciiPhred(this.getQualityScores())}},{key:"getSequence",value:function(){if(this._seq)return this._seq;for(var e=this._getJDataView(),t=e.getUint8(8),r=e.getUint16(12),n=e.getInt32(16),i=32+t+4*r,a=new Array(n),u=Math.ceil(n/2),s=0;s<u;s++){var g=e.getUint8(i+s);a[2*s]=SEQUENCE_VALUES[g>>4],2*s+1<n&&(a[2*s+1]=SEQUENCE_VALUES[15&g])}var l=a.join("");return this._seq=l,l}},{key:"getReferenceLength",value:function(){return e.referenceLengthFromOps(this.cigarOps)}},{key:"getMateProperties",value:function(){var e=this._getJDataView(),t=e.getUint16(14);if(!(t&_formatsBamTypes2.default.Flags.READ_PAIRED))return null;var r=e.getInt32(20),n=e.getInt32(24),i=strandFlagToString(t&_formatsBamTypes2.default.Flags.MATE_STRAND);return{ref:r==this.refID?this.ref:null,pos:n,strand:i}}},{key:"debugString",value:function(){var e=this.getFull();return"Name: "+this.name+"\nFLAG: "+this.getFlag()+"\nPosition: "+this.getInterval()+"\nCIGAR: "+this.getCigarString()+"\nSequence: "+e.seq+"\nQuality:  "+this.getQualPhred()+"\nTags: "+JSON.stringify(e.auxiliary,null,"  ")+"\n    "}}],[{key:"referenceLengthFromOps",value:function(e){var t=0;return e.forEach(function(e){var r=e.op,n=e.length;switch(r){case"M":case"D":case"N":case"=":case"X":t+=n}}),t}}]),e}();module.exports=SamRead;

},{"../ContigInterval":180,"./formats/bamTypes":200,"jbinary":8,"jdataview":9,"underscore":177}],194:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_q=require("q"),_q2=_interopRequireDefault(_q),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_RemoteRequest=require("../RemoteRequest"),Sequence=function(){function e(t,n){_classCallCheck(this,e),this.remoteRequest=t,this.contigList=n}return _createClass(e,[{key:"getContigNames",value:function(){return this.contigList.map(function(e){return e.name})}},{key:"getContigs",value:function(){return this.contigList}},{key:"getFeaturesInRange",value:function(e){var t=e.start(),n=e.stop();if(t>n)throw"Requested a range with start > stop ("+t+", "+n+")";return this.remoteRequest.get(e).then(function(e){return e.response})}}]),e}();module.exports=Sequence;

},{"../ContigInterval":180,"../RemoteRequest":187,"q":22}],195:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function parseSequenceRecord(e,r){var t=new _jbinary2.default(e,_formatsTwoBitTypes2.default.TYPE_SET),n=t.read("SequenceRecord"),o=t.tell()+8*n.maskBlockCount+4;return{numBases:n.dnaSize,unknownBlockStarts:n.nBlockStarts,unknownBlockLengths:n.nBlockSizes,numMaskBlocks:n.maskBlockCount,maskBlockStarts:[],maskBlockLengths:[],dnaOffsetFromHeader:o,offset:r}}function parseHeader(e){var r=new _jbinary2.default(e,_formatsTwoBitTypes2.default.TYPE_SET),t=r.read("Header");return{sequenceCount:t.sequenceCount,sequences:t.sequences}}function unpackDNA(e,r,t){var n=[];n.length=4*e.byteLength;for(var o=-r,a=0;a<e.byteLength;a++)for(var u=e.getUint8(a),i=6;i>=0;i-=2){var s=BASE_PAIRS[u>>i&3];r>=0&&(n[o]=s),o++}return n.length=t,n}function markUnknownDNA(e,r,t){for(var n=r+e.length-1,o=0;o<t.unknownBlockStarts.length;o++){var a=t.unknownBlockStarts[o],u=t.unknownBlockLengths[o],i=a+u-1,s=Math.max(a,r),c=Math.min(i,n);if(!(c<s))for(var f=s;f<=c;f++)e[f-r]="N"}return e}function IncompleteChunkError(e){this.name="IncompleteChunkError",this.message=e||""}function parseWithException(e){try{return e()}catch(e){throw"RangeError"==e.name||"INDEX_SIZE_ERR"==e.name?(console.log("Error name: "+e.name),new IncompleteChunkError(e)):e}}function retryRemoteGet(e,r,t,n,o){return e.getBytes(r,t).then(o).catch(function(a){if("IncompleteChunkError"==a.name){if(t>n)throw"Couldn't parse the header "+("from the first "+t+" bytes of the file. ")+"Corrupted 2bit file?";return retryRemoteGet(e,r,2*t,n,o)}throw a})}var _createClass=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),_q=require("q"),_q2=_interopRequireDefault(_q),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_formatsTwoBitTypes=require("./formats/twoBitTypes"),_formatsTwoBitTypes2=_interopRequireDefault(_formatsTwoBitTypes),BASE_PAIRS=["T","C","A","G"],FIRST_HEADER_CHUNKSIZE=16384,FIRST_SEQUENCE_CHUNKSIZE=4095,MAX_CHUNKSIZE=1048576;IncompleteChunkError.prototype=Error.prototype;var TwoBit=function(){function e(r){_classCallCheck(this,e),this.remoteFile=r;var t=_q2.default.defer();this.header=t.promise,retryRemoteGet(this.remoteFile,0,FIRST_HEADER_CHUNKSIZE,MAX_CHUNKSIZE,function(e){var r=parseWithException(function(){return parseHeader(e)});t.resolve(r)}).done()}return _createClass(e,[{key:"getFeaturesInRange",value:function(e,r,t){var n=this;if(r>t)throw"Requested a 2bit range with start > stop ("+r+", "+t+")";return this._getSequenceHeader(e).then(function(e){var o=e.offset+e.dnaOffsetFromHeader,a=Math.floor(o+r/4),u=Math.ceil((t-r+1)/4)+1;return n.remoteFile.getBytes(a,u).then(function(n){var o=new DataView(n);return markUnknownDNA(unpackDNA(o,r%4,t-r+1),r,e).join("")})})}},{key:"getContigList",value:function(){return this.header.then(function(e){return e.sequences.map(function(e){return e.name})})}},{key:"_getSequenceHeader",value:function(e){var r=this;return this.header.then(function(t){var n=_underscore2.default.findWhere(t.sequences,{name:e})||_underscore2.default.findWhere(t.sequences,{name:"chr"+e});if(null===n||void 0===n)throw"Invalid contig: "+e;var o=n;return retryRemoteGet(r.remoteFile,o.offset,FIRST_SEQUENCE_CHUNKSIZE,MAX_CHUNKSIZE,function(e){return parseWithException(function(){return parseSequenceRecord(e,o.offset)})})})}}]),e}();module.exports=TwoBit;

},{"./formats/twoBitTypes":203,"jbinary":8,"q":22,"underscore":177}],196:[function(require,module,exports){
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var f=0;f<e.length;f++){var s=e[f];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,f,s){return f&&t(e.prototype,f),s&&t(e,s),e}}(),VirtualOffset=function(){function t(e,f){_classCallCheck(this,t),this.coffset=e,this.uoffset=f}return _createClass(t,[{key:"toString",value:function(){return this.coffset+":"+this.uoffset}},{key:"isLessThan",value:function(t){return this.coffset<t.coffset||this.coffset==t.coffset&&this.uoffset<t.uoffset}},{key:"isLessThanOrEqual",value:function(t){return this.coffset<=t.coffset||this.coffset==t.coffset&&this.uoffset<=t.uoffset}},{key:"isEqual",value:function(t){return this.coffset==t.coffset&&this.uoffset==t.uoffset}},{key:"compareTo",value:function(t){return this.coffset-t.coffset||this.uoffset-t.uoffset}},{key:"clone",value:function(){return new t(this.coffset,this.uoffset)}}],[{key:"fromBlob",value:function(e,f){f=f||0;var s=e[f]+256*e[f+1],o=e[f+2]+256*e[f+3]+65536*e[f+4]+16777216*e[f+5]+4294967296*e[f+6]+1099511627776*e[f+7];return new t(o,s)}}]),t}();module.exports=VirtualOffset;

},{}],197:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function computeIndexChunks(e){var n=65536,t=new _jdataview2.default(e,0,e.byteLength,!0),r=1/0,i=[];t.getInt32();for(var u=t.getInt32(),a=0;a<u;a++){i.push(t.tell());for(var s=t.getInt32(),o=0;o<s;o++){t.getUint32();var h=t.getInt32();t.skip(16*h)}var l=t.getInt32();if(l){var f=_VirtualOffset2.default.fromBlob(t.getBytes(8),0),c=f.coffset+(f.uoffset?n:0);r=c?Math.min(c,r):n,t.skip(8*(l-1))}}return i.push(t.tell()),{chunks:_underscore2.default.zip(_underscore2.default.initial(i),_underscore2.default.rest(i)),minBlockIndex:r}}function readChunks(e){return new _jbinary2.default(e,_formatsBamTypes2.default.TYPE_SET).read("ChunksArray")}function readIntervals(e){for(var n=new Array(Math.floor(e.length/8)),t=0;t<e.length-7;t+=8)n[t>>3]=_VirtualOffset2.default.fromBlob(e,t);return n}function doChunksOverlap(e,n){return e.chunk_beg.isLessThanOrEqual(n.chunk_end)&&n.chunk_beg.isLessThanOrEqual(e.chunk_end)}function areChunksAdjacent(e,n){return e.chunk_beg.isEqual(n.chunk_end)||e.chunk_end.isEqual(n.chunk_beg)}function optimizeChunkList(e,n){e.sort(function(e,n){var t=e.chunk_beg.compareTo(n.chunk_beg);return 0===t&&(t=e.chunk_end.compareTo(n.chunk_end)),t});var t=[];return e.forEach(function(e){if(!e.chunk_end.isLessThan(n)){if(0===t.length)return void t.push(e);var r=t[t.length-1];doChunksOverlap(r,e)||areChunksAdjacent(r,e)?r.chunk_end.isLessThan(e.chunk_end)&&(r.chunk_end=e.chunk_end):t.push(e)}}),t}function reg2bins(e,n){var t,r=[];for(--n,r.push(0),t=1+(e>>26);t<=1+(n>>26);++t)r.push(t);for(t=9+(e>>23);t<=9+(n>>23);++t)r.push(t);for(t=73+(e>>20);t<=73+(n>>20);++t)r.push(t);for(t=585+(e>>17);t<=585+(n>>17);++t)r.push(t);for(t=4681+(e>>14);t<=4681+(n>>14);++t)r.push(t);return r}var _slicedToArray=function(){function e(e,n){var t=[],r=!0,i=!1,u=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(e){i=!0,u=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw u}}return t}return function(n,t){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return e(n,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(n,t,r){return t&&e(n.prototype,t),r&&e(n,r),n}}(),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_jdataview=require("jdataview"),_jdataview2=_interopRequireDefault(_jdataview),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_formatsBamTypes=require("./formats/bamTypes"),_formatsBamTypes2=_interopRequireDefault(_formatsBamTypes),_VirtualOffset=require("./VirtualOffset"),_VirtualOffset2=_interopRequireDefault(_VirtualOffset),ImmediateBaiFile=function(){function e(n,t,r){if(_classCallCheck(this,e),this.buffer=n,this.remoteFile=t,n)this.indexChunks=computeIndexChunks(n);else{if(!r)throw"Without index chunks, the entire BAI buffer must be loaded";this.indexChunks=r}this.indexCache=new Array(this.indexChunks.chunks.length),this.intervalsCache=new Array(this.indexChunks.chunks.length)}return _createClass(e,[{key:"getChunksForInterval",value:function(e){var n=this;if(e.contig<0||e.contig>this.indexChunks.chunks.length)return _q2.default.reject("Invalid contig "+e.contig);var t=reg2bins(e.start(),e.stop()+1);return this.indexForContig(e.contig).then(function(r){var i=_underscore2.default.chain(r.bins).filter(function(e){return t.indexOf(e.bin)>=0}).map(function(e){return readChunks(e.chunks)}).flatten().value(),u=n.getIntervals(r.intervals,e.contig),a=Math.max(0,Math.floor(e.start()/16384)),s=u[a];return i=optimizeChunkList(i,s)})}},{key:"indexForContig",value:function(e){var n=this.indexCache[e];if(n)return n;var t=_slicedToArray(this.indexChunks.chunks[e],2),r=t[0],i=t[1];return this.indexCache[e]=this.getSlice(r,i).then(function(e){var n=new _jbinary2.default(e,_formatsBamTypes2.default.TYPE_SET);return n.read("BaiIndex")}),this.indexCache[e]}},{key:"getSlice",value:function(e,n){return this.buffer?_q2.default.when(this.buffer.slice(e,n)):this.remoteFile.getBytes(e,n-e+1)}},{key:"getIntervals",value:function(e,n){var t=this.intervalsCache[n];return t?t:(t=readIntervals(e),this.intervalsCache[n]=t,t)}}]),e}(),BaiFile=function(){function e(n,t){_classCallCheck(this,e),this.remoteFile=n,t?this.immediate=_q2.default.when(new ImmediateBaiFile(null,n,t)):this.immediate=n.getAll().then(function(e){return new ImmediateBaiFile(e,n,t)}),this.immediate.done()}return _createClass(e,[{key:"getChunksForInterval",value:function(e){return this.immediate.then(function(n){return n.getChunksForInterval(e)})}},{key:"getHeaderSize",value:function(){return this.immediate.then(function(e){return e.indexChunks.minBlockIndex})}}]),e}();module.exports=BaiFile;

},{"./VirtualOffset":196,"./formats/bamTypes":200,"jbinary":8,"jdataview":9,"q":22,"underscore":177}],198:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function isAlignmentInRange(e,t,n){var r=new _ContigInterval2.default(e.refID,e.pos,e.pos+e.l_seq-1);return n?t.containsInterval(r):r.intersects(t)}function readAlignment(e,t,n,r){var a=e.getInt32(t);if(t+=4,t+a>e.byteLength)return null;var i=e.buffer.slice(t,t+a),u=new _SamRead2.default(i,n.clone(),r);return{read:u,readLength:4+a}}function readAlignmentsToEnd(e,t,n,r,a,i,u){var f=new _jdataview2.default(e,0,e.byteLength,!0),l=!1,s=0;a=a.clone();var o=0;try{for(;s<e.byteLength;){var d=readAlignment(f,s,a,t);if(!d)break;var c=d.read,h=d.readLength;s+=h,isAlignmentInRange(c,n,r)&&u.push(c),a.uoffset+=h;var _=i[o].buffer.byteLength;a.uoffset>=_&&(a.uoffset-=_,a.coffset+=i[o].compressedLength,o++);var g=new _ContigInterval2.default(c.refID,c.pos,c.pos+1);if(g.contig>n.contig||g.contig==n.contig&&g.start()>n.stop()){l=!0;break}}}catch(e){if(!(e instanceof RangeError))throw e}return{shouldAbort:l,nextOffset:a}}function fetchAlignments(e,t,n,r,a){function i(a){if(0===a.length)return void l.resolve(f);var s=a[0],o=s.chunk_beg.coffset,d=s.chunk_end.coffset,c=Math.min(kMaxFetch,d+65536-o);e.getBytes(o,c).then(function(c){u++,l.notify({numRequests:u});var h={filename:e.url,initialOffset:o},_=_utils2.default.inflateConcatenatedGzip(c,d-o,h),g=_[_.length-1],m=o+g.offset-1,v=null;_.length>1&&m<d&&(v={chunk_beg:new _VirtualOffset2.default(m+1,0),chunk_end:s.chunk_end});var p=_.map(function(e){return e.buffer});p[0]=p[0].slice(s.chunk_beg.uoffset);var b=_utils2.default.concatArrayBuffers(p);if(b.byteLength>0){var y=readAlignmentsToEnd(b,t,n,r,s.chunk_beg,_,f),q=y.shouldAbort,w=y.nextOffset;if(q)return void l.resolve(f);v&&(v.chunk_beg=w)}else v=null;i((v?[v]:[]).concat(_underscore2.default.rest(a)))})}var u=0,f=[],l=_q2.default.defer();return i(a),l.promise}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_jdataview=require("jdataview"),_jdataview2=_interopRequireDefault(_jdataview),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_formatsBamTypes=require("./formats/bamTypes"),_formatsBamTypes2=_interopRequireDefault(_formatsBamTypes),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_bai=require("./bai"),_bai2=_interopRequireDefault(_bai),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_VirtualOffset=require("./VirtualOffset"),_VirtualOffset2=_interopRequireDefault(_VirtualOffset),_SamRead=require("./SamRead"),_SamRead2=_interopRequireDefault(_SamRead),kMaxFetch=131072,Bam=function(){function e(t,n,r){var a=this;_classCallCheck(this,e),this.remoteFile=t,this.index=n?new _bai2.default(n,r):null,this.hasIndexChunks=!!r;var i=this.index?this.index.getHeaderSize():_q2.default.when(131070);this.header=i.then(function(e){var t=_q2.default.defer();return _q2.default.when().then(function(){t.notify({status:"Fetching BAM header"})}),_utils2.default.pipePromise(t,a.remoteFile.getBytes(0,e).then(function(e){var t=_utils2.default.inflateGzip(e),n=new _jbinary2.default(t,_formatsBamTypes2.default.TYPE_SET);return n.read("BamHeader")})),t.promise}),this.header.done()}return _createClass(e,[{key:"readAll",value:function(){return this.remoteFile.getAll().then(function(e){var t=_utils2.default.inflateGzip(e),n=new _jbinary2.default(t,_formatsBamTypes2.default.TYPE_SET),r=n.read("BamFile"),a=new _VirtualOffset2.default(0,0),i=function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength-1)};return r.alignments=r.alignments.map(function(e){var t=new _SamRead2.default(i(e.contents),a,"");return t.refID!=-1&&(t.ref=r.header.references[t.refID].name),t}),r})}},{key:"readAtOffset",value:function(e){var t=this;return this.remoteFile.getBytes(e.coffset,kMaxFetch).then(function(n){var r=_utils2.default.inflateGzip(n),a=new _jdataview2.default(r,0,r.byteLength,!0),i=readAlignment(a,e.uoffset,e,"");if(i){var u=i.read;return t.header.then(function(e){return u.ref=e.references[u.refID].name,u})}throw"Unable to read alignment at "+e+" in "+t.remoteFile.url})}},{key:"getContigIndex",value:function(e){return this.header.then(function(t){for(var n=0;n<t.references.length;n++){var r=t.references[n].name;if(r==e||r=="chr"+e||"chr"+r==e)return{idx:n,name:r}}throw"Invalid contig name: "+e})}},{key:"getAlignmentsInRange",value:function(e,t){var n=this,r=t||!1;if(!this.index)throw"Range searches are only supported on BAMs with BAI indices.";var a=this.index;return this.getContigIndex(e.contig).then(function(t){var i=t.idx,u=t.name,f=_q2.default.defer();_q2.default.when().then(function(){f.notify({status:"Fetching BAM index"})});var l=new _ContigInterval2.default(i,e.start(),e.stop());return _utils2.default.pipePromise(f,a.getChunksForInterval(l).then(function(e){return fetchAlignments(n.remoteFile,u,l,r,e)})),f.promise})}}]),e}();module.exports=Bam;

},{"../ContigInterval":180,"../utils":218,"./SamRead":193,"./VirtualOffset":196,"./bai":197,"./formats/bamTypes":200,"jbinary":8,"jdataview":9,"q":22,"underscore":177}],199:[function(require,module,exports){
"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function splitCodingExons(t,e){return _underscore2.default.flatten(t.map(function(t){if(t.containsInterval(e))return[new CodingInterval(t.start,e.start-1,!1),new CodingInterval(e.start,e.stop,!0),new CodingInterval(e.stop+1,t.stop,!1)].filter(function(t){return t.start<=t.stop});var n=e.contains(t.start),r=e.contains(t.stop);return n==r?[new CodingInterval(t.start,t.stop,n)]:n?[new CodingInterval(t.start,e.stop,!0),new CodingInterval(e.stop+1,t.stop,!1)]:[new CodingInterval(t.start,e.start-1,!1),new CodingInterval(e.start,t.stop,!0)]}))}var _get=function(t,e,n){for(var r=!0;r;){var o=t,i=e,a=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(a)}var u=Object.getPrototypeOf(o);if(null===u)return;t=u,e=i,n=a,r=!0,s=u=void 0}},_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_Interval2=require("../Interval"),_Interval3=_interopRequireDefault(_Interval2),CodingInterval=function(t){function e(t,n,r){_classCallCheck(this,e),_get(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t,n),this.isCoding=r}return _inherits(e,t),e}(_Interval3.default);module.exports={splitCodingExons:splitCodingExons,CodingInterval:CodingInterval};

},{"../Interval":183,"underscore":177}],200:[function(require,module,exports){
"use strict";function _interopRequireDefault(n){return n&&n.__esModule?n:{default:n}}var _jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_VirtualOffset=require("../VirtualOffset"),_VirtualOffset2=_interopRequireDefault(_VirtualOffset),_helpers=require("./helpers"),SEQUENCE_VALUES=["=","A","C","M","G","R","S","V","T","W","Y","H","K","D","B","N"],CIGAR_OPS=["M","I","D","N","S","H","P","=","X"],ThinAlignment={refID:"int32",pos:"int32",l_read_name:"uint8",MAPQ:"uint8",bin:"uint16",n_cigar_op:"uint16",FLAG:"uint16",l_seq:"int32",next_refID:"int32",next_pos:"int32",tlen:"int32"},Flags={READ_PAIRED:1,PROPER_PAIR:2,READ_UNMAPPED:4,MATE_UNMAPPED:8,READ_STRAND:16,MATE_STRAND:32,FIRST_OF_PAIR:64,SECOND_OF_PAIR:128,NOT_PRIMARY_ALIGNMENT:256,READ_FAILS_VENDOR_QUALITY_CHECK:512,DUPLICATE_READ:1024,SUPPLEMENTARY_ALIGNMENT:2048},ThickAlignment=_underscore2.default.extend({},ThinAlignment,{read_name:[_helpers.nullString,"l_read_name"],cigar:["array","CigarOp","n_cigar_op"],seq:["FourBitSequence","l_seq"],qual:["array","uint8","l_seq"],auxiliary:["array",{tag:["string",2],val_type:"char",value:["if",function(n){return"B"==n.val_type},{val_type:"char",num_values:"int32",values:["array","AuxiliaryValue","num_values"]},"AuxiliaryValue"]}]}),TYPE_SET={"jBinary.littleEndian":!0,BamHeader:{_magic:["const",["string",4],"BAM",!0],l_text:"int32",text:["string","l_text"],n_ref:"int32",references:["array",{l_name:"int32",name:[_helpers.nullString,"l_name"],l_ref:"int32"},"n_ref"]},BamAlignment:{block_size:"int32",contents:["blob","block_size"]},AuxiliaryValue:["if",function(n){return"A"==n.val_type},"char",["if",function(n){return"c"==n.val_type},"int8",["if",function(n){return"C"==n.val_type},"uint8",["if",function(n){return"s"==n.val_type},"int16",["if",function(n){return"S"==n.val_type},"uint16",["if",function(n){return"i"==n.val_type},"int32",["if",function(n){return"I"==n.val_type},"uint32",["if",function(n){return"f"==n.val_type},"float32",["if",function(n){return"Z"==n.val_type},"string0",["skip",0]]]]]]]]]],CigarOp:_jbinary2.default.Template({baseType:"uint32",read:function(n){var e=this.baseRead();return{length:e>>4,op:CIGAR_OPS[15&e]}}}),FourBitSequence:_jbinary2.default.Template({setParams:function(n){this.lengthField=n;var e=function(e){return Math.floor((+e[n]+1)/2)};this.baseType=["array","uint8",e]},read:function(n){var e=+n[this.lengthField],t=this.baseRead();return t.map(function(n,t){return SEQUENCE_VALUES[n>>4]+(2*t+1<e?SEQUENCE_VALUES[15&n]:"")}).join("")}}),BamFile:{header:"BamHeader",alignments:["array","BamAlignment"]},VirtualOffset:_jbinary2.default.Template({baseType:"uint64",read:function(){var n=this.baseRead();return new _VirtualOffset2.default(65536*n.hi+(n.lo>>>16),65535&n.lo)}}),ChunksArray:["array",{chunk_beg:"VirtualOffset",chunk_end:"VirtualOffset"}],IntervalsArray:["array","VirtualOffset"],BaiIndex:{n_bin:"int32",bins:["array",{bin:"uint32",n_chunk:"int32",chunks:["blob",function(n){return 16*n.n_chunk}]},"n_bin"],n_intv:"int32",intervals:["blob",function(n){return 8*n.n_intv}]},BaiFile:{magic:["const",["string",4],"BAI"],n_ref:"int32",indices:["array","BaiIndex","n_ref"],n_no_coor:_helpers.uint64native}};module.exports={TYPE_SET:TYPE_SET,ThinAlignment:ThinAlignment,ThickAlignment:ThickAlignment,Flags:Flags};

},{"../VirtualOffset":196,"./helpers":202,"jbinary":8,"underscore":177}],201:[function(require,module,exports){
"use strict";var _helpers=require("./helpers"),TYPE_SET={"jBinary.littleEndian":!0,Header:{_magic:["const","uint32",2273964779,!0],version:"uint16",zoomLevels:"uint16",chromosomeTreeOffset:"uint64",unzoomedDataOffset:"uint64",unzoomedIndexOffset:"uint64",fieldCount:"uint16",definedFieldCount:"uint16",autoSqlOffset:"uint64",totalSummaryOffset:"uint64",uncompressBufSize:"uint32",extensionOffset:"uint64",zoomHeaders:["array","ZoomHeader","zoomLevels"],totalSummary:(0,_helpers.typeAtOffset)("TotalSummary","totalSummaryOffset"),chromosomeTree:(0,_helpers.typeAtOffset)("BPlusTree","chromosomeTreeOffset")},TotalSummary:{basesCovered:"uint64",minVal:"float64",maxVal:"float64",sumData:"float64",sumSquared:"float64"},ZoomHeader:{reductionLevel:"uint32",_reserved:"uint32",dataOffset:"uint64",indexOffset:"uint64"},BPlusTree:{magic:["const","uint32",2026540177,!0],blockSize:"uint32",keySize:"uint32",valSize:"uint32",itemCount:"uint64",_reserved2:["skip",4],_reserved3:["skip",4],nodes:"BPlusTreeNode"},BPlusTreeNode:{isLeaf:"uint8",_reserved:"uint8",count:"uint16",contents:["array",["if","isLeaf",{key:["string","keySize"],id:"uint32",size:"uint32"},{key:["string","keySize"],offset:"uint64"}],"count"]},CirTree:{_magic:["const","uint32",610839776,!0],blockSize:"uint32",itemCount:"uint64",startChromIx:"uint32",startBase:"uint32",endChromIx:"uint32",endBase:"uint32",fileSize:"uint64",itemsPerSlot:"uint32",_reserved:["skip",4],blocks:"CirNode"},CirNode:{isLeaf:"uint8",_reserved:"uint8",count:"uint16",contents:["array",["if","isLeaf","LeafData","NonLeafData"],"count"]},LeafData:{startChromIx:"uint32",startBase:"uint32",endChromIx:"uint32",endBase:"uint32",offset:"uint64",size:"uint64"},NonLeafData:{startChromIx:"uint32",startBase:"uint32",endChromIx:"uint32",endBase:"uint32",offset:"uint64"},BedEntry:{chrId:"uint32",start:"uint32",stop:"uint32",rest:"string0"},BedBlock:["array","BedEntry"]};module.exports={TYPE_SET:TYPE_SET};

},{"./helpers":202}],202:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function typeAtOffset(e,t){return _jbinary2.default.Template({baseType:e,read:function(e){return 0===+e[t]?null:this.binary.read(this.baseType,+e[t])}})}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),_jbinary=require("jbinary"),_jbinary2=_interopRequireDefault(_jbinary),sizedBlock=_jbinary2.default.Type({params:["itemType","lengthField"],resolve:function(e){this.itemType=e(this.itemType)},read:function(e){var t=this.binary.tell(),i=+e[this.lengthField];return this.binary.skip(i),this.binary.slice(t,t+i).read(this.itemType)}}),nullString=_jbinary2.default.Template({setParams:function(e){this.baseType=["binary",e]},read:function(){return this.baseRead().read("string0")}}),uint64native=_jbinary2.default.Template({baseType:"uint64",read:function(){var e=this.baseRead(),t=+e;if(t<0||1+t==t)throw new RangeError("Number out of precise floating point range: "+e);return+e}}),LazyArray=function(){function e(t,i,r){_classCallCheck(this,e),this.bytesPerItem=i,this.jb=t,this.itemType=r,this.length=this.jb.view.byteLength/this.bytesPerItem}return _createClass(e,[{key:"get",value:function(e){return this.jb.seek(e*this.bytesPerItem),this.jb.read(this.itemType)}},{key:"getAll",value:function(){return this.jb.seek(0),this.jb.read(["array",this.itemType,this.length])}}]),e}(),lazyArray=_jbinary2.default.Type({params:["itemType","bytesPerItem","numItems"],read:function(){var e=this.toValue(this.numItems),t=this.toValue(this.bytesPerItem);if(void 0===e||void 0===t)throw"bytesPerItem and numItems must be set for lazyArray";var i=this.binary.tell(),r=e*t,n=this.binary.slice(i,i+r);return this.binary.skip(r),new LazyArray(n,t,this.itemType)}});module.exports={typeAtOffset:typeAtOffset,sizedBlock:sizedBlock,nullString:nullString,uint64native:uint64native,lazyArray:lazyArray};

},{"jbinary":8}],203:[function(require,module,exports){
"use strict";var TYPE_SET={"jBinary.littleEndian":!0,Header:{magic:["const","uint32",440477507,!0],version:["const","uint32",0,!0],sequenceCount:"uint32",reserved:"uint32",sequences:["array","SequenceHeader","sequenceCount"]},SequenceHeader:{nameSize:"uint8",name:["string","nameSize"],offset:"uint32"},SequenceRecord:{dnaSize:"uint32",nBlockCount:"uint32",nBlockStarts:["array","uint32","nBlockCount"],nBlockSizes:["array","uint32","nBlockCount"],maskBlockCount:"uint32"}};module.exports={TYPE_SET:TYPE_SET};

},{}],204:[function(require,module,exports){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function extractLocusLine(e){var t=e.indexOf("\t"),n=e.indexOf("\t",t+1);return{contig:e.slice(0,t),position:Number(e.slice(t+1,n)),line:e}}function extractVariant(e){var t=e.split("\t"),n=Number(t[1])+t[3].length;return 5>=t.length&&(n=t[5]),{contig:t[0],position:Number(t[1]),ref:t[3],alt:t[4],vcfLine:e,end:Number(n)}}function compareLocusLine(e,t){return e.contig<t.contig?-1:e.contig>t.contig?1:e.position-t.position}function lowestIndex(e,t,n){for(var i=0,r=e.length;i<r;){var o=Math.floor((i+r)/2),c=n(e[o],t);c<0?i=o+1:r=o}return i}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),ImmediateVcfFile=function(){function e(t){_classCallCheck(this,e),this.lines=t,this.contigMap=this.extractContigs()}return _createClass(e,[{key:"extractContigs",value:function(){for(var e=[],t="",n=0;n<this.lines.length;n++){var i=this.lines[n];i.contig!=t&&e.push(i.contig)}var r={};return e.forEach(function(e){"chr"==e.slice(0,3)?r[e.slice(4)]=e:r["chr"+e]=e,r[e]=e}),r}},{key:"getFeaturesInRange",value:function(e){var t=this.lines,n=this.contigMap[e.contig];if(!n)return[];for(var i={contig:n,position:e.start(),line:""},r={contig:n,position:e.stop(),line:""},o=lowestIndex(t,i,compareLocusLine),c=[],a=o;a<t.length&&!(compareLocusLine(t[a],r)>0);a++)c.push(t[a]);return c.map(function(e){return extractVariant(e.line)})}}]),e}(),VcfFile=function(){function e(t){_classCallCheck(this,e),this.remoteFile=t,this.immediate=this.remoteFile.getAllString().then(function(e){var t=e.split("\n").filter(function(e){return e.length&&"#"!=e[0]}).map(extractLocusLine);return t}).then(function(e){return e.sort(compareLocusLine),new ImmediateVcfFile(e)}),this.immediate.done()}return _createClass(e,[{key:"getFeaturesInRange",value:function(e){return this.immediate.then(function(t){return t.getFeaturesInRange(e)})}}]),e}();module.exports=VcfFile;

},{}],205:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function findReference(e){return _underscore2.default.find(e,function(e){return!!e.track.isReference})}function create(e,r){var a="string"==typeof e?document.getElementById(e):e;if(!a)throw new Error("Attempted to create pileup with non-existent element "+e);var t=r.tracks.map(function(e){var r=e.data?e.data:e.viz.component.defaultSource;if(!r)throw new Error("Track '"+e.viz.component.displayName+"' doesn't have a default data source; you must specify one when initializing it.");return{visualization:e.viz,source:r,track:e}}),u=findReference(t);if(!u)throw new Error("You must include at least one track with type=reference");var o=_reactDom2.default.render(_react2.default.createElement(_Root2.default,{referenceSource:u.source,tracks:t,initialRange:r.range}),a);return{setRange:function(e){if(null===o)throw"Cannot call setRange on a destroyed pileup";o.handleRangeChange(e)},getRange:function(){if(null===o)throw"Cannot call setRange on a destroyed pileup";return _underscore2.default.clone(o.state.range)},destroy:function(){if(!t)throw"Cannot call destroy() twice on the same pileup";t.forEach(function(e){var r=e.source;r.off()}),_reactDom2.default.unmountComponentAtNode(a),o=null,u=null,t=null}}}function makeVizObject(e){return function(r){return r=_underscore2.default.extend({},e.defaultOptions,r),{component:e,options:r}}}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_sourcesTwoBitDataSource=require("./sources/TwoBitDataSource"),_sourcesTwoBitDataSource2=_interopRequireDefault(_sourcesTwoBitDataSource),_sourcesReferenceDataSource=require("./sources/ReferenceDataSource"),_sourcesReferenceDataSource2=_interopRequireDefault(_sourcesReferenceDataSource),_sourcesBigBedDataSource=require("./sources/BigBedDataSource"),_sourcesBigBedDataSource2=_interopRequireDefault(_sourcesBigBedDataSource),_sourcesVcfDataSource=require("./sources/VcfDataSource"),_sourcesVcfDataSource2=_interopRequireDefault(_sourcesVcfDataSource),_sourcesVariantDataSource=require("./sources/VariantDataSource"),_sourcesVariantDataSource2=_interopRequireDefault(_sourcesVariantDataSource),_sourcesBamDataSource=require("./sources/BamDataSource"),_sourcesBamDataSource2=_interopRequireDefault(_sourcesBamDataSource),_sourcesGA4GHDataSource=require("./sources/GA4GHDataSource"),_sourcesGA4GHDataSource2=_interopRequireDefault(_sourcesGA4GHDataSource),_sourcesCoverageDataSource=require("./sources/CoverageDataSource"),_sourcesCoverageDataSource2=_interopRequireDefault(_sourcesCoverageDataSource),_sourcesEmptySource=require("./sources/EmptySource"),_sourcesEmptySource2=_interopRequireDefault(_sourcesEmptySource),_sourcesFeatureDataSource=require("./sources/FeatureDataSource"),_sourcesFeatureDataSource2=_interopRequireDefault(_sourcesFeatureDataSource),_vizPileupCoverageTrack=require("./viz/PileupCoverageTrack"),_vizPileupCoverageTrack2=_interopRequireDefault(_vizPileupCoverageTrack),_vizCoverageTrack=require("./viz/CoverageTrack"),_vizCoverageTrack2=_interopRequireDefault(_vizCoverageTrack),_vizGenomeTrack=require("./viz/GenomeTrack"),_vizGenomeTrack2=_interopRequireDefault(_vizGenomeTrack),_vizGeneTrack=require("./viz/GeneTrack"),_vizGeneTrack2=_interopRequireDefault(_vizGeneTrack),_vizFeatureTrack=require("./viz/FeatureTrack"),_vizFeatureTrack2=_interopRequireDefault(_vizFeatureTrack),_vizLocationTrack=require("./viz/LocationTrack"),_vizLocationTrack2=_interopRequireDefault(_vizLocationTrack),_vizPileupTrack=require("./viz/PileupTrack"),_vizPileupTrack2=_interopRequireDefault(_vizPileupTrack),_vizScaleTrack=require("./viz/ScaleTrack"),_vizScaleTrack2=_interopRequireDefault(_vizScaleTrack),_vizVariantTrack=require("./viz/VariantTrack"),_vizVariantTrack2=_interopRequireDefault(_vizVariantTrack),_vizGenotypeTrack=require("./viz/GenotypeTrack"),_vizGenotypeTrack2=_interopRequireDefault(_vizGenotypeTrack),_Root=require("./Root"),_Root2=_interopRequireDefault(_Root),pileup={create:create,formats:{bam:_sourcesBamDataSource2.default.create,ga4gh:_sourcesGA4GHDataSource2.default.create,vcf:_sourcesVcfDataSource2.default.create,variants:_sourcesVariantDataSource2.default.create,features:_sourcesFeatureDataSource2.default.create,twoBit:_sourcesTwoBitDataSource2.default.create,reference:_sourcesReferenceDataSource2.default.create,bigBed:_sourcesBigBedDataSource2.default.create,coverage:_sourcesCoverageDataSource2.default.create,empty:_sourcesEmptySource2.default.create},viz:{pileupcoverage:makeVizObject(_vizPileupCoverageTrack2.default),coverage:makeVizObject(_vizCoverageTrack2.default),genome:makeVizObject(_vizGenomeTrack2.default),genes:makeVizObject(_vizGeneTrack2.default),features:makeVizObject(_vizFeatureTrack2.default),location:makeVizObject(_vizLocationTrack2.default),scale:makeVizObject(_vizScaleTrack2.default),variants:makeVizObject(_vizVariantTrack2.default),genotypes:makeVizObject(_vizGenotypeTrack2.default),pileup:makeVizObject(_vizPileupTrack2.default)},version:"0.6.8"};module.exports=pileup,"undefined"!=typeof window&&(window.pileup=pileup);

},{"./Root":189,"./sources/BamDataSource":207,"./sources/BigBedDataSource":208,"./sources/CoverageDataSource":209,"./sources/EmptySource":210,"./sources/FeatureDataSource":211,"./sources/GA4GHDataSource":212,"./sources/ReferenceDataSource":213,"./sources/TwoBitDataSource":214,"./sources/VariantDataSource":215,"./sources/VcfDataSource":216,"./viz/CoverageTrack":220,"./viz/FeatureTrack":222,"./viz/GeneTrack":223,"./viz/GenomeTrack":224,"./viz/GenotypeTrack":225,"./viz/LocationTrack":226,"./viz/PileupCoverageTrack":228,"./viz/PileupTrack":229,"./viz/ScaleTrack":230,"./viz/VariantTrack":232,"react":175,"react-dom":23,"underscore":177}],206:[function(require,module,exports){
"use strict";function linear(){var n=!1,t=[0,1],r=[0,1],i=function(i){return n&&(i=Math.max(Math.min(i,t[1]),t[0])),(i-t[0])/(t[1]-t[0])*(r[1]-r[0])+r[0]};return i.clamp=function(t){return void 0===t?n:(n=t,this)},i.domain=function(n){return void 0===n?t:(t=n,this)},i.range=function(n){return void 0===n?r:(r=n,this)},i.invert=function(i){if(n)throw"Can't invert a clamped linear scale.";return(i-r[0])/(r[1]-r[0])*(t[1]-t[0])+t[0]},i.nice=function(){var n=10,r=t,i=Math.abs(r[1]-r[0]),o=Math.pow(10,Math.floor(Math.log(i/n)/Math.LN10)),a=n/i*o;a<=.15?o*=10:a<=.35?o*=5:a<=.75&&(o*=2);var e,u={floor:function(n){return Math.floor(n/o)*o},ceil:function(n){return Math.ceil(n/o)*o}},c=0,l=1,f=t[c],h=t[l];return h<f&&(e=c,c=l,l=e,e=f,f=h,h=e),t[c]=u.floor(f),t[l]=u.ceil(h),this},i}module.exports={linear:linear};

},{}],207:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function expandRange(e){var n=function(e){return e-e%BASE_PAIRS_PER_FETCH},t=Math.max(1,n(e.start())),r=n(e.stop()+BASE_PAIRS_PER_FETCH-1);return new _ContigInterval2.default(e.contig,t,r)}function createFromBamFile(e){function n(e){var n=e.getKey();i[n]||(i[n]=e)}function t(e){e.references.forEach(function(e){var n=e.name;u[n]=n,u["chr"+n]=n,"chr"==n.slice(0,3)&&(u[n.slice(3)]=n)})}function r(r){var a=_underscore2.default.isEmpty(u)?e.header.then(t):_q2.default.when();return _q2.default.when().then(function(){a.isPending()&&!e.hasIndexChunks&&f.trigger("networkprogress",{status:"Fetching BAM index -- use index chunks to speed this up"})}).done(),a.then(function(){var t=u[r.contig],a=new _ContigInterval2.default(t,r.start,r.stop);if(a.isCoveredBy(o))return _q2.default.when();a=expandRange(a);var i=a.complementIntervals(o);return o.push(a),o=_ContigInterval2.default.coalesce(o),_q2.default.all(i.map(function(t){return e.getAlignmentsInRange(t).progress(function(e){f.trigger("networkprogress",e)}).then(function(e){e.forEach(function(e){return n(e)}),f.trigger("networkdone"),f.trigger("newdata",t)})}))})}function a(e){if(!e)return[];if(_underscore2.default.isEmpty(u))return[];var n=new _ContigInterval2.default(u[e.contig],e.start(),e.stop());return _underscore2.default.filter(i,function(e){return e.intersects(n)})}var i={},u={},o=[],f={rangeChanged:function(e){r(e).done()},getAlignmentsInRange:a,on:function(){},once:function(){},off:function(){},trigger:function(){}};return _underscore2.default.extend(f,_backbone.Events),f}function create(e){var n=e.url;if(!n)throw new Error("Missing URL from track data: "+JSON.stringify(e));var t=e.indexUrl;if(!t)throw new Error("Missing indexURL from track data: "+JSON.stringify(e));var r=e.indexChunks?new _dataBam2.default(new _RemoteFile2.default(n),new _RemoteFile2.default(t),e.indexChunks):new _dataBam2.default(new _RemoteFile2.default(n),new _RemoteFile2.default(t));return createFromBamFile(r)}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataBam=require("../data/bam"),_dataBam2=_interopRequireDefault(_dataBam),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),BASE_PAIRS_PER_FETCH=100;module.exports={create:create,createFromBamFile:createFromBamFile};

},{"../ContigInterval":180,"../RemoteFile":186,"../data/bam":198,"backbone":1,"q":22,"underscore":177}],208:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function parseBedFeature(e){var r=new _ContigInterval2.default(e.contig,e.start,e.stop),t=e.rest.split("\t"),n=t[7].replace(/,*$/,"").split(",").map(Number),a=t[8].replace(/,*$/,"").split(",").map(Number),i=_underscore2.default.zip(a,n).map(function(r){var t=_slicedToArray(r,2),n=t[0],a=t[1];return new _Interval2.default(e.start+n,e.start+n+a)});return{position:r,id:t[0],strand:t[2],codingRegion:new _Interval2.default(Number(t[3]),Number(t[4])),geneId:t[9],name:t[10],exons:i}}function createFromBigBedFile(e){function r(e){a[e.id]||(a[e.id]=e)}function t(e){if(!e)return[];var r=[];return _underscore2.default.each(a,function(t){e.intersects(t.position)&&r.push(t)}),r}function n(t){var n=new _ContigInterval2.default(t.contig,t.start,t.stop);return n.isCoveredBy(i)?_q2.default.when():(i.push(n),i=_ContigInterval2.default.coalesce(i),e.getFeatureBlocksOverlapping(n).then(function(e){e.forEach(function(e){i.push(e.range),i=_ContigInterval2.default.coalesce(i);var t=e.rows.map(parseBedFeature);t.forEach(function(e){return r(e)}),o.trigger("newdata",e.range)})}))}var a={},i=[],o={rangeChanged:function(e){n(e).done()},getGenesInRange:t,on:function(){},off:function(){},trigger:function(){}};return _underscore2.default.extend(o,_backbone.Events),o}function create(e){var r=e.url;if(!r)throw new Error("Missing URL from track: "+JSON.stringify(e));return createFromBigBedFile(new _dataBigBed2.default(r))}Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){function e(e,r){var t=[],n=!0,a=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(e){a=!0,i=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw i}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_dataBigBed=require("../data/BigBed"),_dataBigBed2=_interopRequireDefault(_dataBigBed);module.exports={create:create,createFromBigBedFile:createFromBigBedFile};

},{"../ContigInterval":180,"../Interval":183,"../data/BigBed":192,"backbone":1,"q":22,"underscore":177}],209:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function keyFunction(e){return e.contig+":"+e.start+"-"+e.end}function filterFunction(e,r){return e.chrContainsLocus(r.contig,r.start)}function createFromCoverageUrl(e){function r(e){a.trigger("networkfailure",e),a.trigger("networkdone"),console.warn(e)}function t(e,r){var t=u.get(e,r).map(function(e){return e.count}),n=Math.max.apply(Math,t);return n}function n(t){var n=new _ContigInterval2.default(t.contig,t.start,t.stop);if(u.coversRange(n))return _q2.default.when();var o=_ResolutionCache.ResolutionCache.getResolution(n.interval),i="binning="+o,c=u.complementInterval(n,o);return u.coverRange(n),a.trigger("networkprogress",c.length),_q2.default.all(c.map(function(t){return e.getFeaturesInRange(t,i).then(function(e){var t=e.response;e.status>=400?r(e.status+" "+e.statusText+" "+JSON.stringify(t)):t.errorCode?r("Error from CoverageDataSource: "+JSON.stringify(t)):(t.forEach(function(e){return u.put({contig:e.contig,start:e.start,end:e.end,count:e.count},o)}),a.trigger("newdata",n)),a.trigger("networkdone")})}))}function o(e,r){if(!e)return[];var t=u.get(e,r),n=t.sort(function(e,r){return e.start-r.start});return n}var u=new _ResolutionCache.ResolutionCache(filterFunction,keyFunction),a={maxCoverage:t,rangeChanged:function(e){n(e).done()},getCoverageInRange:o,on:function(){},off:function(){},trigger:function(){}};return _underscore2.default.extend(a,_backbone.Events),a}function create(e){if(!e.url)throw new Error("Missing URL from track: "+JSON.stringify(e));var r=new _RemoteRequest.RemoteRequest(e.url,BASE_PAIRS_PER_FETCH);return createFromCoverageUrl(r)}Object.defineProperty(exports,"__esModule",{value:!0});var _q=require("q"),_q2=_interopRequireDefault(_q),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ResolutionCache=require("../ResolutionCache"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_RemoteRequest=require("../RemoteRequest"),BASE_PAIRS_PER_FETCH=1e3;module.exports={create:create,createFromCoverageUrl:createFromCoverageUrl};

},{"../ContigInterval":180,"../RemoteRequest":187,"../ResolutionCache":188,"backbone":1,"q":22,"underscore":177}],210:[function(require,module,exports){
"use strict";var create=function(){return{rangeChanged:function(){},on:function(){},off:function(){},trigger:function(){}}};module.exports={create:create};

},{}],211:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function expandRange(e){var t=function(e){return e-e%BASE_PAIRS_PER_FETCH},r=Math.max(0,t(e.start())),n=t(e.stop()+BASE_PAIRS_PER_FETCH-1);return new _ContigInterval2.default(e.contig,r,n)}function keyFunction(e){return e.contig+":"+e.start}function filterFunction(e,t){return e.chrIntersects(new _ContigInterval2.default(t.contig,t.start,t.stop))}function createFromFeatureUrl(e){function t(t){var r=new _ContigInterval2.default(t.contig,t.start,t.stop);if(n.coversRange(r))return _q2.default.when();var u=_ResolutionCache.ResolutionCache.getResolution(r.interval),a="binning="+u;r=expandRange(r);var i=n.complementInterval(r,u);return n.coverRange(r,u),o.trigger("networkprogress",i.length),_q2.default.all(i.map(function(t){return e.getFeaturesInRange(t,a).then(function(e){var r=e.response;null!==r&&r.forEach(function(e){return n.put(e,u)}),o.trigger("networkdone"),o.trigger("newdata",t)})}))}function r(e,t){if(!e)return[];var r=n.get(e,t),o=r.sort(function(e,t){return e.start-t.start});return o}var n=new _ResolutionCache.ResolutionCache(filterFunction,keyFunction),o={rangeChanged:function(e){t(e).done()},getFeaturesInRange:r,on:function(){},off:function(){},trigger:function(){}};return _underscore2.default.extend(o,_backbone.Events),o}function create(e){if(!e.url)throw new Error("Missing URL from track: "+JSON.stringify(e));var t=new _RemoteRequest.RemoteRequest(e.url);return createFromFeatureUrl(t)}Object.defineProperty(exports,"__esModule",{value:!0});var _q=require("q"),_q2=_interopRequireDefault(_q),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ResolutionCache=require("../ResolutionCache"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_RemoteRequest=require("../RemoteRequest"),BASE_PAIRS_PER_FETCH=1e4;module.exports={create:create,createFromFeatureUrl:createFromFeatureUrl};

},{"../ContigInterval":180,"../RemoteRequest":187,"../ResolutionCache":188,"backbone":1,"q":22,"underscore":177}],212:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function expandRange(e){var t=function(e){return e-e%BASE_PAIRS_PER_FETCH},n=Math.max(1,t(e.start())),r=t(e.stop()+BASE_PAIRS_PER_FETCH-1);return new _ContigInterval2.default(e.contig,n,r)}function create(e){function t(e){e.alignments.forEach(function(e){try{var t=_GA4GHAlignment2.default.keyFromGA4GHResponse(e);if(t in u)return;var n=new _GA4GHAlignment2.default(e);u[t]=n}catch(e){console.log("Error in Matepair Data Source.")}})}function n(t){var n=e.killChr?t.contig.replace(/^chr/,""):t.contig,r=new _ContigInterval2.default(n,t.start,t.stop);if(!(r.isCoveredBy(s)||(r=expandRange(r),r.length()>MAX_BASE_PAIRS_TO_FETCH))){var i=r.complementIntervals(s);s.push(r),s=_ContigInterval2.default.coalesce(s),i.forEach(function(e){o(e,null,1)})}}function r(e){_.trigger("networkfailure",e),_.trigger("networkdone"),console.warn(e)}function o(n,i,u){var s=n.length();if(s>MAX_BASE_PAIRS_TO_FETCH)return _q2.default.when();var c=new XMLHttpRequest,l=a+"/"+e.readGroupId+"/"+n.contig+"?start="+n.start()+"&end="+n.stop();c.open("GET",l),c.responseType="json",c.setRequestHeader("Content-Type","application/json"),c.addEventListener("load",function(e){var i=this.response;200!=this.status?r(this.status+" "+this.statusText+" "+JSON.stringify(i)):i.errorCode?r("Error from GA4GH endpoint: "+JSON.stringify(i)):(t(i),_.trigger("newdata",n),i.nextPageToken?o(n,i.nextPageToken,u+1):_.trigger("networkdone"))}),c.addEventListener("error",function(e){r("Request failed with status: "+this.status)}),_.trigger("networkprogress",{numRequests:u}),c.send(JSON.stringify({pageToken:i,pageSize:ALIGNMENTS_PER_REQUEST,readGroupIds:[e.readGroupId],referenceName:n.contig,start:n.start(),end:n.stop()}))}function i(t){return t?(e.killChr&&(t=new _ContigInterval2.default(t.contig.replace(/^chr/,""),t.start(),t.stop())),_underscore2.default.filter(u,function(e){return e.intersects(t)})):[]}var a=e.endpoint,u={},s=[],_={rangeChanged:n,getAlignmentsInRange:i,on:function(){},once:function(){},off:function(){},trigger:function(){}};return _underscore2.default.extend(_,_backbone.Events),_}var _underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_q=require("q"),_q2=_interopRequireDefault(_q),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_GA4GHAlignment=require("../GA4GHAlignment"),_GA4GHAlignment2=_interopRequireDefault(_GA4GHAlignment),ALIGNMENTS_PER_REQUEST=200,MAX_BASE_PAIRS_TO_FETCH=4e4,BASE_PAIRS_PER_FETCH=1e3;module.exports={create:create,MAX_BASE_PAIRS_TO_FETCH:MAX_BASE_PAIRS_TO_FETCH};

},{"../ContigInterval":180,"../GA4GHAlignment":182,"backbone":1,"q":22,"underscore":177}],213:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function expandRange(e){var t=function(e){return e-e%BASE_PAIRS_PER_FETCH},n=Math.max(0,t(e.start())),r=t(e.stop()+BASE_PAIRS_PER_FETCH-1);return new _ContigInterval2.default(e.contig,n,r)}function create(e){var t=e.url,n=e.contigList;if(!t)throw new Error("Missing URL from track: "+JSON.stringify(e));if(!n)throw new Error("Missing ContigList from track: "+JSON.stringify(e));return createFromReferenceUrl(new _dataSequence2.default(new _RemoteRequest.RemoteRequest(t),n))}function testBasePairsToFetch(e){return e?void(BASE_PAIRS_PER_FETCH=e):BASE_PAIRS_PER_FETCH}function testBasePairsToFetch(e){return e?void(BASE_PAIRS_PER_FETCH=e):BASE_PAIRS_PER_FETCH}var _q=require("q"),_q2=_interopRequireDefault(_q),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataSequence=require("../data/Sequence"),_dataSequence2=_interopRequireDefault(_dataSequence),_SequenceStore=require("../SequenceStore"),_SequenceStore2=_interopRequireDefault(_SequenceStore),_RemoteRequest=require("../RemoteRequest"),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),BASE_PAIRS_PER_FETCH=1e4,MAX_BASE_PAIRS_TO_FETCH=1e5,createFromReferenceUrl=function(e){function t(t){var n=t.length();return n>MAX_BASE_PAIRS_TO_FETCH?_q2.default.when():void e.getFeaturesInRange(t).then(function(e){e&&(e.length<t.length()&&(t=new _ContigInterval2.default(t.contig,t.start(),t.start()+e.length-1)),u.setRange(t,e))}).then(function(){_.trigger("newdata",t)}).done()}function n(e){var t=_underscore2.default.map(a,function(e){return e.name}).indexOf(e.contig);if(t>=0)return _q2.default.Promise.resolve(e);var n=_utils2.default.altContigName(e.contig),r=_underscore2.default.map(a,function(e){return e.name}).indexOf(n);return r>=0?_q2.default.Promise.resolve({contig:n,start:e.start,stop:e.stop}):_q2.default.Promise.resolve(e)}function r(e){return u.getAsObjects(_ContigInterval2.default.fromGenomeRange(e))}function o(e){return e?u.getAsString(_ContigInterval2.default.fromGenomeRange(e)):""}var a=e.getContigs(),u=new _SequenceStore2.default,i=[],_={rangeChanged:function(e){n(e).then(function(e){var n=new _ContigInterval2.default(e.contig,e.start,e.stop);if(!n.isCoveredBy(i)){n=expandRange(n);var r=n.complementIntervals(i);i.push(n),i=_ContigInterval2.default.coalesce(i);var o=!0,a=!1,u=void 0;try{for(var _,c=r[Symbol.iterator]();!(o=(_=c.next()).done);o=!0){var s=_.value;t(s)}}catch(e){a=!0,u=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw u}}}}).done()},getRange:r,getRangeAsString:o,contigList:function(){return a},normalizeRange:n,on:function(){},once:function(){},off:function(){},trigger:function(){}};return _underscore2.default.extend(_,_backbone.Events),_};module.exports={create:create,createFromReferenceUrl:createFromReferenceUrl,testBasePairsToFetch:testBasePairsToFetch};

},{"../ContigInterval":180,"../RemoteRequest":187,"../SequenceStore":190,"../data/Sequence":194,"../utils":218,"backbone":1,"q":22,"underscore":177}],214:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function expandRange(e){var t=function(e){return e-e%BASE_PAIRS_PER_FETCH},n=Math.max(0,t(e.start())),r=t(e.stop()+BASE_PAIRS_PER_FETCH-1);return new _ContigInterval2.default(e.contig,n,r)}function create(e){var t=e.url;if(!t)throw new Error("Missing URL from track: "+JSON.stringify(e));return createFromTwoBitFile(new _dataTwoBit2.default(new _RemoteFile2.default(t)))}function testBasePairsToFetch(e){return e?void(BASE_PAIRS_PER_FETCH=e):BASE_PAIRS_PER_FETCH}Object.defineProperty(exports,"__esModule",{value:!0});var _q=require("q"),_q2=_interopRequireDefault(_q),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataTwoBit=require("../data/TwoBit"),_dataTwoBit2=_interopRequireDefault(_dataTwoBit),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),_SequenceStore=require("../SequenceStore"),_SequenceStore2=_interopRequireDefault(_SequenceStore),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),BASE_PAIRS_PER_FETCH=1e4,MAX_BASE_PAIRS_TO_FETCH=1e5,createFromTwoBitFile=function(e){function t(t){var n=t.length();return n>MAX_BASE_PAIRS_TO_FETCH?(l.trigger("newdatarefused",t),_q2.default.when()):(_.push(t),_=_ContigInterval2.default.coalesce(_),void e.getFeaturesInRange(t.contig,t.start(),t.stop()).then(function(e){e&&(e.length<t.length()&&(t=new _ContigInterval2.default(t.contig,t.start(),t.start()+e.length-1)),u.setRange(t,e))}).then(function(){l.trigger("newdata",t)}).done())}function n(e){var t=_underscore2.default.map(a,function(e){return e.name}).indexOf(e.contig);if(t>=0)return e;var n=_utils2.default.altContigName(e.contig),r=_underscore2.default.map(a,function(e){return e.name}).indexOf(n);return r>=0?{contig:n,start:e.start,stop:e.stop}:e}function r(e){return c.then(function(){return n(e)})}function o(e){return u.getAsObjects(_ContigInterval2.default.fromGenomeRange(e))}function i(e){return e?u.getAsString(_ContigInterval2.default.fromGenomeRange(e)):""}var a=[],u=new _SequenceStore2.default,_=[],c=e.getContigList().then(function(e){return a=e,l.trigger("contigs",a),e});c.done();var l={rangeChanged:function(e){r(e).then(function(e){var n=new _ContigInterval2.default(e.contig,e.start,e.stop);if(!n.isCoveredBy(_)){n=expandRange(n);var r=n.complementIntervals(_),o=!0,i=!1,a=void 0;try{for(var u,c=r[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var l=u.value;t(l)}}catch(e){i=!0,a=e}finally{try{!o&&c.return&&c.return()}finally{if(i)throw a}}}}).done()},getRange:o,getRangeAsString:i,contigList:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){return a}),normalizeRange:r,on:function(){},once:function(){},off:function(){},trigger:function(){}};return _underscore2.default.extend(l,_backbone.Events),l};module.exports={create:create,createFromTwoBitFile:createFromTwoBitFile,testBasePairsToFetch:testBasePairsToFetch};

},{"../ContigInterval":180,"../RemoteFile":186,"../SequenceStore":190,"../data/TwoBit":195,"../utils":218,"backbone":1,"q":22,"underscore":177}],215:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function expandRange(e){var n=function(e){return e-e%BASE_PAIRS_PER_FETCH},r=Math.max(1,n(e.start())),t=n(e.stop()+BASE_PAIRS_PER_FETCH-1);return new _ContigInterval2.default(e.contig,r,t)}function keyFunction(e){return e.variant.contig+":"+e.variant.position}function filterFunction(e,n){return e.chrContainsLocus(n.variant.contig,n.variant.position)}function createFromVariantUrl(e,n){function r(n){var r=new _ContigInterval2.default(n.contig,n.start,n.stop);if(i.coversRange(r))return _q2.default.when();var t=_ResolutionCache.ResolutionCache.getResolution(r.interval),o="binning="+t;r=expandRange(r);var a=i.complementInterval(r,t);return i.coverRange(r,t),u.trigger("networkprogress",a.length),_q2.default.all(a.map(function(n){return e.getFeaturesInRange(n,o).then(function(e){var n=e.response;if(null!==n){var o=_underscore2.default.map(n,function(e){return JSON.parse(e)});o.forEach(function(e){return i.put(e,t)})}u.trigger("networkdone"),u.trigger("newdata",r)})}))}function t(e,n){if(!e)return[];var r=i.get(e,n),t=r.sort(function(e,n){return e.variant.position-n.variant.position});return _underscore2.default.map(t,function(e){return e.variant})}function o(e,r){if(!e||!n)return[];var t=i.get(e,r),o=t.sort(function(e,n){return e.variant.position-n.variant.position});return o}function a(){if(n)return n;throw new Error("No samples for genotypes")}var i=new _ResolutionCache.ResolutionCache(filterFunction,keyFunction),u={rangeChanged:function(e){r(e).done()},getVariantsInRange:t,getGenotypesInRange:o,getSamples:a,on:function(){},off:function(){},trigger:function(){}};return _underscore2.default.extend(u,_backbone.Events),u}function create(e){if(!e.url)throw new Error("Missing URL from track: "+JSON.stringify(e));e.samples||console.log("no genotype samples provided");var n=new _RemoteRequest.RemoteRequest(e.url,BASE_PAIRS_PER_FETCH);return createFromVariantUrl(n,e.samples)}var _q=require("q"),_q2=_interopRequireDefault(_q),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_backbone=require("backbone"),_ResolutionCache=require("../ResolutionCache"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_RemoteRequest=require("../RemoteRequest"),BASE_PAIRS_PER_FETCH=1e3;module.exports={create:create,createFromVariantUrl:createFromVariantUrl};

},{"../ContigInterval":180,"../RemoteRequest":187,"../ResolutionCache":188,"backbone":1,"q":22,"underscore":177}],216:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function expandRange(e){var t=function(e){return e-e%BASE_PAIRS_PER_FETCH},n=Math.max(1,t(e.start())),r=t(e.stop()+BASE_PAIRS_PER_FETCH-1);return new _ContigInterval2.default(e.contig,n,r)}function variantKey(e){return e.contig+":"+e.position}function createFromVcfFile(e){function t(e){var t=variantKey(e);a[t]||(a[t]=e)}function n(n){var r=new _ContigInterval2.default(n.contig,n.start,n.stop);return r.isCoveredBy(u)?_q2.default.when():(r=expandRange(r),u.push(r),u=_ContigInterval2.default.coalesce(u),e.getFeaturesInRange(r).then(function(e){e.forEach(function(e){return t(e)}),c.trigger("newdata",r)}))}function r(e){return e?_underscore2.default.filter(a,function(t){return e.chrContainsLocus(t.contig,t.position)}):[]}function o(e){throw new Error("Function getGenotypesInRange not implemented")}function i(){throw new Error("Function getSamples not implemented")}var a={},u=[],c={rangeChanged:function(e){n(e).done()},getVariantsInRange:r,getGenotypesInRange:o,getSamples:i,on:function(){},off:function(){},trigger:function(){}};return _underscore2.default.extend(c,_backbone2.default),c}function create(e){var t=e.url,n=e.content;if(t)return createFromVcfFile(new _dataVcf2.default(new _RemoteFile2.default(t)));if(n)return createFromVcfFile(new _dataVcf2.default(new _LocalStringFile2.default(n)));throw new Error("Missing URL or content from track: "+JSON.stringify(e))}Object.defineProperty(exports,"__esModule",{value:!0});var _backbone=require("backbone"),_backbone2=_interopRequireDefault(_backbone),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_q=require("q"),_q2=_interopRequireDefault(_q),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_RemoteFile=require("../RemoteFile"),_RemoteFile2=_interopRequireDefault(_RemoteFile),_LocalStringFile=require("../LocalStringFile"),_LocalStringFile2=_interopRequireDefault(_LocalStringFile),_dataVcf=require("../data/vcf"),_dataVcf2=_interopRequireDefault(_dataVcf),BASE_PAIRS_PER_FETCH=100;module.exports={create:create,createFromVcfFile:createFromVcfFile};

},{"../ContigInterval":180,"../LocalStringFile":184,"../RemoteFile":186,"../data/vcf":204,"backbone":1,"q":22,"underscore":177}],217:[function(require,module,exports){
"use strict";module.exports={BASE_COLORS:{A:"#5050FF",G:"#00C000",C:"#E00000",T:"#E6E600",U:"#F70016",N:"black"},LOOSE_TEXT_STYLE:"24px 'Helvetica Neue', Helvetica, Arial, sans-serif",TIGHT_TEXT_STYLE:"bold 12px 'Helvetica Neue', Helvetica, Arial, sans-serif",GENE_ARROW_SIZE:4,GENE_COLOR:"blue",GENE_COMPLEMENT_COLOR:"white",GENE_FONT:"'Helvetica Neue', Helvetica, Arial, sans-serif",GENE_FONT_SIZE:16,GENE_TEXT_PADDING:5,ALIGNMENT_COLOR:"#c8c8c8",ALIGNMENT_MINUS_STRAND_COLOR:"rgb(176, 176, 236)",ALIGNMENT_PLUS_STRAND_COLOR:"rgb(236, 176, 176)",DELETE_COLOR:"black",INSERT_COLOR:"rgb(97, 0, 216)",COVERAGE_FONT_STYLE:"bold 9px 'Helvetica Neue', Helvetica, Arial, sans-serif",COVERAGE_FONT_COLOR:"black",COVERAGE_TICK_LENGTH:5,COVERAGE_PADDING:10,COVERAGE_TEXT_PADDING:3,COVERAGE_TEXT_Y_OFFSET:3,COVERAGE_BIN_COLOR:"#a0a0a0",COVERAGE_MIN_BAR_WIDTH_FOR_GAP:8,SCALE_LINE_PADDING:40,SCALE_FONT_STYLE:"bold 12px 'Helvetica Neue', Helvetica, Arial, sans-serif",SCALE_TEXT_Y_OFFSET:5,SCALE_FONT_COLOR:"black",SCALE_ARROW_SIZE:4,LOC_TEXT_PADDING:5,LOC_TICK_LENGTH:10,LOC_TEXT_Y_OFFSET:5,LOC_FONT_STYLE:"13px 'Helvetica Neue', Helvetica, Arial, sans-serif",LOC_FONT_COLOR:"black",VARIANT_HEIGHT:14,GENOTYPE_SPACING:1,GENOTYPE_HEIGHT:10,GENOTYPE_FILL:"#999999",BACKGROUND_FILL:"#f2f2f2"};

},{}],218:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function tupleLessOrEqual(e,t){if(e.length!=t.length)throw new Error("Comparing non-equal length tuples");for(var r=0;r<e.length;r++){if(e[r]>t[r])return!1;if(e[r]<t[r])return!0}return!0}function tupleRangeOverlaps(e,t){return tupleLessOrEqual(e[0],t[1])&&tupleLessOrEqual(t[0],e[1])&&tupleLessOrEqual(e[0],e[1])&&tupleLessOrEqual(t[0],t[1])}function concatArrayBuffers(e){var t=e.map(function(e){return e.byteLength}).reduce(function(e,t){return e+t},0),r=new Uint8Array(t),n=0;return e.forEach(function(e){r.set(new Uint8Array(e),n),n+=e.byteLength}),r.buffer}function _inflateOne(e,t){var r=new _pakoLibInflate2.default.Inflate;return r.push(e.slice(t)),{err:r.err,msg:r.msg,buffer:r.result?r.result.buffer:null,total_in:r.strm.total_in}}function cachedInflateOne(e,t,r){if(!r)return _inflateOne(e,t);var n=r.filename+":"+(r.initialOffset+t),a=inflationCache[n];return a&&t+a.total_in>e.byteLength?_inflateOne(e,t):(a||(a=_inflateOne(e,t)),!a.err&&a.buffer&&(inflationCache[n]=a),a)}function inflateConcatenatedGzip(e,t,r){var n=0,a=[];void 0===t&&(t=e.byteLength);do{var u=cachedInflateOne(e,n,r);if(u.err)throw"Gzip error: "+u.msg;u.buffer&&a.push({offset:n,compressedLength:u.total_in,buffer:u.buffer}),n+=u.total_in}while(n<=t&&n<e.byteLength);return a}function inflateGzip(e){return concatArrayBuffers(inflateConcatenatedGzip(e).map(function(e){return e.buffer}))}function altContigName(e){return"chr"==e.slice(0,3)?e.slice(3):"chr"+e}function isChrMatch(e,t){return e==t||"chr"+e==t||e=="chr"+t}function pipePromise(e,t){t.then(e.resolve,e.reject,e.notify)}function scaleRange(e,t){var r=e.stop-e.start,n=Math.floor((e.start+e.stop)/2),a=2*Math.round(t*r/2),u=n-a/2,i=n+a/2;return u<0&&(i-=u,u=0),new _Interval2.default(u,i)}function parseRange(e){var t=/^([^ :]+):([0-9,]+)-([0-9,]+)$/.exec(e);return t?{contig:t[1],start:parseNumberWithCommas(t[2]),stop:parseNumberWithCommas(t[3])}:(t=/^([^ :]+):([0-9,]+)$/.exec(e))?{contig:t[1],start:parseNumberWithCommas(t[2])}:(t=/^([0-9,]+)-([0-9,]+)$/.exec(e))?{start:parseNumberWithCommas(t[1]),stop:parseNumberWithCommas(t[2])}:(t=/^([^ :]+):$/.exec(e)||/^([^0-9][^ :]+)$/.exec(e))?{contig:t[1]}:(t=/^([0-9,]+)$/.exec(e),t?{start:parseNumberWithCommas(t[1])}:null)}function formatInterval(e){return numberWithCommas(e.start)+"-"+numberWithCommas(e.stop)}function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function parseNumberWithCommas(e){return parseInt(e.replace(/,/g,""),10)}function flatMap(e,t){return _underscore2.default.flatten(e.map(t),!0)}function computePercentile(e,t){if(0===e.length)return 0;e.sort(function(e,t){return e-t});var r=(e.length-1)*t/100,n=Math.floor(r),a=Math.ceil(r);return n==a?e[n]:e[n]*(r-n)+e[a]*(a-r)}var _pakoLibInflate=require("pako/lib/inflate"),_pakoLibInflate2=_interopRequireDefault(_pakoLibInflate),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_Interval=require("./Interval"),_Interval2=_interopRequireDefault(_Interval),inflationCache={};module.exports={tupleLessOrEqual:tupleLessOrEqual,tupleRangeOverlaps:tupleRangeOverlaps,concatArrayBuffers:concatArrayBuffers,inflateConcatenatedGzip:inflateConcatenatedGzip,inflateGzip:inflateGzip,altContigName:altContigName,pipePromise:pipePromise,scaleRange:scaleRange,parseRange:parseRange,formatInterval:formatInterval,isChrMatch:isChrMatch,flatMap:flatMap,computePercentile:computePercentile};

},{"./Interval":183,"pako/lib/inflate":10,"underscore":177}],219:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),_pileuputils=require("./pileuputils"),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),CoverageCache=function(){function e(t){_classCallCheck(this,e),this.reads={},this.refToCounts={},this.refToMaxCoverage={},this.referenceSource=t}return _createClass(e,[{key:"addAlignment",value:function(e){var t=e.getKey();if(!(t in this.reads)){this.reads[t]=e;var r=(0,_pileuputils.getOpInfo)(e,this.referenceSource);this.addReadToCoverage(e,r)}}},{key:"updateMismatches",value:function(e){var t=this._canonicalRef(e.contig);this.refToCounts[t]={},this.refToMaxCoverage[t]=0;for(var r in this.reads){var a=this.reads[r];if(a.getInterval().chrOnContig(e.contig)){var o=(0,_pileuputils.getOpInfo)(a,this.referenceSource);this.addReadToCoverage(a,o)}}}},{key:"addReadToCoverage",value:function(e,t){var r=this._canonicalRef(e.ref);r in this.refToCounts||(this.refToCounts[r]={},this.refToMaxCoverage[r]=0);for(var a=this.refToCounts[r],o=this.refToMaxCoverage[r],i=e.getInterval(),n=i.start(),s=i.stop(),u=n;u<=s;u++){var f=a[u];f||(a[u]=f={count:0}),f.count+=1,f.count>o&&(o=f.count)}var l=!0,c=!1,h=void 0;try{for(var v,C=t.mismatches[Symbol.iterator]();!(l=(v=C.next()).done);l=!0){var g,d=v.value,p=a[d.pos];p.mismatches?g=p.mismatches:(g=p.mismatches={},p.ref=this.referenceSource.getRangeAsString({contig:r,start:d.pos,stop:d.pos}));var f=g[d.basePair]||0;g[d.basePair]=1+f}}catch(e){c=!0,h=e}finally{try{!l&&C.return&&C.return()}finally{if(c)throw h}}this.refToMaxCoverage[r]=o}},{key:"maxCoverageForRef",value:function(e){return this.refToMaxCoverage[e]||this.refToMaxCoverage[_utils2.default.altContigName(e)]||0}},{key:"binsForRef",value:function(e){return this.refToCounts[e]||this.refToCounts[_utils2.default.altContigName(e)]||{}}},{key:"_canonicalRef",value:function(e){if(this.refToCounts[e])return e;var t=_utils2.default.altContigName(e);return this.refToCounts[t]?t:e}}]),e}();module.exports=CoverageCache;

},{"../utils":218,"./pileuputils":235}],220:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function renderBars(e,t,a,r,n,i,s){if(!_underscore2.default.isEmpty(n)){n=_underscore2.default.sortBy(n,function(e){return e.start});var o=t(1)-t(0),l=o>_style2.default.COVERAGE_MIN_BAR_WIDTH_FOR_GAP,u=l?1:0,c=function(e){var r=Math.round(t(e.start)),n=Math.max(r+2,Math.round(t(e.end))-u),i=Math.round(a(e.count));return{barX1:r,barX2:n,barY:i}},f=a(0);e.fillStyle=_style2.default.COVERAGE_BIN_COLOR,e.beginPath(),n.forEach(function(t){e.pushObject(t);var a=c(t),r=a.barX1,n=a.barX2,i=a.barY;e.moveTo(r,f),e.lineTo(r,i),e.lineTo(n,i),e.lineTo(n,f),e.popObject()}),e.closePath(),e.fill()}}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var n=e,i=t,s=a;r=!1,null===n&&(n=Function.prototype);var o=Object.getOwnPropertyDescriptor(n,i);if(void 0!==o){if("value"in o)return o.value;var l=o.get;if(void 0===l)return;return l.call(s)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=i,a=s,r=!0,o=u=void 0}},_RemoteRequest=require("../RemoteRequest"),_RemoteRequest2=_interopRequireDefault(_RemoteRequest),_react=require("react"),_react2=_interopRequireDefault(_react),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_style=require("../style"),_style2=_interopRequireDefault(_style),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),CoverageTiledCanvas=function(e){function t(e,a,r){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.source=e,this.height=Math.max(1,a),this.options=r}return _inherits(t,e),_createClass(t,[{key:"heightForRef",value:function(e){return this.height}},{key:"update",value:function(e,t){this.height=Math.max(1,e),this.options=t}},{key:"yScaleForRef",value:function(e,t){var a=this.source.maxCoverage(e,t);return _scale2.default.linear().domain([a,0]).range([_style2.default.COVERAGE_PADDING,this.height-_style2.default.COVERAGE_PADDING]).nice()}},{key:"render",value:function(e,t,a,r,n){var i=new _ContigInterval2.default(a.contig,Math.max(1,a.start()-1),a.stop()+1),s=this.source.getCoverageInRange(i,n);r||(r=a);var o=this.yScaleForRef(r,n);renderBars(e,t,o,i,s,n,this.options)}}]),t}(_TiledCanvas3.default),CoverageTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={networkStatus:null}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e={height:"100%"},t=null,a=this.state.networkStatus;a&&(t=_react2.default.createElement("div",{ref:"status",className:"network-status"},_react2.default.createElement("div",{className:"network-status-message"},"Loading coverage…")));var r=this.props.range.stop-this.props.range.start;return r>_RemoteRequest2.default.MONSTER_REQUEST?_react2.default.createElement("div",null,_react2.default.createElement("div",{className:"center"},"Zoom in to see coverage"),_react2.default.createElement("canvas",{onClick:this.handleClick.bind(this)})):_react2.default.createElement("div",null,t,_react2.default.createElement("div",{ref:"container",style:e},_react2.default.createElement("canvas",{ref:"canvas",onClick:this.handleClick.bind(this)})))}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidMount",value:function(){var e=this;this.tiles=new CoverageTiledCanvas(this.props.source,this.props.height,this.props.options),this.props.source.on("newdata",function(t){var a=e.props.source.maxCoverage(t);e.props.source.getCoverageInRange(t);var r=e.props.source.maxCoverage(t);a!=r?e.tiles.invalidateAll():e.tiles.invalidateRange(t),e.visualizeCoverage()}),this.props.source.on("newdata",function(t){e.tiles.invalidateRange(t),e.visualizeCoverage()}),this.props.source.on("networkprogress",function(t){e.setState({networkStatus:t})}),this.props.source.on("networkdone",function(t){e.setState({networkStatus:null})})}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(this.props,e)&&(0,_shallowEquals2.default)(this.state,t)||(this.props.height==e.height&&this.props.options==e.options||(this.tiles.update(this.props.height,this.props.options),this.tiles.invalidateAll()),this.visualizeCoverage())}},{key:"getContext",value:function(){var e=this.refs.canvas,t=e.getContext("2d");return t}},{key:"renderTicks",value:function(e,t){var a=t.domain()[0];[0,Math.round(a/2),a].forEach(function(a){e.pushObject({value:a,type:"tick"});var r=Math.round(t(a));if(e.strokeStyle=_style2.default.COVERAGE_FONT_COLOR,_canvasUtils2.default.drawLine(e,0,r,_style2.default.COVERAGE_TICK_LENGTH,r),e.popObject(),a>0){var n=a+"X";e.pushObject({value:a,label:n,type:"label"}),e.font=_style2.default.COVERAGE_FONT_STYLE;var i=_style2.default.COVERAGE_TICK_LENGTH+_style2.default.COVERAGE_TEXT_PADDING,s=r+_style2.default.COVERAGE_TEXT_Y_OFFSET;e.strokeStyle="white",e.lineWidth=2,e.strokeText(n,i,s),e.lineWidth=1,e.fillStyle=_style2.default.COVERAGE_FONT_COLOR,e.fillText(n,i,s),e.popObject()}})}},{key:"visualizeCoverage",value:function(){var e=this.refs.canvas,t=this.props.width,a=this.props.height,r=_ContigInterval2.default.fromGenomeRange(this.props.range);if(0!==t&&"undefined"!=typeof e){_d3utils2.default.sizeCanvas(e,t,a);var n=_dataCanvas2.default.getDataContext(this.getContext());n.save(),n.reset(),n.clearRect(0,0,n.canvas.width,n.canvas.height);var i=this.tiles.yScaleForRef(r);this.tiles.renderToScreen(n,r,this.getScale()),this.renderTicks(n,i),n.restore()}}},{key:"handleClick",value:function(e){var t=e.nativeEvent,a=t.offsetX,r=_ContigInterval2.default.fromGenomeRange(this.props.range),n=this.getScale(),i=this.props.source.getCoverageInRange(r),s=Math.floor(n.invert(a))-1,o=i[s],l=window.alert||console.log;if(o){var u=_underscore2.default.extend({position:r.contig+":"+(1+s),"read depth":o.count});l(JSON.stringify(u,null,"  "))}}}]),t}(_react2.default.Component);CoverageTrack.displayName="coverage",module.exports=CoverageTrack;

},{"../ContigInterval":180,"../RemoteRequest":187,"../scale":206,"../style":217,"./TiledCanvas":231,"./canvas-utils":233,"./d3utils":234,"data-canvas":7,"react":175,"shallow-equals":176,"underscore":177}],221:[function(require,module,exports){
"use strict";var DisplayMode={LOOSE:1,TIGHT:2,BLOCKS:3,HIDDEN:4,getDisplayMode:function(e){return e>=25?DisplayMode.LOOSE:e>=10?DisplayMode.TIGHT:e>=1?DisplayMode.BLOCKS:DisplayMode.HIDDEN},isText:function(e){return e==DisplayMode.LOOSE||e==DisplayMode.TIGHT}};module.exports=DisplayMode;

},{}],222:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function renderFeatures(e,t,a,r){e.font=_style2.default.GENE_FONT_SIZE+"px "+_style2.default.GENE_FONT,e.textAlign="center",r.forEach(function(r){var n=new _ContigInterval2.default(r.contig,r.start,r.stop);if(n.chrIntersects(a)){e.pushObject(r),e.lineWidth=1,e.fillStyle="black";var s=Math.round(t(r.start)),i=Math.ceil(t(r.stop)-t(r.start));e.fillRect(s-.5,0,i,_style2.default.VARIANT_HEIGHT),e.popObject()}})}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var n=e,s=t,i=a;r=!1,null===n&&(n=Function.prototype);var l=Object.getOwnPropertyDescriptor(n,s);if(void 0!==l){if("value"in l)return l.value;var o=l.get;if(void 0===o)return;return o.call(i)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=s,a=i,r=!0,l=u=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_RemoteRequest=require("../RemoteRequest"),_RemoteRequest2=_interopRequireDefault(_RemoteRequest),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),FeatureTiledCanvas=function(e){function t(e,a){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.source=e,this.options=a}return _inherits(t,e),_createClass(t,[{key:"update",value:function(e){this.options=e}},{key:"heightForRef",value:function(e){return _style2.default.VARIANT_HEIGHT}},{key:"render",value:function(e,t,a,r,n){var s=new _ContigInterval2.default(a.contig,a.start()-1,a.stop()+1),i=this.source.getFeaturesInRange(s,n);renderFeatures(e,t,s,i)}}]),t}(_TiledCanvas3.default),FeatureTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={networkStatus:null}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=null,t=this.state.networkStatus;t&&(e=_react2.default.createElement("div",{ref:"status",className:"network-status-small"},_react2.default.createElement("div",{className:"network-status-message-small"},"Loading features…")));var a=this.props.range.stop-this.props.range.start;return a>_RemoteRequest2.default.MONSTER_REQUEST?_react2.default.createElement("div",null,_react2.default.createElement("div",{className:"center"},"Zoom in to see features"),_react2.default.createElement("canvas",{onClick:this.handleClick.bind(this)})):_react2.default.createElement("div",null,e,_react2.default.createElement("div",{ref:"container"},_react2.default.createElement("canvas",{ref:"canvas",onClick:this.handleClick.bind(this)})))}},{key:"componentDidMount",value:function(){var e=this;this.tiles=new FeatureTiledCanvas(this.props.source,this.props.options),this.props.source.on("newdata",function(t){e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.source.on("networkprogress",function(t){e.setState({networkStatus:t})}),this.props.source.on("networkdone",function(t){e.setState({networkStatus:null})}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(this.props,e)&&(0,_shallowEquals2.default)(this.state,t)||(this.tiles.update(this.props.options),this.tiles.invalidateAll(),this.updateVisualization())}},{key:"updateVisualization",value:function(){var e=this.refs.canvas,t=this.props,a=t.width,r=t.height,n=this.props.range,s=new _ContigInterval2.default(n.contig,n.start,n.stop);if(0!==a&&"undefined"!=typeof e){_d3utils2.default.sizeCanvas(e,a,r);var i=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));i.reset(),i.clearRect(0,0,i.canvas.width,i.canvas.height),this.tiles.renderToScreen(i,s,this.getScale()),i.restore()}}},{key:"handleClick",value:function(e){var t=e.nativeEvent,a=t.offsetX,r=this.props.range,n=new _ContigInterval2.default(r.contig,r.start-1,r.stop+1),s=this.getScale(),i=Math.floor(s.invert(a))-2,l=i+2,o=this.props.source.getFeaturesInRange(n),u=_underscore2.default.find(o,function(e){return _utils2.default.tupleRangeOverlaps([[e.start],[e.stop]],[[i],[l]])}),c=window.alert||console.log;if(u){var f=_underscore2.default.extend({id:u.id,range:u.contig+":"+u.start+"-"+u.stop,score:u.score});c(JSON.stringify(f,null,"  "))}}}]),t}(_react2.default.Component);FeatureTrack.displayName="features",module.exports=FeatureTrack;

},{"../ContigInterval":180,"../RemoteRequest":187,"../style":217,"../utils":218,"./TiledCanvas":231,"./canvas-utils":233,"./d3utils":234,"data-canvas":7,"react":175,"shallow-equals":176,"underscore":177}],223:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function drawArrow(e,t,a,r,n){var l=t(1+a.start),o=t(1+a.stop);if(!(o-l<=2*_style2.default.GENE_ARROW_SIZE)){var i=(l+o)/2;e.beginPath(),"-"==n?(e.moveTo(i+_style2.default.GENE_ARROW_SIZE,r-_style2.default.GENE_ARROW_SIZE),e.lineTo(i,r),e.lineTo(i+_style2.default.GENE_ARROW_SIZE,r+_style2.default.GENE_ARROW_SIZE)):(e.moveTo(i-_style2.default.GENE_ARROW_SIZE,r-_style2.default.GENE_ARROW_SIZE),e.lineTo(i,r),e.lineTo(i-_style2.default.GENE_ARROW_SIZE,r+_style2.default.GENE_ARROW_SIZE)),e.stroke()}}function drawGeneName(e,t,a,r,n){var l=r.position,o=.5*(t(1+l.start())+t(1+l.stop())),i=r.name||r.id,s=e.measureText(i).width,u=new _Interval2.default(o-.5*s,o+.5*s);if(!_underscore2.default.any(n,function(e){return u.intersects(e)})){n.push(u);var _=a+_style2.default.GENE_FONT_SIZE+_style2.default.GENE_TEXT_PADDING;e.fillText(i,o,_)}}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var n=e,l=t,o=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,l);if(void 0!==i){if("value"in i)return i.value;var s=i.get;if(void 0===s)return;return s.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=l,a=o,r=!0,i=u=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_dataBedtools=require("../data/bedtools"),_dataBedtools2=_interopRequireDefault(_dataBedtools),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),GeneTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={genes:[]}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return _react2.default.createElement("canvas",null)}},{key:"componentDidMount",value:function(){var e=this;this.props.source.on("newdata",function(t){e.setState({genes:e.props.source.getGenesInRange(t)})}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(e,this.props)&&(0,_shallowEquals2.default)(t,this.state)||this.updateVisualization()}},{key:"updateVisualization",value:function(){var e=_reactDom2.default.findDOMNode(this),t=this.props,a=t.width,r=t.height,n=this.props.range,l=new _ContigInterval2.default(n.contig,n.start,n.stop);if(0!==a){var o=this.getScale(),i=_scale2.default.linear().domain([o.invert(0),o.invert(a)]).range([0,a]).clamp(!0);_d3utils2.default.sizeCanvas(e,a,r);var s=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));s.reset(),s.clearRect(0,0,s.canvas.width,s.canvas.height);var u=Math.round(r/4),_=[];s.font=_style2.default.GENE_FONT_SIZE+"px "+_style2.default.GENE_FONT,s.textAlign="center",this.state.genes.forEach(function(e){if(e.position.chrIntersects(l)){s.pushObject(e),s.lineWidth=1,s.strokeStyle=_style2.default.GENE_COLOR,s.fillStyle=_style2.default.GENE_COLOR,_canvasUtils2.default.drawLine(s,i(1+e.position.start()),u+.5,i(1+e.position.stop()),u+.5);var t=_dataBedtools2.default.splitCodingExons(e.exons,e.codingRegion);t.forEach(function(e){s.fillRect(o(1+e.start),u-3*(e.isCoding?2:1),o(e.stop+2)-o(1+e.start),6*(e.isCoding?2:1))});var a=e.position.interval.complementIntervals(e.exons);a.forEach(function(t){drawArrow(s,i,t,u+.5,e.strand)}),s.strokeStyle=_style2.default.GENE_COMPLEMENT_COLOR,s.lineWidth=2,e.exons.forEach(function(t){drawArrow(s,i,t,u+.5,e.strand)}),drawGeneName(s,i,u,e,_),s.popObject()}})}}}]),t}(_react2.default.Component);GeneTrack.displayName="genes",module.exports=GeneTrack;

},{"../ContigInterval":180,"../Interval":183,"../data/bedtools":199,"../scale":206,"../style":217,"./canvas-utils":233,"./d3utils":234,"data-canvas":7,"react":175,"react-dom":23,"shallow-equals":176,"underscore":177}],224:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function renderGenome(e,t,a,i,r){var n=t(1)-t(0),l=_DisplayMode2.default.getDisplayMode(n),o=_DisplayMode2.default.isText(l);if(l!=_DisplayMode2.default.HIDDEN){e.textAlign="center",l==_DisplayMode2.default.LOOSE?e.font=_style2.default.LOOSE_TEXT_STYLE:l==_DisplayMode2.default.TIGHT&&(e.font=_style2.default.TIGHT_TEXT_STYLE);for(var s=null,u=i.start(),c=i.stop(),f=u;f<=c;f++){var _=r[f-u];"."!=_&&(e.save(),e.pushObject({pos:f,letter:_}),e.fillStyle=_style2.default.BASE_COLORS[_],o?e.fillText(_,t(1.5+f),a-1):n>=_style2.default.COVERAGE_MIN_BAR_WIDTH_FOR_GAP?e.fillRect(t(1+f)+.5,0,n-1.5,a):s===_?e.fillRect(t(1+f)-1.5,0,n+1.5,a):e.fillRect(t(1+f)-.5,0,n+1.5,a),e.popObject(),e.restore(),s=_)}}}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),_get=function(e,t,a){for(var i=!0;i;){var r=e,n=t,l=a;i=!1,null===r&&(r=Function.prototype);var o=Object.getOwnPropertyDescriptor(r,n);if(void 0!==o){if("value"in o)return o.value;var s=o.get;if(void 0===s)return;return s.call(l)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=n,a=l,i=!0,o=u=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_DisplayMode=require("./DisplayMode"),_DisplayMode2=_interopRequireDefault(_DisplayMode),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_style=require("../style"),_style2=_interopRequireDefault(_style),GenomeTiledCanvas=function(e){function t(e,a){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.source=e,this.height=Math.max(1,a)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(e,t,a){var i={contig:a.contig,start:Math.max(0,a.start()-1),stop:a.stop()+1},r=this.source.getRangeAsString(i);renderGenome(e,t,this.height,_ContigInterval2.default.fromGenomeRange(i),r)}},{key:"heightForRef",value:function(e){return this.height}},{key:"updateHeight",value:function(e){this.height=e}}]),t}(_TiledCanvas3.default),GenomeTrack=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return _react2.default.createElement("canvas",null)}},{key:"componentDidMount",value:function(){var e=this;this.tiles=new GenomeTiledCanvas(this.props.source,this.props.height),this.props.source.on("newdata",function(t){e.tiles.invalidateRange(t),e.updateVisualization()}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(e,this.props)&&(0,_shallowEquals2.default)(t,this.state)||(this.props.height!=e.height&&(this.tiles.updateHeight(this.props.height),this.tiles.invalidateAll()),this.updateVisualization())}},{key:"updateVisualization",value:function(){var e=_reactDom2.default.findDOMNode(this),t=this.props,a=t.width,i=t.height,r=t.range;if(0!==a){_d3utils2.default.sizeCanvas(e,a,i);var n=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));n.reset(),n.clearRect(0,0,n.canvas.width,n.canvas.height),this.tiles.renderToScreen(n,_ContigInterval2.default.fromGenomeRange(r),this.getScale())}}}]),t}(_react2.default.Component);GenomeTrack.displayName="reference",module.exports=GenomeTrack;

},{"../ContigInterval":180,"../style":217,"./DisplayMode":221,"./TiledCanvas":231,"./canvas-utils":233,"./d3utils":234,"data-canvas":7,"react":175,"react-dom":23,"shallow-equals":176}],225:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function renderGenotypes(e,t,a,n,s){n.forEach(function(a){var n=a.variant,r=a.sampleIds;e.pushObject(n),e.fillStyle=_style2.default.GENOTYPE_FILL,e.strokeStyle=_style2.default.GENOTYPE_FILL;var i=Math.round(t(n.position)),l=Math.round(t(n.end))-i;r.forEach(function(t){var a=yForRow(s.indexOf(t));e.fillRect(i-.2,a,l,_style2.default.GENOTYPE_HEIGHT),e.strokeRect(i-.2,a,l,_style2.default.GENOTYPE_HEIGHT)}),e.popObject()})}function yForRow(e){return e*(_style2.default.GENOTYPE_HEIGHT+_style2.default.GENOTYPE_SPACING)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_get=function(e,t,a){for(var n=!0;n;){var s=e,r=t,i=a;n=!1,null===s&&(s=Function.prototype);var l=Object.getOwnPropertyDescriptor(s,r);if(void 0!==l){if("value"in l)return l.value;var o=l.get;if(void 0===o)return;return o.call(i)}var u=Object.getPrototypeOf(s);if(null===u)return;e=u,t=r,a=i,n=!0,l=u=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),MONSTER_REQUEST=1e4,LABEL_WIDTH=100,GenotypeTiledCanvas=function(e){function t(e,a,n){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.source=e,this.options=n,this.sampleIds=a}return _inherits(t,e),_createClass(t,[{key:"update",value:function(e){this.options=e}},{key:"heightForRef",value:function(e){return yForRow(this.sampleIds.length)}},{key:"render",value:function(e,t,a,n,s){var r=new _ContigInterval2.default(a.contig,a.start()-1,a.stop()+1),i=this.source.getGenotypesInRange(r,s);renderGenotypes(e,t,r,i,this.sampleIds)}}]),t}(_TiledCanvas3.default),GenotypeTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={networkStatus:null},this.sampleIds=e.source.getSamples()}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e={height:"100%"},t={float:"left",overflow:"hidden","width:":LABEL_WIDTH+"px"},a={overflow:"hidden"},n=null,s=this.state.networkStatus;s&&(n=_react2.default.createElement("div",{ref:"status",className:"network-status-small"},_react2.default.createElement("div",{className:"network-status-message-small"},"Loading Genotypes…")));var r=this.props.range.stop-this.props.range.start;return r>=MONSTER_REQUEST?_react2.default.createElement("div",null,_react2.default.createElement("div",{className:"center"},"Zoom in to see genotypes"),_react2.default.createElement("canvas",{onClick:this.handleClick.bind(this)})):_react2.default.createElement("div",null,n,_react2.default.createElement("div",{ref:"container",style:e},_react2.default.createElement("div",{style:t},_react2.default.createElement("canvas",{ref:"labelCanvas"})),_react2.default.createElement("div",{style:a},_react2.default.createElement("canvas",{ref:"canvas",onClick:this.handleClick.bind(this)}))))}},{key:"componentDidMount",value:function(){var e=this;this.tiles=new GenotypeTiledCanvas(this.props.source,this.sampleIds,this.props.options),this.props.source.on("newdata",function(t){e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.source.on("networkprogress",function(t){e.setState({networkStatus:t})}),this.props.source.on("networkdone",function(t){e.setState({networkStatus:null})}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width-LABEL_WIDTH)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(e,this.props)&&(0,_shallowEquals2.default)(t,this.state)||(this.tiles.update(this.props.options),this.tiles.invalidateAll(),this.updateVisualization())}},{key:"drawLines",value:function(e){var t=this,a=this.props.width;null!==this.sampleIds&&(e.font="9px Arial",this.sampleIds.forEach(function(n){e.pushObject(n);var s=yForRow(t.sampleIds.indexOf(n));e.fillStyle=_style2.default.BACKGROUND_FILL,e.fillRect(0,s,a,_style2.default.GENOTYPE_HEIGHT),e.popObject()}))}},{key:"drawLabels",value:function(){var e=this,t=this.refs.labelCanvas,a=this.props.width;if(0!==a&&"undefined"!=typeof t){var n=yForRow(this.sampleIds.length);if(t.clientHeight!=n){var s=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(t));_d3utils2.default.sizeCanvas(t,LABEL_WIDTH,n),null!==this.sampleIds&&(s.font="9px Arial",this.sampleIds.forEach(function(t){s.pushObject(t);var a=yForRow(e.sampleIds.indexOf(t));s.fillStyle="black",s.fillText(t,0,a+_style2.default.GENOTYPE_HEIGHT),s.popObject()}))}}}},{key:"updateVisualization",value:function(){var e=this.refs.canvas,t=this.props.width;if(0!==t&&"undefined"!=typeof e){var a=yForRow(this.sampleIds.length);_d3utils2.default.sizeCanvas(e,t-LABEL_WIDTH,a);var n=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));this.drawLabels(),this.renderScene(n)}}},{key:"renderScene",value:function(e){var t=this.props.range,a=new _ContigInterval2.default(t.contig,t.start,t.stop),n=this.getScale();e.reset(),e.clearRect(0,0,e.canvas.width,e.canvas.height),this.drawLines(e),this.tiles.renderToScreen(e,a,n),e.restore()}},{key:"handleClick",value:function(e){var t=e.nativeEvent,a=t.offsetX,n=this.props.range,s=new _ContigInterval2.default(n.contig,n.start-1,n.stop+1),r=this.getScale(),i=Math.floor(r.invert(a))-2,l=i+2,o=this.props.source.getGenotypesInRange(s,1),u=_underscore2.default.find(o,function(e){return _utils2.default.tupleRangeOverlaps([[e.variant.position],[e.variant.end]],[[i],[l]])}),c=window.alert||console.log;if(u){var d="variant: "+JSON.stringify(u.variant),f="samples with variant: "+JSON.stringify(u.sampleIds);c(d+"\n"+f)}}}]),t}(_react2.default.Component);GenotypeTrack.displayName="genotypes",module.exports=GenotypeTrack;

},{"../ContigInterval":180,"../style":217,"../utils":218,"./TiledCanvas":231,"./canvas-utils":233,"./d3utils":234,"data-canvas":7,"react":175,"shallow-equals":176,"underscore":177}],226:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var n=e,o=t,u=a;r=!1,null===n&&(n=Function.prototype);var i=Object.getOwnPropertyDescriptor(n,o);if(void 0!==i){if("value"in i)return i.value;var l=i.get;if(void 0===l)return;return l.call(u)}var s=Object.getPrototypeOf(n);if(null===s)return;e=s,t=o,a=u,r=!0,i=s=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_sourcesEmptySource=require("../sources/EmptySource"),_sourcesEmptySource2=_interopRequireDefault(_sourcesEmptySource),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),LocationTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"render",value:function(){return _react2.default.createElement("canvas",null)}},{key:"componentDidMount",value:function(){this.updateVisualization()}},{key:"componentDidUpdate",value:function(e,t){this.updateVisualization()}},{key:"updateVisualization",value:function(){var e=_reactDom2.default.findDOMNode(this),t=this.props,a=t.range,r=t.width,n=t.height,o=this.getScale();_d3utils2.default.sizeCanvas(e,r,n);var u=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));u.save(),u.reset(),u.clearRect(0,0,u.canvas.width,u.canvas.height);var i=Math.floor((a.stop+a.start)/2),l=Math.round(o(i+1)),s=Math.round(o(i));_canvasUtils2.default.drawLine(u,s-.5,0,s-.5,n),_canvasUtils2.default.drawLine(u,l-.5,0,l-.5,n);var c=n/2;u.fillStyle=_style2.default.LOC_FONT_COLOR,u.font=_style2.default.LOC_FONT_STYLE,u.fillText(i.toLocaleString()+" bp",l+_style2.default.LOC_TICK_LENGTH+_style2.default.LOC_TEXT_PADDING,c+_style2.default.LOC_TEXT_Y_OFFSET),_canvasUtils2.default.drawLine(u,l-.5,c-.5,l+_style2.default.LOC_TICK_LENGTH-.5,c-.5),u.restore()}}]),t}(_react2.default.Component);LocationTrack.displayName="location",LocationTrack.defaultSource=_sourcesEmptySource2.default.create(),module.exports=LocationTrack;

},{"../sources/EmptySource":210,"../style":217,"./canvas-utils":233,"./d3utils":234,"data-canvas":7,"react":175,"react-dom":23}],227:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function spanAndInsert(e){for(var t=!0;t;){var r=e;if(t=!1,1==r.length)return{insert:null,span:r[0]};if(2!=r.length)throw"Called spanAndInsert with "+r.length+" \notin [1, 2]";if(r[0].chrOnContig(r[1].contig)){var n=r[0].interval,i=r[1].interval,u=n.start<i.start?new _Interval2.default(n.stop,i.start):new _Interval2.default(i.stop,n.start),s=_Interval2.default.boundingInterval([n,i]);return{insert:u,span:new _ContigInterval2.default(r[0].contig,s.start,s.stop)}}e=[r[0]],t=!0}}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_pileuputils=require("./pileuputils"),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),MIN_OUTLIER_PERCENTILE=.5,MAX_OUTLIER_PERCENTILE=99.5,MAX_INSERT_SIZE=3e4,MIN_READS_FOR_OUTLIERS=500,PileupCache=function(){function e(t,r){_classCallCheck(this,e),this.groups={},this.refToPileup={},this.referenceSource=t,this.viewAsPairs=r,this._insertStats=null}return _createClass(e,[{key:"groupKey",value:function(e){return this.viewAsPairs?e.name+":"+e.ref:e.getKey()}},{key:"addAlignment",value:function(e){this._insertStats=null;var t=this.groupKey(e),r=e.getInterval();t in this.groups||(this.groups[t]={key:t,row:-1,insert:null,span:r,alignments:[]});var n=this.groups[t];if(!_underscore2.default.find(n.alignments,function(t){return t.read==e})){var i=(0,_pileuputils.getOpInfo)(e,this.referenceSource),u={read:e,strand:e.getStrand(),refLength:r.length(),ops:i.ops,mismatches:i.mismatches};n.alignments.push(u);var s=null;if(1==n.alignments.length){if(this.viewAsPairs){var a=e.getMateProperties(),l=[r];a&&a.ref&&a.ref==e.ref&&(s=new _ContigInterval2.default(a.ref,a.pos,a.pos+r.length()),l.push(s)),n=_underscore2.default.extend(n,spanAndInsert(l))}else n.span=r;e.ref in this.refToPileup||(this.refToPileup[e.ref]=[]);var o=this.refToPileup[e.ref];n.row=(0,_pileuputils.addToPileup)(n.span.interval,o)}else if(2==n.alignments.length){s=n.alignments[0].read.getInterval();var f=spanAndInsert([r,s]),p=f.span,c=f.insert;n.insert=c,c&&(n.span=p)}}}},{key:"updateMismatches",value:function(e){for(var t in this.groups){var r=this.groups[t].alignments,n=!0,i=!1,u=void 0;try{for(var s,a=r[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var l=s.value,o=l.read;if(o.getInterval().chrIntersects(e)){var f=(0,_pileuputils.getOpInfo)(o,this.referenceSource);l.mismatches=f.mismatches}}}catch(e){i=!0,u=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw u}}}}},{key:"pileupForRef",value:function(e){if(e in this.refToPileup)return this.refToPileup[e];var t=_utils2.default.altContigName(e);return t in this.refToPileup?this.refToPileup[t]:[]}},{key:"pileupHeightForRef",value:function(e){var t=this.pileupForRef(e);return t?t.length:0}},{key:"getGroupsOverlapping",value:function(e){return _underscore2.default.filter(this.groups,function(t){return t.span.chrIntersects(e)})}},{key:"anyGroupsOverlapping",value:function(e){for(var t in this.groups){var r=this.groups[t];if(r.span.chrIntersects(e))return!0}return!1}},{key:"sortReadsAt",value:function(e,t){var r=this.pileupForRef(e),n=_underscore2.default.filter(this.groups,function(r){return _underscore2.default.any(r.alignments,function(r){return r.read.getInterval().chrContainsLocus(e,t)})}),i=_underscore2.default.mapObject(_underscore2.default.groupBy(n,function(e){return e.row}),function(e){return _underscore2.default.min(e,function(e){return e.span.start()}).span.start()}),u=_underscore2.default.sortBy(_underscore2.default.range(0,r.length),function(e){return i[e]||1/0}),s=[];u.forEach(function(e,t){s[e]=t});var a=_underscore2.default.range(0,r.length).map(function(e){return r[s[e]]}),l=e in this.refToPileup?e:_utils2.default.altContigName(e);this.refToPileup[l]=a,_underscore2.default.each(this.groups,function(t){t.span.chrOnContig(e)&&(t.row=s[t.row])})}},{key:"getInsertStats",value:function(){if(this._insertStats)return this._insertStats;var e=_underscore2.default.map(this.groups,function(e){return e.alignments[0].read.getInferredInsertSize()}).filter(function(e){return e<MAX_INSERT_SIZE}),t=e.length>=MIN_READS_FOR_OUTLIERS?{minOutlierSize:_utils2.default.computePercentile(e,MIN_OUTLIER_PERCENTILE),maxOutlierSize:_utils2.default.computePercentile(e,MAX_OUTLIER_PERCENTILE)}:{minOutlierSize:0,maxOutlierSize:1/0};return this._insertStats=t,t}}]),e}();module.exports=PileupCache;

},{"../ContigInterval":180,"../Interval":183,"../utils":218,"./pileuputils":235,"underscore":177}],228:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function renderBars(e,t,a,r,n,i){if(!_underscore2.default.isEmpty(n)){var o=t(1)-t(0),s=o>_style2.default.COVERAGE_MIN_BAR_WIDTH_FOR_GAP,l=s?1:0,u=function(e,r){var n=Math.round(t(1+e)),i=Math.round(t(2+e))-l,o=Math.round(a(r));return{barX1:n,barX2:i,barY:o}},c={},f=a(0),h=r.start(),_=r.stop(),p=u(h,h in n?n[h].count:0),v=p.barX1;e.fillStyle=_style2.default.COVERAGE_BIN_COLOR,e.beginPath(),e.moveTo(v,f);for(var d=h;d<_;d++){var g=n[d];if(g){e.pushObject(g);var C=u(d,g.count),y=C.barX1,O=C.barX2,T=C.barY;e.lineTo(y,T),e.lineTo(O,T),s&&(e.lineTo(O,f),e.lineTo(O+1,f)),SHOW_MISMATCHES&&!_underscore2.default.isEmpty(g.mismatches)&&(c[d]=g),e.popObject()}}var R=u(_,_ in n?n[_].count:0),b=R.barX2;e.lineTo(b,f),e.closePath(),e.fill(),_underscore2.default.each(c,function(t,r){if(t.mismatches){var n=_underscore2.default.clone(t.mismatches);r=Number(r);var o=_underscore2.default.reduce(n,function(e,t){return e+t}),s=_underscore2.default.max(n);s>MISMATCH_THRESHOLD&&o>i.vafColorThreshold*t.count&&o<t.count&&t.ref&&(n[t.ref]=t.count-o);var l=u(r,t.count),c=l.barX1,f=l.barX2;e.pushObject(t);var h=0;_underscore2.default.chain(n).map(function(e,t){return{count:e,base:t}}).filter(function(e){var t=e.count;return t>MISMATCH_THRESHOLD}).sortBy(function(e){var t=e.count;return-t}).each(function(t){var n=t.count,i=t.base,o={position:1+r,count:n,base:i};e.pushObject(o),e.fillStyle=_style2.default.BASE_COLORS[i];var s=a(h);e.fillRect(c,s,Math.max(1,f-c),a(h+n)-s),h+=n,e.popObject()}),e.popObject()}})}}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var n=e,i=t,o=a;r=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,i);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;e=u,t=i,a=o,r=!0,s=u=void 0}},_sourcesGA4GHDataSource=require("../sources/GA4GHDataSource"),_sourcesGA4GHDataSource2=_interopRequireDefault(_sourcesGA4GHDataSource),_react=require("react"),_react2=_interopRequireDefault(_react),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_CoverageCache=require("./CoverageCache"),_CoverageCache2=_interopRequireDefault(_CoverageCache),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_style=require("../style"),_style2=_interopRequireDefault(_style),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),SHOW_MISMATCHES=!0,MISMATCH_THRESHOLD=1,CoverageTiledCanvas=function(e){function t(e,a,r){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.cache=e,this.height=Math.max(1,a),this.options=r}return _inherits(t,e),_createClass(t,[{key:"heightForRef",value:function(e){return this.height}},{key:"update",value:function(e,t){this.height=Math.max(1,e),this.options=t}},{key:"yScaleForRef",value:function(e){var t=this.cache.maxCoverageForRef(e),a=10;return _scale2.default.linear().domain([t,0]).range([a,this.height-a]).nice()}},{key:"render",value:function(e,t,a){var r=this.cache.binsForRef(a.contig),n=this.yScaleForRef(a.contig),i=new _ContigInterval2.default(a.contig,a.start()-1,a.stop()+1);renderBars(e,t,n,i,r,this.options)}}]),t}(_TiledCanvas3.default),PileupCoverageTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=this.props.range.stop-this.props.range.start;return e<=_sourcesGA4GHDataSource2.default.MAX_BASE_PAIRS_TO_FETCH?_react2.default.createElement("canvas",{ref:"canvas",onClick:this.handleClick.bind(this)}):_react2.default.createElement("div",null)}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidMount",value:function(){var e=this;this.cache=new _CoverageCache2.default(this.props.referenceSource),this.tiles=new CoverageTiledCanvas(this.cache,this.props.height,this.props.options),this.props.source.on("newdata",function(t){var a=e.cache.maxCoverageForRef(t.contig);e.props.source.getAlignmentsInRange(t).forEach(function(t){return e.cache.addAlignment(t)});var r=e.cache.maxCoverageForRef(t.contig);a!=r?e.tiles.invalidateAll():e.tiles.invalidateRange(t),e.visualizeCoverage()}),this.props.referenceSource.on("newdata",function(t){e.cache.updateMismatches(t),e.tiles.invalidateRange(t),e.visualizeCoverage()})}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(this.props,e)&&(0,_shallowEquals2.default)(this.state,t)||(this.props.height==e.height&&this.props.options==e.options||(this.tiles.update(this.props.height,this.props.options),this.tiles.invalidateAll()),this.visualizeCoverage())}},{key:"getContext",value:function(){var e=this.refs.canvas,t=e.getContext("2d");return t}},{key:"renderTicks",value:function(e,t){var a=t.domain()[0];[0,Math.round(a/2),a].forEach(function(a){e.pushObject({value:a,type:"tick"});var r=Math.round(t(a))+10;if(e.strokeStyle=_style2.default.COVERAGE_FONT_COLOR,_canvasUtils2.default.drawLine(e,0,r,_style2.default.COVERAGE_TICK_LENGTH,r),e.popObject(),a>0){var n=a+"X";e.pushObject({value:a,label:n,type:"label"}),e.font=_style2.default.COVERAGE_FONT_STYLE;var i=_style2.default.COVERAGE_TICK_LENGTH+_style2.default.COVERAGE_TEXT_PADDING,o=r+_style2.default.COVERAGE_TEXT_Y_OFFSET;e.strokeStyle="white",e.lineWidth=2,e.strokeText(n,i,o),e.lineWidth=1,e.fillStyle=_style2.default.COVERAGE_FONT_COLOR,e.fillText(n,i,o),e.popObject()}})}},{key:"visualizeCoverage",value:function(){var e=this.refs.canvas,t=this.props.width,a=this.props.height,r=_ContigInterval2.default.fromGenomeRange(this.props.range);if(0!==t&&"undefined"!=typeof e){_d3utils2.default.sizeCanvas(e,t,a);var n=_dataCanvas2.default.getDataContext(this.getContext());n.save(),n.reset(),n.clearRect(0,0,n.canvas.width,n.canvas.height);var i=this.tiles.yScaleForRef(r.contig);this.tiles.renderToScreen(n,r,this.getScale()),this.renderTicks(n,i),n.restore()}}},{key:"handleClick",value:function(e){var t=e.nativeEvent,a=t.offsetX,r=_ContigInterval2.default.fromGenomeRange(this.props.range),n=this.getScale(),i=this.cache.binsForRef(r.contig),o=Math.floor(n.invert(a))-1,s=i[o],l=window.alert||console.log;if(s){var u=s.mismatches?_underscore2.default.reduce(s.mismatches,function(e,t){return e+t}):0,c=s.ref||this.props.referenceSource.getRangeAsString({contig:r.contig,start:o,stop:o}),f=_underscore2.default.extend({position:r.contig+":"+(1+o),"read depth":s.count},s.mismatches);f[c]=s.count-u,l(JSON.stringify(f,null,"  "))}}}]),t}(_react2.default.Component);PileupCoverageTrack.displayName="coverage",PileupCoverageTrack.defaultOptions={vafColorThreshold:.2},module.exports=PileupCoverageTrack;

},{"../ContigInterval":180,"../scale":206,"../sources/GA4GHDataSource":212,"../style":217,"./CoverageCache":219,"./TiledCanvas":231,"./canvas-utils":233,"./d3utils":234,"data-canvas":7,"react":175,"shallow-equals":176,"underscore":177}],229:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function pileupHeight(e){var t=Math.min(MAX_ROWS,e);return t*(READ_HEIGHT+READ_SPACING)}function isRendered(e){return e.op==_pileuputils.CigarOp.MATCH||e.op==_pileuputils.CigarOp.DELETE||e.op==_pileuputils.CigarOp.INSERT}function renderPileup(e,t,a,i,r,n){function s(a,i,r,n){var s=t(a+1),l=t(a+i+1),o=r+READ_HEIGHT,u=Math.min(READ_STRAND_ARROW_WIDTH,(l-s)/6);e.beginPath(),"R"==n?(e.moveTo(s,r),e.lineTo(l-u,r),e.lineTo(l,(r+o)/2),e.lineTo(l-u,o),e.lineTo(s,o)):(e.moveTo(l,r),e.lineTo(s+u,r),e.lineTo(s,(r+o)/2),e.lineTo(s+u,o),e.lineTo(l,o)),e.fill()}function l(a,i,r){switch(a.op){case _pileuputils.CigarOp.MATCH:if(a.arrow)s(a.pos,a.length,i,a.arrow);else{var n=t(a.pos+1);e.fillRect(n,i,t(a.pos+a.length+1)-n,READ_HEIGHT)}break;case _pileuputils.CigarOp.DELETE:var l=t(a.pos+1),o=t(a.pos+1+a.length),u=i+READ_HEIGHT/2-.5;e.save(),e.fillStyle=_style2.default.DELETE_COLOR,e.fillRect(l,u,o-l,1),e.restore();break;case _pileuputils.CigarOp.INSERT:e.save(),e.fillStyle=_style2.default.INSERT_COLOR;var c=t(a.pos+1)-2,p=i-1,d=i+READ_HEIGHT+2;e.fillRect(c,p,1,d-p),e.restore()}}function o(t,a){e.pushObject(t),e.save(),r&&(e.fillStyle="+"==t.strand?_style2.default.ALIGNMENT_PLUS_STRAND_COLOR:_style2.default.ALIGNMENT_MINUS_STRAND_COLOR),t.ops.forEach(function(e){isRendered(e)&&l(e,a,t)}),t.mismatches.forEach(function(e){return c(e,a)}),e.restore(),e.popObject()}function u(a){if(e.save(),i&&a.insert){var r=a.span.length();r<i.minOutlierSize?e.fillStyle="blue":r>i.maxOutlierSize?e.fillStyle="red":e.fillStyle=_style2.default.ALIGNMENT_COLOR}else e.fillStyle=_style2.default.ALIGNMENT_COLOR;if(a.row<=MAX_ROWS){var n=yForRow(a.row);if(e.pushObject(a),a.insert){var s=a.insert,l=t(s.start+1),u=t(s.stop+1);e.fillRect(l,n+READ_HEIGHT/2-.5,u-l,1)}a.alignments.forEach(function(e){return o(e,n)}),e.popObject(),e.restore()}}function c(i,r){a.interval.contains(i.pos)&&(e.pushObject(i),e.save(),e.fillStyle=_style2.default.BASE_COLORS[i.basePair],e.globalAlpha=opacityForQuality(i.quality),e.textAlign="center",f?e.fillText(i.basePair,t(1.5+i.pos),r+READ_HEIGHT-2):e.fillRect(t(1+i.pos),r,p-1,READ_HEIGHT),e.restore(),e.popObject())}var p=t(1)-t(0),d=_DisplayMode2.default.getDisplayMode(p),f=_DisplayMode2.default.isText(d);e.font=_style2.default.TIGHT_TEXT_STYLE,n.forEach(function(e){return u(e)})}function yForRow(e){return e*(READ_HEIGHT+READ_SPACING)}function opacityForQuality(e){var t=Q_SCALE(e);return t=Math.round(10*t+.5)/10,Math.min(1,t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),_get=function(e,t,a){for(var i=!0;i;){var r=e,n=t,s=a;i=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,n);if(void 0!==l){if("value"in l)return l.value;var o=l.get;if(void 0===o)return;return o.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=n,a=s,i=!0,l=u=void 0}},_sourcesGA4GHDataSource=require("../sources/GA4GHDataSource"),_sourcesGA4GHDataSource2=_interopRequireDefault(_sourcesGA4GHDataSource),_react=require("react"),_react2=_interopRequireDefault(_react),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_pileuputils=require("./pileuputils"),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_DisplayMode=require("./DisplayMode"),_DisplayMode2=_interopRequireDefault(_DisplayMode),_PileupCache=require("./PileupCache"),_PileupCache2=_interopRequireDefault(_PileupCache),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),READ_HEIGHT=13,READ_SPACING=2,MAX_ROWS=1e3,READ_STRAND_ARROW_WIDTH=5,SUPPORTS_DASHES="undefined"!=typeof CanvasRenderingContext2D&&!!CanvasRenderingContext2D.prototype.setLineDash,PileupTiledCanvas=function(e){function t(e,a){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.cache=e,this.options=a}return _inherits(t,e),_createClass(t,[{key:"update",value:function(e){this.options=e}},{key:"heightForRef",value:function(e){return pileupHeight(this.cache.pileupHeightForRef(e))}},{key:"render",value:function(e,t,a){var i=new _ContigInterval2.default(a.contig,a.start()-1,a.stop()+1),r=this.cache.getGroupsOverlapping(i),n=this.options.colorByInsert?this.cache.getInsertStats():null;renderPileup(e,t,i,n,this.options.colorByStrand,r)}}]),t}(_TiledCanvas3.default),MIN_Q=5,MAX_Q=20,Q_SCALE=_scale2.default.linear().domain([MIN_Q,MAX_Q]).range([.1,.9]).clamp(!0),PileupTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={networkStatus:null}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e={height:"100%"},t=null,a=this.state.networkStatus;if(a){var i=(0,_pileuputils.formatStatus)(a);t=_react2.default.createElement("div",{ref:"status",className:"network-status"},_react2.default.createElement("div",{className:"network-status-message"},"Loading alignments… (",i,")"))}var r=this.props.range.stop-this.props.range.start;return r>_sourcesGA4GHDataSource2.default.MAX_BASE_PAIRS_TO_FETCH?_react2.default.createElement("div",null,_react2.default.createElement("div",{className:"center"},"Zoom in to see alignments"),_react2.default.createElement("canvas",{onClick:this.handleClick.bind(this)})):_react2.default.createElement("div",null,t,_react2.default.createElement("div",{ref:"container",style:e},_react2.default.createElement("canvas",{ref:"canvas",onClick:this.handleClick.bind(this)})))}},{key:"componentDidMount",value:function(){var e=this;this.cache=new _PileupCache2.default(this.props.referenceSource,this.props.options.viewAsPairs),this.tiles=new PileupTiledCanvas(this.cache,this.props.options),this.props.source.on("newdata",function(t){e.updateReads(t),e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.referenceSource.on("newdata",function(t){e.cache.updateMismatches(t),e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.source.on("networkprogress",function(t){e.setState({networkStatus:t})}),this.props.source.on("networkdone",function(t){e.setState({networkStatus:null})}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){var a=!1;this.props.options!=e.options&&(this.handleOptionsChange(e.options),a=!0),(0,_shallowEquals2.default)(this.props,e)&&(0,_shallowEquals2.default)(this.state,t)&&!a||this.updateVisualization()}},{key:"handleOptionsChange",value:function(e){this.tiles.invalidateAll(),e.viewAsPairs!=this.props.options.viewAsPairs?(this.cache=new _PileupCache2.default(this.props.referenceSource,this.props.options.viewAsPairs),this.tiles=new PileupTiledCanvas(this.cache,this.props.options),this.updateReads(_ContigInterval2.default.fromGenomeRange(this.props.range))):e.colorByInsert!=this.props.options.colorByInsert&&(this.tiles.update(this.props.options),this.tiles.invalidateAll(),this.updateVisualization()),e.sort!=this.props.options.sort&&this.handleSort()}},{key:"updateReads",value:function(e){var t=this,a=this.cache.anyGroupsOverlapping(e),i=this.props.source.getAlignmentsInRange(e);i.forEach(function(e){return t.cache.addAlignment(e)}),!a&&this.cache.anyGroupsOverlapping(e)&&this.handleSort()}},{key:"updateVisualization",value:function(){var e=this.refs.canvas,t=this.props.width;if(0!==t&&"undefined"!=typeof e){var a=yForRow(this.tiles.heightForRef(this.props.range.contig));_d3utils2.default.sizeCanvas(e,t,a);var i=_canvasUtils2.default.getContext(e),r=_dataCanvas2.default.getDataContext(i);this.renderScene(r)}}},{key:"renderScene",value:function(e){var t=this.props.range,a=new _ContigInterval2.default(t.contig,t.start,t.stop),i=this.getScale();e.reset(),e.clearRect(0,0,e.canvas.width,e.canvas.height),this.tiles.renderToScreen(e,a,i),this.renderCenterLine(e,a,i);var r=_d3utils2.default.findParent(this.refs.canvas,"track-content");r&&(r.scrollLeft=0)}},{key:"renderCenterLine",value:function(e,t,a){var i=Math.floor((t.stop()+t.start())/2),r=Math.ceil(a(i+1)),n=Math.floor(a(i)),s=e.canvas.height;if(e.save(),e.lineWidth=1,SUPPORTS_DASHES&&e.setLineDash([5,5]),r-n<3){var l=Math.round((n+r)/2);_canvasUtils2.default.drawLine(e,l-.5,0,l-.5,s)}else _canvasUtils2.default.drawLine(e,n-.5,0,n-.5,s),_canvasUtils2.default.drawLine(e,r-.5,0,r-.5,s);e.restore()}},{key:"handleSort",value:function(){var e=this.props.range,t=e.start,a=e.stop,i=(t+a)/2;this.cache.sortReadsAt(this.props.range.contig,i),this.tiles.invalidateAll(),this.updateVisualization()}},{key:"handleClick",value:function(e){var t=e.nativeEvent,a=t.offsetX,i=t.offsetY,r=_canvasUtils2.default.getContext(this.refs.canvas),n=new _dataCanvas2.default.ClickTrackingContext(r,a,i),s=this.props.range,l=new _ContigInterval2.default(s.contig,s.start,s.stop),o=this.getScale(),u=this.cache.getGroupsOverlapping(l);renderPileup(n,o,l,null,!1,u);var c=_underscore2.default.find(n.hits[0],function(e){return e.read}),p=window.alert||console.log;c&&p(c.read.name)}}]),t}(_react2.default.Component);PileupTrack.displayName="pileup",PileupTrack.defaultOptions={viewAsPairs:!1,colorByInsert:!0,colorByStrand:!1},PileupTrack.getOptionsMenu=function(e){return[{key:"view-pairs",label:"View as pairs",checked:e.viewAsPairs},"-",{key:"color-insert",label:"Color by insert size",checked:e.colorByInsert},{key:"color-strand",label:"Color by strand",checked:e.colorByStrand},"-",{key:"sort",label:"Sort alignments"}]};var messageId=1;PileupTrack.handleSelectOption=function(e,t){var a=_underscore2.default.clone(t);return"view-pairs"==e?(a.viewAsPairs=!a.viewAsPairs,a):"color-insert"==e?(a.colorByInsert=!a.colorByInsert,a.colorByInsert&&(a.colorByStrand=!1),a):"color-strand"==e?(a.colorByStrand=!a.colorByStrand,a.colorByStrand&&(a.colorByInsert=!1),a):"sort"==e?(a.sort=messageId++,a):t},module.exports=PileupTrack;

},{"../ContigInterval":180,"../scale":206,"../sources/GA4GHDataSource":212,"../style":217,"./DisplayMode":221,"./PileupCache":227,"./TiledCanvas":231,"./canvas-utils":233,"./d3utils":234,"./pileuputils":235,"data-canvas":7,"react":175,"shallow-equals":176,"underscore":177}],230:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),_get=function(e,t,a){for(var r=!0;r;){var l=e,u=t,n=a;r=!1,null===l&&(l=Function.prototype);var i=Object.getOwnPropertyDescriptor(l,u);if(void 0!==i){if("value"in i)return i.value;var o=i.get;if(void 0===o)return;return o.call(n)}var s=Object.getPrototypeOf(l);if(null===s)return;e=s,t=u,a=n,r=!0,i=s=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_sourcesEmptySource=require("../sources/EmptySource"),_sourcesEmptySource2=_interopRequireDefault(_sourcesEmptySource),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),ScaleTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e)}return _inherits(t,e),_createClass(t,[{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"render",value:function(){return _react2.default.createElement("canvas",{ref:"canvas"})}},{key:"componentDidMount",value:function(){this.updateVisualization()}},{key:"componentDidUpdate",value:function(e,t){this.updateVisualization()}},{key:"getDOMNode",value:function(){return _reactDom2.default.findDOMNode(this)}},{key:"updateVisualization",value:function(){var e=this.getDOMNode(),t=this.props,a=t.range,r=t.width,l=t.height;_d3utils2.default.sizeCanvas(e,r,l);var u=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));u.save(),u.reset(),u.clearRect(0,0,u.canvas.width,u.canvas.height);var n=a.stop-a.start+1,i=Math.round(r/2),o=Math.round(l/2),s=_d3utils2.default.formatRange(n),c=s.prefix,_=s.unit;u.lineWidth=1,u.fillStyle=_style2.default.SCALE_FONT_COLOR,u.font=_style2.default.SCALE_FONT_STYLE,u.textAlign="center",u.fillText(c+" "+_,i,o+_style2.default.SCALE_TEXT_Y_OFFSET),_canvasUtils2.default.drawLine(u,.5,o-.5,i-_style2.default.SCALE_LINE_PADDING-.5,o-.5),u.beginPath(),u.moveTo(.5+_style2.default.SCALE_ARROW_SIZE,o-_style2.default.SCALE_ARROW_SIZE-.5),u.lineTo(.5,o-.5),u.lineTo(.5+_style2.default.SCALE_ARROW_SIZE,o+_style2.default.SCALE_ARROW_SIZE-.5),u.closePath(),u.fill(),u.stroke(),_canvasUtils2.default.drawLine(u,i+_style2.default.SCALE_LINE_PADDING-.5,o-.5,r-.5,o-.5),u.beginPath(),u.moveTo(r-_style2.default.SCALE_ARROW_SIZE-.5,o-_style2.default.SCALE_ARROW_SIZE-.5),u.lineTo(r-.5,o-.5),u.lineTo(r-_style2.default.SCALE_ARROW_SIZE-.5,o+_style2.default.SCALE_ARROW_SIZE-.5),u.closePath(),u.fill(),u.stroke(),u.restore()}}]),t}(_react2.default.Component);ScaleTrack.displayName="scale",ScaleTrack.defaultSource=_sourcesEmptySource2.default.create(),module.exports=ScaleTrack;

},{"../sources/EmptySource":210,"../style":217,"./canvas-utils":233,"./d3utils":234,"data-canvas":7,"react":175,"react-dom":23}],231:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_scale=require("../scale"),_scale2=_interopRequireDefault(_scale),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_ResolutionCache=require("../ResolutionCache"),_Interval=require("../Interval"),_Interval2=_interopRequireDefault(_Interval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),EPSILON=1e-6,MIN_PX_PER_BUFFER=500,DEBUG_RENDER_TILE_EDGES=!1,TiledCanvas=function(){function e(){_classCallCheck(this,e),this.tileCache=[]}return _createClass(e,[{key:"renderTile",value:function(e){var t=e.range,n=this.heightForRef(t.contig),a=Math.round(e.pixelsPerBase*t.length());e.buffer=document.createElement("canvas"),_d3utils2.default.sizeCanvas(e.buffer,a,n);var r=_scale2.default.linear().domain([t.start(),t.stop()+1]).range([0,a]),i=_canvasUtils2.default.getContext(e.buffer),l=_dataCanvas2.default.getDataContext(i),u=_ResolutionCache.ResolutionCache.getResolution(e.originalRange.interval);this.render(l,r,t,e.originalRange,u)}},{key:"makeNewTiles",value:function(t,n,a){var r=this,i=e.getNewTileRanges(t,a.interval,n),l=i.map(function(e){return{pixelsPerBase:n,range:new _ContigInterval2.default(a.contig,e.start,e.stop),originalRange:a,buffer:document.createElement("canvas")}});return l.forEach(function(e){return r.renderTile(e)}),this.tileCache=this.tileCache.concat(l),this.tileCache.sort(function(e,t){return _ContigInterval2.default.compare(e.range,t.range)}),l}},{key:"renderToScreen",value:function(e,t,n){var a=n(1)-n(0),r=this.tileCache.filter(function(e){return Math.abs(e.pixelsPerBase-a)<EPSILON&&t.chrOnContig(e.range.contig)}),i=this.heightForRef(t.contig),l=r.map(function(e){return e.range.interval});t.interval.isCoveredBy(l)||(r=r.concat(this.makeNewTiles(l,a,t)));var u=r.filter(function(e){return t.chrIntersects(e.range)});u.forEach(function(t){var a=Math.round(n(t.range.start())),r=Math.round(n(t.range.stop()+1)),l=r-a;0!==t.buffer.height&&(e.drawImage(t.buffer,0,0,t.buffer.width,t.buffer.height,a,0,l,t.buffer.height),DEBUG_RENDER_TILE_EDGES&&(e.save(),e.strokeStyle="black",_canvasUtils2.default.drawLine(e,a-.5,0,a-.5,i),_canvasUtils2.default.drawLine(e,r-.5,0,r-.5,i),e.restore()))})}},{key:"invalidateAll",value:function(){this.tileCache=[]}},{key:"invalidateRange",value:function(e){this.tileCache=this.tileCache.filter(function(t){return!t.range.chrIntersects(e)})}},{key:"heightForRef",value:function(e){throw"Not implemented"}},{key:"render",value:function(e,t,n,a,r){throw"Not implemented"}}],[{key:"getNewTileRanges",value:function(e,t,n){var a=Math.ceil(MIN_PX_PER_BUFFER/n),r=Math.floor(t.start/a)*a,i=_underscore2.default.range(r,t.stop,a).map(function(e){return new _Interval2.default(e,e+a-1)}).filter(function(t){return!t.isCoveredBy(e)});return _utils2.default.flatMap(i,function(t){return t.complementIntervals(e)}).filter(function(e){return e.intersects(t)})}}]),e}();module.exports=TiledCanvas;

},{"../ContigInterval":180,"../Interval":183,"../ResolutionCache":188,"../scale":206,"../utils":218,"./canvas-utils":233,"./d3utils":234,"data-canvas":7,"underscore":177}],232:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function renderVariants(e,t,a,n){e.font=_style2.default.GENE_FONT_SIZE+"px "+_style2.default.GENE_FONT,e.textAlign="center",n.forEach(function(a){e.pushObject(a),e.fillStyle=_style2.default.BASE_COLORS[a.alt],e.strokeStyle=_style2.default.BASE_COLORS[a.ref];var n=Math.round(t(a.position)),r=Math.round(t(a.end))-n;e.fillRect(n-.2,0,r,_style2.default.VARIANT_HEIGHT),e.strokeRect(n-.2,0,r,_style2.default.VARIANT_HEIGHT),e.popObject()})}var _createClass=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_get=function(e,t,a){for(var n=!0;n;){var r=e,i=t,s=a;n=!1,null===r&&(r=Function.prototype);var l=Object.getOwnPropertyDescriptor(r,i);if(void 0!==l){if("value"in l)return l.value;var o=l.get;if(void 0===o)return;return o.call(s)}var u=Object.getPrototypeOf(r);if(null===u)return;e=u,t=i,a=s,n=!0,l=u=void 0}},_react=require("react"),_react2=_interopRequireDefault(_react),_underscore=require("underscore"),_underscore2=_interopRequireDefault(_underscore),_d3utils=require("./d3utils"),_d3utils2=_interopRequireDefault(_d3utils),_shallowEquals=require("shallow-equals"),_shallowEquals2=_interopRequireDefault(_shallowEquals),_ContigInterval=require("../ContigInterval"),_ContigInterval2=_interopRequireDefault(_ContigInterval),_canvasUtils=require("./canvas-utils"),_canvasUtils2=_interopRequireDefault(_canvasUtils),_TiledCanvas2=require("./TiledCanvas"),_TiledCanvas3=_interopRequireDefault(_TiledCanvas2),_dataCanvas=require("data-canvas"),_dataCanvas2=_interopRequireDefault(_dataCanvas),_style=require("../style"),_style2=_interopRequireDefault(_style),_utils=require("../utils"),_utils2=_interopRequireDefault(_utils),MONSTER_REQUEST=5e5,VariantTiledCanvas=function(e){function t(e,a){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.source=e,this.options=a}return _inherits(t,e),_createClass(t,[{key:"update",value:function(e){this.options=e}},{key:"heightForRef",value:function(e){return _style2.default.VARIANT_HEIGHT}},{key:"render",value:function(e,t,a,n,r){var i=new _ContigInterval2.default(a.contig,a.start()-1,a.stop()+1),s=this.source.getVariantsInRange(i,r);renderVariants(e,t,i,s)}}]),t}(_TiledCanvas3.default),VariantTrack=function(e){function t(e){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={networkStatus:null}}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){var e=null,t=this.state.networkStatus;t&&(e=_react2.default.createElement("div",{ref:"status",className:"network-status-small"},_react2.default.createElement("div",{className:"network-status-message-small"},"Loading Variants…")));var a=this.props.range.stop-this.props.range.start;return a>MONSTER_REQUEST?_react2.default.createElement("div",null,_react2.default.createElement("div",{className:"center"},"Zoom in to see variants"),_react2.default.createElement("canvas",{onClick:this.handleClick.bind(this)})):_react2.default.createElement("div",null,e,_react2.default.createElement("div",{ref:"container"},_react2.default.createElement("canvas",{ref:"canvas",onClick:this.handleClick.bind(this)})))}},{key:"componentDidMount",value:function(){var e=this;this.tiles=new VariantTiledCanvas(this.props.source,this.props.options),this.props.source.on("newdata",function(t){e.tiles.invalidateRange(t),e.updateVisualization()}),this.props.source.on("networkprogress",function(t){e.setState({networkStatus:t})}),this.props.source.on("networkdone",function(t){e.setState({networkStatus:null})}),this.updateVisualization()}},{key:"getScale",value:function(){return _d3utils2.default.getTrackScale(this.props.range,this.props.width)}},{key:"componentDidUpdate",value:function(e,t){(0,_shallowEquals2.default)(e,this.props)&&(0,_shallowEquals2.default)(t,this.state)||(this.tiles.update(this.props.options),this.tiles.invalidateAll(),this.updateVisualization())}},{key:"updateVisualization",value:function(){var e=this.refs.canvas,t=this.props,a=t.width,n=t.height;if(0!==a&&"undefined"!=typeof e){_d3utils2.default.sizeCanvas(e,a,n);var r=_dataCanvas2.default.getDataContext(_canvasUtils2.default.getContext(e));this.renderScene(r)}}},{key:"renderScene",value:function(e){var t=this.props.range,a=new _ContigInterval2.default(t.contig,t.start,t.stop),n=this.getScale();e.reset(),e.clearRect(0,0,e.canvas.width,e.canvas.height),this.tiles.renderToScreen(e,a,n),e.restore()}},{key:"handleClick",value:function(e){var t=e.nativeEvent,a=t.offsetX,n=this.props.range,r=new _ContigInterval2.default(n.contig,n.start-1,n.stop+1),i=this.getScale(),s=Math.floor(i.invert(a))-2,l=s+2,o=this.props.source.getVariantsInRange(r),u=_underscore2.default.find(o,function(e){return _utils2.default.tupleRangeOverlaps([[e.position],[e.end]],[[s],[l]])}),c=window.alert||console.log;u&&c(JSON.stringify(u))}}]),t}(_react2.default.Component);VariantTrack.displayName="variants",module.exports=VariantTrack;

},{"../ContigInterval":180,"../style":217,"../utils":218,"./TiledCanvas":231,"./canvas-utils":233,"./d3utils":234,"data-canvas":7,"react":175,"shallow-equals":176,"underscore":177}],233:[function(require,module,exports){
"use strict";function getContext(t){var e=t,n=e.getContext("2d");return n}function drawLine(t,e,n,o,r){t.beginPath(),t.moveTo(e,n),t.lineTo(o,r),t.stroke()}module.exports={getContext:getContext,drawLine:drawLine};

},{}],234:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function getTrackScale(e,t){if(!e)return _scale2.default.linear();var a=e.offsetPx||0;return _scale2.default.linear().domain([e.start,e.stop+1]).range([-a,t-a])}function formatPrefix(e){var t=0;e&&(e<0&&(e*=-1),t=1+Math.floor(1e-12+Math.log(e)/Math.LN10),t=Math.max(0,Math.min(24,3*Math.floor((t-1)/3))));var a=Math.pow(10,t);return{symbol:formatPrefixes[t/3],scale:function(e){return e/a}}}function formatRange(e){var t=e/1e3,a=formatPrefix(Math.max(1,t)),r=a.symbol+"bp",n=Math.round(a.scale(e)).toLocaleString();return{prefix:n,unit:r}}function sizeCanvas(e,t,a){if(e){var r=window.devicePixelRatio;e.width=t*r,e.height=a*r,e.style.width=t+"px",e.style.height=a+"px";var n=e.getContext("2d");null!==n&&n instanceof CanvasRenderingContext2D&&n.scale(r,r)}}function findParent(e,t){var a=e;do{if(a.classList.contains(t))return a;a=a.parentElement}while(a);return null}Object.defineProperty(exports,"__esModule",{value:!0});var _scale=require("../scale"),_scale2=_interopRequireDefault(_scale),formatPrefixes=["","k","M","G","T","P","E","Z","Y"];module.exports={formatRange:formatRange,getTrackScale:getTrackScale,sizeCanvas:sizeCanvas,findParent:findParent};

},{"../scale":206}],235:[function(require,module,exports){
"use strict";function pileup(e){for(var t=new Array(e.length),r=[],a=0;a<e.length;a++){for(var n=e[a],s=r.length,i=0;i<r.length;i++)if(!n.intersects(r[i])){s=i;break}t[a]=s,r[s]=n}return t}function addToPileup(e,t){for(var r=-1,a=0;a<t.length;a++){for(var n=t[a],s=!0,i=0;i<n.length;i++)if(n[i].intersects(e)){s=!1;break}if(s){r=a;break}}return r==-1&&(r=t.length,t[r]=[]),t[r].push(e),r}function findMismatches(e,t,r,a){for(var n=[],s=0;s<t.length;s++){var i=r+s,o=e.charAt(s),g=t.charAt(s);o!=g&&"."!=o&&n.push({pos:i,basePair:g,quality:a[s]})}return n}function getArrowIndex(e){var t,r,a=e.cigarOps;if("-"==e.getStrand()){for(t=0;t<a.length;t++)if(r=a[t],"S"!=r.op)return"M"==r.op?t:-1}else for(t=a.length-1;t>=0;t--)if(r=a[t],"S"!=r.op)return"M"==r.op?t:-1;return-1}function getOpInfo(e,t){for(var r=e.cigarOps,a=e.getInterval(),n=a.start(),s=e.getSequence(),i=e.getQualityScores(),o=0,g=n,p=getArrowIndex(e),u=[],c=[],l=0;l<r.length;l++){var f=r[l];if("M"==f.op){var h=t.getRangeAsString({contig:a.contig,start:g,stop:g+f.length-1}),S=s.slice(o,o+f.length);c=c.concat(findMismatches(h,S,g,i))}switch(u.push({op:f.op,length:f.length,pos:g,arrow:null}),f.op){case CigarOp.MATCH:case CigarOp.DELETE:case CigarOp.SKIP:case CigarOp.SEQMATCH:case CigarOp.SEQMISMATCH:g+=f.length}switch(f.op){case CigarOp.MATCH:case CigarOp.INSERT:case CigarOp.SOFTCLIP:case CigarOp.SEQMATCH:case CigarOp.SEQMISMATCH:o+=f.length}}return p>=0&&(u[p].arrow="-"==e.getStrand()?"L":"R"),{ops:u,mismatches:c}}function formatStatus(e){if(e.numRequests){var t=e.numRequests>1?"s":"";return"issued "+e.numRequests+" request"+t}if(e.status)return e.status;throw"invalid"}Object.defineProperty(exports,"__esModule",{value:!0});var CigarOp={MATCH:"M",INSERT:"I",DELETE:"D",SKIP:"N",SOFTCLIP:"S",HARDCLIP:"H",PADDING:"P",SEQMATCH:"=",SEQMISMATCH:"X"};module.exports={pileup:pileup,addToPileup:addToPileup,getOpInfo:getOpInfo,formatStatus:formatStatus,CigarOp:CigarOp};

},{}]},{},[205])(205)
});
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvYmFja2JvbmUvYmFja2JvbmUuanMiLCJub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnVmZmVyL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2J1ZmZlci9ub2RlX21vZHVsZXMvYmFzZTY0LWpzL2xpYi9iNjQuanMiLCJub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnVmZmVyL25vZGVfbW9kdWxlcy9pZWVlNzU0L2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL2J1ZmZlci9ub2RlX21vZHVsZXMvaXNhcnJheS9pbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9wcm9jZXNzL2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvZGF0YS1jYW52YXMvc3JjL2RhdGEtY2FudmFzLmpzIiwibm9kZV9tb2R1bGVzL2piaW5hcnkvZGlzdC9icm93c2VyL2piaW5hcnkuanMiLCJub2RlX21vZHVsZXMvamRhdGF2aWV3L2Rpc3Qvbm9kZS9qZGF0YXZpZXcuanMiLCJub2RlX21vZHVsZXMvcGFrby9saWIvaW5mbGF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi91dGlscy9jb21tb24uanMiLCJub2RlX21vZHVsZXMvcGFrby9saWIvdXRpbHMvc3RyaW5ncy5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi96bGliL2FkbGVyMzIuanMiLCJub2RlX21vZHVsZXMvcGFrby9saWIvemxpYi9jb25zdGFudHMuanMiLCJub2RlX21vZHVsZXMvcGFrby9saWIvemxpYi9jcmMzMi5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi96bGliL2d6aGVhZGVyLmpzIiwibm9kZV9tb2R1bGVzL3Bha28vbGliL3psaWIvaW5mZmFzdC5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi96bGliL2luZmxhdGUuanMiLCJub2RlX21vZHVsZXMvcGFrby9saWIvemxpYi9pbmZ0cmVlcy5qcyIsIm5vZGVfbW9kdWxlcy9wYWtvL2xpYi96bGliL21lc3NhZ2VzLmpzIiwibm9kZV9tb2R1bGVzL3Bha28vbGliL3psaWIvenN0cmVhbS5qcyIsIm5vZGVfbW9kdWxlcy9xL3EuanMiLCJub2RlX21vZHVsZXMvcmVhY3QtZG9tL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9BdXRvRm9jdXNVdGlscy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvQmVmb3JlSW5wdXRFdmVudFBsdWdpbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvQ1NTUHJvcGVydHkuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0NTU1Byb3BlcnR5T3BlcmF0aW9ucy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvQ2FsbGJhY2tRdWV1ZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvQ2hhbmdlRXZlbnRQbHVnaW4uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0NsaWVudFJlYWN0Um9vdEluZGV4LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9ET01DaGlsZHJlbk9wZXJhdGlvbnMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0RPTVByb3BlcnR5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9ET01Qcm9wZXJ0eU9wZXJhdGlvbnMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0Rhbmdlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0VudGVyTGVhdmVFdmVudFBsdWdpbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvRXZlbnRDb25zdGFudHMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0V2ZW50UGx1Z2luSHViLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9FdmVudFBsdWdpblJlZ2lzdHJ5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9FdmVudFBsdWdpblV0aWxzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9FdmVudFByb3BhZ2F0b3JzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9GYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL0hUTUxET01Qcm9wZXJ0eUNvbmZpZy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvTGlua2VkVmFsdWVVdGlscy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvT2JqZWN0LmFzc2lnbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUG9vbGVkQ2xhc3MuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEJyb3dzZXJDb21wb25lbnRNaXhpbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdENoaWxkUmVjb25jaWxlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RDaGlsZHJlbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RDbGFzcy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RDb21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdENvbXBvbmVudEVudmlyb25tZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdENvbXBvc2l0ZUNvbXBvbmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RDdXJyZW50T3duZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTUJ1dHRvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RET01Db21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NRmFjdG9yaWVzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTUZlYXR1cmVGbGFncy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RET01JRE9wZXJhdGlvbnMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NSW5wdXQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NT3B0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTVNlbGVjdC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RET01TZWxlY3Rpb24uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NU2VydmVyLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdERPTVRleHRDb21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RE9NVGV4dGFyZWEuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RGVmYXVsdEluamVjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RFbGVtZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEVsZW1lbnRWYWxpZGF0b3IuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RW1wdHlDb21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RFcnJvclV0aWxzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEV2ZW50RW1pdHRlck1peGluLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEV2ZW50TGlzdGVuZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0SW5qZWN0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdElucHV0U2VsZWN0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdEluc3RhbmNlSGFuZGxlcy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RJbnN0YW5jZU1hcC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RJc29tb3JwaGljLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdE1hcmt1cENoZWNrc3VtLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdE1vdW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdE11bHRpQ2hpbGQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdE5hdGl2ZUNvbXBvbmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3ROb29wVXBkYXRlUXVldWUuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0T3duZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0UGVyZi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0UHJvcFR5cGVMb2NhdGlvbnMuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0UHJvcFR5cGVzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFJlY29uY2lsZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1JlYWN0UmVmLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFJvb3RJbmRleC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFNlcnZlclJlbmRlcmluZy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RVcGRhdGVRdWV1ZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvUmVhY3RVcGRhdGVzLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9SZWFjdFZlcnNpb24uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1NWR0RPTVByb3BlcnR5Q29uZmlnLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9TZWxlY3RFdmVudFBsdWdpbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU2VydmVyUmVhY3RSb290SW5kZXguanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1NpbXBsZUV2ZW50UGx1Z2luLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9TeW50aGV0aWNDbGlwYm9hcmRFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljQ29tcG9zaXRpb25FdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljRHJhZ0V2ZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9TeW50aGV0aWNFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljRm9jdXNFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljSW5wdXRFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljS2V5Ym9hcmRFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljTW91c2VFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljVG91Y2hFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljVUlFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvU3ludGhldGljV2hlZWxFdmVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvVHJhbnNhY3Rpb24uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL1ZpZXdwb3J0TWV0cmljcy5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvYWNjdW11bGF0ZUludG8uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2FkbGVyMzIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2NhbkRlZmluZVByb3BlcnR5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9kYW5nZXJvdXNTdHlsZVZhbHVlLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9kZXByZWNhdGVkLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9lc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2ZpbmRET01Ob2RlLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9mbGF0dGVuQ2hpbGRyZW4uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2ZvckVhY2hBY2N1bXVsYXRlZC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvZ2V0RXZlbnRDaGFyQ29kZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvZ2V0RXZlbnRLZXkuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2dldEV2ZW50TW9kaWZpZXJTdGF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvZ2V0RXZlbnRUYXJnZXQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2dldEl0ZXJhdG9yRm4uanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2dldE5vZGVGb3JDaGFyYWN0ZXJPZmZzZXQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2dldFRleHRDb250ZW50QWNjZXNzb3IuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2luc3RhbnRpYXRlUmVhY3RDb21wb25lbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2lzRXZlbnRTdXBwb3J0ZWQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL2lzVGV4dElucHV0RWxlbWVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvb25seUNoaWxkLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi9xdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3Nlci5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvcmVuZGVyU3VidHJlZUludG9Db250YWluZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL3NldElubmVySFRNTC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9saWIvc2V0VGV4dENvbnRlbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3QvbGliL3Nob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi90cmF2ZXJzZUFsbENoaWxkcmVuLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L2xpYi92YWxpZGF0ZURPTU5lc3RpbmcuanMiLCJub2RlX21vZHVsZXMvcmVhY3Qvbm9kZV9tb2R1bGVzL2ZianMvbGliL0V2ZW50TGlzdGVuZXIuanMiLCJub2RlX21vZHVsZXMvcmVhY3Qvbm9kZV9tb2R1bGVzL2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L25vZGVfbW9kdWxlcy9mYmpzL2xpYi9jYW1lbGl6ZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvY2FtZWxpemVTdHlsZU5hbWUuanMiLCJub2RlX21vZHVsZXMvcmVhY3Qvbm9kZV9tb2R1bGVzL2ZianMvbGliL2NvbnRhaW5zTm9kZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvY3JlYXRlQXJyYXlGcm9tTWl4ZWQuanMiLCJub2RlX21vZHVsZXMvcmVhY3Qvbm9kZV9tb2R1bGVzL2ZianMvbGliL2NyZWF0ZU5vZGVzRnJvbU1hcmt1cC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvZW1wdHlGdW5jdGlvbi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvZW1wdHlPYmplY3QuanMiLCJub2RlX21vZHVsZXMvcmVhY3Qvbm9kZV9tb2R1bGVzL2ZianMvbGliL2ZvY3VzTm9kZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvZ2V0QWN0aXZlRWxlbWVudC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvZ2V0TWFya3VwV3JhcC5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvZ2V0VW5ib3VuZGVkU2Nyb2xsUG9zaXRpb24uanMiLCJub2RlX21vZHVsZXMvcmVhY3Qvbm9kZV9tb2R1bGVzL2ZianMvbGliL2h5cGhlbmF0ZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvaHlwaGVuYXRlU3R5bGVOYW1lLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L25vZGVfbW9kdWxlcy9mYmpzL2xpYi9pbnZhcmlhbnQuanMiLCJub2RlX21vZHVsZXMvcmVhY3Qvbm9kZV9tb2R1bGVzL2ZianMvbGliL2lzTm9kZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvaXNUZXh0Tm9kZS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIva2V5TWlycm9yLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L25vZGVfbW9kdWxlcy9mYmpzL2xpYi9rZXlPZi5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvbWFwT2JqZWN0LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L25vZGVfbW9kdWxlcy9mYmpzL2xpYi9tZW1vaXplU3RyaW5nT25seS5qcyIsIm5vZGVfbW9kdWxlcy9yZWFjdC9ub2RlX21vZHVsZXMvZmJqcy9saWIvc2hhbGxvd0VxdWFsLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L25vZGVfbW9kdWxlcy9mYmpzL2xpYi90b0FycmF5LmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L25vZGVfbW9kdWxlcy9mYmpzL2xpYi93YXJuaW5nLmpzIiwibm9kZV9tb2R1bGVzL3JlYWN0L3JlYWN0LmpzIiwibm9kZV9tb2R1bGVzL3NoYWxsb3ctZXF1YWxzL2luZGV4LmpzIiwibm9kZV9tb2R1bGVzL3VuZGVyc2NvcmUvdW5kZXJzY29yZS5qcyIsInNyYy9saWIvbWluaWQzLmpzIiwic3JjL21haW4vQWJzdHJhY3RGaWxlLmpzIiwic3JjL21haW4vQ29udGlnSW50ZXJ2YWwuanMiLCJzcmMvbWFpbi9Db250cm9scy5qcyIsInNyYy9tYWluL0dBNEdIQWxpZ25tZW50LmpzIiwic3JjL21haW4vSW50ZXJ2YWwuanMiLCJzcmMvbWFpbi9Mb2NhbFN0cmluZ0ZpbGUuanMiLCJzcmMvbWFpbi9NZW51LmpzIiwic3JjL21haW4vUmVtb3RlRmlsZS5qcyIsInNyYy9tYWluL1JlbW90ZVJlcXVlc3QuanMiLCJzcmMvbWFpbi9SZXNvbHV0aW9uQ2FjaGUuanMiLCJzcmMvbWFpbi9Sb290LmpzIiwic3JjL21haW4vU2VxdWVuY2VTdG9yZS5qcyIsInNyYy9tYWluL1Zpc3VhbGl6YXRpb25XcmFwcGVyLmpzIiwic3JjL21haW4vZGF0YS9CaWdCZWQuanMiLCJzcmMvbWFpbi9kYXRhL1NhbVJlYWQuanMiLCJzcmMvbWFpbi9kYXRhL1NlcXVlbmNlLmpzIiwic3JjL21haW4vZGF0YS9Ud29CaXQuanMiLCJzcmMvbWFpbi9kYXRhL1ZpcnR1YWxPZmZzZXQuanMiLCJzcmMvbWFpbi9kYXRhL2JhaS5qcyIsInNyYy9tYWluL2RhdGEvYmFtLmpzIiwic3JjL21haW4vZGF0YS9iZWR0b29scy5qcyIsInNyYy9tYWluL2RhdGEvZm9ybWF0cy9iYW1UeXBlcy5qcyIsInNyYy9tYWluL2RhdGEvZm9ybWF0cy9iYmkuanMiLCJzcmMvbWFpbi9kYXRhL2Zvcm1hdHMvaGVscGVycy5qcyIsInNyYy9tYWluL2RhdGEvZm9ybWF0cy90d29CaXRUeXBlcy5qcyIsInNyYy9tYWluL2RhdGEvdmNmLmpzIiwic3JjL21haW4vcGlsZXVwLmpzIiwic3JjL21haW4vc2NhbGUuanMiLCJzcmMvbWFpbi9zb3VyY2VzL0JhbURhdGFTb3VyY2UuanMiLCJzcmMvbWFpbi9zb3VyY2VzL0JpZ0JlZERhdGFTb3VyY2UuanMiLCJzcmMvbWFpbi9zb3VyY2VzL0NvdmVyYWdlRGF0YVNvdXJjZS5qcyIsInNyYy9tYWluL3NvdXJjZXMvRW1wdHlTb3VyY2UuanMiLCJzcmMvbWFpbi9zb3VyY2VzL0ZlYXR1cmVEYXRhU291cmNlLmpzIiwic3JjL21haW4vc291cmNlcy9HQTRHSERhdGFTb3VyY2UuanMiLCJzcmMvbWFpbi9zb3VyY2VzL1JlZmVyZW5jZURhdGFTb3VyY2UuanMiLCJzcmMvbWFpbi9zb3VyY2VzL1R3b0JpdERhdGFTb3VyY2UuanMiLCJzcmMvbWFpbi9zb3VyY2VzL1ZhcmlhbnREYXRhU291cmNlLmpzIiwic3JjL21haW4vc291cmNlcy9WY2ZEYXRhU291cmNlLmpzIiwic3JjL21haW4vc3R5bGUuanMiLCJzcmMvbWFpbi91dGlscy5qcyIsInNyYy9tYWluL3Zpei9Db3ZlcmFnZUNhY2hlLmpzIiwic3JjL21haW4vdml6L0NvdmVyYWdlVHJhY2suanMiLCJzcmMvbWFpbi92aXovRGlzcGxheU1vZGUuanMiLCJzcmMvbWFpbi92aXovRmVhdHVyZVRyYWNrLmpzIiwic3JjL21haW4vdml6L0dlbmVUcmFjay5qcyIsInNyYy9tYWluL3Zpei9HZW5vbWVUcmFjay5qcyIsInNyYy9tYWluL3Zpei9HZW5vdHlwZVRyYWNrLmpzIiwic3JjL21haW4vdml6L0xvY2F0aW9uVHJhY2suanMiLCJzcmMvbWFpbi92aXovUGlsZXVwQ2FjaGUuanMiLCJzcmMvbWFpbi92aXovUGlsZXVwQ292ZXJhZ2VUcmFjay5qcyIsInNyYy9tYWluL3Zpei9QaWxldXBUcmFjay5qcyIsInNyYy9tYWluL3Zpei9TY2FsZVRyYWNrLmpzIiwic3JjL21haW4vdml6L1RpbGVkQ2FudmFzLmpzIiwic3JjL21haW4vdml6L1ZhcmlhbnRUcmFjay5qcyIsInNyYy9tYWluL3Zpei9jYW52YXMtdXRpbHMuanMiLCJzcmMvbWFpbi92aXovZDN1dGlscy5qcyIsInNyYy9tYWluL3Zpei9waWxldXB1dGlscy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtDQ09DLFNBQVMsRUFBTSxHQUdkLEdBQXNCLGtCQUFYLFNBQXlCLE9BQU8sSUFDekMsUUFBUSxhQUFjLFNBQVUsV0FBWSxTQUFTLEVBQUcsRUFBRyxHQUd6RCxFQUFLLFNBQVcsRUFBUSxFQUFNLEVBQVMsRUFBRyxTQUl2QyxJQUF1QixtQkFBWixTQUF5QixDQUN6QyxHQUFJLEdBQUksUUFBUSxhQUNoQixHQUFRLEVBQU0sUUFBUyxPQUl2QixHQUFLLFNBQVcsRUFBUSxLQUFVLEVBQUssRUFBSSxFQUFLLFFBQVUsRUFBSyxPQUFTLEVBQUssT0FBUyxFQUFLLElBRzdGLEtBQU0sU0FBUyxFQUFNLEVBQVUsRUFBRyxHQU9sQyxHQUFJLEdBQW1CLEVBQUssU0FHeEIsS0FFQSxHQURPLEVBQU0sS0FDTCxFQUFNLE1BQ0wsR0FBTSxNQUduQixHQUFTLFFBQVUsUUFJbkIsRUFBUyxFQUFJLEVBSWIsRUFBUyxXQUFhLFdBRXBCLE1BREEsR0FBSyxTQUFX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RSxHQUFHLElBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxHQUFJLEdBQUUsRUFBRSxPQUFPLE9BQU8sRUFBRSxFQUFFLHdCQUF3QixTQUFTLEVBQUUsS0FBSyxJQUFJLEtBQUssS0FBSyxFQUFFLEtBQUssS0FBSyxLQUFLLEdBQUcsS0FBSyxZQUFZLEtBQUssR0FBRyxHQUFFLElBQUssR0FBSSxHQUFFLEVBQUUsSUFBSSxRQUFTLEdBQUUsR0FBRyxNQUFPLEdBQUUsRUFBRSxVQUFVLEdBQUcsUUFBUyxHQUFFLEdBQUcsTUFBTyxHQUFFLEVBQUUsVUFBVSxHQUFHLGVBQWUsV0FBVyxHQUFJLElBQUcsRUFBRSxnQkFBZ0IsRUFBRSxVQUFVLGdCQUFnQixNQUFNLEtBQUssVUFBVyxPQUFPLEdBQUUsY0FBYyxFQUFFLFNBQVMsRUFBRSxPQUFPLFFBQVEsRUFBRSxZQUFZLEVBQUUsT0FBTyxTQUFTLE1BQU0sS0FBSyxHQUFJLEdBQUUsRUFBRSxRQUFTLFNBQVMsSUFBRyxRQUFTLEtBQUksV0FBVyxRQUFTLEdBQUUsR0FBRyxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFFLEtBQUksRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLFdBQVcsS0FBSyxHQUFHLEVBQUUsQ0FBQyxHQUFHLEVBQUUsT0FBTyxHQUFHLEdBQUcsR0FBRyxFQUFFLFFBQVEsRUFBRSxJQUFJLEdBQUcsR0FBRyxJQUFLLE9BQU0sR0FBRyxFQUFFLEVBQUUsV0FBVyxLQUFLLEdBQUcsRUFBRSxDQUFDLEdBQUcsRUFBRSxPQUFPLEdBQUcsR0FBRyxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksR0FBRyxJQUFJLElBQUksR0FBRyxHQUFHLEVBQUUsUUFBUSxHQUFHLElBQUksR0FBRyxHQUFHLEdBQUksT0FBTSxFQUFFLEVBQUUsV0FBVyxLQUFLLEdBQUcsRUFBRSxPQUFPLEdBQUcsR0FBRyxHQUFHLEVBQUUsUUFBUSxFQUFFLElBQUksR0FBRyxJQUFJLElBQUksR0FBRyxHQUFHLEVBQUUsUUFBUSxHQUFHLElBQUksR0FBRyxJQUFJLElBQUksR0FBRyxHQUFHLEVBQUUsT0FBTyxHQUFHLEdBQUcsTUFBTyxHQUFFLFFBQVMsR0FBRSxHQUFHLEdBQUksR0FBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsQ0FBRSxLQUFJLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsRUFBRyxHQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsWUFBWSxFQUFFLElBQUcsR0FBSSxFQUFHLEtBQUcsR0FBSSxFQUFFLEtBQU0sR0FBRyxHQUFFLEVBQUUsSUFBSSxFQUFFLFdBQVcsWUFBWSxFQUFFLElBQUcsR0FBSSxFQUFHLEtBQUcsR0FBSSxFQUFFLEtBQU0sSUFBRyxPQUFPLGFBQWEsR0FBRyxHQUFHLEdBQUcsSUFBSSxFQUFHLEdBQUUsQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLFdBQVcsS0FBSyxJQUFJLEVBQUUsTUFBTyxFQUFFLEdBQUUsRUFBRSxTQUFTLEVBQUUsSUFBRyxHQUFJLEVBQUcsS0FBRyxHQUFJLEVBQUUsS0FBTSxJQUFHLE9BQU8sY0FBYyxHQUFHLElBQUksR0FBRyxHQUFHLElBQUksRUFBRyxHQUFFLENBQUMsR0FBRyxFQUFFLElBQUksRUFBRSxXQUFXLEtBQUssSUFBSSxFQUFFLE1BQU8sRUFBRSxHQUFFLEVBQUUsU0FBUyxFQUFFLElBQUcsR0FBSSxFQUFHLEtBQUcsR0FBSSxFQUFFLEtBQU0sSUFBRyxPQUFPLGNBQWMsRUFBRSxJQUFJLEVBQUUsR0FBRyxNQUFPLEdBQUUsR0FBSSxHQUFFLG1FQUFtRSxJQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEVBQUcsSUFBRyxHQUFHLEdBQUcsRUFBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsRUFBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLElBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEVBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsR0FBRyxJQUFHLEdBQUcsR0FBRyxHQUFHLEdBQUcsRUFBSSxHQUFFLE9BQU8sRUFBRSxLQUFLLEdBQUcsRUFBRSxPQUFPLEVBQUUsS0FBSyxLQUFNLElBQUksR0FBRSxFQUFFLFNBQVMsU0FBUyxHQUFHLEtBQUssS0FBSyxHQUFHLEVBQUUsT0FBTyxNQUFPLEtBQUksRUFBRSxTQUFTLEdBQUcsR0FBSSxHQUFFLFlBQWEsT0FBTyxHQUFFLFVBQVUsRUFBRSxHQUFJLElBQUksSUFBSSxHQUFFLEVBQUUsVUFBVSxFQUFFLEVBQUUsVUFBVyxHQUFFLFFBQVEsU0FBUyxHQUFHLE1BQU8sR0FBRSxLQUFLLEtBQUssSUFBSSxFQUFFLE9BQU8sU0FBUyxFQUFFLEVBQUUsR0FBRyxNQUFPLEdBQUUsWUFBWSxFQUFFLE9BQU8sU0FBUyxFQUFFLEVBQUUsS0FBSyxLQUFLLFFBQVEsRUFBRyxJQUFJLEdBQUUsT0FBTyxjQUFlLElBQUcsRUFBRSxJQUFJLEtBQUssUUFBUSxNQUFNLEdBQUcsRUFBRSxXQUFZLEdBQUUsU0FBUyxFQUFFLEVBQUUsRUFBRSxHQUFHLElBQUksRUFBRSxHQUFHLEVBQUUsT0FBUSxJQUFJLEdBQUUsZ0JBQWdCLEVBQUUsQ0FBKzJTLElBQTcyUyxFQUFFLFdBQVcsU0FBUyxFQUFFLEVBQUUsR0FBRyxHQUFHLEVBQUUsZUFBZSxLQUFLLFVBQVUsTUFBTyxHQUFFLEtBQUssU0FBVSxJQUFJLEdBQUUsRUFBRSxLQUFLLEtBQUssRUFBRyxPQUFPLEdBQUUsRUFBRSxLQUFLLFVBQVUsTUFBTSxHQUFHLEdBQUcsR0FBRyxFQUFFLFdBQVcsU0FBUyxHQUFHLGFBQWMsSUFBRyxJQUFJLFlBQVksRUFBRSxDQUFFLEtBQUksU0FBUyxNQUFPLE1BQUssU0FBUyxFQUFHLEtBQUksU0FBUyxNQUFPLE1BQUssV0FBVyxTQUFTLEdBQUcsTUFBTyxLQUFLLElBQUksS0FBSSxXQUFXLElBQUksR0FBSSxHQUFFLEVBQUUsRUFBRSxLQUFLLFNBQVMsT0FBTyxFQUFFLEVBQUUsSUFBSSxDQUFDLEdBQUksR0FBRSxLQUFLLFNBQVMsRUFBRyxJQUFHLEVBQUUsS0FBSyxLQUFLLEdBQUcsTUFBTyxNQUFLLEVBQUUsVUFBVSxTQUFTLEVBQUUsR0FBRyxLQUFLLFNBQVMsUUFBUSxFQUFHLElBQUksR0FBRSxFQUFFLEtBQUssS0FBTSxPQUFPLE1BQUssU0FBUyxRQUFRLEdBQUcsRUFBRSxXQUFXLFFBQVEsU0FBUyxFQUFFLEdBQUcsUUFBUyxHQUFFLEVBQUUsR0FBRyxHQUFJLEdBQUUsRUFBRSxFQUFHLEtBQUksSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxHQUFHLEVBQUUsR0FBRyxNQUFNLEdBQUksR0FBRSxFQUFFLElBQUssT0FBTyxHQUFFLFNBQVMsU0FBUyxHQUFHLElBQUksR0FBSSxHQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLElBQUksS0FBSyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsWUFBWSxTQUFTLEdBQUcsRUFBRSxNQUFNLEtBQUssS0FBSyxFQUFFLGFBQWEsU0FBUyxHQUFHLElBQUksR0FBSSxHQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLElBQUksQ0FBQyxHQUFJLEdBQUUsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFHLEtBQUksS0FBSyxHQUFHLEVBQUUsT0FBTyxFQUFFLFVBQVUsU0FBUyxHQUFHLEVBQUUsS0FBSyxLQUFLLEtBQUssR0FBRyxHQUFHLGVBQWUsU0FBUyxHQUFHLE1BQU8sR0FBRSxNQUFNLE9BQU8sRUFBRSxLQUFLLEVBQUUsUUFBUSxRQUFRLFNBQVMsRUFBRSxHQUFHLE1BQU8sTUFBSSxHQUFJLGdCQUFpQixHQUFFLEtBQUssT0FBTyxXQUFXLEdBQUcsR0FBRyxFQUFFLEtBQUssS0FBSyxPQUFPLEtBQUssRUFBRSxLQUFLLEVBQUUsRUFBRSxVQUFVLEVBQUUsRUFBRSxXQUFXLFVBQVUsV0FBVyxLQUFLLFdBQVcsS0FBSyxZQUFZLFlBQVksT0FBTyxLQUFLLGtCQUFrQixTQUFTLFdBQVcsTUFBTyxNQUFLLE9BQU8sS0FBSyxLQUFLLFdBQVcsVUFBVSxTQUFTLEdBQUcsTUFBTyxNQUFLLE9BQU8sTUFBTSxLQUFLLFNBQVMsTUFBTSxFQUFFLEVBQUUsV0FBVyxLQUFLLEVBQUUsVUFBVSxTQUFTLE1BQU0sRUFBRSxVQUFVLFlBQVksRUFBRSxTQUFTLEVBQUUsRUFBRSxHQUFHLFNBQVMsRUFBRSxHQUFHLEdBQUksR0FBRSxFQUFFLEtBQUssRUFBRSxLQUFNLE9BQU8sR0FBRSxHQUFHLEVBQUUsRUFBRSxRQUFRLElBQUksR0FBRyxFQUFFLGNBQWMsR0FBRyxFQUFFLEVBQUUsRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxXQUFXLE1BQU8sR0FBRSxPQUFPLElBQUcsR0FBSSxHQUFHLEVBQUUsS0FBSyxTQUFTLEVBQUUsR0FBRyxHQUFHLEVBQUUsS0FBSyxRQUFRLEdBQUcsU0FBUyxFQUFFLENBQUMsR0FBSSxHQUFFLEtBQUssS0FBSyxNQUFPLE1BQUssS0FBSyxLQUFLLEVBQUcsSUFBSSxHQUFFLEVBQUUsS0FBSyxLQUFNLE9BQU8sTUFBSyxLQUFLLEtBQUssR0FBRyxFQUFFLE1BQU8sTUFBSyxLQUFLLEtBQUssSUFBSSxFQUFFLEtBQUssV0FBVyxNQUFPLE1BQUssS0FBSyxRQUFRLEVBQUUsS0FBSyxTQUFTLEVBQUUsR0FBRyxNQUFPLE1BQUssS0FBSyxLQUFLLE9BQU8sS0FBSyxRQUFRLEdBQUcsSUFBSSxFQUFFLE1BQU0sU0FBUyxFQUFFLEVBQUUsR0FBRyxNQUFPLElBQUksR0FBRSxLQUFLLEtBQUssTUFBTSxFQUFFLEVBQUUsR0FBRyxLQUFLLFVBQVUsRUFBRSxTQUFTLFNBQVMsRUFBRSxHQUFHLGFBQWMsSUFBRyxJQUFJLFNBQVMsS0FBSyxJQUFLLE1BQUssU0FBUyxLQUFNLElBQUksZ0JBQWUsaUJBQWlCLEVBQUcsT0FBTyxNQUFLLFNBQVMsS0FBSyxRQUFRLEdBQUcsRUFBRyxLQUFJLFNBQVMsTUFBTyxNQUFLLFNBQVMsRUFBRSxVQUFVLEdBQUksS0FBSSxTQUFTLEdBQUcsRUFBRSxFQUFFLEdBQUcsQ0FBQyxHQUFJLEdBQUUsSUFBSyxPQUFPLEdBQUUsUUFBUSxNQUFNLFNBQVMsR0FBRyxNQUFPLEdBQUUsUUFBUSxLQUFLLE1BQU8sR0FBRSxFQUFFLE9BQU8sS0FBSyxXQUFXLEVBQUUsU0FBUyxHQUFHLE1BQU8sTUFBSyxRQUFRLEVBQUUsR0FBRyxFQUFFLE1BQU0sTUFBSyxHQUFJLEtBQUssV0FBVyxFQUFFLFNBQVMsR0FBRyxNQUFPLE1BQUssUUFBUSxFQUFFLFFBQVEsTUFBSyxLQUFNLEVBQUUsUUFBUSxTQUFTLEVBQUUsR0FBRyxHQUFJLEdBQUUsS0FBSyxTQUFTLEVBQUUsRUFBRyxPQUFPLEtBQUksRUFBRSxFQUFFLEtBQUssRUFBRSxLQUFLLGdCQUFpQixHQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsR0FBRyxJQUFJLEVBQUUsTUFBTSxHQUFHLEtBQUssTUFBTSxJQUFJLFNBQVMsT0FBTyxJQUFJLEdBQUcsRUFBRSxRQUFRLFNBQVMsRUFBRSxFQUFFLEdBQUcsR0FBRyxTQUFTLEVBQUUsQ0FBQyxFQUFFLEtBQUssUUFBUSxFQUFHLElBQUksR0FBRSxLQUFLLE9BQU8sV0FBVyxNQUFPLEdBQUUsS0FBSyxLQUFLLEVBQUUsZUFBZSxNQUFNLEtBQUssU0FBUyxLQUFLLElBQUksRUFBRSxLQUFLLElBQUksRUFBRyxPQUFPLFVBQVMsRUFBRSxLQUFLLEtBQUssRUFBRSxHQUFHLEVBQUUsS0FBSyxRQUFRLEVBQUUsS0FBSyxTQUFTLEVBQUUsR0FBRyxNQUFPLE1BQUssUUFBUSxFQUFFLEVBQUUsU0FBUyxFQUFFLEdBQUcsTUFBTyxHQUFFLEtBQUssTUFBTSxFQUFFLFFBQVEsV0FBVyxNQUFPLE1BQUssS0FBSyxjQUFjLElBQUksRUFBRSxNQUFNLFNBQVMsRUFBRSxFQUFFLEdBQUcsTUFBTyxNQUFLLFFBQVEsRUFBRSxFQUFFLFNBQVMsRUFBRSxHQUFHLEdBQUksR0FBRSxLQUFLLE1BQU8sT0FBTyxHQUFFLE1BQU0sRUFBRSxHQUFHLEtBQUssT0FBTyxLQUFLLEVBQUUsU0FBUyxTQUFTLEdBQUcsTUFBTyxNQUFLLE1BQU0sY0FBYyxFQUFFLElBQUksU0FBUyxFQUFFLEdBQUcsSUFBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBSSxDQUFDLEdBQUksR0FBRSxFQUFFLEVBQUcsR0FBRSxFQUFFLGVBQWUsRUFBRSxHQUFHLFNBQVMsTUFBTSxHQUFHLFFBQVEsZ0JBQWdCLEtBQUssV0FBVyxNQUFPLE1BQUssS0FBSyxNQUFNLEtBQUssVUFBVSxPQUFPLEtBQUssZUFBZSxNQUFNLFNBQVMsR0FBRyxLQUFLLEtBQUssUUFBUSxLQUFLLFVBQVUsRUFBRSxLQUFLLGtCQUFrQixRQUFRLFNBQVMsU0FBUyxTQUFTLE9BQU8sUUFBUSxRQUFRLFFBQVEsVUFBVSxVQUFVLFNBQVMsRUFBRSxHQUFHLEtBQU8sRUFBRSxNQUFNLE1BQVEsRUFBRSxRQUFRLE9BQVMsRUFBRSxVQUFVLEVBQUUsTUFBTSxHQUFHLFFBQVEsV0FBVyxVQUFVLEtBQUssV0FBVyxHQUFJLEdBQUUsS0FBSyxRQUFRLEtBQUssT0FBUSxJQUFHLEtBQUssV0FBVyxFQUFFLE1BQU0sTUFBTyxNQUFLLEtBQUssU0FBUyxFQUFFLFFBQU8sR0FBRyxFQUFJLElBQUksRUFBRSxJQUFHLFNBQVMsRUFBRSxDQUFDLEVBQUUsR0FBSSxPQUFNLEVBQUcsS0FBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsSUFBSSxFQUFFLEdBQUcsS0FBSyxlQUFlLENBQUMsR0FBSSxHQUFFLEtBQUssS0FBSyxVQUFXLEtBQUksS0FBSyxLQUFLLE9BQU8sT0FBTyxHQUFHLEVBQUUsS0FBSyxLQUFLLFlBQVksTUFBTyxJQUFHLE1BQU0sU0FBUyxHQUFHLEdBQUcsS0FBSyxXQUFXLEVBQUUsTUFBTSxNQUFPLE1BQUssS0FBSyxXQUFXLEVBQUcsS0FBSSxHQUFJLEdBQUUsRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLEVBQUUsSUFBSSxLQUFLLFVBQVUsRUFBRSxPQUFPLEVBQUUsT0FBTyxHQUFHLFFBQVEsU0FBUyxXQUFXLEtBQUssV0FBVyxHQUFJLEdBQUUsS0FBSyxPQUFPLE9BQU8sRUFBRSxLQUFLLE9BQU8sS0FBSyxLQUFLLFFBQVEsS0FBSyxTQUFTLEVBQUUsS0FBSyxLQUFLLE1BQU0sRUFBRSxFQUFHLE9BQU8sSUFBSSxHQUFFLEVBQUUsS0FBSyxVQUFVLE1BQU0sU0FBUyxHQUFHLEtBQUssT0FBTyxNQUFNLE9BQU8sRUFBRSxLQUFLLE9BQU8sT0FBTyxFQUFFLFNBQVMsR0FBRyxRQUFRLFdBQVcsS0FBSyxXQUFXLE1BQU8sTUFBSyxLQUFLLFlBQVksS0FBSyxVQUFVLE1BQU0sU0FBUyxHQUFHLEtBQUssS0FBSyxjQUFjLEVBQUUsS0FBSyxZQUFZLEVBQUUsS0FBSyxHQUFHLFFBQVEsVUFBVSxLQUFLLFdBQVcsTUFBTyxNQUFLLEtBQUssU0FBUyxLQUFLLFFBQVEsS0FBSyxVQUFVLE1BQU0sU0FBUyxHQUFHLEtBQUssS0FBSyxXQUFXLEdBQUUsTUFBTyxFQUFTLE1BQUUsR0FBRyxRQUFRLFdBQVcsUUFBUSxVQUFVLEtBQUssV0FBVyxHQUFJLEdBQUUsS0FBSyxVQUFXLElBQUcsS0FBSyxRQUFRLElBQUksS0FBSyxNQUFNLENBQUMsR0FBRyxFQUFFLEtBQUssT0FBTyxVQUFVLE1BQU8sTUFBSyxPQUFPLEVBQUcsTUFBTSxJQUFJLFdBQVUscUJBQXFCLEVBQUUsUUFBUSxLQUFLLE1BQU0sTUFBTSxNQUFPLElBQUcsTUFBTSxTQUFTLEdBQUcsS0FBSyxVQUFVLEtBQUssUUFBUSxTQUFTLEVBQUUsS0FBSyxNQUFNLE1BQU0sRUFBUSxLQUFFLEdBQUcsUUFBUSxXQUFXLFdBQVcsVUFBVSxTQUFTLEVBQUUsR0FBRyxLQUFLLGNBQWUsS0FBSSxHQUFJLEtBQUssR0FBRSxLQUFLLFlBQVksRUFBRSxJQUFJLEdBQUcsS0FBSyxXQUFXLEdBQUksR0FBRSxLQUFLLFVBQVcsT0FBTyxLQUFLLE1BQUssUUFBUSxLQUFLLFFBQVEsR0FBRyxHQUFHLE1BQU0sU0FBUyxHQUFHLEtBQUssVUFBVSxJQUFLLE1BQUssWUFBWSxLQUFLLFlBQVksR0FBRyxNQUFNLEVBQUUsT0FBTyxHQUFHLFVBQVUsV0FBVyxLQUFLLE1BQU0sV0FBVyxRQUFRLFNBQVMsR0FBRyxJQUFJLEdBQUksR0FBRSxLQUFLLE1BQU0sRUFBRSxFQUFFLE9BQU8sRUFBRSxHQUFJLE9BQU0sR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxHQUFHLEVBQUUsRUFBRSxHQUFJLE1BQUssTUFBTSxHQUFHLEtBQUssV0FBVyxHQUFJLEdBQUUsS0FBSyxNQUFNLEVBQUUsS0FBSyxPQUFPLEtBQUssRUFBRSxHQUFJLE9BQU8sTUFBSyxPQUFPLFVBQVUsRUFBRSxXQUFXLElBQUksR0FBSSxHQUFFLEVBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLEtBQUssS0FBSyxFQUFFLE9BQU8sR0FBRyxNQUFNLFNBQVMsR0FBRyxHQUFJLEdBQUUsS0FBSyxLQUFNLE1BQUssT0FBTyxVQUFVLEVBQUUsV0FBVyxJQUFJLEdBQUksR0FBRSxFQUFFLEVBQUUsRUFBRSxPQUFPLEVBQUUsRUFBRSxJQUFJLEtBQUssTUFBTSxFQUFFLEdBQUcsUUFBUSxFQUFNLEdBQUUsR0FBRyxRQUFRLFlBQVksV0FBVyxhQUFhLFlBQVksV0FBVyxhQUFhLFlBQVksV0FBVyxNQUFPLE1BQUssUUFBUSxLQUFLLFdBQVcsS0FBSyxTQUFTLEtBQUssYUFBYSxFQUFFLE9BQU8sRUFBRSxNQUFNLEdBQUcsVUFBVSxTQUFTLEVBQUUsRUFBRSxHQUFHLEtBQUssVUFBVSxLQUFLLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxHQUFHLE9BQU8sZUFBZSxRQUFRLFlBQVksVUFBVSxZQUFZLFdBQVcsT0FBTyxTQUFTLEtBQUssT0FBTyxLQUFLLE9BQU8sVUFBVSxLQUFLLFdBQVcsR0FBSSxHQUFFLFNBQVMsR0FBRyxNQUFPLEtBQUksVUFBVSxPQUFPLFNBQVUsR0FBRSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsT0FBTyxLQUFLLEVBQUUsV0FBVyxFQUFFLEdBQUcsWUFBVyxFQUFHLE1BQU0sSUFBSSxNQUFPLE9BQU8sR0FBRSxLQUFLLFNBQVEsRUFBRyxFQUFFLEdBQUcsT0FBTyxFQUFFLEtBQUssWUFBWSxTQUFTLEtBQUssT0FBTyxTQUFTLFVBQVUsVUFBVSxLQUFLLGFBQWEsTUFBTSxTQUFTLEdBQUcsRUFBRSxhQUFhLEVBQUUsS0FBSyxRQUFRLEtBQUssT0FBTyxNQUFNLEtBQUssVUFBVSxLQUFLLEtBQUssVUFBVSxFQUFFLFdBQVcsRUFBRSxPQUFPLEdBQUcsUUFBUSxZQUFZLFNBQVMsUUFBUSxTQUFTLEdBQUcsR0FBSSxLQUFLLEtBQUksR0FBSSxLQUFLLE1BQUssVUFBVSxFQUFFLEdBQUcsRUFBRSxLQUFLLFVBQVUsR0FBRyxVQUFVLEtBQUssVUFBVSxHQUFHLEVBQUUsS0FBSyxVQUFVLEdBQUksTUFBSyxVQUFVLEdBQUcsS0FBSyxXQUFXLEdBQUksR0FBRSxLQUFLLEVBQUUsS0FBSyxVQUFVLEVBQUUsS0FBSyxNQUFNLEVBQUUsS0FBSyxTQUFVLE9BQU8sTUFBSyxPQUFPLFVBQVUsRUFBRSxXQUFXLElBQUksR0FBSSxLQUFLLEdBQUUsS0FBSyxPQUFPLFdBQVcsR0FBSSxHQUFFLEVBQUUsRUFBRSxHQUFHLFVBQVUsRUFBRSxHQUFHLEtBQUssRUFBRSxHQUFHLEtBQUssS0FBSyxFQUFFLEdBQUksVUFBUyxJQUFJLEVBQUUsR0FBRyxJQUFJLEdBQUcsS0FBSyxRQUFRLEdBQUcsTUFBTSxTQUFTLEdBQUcsR0FBSSxHQUFFLEtBQUssRUFBRSxLQUFLLFNBQVUsTUFBSyxPQUFPLFVBQVUsRUFBRSxXQUFXLElBQUksR0FBSSxLQUFLLEdBQUUsS0FBSyxPQUFPLFdBQVcsRUFBRSxFQUFFLEdBQUcsVUFBVSxFQUFFLEdBQUcsRUFBRSxHQUFHLEtBQUssRUFBRSxHQUFHLEtBQUssTUFBTSxFQUFFLEdBQUcsRUFBRSxLQUFLLEdBQUcsS0FBSyxXQUFXLEVBQUUsS0FBSyxHQUFHLFFBQVEsVUFBVSxLQUFLLFdBQVcsS0FBSyxLQUFLLEtBQUssS0FBSyxRQUFRLEtBQUssVUFBVSxNQUFNLFdBQVcsS0FBSyxVQUFVLEVBQUUsT0FBTyxHQUFHLFFBQVEsU0FBUyxZQUFZLEtBQUssV0FBVyxNQUFPLE1BQUssS0FBSyxVQUFVLEtBQUssUUFBUSxLQUFLLFFBQVEsT0FBTyxLQUFLLFdBQVcsTUFBTSxTQUFTLEdBQUcsS0FBSyxLQUFLLFlBQVksRUFBRSxLQUFLLGFBQWEsRUFBRSxRQUFRLEdBQUcsUUFBUSxTQUFTLFlBQVksS0FBSyxXQUFXLEdBQUksR0FBRSxLQUFLLEtBQUssRUFBRSxLQUFLLE1BQU8sSUFBRyxTQUFTLEVBQUUsQ0FBQyxHQUFJLEdBQUUsRUFBRSxFQUFFLE9BQU8sRUFBRSxDQUFFLEtBQUksRUFBRSxFQUFFLFdBQVcsRUFBRSxFQUFFLElBQUksRUFBRSxFQUFFLGFBQWEsR0FBSSxJQUFJLEdBQUUsRUFBRSxVQUFVLEVBQUUsRUFBRSxLQUFLLFNBQVUsT0FBTyxHQUFFLEdBQUcsRUFBRSxLQUFLLEdBQUcsRUFBRSxNQUFPLEdBQUUsVUFBVSxFQUFFLE9BQU8sS0FBSyxVQUFVLFFBQVEsUUFBUSxLQUFLLE1BQU0sU0FBUyxHQUFH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LEVBQ1AsS0FBTSxFQUFTLEVBQUcsT0FBUyxJQUt6QixFQUFPLEVBQUksTUFBTSxFQUFRLEVBQVMsRUFBRyxPQUV6QyxHQUFhLEVBQVcsT0FBTyxlQUFlLEVBQUssRUFBTSxFQUFRLElBV25FLE9BUkEsRUFBTyxNQUNMLEdBQUksRUFBRyxHQUNQLE9BQVEsRUFBRyxPQUNYLElBQUssRUFDTCxNQUFPLE9BSUQsRUFBRyxJQUNULElBQUssU0FBUSxNQUNiLElBQUssU0FBUSxPQUNiLElBQUssU0FBUSxLQUNiLElBQUssU0FBUSxTQUNiLElBQUssU0FBUSxZQUNYLEdBQVUsRUFBRyxPQUlqQixPQUFRLEVBQUcsSUFDVCxJQUFLLFNBQVEsTUFDYixJQUFLLFNBQVEsT0FDYixJQUFLLFNBQVEsU0FDYixJQUFLLFNBQVEsU0FDYixJQUFLLFNBQVEsWUFDWCxHQUFVLEVBQUcsUUFTbkIsTUFKSSxJQUFjLElBQ2hCLEVBQU8sR0FBWSxNQUE0QixLQUFwQixFQUFLLFlBQXFCLElBQU0sTUFJM0QsSUFBSyxFQUNMLFdBQUEsR0FVSixRQUFTLGNBQWEsR0FDcEIsR0FBSSxFQUFPLFlBQWEsQ0FDdEIsR0FBSSxHQUFVLEVBQU8sWUFBYyxFQUFJLElBQU0sRUFDN0MsT0FBQSxVQUFpQixFQUFPLFlBQVcsV0FBVyxFQUN6QyxHQUFJLEVBQU8sT0FDaEIsTUFBTyxHQUFPLE1BRWhCLE1BQU0sZ0VBM0dSLElBQUksVUFDRixNQUFPLElBQ1AsT0FBUSxJQUNSLE9BQVEsSUFDUixLQUFNLElBQ04sU0FBVSxJQUNWLFNBQVUsSUFDVixRQUFTLElBQ1QsU0FBVSxJQUNWLFlBQWEsSUFxR2YsUUFBTyxTQUNMLE9BQUEsT0FDQSxZQUFBLFlBQ0EsVUFBQSxVQUNBLGFBQUEsYUFDQSxRQUFBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8vICAgICBCYWNrYm9uZS5qcyAxLjEuMlxuXG4vLyAgICAgKGMpIDIwMTAtMjAxNCBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuLy8gICAgIEJhY2tib25lIG1heSBiZSBmcmVlbHkgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuLy8gICAgIEZvciBhbGwgZGV0YWlscyBhbmQgZG9jdW1lbnRhdGlvbjpcbi8vICAgICBodHRwOi8vYmFja2JvbmVqcy5vcmdcblxuKGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcblxuICAvLyBTZXQgdXAgQmFja2JvbmUgYXBwcm9wcmlhdGVseSBmb3IgdGhlIGVudmlyb25tZW50LiBTdGFydCB3aXRoIEFNRC5cbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbJ3VuZGVyc2NvcmUnLCAnanF1ZXJ5JywgJ2V4cG9ydHMnXSwgZnVuY3Rpb24oXywgJCwgZXhwb3J0cykge1xuICAgICAgLy8gRXhwb3J0IGdsb2JhbCBldmVuIGluIEFNRCBjYXNlIGluIGNhc2UgdGhpcyBzY3JpcHQgaXMgbG9hZGVkIHdpdGhcbiAgICAgIC8vIG90aGVycyB0aGF0IG1heSBzdGlsbCBleHBlY3QgYSBnbG9iYWwgQmFja2JvbmUuXG4gICAgICByb290LkJhY2tib25lID0gZmFjdG9yeShyb290LCBleHBvcnRzLCBfLCAkKTtcbiAgICB9KTtcblxuICAvLyBOZXh0IGZvciBOb2RlLmpzIG9yIENvbW1vbkpTLiBqUXVlcnkgbWF5IG5vdCBiZSBuZWVkZWQgYXMgYSBtb2R1bGUuXG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIF8gPSByZXF1aXJlKCd1bmRlcnNjb3JlJyk7XG4gICAgZmFjdG9yeShyb290LCBleHBvcnRzLCBfKTtcblxuICAvLyBGaW5hbGx5LCBhcyBhIGJyb3dzZXIgZ2xvYmFsLlxuICB9IGVsc2Uge1xuICAgIHJvb3QuQmFja2JvbmUgPSBmYWN0b3J5KHJvb3QsIHt9LCByb290Ll8sIChyb290LmpRdWVyeSB8fCByb290LlplcHRvIHx8IHJvb3QuZW5kZXIgfHwgcm9vdC4kKSk7XG4gIH1cblxufSh0aGlzLCBmdW5jdGlvbihyb290LCBCYWNrYm9uZSwgXywgJCkge1xuXG4gIC8vIEluaXRpYWwgU2V0dXBcbiAgLy8gLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFNhdmUgdGhlIHByZXZpb3VzIHZhbHVlIG9mIHRoZSBgQmFja2JvbmVgIHZhcmlhYmxlLCBzbyB0aGF0IGl0IGNhbiBiZVxuICAvLyByZXN0b3JlZCBsYXRlciBvbiwgaWYgYG5vQ29uZmxpY3RgIGlzIHVzZWQuXG4gIHZhciBwcmV2aW91c0JhY2tib25lID0gcm9vdC5CYWNrYm9uZTtcblxuICAvLyBDcmVhdGUgbG9jYWwgcmVmZXJlbmNlcyB0byBhcnJheSBtZXRob2RzIHdlJ2xsIHdhbnQgdG8gdXNlIGxhdGVyLlxuICB2YXIgYXJyYXkgPSBbXTtcbiAgdmFyIHB1c2ggPSBhcnJheS5wdXNoO1xuICB2YXIgc2xpY2UgPSBhcnJheS5zbGljZTtcbiAgdmFyIHNwbGljZSA9IGFycmF5LnNwbGljZTtcblxuICAvLyBDdXJyZW50IHZlcnNpb24gb2YgdGhlIGxpYnJhcnkuIEtlZXAgaW4gc3luYyB3aXRoIGBwYWNrYWdlLmpzb25gLlxuICBCYWNrYm9uZS5WRVJTSU9OID0gJzEuMS4yJztcblxuICAvLyBGb3IgQmFja2JvbmUncyBwdXJwb3NlcywgalF1ZXJ5LCBaZXB0bywgRW5kZXIsIG9yIE15IExpYnJhcnkgKGtpZGRpbmcpIG93bnNcbiAgLy8gdGhlIGAkYCB2YXJpYWJsZS5cbiAgQmFja2JvbmUuJCA9ICQ7XG5cbiAgLy8gUnVucyBCYWNrYm9uZS5qcyBpbiAqbm9Db25mbGljdCogbW9kZSwgcmV0dXJuaW5nIHRoZSBgQmFja2JvbmVgIHZhcmlhYmxlXG4gIC8vIHRvIGl0cyBwcmV2aW91cyBvd25lci4gUmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGlzIEJhY2tib25lIG9iamVjdC5cbiAgQmFja2JvbmUubm9Db25mbGljdCA9IGZ1bmN0aW9uKCkge1xuICAgIHJvb3QuQmFja2JvbmUgPSBwcmV2aW91c0JhY2tib25lO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8vIFR1cm4gb24gYGVtdWxhdGVIVFRQYCB0byBzdXBwb3J0IGxlZ2FjeSBIVFRQIHNlcnZlcnMuIFNldHRpbmcgdGhpcyBvcHRpb25cbiAgLy8gd2lsbCBmYWtlIGBcIlBBVENIXCJgLCBgXCJQVVRcImAgYW5kIGBcIkRFTEVURVwiYCByZXF1ZXN0cyB2aWEgdGhlIGBfbWV0aG9kYCBwYXJhbWV0ZXIgYW5kXG4gIC8vIHNldCBhIGBYLUh0dHAtTWV0aG9kLU92ZXJyaWRlYCBoZWFkZXIuXG4gIEJhY2tib25lLmVtdWxhdGVIVFRQID0gZmFsc2U7XG5cbiAgLy8gVHVybiBvbiBgZW11bGF0ZUpTT05gIHRvIHN1cHBvcnQgbGVnYWN5IHNlcnZlcnMgdGhhdCBjYW4ndCBkZWFsIHdpdGggZGlyZWN0XG4gIC8vIGBhcHBsaWNhdGlvbi9qc29uYCByZXF1ZXN0cyAuLi4gd2lsbCBlbmNvZGUgdGhlIGJvZHkgYXNcbiAgLy8gYGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZGAgaW5zdGVhZCBhbmQgd2lsbCBzZW5kIHRoZSBtb2RlbCBpbiBhXG4gIC8vIGZvcm0gcGFyYW0gbmFtZWQgYG1vZGVsYC5cbiAgQmFja2JvbmUuZW11bGF0ZUpTT04gPSBmYWxzZTtcblxuICAvLyBCYWNrYm9uZS5FdmVudHNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gQSBtb2R1bGUgdGhhdCBjYW4gYmUgbWl4ZWQgaW4gdG8gKmFueSBvYmplY3QqIGluIG9yZGVyIHRvIHByb3ZpZGUgaXQgd2l0aFxuICAvLyBjdXN0b20gZXZlbnRzLiBZb3UgbWF5IGJpbmQgd2l0aCBgb25gIG9yIHJlbW92ZSB3aXRoIGBvZmZgIGNhbGxiYWNrXG4gIC8vIGZ1bmN0aW9ucyB0byBhbiBldmVudDsgYHRyaWdnZXJgLWluZyBhbiBldmVudCBmaXJlcyBhbGwgY2FsbGJhY2tzIGluXG4gIC8vIHN1Y2Nlc3Npb24uXG4gIC8vXG4gIC8vICAgICB2YXIgb2JqZWN0ID0ge307XG4gIC8vICAgICBfLmV4dGVuZChvYmplY3QsIEJhY2tib25lLkV2ZW50cyk7XG4gIC8vICAgICBvYmplY3Qub24oJ2V4cGFuZCcsIGZ1bmN0aW9uKCl7IGFsZXJ0KCdleHBhbmRlZCcpOyB9KTtcbiAgLy8gICAgIG9iamVjdC50cmlnZ2VyKCdleHBhbmQnKTtcbiAgLy9cbiAgdmFyIEV2ZW50cyA9IEJhY2tib25lLkV2ZW50cyA9IHtcblxuICAgIC8vIEJpbmQgYW4gZXZlbnQgdG8gYSBgY2FsbGJhY2tgIGZ1bmN0aW9uLiBQYXNzaW5nIGBcImFsbFwiYCB3aWxsIGJpbmRcbiAgICAvLyB0aGUgY2FsbGJhY2sgdG8gYWxsIGV2ZW50cyBmaXJlZC5cbiAgICBvbjogZnVuY3Rpb24obmFtZSwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICAgIGlmICghZXZlbnRzQXBpKHRoaXMsICdvbicsIG5hbWUsIFtjYWxsYmFjaywgY29udGV4dF0pIHx8ICFjYWxsYmFjaykgcmV0dXJuIHRoaXM7XG4gICAgICB0aGlzLl9ldmVudHMgfHwgKHRoaXMuX2V2ZW50cyA9IHt9KTtcbiAgICAgIHZhciBldmVudHMgPSB0aGlzLl9ldmVudHNbbmFtZV0gfHwgKHRoaXMuX2V2ZW50c1tuYW1lXSA9IFtdKTtcbiAgICAgIGV2ZW50cy5wdXNoKHtjYWxsYmFjazogY2FsbGJhY2ssIGNvbnRleHQ6IGNvbnRleHQsIGN0eDogY29udGV4dCB8fCB0aGlzfSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gQmluZCBhbiBldmVudCB0byBvbmx5IGJlIHRyaWdnZXJlZCBhIHNpbmdsZSB0aW1lLiBBZnRlciB0aGUgZmlyc3QgdGltZVxuICAgIC8vIHRoZSBjYWxsYmFjayBpcyBpbnZva2VkLCBpdCB3aWxsIGJlIHJlbW92ZWQuXG4gICAgb25jZTogZnVuY3Rpb24obmFtZSwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgICAgIGlmICghZXZlbnRzQXBpKHRoaXMsICdvbmNlJywgbmFtZSwgW2NhbGxiYWNrLCBjb250ZXh0XSkgfHwgIWNhbGxiYWNrKSByZXR1cm4gdGhpcztcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHZhciBvbmNlID0gXy5vbmNlKGZ1bmN0aW9uKCkge1xuICAgICAgICBzZWxmLm9mZihuYW1lLCBvbmNlKTtcbiAgICAgICAgY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH0pO1xuICAgICAgb25jZS5fY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgIHJldHVybiB0aGlzLm9uKG5hbWUsIG9uY2UsIGNvbnRleHQpO1xuICAgIH0sXG5cbiAgICAvLyBSZW1vdmUgb25lIG9yIG1hbnkgY2FsbGJhY2tzLiBJZiBgY29udGV4dGAgaXMgbnVsbCwgcmVtb3ZlcyBhbGxcbiAgICAvLyBjYWxsYmFja3Mgd2l0aCB0aGF0IGZ1bmN0aW9uLiBJZiBgY2FsbGJhY2tgIGlzIG51bGwsIHJlbW92ZXMgYWxsXG4gICAgLy8gY2FsbGJhY2tzIGZvciB0aGUgZXZlbnQuIElmIGBuYW1lYCBpcyBudWxsLCByZW1vdmVzIGFsbCBib3VuZFxuICAgIC8vIGNhbGxiYWNrcyBmb3IgYWxsIGV2ZW50cy5cbiAgICBvZmY6IGZ1bmN0aW9uKG5hbWUsIGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICAgICB2YXIgcmV0YWluLCBldiwgZXZlbnRzLCBuYW1lcywgaSwgbCwgaiwgaztcbiAgICAgIGlmICghdGhpcy5fZXZlbnRzIHx8ICFldmVudHNBcGkodGhpcywgJ29mZicsIG5hbWUsIFtjYWxsYmFjaywgY29udGV4dF0pKSByZXR1cm4gdGhpcztcbiAgICAgIGlmICghbmFtZSAmJiAhY2FsbGJhY2sgJiYgIWNvbnRleHQpIHtcbiAgICAgICAgdGhpcy5fZXZlbnRzID0gdm9pZCAwO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICAgIG5hbWVzID0gbmFtZSA/IFtuYW1lXSA6IF8ua2V5cyh0aGlzLl9ldmVudHMpO1xuICAgICAgZm9yIChpID0gMCwgbCA9IG5hbWVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBuYW1lID0gbmFtZXNbaV07XG4gICAgICAgIGlmIChldmVudHMgPSB0aGlzLl9ldmVudHNbbmFtZV0pIHtcbiAgICAgICAgICB0aGlzLl9ldmVudHNbbmFtZV0gPSByZXRhaW4gPSBbXTtcbiAgICAgICAgICBpZiAoY2FsbGJhY2sgfHwgY29udGV4dCkge1xuICAgICAgICAgICAgZm9yIChqID0gMCwgayA9IGV2ZW50cy5sZW5ndGg7IGogPCBrOyBqKyspIHtcbiAgICAgICAgICAgICAgZXYgPSBldmVudHNbal07XG4gICAgICAgICAgICAgIGlmICgoY2FsbGJhY2sgJiYgY2FsbGJhY2sgIT09IGV2LmNhbGxiYWNrICYmIGNhbGxiYWNrICE9PSBldi5jYWxsYmFjay5fY2FsbGJhY2spIHx8XG4gICAgICAgICAgICAgICAgICAoY29udGV4dCAmJiBjb250ZXh0ICE9PSBldi5jb250ZXh0KSkge1xuICAgICAgICAgICAgICAgIHJldGFpbi5wdXNoKGV2KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIXJldGFpbi5sZW5ndGgpIGRlbGV0ZSB0aGlzLl9ldmVudHNbbmFtZV07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFRyaWdnZXIgb25lIG9yIG1hbnkgZXZlbnRzLCBmaXJpbmcgYWxsIGJvdW5kIGNhbGxiYWNrcy4gQ2FsbGJhY2tzIGFyZVxuICAgIC8vIHBhc3NlZCB0aGUgc2FtZSBhcmd1bWVudHMgYXMgYHRyaWdnZXJgIGlzLCBhcGFydCBmcm9tIHRoZSBldmVudCBuYW1lXG4gICAgLy8gKHVubGVzcyB5b3UncmUgbGlzdGVuaW5nIG9uIGBcImFsbFwiYCwgd2hpY2ggd2lsbCBjYXVzZSB5b3VyIGNhbGxiYWNrIHRvXG4gICAgLy8gcmVjZWl2ZSB0aGUgdHJ1ZSBuYW1lIG9mIHRoZSBldmVudCBhcyB0aGUgZmlyc3QgYXJndW1lbnQpLlxuICAgIHRyaWdnZXI6IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIGlmICghdGhpcy5fZXZlbnRzKSByZXR1cm4gdGhpcztcbiAgICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuICAgICAgaWYgKCFldmVudHNBcGkodGhpcywgJ3RyaWdnZXInLCBuYW1lLCBhcmdzKSkgcmV0dXJuIHRoaXM7XG4gICAgICB2YXIgZXZlbnRzID0gdGhpcy5fZXZlbnRzW25hbWVdO1xuICAgICAgdmFyIGFsbEV2ZW50cyA9IHRoaXMuX2V2ZW50cy5hbGw7XG4gICAgICBpZiAoZXZlbnRzKSB0cmlnZ2VyRXZlbnRzKGV2ZW50cywgYXJncyk7XG4gICAgICBpZiAoYWxsRXZlbnRzKSB0cmlnZ2VyRXZlbnRzKGFsbEV2ZW50cywgYXJndW1lbnRzKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBUZWxsIHRoaXMgb2JqZWN0IHRvIHN0b3AgbGlzdGVuaW5nIHRvIGVpdGhlciBzcGVjaWZpYyBldmVudHMgLi4uIG9yXG4gICAgLy8gdG8gZXZlcnkgb2JqZWN0IGl0J3MgY3VycmVudGx5IGxpc3RlbmluZyB0by5cbiAgICBzdG9wTGlzdGVuaW5nOiBmdW5jdGlvbihvYmosIG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgbGlzdGVuaW5nVG8gPSB0aGlzLl9saXN0ZW5pbmdUbztcbiAgICAgIGlmICghbGlzdGVuaW5nVG8pIHJldHVybiB0aGlzO1xuICAgICAgdmFyIHJlbW92ZSA9ICFuYW1lICYmICFjYWxsYmFjaztcbiAgICAgIGlmICghY2FsbGJhY2sgJiYgdHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSBjYWxsYmFjayA9IHRoaXM7XG4gICAgICBpZiAob2JqKSAobGlzdGVuaW5nVG8gPSB7fSlbb2JqLl9saXN0ZW5JZF0gPSBvYmo7XG4gICAgICBmb3IgKHZhciBpZCBpbiBsaXN0ZW5pbmdUbykge1xuICAgICAgICBvYmogPSBsaXN0ZW5pbmdUb1tpZF07XG4gICAgICAgIG9iai5vZmYobmFtZSwgY2FsbGJhY2ssIHRoaXMpO1xuICAgICAgICBpZiAocmVtb3ZlIHx8IF8uaXNFbXB0eShvYmouX2V2ZW50cykpIGRlbGV0ZSB0aGlzLl9saXN0ZW5pbmdUb1tpZF07XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgfTtcblxuICAvLyBSZWd1bGFyIGV4cHJlc3Npb24gdXNlZCB0byBzcGxpdCBldmVudCBzdHJpbmdzLlxuICB2YXIgZXZlbnRTcGxpdHRlciA9IC9cXHMrLztcblxuICAvLyBJbXBsZW1lbnQgZmFuY3kgZmVhdHVyZXMgb2YgdGhlIEV2ZW50cyBBUEkgc3VjaCBhcyBtdWx0aXBsZSBldmVudFxuICAvLyBuYW1lcyBgXCJjaGFuZ2UgYmx1clwiYCBhbmQgalF1ZXJ5LXN0eWxlIGV2ZW50IG1hcHMgYHtjaGFuZ2U6IGFjdGlvbn1gXG4gIC8vIGluIHRlcm1zIG9mIHRoZSBleGlzdGluZyBBUEkuXG4gIHZhciBldmVudHNBcGkgPSBmdW5jdGlvbihvYmosIGFjdGlvbiwgbmFtZSwgcmVzdCkge1xuICAgIGlmICghbmFtZSkgcmV0dXJuIHRydWU7XG5cbiAgICAvLyBIYW5kbGUgZXZlbnQgbWFwcy5cbiAgICBpZiAodHlwZW9mIG5hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gbmFtZSkge1xuICAgICAgICBvYmpbYWN0aW9uXS5hcHBseShvYmosIFtrZXksIG5hbWVba2V5XV0uY29uY2F0KHJlc3QpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgc3BhY2Ugc2VwYXJhdGVkIGV2ZW50IG5hbWVzLlxuICAgIGlmIChldmVudFNwbGl0dGVyLnRlc3QobmFtZSkpIHtcbiAgICAgIHZhciBuYW1lcyA9IG5hbWUuc3BsaXQoZXZlbnRTcGxpdHRlcik7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5hbWVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBvYmpbYWN0aW9uXS5hcHBseShvYmosIFtuYW1lc1tpXV0uY29uY2F0KHJlc3QpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvLyBBIGRpZmZpY3VsdC10by1iZWxpZXZlLCBidXQgb3B0aW1pemVkIGludGVybmFsIGRpc3BhdGNoIGZ1bmN0aW9uIGZvclxuICAvLyB0cmlnZ2VyaW5nIGV2ZW50cy4gVHJpZXMgdG8ga2VlcCB0aGUgdXN1YWwgY2FzZXMgc3BlZWR5IChtb3N0IGludGVybmFsXG4gIC8vIEJhY2tib25lIGV2ZW50cyBoYXZlIDMgYXJndW1lbnRzKS5cbiAgdmFyIHRyaWdnZXJFdmVudHMgPSBmdW5jdGlvbihldmVudHMsIGFyZ3MpIHtcbiAgICB2YXIgZXYsIGkgPSAtMSwgbCA9IGV2ZW50cy5sZW5ndGgsIGExID0gYXJnc1swXSwgYTIgPSBhcmdzWzFdLCBhMyA9IGFyZ3NbMl07XG4gICAgc3dpdGNoIChhcmdzLmxlbmd0aCkge1xuICAgICAgY2FzZSAwOiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5jYWxsKGV2LmN0eCk7IHJldHVybjtcbiAgICAgIGNhc2UgMTogd2hpbGUgKCsraSA8IGwpIChldiA9IGV2ZW50c1tpXSkuY2FsbGJhY2suY2FsbChldi5jdHgsIGExKTsgcmV0dXJuO1xuICAgICAgY2FzZSAyOiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5jYWxsKGV2LmN0eCwgYTEsIGEyKTsgcmV0dXJuO1xuICAgICAgY2FzZSAzOiB3aGlsZSAoKytpIDwgbCkgKGV2ID0gZXZlbnRzW2ldKS5jYWxsYmFjay5jYWxsKGV2LmN0eCwgYTEsIGEyLCBhMyk7IHJldHVybjtcbiAgICAgIGRlZmF1bHQ6IHdoaWxlICgrK2kgPCBsKSAoZXYgPSBldmVudHNbaV0pLmNhbGxiYWNrLmFwcGx5KGV2LmN0eCwgYXJncyk7IHJldHVybjtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGxpc3Rlbk1ldGhvZHMgPSB7bGlzdGVuVG86ICdvbicsIGxpc3RlblRvT25jZTogJ29uY2UnfTtcblxuICAvLyBJbnZlcnNpb24tb2YtY29udHJvbCB2ZXJzaW9ucyBvZiBgb25gIGFuZCBgb25jZWAuIFRlbGwgKnRoaXMqIG9iamVjdCB0b1xuICAvLyBsaXN0ZW4gdG8gYW4gZXZlbnQgaW4gYW5vdGhlciBvYmplY3QgLi4uIGtlZXBpbmcgdHJhY2sgb2Ygd2hhdCBpdCdzXG4gIC8vIGxpc3RlbmluZyB0by5cbiAgXy5lYWNoKGxpc3Rlbk1ldGhvZHMsIGZ1bmN0aW9uKGltcGxlbWVudGF0aW9uLCBtZXRob2QpIHtcbiAgICBFdmVudHNbbWV0aG9kXSA9IGZ1bmN0aW9uKG9iaiwgbmFtZSwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBsaXN0ZW5pbmdUbyA9IHRoaXMuX2xpc3RlbmluZ1RvIHx8ICh0aGlzLl9saXN0ZW5pbmdUbyA9IHt9KTtcbiAgICAgIHZhciBpZCA9IG9iai5fbGlzdGVuSWQgfHwgKG9iai5fbGlzdGVuSWQgPSBfLnVuaXF1ZUlkKCdsJykpO1xuICAgICAgbGlzdGVuaW5nVG9baWRdID0gb2JqO1xuICAgICAgaWYgKCFjYWxsYmFjayAmJiB0eXBlb2YgbmFtZSA9PT0gJ29iamVjdCcpIGNhbGxiYWNrID0gdGhpcztcbiAgICAgIG9ialtpbXBsZW1lbnRhdGlvbl0obmFtZSwgY2FsbGJhY2ssIHRoaXMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQWxpYXNlcyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gIEV2ZW50cy5iaW5kICAgPSBFdmVudHMub247XG4gIEV2ZW50cy51bmJpbmQgPSBFdmVudHMub2ZmO1xuXG4gIC8vIEFsbG93IHRoZSBgQmFja2JvbmVgIG9iamVjdCB0byBzZXJ2ZSBhcyBhIGdsb2JhbCBldmVudCBidXMsIGZvciBmb2xrcyB3aG9cbiAgLy8gd2FudCBnbG9iYWwgXCJwdWJzdWJcIiBpbiBhIGNvbnZlbmllbnQgcGxhY2UuXG4gIF8uZXh0ZW5kKEJhY2tib25lLCBFdmVudHMpO1xuXG4gIC8vIEJhY2tib25lLk1vZGVsXG4gIC8vIC0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gQmFja2JvbmUgKipNb2RlbHMqKiBhcmUgdGhlIGJhc2ljIGRhdGEgb2JqZWN0IGluIHRoZSBmcmFtZXdvcmsgLS1cbiAgLy8gZnJlcXVlbnRseSByZXByZXNlbnRpbmcgYSByb3cgaW4gYSB0YWJsZSBpbiBhIGRhdGFiYXNlIG9uIHlvdXIgc2VydmVyLlxuICAvLyBBIGRpc2NyZXRlIGNodW5rIG9mIGRhdGEgYW5kIGEgYnVuY2ggb2YgdXNlZnVsLCByZWxhdGVkIG1ldGhvZHMgZm9yXG4gIC8vIHBlcmZvcm1pbmcgY29tcHV0YXRpb25zIGFuZCB0cmFuc2Zvcm1hdGlvbnMgb24gdGhhdCBkYXRhLlxuXG4gIC8vIENyZWF0ZSBhIG5ldyBtb2RlbCB3aXRoIHRoZSBzcGVjaWZpZWQgYXR0cmlidXRlcy4gQSBjbGllbnQgaWQgKGBjaWRgKVxuICAvLyBpcyBhdXRvbWF0aWNhbGx5IGdlbmVyYXRlZCBhbmQgYXNzaWduZWQgZm9yIHlvdS5cbiAgdmFyIE1vZGVsID0gQmFja2JvbmUuTW9kZWwgPSBmdW5jdGlvbihhdHRyaWJ1dGVzLCBvcHRpb25zKSB7XG4gICAgdmFyIGF0dHJzID0gYXR0cmlidXRlcyB8fCB7fTtcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgIHRoaXMuY2lkID0gXy51bmlxdWVJZCgnYycpO1xuICAgIHRoaXMuYXR0cmlidXRlcyA9IHt9O1xuICAgIGlmIChvcHRpb25zLmNvbGxlY3Rpb24pIHRoaXMuY29sbGVjdGlvbiA9IG9wdGlvbnMuY29sbGVjdGlvbjtcbiAgICBpZiAob3B0aW9ucy5wYXJzZSkgYXR0cnMgPSB0aGlzLnBhcnNlKGF0dHJzLCBvcHRpb25zKSB8fCB7fTtcbiAgICBhdHRycyA9IF8uZGVmYXVsdHMoe30sIGF0dHJzLCBfLnJlc3VsdCh0aGlzLCAnZGVmYXVsdHMnKSk7XG4gICAgdGhpcy5zZXQoYXR0cnMsIG9wdGlvbnMpO1xuICAgIHRoaXMuY2hhbmdlZCA9IHt9O1xuICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIC8vIEF0dGFjaCBhbGwgaW5oZXJpdGFibGUgbWV0aG9kcyB0byB0aGUgTW9kZWwgcHJvdG90eXBlLlxuICBfLmV4dGVuZChNb2RlbC5wcm90b3R5cGUsIEV2ZW50cywge1xuXG4gICAgLy8gQSBoYXNoIG9mIGF0dHJpYnV0ZXMgd2hvc2UgY3VycmVudCBhbmQgcHJldmlvdXMgdmFsdWUgZGlmZmVyLlxuICAgIGNoYW5nZWQ6IG51bGwsXG5cbiAgICAvLyBUaGUgdmFsdWUgcmV0dXJuZWQgZHVyaW5nIHRoZSBsYXN0IGZhaWxlZCB2YWxpZGF0aW9uLlxuICAgIHZhbGlkYXRpb25FcnJvcjogbnVsbCxcblxuICAgIC8vIFRoZSBkZWZhdWx0IG5hbWUgZm9yIHRoZSBKU09OIGBpZGAgYXR0cmlidXRlIGlzIGBcImlkXCJgLiBNb25nb0RCIGFuZFxuICAgIC8vIENvdWNoREIgdXNlcnMgbWF5IHdhbnQgdG8gc2V0IHRoaXMgdG8gYFwiX2lkXCJgLlxuICAgIGlkQXR0cmlidXRlOiAnaWQnLFxuXG4gICAgLy8gSW5pdGlhbGl6ZSBpcyBhbiBlbXB0eSBmdW5jdGlvbiBieSBkZWZhdWx0LiBPdmVycmlkZSBpdCB3aXRoIHlvdXIgb3duXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gbG9naWMuXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKXt9LFxuXG4gICAgLy8gUmV0dXJuIGEgY29weSBvZiB0aGUgbW9kZWwncyBgYXR0cmlidXRlc2Agb2JqZWN0LlxuICAgIHRvSlNPTjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgcmV0dXJuIF8uY2xvbmUodGhpcy5hdHRyaWJ1dGVzKTtcbiAgICB9LFxuXG4gICAgLy8gUHJveHkgYEJhY2tib25lLnN5bmNgIGJ5IGRlZmF1bHQgLS0gYnV0IG92ZXJyaWRlIHRoaXMgaWYgeW91IG5lZWRcbiAgICAvLyBjdXN0b20gc3luY2luZyBzZW1hbnRpY3MgZm9yICp0aGlzKiBwYXJ0aWN1bGFyIG1vZGVsLlxuICAgIHN5bmM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIEJhY2tib25lLnN5bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSB2YWx1ZSBvZiBhbiBhdHRyaWJ1dGUuXG4gICAgZ2V0OiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICByZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2F0dHJdO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIEhUTUwtZXNjYXBlZCB2YWx1ZSBvZiBhbiBhdHRyaWJ1dGUuXG4gICAgZXNjYXBlOiBmdW5jdGlvbihhdHRyKSB7XG4gICAgICByZXR1cm4gXy5lc2NhcGUodGhpcy5nZXQoYXR0cikpO1xuICAgIH0sXG5cbiAgICAvLyBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYXR0cmlidXRlIGNvbnRhaW5zIGEgdmFsdWUgdGhhdCBpcyBub3QgbnVsbFxuICAgIC8vIG9yIHVuZGVmaW5lZC5cbiAgICBoYXM6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIHJldHVybiB0aGlzLmdldChhdHRyKSAhPSBudWxsO1xuICAgIH0sXG5cbiAgICAvLyBTZXQgYSBoYXNoIG9mIG1vZGVsIGF0dHJpYnV0ZXMgb24gdGhlIG9iamVjdCwgZmlyaW5nIGBcImNoYW5nZVwiYC4gVGhpcyBpc1xuICAgIC8vIHRoZSBjb3JlIHByaW1pdGl2ZSBvcGVyYXRpb24gb2YgYSBtb2RlbCwgdXBkYXRpbmcgdGhlIGRhdGEgYW5kIG5vdGlmeWluZ1xuICAgIC8vIGFueW9uZSB3aG8gbmVlZHMgdG8ga25vdyBhYm91dCB0aGUgY2hhbmdlIGluIHN0YXRlLiBUaGUgaGVhcnQgb2YgdGhlIGJlYXN0LlxuICAgIHNldDogZnVuY3Rpb24oa2V5LCB2YWwsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBhdHRyLCBhdHRycywgdW5zZXQsIGNoYW5nZXMsIHNpbGVudCwgY2hhbmdpbmcsIHByZXYsIGN1cnJlbnQ7XG4gICAgICBpZiAoa2V5ID09IG51bGwpIHJldHVybiB0aGlzO1xuXG4gICAgICAvLyBIYW5kbGUgYm90aCBgXCJrZXlcIiwgdmFsdWVgIGFuZCBge2tleTogdmFsdWV9YCAtc3R5bGUgYXJndW1lbnRzLlxuICAgICAgaWYgKHR5cGVvZiBrZXkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGF0dHJzID0ga2V5O1xuICAgICAgICBvcHRpb25zID0gdmFsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKGF0dHJzID0ge30pW2tleV0gPSB2YWw7XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG5cbiAgICAgIC8vIFJ1biB2YWxpZGF0aW9uLlxuICAgICAgaWYgKCF0aGlzLl92YWxpZGF0ZShhdHRycywgb3B0aW9ucykpIHJldHVybiBmYWxzZTtcblxuICAgICAgLy8gRXh0cmFjdCBhdHRyaWJ1dGVzIGFuZCBvcHRpb25zLlxuICAgICAgdW5zZXQgICAgICAgICAgID0gb3B0aW9ucy51bnNldDtcbiAgICAgIHNpbGVudCAgICAgICAgICA9IG9wdGlvbnMuc2lsZW50O1xuICAgICAgY2hhbmdlcyAgICAgICAgID0gW107XG4gICAgICBjaGFuZ2luZyAgICAgICAgPSB0aGlzLl9jaGFuZ2luZztcbiAgICAgIHRoaXMuX2NoYW5naW5nICA9IHRydWU7XG5cbiAgICAgIGlmICghY2hhbmdpbmcpIHtcbiAgICAgICAgdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzID0gXy5jbG9uZSh0aGlzLmF0dHJpYnV0ZXMpO1xuICAgICAgICB0aGlzLmNoYW5nZWQgPSB7fTtcbiAgICAgIH1cbiAgICAgIGN1cnJlbnQgPSB0aGlzLmF0dHJpYnV0ZXMsIHByZXYgPSB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXM7XG5cbiAgICAgIC8vIENoZWNrIGZvciBjaGFuZ2VzIG9mIGBpZGAuXG4gICAgICBpZiAodGhpcy5pZEF0dHJpYnV0ZSBpbiBhdHRycykgdGhpcy5pZCA9IGF0dHJzW3RoaXMuaWRBdHRyaWJ1dGVdO1xuXG4gICAgICAvLyBGb3IgZWFjaCBgc2V0YCBhdHRyaWJ1dGUsIHVwZGF0ZSBvciBkZWxldGUgdGhlIGN1cnJlbnQgdmFsdWUuXG4gICAgICBmb3IgKGF0dHIgaW4gYXR0cnMpIHtcbiAgICAgICAgdmFsID0gYXR0cnNbYXR0cl07XG4gICAgICAgIGlmICghXy5pc0VxdWFsKGN1cnJlbnRbYXR0cl0sIHZhbCkpIGNoYW5nZXMucHVzaChhdHRyKTtcbiAgICAgICAgaWYgKCFfLmlzRXF1YWwocHJldlthdHRyXSwgdmFsKSkge1xuICAgICAgICAgIHRoaXMuY2hhbmdlZFthdHRyXSA9IHZhbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWxldGUgdGhpcy5jaGFuZ2VkW2F0dHJdO1xuICAgICAgICB9XG4gICAgICAgIHVuc2V0ID8gZGVsZXRlIGN1cnJlbnRbYXR0cl0gOiBjdXJyZW50W2F0dHJdID0gdmFsO1xuICAgICAgfVxuXG4gICAgICAvLyBUcmlnZ2VyIGFsbCByZWxldmFudCBhdHRyaWJ1dGUgY2hhbmdlcy5cbiAgICAgIGlmICghc2lsZW50KSB7XG4gICAgICAgIGlmIChjaGFuZ2VzLmxlbmd0aCkgdGhpcy5fcGVuZGluZyA9IG9wdGlvbnM7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hhbmdlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICB0aGlzLnRyaWdnZXIoJ2NoYW5nZTonICsgY2hhbmdlc1tpXSwgdGhpcywgY3VycmVudFtjaGFuZ2VzW2ldXSwgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gWW91IG1pZ2h0IGJlIHdvbmRlcmluZyB3aHkgdGhlcmUncyBhIGB3aGlsZWAgbG9vcCBoZXJlLiBDaGFuZ2VzIGNhblxuICAgICAgLy8gYmUgcmVjdXJzaXZlbHkgbmVzdGVkIHdpdGhpbiBgXCJjaGFuZ2VcImAgZXZlbnRzLlxuICAgICAgaWYgKGNoYW5naW5nKSByZXR1cm4gdGhpcztcbiAgICAgIGlmICghc2lsZW50KSB7XG4gICAgICAgIHdoaWxlICh0aGlzLl9wZW5kaW5nKSB7XG4gICAgICAgICAgb3B0aW9ucyA9IHRoaXMuX3BlbmRpbmc7XG4gICAgICAgICAgdGhpcy5fcGVuZGluZyA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMudHJpZ2dlcignY2hhbmdlJywgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuX3BlbmRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2NoYW5naW5nID0gZmFsc2U7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIGFuIGF0dHJpYnV0ZSBmcm9tIHRoZSBtb2RlbCwgZmlyaW5nIGBcImNoYW5nZVwiYC4gYHVuc2V0YCBpcyBhIG5vb3BcbiAgICAvLyBpZiB0aGUgYXR0cmlidXRlIGRvZXNuJ3QgZXhpc3QuXG4gICAgdW5zZXQ6IGZ1bmN0aW9uKGF0dHIsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLnNldChhdHRyLCB2b2lkIDAsIF8uZXh0ZW5kKHt9LCBvcHRpb25zLCB7dW5zZXQ6IHRydWV9KSk7XG4gICAgfSxcblxuICAgIC8vIENsZWFyIGFsbCBhdHRyaWJ1dGVzIG9uIHRoZSBtb2RlbCwgZmlyaW5nIGBcImNoYW5nZVwiYC5cbiAgICBjbGVhcjogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIGF0dHJzID0ge307XG4gICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5hdHRyaWJ1dGVzKSBhdHRyc1trZXldID0gdm9pZCAwO1xuICAgICAgcmV0dXJuIHRoaXMuc2V0KGF0dHJzLCBfLmV4dGVuZCh7fSwgb3B0aW9ucywge3Vuc2V0OiB0cnVlfSkpO1xuICAgIH0sXG5cbiAgICAvLyBEZXRlcm1pbmUgaWYgdGhlIG1vZGVsIGhhcyBjaGFuZ2VkIHNpbmNlIHRoZSBsYXN0IGBcImNoYW5nZVwiYCBldmVudC5cbiAgICAvLyBJZiB5b3Ugc3BlY2lmeSBhbiBhdHRyaWJ1dGUgbmFtZSwgZGV0ZXJtaW5lIGlmIHRoYXQgYXR0cmlidXRlIGhhcyBjaGFuZ2VkLlxuICAgIGhhc0NoYW5nZWQ6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIGlmIChhdHRyID09IG51bGwpIHJldHVybiAhXy5pc0VtcHR5KHRoaXMuY2hhbmdlZCk7XG4gICAgICByZXR1cm4gXy5oYXModGhpcy5jaGFuZ2VkLCBhdHRyKTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJuIGFuIG9iamVjdCBjb250YWluaW5nIGFsbCB0aGUgYXR0cmlidXRlcyB0aGF0IGhhdmUgY2hhbmdlZCwgb3JcbiAgICAvLyBmYWxzZSBpZiB0aGVyZSBhcmUgbm8gY2hhbmdlZCBhdHRyaWJ1dGVzLiBVc2VmdWwgZm9yIGRldGVybWluaW5nIHdoYXRcbiAgICAvLyBwYXJ0cyBvZiBhIHZpZXcgbmVlZCB0byBiZSB1cGRhdGVkIGFuZC9vciB3aGF0IGF0dHJpYnV0ZXMgbmVlZCB0byBiZVxuICAgIC8vIHBlcnNpc3RlZCB0byB0aGUgc2VydmVyLiBVbnNldCBhdHRyaWJ1dGVzIHdpbGwgYmUgc2V0IHRvIHVuZGVmaW5lZC5cbiAgICAvLyBZb3UgY2FuIGFsc28gcGFzcyBhbiBhdHRyaWJ1dGVzIG9iamVjdCB0byBkaWZmIGFnYWluc3QgdGhlIG1vZGVsLFxuICAgIC8vIGRldGVybWluaW5nIGlmIHRoZXJlICp3b3VsZCBiZSogYSBjaGFuZ2UuXG4gICAgY2hhbmdlZEF0dHJpYnV0ZXM6IGZ1bmN0aW9uKGRpZmYpIHtcbiAgICAgIGlmICghZGlmZikgcmV0dXJuIHRoaXMuaGFzQ2hhbmdlZCgpID8gXy5jbG9uZSh0aGlzLmNoYW5nZWQpIDogZmFsc2U7XG4gICAgICB2YXIgdmFsLCBjaGFuZ2VkID0gZmFsc2U7XG4gICAgICB2YXIgb2xkID0gdGhpcy5fY2hhbmdpbmcgPyB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXMgOiB0aGlzLmF0dHJpYnV0ZXM7XG4gICAgICBmb3IgKHZhciBhdHRyIGluIGRpZmYpIHtcbiAgICAgICAgaWYgKF8uaXNFcXVhbChvbGRbYXR0cl0sICh2YWwgPSBkaWZmW2F0dHJdKSkpIGNvbnRpbnVlO1xuICAgICAgICAoY2hhbmdlZCB8fCAoY2hhbmdlZCA9IHt9KSlbYXR0cl0gPSB2YWw7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2hhbmdlZDtcbiAgICB9LFxuXG4gICAgLy8gR2V0IHRoZSBwcmV2aW91cyB2YWx1ZSBvZiBhbiBhdHRyaWJ1dGUsIHJlY29yZGVkIGF0IHRoZSB0aW1lIHRoZSBsYXN0XG4gICAgLy8gYFwiY2hhbmdlXCJgIGV2ZW50IHdhcyBmaXJlZC5cbiAgICBwcmV2aW91czogZnVuY3Rpb24oYXR0cikge1xuICAgICAgaWYgKGF0dHIgPT0gbnVsbCB8fCAhdGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzKSByZXR1cm4gbnVsbDtcbiAgICAgIHJldHVybiB0aGlzLl9wcmV2aW91c0F0dHJpYnV0ZXNbYXR0cl07XG4gICAgfSxcblxuICAgIC8vIEdldCBhbGwgb2YgdGhlIGF0dHJpYnV0ZXMgb2YgdGhlIG1vZGVsIGF0IHRoZSB0aW1lIG9mIHRoZSBwcmV2aW91c1xuICAgIC8vIGBcImNoYW5nZVwiYCBldmVudC5cbiAgICBwcmV2aW91c0F0dHJpYnV0ZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIF8uY2xvbmUodGhpcy5fcHJldmlvdXNBdHRyaWJ1dGVzKTtcbiAgICB9LFxuXG4gICAgLy8gRmV0Y2ggdGhlIG1vZGVsIGZyb20gdGhlIHNlcnZlci4gSWYgdGhlIHNlcnZlcidzIHJlcHJlc2VudGF0aW9uIG9mIHRoZVxuICAgIC8vIG1vZGVsIGRpZmZlcnMgZnJvbSBpdHMgY3VycmVudCBhdHRyaWJ1dGVzLCB0aGV5IHdpbGwgYmUgb3ZlcnJpZGRlbixcbiAgICAvLyB0cmlnZ2VyaW5nIGEgYFwiY2hhbmdlXCJgIGV2ZW50LlxuICAgIGZldGNoOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyA/IF8uY2xvbmUob3B0aW9ucykgOiB7fTtcbiAgICAgIGlmIChvcHRpb25zLnBhcnNlID09PSB2b2lkIDApIG9wdGlvbnMucGFyc2UgPSB0cnVlO1xuICAgICAgdmFyIG1vZGVsID0gdGhpcztcbiAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuICAgICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICBpZiAoIW1vZGVsLnNldChtb2RlbC5wYXJzZShyZXNwLCBvcHRpb25zKSwgb3B0aW9ucykpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MobW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgICBtb2RlbC50cmlnZ2VyKCdzeW5jJywgbW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgfTtcbiAgICAgIHdyYXBFcnJvcih0aGlzLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiB0aGlzLnN5bmMoJ3JlYWQnLCB0aGlzLCBvcHRpb25zKTtcbiAgICB9LFxuXG4gICAgLy8gU2V0IGEgaGFzaCBvZiBtb2RlbCBhdHRyaWJ1dGVzLCBhbmQgc3luYyB0aGUgbW9kZWwgdG8gdGhlIHNlcnZlci5cbiAgICAvLyBJZiB0aGUgc2VydmVyIHJldHVybnMgYW4gYXR0cmlidXRlcyBoYXNoIHRoYXQgZGlmZmVycywgdGhlIG1vZGVsJ3NcbiAgICAvLyBzdGF0ZSB3aWxsIGJlIGBzZXRgIGFnYWluLlxuICAgIHNhdmU6IGZ1bmN0aW9uKGtleSwgdmFsLCBvcHRpb25zKSB7XG4gICAgICB2YXIgYXR0cnMsIG1ldGhvZCwgeGhyLCBhdHRyaWJ1dGVzID0gdGhpcy5hdHRyaWJ1dGVzO1xuXG4gICAgICAvLyBIYW5kbGUgYm90aCBgXCJrZXlcIiwgdmFsdWVgIGFuZCBge2tleTogdmFsdWV9YCAtc3R5bGUgYXJndW1lbnRzLlxuICAgICAgaWYgKGtleSA9PSBudWxsIHx8IHR5cGVvZiBrZXkgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGF0dHJzID0ga2V5O1xuICAgICAgICBvcHRpb25zID0gdmFsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgKGF0dHJzID0ge30pW2tleV0gPSB2YWw7XG4gICAgICB9XG5cbiAgICAgIG9wdGlvbnMgPSBfLmV4dGVuZCh7dmFsaWRhdGU6IHRydWV9LCBvcHRpb25zKTtcblxuICAgICAgLy8gSWYgd2UncmUgbm90IHdhaXRpbmcgYW5kIGF0dHJpYnV0ZXMgZXhpc3QsIHNhdmUgYWN0cyBhc1xuICAgICAgLy8gYHNldChhdHRyKS5zYXZlKG51bGwsIG9wdHMpYCB3aXRoIHZhbGlkYXRpb24uIE90aGVyd2lzZSwgY2hlY2sgaWZcbiAgICAgIC8vIHRoZSBtb2RlbCB3aWxsIGJlIHZhbGlkIHdoZW4gdGhlIGF0dHJpYnV0ZXMsIGlmIGFueSwgYXJlIHNldC5cbiAgICAgIGlmIChhdHRycyAmJiAhb3B0aW9ucy53YWl0KSB7XG4gICAgICAgIGlmICghdGhpcy5zZXQoYXR0cnMsIG9wdGlvbnMpKSByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoIXRoaXMuX3ZhbGlkYXRlKGF0dHJzLCBvcHRpb25zKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXQgdGVtcG9yYXJ5IGF0dHJpYnV0ZXMgaWYgYHt3YWl0OiB0cnVlfWAuXG4gICAgICBpZiAoYXR0cnMgJiYgb3B0aW9ucy53YWl0KSB7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlcyA9IF8uZXh0ZW5kKHt9LCBhdHRyaWJ1dGVzLCBhdHRycyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFmdGVyIGEgc3VjY2Vzc2Z1bCBzZXJ2ZXItc2lkZSBzYXZlLCB0aGUgY2xpZW50IGlzIChvcHRpb25hbGx5KVxuICAgICAgLy8gdXBkYXRlZCB3aXRoIHRoZSBzZXJ2ZXItc2lkZSBzdGF0ZS5cbiAgICAgIGlmIChvcHRpb25zLnBhcnNlID09PSB2b2lkIDApIG9wdGlvbnMucGFyc2UgPSB0cnVlO1xuICAgICAgdmFyIG1vZGVsID0gdGhpcztcbiAgICAgIHZhciBzdWNjZXNzID0gb3B0aW9ucy5zdWNjZXNzO1xuICAgICAgb3B0aW9ucy5zdWNjZXNzID0gZnVuY3Rpb24ocmVzcCkge1xuICAgICAgICAvLyBFbnN1cmUgYXR0cmlidXRlcyBhcmUgcmVzdG9yZWQgZHVyaW5nIHN5bmNocm9ub3VzIHNhdmVzLlxuICAgICAgICBtb2RlbC5hdHRyaWJ1dGVzID0gYXR0cmlidXRlcztcbiAgICAgICAgdmFyIHNlcnZlckF0dHJzID0gbW9kZWwucGFyc2UocmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIGlmIChvcHRpb25zLndhaXQpIHNlcnZlckF0dHJzID0gXy5leHRlbmQoYXR0cnMgfHwge30sIHNlcnZlckF0dHJzKTtcbiAgICAgICAgaWYgKF8uaXNPYmplY3Qoc2VydmVyQXR0cnMpICYmICFtb2RlbC5zZXQoc2VydmVyQXR0cnMsIG9wdGlvbnMpKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzdWNjZXNzKSBzdWNjZXNzKG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgICAgbW9kZWwudHJpZ2dlcignc3luYycsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIH07XG4gICAgICB3cmFwRXJyb3IodGhpcywgb3B0aW9ucyk7XG5cbiAgICAgIG1ldGhvZCA9IHRoaXMuaXNOZXcoKSA/ICdjcmVhdGUnIDogKG9wdGlvbnMucGF0Y2ggPyAncGF0Y2gnIDogJ3VwZGF0ZScpO1xuICAgICAgaWYgKG1ldGhvZCA9PT0gJ3BhdGNoJykgb3B0aW9ucy5hdHRycyA9IGF0dHJzO1xuICAgICAgeGhyID0gdGhpcy5zeW5jKG1ldGhvZCwgdGhpcywgb3B0aW9ucyk7XG5cbiAgICAgIC8vIFJlc3RvcmUgYXR0cmlidXRlcy5cbiAgICAgIGlmIChhdHRycyAmJiBvcHRpb25zLndhaXQpIHRoaXMuYXR0cmlidXRlcyA9IGF0dHJpYnV0ZXM7XG5cbiAgICAgIHJldHVybiB4aHI7XG4gICAgfSxcblxuICAgIC8vIERlc3Ryb3kgdGhpcyBtb2RlbCBvbiB0aGUgc2VydmVyIGlmIGl0IHdhcyBhbHJlYWR5IHBlcnNpc3RlZC5cbiAgICAvLyBPcHRpbWlzdGljYWxseSByZW1vdmVzIHRoZSBtb2RlbCBmcm9tIGl0cyBjb2xsZWN0aW9uLCBpZiBpdCBoYXMgb25lLlxuICAgIC8vIElmIGB3YWl0OiB0cnVlYCBpcyBwYXNzZWQsIHdhaXRzIGZvciB0aGUgc2VydmVyIHRvIHJlc3BvbmQgYmVmb3JlIHJlbW92YWwuXG4gICAgZGVzdHJveTogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgPyBfLmNsb25lKG9wdGlvbnMpIDoge307XG4gICAgICB2YXIgbW9kZWwgPSB0aGlzO1xuICAgICAgdmFyIHN1Y2Nlc3MgPSBvcHRpb25zLnN1Y2Nlc3M7XG5cbiAgICAgIHZhciBkZXN0cm95ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIG1vZGVsLnRyaWdnZXIoJ2Rlc3Ryb3knLCBtb2RlbCwgbW9kZWwuY29sbGVjdGlvbiwgb3B0aW9ucyk7XG4gICAgICB9O1xuXG4gICAgICBvcHRpb25zLnN1Y2Nlc3MgPSBmdW5jdGlvbihyZXNwKSB7XG4gICAgICAgIGlmIChvcHRpb25zLndhaXQgfHwgbW9kZWwuaXNOZXcoKSkgZGVzdHJveSgpO1xuICAgICAgICBpZiAoc3VjY2Vzcykgc3VjY2Vzcyhtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIGlmICghbW9kZWwuaXNOZXcoKSkgbW9kZWwudHJpZ2dlcignc3luYycsIG1vZGVsLCByZXNwLCBvcHRpb25zKTtcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLmlzTmV3KCkpIHtcbiAgICAgICAgb3B0aW9ucy5zdWNjZXNzKCk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHdyYXBFcnJvcih0aGlzLCBvcHRpb25zKTtcblxuICAgICAgdmFyIHhociA9IHRoaXMuc3luYygnZGVsZXRlJywgdGhpcywgb3B0aW9ucyk7XG4gICAgICBpZiAoIW9wdGlvbnMud2FpdCkgZGVzdHJveSgpO1xuICAgICAgcmV0dXJuIHhocjtcbiAgICB9LFxuXG4gICAgLy8gRGVmYXVsdCBVUkwgZm9yIHRoZSBtb2RlbCdzIHJlcHJlc2VudGF0aW9uIG9uIHRoZSBzZXJ2ZXIgLS0gaWYgeW91J3JlXG4gICAgLy8gdXNpbmcgQmFja2JvbmUncyByZXN0ZnVsIG1ldGhvZHMsIG92ZXJyaWRlIHRoaXMgdG8gY2hhbmdlIHRoZSBlbmRwb2ludFxuICAgIC8vIHRoYXQgd2lsbCBiZSBjYWxsZWQuXG4gICAgdXJsOiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBiYXNlID1cbiAgICAgICAgXy5yZXN1bHQodGhpcywgJ3VybFJvb3QnKSB8fFxuICAgICAgICBfLnJlc3VsdCh0aGlzLmNvbGxlY3Rpb24sICd1cmwnKSB8fFxuICAgICAgICB1cmxFcnJvcigpO1xuICAgICAgaWYgKHRoaXMuaXNOZXcoKSkgcmV0dXJuIGJhc2U7XG4gICAgICByZXR1cm4gYmFzZS5yZXBsYWNlKC8oW15cXC9dKSQvLCAnJDEvJykgKyBlbmNvZGVVUklDb21wb25lbnQodGhpcy5pZCk7XG4gICAgfSxcblxuICAgIC8vICoqcGFyc2UqKiBjb252ZXJ0cyBhIHJlc3BvbnNlIGludG8gdGhlIGhhc2ggb2YgYXR0cmlidXRlcyB0byBiZSBgc2V0YCBvblxuICAgIC8vIHRoZSBtb2RlbC4gVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gaXMganVzdCB0byBwYXNzIHRoZSByZXNwb25zZSBhbG9uZy5cbiAgICBwYXJzZTogZnVuY3Rpb24ocmVzcCwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHJlc3A7XG4gICAgfSxcblxuICAgIC8vIENyZWF0ZSBhIG5ldyBtb2RlbCB3aXRoIGlkZW50aWNhbCBhdHRyaWJ1dGVzIHRvIHRoaXMgb25lLlxuICAgIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLmF0dHJpYnV0ZXMpO1xuICAgIH0sXG5cbiAgICAvLyBBIG1vZGVsIGlzIG5ldyBpZiBpdCBoYXMgbmV2ZXIgYmVlbiBzYXZlZCB0byB0aGUgc2VydmVyLCBhbmQgbGFja3MgYW4gaWQuXG4gICAgaXNOZXc6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICF0aGlzLmhhcyh0aGlzLmlkQXR0cmlidXRlKTtcbiAgICB9LFxuXG4gICAgLy8gQ2hlY2sgaWYgdGhlIG1vZGVsIGlzIGN1cnJlbnRseSBpbiBhIHZhbGlkIHN0YXRlLlxuICAgIGlzVmFsaWQ6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLl92YWxpZGF0ZSh7fSwgXy5leHRlbmQob3B0aW9ucyB8fCB7fSwgeyB2YWxpZGF0ZTogdHJ1ZSB9KSk7XG4gICAgfSxcblxuICAgIC8vIFJ1biB2YWxpZGF0aW9uIGFnYWluc3QgdGhlIG5leHQgY29tcGxldGUgc2V0IG9mIG1vZGVsIGF0dHJpYnV0ZXMsXG4gICAgLy8gcmV0dXJuaW5nIGB0cnVlYCBpZiBhbGwgaXMgd2VsbC4gT3RoZXJ3aXNlLCBmaXJlIGFuIGBcImludmFsaWRcImAgZXZlbnQuXG4gICAgX3ZhbGlkYXRlOiBmdW5jdGlvbihhdHRycywgb3B0aW9ucykge1xuICAgICAgaWYgKCFvcHRpb25zLnZhbGlkYXRlIHx8ICF0aGlzLnZhbGlkYXRlKSByZXR1cm4gdHJ1ZTtcbiAgICAgIGF0dHJzID0gXy5leHRlbmQoe30sIHRoaXMuYXR0cmlidXRlcywgYXR0cnMpO1xuICAgICAgdmFyIGVycm9yID0gdGhpcy52YWxpZGF0aW9uRXJyb3IgPSB0aGlzLnZhbGlkYXRlKGF0dHJzLCBvcHRpb25zKSB8fCBudWxsO1xuICAgICAgaWYgKCFlcnJvcikgcmV0dXJuIHRydWU7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2ludmFsaWQnLCB0aGlzLCBlcnJvciwgXy5leHRlbmQob3B0aW9ucywge3ZhbGlkYXRpb25FcnJvcjogZXJyb3J9KSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIFVuZGVyc2NvcmUgbWV0aG9kcyB0aGF0IHdlIHdhbnQgdG8gaW1wbGVtZW50IG9uIHRoZSBNb2RlbC5cbiAgdmFyIG1vZGVsTWV0aG9kcyA9IFsna2V5cycsICd2YWx1ZXMnLCAncGFpcnMnLCAnaW52ZXJ0JywgJ3BpY2snLCAnb21pdCddO1xuXG4gIC8vIE1peCBpbiBlYWNoIFVuZGVyc2NvcmUgbWV0aG9kIGFzIGEgcHJveHkgdG8gYE1vZGVsI2F0dHJpYnV0ZXNgLlxuICBfLmVhY2gobW9kZWxNZXRob2RzLCBmdW5jdGlvbihtZXRob2QpIHtcbiAgICBNb2RlbC5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgICBhcmdzLnVuc2hpZnQodGhpcy5hdHRyaWJ1dGVzKTtcbiAgICAgIHJldHVybiBfW21ldGhvZF0uYXBwbHkoXywgYXJncyk7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQmFja2JvbmUuQ29sbGVjdGlvblxuICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gSWYgbW9kZWxzIHRlbmQgdG8gcmVwcmVzZW50IGEgc2luZ2xlIHJvdyBvZiBkYXRhLCBhIEJhY2tib25lIENvbGxlY3Rpb24gaXNcbiAgLy8gbW9yZSBhbmFsYWdvdXMgdG8gYSB0YWJsZSBmdWxsIG9mIGRhdGEgLi4uIG9yIGEgc21hbGwgc2xpY2Ugb3IgcGFnZSBvZiB0aGF0XG4gIC8vIHRhYmxlLCBvciBhIGNvbGxlY3Rpb24gb2Ygcm93cyB0aGF0IGJlbG9uZyB0b2dldGhlciBmb3IgYSBwYXJ0aWN1bGFyIHJlYXNvblxuICAvLyAtLSBhbGwgb2YgdGhlIG1lc3NhZ2VzIGluIHRoaXMgcGFydGljdWxhciBmb2xkZXIsIGFsbCBvZiB0aGUgZG9jdW1lbnRzXG4gIC8vIGJlbG9uZ2luZyB0byB0aGlzIHBhcnRpY3VsYXIgYXV0aG9yLCBhbmQgc28gb24uIENvbGxlY3Rpb25zIG1haW50YWluXG4gIC8vIGluZGV4ZXMgb2YgdGhlaXIgbW9kZWxzLCBib3RoIGluIG9yZGVyLCBhbmQgZm9yIGxvb2t1cCBieSBgaWRgLlxuXG4gIC8vIENyZWF0ZSBhIG5ldyAqKkNvbGxlY3Rpb24qKiwgcGVyaGFwcyB0byBjb250YWluIGEgc3BlY2lmaWMgdHlwZSBvZiBgbW9kZWxgLlxuICAvLyBJZiBhIGBjb21wYXJhdG9yYCBpcyBzcGVjaWZpZWQsIHRoZSBDb2xsZWN0aW9uIHdpbGwgbWFpbnRhaW5cbiAgLy8gaXRzIG1vZGVscyBpbiBzb3J0IG9yZGVyLCBhcyB0aGV5J3JlIGFkZGVkIGFuZCByZW1vdmVkLlxuICB2YXIgQ29sbGVjdGlvbiA9IEJhY2tib25lLkNvbGxlY3Rpb24gPSBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0ge30pO1xuICAgIGlmIChvcHRpb25zLm1vZGVsKSB0aGlzLm1vZGVsID0gb3B0aW9ucy5tb2RlbDtcbiAgICBpZiAob3B0aW9ucy5jb21wYXJhdG9yICE9PSB2b2lkIDApIHRoaXMuY29tcGFyYXRvciA9IG9wdGlvbnMuY29tcGFyYXRvcjtcbiAgICB0aGlzLl9yZXNldCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmIChtb2RlbHMpIHRoaXMucmVzZXQobW9kZWxzLCBfLmV4dGVuZCh7c2lsZW50OiB0cnVlfSwgb3B0aW9ucykpO1xuICB9O1xuXG4gIC8vIERlZmF1bHQgb3B0aW9ucyBmb3IgYENvbGxlY3Rpb24jc2V0YC5cbiAgdmFyIHNldE9wdGlvbnMgPSB7YWRkOiB0cnVlLCByZW1vdmU6IHRydWUsIG1lcmdlOiB0cnVlfTtcbiAgdmFyIGFkZE9wdGlvbnMgPSB7YWRkOiB0cnVlLCByZW1vdmU6IGZhbHNlfTtcblxuICAvLyBEZWZpbmUgdGhlIENvbGxlY3Rpb24ncyBpbmhlcml0YWJsZSBtZXRob2RzLlxuICBfLmV4dGVuZChDb2xsZWN0aW9uLnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cbiAgICAvLyBUaGUgZGVmYXVsdCBtb2RlbCBmb3IgYSBjb2xsZWN0aW9uIGlzIGp1c3QgYSAqKkJhY2tib25lLk1vZGVsKiouXG4gICAgLy8gVGhpcyBzaG91bGQgYmUgb3ZlcnJpZGRlbiBpbiBtb3N0IGNhc2VzLlxuICAgIG1vZGVsOiBNb2RlbCxcblxuICAgIC8vIEluaXRpYWxpemUgaXMgYW4gZW1wdHkgZnVuY3Rpb24gYnkgZGVmYXVsdC4gT3ZlcnJpZGUgaXQgd2l0aCB5b3VyIG93blxuICAgIC8vIGluaXRpYWxpemF0aW9uIGxvZ2ljLlxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKCl7fSxcblxuICAgIC8vIFRoZSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGEgQ29sbGVjdGlvbiBpcyBhbiBhcnJheSBvZiB0aGVcbiAgICAvLyBtb2RlbHMnIGF0dHJpYnV0ZXMuXG4gICAgdG9KU09OOiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24obW9kZWwpeyByZXR1cm4gbW9kZWwudG9KU09OKG9wdGlvbnMpOyB9KTtcbiAgICB9LFxuXG4gICAgLy8gUHJveHkgYEJhY2tib25lLnN5bmNgIGJ5IGRlZmF1bHQuXG4gICAgc3luYzogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gQmFja2JvbmUuc3luYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH0sXG5cbiAgICAvLyBBZGQgYSBtb2RlbCwgb3IgbGlzdCBvZiBtb2RlbHMgdG8gdGhlIHNldC5cbiAgICBhZGQ6IGZ1bmN0aW9uKG1vZGVscywgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHRoaXMuc2V0KG1vZGVscywgXy5leHRlbmQoe21lcmdlOiBmYWxzZX0sIG9wdGlvbnMsIGFkZE9wdGlvbnMpKTtcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIGEgbW9kZWwsIG9yIGEgbGlzdCBvZiBtb2RlbHMgZnJvbSB0aGUgc2V0LlxuICAgIHJlbW92ZTogZnVuY3Rpb24obW9kZWxzLCBvcHRpb25zKSB7XG4gICAgICB2YXIgc2luZ3VsYXIgPSAhXy5pc0FycmF5KG1vZGVscyk7XG4gICAgICBtb2RlbHMgPSBzaW5ndWxhciA/IFttb2RlbHNdIDogXy5jbG9uZShtb2RlbHMpO1xuICAgICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgICAgIHZhciBpLCBsLCBpbmRleCwgbW9kZWw7XG4gICAgICBmb3IgKGkgPSAwLCBsID0gbW9kZWxzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBtb2RlbCA9IG1vZGVsc1tpXSA9IHRoaXMuZ2V0KG1vZGVsc1tpXSk7XG4gICAgICAgIGlmICghbW9kZWwpIGNvbnRpbnVlO1xuICAgICAgICBkZWxldGUgdGhpcy5fYnlJZFttb2RlbC5pZF07XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9ieUlkW21vZGVsLmNpZF07XG4gICAgICAgIGluZGV4ID0gdGhpcy5pbmRleE9mKG1vZGVsKTtcbiAgICAgICAgdGhpcy5tb2RlbHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgdGhpcy5sZW5ndGgtLTtcbiAgICAgICAgaWYgKCFvcHRpb25zLnNpbGVudCkge1xuICAgICAgICAgIG9wdGlvbnMuaW5kZXggPSBpbmRleDtcbiAgICAgICAgICBtb2RlbC50cmlnZ2VyKCdyZW1vdmUnLCBtb2RlbCwgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fcmVtb3ZlUmVmZXJlbmNlKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBzaW5ndWxhciA/IG1vZGVsc1swXSA6IG1vZGVscztcbiAgICB9LFxuXG4gICAgLy8gVXBkYXRlIGEgY29sbGVjdGlvbiBieSBgc2V0YC1pbmcgYSBuZXcgbGlzdCBvZiBtb2RlbHMsIGFkZGluZyBuZXcgb25lcyxcbiAgICAvLyByZW1vdmluZyBtb2RlbHMgdGhhdCBhcmUgbm8gbG9uZ2VyIHByZXNlbnQsIGFuZCBtZXJnaW5nIG1vZGVscyB0aGF0XG4gICAgLy8gYWxyZWFkeSBleGlzdCBpbiB0aGUgY29sbGVjdGlvbiwgYXMgbmVjZXNzYXJ5LiBTaW1pbGFyIHRvICoqTW9kZWwjc2V0KiosXG4gICAgLy8gdGhlIGNvcmUgb3BlcmF0aW9uIGZvciB1cGRhdGluZyB0aGUgZGF0YSBjb250YWluZWQgYnkgdGhlIGNvbGxlY3Rpb24uXG4gICAgc2V0OiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBfLmRlZmF1bHRzKHt9LCBvcHRpb25zLCBzZXRPcHRpb25zKTtcbiAgICAgIGlmIChvcHRpb25zLnBhcnNlKSBtb2RlbHMgPSB0aGlzLnBhcnNlKG1vZGVscywgb3B0aW9ucyk7XG4gICAgICB2YXIgc2luZ3VsYXIgPSAhXy5pc0FycmF5KG1vZGVscyk7XG4gICAgICBtb2RlbHMgPSBzaW5ndWxhciA/IChtb2RlbHMgPyBbbW9kZWxzXSA6IFtdKSA6IF8uY2xvbmUobW9kZWxzKTtcbiAgICAgIHZhciBpLCBsLCBpZCwgbW9kZWwsIGF0dHJzLCBleGlzdGluZywgc29ydDtcbiAgICAgIHZhciBhdCA9IG9wdGlvbnMuYXQ7XG4gICAgICB2YXIgdGFyZ2V0TW9kZWwgPSB0aGlzLm1vZGVsO1xuICAgICAgdmFyIHNvcnRhYmxlID0gdGhpcy5jb21wYXJhdG9yICYmIChhdCA9PSBudWxsKSAmJiBvcHRpb25zLnNvcnQgIT09IGZhbHNlO1xuICAgICAgdmFyIHNvcnRBdHRyID0gXy5pc1N0cmluZyh0aGlzLmNvbXBhcmF0b3IpID8gdGhpcy5jb21wYXJhdG9yIDogbnVsbDtcbiAgICAgIHZhciB0b0FkZCA9IFtdLCB0b1JlbW92ZSA9IFtdLCBtb2RlbE1hcCA9IHt9O1xuICAgICAgdmFyIGFkZCA9IG9wdGlvbnMuYWRkLCBtZXJnZSA9IG9wdGlvbnMubWVyZ2UsIHJlbW92ZSA9IG9wdGlvbnMucmVtb3ZlO1xuICAgICAgdmFyIG9yZGVyID0gIXNvcnRhYmxlICYmIGFkZCAmJiByZW1vdmUgPyBbXSA6IGZhbHNlO1xuXG4gICAgICAvLyBUdXJuIGJhcmUgb2JqZWN0cyBpbnRvIG1vZGVsIHJlZmVyZW5jZXMsIGFuZCBwcmV2ZW50IGludmFsaWQgbW9kZWxzXG4gICAgICAvLyBmcm9tIGJlaW5nIGFkZGVkLlxuICAgICAgZm9yIChpID0gMCwgbCA9IG1vZGVscy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgYXR0cnMgPSBtb2RlbHNbaV0gfHwge307XG4gICAgICAgIGlmIChhdHRycyBpbnN0YW5jZW9mIE1vZGVsKSB7XG4gICAgICAgICAgaWQgPSBtb2RlbCA9IGF0dHJzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlkID0gYXR0cnNbdGFyZ2V0TW9kZWwucHJvdG90eXBlLmlkQXR0cmlidXRlIHx8ICdpZCddO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgYSBkdXBsaWNhdGUgaXMgZm91bmQsIHByZXZlbnQgaXQgZnJvbSBiZWluZyBhZGRlZCBhbmRcbiAgICAgICAgLy8gb3B0aW9uYWxseSBtZXJnZSBpdCBpbnRvIHRoZSBleGlzdGluZyBtb2RlbC5cbiAgICAgICAgaWYgKGV4aXN0aW5nID0gdGhpcy5nZXQoaWQpKSB7XG4gICAgICAgICAgaWYgKHJlbW92ZSkgbW9kZWxNYXBbZXhpc3RpbmcuY2lkXSA9IHRydWU7XG4gICAgICAgICAgaWYgKG1lcmdlKSB7XG4gICAgICAgICAgICBhdHRycyA9IGF0dHJzID09PSBtb2RlbCA/IG1vZGVsLmF0dHJpYnV0ZXMgOiBhdHRycztcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnBhcnNlKSBhdHRycyA9IGV4aXN0aW5nLnBhcnNlKGF0dHJzLCBvcHRpb25zKTtcbiAgICAgICAgICAgIGV4aXN0aW5nLnNldChhdHRycywgb3B0aW9ucyk7XG4gICAgICAgICAgICBpZiAoc29ydGFibGUgJiYgIXNvcnQgJiYgZXhpc3RpbmcuaGFzQ2hhbmdlZChzb3J0QXR0cikpIHNvcnQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBtb2RlbHNbaV0gPSBleGlzdGluZztcblxuICAgICAgICAvLyBJZiB0aGlzIGlzIGEgbmV3LCB2YWxpZCBtb2RlbCwgcHVzaCBpdCB0byB0aGUgYHRvQWRkYCBsaXN0LlxuICAgICAgICB9IGVsc2UgaWYgKGFkZCkge1xuICAgICAgICAgIG1vZGVsID0gbW9kZWxzW2ldID0gdGhpcy5fcHJlcGFyZU1vZGVsKGF0dHJzLCBvcHRpb25zKTtcbiAgICAgICAgICBpZiAoIW1vZGVsKSBjb250aW51ZTtcbiAgICAgICAgICB0b0FkZC5wdXNoKG1vZGVsKTtcbiAgICAgICAgICB0aGlzLl9hZGRSZWZlcmVuY2UobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRG8gbm90IGFkZCBtdWx0aXBsZSBtb2RlbHMgd2l0aCB0aGUgc2FtZSBgaWRgLlxuICAgICAgICBtb2RlbCA9IGV4aXN0aW5nIHx8IG1vZGVsO1xuICAgICAgICBpZiAob3JkZXIgJiYgKG1vZGVsLmlzTmV3KCkgfHwgIW1vZGVsTWFwW21vZGVsLmlkXSkpIG9yZGVyLnB1c2gobW9kZWwpO1xuICAgICAgICBtb2RlbE1hcFttb2RlbC5pZF0gPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmUgbm9uZXhpc3RlbnQgbW9kZWxzIGlmIGFwcHJvcHJpYXRlLlxuICAgICAgaWYgKHJlbW92ZSkge1xuICAgICAgICBmb3IgKGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICBpZiAoIW1vZGVsTWFwWyhtb2RlbCA9IHRoaXMubW9kZWxzW2ldKS5jaWRdKSB0b1JlbW92ZS5wdXNoKG1vZGVsKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodG9SZW1vdmUubGVuZ3RoKSB0aGlzLnJlbW92ZSh0b1JlbW92ZSwgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFNlZSBpZiBzb3J0aW5nIGlzIG5lZWRlZCwgdXBkYXRlIGBsZW5ndGhgIGFuZCBzcGxpY2UgaW4gbmV3IG1vZGVscy5cbiAgICAgIGlmICh0b0FkZC5sZW5ndGggfHwgKG9yZGVyICYmIG9yZGVyLmxlbmd0aCkpIHtcbiAgICAgICAgaWYgKHNvcnRhYmxlKSBzb3J0ID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5sZW5ndGggKz0gdG9BZGQubGVuZ3RoO1xuICAgICAgICBpZiAoYXQgIT0gbnVsbCkge1xuICAgICAgICAgIGZvciAoaSA9IDAsIGwgPSB0b0FkZC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMubW9kZWxzLnNwbGljZShhdCArIGksIDAsIHRvQWRkW2ldKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKG9yZGVyKSB0aGlzLm1vZGVscy5sZW5ndGggPSAwO1xuICAgICAgICAgIHZhciBvcmRlcmVkTW9kZWxzID0gb3JkZXIgfHwgdG9BZGQ7XG4gICAgICAgICAgZm9yIChpID0gMCwgbCA9IG9yZGVyZWRNb2RlbHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLm1vZGVscy5wdXNoKG9yZGVyZWRNb2RlbHNbaV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBTaWxlbnRseSBzb3J0IHRoZSBjb2xsZWN0aW9uIGlmIGFwcHJvcHJpYXRlLlxuICAgICAgaWYgKHNvcnQpIHRoaXMuc29ydCh7c2lsZW50OiB0cnVlfSk7XG5cbiAgICAgIC8vIFVubGVzcyBzaWxlbmNlZCwgaXQncyB0aW1lIHRvIGZpcmUgYWxsIGFwcHJvcHJpYXRlIGFkZC9zb3J0IGV2ZW50cy5cbiAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHtcbiAgICAgICAgZm9yIChpID0gMCwgbCA9IHRvQWRkLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIChtb2RlbCA9IHRvQWRkW2ldKS50cmlnZ2VyKCdhZGQnLCBtb2RlbCwgdGhpcywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNvcnQgfHwgKG9yZGVyICYmIG9yZGVyLmxlbmd0aCkpIHRoaXMudHJpZ2dlcignc29ydCcsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXR1cm4gdGhlIGFkZGVkIChvciBtZXJnZWQpIG1vZGVsIChvciBtb2RlbHMpLlxuICAgICAgcmV0dXJuIHNpbmd1bGFyID8gbW9kZWxzWzBdIDogbW9kZWxzO1xuICAgIH0sXG5cbiAgICAvLyBXaGVuIHlvdSBoYXZlIG1vcmUgaXRlbXMgdGhhbiB5b3Ugd2FudCB0byBhZGQgb3IgcmVtb3ZlIGluZGl2aWR1YWxseSxcbiAgICAvLyB5b3UgY2FuIHJlc2V0IHRoZSBlbnRpcmUgc2V0IHdpdGggYSBuZXcgbGlzdCBvZiBtb2RlbHMsIHdpdGhvdXQgZmlyaW5nXG4gICAgLy8gYW55IGdyYW51bGFyIGBhZGRgIG9yIGByZW1vdmVgIGV2ZW50cy4gRmlyZXMgYHJlc2V0YCB3aGVuIGZpbmlzaGVkLlxuICAgIC8vIFVzZWZ1bCBmb3IgYnVsayBvcGVyYXRpb25zIGFuZCBvcHRpbWl6YXRpb25zLlxuICAgIHJlc2V0OiBmdW5jdGlvbihtb2RlbHMsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubW9kZWxzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB0aGlzLl9yZW1vdmVSZWZlcmVuY2UodGhpcy5tb2RlbHNbaV0sIG9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgb3B0aW9ucy5wcmV2aW91c01vZGVscyA9IHRoaXMubW9kZWxzO1xuICAgICAgdGhpcy5fcmVzZXQoKTtcbiAgICAgIG1vZGVscyA9IHRoaXMuYWRkKG1vZGVscywgXy5leHRlbmQoe3NpbGVudDogdHJ1ZX0sIG9wdGlvbnMpKTtcbiAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHRoaXMudHJpZ2dlcigncmVzZXQnLCB0aGlzLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiBtb2RlbHM7XG4gICAgfSxcblxuICAgIC8vIEFkZCBhIG1vZGVsIHRvIHRoZSBlbmQgb2YgdGhlIGNvbGxlY3Rpb24uXG4gICAgcHVzaDogZnVuY3Rpb24obW9kZWwsIG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiB0aGlzLmFkZChtb2RlbCwgXy5leHRlbmQoe2F0OiB0aGlzLmxlbmd0aH0sIG9wdGlvbnMpKTtcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIGEgbW9kZWwgZnJvbSB0aGUgZW5kIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgIHBvcDogZnVuY3Rpb24ob3B0aW9ucykge1xuICAgICAgdmFyIG1vZGVsID0gdGhpcy5hdCh0aGlzLmxlbmd0aCAtIDEpO1xuICAgICAgdGhpcy5yZW1vdmUobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIG1vZGVsO1xuICAgIH0sXG5cbiAgICAvLyBBZGQgYSBtb2RlbCB0byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgIHVuc2hpZnQ6IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICByZXR1cm4gdGhpcy5hZGQobW9kZWwsIF8uZXh0ZW5kKHthdDogMH0sIG9wdGlvbnMpKTtcbiAgICB9LFxuXG4gICAgLy8gUmVtb3ZlIGEgbW9kZWwgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBjb2xsZWN0aW9uLlxuICAgIHNoaWZ0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICB2YXIgbW9kZWwgPSB0aGlzLmF0KDApO1xuICAgICAgdGhpcy5yZW1vdmUobW9kZWwsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIG1vZGVsO1xuICAgIH0sXG5cbiAgICAvLyBTbGljZSBvdXQgYSBzdWItYXJyYXkgb2YgbW9kZWxzIGZyb20gdGhlIGNvbGxlY3Rpb24uXG4gICAgc2xpY2U6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHNsaWNlLmFwcGx5KHRoaXMubW9kZWxzLCBhcmd1bWVudHMpO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgYSBtb2RlbCBmcm9tIHRoZSBzZXQgYnkgaWQuXG4gICAgZ2V0OiBmdW5jdGlvbihvYmopIHtcbiAgICAgIGlmIChvYmogPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcbiAgICAgIHJldHVybiB0aGlzLl9ieUlkW29ial0gfHwgdGhpcy5fYnlJZFtvYmouaWRdIHx8IHRoaXMuX2J5SWRbb2JqLmNpZF07XG4gICAgfSxcblxuICAgIC8vIEdldCB0aGUgbW9kZWwgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgIGF0OiBmdW5jdGlvbihpbmRleCkge1xuICAgICAgcmV0dXJuIHRoaXMubW9kZWxzW2luZGV4XTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJuIG1vZGVscyB3aXRoIG1hdGNoaW5nIGF0dHJpYnV0ZXMuIFVzZWZ1bCBmb3Igc2ltcGxlIGNhc2VzIG9mXG4gICAgLy8gYGZpbHRlcmAuXG4gICAgd2hlcmU6IGZ1bmN0aW9uKGF0dHJzLCBmaXJzdCkge1xuICAgICAgaWYgKF8uaXNFbXB0eShhdHRycykpIHJldHVybiBmaXJzdCA/IHZvaWQgMCA6IFtdO1xuICAgICAgcmV0dXJuIHRoaXNbZmlyc3QgPyAnZmluZCcgOiAnZmlsdGVyJ10oZnVuY3Rpb24obW9kZWwpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIGF0dHJzKSB7XG4gICAgICAgICAgaWYgKGF0dHJzW2tleV0gIT09IG1vZGVsLmdldChrZXkpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgLy8gUmV0dXJuIHRoZSBmaXJzdCBtb2RlbCB3aXRoIG1hdGNoaW5nIGF0dHJpYnV0ZXMuIFVzZWZ1bCBmb3Igc2ltcGxlIGNhc2VzXG4gICAgLy8gb2YgYGZpbmRgLlxuICAgIGZpbmRXaGVyZTogZnVuY3Rpb24oYXR0cnMpIHtcbiAgICAgIHJldHVybiB0aGlzLndoZXJlKGF0dHJzLCB0cnVlKTtcbiAgICB9LFxuXG4gICAgLy8gRm9yY2UgdGhlIGNvbGxlY3Rpb24gdG8gcmUtc29ydCBpdHNlbGYuIFlvdSBkb24ndCBuZWVkIHRvIGNhbGwgdGhpcyB1bmRlclxuICAgIC8vIG5vcm1hbCBjaXJjdW1zdGFuY2VzLCBhcyB0aGUgc2V0IHdpbGwgbWFpbnRhaW4gc29ydCBvcmRlciBhcyBlYWNoIGl0ZW1cbiAgICAvLyBpcyBhZGRlZC5cbiAgICBzb3J0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAoIXRoaXMuY29tcGFyYXRvcikgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgc29ydCBhIHNldCB3aXRob3V0IGEgY29tcGFyYXRvcicpO1xuICAgICAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcblxuICAgICAgLy8gUnVuIHNvcnQgYmFzZWQgb24gdHlwZSBvZiBgY29tcGFyYXRvcmAuXG4gICAgICBpZiAoXy5pc1N0cmluZyh0aGlzLmNvbXBhcmF0b3IpIHx8IHRoaXMuY29tcGFyYXRvci5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgdGhpcy5tb2RlbHMgPSB0aGlzLnNvcnRCeSh0aGlzLmNvbXBhcmF0b3IsIHRoaXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5tb2RlbHMuc29ydChfLmJpbmQodGhpcy5jb21wYXJhdG9yLCB0aGlzKSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghb3B0aW9ucy5zaWxlbnQpIHRoaXMudHJpZ2dlcignc29ydCcsIHRoaXMsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFBsdWNrIGFuIGF0dHJpYnV0ZSBmcm9tIGVhY2ggbW9kZWwgaW4gdGhlIGNvbGxlY3Rpb24uXG4gICAgcGx1Y2s6IGZ1bmN0aW9uKGF0dHIpIHtcbiAgICAgIHJldHVybiBfLmludm9rZSh0aGlzLm1vZGVscywgJ2dldCcsIGF0dHIpO1xuICAgIH0sXG5cbiAgICAvLyBGZXRjaCB0aGUgZGVmYXVsdCBzZXQgb2YgbW9kZWxzIGZvciB0aGlzIGNvbGxlY3Rpb24sIHJlc2V0dGluZyB0aGVcbiAgICAvLyBjb2xsZWN0aW9uIHdoZW4gdGhleSBhcnJpdmUuIElmIGByZXNldDogdHJ1ZWAgaXMgcGFzc2VkLCB0aGUgcmVzcG9uc2VcbiAgICAvLyBkYXRhIHdpbGwgYmUgcGFzc2VkIHRocm91Z2ggdGhlIGByZXNldGAgbWV0aG9kIGluc3RlYWQgb2YgYHNldGAuXG4gICAgZmV0Y2g6IGZ1bmN0aW9uKG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gXy5jbG9uZShvcHRpb25zKSA6IHt9O1xuICAgICAgaWYgKG9wdGlvbnMucGFyc2UgPT09IHZvaWQgMCkgb3B0aW9ucy5wYXJzZSA9IHRydWU7XG4gICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcbiAgICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcztcbiAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgICAgdmFyIG1ldGhvZCA9IG9wdGlvbnMucmVzZXQgPyAncmVzZXQnIDogJ3NldCc7XG4gICAgICAgIGNvbGxlY3Rpb25bbWV0aG9kXShyZXNwLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MoY29sbGVjdGlvbiwgcmVzcCwgb3B0aW9ucyk7XG4gICAgICAgIGNvbGxlY3Rpb24udHJpZ2dlcignc3luYycsIGNvbGxlY3Rpb24sIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgfTtcbiAgICAgIHdyYXBFcnJvcih0aGlzLCBvcHRpb25zKTtcbiAgICAgIHJldHVybiB0aGlzLnN5bmMoJ3JlYWQnLCB0aGlzLCBvcHRpb25zKTtcbiAgICB9LFxuXG4gICAgLy8gQ3JlYXRlIGEgbmV3IGluc3RhbmNlIG9mIGEgbW9kZWwgaW4gdGhpcyBjb2xsZWN0aW9uLiBBZGQgdGhlIG1vZGVsIHRvIHRoZVxuICAgIC8vIGNvbGxlY3Rpb24gaW1tZWRpYXRlbHksIHVubGVzcyBgd2FpdDogdHJ1ZWAgaXMgcGFzc2VkLCBpbiB3aGljaCBjYXNlIHdlXG4gICAgLy8gd2FpdCBmb3IgdGhlIHNlcnZlciB0byBhZ3JlZS5cbiAgICBjcmVhdGU6IGZ1bmN0aW9uKG1vZGVsLCBvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyA/IF8uY2xvbmUob3B0aW9ucykgOiB7fTtcbiAgICAgIGlmICghKG1vZGVsID0gdGhpcy5fcHJlcGFyZU1vZGVsKG1vZGVsLCBvcHRpb25zKSkpIHJldHVybiBmYWxzZTtcbiAgICAgIGlmICghb3B0aW9ucy53YWl0KSB0aGlzLmFkZChtb2RlbCwgb3B0aW9ucyk7XG4gICAgICB2YXIgY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgICB2YXIgc3VjY2VzcyA9IG9wdGlvbnMuc3VjY2VzcztcbiAgICAgIG9wdGlvbnMuc3VjY2VzcyA9IGZ1bmN0aW9uKG1vZGVsLCByZXNwKSB7XG4gICAgICAgIGlmIChvcHRpb25zLndhaXQpIGNvbGxlY3Rpb24uYWRkKG1vZGVsLCBvcHRpb25zKTtcbiAgICAgICAgaWYgKHN1Y2Nlc3MpIHN1Y2Nlc3MobW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgfTtcbiAgICAgIG1vZGVsLnNhdmUobnVsbCwgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gbW9kZWw7XG4gICAgfSxcblxuICAgIC8vICoqcGFyc2UqKiBjb252ZXJ0cyBhIHJlc3BvbnNlIGludG8gYSBsaXN0IG9mIG1vZGVscyB0byBiZSBhZGRlZCB0byB0aGVcbiAgICAvLyBjb2xsZWN0aW9uLiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBpcyBqdXN0IHRvIHBhc3MgaXQgdGhyb3VnaC5cbiAgICBwYXJzZTogZnVuY3Rpb24ocmVzcCwgb3B0aW9ucykge1xuICAgICAgcmV0dXJuIHJlc3A7XG4gICAgfSxcblxuICAgIC8vIENyZWF0ZSBhIG5ldyBjb2xsZWN0aW9uIHdpdGggYW4gaWRlbnRpY2FsIGxpc3Qgb2YgbW9kZWxzIGFzIHRoaXMgb25lLlxuICAgIGNsb25lOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBuZXcgdGhpcy5jb25zdHJ1Y3Rvcih0aGlzLm1vZGVscyk7XG4gICAgfSxcblxuICAgIC8vIFByaXZhdGUgbWV0aG9kIHRvIHJlc2V0IGFsbCBpbnRlcm5hbCBzdGF0ZS4gQ2FsbGVkIHdoZW4gdGhlIGNvbGxlY3Rpb25cbiAgICAvLyBpcyBmaXJzdCBpbml0aWFsaXplZCBvciByZXNldC5cbiAgICBfcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgICAgdGhpcy5tb2RlbHMgPSBbXTtcbiAgICAgIHRoaXMuX2J5SWQgID0ge307XG4gICAgfSxcblxuICAgIC8vIFByZXBhcmUgYSBoYXNoIG9mIGF0dHJpYnV0ZXMgKG9yIG90aGVyIG1vZGVsKSB0byBiZSBhZGRlZCB0byB0aGlzXG4gICAgLy8gY29sbGVjdGlvbi5cbiAgICBfcHJlcGFyZU1vZGVsOiBmdW5jdGlvbihhdHRycywgb3B0aW9ucykge1xuICAgICAgaWYgKGF0dHJzIGluc3RhbmNlb2YgTW9kZWwpIHJldHVybiBhdHRycztcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zID8gXy5jbG9uZShvcHRpb25zKSA6IHt9O1xuICAgICAgb3B0aW9ucy5jb2xsZWN0aW9uID0gdGhpcztcbiAgICAgIHZhciBtb2RlbCA9IG5ldyB0aGlzLm1vZGVsKGF0dHJzLCBvcHRpb25zKTtcbiAgICAgIGlmICghbW9kZWwudmFsaWRhdGlvbkVycm9yKSByZXR1cm4gbW9kZWw7XG4gICAgICB0aGlzLnRyaWdnZXIoJ2ludmFsaWQnLCB0aGlzLCBtb2RlbC52YWxpZGF0aW9uRXJyb3IsIG9wdGlvbnMpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG5cbiAgICAvLyBJbnRlcm5hbCBtZXRob2QgdG8gY3JlYXRlIGEgbW9kZWwncyB0aWVzIHRvIGEgY29sbGVjdGlvbi5cbiAgICBfYWRkUmVmZXJlbmNlOiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgICAgdGhpcy5fYnlJZFttb2RlbC5jaWRdID0gbW9kZWw7XG4gICAgICBpZiAobW9kZWwuaWQgIT0gbnVsbCkgdGhpcy5fYnlJZFttb2RlbC5pZF0gPSBtb2RlbDtcbiAgICAgIGlmICghbW9kZWwuY29sbGVjdGlvbikgbW9kZWwuY29sbGVjdGlvbiA9IHRoaXM7XG4gICAgICBtb2RlbC5vbignYWxsJywgdGhpcy5fb25Nb2RlbEV2ZW50LCB0aGlzKTtcbiAgICB9LFxuXG4gICAgLy8gSW50ZXJuYWwgbWV0aG9kIHRvIHNldmVyIGEgbW9kZWwncyB0aWVzIHRvIGEgY29sbGVjdGlvbi5cbiAgICBfcmVtb3ZlUmVmZXJlbmNlOiBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgICAgaWYgKHRoaXMgPT09IG1vZGVsLmNvbGxlY3Rpb24pIGRlbGV0ZSBtb2RlbC5jb2xsZWN0aW9uO1xuICAgICAgbW9kZWwub2ZmKCdhbGwnLCB0aGlzLl9vbk1vZGVsRXZlbnQsIHRoaXMpO1xuICAgIH0sXG5cbiAgICAvLyBJbnRlcm5hbCBtZXRob2QgY2FsbGVkIGV2ZXJ5IHRpbWUgYSBtb2RlbCBpbiB0aGUgc2V0IGZpcmVzIGFuIGV2ZW50LlxuICAgIC8vIFNldHMgbmVlZCB0byB1cGRhdGUgdGhlaXIgaW5kZXhlcyB3aGVuIG1vZGVscyBjaGFuZ2UgaWRzLiBBbGwgb3RoZXJcbiAgICAvLyBldmVudHMgc2ltcGx5IHByb3h5IHRocm91Z2guIFwiYWRkXCIgYW5kIFwicmVtb3ZlXCIgZXZlbnRzIHRoYXQgb3JpZ2luYXRlXG4gICAgLy8gaW4gb3RoZXIgY29sbGVjdGlvbnMgYXJlIGlnbm9yZWQuXG4gICAgX29uTW9kZWxFdmVudDogZnVuY3Rpb24oZXZlbnQsIG1vZGVsLCBjb2xsZWN0aW9uLCBvcHRpb25zKSB7XG4gICAgICBpZiAoKGV2ZW50ID09PSAnYWRkJyB8fCBldmVudCA9PT0gJ3JlbW92ZScpICYmIGNvbGxlY3Rpb24gIT09IHRoaXMpIHJldHVybjtcbiAgICAgIGlmIChldmVudCA9PT0gJ2Rlc3Ryb3knKSB0aGlzLnJlbW92ZShtb2RlbCwgb3B0aW9ucyk7XG4gICAgICBpZiAobW9kZWwgJiYgZXZlbnQgPT09ICdjaGFuZ2U6JyArIG1vZGVsLmlkQXR0cmlidXRlKSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLl9ieUlkW21vZGVsLnByZXZpb3VzKG1vZGVsLmlkQXR0cmlidXRlKV07XG4gICAgICAgIGlmIChtb2RlbC5pZCAhPSBudWxsKSB0aGlzLl9ieUlkW21vZGVsLmlkXSA9IG1vZGVsO1xuICAgICAgfVxuICAgICAgdGhpcy50cmlnZ2VyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIFVuZGVyc2NvcmUgbWV0aG9kcyB0aGF0IHdlIHdhbnQgdG8gaW1wbGVtZW50IG9uIHRoZSBDb2xsZWN0aW9uLlxuICAvLyA5MCUgb2YgdGhlIGNvcmUgdXNlZnVsbmVzcyBvZiBCYWNrYm9uZSBDb2xsZWN0aW9ucyBpcyBhY3R1YWxseSBpbXBsZW1lbnRlZFxuICAvLyByaWdodCBoZXJlOlxuICB2YXIgbWV0aG9kcyA9IFsnZm9yRWFjaCcsICdlYWNoJywgJ21hcCcsICdjb2xsZWN0JywgJ3JlZHVjZScsICdmb2xkbCcsXG4gICAgJ2luamVjdCcsICdyZWR1Y2VSaWdodCcsICdmb2xkcicsICdmaW5kJywgJ2RldGVjdCcsICdmaWx0ZXInLCAnc2VsZWN0JyxcbiAgICAncmVqZWN0JywgJ2V2ZXJ5JywgJ2FsbCcsICdzb21lJywgJ2FueScsICdpbmNsdWRlJywgJ2NvbnRhaW5zJywgJ2ludm9rZScsXG4gICAgJ21heCcsICdtaW4nLCAndG9BcnJheScsICdzaXplJywgJ2ZpcnN0JywgJ2hlYWQnLCAndGFrZScsICdpbml0aWFsJywgJ3Jlc3QnLFxuICAgICd0YWlsJywgJ2Ryb3AnLCAnbGFzdCcsICd3aXRob3V0JywgJ2RpZmZlcmVuY2UnLCAnaW5kZXhPZicsICdzaHVmZmxlJyxcbiAgICAnbGFzdEluZGV4T2YnLCAnaXNFbXB0eScsICdjaGFpbicsICdzYW1wbGUnXTtcblxuICAvLyBNaXggaW4gZWFjaCBVbmRlcnNjb3JlIG1ldGhvZCBhcyBhIHByb3h5IHRvIGBDb2xsZWN0aW9uI21vZGVsc2AuXG4gIF8uZWFjaChtZXRob2RzLCBmdW5jdGlvbihtZXRob2QpIHtcbiAgICBDb2xsZWN0aW9uLnByb3RvdHlwZVttZXRob2RdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzKTtcbiAgICAgIGFyZ3MudW5zaGlmdCh0aGlzLm1vZGVscyk7XG4gICAgICByZXR1cm4gX1ttZXRob2RdLmFwcGx5KF8sIGFyZ3MpO1xuICAgIH07XG4gIH0pO1xuXG4gIC8vIFVuZGVyc2NvcmUgbWV0aG9kcyB0aGF0IHRha2UgYSBwcm9wZXJ0eSBuYW1lIGFzIGFuIGFyZ3VtZW50LlxuICB2YXIgYXR0cmlidXRlTWV0aG9kcyA9IFsnZ3JvdXBCeScsICdjb3VudEJ5JywgJ3NvcnRCeScsICdpbmRleEJ5J107XG5cbiAgLy8gVXNlIGF0dHJpYnV0ZXMgaW5zdGVhZCBvZiBwcm9wZXJ0aWVzLlxuICBfLmVhY2goYXR0cmlidXRlTWV0aG9kcywgZnVuY3Rpb24obWV0aG9kKSB7XG4gICAgQ29sbGVjdGlvbi5wcm90b3R5cGVbbWV0aG9kXSA9IGZ1bmN0aW9uKHZhbHVlLCBjb250ZXh0KSB7XG4gICAgICB2YXIgaXRlcmF0b3IgPSBfLmlzRnVuY3Rpb24odmFsdWUpID8gdmFsdWUgOiBmdW5jdGlvbihtb2RlbCkge1xuICAgICAgICByZXR1cm4gbW9kZWwuZ2V0KHZhbHVlKTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gX1ttZXRob2RdKHRoaXMubW9kZWxzLCBpdGVyYXRvciwgY29udGV4dCk7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQmFja2JvbmUuVmlld1xuICAvLyAtLS0tLS0tLS0tLS0tXG5cbiAgLy8gQmFja2JvbmUgVmlld3MgYXJlIGFsbW9zdCBtb3JlIGNvbnZlbnRpb24gdGhhbiB0aGV5IGFyZSBhY3R1YWwgY29kZS4gQSBWaWV3XG4gIC8vIGlzIHNpbXBseSBhIEphdmFTY3JpcHQgb2JqZWN0IHRoYXQgcmVwcmVzZW50cyBhIGxvZ2ljYWwgY2h1bmsgb2YgVUkgaW4gdGhlXG4gIC8vIERPTS4gVGhpcyBtaWdodCBiZSBhIHNpbmdsZSBpdGVtLCBhbiBlbnRpcmUgbGlzdCwgYSBzaWRlYmFyIG9yIHBhbmVsLCBvclxuICAvLyBldmVuIHRoZSBzdXJyb3VuZGluZyBmcmFtZSB3aGljaCB3cmFwcyB5b3VyIHdob2xlIGFwcC4gRGVmaW5pbmcgYSBjaHVuayBvZlxuICAvLyBVSSBhcyBhICoqVmlldyoqIGFsbG93cyB5b3UgdG8gZGVmaW5lIHlvdXIgRE9NIGV2ZW50cyBkZWNsYXJhdGl2ZWx5LCB3aXRob3V0XG4gIC8vIGhhdmluZyB0byB3b3JyeSBhYm91dCByZW5kZXIgb3JkZXIgLi4uIGFuZCBtYWtlcyBpdCBlYXN5IGZvciB0aGUgdmlldyB0b1xuICAvLyByZWFjdCB0byBzcGVjaWZpYyBjaGFuZ2VzIGluIHRoZSBzdGF0ZSBvZiB5b3VyIG1vZGVscy5cblxuICAvLyBDcmVhdGluZyBhIEJhY2tib25lLlZpZXcgY3JlYXRlcyBpdHMgaW5pdGlhbCBlbGVtZW50IG91dHNpZGUgb2YgdGhlIERPTSxcbiAgLy8gaWYgYW4gZXhpc3RpbmcgZWxlbWVudCBpcyBub3QgcHJvdmlkZWQuLi5cbiAgdmFyIFZpZXcgPSBCYWNrYm9uZS5WaWV3ID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIHRoaXMuY2lkID0gXy51bmlxdWVJZCgndmlldycpO1xuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgXy5leHRlbmQodGhpcywgXy5waWNrKG9wdGlvbnMsIHZpZXdPcHRpb25zKSk7XG4gICAgdGhpcy5fZW5zdXJlRWxlbWVudCgpO1xuICAgIHRoaXMuaW5pdGlhbGl6ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHRoaXMuZGVsZWdhdGVFdmVudHMoKTtcbiAgfTtcblxuICAvLyBDYWNoZWQgcmVnZXggdG8gc3BsaXQga2V5cyBmb3IgYGRlbGVnYXRlYC5cbiAgdmFyIGRlbGVnYXRlRXZlbnRTcGxpdHRlciA9IC9eKFxcUyspXFxzKiguKikkLztcblxuICAvLyBMaXN0IG9mIHZpZXcgb3B0aW9ucyB0byBiZSBtZXJnZWQgYXMgcHJvcGVydGllcy5cbiAgdmFyIHZpZXdPcHRpb25zID0gWydtb2RlbCcsICdjb2xsZWN0aW9uJywgJ2VsJywgJ2lkJywgJ2F0dHJpYnV0ZXMnLCAnY2xhc3NOYW1lJywgJ3RhZ05hbWUnLCAnZXZlbnRzJ107XG5cbiAgLy8gU2V0IHVwIGFsbCBpbmhlcml0YWJsZSAqKkJhY2tib25lLlZpZXcqKiBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzLlxuICBfLmV4dGVuZChWaWV3LnByb3RvdHlwZSwgRXZlbnRzLCB7XG5cbiAgICAvLyBUaGUgZGVmYXVsdCBgdGFnTmFtZWAgb2YgYSBWaWV3J3MgZWxlbWVudCBpcyBgXCJkaXZcImAuXG4gICAgdGFnTmFtZTogJ2RpdicsXG5cbiAgICAvLyBqUXVlcnkgZGVsZWdhdGUgZm9yIGVsZW1lbnQgbG9va3VwLCBzY29wZWQgdG8gRE9NIGVsZW1lbnRzIHdpdGhpbiB0aGVcbiAgICAvLyBjdXJyZW50IHZpZXcuIFRoaXMgc2hvdWxkIGJlIHByZWZlcnJlZCB0byBnbG9iYWwgbG9va3VwcyB3aGVyZSBwb3NzaWJsZS5cbiAgICAkOiBmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIHRoaXMuJGVsLmZpbmQoc2VsZWN0b3IpO1xuICAgIH0sXG5cbiAgICAvLyBJbml0aWFsaXplIGlzIGFuIGVtcHR5IGZ1bmN0aW9uIGJ5IGRlZmF1bHQuIE92ZXJyaWRlIGl0IHdpdGggeW91ciBvd25cbiAgICAvLyBpbml0aWFsaXphdGlvbiBsb2dpYy5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpe30sXG5cbiAgICAvLyAqKnJlbmRlcioqIGlzIHRoZSBjb3JlIGZ1bmN0aW9uIHRoYXQgeW91ciB2aWV3IHNob3VsZCBvdmVycmlkZSwgaW4gb3JkZXJcbiAgICAvLyB0byBwb3B1bGF0ZSBpdHMgZWxlbWVudCAoYHRoaXMuZWxgKSwgd2l0aCB0aGUgYXBwcm9wcmlhdGUgSFRNTC4gVGhlXG4gICAgLy8gY29udmVudGlvbiBpcyBmb3IgKipyZW5kZXIqKiB0byBhbHdheXMgcmV0dXJuIGB0aGlzYC5cbiAgICByZW5kZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIFJlbW92ZSB0aGlzIHZpZXcgYnkgdGFraW5nIHRoZSBlbGVtZW50IG91dCBvZiB0aGUgRE9NLCBhbmQgcmVtb3ZpbmcgYW55XG4gICAgLy8gYXBwbGljYWJsZSBCYWNrYm9uZS5FdmVudHMgbGlzdGVuZXJzLlxuICAgIHJlbW92ZTogZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLiRlbC5yZW1vdmUoKTtcbiAgICAgIHRoaXMuc3RvcExpc3RlbmluZygpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIENoYW5nZSB0aGUgdmlldydzIGVsZW1lbnQgKGB0aGlzLmVsYCBwcm9wZXJ0eSksIGluY2x1ZGluZyBldmVudFxuICAgIC8vIHJlLWRlbGVnYXRpb24uXG4gICAgc2V0RWxlbWVudDogZnVuY3Rpb24oZWxlbWVudCwgZGVsZWdhdGUpIHtcbiAgICAgIGlmICh0aGlzLiRlbCkgdGhpcy51bmRlbGVnYXRlRXZlbnRzKCk7XG4gICAgICB0aGlzLiRlbCA9IGVsZW1lbnQgaW5zdGFuY2VvZiBCYWNrYm9uZS4kID8gZWxlbWVudCA6IEJhY2tib25lLiQoZWxlbWVudCk7XG4gICAgICB0aGlzLmVsID0gdGhpcy4kZWxbMF07XG4gICAgICBpZiAoZGVsZWdhdGUgIT09IGZhbHNlKSB0aGlzLmRlbGVnYXRlRXZlbnRzKCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gU2V0IGNhbGxiYWNrcywgd2hlcmUgYHRoaXMuZXZlbnRzYCBpcyBhIGhhc2ggb2ZcbiAgICAvL1xuICAgIC8vICp7XCJldmVudCBzZWxlY3RvclwiOiBcImNhbGxiYWNrXCJ9KlxuICAgIC8vXG4gICAgLy8gICAgIHtcbiAgICAvLyAgICAgICAnbW91c2Vkb3duIC50aXRsZSc6ICAnZWRpdCcsXG4gICAgLy8gICAgICAgJ2NsaWNrIC5idXR0b24nOiAgICAgJ3NhdmUnLFxuICAgIC8vICAgICAgICdjbGljayAub3Blbic6ICAgICAgIGZ1bmN0aW9uKGUpIHsgLi4uIH1cbiAgICAvLyAgICAgfVxuICAgIC8vXG4gICAgLy8gcGFpcnMuIENhbGxiYWNrcyB3aWxsIGJlIGJvdW5kIHRvIHRoZSB2aWV3LCB3aXRoIGB0aGlzYCBzZXQgcHJvcGVybHkuXG4gICAgLy8gVXNlcyBldmVudCBkZWxlZ2F0aW9uIGZvciBlZmZpY2llbmN5LlxuICAgIC8vIE9taXR0aW5nIHRoZSBzZWxlY3RvciBiaW5kcyB0aGUgZXZlbnQgdG8gYHRoaXMuZWxgLlxuICAgIC8vIFRoaXMgb25seSB3b3JrcyBmb3IgZGVsZWdhdGUtYWJsZSBldmVudHM6IG5vdCBgZm9jdXNgLCBgYmx1cmAsIGFuZFxuICAgIC8vIG5vdCBgY2hhbmdlYCwgYHN1Ym1pdGAsIGFuZCBgcmVzZXRgIGluIEludGVybmV0IEV4cGxvcmVyLlxuICAgIGRlbGVnYXRlRXZlbnRzOiBmdW5jdGlvbihldmVudHMpIHtcbiAgICAgIGlmICghKGV2ZW50cyB8fCAoZXZlbnRzID0gXy5yZXN1bHQodGhpcywgJ2V2ZW50cycpKSkpIHJldHVybiB0aGlzO1xuICAgICAgdGhpcy51bmRlbGVnYXRlRXZlbnRzKCk7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gZXZlbnRzKSB7XG4gICAgICAgIHZhciBtZXRob2QgPSBldmVudHNba2V5XTtcbiAgICAgICAgaWYgKCFfLmlzRnVuY3Rpb24obWV0aG9kKSkgbWV0aG9kID0gdGhpc1tldmVudHNba2V5XV07XG4gICAgICAgIGlmICghbWV0aG9kKSBjb250aW51ZTtcblxuICAgICAgICB2YXIgbWF0Y2ggPSBrZXkubWF0Y2goZGVsZWdhdGVFdmVudFNwbGl0dGVyKTtcbiAgICAgICAgdmFyIGV2ZW50TmFtZSA9IG1hdGNoWzFdLCBzZWxlY3RvciA9IG1hdGNoWzJdO1xuICAgICAgICBtZXRob2QgPSBfLmJpbmQobWV0aG9kLCB0aGlzKTtcbiAgICAgICAgZXZlbnROYW1lICs9ICcuZGVsZWdhdGVFdmVudHMnICsgdGhpcy5jaWQ7XG4gICAgICAgIGlmIChzZWxlY3RvciA9PT0gJycpIHtcbiAgICAgICAgICB0aGlzLiRlbC5vbihldmVudE5hbWUsIG1ldGhvZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy4kZWwub24oZXZlbnROYW1lLCBzZWxlY3RvciwgbWV0aG9kKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIENsZWFycyBhbGwgY2FsbGJhY2tzIHByZXZpb3VzbHkgYm91bmQgdG8gdGhlIHZpZXcgd2l0aCBgZGVsZWdhdGVFdmVudHNgLlxuICAgIC8vIFlvdSB1c3VhbGx5IGRvbid0IG5lZWQgdG8gdXNlIHRoaXMsIGJ1dCBtYXkgd2lzaCB0byBpZiB5b3UgaGF2ZSBtdWx0aXBsZVxuICAgIC8vIEJhY2tib25lIHZpZXdzIGF0dGFjaGVkIHRvIHRoZSBzYW1lIERPTSBlbGVtZW50LlxuICAgIHVuZGVsZWdhdGVFdmVudHM6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy4kZWwub2ZmKCcuZGVsZWdhdGVFdmVudHMnICsgdGhpcy5jaWQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIC8vIEVuc3VyZSB0aGF0IHRoZSBWaWV3IGhhcyBhIERPTSBlbGVtZW50IHRvIHJlbmRlciBpbnRvLlxuICAgIC8vIElmIGB0aGlzLmVsYCBpcyBhIHN0cmluZywgcGFzcyBpdCB0aHJvdWdoIGAkKClgLCB0YWtlIHRoZSBmaXJzdFxuICAgIC8vIG1hdGNoaW5nIGVsZW1lbnQsIGFuZCByZS1hc3NpZ24gaXQgdG8gYGVsYC4gT3RoZXJ3aXNlLCBjcmVhdGVcbiAgICAvLyBhbiBlbGVtZW50IGZyb20gdGhlIGBpZGAsIGBjbGFzc05hbWVgIGFuZCBgdGFnTmFtZWAgcHJvcGVydGllcy5cbiAgICBfZW5zdXJlRWxlbWVudDogZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoIXRoaXMuZWwpIHtcbiAgICAgICAgdmFyIGF0dHJzID0gXy5leHRlbmQoe30sIF8ucmVzdWx0KHRoaXMsICdhdHRyaWJ1dGVzJykpO1xuICAgICAgICBpZiAodGhpcy5pZCkgYXR0cnMuaWQgPSBfLnJlc3VsdCh0aGlzLCAnaWQnKTtcbiAgICAgICAgaWYgKHRoaXMuY2xhc3NOYW1lKSBhdHRyc1snY2xhc3MnXSA9IF8ucmVzdWx0KHRoaXMsICdjbGFzc05hbWUnKTtcbiAgICAgICAgdmFyICRlbCA9IEJhY2tib25lLiQoJzwnICsgXy5yZXN1bHQodGhpcywgJ3RhZ05hbWUnKSArICc+JykuYXR0cihhdHRycyk7XG4gICAgICAgIHRoaXMuc2V0RWxlbWVudCgkZWwsIGZhbHNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuc2V0RWxlbWVudChfLnJlc3VsdCh0aGlzLCAnZWwnKSwgZmFsc2UpO1xuICAgICAgfVxuICAgIH1cblxuICB9KTtcblxuICAvLyBCYWNrYm9uZS5zeW5jXG4gIC8vIC0tLS0tLS0tLS0tLS1cblxuICAvLyBPdmVycmlkZSB0aGlzIGZ1bmN0aW9uIHRvIGNoYW5nZSB0aGUgbWFubmVyIGluIHdoaWNoIEJhY2tib25lIHBlcnNpc3RzXG4gIC8vIG1vZGVscyB0byB0aGUgc2VydmVyLiBZb3Ugd2lsbCBiZSBwYXNzZWQgdGhlIHR5cGUgb2YgcmVxdWVzdCwgYW5kIHRoZVxuICAvLyBtb2RlbCBpbiBxdWVzdGlvbi4gQnkgZGVmYXVsdCwgbWFrZXMgYSBSRVNUZnVsIEFqYXggcmVxdWVzdFxuICAvLyB0byB0aGUgbW9kZWwncyBgdXJsKClgLiBTb21lIHBvc3NpYmxlIGN1c3RvbWl6YXRpb25zIGNvdWxkIGJlOlxuICAvL1xuICAvLyAqIFVzZSBgc2V0VGltZW91dGAgdG8gYmF0Y2ggcmFwaWQtZmlyZSB1cGRhdGVzIGludG8gYSBzaW5nbGUgcmVxdWVzdC5cbiAgLy8gKiBTZW5kIHVwIHRoZSBtb2RlbHMgYXMgWE1MIGluc3RlYWQgb2YgSlNPTi5cbiAgLy8gKiBQZXJzaXN0IG1vZGVscyB2aWEgV2ViU29ja2V0cyBpbnN0ZWFkIG9mIEFqYXguXG4gIC8vXG4gIC8vIFR1cm4gb24gYEJhY2tib25lLmVtdWxhdGVIVFRQYCBpbiBvcmRlciB0byBzZW5kIGBQVVRgIGFuZCBgREVMRVRFYCByZXF1ZXN0c1xuICAvLyBhcyBgUE9TVGAsIHdpdGggYSBgX21ldGhvZGAgcGFyYW1ldGVyIGNvbnRhaW5pbmcgdGhlIHRydWUgSFRUUCBtZXRob2QsXG4gIC8vIGFzIHdlbGwgYXMgYWxsIHJlcXVlc3RzIHdpdGggdGhlIGJvZHkgYXMgYGFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZGBcbiAgLy8gaW5zdGVhZCBvZiBgYXBwbGljYXRpb24vanNvbmAgd2l0aCB0aGUgbW9kZWwgaW4gYSBwYXJhbSBuYW1lZCBgbW9kZWxgLlxuICAvLyBVc2VmdWwgd2hlbiBpbnRlcmZhY2luZyB3aXRoIHNlcnZlci1zaWRlIGxhbmd1YWdlcyBsaWtlICoqUEhQKiogdGhhdCBtYWtlXG4gIC8vIGl0IGRpZmZpY3VsdCB0byByZWFkIHRoZSBib2R5IG9mIGBQVVRgIHJlcXVlc3RzLlxuICBCYWNrYm9uZS5zeW5jID0gZnVuY3Rpb24obWV0aG9kLCBtb2RlbCwgb3B0aW9ucykge1xuICAgIHZhciB0eXBlID0gbWV0aG9kTWFwW21ldGhvZF07XG5cbiAgICAvLyBEZWZhdWx0IG9wdGlvbnMsIHVubGVzcyBzcGVjaWZpZWQuXG4gICAgXy5kZWZhdWx0cyhvcHRpb25zIHx8IChvcHRpb25zID0ge30pLCB7XG4gICAgICBlbXVsYXRlSFRUUDogQmFja2JvbmUuZW11bGF0ZUhUVFAsXG4gICAgICBlbXVsYXRlSlNPTjogQmFja2JvbmUuZW11bGF0ZUpTT05cbiAgICB9KTtcblxuICAgIC8vIERlZmF1bHQgSlNPTi1yZXF1ZXN0IG9wdGlvbnMuXG4gICAgdmFyIHBhcmFtcyA9IHt0eXBlOiB0eXBlLCBkYXRhVHlwZTogJ2pzb24nfTtcblxuICAgIC8vIEVuc3VyZSB0aGF0IHdlIGhhdmUgYSBVUkwuXG4gICAgaWYgKCFvcHRpb25zLnVybCkge1xuICAgICAgcGFyYW1zLnVybCA9IF8ucmVzdWx0KG1vZGVsLCAndXJsJykgfHwgdXJsRXJyb3IoKTtcbiAgICB9XG5cbiAgICAvLyBFbnN1cmUgdGhhdCB3ZSBoYXZlIHRoZSBhcHByb3ByaWF0ZSByZXF1ZXN0IGRhdGEuXG4gICAgaWYgKG9wdGlvbnMuZGF0YSA9PSBudWxsICYmIG1vZGVsICYmIChtZXRob2QgPT09ICdjcmVhdGUnIHx8IG1ldGhvZCA9PT0gJ3VwZGF0ZScgfHwgbWV0aG9kID09PSAncGF0Y2gnKSkge1xuICAgICAgcGFyYW1zLmNvbnRlbnRUeXBlID0gJ2FwcGxpY2F0aW9uL2pzb24nO1xuICAgICAgcGFyYW1zLmRhdGEgPSBKU09OLnN0cmluZ2lmeShvcHRpb25zLmF0dHJzIHx8IG1vZGVsLnRvSlNPTihvcHRpb25zKSk7XG4gICAgfVxuXG4gICAgLy8gRm9yIG9sZGVyIHNlcnZlcnMsIGVtdWxhdGUgSlNPTiBieSBlbmNvZGluZyB0aGUgcmVxdWVzdCBpbnRvIGFuIEhUTUwtZm9ybS5cbiAgICBpZiAob3B0aW9ucy5lbXVsYXRlSlNPTikge1xuICAgICAgcGFyYW1zLmNvbnRlbnRUeXBlID0gJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc7XG4gICAgICBwYXJhbXMuZGF0YSA9IHBhcmFtcy5kYXRhID8ge21vZGVsOiBwYXJhbXMuZGF0YX0gOiB7fTtcbiAgICB9XG5cbiAgICAvLyBGb3Igb2xkZXIgc2VydmVycywgZW11bGF0ZSBIVFRQIGJ5IG1pbWlja2luZyB0aGUgSFRUUCBtZXRob2Qgd2l0aCBgX21ldGhvZGBcbiAgICAvLyBBbmQgYW4gYFgtSFRUUC1NZXRob2QtT3ZlcnJpZGVgIGhlYWRlci5cbiAgICBpZiAob3B0aW9ucy5lbXVsYXRlSFRUUCAmJiAodHlwZSA9PT0gJ1BVVCcgfHwgdHlwZSA9PT0gJ0RFTEVURScgfHwgdHlwZSA9PT0gJ1BBVENIJykpIHtcbiAgICAgIHBhcmFtcy50eXBlID0gJ1BPU1QnO1xuICAgICAgaWYgKG9wdGlvbnMuZW11bGF0ZUpTT04pIHBhcmFtcy5kYXRhLl9tZXRob2QgPSB0eXBlO1xuICAgICAgdmFyIGJlZm9yZVNlbmQgPSBvcHRpb25zLmJlZm9yZVNlbmQ7XG4gICAgICBvcHRpb25zLmJlZm9yZVNlbmQgPSBmdW5jdGlvbih4aHIpIHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ1gtSFRUUC1NZXRob2QtT3ZlcnJpZGUnLCB0eXBlKTtcbiAgICAgICAgaWYgKGJlZm9yZVNlbmQpIHJldHVybiBiZWZvcmVTZW5kLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIC8vIERvbid0IHByb2Nlc3MgZGF0YSBvbiBhIG5vbi1HRVQgcmVxdWVzdC5cbiAgICBpZiAocGFyYW1zLnR5cGUgIT09ICdHRVQnICYmICFvcHRpb25zLmVtdWxhdGVKU09OKSB7XG4gICAgICBwYXJhbXMucHJvY2Vzc0RhdGEgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBJZiB3ZSdyZSBzZW5kaW5nIGEgYFBBVENIYCByZXF1ZXN0LCBhbmQgd2UncmUgaW4gYW4gb2xkIEludGVybmV0IEV4cGxvcmVyXG4gICAgLy8gdGhhdCBzdGlsbCBoYXMgQWN0aXZlWCBlbmFibGVkIGJ5IGRlZmF1bHQsIG92ZXJyaWRlIGpRdWVyeSB0byB1c2UgdGhhdFxuICAgIC8vIGZvciBYSFIgaW5zdGVhZC4gUmVtb3ZlIHRoaXMgbGluZSB3aGVuIGpRdWVyeSBzdXBwb3J0cyBgUEFUQ0hgIG9uIElFOC5cbiAgICBpZiAocGFyYW1zLnR5cGUgPT09ICdQQVRDSCcgJiYgbm9YaHJQYXRjaCkge1xuICAgICAgcGFyYW1zLnhociA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbmV3IEFjdGl2ZVhPYmplY3QoXCJNaWNyb3NvZnQuWE1MSFRUUFwiKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gTWFrZSB0aGUgcmVxdWVzdCwgYWxsb3dpbmcgdGhlIHVzZXIgdG8gb3ZlcnJpZGUgYW55IEFqYXggb3B0aW9ucy5cbiAgICB2YXIgeGhyID0gb3B0aW9ucy54aHIgPSBCYWNrYm9uZS5hamF4KF8uZXh0ZW5kKHBhcmFtcywgb3B0aW9ucykpO1xuICAgIG1vZGVsLnRyaWdnZXIoJ3JlcXVlc3QnLCBtb2RlbCwgeGhyLCBvcHRpb25zKTtcbiAgICByZXR1cm4geGhyO1xuICB9O1xuXG4gIHZhciBub1hoclBhdGNoID1cbiAgICB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiAhIXdpbmRvdy5BY3RpdmVYT2JqZWN0ICYmXG4gICAgICAhKHdpbmRvdy5YTUxIdHRwUmVxdWVzdCAmJiAobmV3IFhNTEh0dHBSZXF1ZXN0KS5kaXNwYXRjaEV2ZW50KTtcblxuICAvLyBNYXAgZnJvbSBDUlVEIHRvIEhUVFAgZm9yIG91ciBkZWZhdWx0IGBCYWNrYm9uZS5zeW5jYCBpbXBsZW1lbnRhdGlvbi5cbiAgdmFyIG1ldGhvZE1hcCA9IHtcbiAgICAnY3JlYXRlJzogJ1BPU1QnLFxuICAgICd1cGRhdGUnOiAnUFVUJyxcbiAgICAncGF0Y2gnOiAgJ1BBVENIJyxcbiAgICAnZGVsZXRlJzogJ0RFTEVURScsXG4gICAgJ3JlYWQnOiAgICdHRVQnXG4gIH07XG5cbiAgLy8gU2V0IHRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIG9mIGBCYWNrYm9uZS5hamF4YCB0byBwcm94eSB0aHJvdWdoIHRvIGAkYC5cbiAgLy8gT3ZlcnJpZGUgdGhpcyBpZiB5b3UnZCBsaWtlIHRvIHVzZSBhIGRpZmZlcmVudCBsaWJyYXJ5LlxuICBCYWNrYm9uZS5hamF4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIEJhY2tib25lLiQuYWpheC5hcHBseShCYWNrYm9uZS4kLCBhcmd1bWVudHMpO1xuICB9O1xuXG4gIC8vIEJhY2tib25lLlJvdXRlclxuICAvLyAtLS0tLS0tLS0tLS0tLS1cblxuICAvLyBSb3V0ZXJzIG1hcCBmYXV4LVVSTHMgdG8gYWN0aW9ucywgYW5kIGZpcmUgZXZlbnRzIHdoZW4gcm91dGVzIGFyZVxuICAvLyBtYXRjaGVkLiBDcmVhdGluZyBhIG5ldyBvbmUgc2V0cyBpdHMgYHJvdXRlc2AgaGFzaCwgaWYgbm90IHNldCBzdGF0aWNhbGx5LlxuICB2YXIgUm91dGVyID0gQmFja2JvbmUuUm91dGVyID0gZnVuY3Rpb24ob3B0aW9ucykge1xuICAgIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gICAgaWYgKG9wdGlvbnMucm91dGVzKSB0aGlzLnJvdXRlcyA9IG9wdGlvbnMucm91dGVzO1xuICAgIHRoaXMuX2JpbmRSb3V0ZXMoKTtcbiAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcblxuICAvLyBDYWNoZWQgcmVndWxhciBleHByZXNzaW9ucyBmb3IgbWF0Y2hpbmcgbmFtZWQgcGFyYW0gcGFydHMgYW5kIHNwbGF0dGVkXG4gIC8vIHBhcnRzIG9mIHJvdXRlIHN0cmluZ3MuXG4gIHZhciBvcHRpb25hbFBhcmFtID0gL1xcKCguKj8pXFwpL2c7XG4gIHZhciBuYW1lZFBhcmFtICAgID0gLyhcXChcXD8pPzpcXHcrL2c7XG4gIHZhciBzcGxhdFBhcmFtICAgID0gL1xcKlxcdysvZztcbiAgdmFyIGVzY2FwZVJlZ0V4cCAgPSAvW1xcLXt9XFxbXFxdKz8uLFxcXFxcXF4kfCNcXHNdL2c7XG5cbiAgLy8gU2V0IHVwIGFsbCBpbmhlcml0YWJsZSAqKkJhY2tib25lLlJvdXRlcioqIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuXG4gIF8uZXh0ZW5kKFJvdXRlci5wcm90b3R5cGUsIEV2ZW50cywge1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBpcyBhbiBlbXB0eSBmdW5jdGlvbiBieSBkZWZhdWx0LiBPdmVycmlkZSBpdCB3aXRoIHlvdXIgb3duXG4gICAgLy8gaW5pdGlhbGl6YXRpb24gbG9naWMuXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24oKXt9LFxuXG4gICAgLy8gTWFudWFsbHkgYmluZCBhIHNpbmdsZSBuYW1lZCByb3V0ZSB0byBhIGNhbGxiYWNrLiBGb3IgZXhhbXBsZTpcbiAgICAvL1xuICAgIC8vICAgICB0aGlzLnJvdXRlKCdzZWFyY2gvOnF1ZXJ5L3A6bnVtJywgJ3NlYXJjaCcsIGZ1bmN0aW9uKHF1ZXJ5LCBudW0pIHtcbiAgICAvLyAgICAgICAuLi5cbiAgICAvLyAgICAgfSk7XG4gICAgLy9cbiAgICByb3V0ZTogZnVuY3Rpb24ocm91dGUsIG5hbWUsIGNhbGxiYWNrKSB7XG4gICAgICBpZiAoIV8uaXNSZWdFeHAocm91dGUpKSByb3V0ZSA9IHRoaXMuX3JvdXRlVG9SZWdFeHAocm91dGUpO1xuICAgICAgaWYgKF8uaXNGdW5jdGlvbihuYW1lKSkge1xuICAgICAgICBjYWxsYmFjayA9IG5hbWU7XG4gICAgICAgIG5hbWUgPSAnJztcbiAgICAgIH1cbiAgICAgIGlmICghY2FsbGJhY2spIGNhbGxiYWNrID0gdGhpc1tuYW1lXTtcbiAgICAgIHZhciByb3V0ZXIgPSB0aGlzO1xuICAgICAgQmFja2JvbmUuaGlzdG9yeS5yb3V0ZShyb3V0ZSwgZnVuY3Rpb24oZnJhZ21lbnQpIHtcbiAgICAgICAgdmFyIGFyZ3MgPSByb3V0ZXIuX2V4dHJhY3RQYXJhbWV0ZXJzKHJvdXRlLCBmcmFnbWVudCk7XG4gICAgICAgIHJvdXRlci5leGVjdXRlKGNhbGxiYWNrLCBhcmdzKTtcbiAgICAgICAgcm91dGVyLnRyaWdnZXIuYXBwbHkocm91dGVyLCBbJ3JvdXRlOicgKyBuYW1lXS5jb25jYXQoYXJncykpO1xuICAgICAgICByb3V0ZXIudHJpZ2dlcigncm91dGUnLCBuYW1lLCBhcmdzKTtcbiAgICAgICAgQmFja2JvbmUuaGlzdG9yeS50cmlnZ2VyKCdyb3V0ZScsIHJvdXRlciwgbmFtZSwgYXJncyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICAvLyBFeGVjdXRlIGEgcm91dGUgaGFuZGxlciB3aXRoIHRoZSBwcm92aWRlZCBwYXJhbWV0ZXJzLiAgVGhpcyBpcyBhblxuICAgIC8vIGV4Y2VsbGVudCBwbGFjZSB0byBkbyBwcmUtcm91dGUgc2V0dXAgb3IgcG9zdC1yb3V0ZSBjbGVhbnVwLlxuICAgIGV4ZWN1dGU6IGZ1bmN0aW9uKGNhbGxiYWNrLCBhcmdzKSB7XG4gICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH0sXG5cbiAgICAvLyBTaW1wbGUgcHJveHkgdG8gYEJhY2tib25lLmhpc3RvcnlgIHRvIHNhdmUgYSBmcmFnbWVudCBpbnRvIHRoZSBoaXN0b3J5LlxuICAgIG5hdmlnYXRlOiBmdW5jdGlvbihmcmFnbWVudCwgb3B0aW9ucykge1xuICAgICAgQmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShmcmFnbWVudCwgb3B0aW9ucyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgLy8gQmluZCBhbGwgZGVmaW5lZCByb3V0ZXMgdG8gYEJhY2tib25lLmhpc3RvcnlgLiBXZSBoYXZlIHRvIHJldmVyc2UgdGhlXG4gICAgLy8gb3JkZXIgb2YgdGhlIHJvdXRlcyBoZXJlIHRvIHN1cHBvcnQgYmVoYXZpb3Igd2hlcmUgdGhlIG1vc3QgZ2VuZXJhbFxuICAgIC8vIHJvdXRlcyBjYW4gYmUgZGVmaW5lZCBhdCB0aGUgYm90dG9tIG9mIHRoZSByb3V0ZSBtYXAuXG4gICAgX2JpbmRSb3V0ZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKCF0aGlzLnJvdXRlcykgcmV0dXJuO1xuICAgICAgdGhpcy5yb3V0ZXMgPSBfLnJlc3VsdCh0aGlzLCAncm91dGVzJyk7XG4gICAgICB2YXIgcm91dGUsIHJvdXRlcyA9IF8ua2V5cyh0aGlzLnJvdXRlcyk7XG4gICAgICB3aGlsZSAoKHJvdXRlID0gcm91dGVzLnBvcCgpKSAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMucm91dGUocm91dGUsIHRoaXMucm91dGVzW3JvdXRlXSk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8vIENvbnZlcnQgYSByb3V0ZSBzdHJpbmcgaW50byBhIHJlZ3VsYXIgZXhwcmVzc2lvbiwgc3VpdGFibGUgZm9yIG1hdGNoaW5nXG4gICAgLy8gYWdhaW5zdCB0aGUgY3VycmVudCBsb2NhdGlvbiBoYXNoLlxuICAgIF9yb3V0ZVRvUmVnRXhwOiBmdW5jdGlvbihyb3V0ZSkge1xuICAgICAgcm91dGUgPSByb3V0ZS5yZXBsYWNlKGVzY2FwZVJlZ0V4cCwgJ1xcXFwkJicpXG4gICAgICAgICAgICAgICAgICAgLnJlcGxhY2Uob3B0aW9uYWxQYXJhbSwgJyg/OiQxKT8nKVxuICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKG5hbWVkUGFyYW0sIGZ1bmN0aW9uKG1hdGNoLCBvcHRpb25hbCkge1xuICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbmFsID8gbWF0Y2ggOiAnKFteLz9dKyknO1xuICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgLnJlcGxhY2Uoc3BsYXRQYXJhbSwgJyhbXj9dKj8pJyk7XG4gICAgICByZXR1cm4gbmV3IFJlZ0V4cCgnXicgKyByb3V0ZSArICcoPzpcXFxcPyhbXFxcXHNcXFxcU10qKSk/JCcpO1xuICAgIH0sXG5cbiAgICAvLyBHaXZlbiBhIHJvdXRlLCBhbmQgYSBVUkwgZnJhZ21lbnQgdGhhdCBpdCBtYXRjaGVzLCByZXR1cm4gdGhlIGFycmF5IG9mXG4gICAgLy8gZXh0cmFjdGVkIGRlY29kZWQgcGFyYW1ldGVycy4gRW1wdHkgb3IgdW5tYXRjaGVkIHBhcmFtZXRlcnMgd2lsbCBiZVxuICAgIC8vIHRyZWF0ZWQgYXMgYG51bGxgIHRvIG5vcm1hbGl6ZSBjcm9zcy1icm93c2VyIGJlaGF2aW9yLlxuICAgIF9leHRyYWN0UGFyYW1ldGVyczogZnVuY3Rpb24ocm91dGUsIGZyYWdtZW50KSB7XG4gICAgICB2YXIgcGFyYW1zID0gcm91dGUuZXhlYyhmcmFnbWVudCkuc2xpY2UoMSk7XG4gICAgICByZXR1cm4gXy5tYXAocGFyYW1zLCBmdW5jdGlvbihwYXJhbSwgaSkge1xuICAgICAgICAvLyBEb24ndCBkZWNvZGUgdGhlIHNlYXJjaCBwYXJhbXMuXG4gICAgICAgIGlmIChpID09PSBwYXJhbXMubGVuZ3RoIC0gMSkgcmV0dXJuIHBhcmFtIHx8IG51bGw7XG4gICAgICAgIHJldHVybiBwYXJhbSA/IGRlY29kZVVSSUNvbXBvbmVudChwYXJhbSkgOiBudWxsO1xuICAgICAgfSk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIEJhY2tib25lLkhpc3RvcnlcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEhhbmRsZXMgY3Jvc3MtYnJvd3NlciBoaXN0b3J5IG1hbmFnZW1lbnQsIGJhc2VkIG9uIGVpdGhlclxuICAvLyBbcHVzaFN0YXRlXShodHRwOi8vZGl2ZWludG9odG1sNS5pbmZvL2hpc3RvcnkuaHRtbCkgYW5kIHJlYWwgVVJMcywgb3JcbiAgLy8gW29uaGFzaGNoYW5nZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9ET00vd2luZG93Lm9uaGFzaGNoYW5nZSlcbiAgLy8gYW5kIFVSTCBmcmFnbWVudHMuIElmIHRoZSBicm93c2VyIHN1cHBvcnRzIG5laXRoZXIgKG9sZCBJRSwgbmF0Y2gpLFxuICAvLyBmYWxscyBiYWNrIHRvIHBvbGxpbmcuXG4gIHZhciBIaXN0b3J5ID0gQmFja2JvbmUuSGlzdG9yeSA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaGFuZGxlcnMgPSBbXTtcbiAgICBfLmJpbmRBbGwodGhpcywgJ2NoZWNrVXJsJyk7XG5cbiAgICAvLyBFbnN1cmUgdGhhdCBgSGlzdG9yeWAgY2FuIGJlIHVzZWQgb3V0c2lkZSBvZiB0aGUgYnJvd3Nlci5cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHRoaXMubG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG4gICAgICB0aGlzLmhpc3RvcnkgPSB3aW5kb3cuaGlzdG9yeTtcbiAgICB9XG4gIH07XG5cbiAgLy8gQ2FjaGVkIHJlZ2V4IGZvciBzdHJpcHBpbmcgYSBsZWFkaW5nIGhhc2gvc2xhc2ggYW5kIHRyYWlsaW5nIHNwYWNlLlxuICB2YXIgcm91dGVTdHJpcHBlciA9IC9eWyNcXC9dfFxccyskL2c7XG5cbiAgLy8gQ2FjaGVkIHJlZ2V4IGZvciBzdHJpcHBpbmcgbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2hlcy5cbiAgdmFyIHJvb3RTdHJpcHBlciA9IC9eXFwvK3xcXC8rJC9nO1xuXG4gIC8vIENhY2hlZCByZWdleCBmb3IgZGV0ZWN0aW5nIE1TSUUuXG4gIHZhciBpc0V4cGxvcmVyID0gL21zaWUgW1xcdy5dKy87XG5cbiAgLy8gQ2FjaGVkIHJlZ2V4IGZvciByZW1vdmluZyBhIHRyYWlsaW5nIHNsYXNoLlxuICB2YXIgdHJhaWxpbmdTbGFzaCA9IC9cXC8kLztcblxuICAvLyBDYWNoZWQgcmVnZXggZm9yIHN0cmlwcGluZyB1cmxzIG9mIGhhc2guXG4gIHZhciBwYXRoU3RyaXBwZXIgPSAvIy4qJC87XG5cbiAgLy8gSGFzIHRoZSBoaXN0b3J5IGhhbmRsaW5nIGFscmVhZHkgYmVlbiBzdGFydGVkP1xuICBIaXN0b3J5LnN0YXJ0ZWQgPSBmYWxzZTtcblxuICAvLyBTZXQgdXAgYWxsIGluaGVyaXRhYmxlICoqQmFja2JvbmUuSGlzdG9yeSoqIHByb3BlcnRpZXMgYW5kIG1ldGhvZHMuXG4gIF8uZXh0ZW5kKEhpc3RvcnkucHJvdG90eXBlLCBFdmVudHMsIHtcblxuICAgIC8vIFRoZSBkZWZhdWx0IGludGVydmFsIHRvIHBvbGwgZm9yIGhhc2ggY2hhbmdlcywgaWYgbmVjZXNzYXJ5LCBpc1xuICAgIC8vIHR3ZW50eSB0aW1lcyBhIHNlY29uZC5cbiAgICBpbnRlcnZhbDogNTAsXG5cbiAgICAvLyBBcmUgd2UgYXQgdGhlIGFwcCByb290P1xuICAgIGF0Um9vdDogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy5sb2NhdGlvbi5wYXRobmFtZS5yZXBsYWNlKC9bXlxcL10kLywgJyQmLycpID09PSB0aGlzLnJvb3Q7XG4gICAgfSxcblxuICAgIC8vIEdldHMgdGhlIHRydWUgaGFzaCB2YWx1ZS4gQ2Fubm90IHVzZSBsb2NhdGlvbi5oYXNoIGRpcmVjdGx5IGR1ZSB0byBidWdcbiAgICAvLyBpbiBGaXJlZm94IHdoZXJlIGxvY2F0aW9uLmhhc2ggd2lsbCBhbHdheXMgYmUgZGVjb2RlZC5cbiAgICBnZXRIYXNoOiBmdW5jdGlvbih3aW5kb3cpIHtcbiAgICAgIHZhciBtYXRjaCA9ICh3aW5kb3cgfHwgdGhpcykubG9jYXRpb24uaHJlZi5tYXRjaCgvIyguKikkLyk7XG4gICAgICByZXR1cm4gbWF0Y2ggPyBtYXRjaFsxXSA6ICcnO1xuICAgIH0sXG5cbiAgICAvLyBHZXQgdGhlIGNyb3NzLWJyb3dzZXIgbm9ybWFsaXplZCBVUkwgZnJhZ21lbnQsIGVpdGhlciBmcm9tIHRoZSBVUkwsXG4gICAgLy8gdGhlIGhhc2gsIG9yIHRoZSBvdmVycmlkZS5cbiAgICBnZXRGcmFnbWVudDogZnVuY3Rpb24oZnJhZ21lbnQsIGZvcmNlUHVzaFN0YXRlKSB7XG4gICAgICBpZiAoZnJhZ21lbnQgPT0gbnVsbCkge1xuICAgICAgICBpZiAodGhpcy5faGFzUHVzaFN0YXRlIHx8ICF0aGlzLl93YW50c0hhc2hDaGFuZ2UgfHwgZm9yY2VQdXNoU3RhdGUpIHtcbiAgICAgICAgICBmcmFnbWVudCA9IGRlY29kZVVSSSh0aGlzLmxvY2F0aW9uLnBhdGhuYW1lICsgdGhpcy5sb2NhdGlvbi5zZWFyY2gpO1xuICAgICAgICAgIHZhciByb290ID0gdGhpcy5yb290LnJlcGxhY2UodHJhaWxpbmdTbGFzaCwgJycpO1xuICAgICAgICAgIGlmICghZnJhZ21lbnQuaW5kZXhPZihyb290KSkgZnJhZ21lbnQgPSBmcmFnbWVudC5zbGljZShyb290Lmxlbmd0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZnJhZ21lbnQgPSB0aGlzLmdldEhhc2goKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIGZyYWdtZW50LnJlcGxhY2Uocm91dGVTdHJpcHBlciwgJycpO1xuICAgIH0sXG5cbiAgICAvLyBTdGFydCB0aGUgaGFzaCBjaGFuZ2UgaGFuZGxpbmcsIHJldHVybmluZyBgdHJ1ZWAgaWYgdGhlIGN1cnJlbnQgVVJMIG1hdGNoZXNcbiAgICAvLyBhbiBleGlzdGluZyByb3V0ZSwgYW5kIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgIHN0YXJ0OiBmdW5jdGlvbihvcHRpb25zKSB7XG4gICAgICBpZiAoSGlzdG9yeS5zdGFydGVkKSB0aHJvdyBuZXcgRXJyb3IoXCJCYWNrYm9uZS5oaXN0b3J5IGhhcyBhbHJlYWR5IGJlZW4gc3RhcnRlZFwiKTtcbiAgICAgIEhpc3Rvcnkuc3RhcnRlZCA9IHRydWU7XG5cbiAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIGluaXRpYWwgY29uZmlndXJhdGlvbi4gRG8gd2UgbmVlZCBhbiBpZnJhbWU/XG4gICAgICAvLyBJcyBwdXNoU3RhdGUgZGVzaXJlZCAuLi4gaXMgaXQgYXZhaWxhYmxlP1xuICAgICAgdGhpcy5vcHRpb25zICAgICAgICAgID0gXy5leHRlbmQoe3Jvb3Q6ICcvJ30sIHRoaXMub3B0aW9ucywgb3B0aW9ucyk7XG4gICAgICB0aGlzLnJvb3QgICAgICAgICAgICAgPSB0aGlzLm9wdGlvbnMucm9vdDtcbiAgICAgIHRoaXMuX3dhbnRzSGFzaENoYW5nZSA9IHRoaXMub3B0aW9ucy5oYXNoQ2hhbmdlICE9PSBmYWxzZTtcbiAgICAgIHRoaXMuX3dhbnRzUHVzaFN0YXRlICA9ICEhdGhpcy5vcHRpb25zLnB1c2hTdGF0ZTtcbiAgICAgIHRoaXMuX2hhc1B1c2hTdGF0ZSAgICA9ICEhKHRoaXMub3B0aW9ucy5wdXNoU3RhdGUgJiYgdGhpcy5oaXN0b3J5ICYmIHRoaXMuaGlzdG9yeS5wdXNoU3RhdGUpO1xuICAgICAgdmFyIGZyYWdtZW50ICAgICAgICAgID0gdGhpcy5nZXRGcmFnbWVudCgpO1xuICAgICAgdmFyIGRvY01vZGUgICAgICAgICAgID0gZG9jdW1lbnQuZG9jdW1lbnRNb2RlO1xuICAgICAgdmFyIG9sZElFICAgICAgICAgICAgID0gKGlzRXhwbG9yZXIuZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpICYmICghZG9jTW9kZSB8fCBkb2NNb2RlIDw9IDcpKTtcblxuICAgICAgLy8gTm9ybWFsaXplIHJvb3QgdG8gYWx3YXlzIGluY2x1ZGUgYSBsZWFkaW5nIGFuZCB0cmFpbGluZyBzbGFzaC5cbiAgICAgIHRoaXMucm9vdCA9ICgnLycgKyB0aGlzLnJvb3QgKyAnLycpLnJlcGxhY2Uocm9vdFN0cmlwcGVyLCAnLycpO1xuXG4gICAgICBpZiAob2xkSUUgJiYgdGhpcy5fd2FudHNIYXNoQ2hhbmdlKSB7XG4gICAgICAgIHZhciBmcmFtZSA9IEJhY2tib25lLiQoJzxpZnJhbWUgc3JjPVwiamF2YXNjcmlwdDowXCIgdGFiaW5kZXg9XCItMVwiPicpO1xuICAgICAgICB0aGlzLmlmcmFtZSA9IGZyYW1lLmhpZGUoKS5hcHBlbmRUbygnYm9keScpWzBdLmNvbnRlbnRXaW5kb3c7XG4gICAgICAgIHRoaXMubmF2aWdhdGUoZnJhZ21lbnQpO1xuICAgICAgfVxuXG4gICAgICAvLyBEZXBlbmRpbmcgb24gd2hldGhlciB3ZSdyZSB1c2luZyBwdXNoU3RhdGUgb3IgaGFzaGVzLCBhbmQgd2hldGhlclxuICAgICAgLy8gJ29uaGFzaGNoYW5nZScgaXMgc3VwcG9ydGVkLCBkZXRlcm1pbmUgaG93IHdlIGNoZWNrIHRoZSBVUkwgc3RhdGUuXG4gICAgICBpZiAodGhpcy5faGFzUHVzaFN0YXRlKSB7XG4gICAgICAgIEJhY2tib25lLiQod2luZG93KS5vbigncG9wc3RhdGUnLCB0aGlzLmNoZWNrVXJsKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fd2FudHNIYXNoQ2hhbmdlICYmICgnb25oYXNoY2hhbmdlJyBpbiB3aW5kb3cpICYmICFvbGRJRSkge1xuICAgICAgICBCYWNrYm9uZS4kKHdpbmRvdykub24oJ2hhc2hjaGFuZ2UnLCB0aGlzLmNoZWNrVXJsKTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fd2FudHNIYXNoQ2hhbmdlKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrVXJsSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLmNoZWNrVXJsLCB0aGlzLmludGVydmFsKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGV0ZXJtaW5lIGlmIHdlIG5lZWQgdG8gY2hhbmdlIHRoZSBiYXNlIHVybCwgZm9yIGEgcHVzaFN0YXRlIGxpbmtcbiAgICAgIC8vIG9wZW5lZCBieSBhIG5vbi1wdXNoU3RhdGUgYnJvd3Nlci5cbiAgICAgIHRoaXMuZnJhZ21lbnQgPSBmcmFnbWVudDtcbiAgICAgIHZhciBsb2MgPSB0aGlzLmxvY2F0aW9uO1xuXG4gICAgICAvLyBUcmFuc2l0aW9uIGZyb20gaGFzaENoYW5nZSB0byBwdXNoU3RhdGUgb3IgdmljZSB2ZXJzYSBpZiBib3RoIGFyZVxuICAgICAgLy8gcmVxdWVzdGVkLlxuICAgICAgaWYgKHRoaXMuX3dhbnRzSGFzaENoYW5nZSAmJiB0aGlzLl93YW50c1B1c2hTdGF0ZSkge1xuXG4gICAgICAgIC8vIElmIHdlJ3ZlIHN0YXJ0ZWQgb2ZmIHdpdGggYSByb3V0ZSBmcm9tIGEgYHB1c2hTdGF0ZWAtZW5hYmxlZFxuICAgICAgICAvLyBicm93c2VyLCBidXQgd2UncmUgY3VycmVudGx5IGluIGEgYnJvd3NlciB0aGF0IGRvZXNuJ3Qgc3VwcG9ydCBpdC4uLlxuICAgICAgICBpZiAoIXRoaXMuX2hhc1B1c2hTdGF0ZSAmJiAhdGhpcy5hdFJvb3QoKSkge1xuICAgICAgICAgIHRoaXMuZnJhZ21lbnQgPSB0aGlzLmdldEZyYWdtZW50KG51bGwsIHRydWUpO1xuICAgICAgICAgIHRoaXMubG9jYXRpb24ucmVwbGFjZSh0aGlzLnJvb3QgKyAnIycgKyB0aGlzLmZyYWdtZW50KTtcbiAgICAgICAgICAvLyBSZXR1cm4gaW1tZWRpYXRlbHkgYXMgYnJvd3NlciB3aWxsIGRvIHJlZGlyZWN0IHRvIG5ldyB1cmxcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgICAvLyBPciBpZiB3ZSd2ZSBzdGFydGVkIG91dCB3aXRoIGEgaGFzaC1iYXNlZCByb3V0ZSwgYnV0IHdlJ3JlIGN1cnJlbnRseVxuICAgICAgICAvLyBpbiBhIGJyb3dzZXIgd2hlcmUgaXQgY291bGQgYmUgYHB1c2hTdGF0ZWAtYmFzZWQgaW5zdGVhZC4uLlxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2hhc1B1c2hTdGF0ZSAmJiB0aGlzLmF0Um9vdCgpICYmIGxvYy5oYXNoKSB7XG4gICAgICAgICAgdGhpcy5mcmFnbWVudCA9IHRoaXMuZ2V0SGFzaCgpLnJlcGxhY2Uocm91dGVTdHJpcHBlciwgJycpO1xuICAgICAgICAgIHRoaXMuaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sIGRvY3VtZW50LnRpdGxlLCB0aGlzLnJvb3QgKyB0aGlzLmZyYWdtZW50KTtcbiAgICAgICAgfVxuXG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5vcHRpb25zLnNpbGVudCkgcmV0dXJuIHRoaXMubG9hZFVybCgpO1xuICAgIH0sXG5cbiAgICAvLyBEaXNhYmxlIEJhY2tib25lLmhpc3RvcnksIHBlcmhhcHMgdGVtcG9yYXJpbHkuIE5vdCB1c2VmdWwgaW4gYSByZWFsIGFwcCxcbiAgICAvLyBidXQgcG9zc2libHkgdXNlZnVsIGZvciB1bml0IHRlc3RpbmcgUm91dGVycy5cbiAgICBzdG9wOiBmdW5jdGlvbigpIHtcbiAgICAgIEJhY2tib25lLiQod2luZG93KS5vZmYoJ3BvcHN0YXRlJywgdGhpcy5jaGVja1VybCkub2ZmKCdoYXNoY2hhbmdlJywgdGhpcy5jaGVja1VybCk7XG4gICAgICBpZiAodGhpcy5fY2hlY2tVcmxJbnRlcnZhbCkgY2xlYXJJbnRlcnZhbCh0aGlzLl9jaGVja1VybEludGVydmFsKTtcbiAgICAgIEhpc3Rvcnkuc3RhcnRlZCA9IGZhbHNlO1xuICAgIH0sXG5cbiAgICAvLyBBZGQgYSByb3V0ZSB0byBiZSB0ZXN0ZWQgd2hlbiB0aGUgZnJhZ21lbnQgY2hhbmdlcy4gUm91dGVzIGFkZGVkIGxhdGVyXG4gICAgLy8gbWF5IG92ZXJyaWRlIHByZXZpb3VzIHJvdXRlcy5cbiAgICByb3V0ZTogZnVuY3Rpb24ocm91dGUsIGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLmhhbmRsZXJzLnVuc2hpZnQoe3JvdXRlOiByb3V0ZSwgY2FsbGJhY2s6IGNhbGxiYWNrfSk7XG4gICAgfSxcblxuICAgIC8vIENoZWNrcyB0aGUgY3VycmVudCBVUkwgdG8gc2VlIGlmIGl0IGhhcyBjaGFuZ2VkLCBhbmQgaWYgaXQgaGFzLFxuICAgIC8vIGNhbGxzIGBsb2FkVXJsYCwgbm9ybWFsaXppbmcgYWNyb3NzIHRoZSBoaWRkZW4gaWZyYW1lLlxuICAgIGNoZWNrVXJsOiBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgY3VycmVudCA9IHRoaXMuZ2V0RnJhZ21lbnQoKTtcbiAgICAgIGlmIChjdXJyZW50ID09PSB0aGlzLmZyYWdtZW50ICYmIHRoaXMuaWZyYW1lKSB7XG4gICAgICAgIGN1cnJlbnQgPSB0aGlzLmdldEZyYWdtZW50KHRoaXMuZ2V0SGFzaCh0aGlzLmlmcmFtZSkpO1xuICAgICAgfVxuICAgICAgaWYgKGN1cnJlbnQgPT09IHRoaXMuZnJhZ21lbnQpIHJldHVybiBmYWxzZTtcbiAgICAgIGlmICh0aGlzLmlmcmFtZSkgdGhpcy5uYXZpZ2F0ZShjdXJyZW50KTtcbiAgICAgIHRoaXMubG9hZFVybCgpO1xuICAgIH0sXG5cbiAgICAvLyBBdHRlbXB0IHRvIGxvYWQgdGhlIGN1cnJlbnQgVVJMIGZyYWdtZW50LiBJZiBhIHJvdXRlIHN1Y2NlZWRzIHdpdGggYVxuICAgIC8vIG1hdGNoLCByZXR1cm5zIGB0cnVlYC4gSWYgbm8gZGVmaW5lZCByb3V0ZXMgbWF0Y2hlcyB0aGUgZnJhZ21lbnQsXG4gICAgLy8gcmV0dXJucyBgZmFsc2VgLlxuICAgIGxvYWRVcmw6IGZ1bmN0aW9uKGZyYWdtZW50KSB7XG4gICAgICBmcmFnbWVudCA9IHRoaXMuZnJhZ21lbnQgPSB0aGlzLmdldEZyYWdtZW50KGZyYWdtZW50KTtcbiAgICAgIHJldHVybiBfLmFueSh0aGlzLmhhbmRsZXJzLCBmdW5jdGlvbihoYW5kbGVyKSB7XG4gICAgICAgIGlmIChoYW5kbGVyLnJvdXRlLnRlc3QoZnJhZ21lbnQpKSB7XG4gICAgICAgICAgaGFuZGxlci5jYWxsYmFjayhmcmFnbWVudCk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvLyBTYXZlIGEgZnJhZ21lbnQgaW50byB0aGUgaGFzaCBoaXN0b3J5LCBvciByZXBsYWNlIHRoZSBVUkwgc3RhdGUgaWYgdGhlXG4gICAgLy8gJ3JlcGxhY2UnIG9wdGlvbiBpcyBwYXNzZWQuIFlvdSBhcmUgcmVzcG9uc2libGUgZm9yIHByb3Blcmx5IFVSTC1lbmNvZGluZ1xuICAgIC8vIHRoZSBmcmFnbWVudCBpbiBhZHZhbmNlLlxuICAgIC8vXG4gICAgLy8gVGhlIG9wdGlvbnMgb2JqZWN0IGNhbiBjb250YWluIGB0cmlnZ2VyOiB0cnVlYCBpZiB5b3Ugd2lzaCB0byBoYXZlIHRoZVxuICAgIC8vIHJvdXRlIGNhbGxiYWNrIGJlIGZpcmVkIChub3QgdXN1YWxseSBkZXNpcmFibGUpLCBvciBgcmVwbGFjZTogdHJ1ZWAsIGlmXG4gICAgLy8geW91IHdpc2ggdG8gbW9kaWZ5IHRoZSBjdXJyZW50IFVSTCB3aXRob3V0IGFkZGluZyBhbiBlbnRyeSB0byB0aGUgaGlzdG9yeS5cbiAgICBuYXZpZ2F0ZTogZnVuY3Rpb24oZnJhZ21lbnQsIG9wdGlvbnMpIHtcbiAgICAgIGlmICghSGlzdG9yeS5zdGFydGVkKSByZXR1cm4gZmFsc2U7XG4gICAgICBpZiAoIW9wdGlvbnMgfHwgb3B0aW9ucyA9PT0gdHJ1ZSkgb3B0aW9ucyA9IHt0cmlnZ2VyOiAhIW9wdGlvbnN9O1xuXG4gICAgICB2YXIgdXJsID0gdGhpcy5yb290ICsgKGZyYWdtZW50ID0gdGhpcy5nZXRGcmFnbWVudChmcmFnbWVudCB8fCAnJykpO1xuXG4gICAgICAvLyBTdHJpcCB0aGUgaGFzaCBmb3IgbWF0Y2hpbmcuXG4gICAgICBmcmFnbWVudCA9IGZyYWdtZW50LnJlcGxhY2UocGF0aFN0cmlwcGVyLCAnJyk7XG5cbiAgICAgIGlmICh0aGlzLmZyYWdtZW50ID09PSBmcmFnbWVudCkgcmV0dXJuO1xuICAgICAgdGhpcy5mcmFnbWVudCA9IGZyYWdtZW50O1xuXG4gICAgICAvLyBEb24ndCBpbmNsdWRlIGEgdHJhaWxpbmcgc2xhc2ggb24gdGhlIHJvb3QuXG4gICAgICBpZiAoZnJhZ21lbnQgPT09ICcnICYmIHVybCAhPT0gJy8nKSB1cmwgPSB1cmwuc2xpY2UoMCwgLTEpO1xuXG4gICAgICAvLyBJZiBwdXNoU3RhdGUgaXMgYXZhaWxhYmxlLCB3ZSB1c2UgaXQgdG8gc2V0IHRoZSBmcmFnbWVudCBhcyBhIHJlYWwgVVJMLlxuICAgICAgaWYgKHRoaXMuX2hhc1B1c2hTdGF0ZSkge1xuICAgICAgICB0aGlzLmhpc3Rvcnlbb3B0aW9ucy5yZXBsYWNlID8gJ3JlcGxhY2VTdGF0ZScgOiAncHVzaFN0YXRlJ10oe30sIGRvY3VtZW50LnRpdGxlLCB1cmwpO1xuXG4gICAgICAvLyBJZiBoYXNoIGNoYW5nZXMgaGF2ZW4ndCBiZWVuIGV4cGxpY2l0bHkgZGlzYWJsZWQsIHVwZGF0ZSB0aGUgaGFzaFxuICAgICAgLy8gZnJhZ21lbnQgdG8gc3RvcmUgaGlzdG9yeS5cbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fd2FudHNIYXNoQ2hhbmdlKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZUhhc2godGhpcy5sb2NhdGlvbiwgZnJhZ21lbnQsIG9wdGlvbnMucmVwbGFjZSk7XG4gICAgICAgIGlmICh0aGlzLmlmcmFtZSAmJiAoZnJhZ21lbnQgIT09IHRoaXMuZ2V0RnJhZ21lbnQodGhpcy5nZXRIYXNoKHRoaXMuaWZyYW1lKSkpKSB7XG4gICAgICAgICAgLy8gT3BlbmluZyBhbmQgY2xvc2luZyB0aGUgaWZyYW1lIHRyaWNrcyBJRTcgYW5kIGVhcmxpZXIgdG8gcHVzaCBhXG4gICAgICAgICAgLy8gaGlzdG9yeSBlbnRyeSBvbiBoYXNoLXRhZyBjaGFuZ2UuICBXaGVuIHJlcGxhY2UgaXMgdHJ1ZSwgd2UgZG9uJ3RcbiAgICAgICAgICAvLyB3YW50IHRoaXMuXG4gICAgICAgICAgaWYoIW9wdGlvbnMucmVwbGFjZSkgdGhpcy5pZnJhbWUuZG9jdW1lbnQub3BlbigpLmNsb3NlKCk7XG4gICAgICAgICAgdGhpcy5fdXBkYXRlSGFzaCh0aGlzLmlmcmFtZS5sb2NhdGlvbiwgZnJhZ21lbnQsIG9wdGlvbnMucmVwbGFjZSk7XG4gICAgICAgIH1cblxuICAgICAgLy8gSWYgeW91J3ZlIHRvbGQgdXMgdGhhdCB5b3UgZXhwbGljaXRseSBkb24ndCB3YW50IGZhbGxiYWNrIGhhc2hjaGFuZ2UtXG4gICAgICAvLyBiYXNlZCBoaXN0b3J5LCB0aGVuIGBuYXZpZ2F0ZWAgYmVjb21lcyBhIHBhZ2UgcmVmcmVzaC5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2F0aW9uLmFzc2lnbih1cmwpO1xuICAgICAgfVxuICAgICAgaWYgKG9wdGlvbnMudHJpZ2dlcikgcmV0dXJuIHRoaXMubG9hZFVybChmcmFnbWVudCk7XG4gICAgfSxcblxuICAgIC8vIFVwZGF0ZSB0aGUgaGFzaCBsb2NhdGlvbiwgZWl0aGVyIHJlcGxhY2luZyB0aGUgY3VycmVudCBlbnRyeSwgb3IgYWRkaW5nXG4gICAgLy8gYSBuZXcgb25lIHRvIHRoZSBicm93c2VyIGhpc3RvcnkuXG4gICAgX3VwZGF0ZUhhc2g6IGZ1bmN0aW9uKGxvY2F0aW9uLCBmcmFnbWVudCwgcmVwbGFjZSkge1xuICAgICAgaWYgKHJlcGxhY2UpIHtcbiAgICAgICAgdmFyIGhyZWYgPSBsb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyhqYXZhc2NyaXB0OnwjKS4qJC8sICcnKTtcbiAgICAgICAgbG9jYXRpb24ucmVwbGFjZShocmVmICsgJyMnICsgZnJhZ21lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gU29tZSBicm93c2VycyByZXF1aXJlIHRoYXQgYGhhc2hgIGNvbnRhaW5zIGEgbGVhZGluZyAjLlxuICAgICAgICBsb2NhdGlvbi5oYXNoID0gJyMnICsgZnJhZ21lbnQ7XG4gICAgICB9XG4gICAgfVxuXG4gIH0pO1xuXG4gIC8vIENyZWF0ZSB0aGUgZGVmYXVsdCBCYWNrYm9uZS5oaXN0b3J5LlxuICBCYWNrYm9uZS5oaXN0b3J5ID0gbmV3IEhpc3Rvcnk7XG5cbiAgLy8gSGVscGVyc1xuICAvLyAtLS0tLS0tXG5cbiAgLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGNvcnJlY3RseSBzZXQgdXAgdGhlIHByb3RvdHlwZSBjaGFpbiwgZm9yIHN1YmNsYXNzZXMuXG4gIC8vIFNpbWlsYXIgdG8gYGdvb2cuaW5oZXJpdHNgLCBidXQgdXNlcyBhIGhhc2ggb2YgcHJvdG90eXBlIHByb3BlcnRpZXMgYW5kXG4gIC8vIGNsYXNzIHByb3BlcnRpZXMgdG8gYmUgZXh0ZW5kZWQuXG4gIHZhciBleHRlbmQgPSBmdW5jdGlvbihwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykge1xuICAgIHZhciBwYXJlbnQgPSB0aGlzO1xuICAgIHZhciBjaGlsZDtcblxuICAgIC8vIFRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiBmb3IgdGhlIG5ldyBzdWJjbGFzcyBpcyBlaXRoZXIgZGVmaW5lZCBieSB5b3VcbiAgICAvLyAodGhlIFwiY29uc3RydWN0b3JcIiBwcm9wZXJ0eSBpbiB5b3VyIGBleHRlbmRgIGRlZmluaXRpb24pLCBvciBkZWZhdWx0ZWRcbiAgICAvLyBieSB1cyB0byBzaW1wbHkgY2FsbCB0aGUgcGFyZW50J3MgY29uc3RydWN0b3IuXG4gICAgaWYgKHByb3RvUHJvcHMgJiYgXy5oYXMocHJvdG9Qcm9wcywgJ2NvbnN0cnVjdG9yJykpIHtcbiAgICAgIGNoaWxkID0gcHJvdG9Qcm9wcy5jb25zdHJ1Y3RvcjtcbiAgICB9IGVsc2Uge1xuICAgICAgY2hpbGQgPSBmdW5jdGlvbigpeyByZXR1cm4gcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH07XG4gICAgfVxuXG4gICAgLy8gQWRkIHN0YXRpYyBwcm9wZXJ0aWVzIHRvIHRoZSBjb25zdHJ1Y3RvciBmdW5jdGlvbiwgaWYgc3VwcGxpZWQuXG4gICAgXy5leHRlbmQoY2hpbGQsIHBhcmVudCwgc3RhdGljUHJvcHMpO1xuXG4gICAgLy8gU2V0IHRoZSBwcm90b3R5cGUgY2hhaW4gdG8gaW5oZXJpdCBmcm9tIGBwYXJlbnRgLCB3aXRob3V0IGNhbGxpbmdcbiAgICAvLyBgcGFyZW50YCdzIGNvbnN0cnVjdG9yIGZ1bmN0aW9uLlxuICAgIHZhciBTdXJyb2dhdGUgPSBmdW5jdGlvbigpeyB0aGlzLmNvbnN0cnVjdG9yID0gY2hpbGQ7IH07XG4gICAgU3Vycm9nYXRlLnByb3RvdHlwZSA9IHBhcmVudC5wcm90b3R5cGU7XG4gICAgY2hpbGQucHJvdG90eXBlID0gbmV3IFN1cnJvZ2F0ZTtcblxuICAgIC8vIEFkZCBwcm90b3R5cGUgcHJvcGVydGllcyAoaW5zdGFuY2UgcHJvcGVydGllcykgdG8gdGhlIHN1YmNsYXNzLFxuICAgIC8vIGlmIHN1cHBsaWVkLlxuICAgIGlmIChwcm90b1Byb3BzKSBfLmV4dGVuZChjaGlsZC5wcm90b3R5cGUsIHByb3RvUHJvcHMpO1xuXG4gICAgLy8gU2V0IGEgY29udmVuaWVuY2UgcHJvcGVydHkgaW4gY2FzZSB0aGUgcGFyZW50J3MgcHJvdG90eXBlIGlzIG5lZWRlZFxuICAgIC8vIGxhdGVyLlxuICAgIGNoaWxkLl9fc3VwZXJfXyA9IHBhcmVudC5wcm90b3R5cGU7XG5cbiAgICByZXR1cm4gY2hpbGQ7XG4gIH07XG5cbiAgLy8gU2V0IHVwIGluaGVyaXRhbmNlIGZvciB0aGUgbW9kZWwsIGNvbGxlY3Rpb24sIHJvdXRlciwgdmlldyBhbmQgaGlzdG9yeS5cbiAgTW9kZWwuZXh0ZW5kID0gQ29sbGVjdGlvbi5leHRlbmQgPSBSb3V0ZXIuZXh0ZW5kID0gVmlldy5leHRlbmQgPSBIaXN0b3J5LmV4dGVuZCA9IGV4dGVuZDtcblxuICAvLyBUaHJvdyBhbiBlcnJvciB3aGVuIGEgVVJMIGlzIG5lZWRlZCwgYW5kIG5vbmUgaXMgc3VwcGxpZWQuXG4gIHZhciB1cmxFcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignQSBcInVybFwiIHByb3BlcnR5IG9yIGZ1bmN0aW9uIG11c3QgYmUgc3BlY2lmaWVkJyk7XG4gIH07XG5cbiAgLy8gV3JhcCBhbiBvcHRpb25hbCBlcnJvciBjYWxsYmFjayB3aXRoIGEgZmFsbGJhY2sgZXJyb3IgZXZlbnQuXG4gIHZhciB3cmFwRXJyb3IgPSBmdW5jdGlvbihtb2RlbCwgb3B0aW9ucykge1xuICAgIHZhciBlcnJvciA9IG9wdGlvbnMuZXJyb3I7XG4gICAgb3B0aW9ucy5lcnJvciA9IGZ1bmN0aW9uKHJlc3ApIHtcbiAgICAgIGlmIChlcnJvcikgZXJyb3IobW9kZWwsIHJlc3AsIG9wdGlvbnMpO1xuICAgICAgbW9kZWwudHJpZ2dlcignZXJyb3InLCBtb2RlbCwgcmVzcCwgb3B0aW9ucyk7XG4gICAgfTtcbiAgfTtcblxuICByZXR1cm4gQmFja2JvbmU7XG5cbn0pKTtcbiIsIi8qIVxuICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuXG4gKlxuICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cbid1c2Ugc3RyaWN0J1xuXG52YXIgYmFzZTY0ID0gcmVxdWlyZSgnYmFzZTY0LWpzJylcbnZhciBpZWVlNzU0ID0gcmVxdWlyZSgnaWVlZTc1NCcpXG52YXIgaXNBcnJheSA9IHJlcXVpcmUoJ2lzYXJyYXknKVxuXG5leHBvcnRzLkJ1ZmZlciA9IEJ1ZmZlclxuZXhwb3J0cy5TbG93QnVmZmVyID0gU2xvd0J1ZmZlclxuZXhwb3J0cy5JTlNQRUNUX01BWF9CWVRFUyA9IDUwXG5CdWZmZXIucG9vbFNpemUgPSA4MTkyIC8vIG5vdCB1c2VkIGJ5IHRoaXMgaW1wbGVtZW50YXRpb25cblxudmFyIHJvb3RQYXJlbnQgPSB7fVxuXG4vKipcbiAqIElmIGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGA6XG4gKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxuICogICA9PT0gZmFsc2UgICBVc2UgT2JqZWN0IGltcGxlbWVudGF0aW9uIChtb3N0IGNvbXBhdGlibGUsIGV2ZW4gSUU2KVxuICpcbiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcbiAqIE9wZXJhIDExLjYrLCBpT1MgNC4yKy5cbiAqXG4gKiBEdWUgdG8gdmFyaW91cyBicm93c2VyIGJ1Z3MsIHNvbWV0aW1lcyB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uIHdpbGwgYmUgdXNlZCBldmVuXG4gKiB3aGVuIHRoZSBicm93c2VyIHN1cHBvcnRzIHR5cGVkIGFycmF5cy5cbiAqXG4gKiBOb3RlOlxuICpcbiAqICAgLSBGaXJlZm94IDQtMjkgbGFja3Mgc3VwcG9ydCBmb3IgYWRkaW5nIG5ldyBwcm9wZXJ0aWVzIHRvIGBVaW50OEFycmF5YCBpbnN0YW5jZXMsXG4gKiAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguXG4gKlxuICogICAtIFNhZmFyaSA1LTcgbGFja3Mgc3VwcG9ydCBmb3IgY2hhbmdpbmcgdGhlIGBPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yYCBwcm9wZXJ0eVxuICogICAgIG9uIG9iamVjdHMuXG4gKlxuICogICAtIENocm9tZSA5LTEwIGlzIG1pc3NpbmcgdGhlIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24uXG4gKlxuICogICAtIElFMTAgaGFzIGEgYnJva2VuIGBUeXBlZEFycmF5LnByb3RvdHlwZS5zdWJhcnJheWAgZnVuY3Rpb24gd2hpY2ggcmV0dXJucyBhcnJheXMgb2ZcbiAqICAgICBpbmNvcnJlY3QgbGVuZ3RoIGluIHNvbWUgc2l0dWF0aW9ucy5cblxuICogV2UgZGV0ZWN0IHRoZXNlIGJ1Z2d5IGJyb3dzZXJzIGFuZCBzZXQgYEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUYCB0byBgZmFsc2VgIHNvIHRoZXlcbiAqIGdldCB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uLCB3aGljaCBpcyBzbG93ZXIgYnV0IGJlaGF2ZXMgY29ycmVjdGx5LlxuICovXG5CdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IGdsb2JhbC5UWVBFRF9BUlJBWV9TVVBQT1JUICE9PSB1bmRlZmluZWRcbiAgPyBnbG9iYWwuVFlQRURfQVJSQVlfU1VQUE9SVFxuICA6IHR5cGVkQXJyYXlTdXBwb3J0KClcblxuZnVuY3Rpb24gdHlwZWRBcnJheVN1cHBvcnQgKCkge1xuICBmdW5jdGlvbiBCYXIgKCkge31cbiAgdHJ5IHtcbiAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoMSlcbiAgICBhcnIuZm9vID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfVxuICAgIGFyci5jb25zdHJ1Y3RvciA9IEJhclxuICAgIHJldHVybiBhcnIuZm9vKCkgPT09IDQyICYmIC8vIHR5cGVkIGFycmF5IGluc3RhbmNlcyBjYW4gYmUgYXVnbWVudGVkXG4gICAgICAgIGFyci5jb25zdHJ1Y3RvciA9PT0gQmFyICYmIC8vIGNvbnN0cnVjdG9yIGNhbiBiZSBzZXRcbiAgICAgICAgdHlwZW9mIGFyci5zdWJhcnJheSA9PT0gJ2Z1bmN0aW9uJyAmJiAvLyBjaHJvbWUgOS0xMCBsYWNrIGBzdWJhcnJheWBcbiAgICAgICAgYXJyLnN1YmFycmF5KDEsIDEpLmJ5dGVMZW5ndGggPT09IDAgLy8gaWUxMCBoYXMgYnJva2VuIGBzdWJhcnJheWBcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbmZ1bmN0aW9uIGtNYXhMZW5ndGggKCkge1xuICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRcbiAgICA/IDB4N2ZmZmZmZmZcbiAgICA6IDB4M2ZmZmZmZmZcbn1cblxuLyoqXG4gKiBDbGFzczogQnVmZmVyXG4gKiA9PT09PT09PT09PT09XG4gKlxuICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBhcmUgYXVnbWVudGVkXG4gKiB3aXRoIGZ1bmN0aW9uIHByb3BlcnRpZXMgZm9yIGFsbCB0aGUgbm9kZSBgQnVmZmVyYCBBUEkgZnVuY3Rpb25zLiBXZSB1c2VcbiAqIGBVaW50OEFycmF5YCBzbyB0aGF0IHNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0IHJldHVybnNcbiAqIGEgc2luZ2xlIG9jdGV0LlxuICpcbiAqIEJ5IGF1Z21lbnRpbmcgdGhlIGluc3RhbmNlcywgd2UgY2FuIGF2b2lkIG1vZGlmeWluZyB0aGUgYFVpbnQ4QXJyYXlgXG4gKiBwcm90b3R5cGUuXG4gKi9cbmZ1bmN0aW9uIEJ1ZmZlciAoYXJnKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBCdWZmZXIpKSB7XG4gICAgLy8gQXZvaWQgZ29pbmcgdGhyb3VnaCBhbiBBcmd1bWVudHNBZGFwdG9yVHJhbXBvbGluZSBpbiB0aGUgY29tbW9uIGNhc2UuXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGFyZ3VtZW50c1sxXSlcbiAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcpXG4gIH1cblxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpcy5sZW5ndGggPSAwXG4gICAgdGhpcy5wYXJlbnQgPSB1bmRlZmluZWRcbiAgfVxuXG4gIC8vIENvbW1vbiBjYXNlLlxuICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcbiAgICByZXR1cm4gZnJvbU51bWJlcih0aGlzLCBhcmcpXG4gIH1cblxuICAvLyBTbGlnaHRseSBsZXNzIGNvbW1vbiBjYXNlLlxuICBpZiAodHlwZW9mIGFyZyA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZnJvbVN0cmluZyh0aGlzLCBhcmcsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gYXJndW1lbnRzWzFdIDogJ3V0ZjgnKVxuICB9XG5cbiAgLy8gVW51c3VhbC5cbiAgcmV0dXJuIGZyb21PYmplY3QodGhpcywgYXJnKVxufVxuXG5mdW5jdGlvbiBmcm9tTnVtYmVyICh0aGF0LCBsZW5ndGgpIHtcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChsZW5ndGgpIHwgMClcbiAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoYXRbaV0gPSAwXG4gICAgfVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21TdHJpbmcgKHRoYXQsIHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycgfHwgZW5jb2RpbmcgPT09ICcnKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIC8vIEFzc3VtcHRpb246IGJ5dGVMZW5ndGgoKSByZXR1cm4gdmFsdWUgaXMgYWx3YXlzIDwga01heExlbmd0aC5cbiAgdmFyIGxlbmd0aCA9IGJ5dGVMZW5ndGgoc3RyaW5nLCBlbmNvZGluZykgfCAwXG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG5cbiAgdGhhdC53cml0ZShzdHJpbmcsIGVuY29kaW5nKVxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBmcm9tT2JqZWN0ICh0aGF0LCBvYmplY3QpIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihvYmplY3QpKSByZXR1cm4gZnJvbUJ1ZmZlcih0aGF0LCBvYmplY3QpXG5cbiAgaWYgKGlzQXJyYXkob2JqZWN0KSkgcmV0dXJuIGZyb21BcnJheSh0aGF0LCBvYmplY3QpXG5cbiAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignbXVzdCBzdGFydCB3aXRoIG51bWJlciwgYnVmZmVyLCBhcnJheSBvciBzdHJpbmcnKVxuICB9XG5cbiAgaWYgKHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAob2JqZWN0LmJ1ZmZlciBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICByZXR1cm4gZnJvbVR5cGVkQXJyYXkodGhhdCwgb2JqZWN0KVxuICAgIH1cbiAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgIHJldHVybiBmcm9tQXJyYXlCdWZmZXIodGhhdCwgb2JqZWN0KVxuICAgIH1cbiAgfVxuXG4gIGlmIChvYmplY3QubGVuZ3RoKSByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmplY3QpXG5cbiAgcmV0dXJuIGZyb21Kc29uT2JqZWN0KHRoYXQsIG9iamVjdClcbn1cblxuZnVuY3Rpb24gZnJvbUJ1ZmZlciAodGhhdCwgYnVmZmVyKSB7XG4gIHZhciBsZW5ndGggPSBjaGVja2VkKGJ1ZmZlci5sZW5ndGgpIHwgMFxuICB0aGF0ID0gYWxsb2NhdGUodGhhdCwgbGVuZ3RoKVxuICBidWZmZXIuY29weSh0aGF0LCAwLCAwLCBsZW5ndGgpXG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheSAodGhhdCwgYXJyYXkpIHtcbiAgdmFyIGxlbmd0aCA9IGNoZWNrZWQoYXJyYXkubGVuZ3RoKSB8IDBcbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbi8vIER1cGxpY2F0ZSBvZiBmcm9tQXJyYXkoKSB0byBrZWVwIGZyb21BcnJheSgpIG1vbm9tb3JwaGljLlxuZnVuY3Rpb24gZnJvbVR5cGVkQXJyYXkgKHRoYXQsIGFycmF5KSB7XG4gIHZhciBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG4gIC8vIFRydW5jYXRpbmcgdGhlIGVsZW1lbnRzIGlzIHByb2JhYmx5IG5vdCB3aGF0IHBlb3BsZSBleHBlY3QgZnJvbSB0eXBlZFxuICAvLyBhcnJheXMgd2l0aCBCWVRFU19QRVJfRUxFTUVOVCA+IDEgYnV0IGl0J3MgY29tcGF0aWJsZSB3aXRoIHRoZSBiZWhhdmlvclxuICAvLyBvZiB0aGUgb2xkIEJ1ZmZlciBjb25zdHJ1Y3Rvci5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkgKz0gMSkge1xuICAgIHRoYXRbaV0gPSBhcnJheVtpXSAmIDI1NVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAodGhhdCwgYXJyYXkpIHtcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgYXJyYXkuYnl0ZUxlbmd0aFxuICAgIHRoYXQgPSBCdWZmZXIuX2F1Z21lbnQobmV3IFVpbnQ4QXJyYXkoYXJyYXkpKVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3NcbiAgICB0aGF0ID0gZnJvbVR5cGVkQXJyYXkodGhhdCwgbmV3IFVpbnQ4QXJyYXkoYXJyYXkpKVxuICB9XG4gIHJldHVybiB0aGF0XG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUxpa2UgKHRoYXQsIGFycmF5KSB7XG4gIHZhciBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIHRoYXQgPSBhbGxvY2F0ZSh0aGF0LCBsZW5ndGgpXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpICs9IDEpIHtcbiAgICB0aGF0W2ldID0gYXJyYXlbaV0gJiAyNTVcbiAgfVxuICByZXR1cm4gdGhhdFxufVxuXG4vLyBEZXNlcmlhbGl6ZSB7IHR5cGU6ICdCdWZmZXInLCBkYXRhOiBbMSwyLDMsLi4uXSB9IGludG8gYSBCdWZmZXIgb2JqZWN0LlxuLy8gUmV0dXJucyBhIHplcm8tbGVuZ3RoIGJ1ZmZlciBmb3IgaW5wdXRzIHRoYXQgZG9uJ3QgY29uZm9ybSB0byB0aGUgc3BlYy5cbmZ1bmN0aW9uIGZyb21Kc29uT2JqZWN0ICh0aGF0LCBvYmplY3QpIHtcbiAgdmFyIGFycmF5XG4gIHZhciBsZW5ndGggPSAwXG5cbiAgaWYgKG9iamVjdC50eXBlID09PSAnQnVmZmVyJyAmJiBpc0FycmF5KG9iamVjdC5kYXRhKSkge1xuICAgIGFycmF5ID0gb2JqZWN0LmRhdGFcbiAgICBsZW5ndGggPSBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIH1cbiAgdGhhdCA9IGFsbG9jYXRlKHRoYXQsIGxlbmd0aClcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XG4gIH1cbiAgcmV0dXJuIHRoYXRcbn1cblxuaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gIEJ1ZmZlci5wcm90b3R5cGUuX19wcm90b19fID0gVWludDhBcnJheS5wcm90b3R5cGVcbiAgQnVmZmVyLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXlcbn0gZWxzZSB7XG4gIC8vIHByZS1zZXQgZm9yIHZhbHVlcyB0aGF0IG1heSBleGlzdCBpbiB0aGUgZnV0dXJlXG4gIEJ1ZmZlci5wcm90b3R5cGUubGVuZ3RoID0gdW5kZWZpbmVkXG4gIEJ1ZmZlci5wcm90b3R5cGUucGFyZW50ID0gdW5kZWZpbmVkXG59XG5cbmZ1bmN0aW9uIGFsbG9jYXRlICh0aGF0LCBsZW5ndGgpIHtcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXG4gICAgdGhhdCA9IEJ1ZmZlci5fYXVnbWVudChuZXcgVWludDhBcnJheShsZW5ndGgpKVxuICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrOiBSZXR1cm4gYW4gb2JqZWN0IGluc3RhbmNlIG9mIHRoZSBCdWZmZXIgY2xhc3NcbiAgICB0aGF0Lmxlbmd0aCA9IGxlbmd0aFxuICAgIHRoYXQuX2lzQnVmZmVyID0gdHJ1ZVxuICB9XG5cbiAgdmFyIGZyb21Qb29sID0gbGVuZ3RoICE9PSAwICYmIGxlbmd0aCA8PSBCdWZmZXIucG9vbFNpemUgPj4+IDFcbiAgaWYgKGZyb21Qb29sKSB0aGF0LnBhcmVudCA9IHJvb3RQYXJlbnRcblxuICByZXR1cm4gdGhhdFxufVxuXG5mdW5jdGlvbiBjaGVja2VkIChsZW5ndGgpIHtcbiAgLy8gTm90ZTogY2Fubm90IHVzZSBgbGVuZ3RoIDwga01heExlbmd0aGAgaGVyZSBiZWNhdXNlIHRoYXQgZmFpbHMgd2hlblxuICAvLyBsZW5ndGggaXMgTmFOICh3aGljaCBpcyBvdGhlcndpc2UgY29lcmNlZCB0byB6ZXJvLilcbiAgaWYgKGxlbmd0aCA+PSBrTWF4TGVuZ3RoKCkpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAnc2l6ZTogMHgnICsga01heExlbmd0aCgpLnRvU3RyaW5nKDE2KSArICcgYnl0ZXMnKVxuICB9XG4gIHJldHVybiBsZW5ndGggfCAwXG59XG5cbmZ1bmN0aW9uIFNsb3dCdWZmZXIgKHN1YmplY3QsIGVuY29kaW5nKSB7XG4gIGlmICghKHRoaXMgaW5zdGFuY2VvZiBTbG93QnVmZmVyKSkgcmV0dXJuIG5ldyBTbG93QnVmZmVyKHN1YmplY3QsIGVuY29kaW5nKVxuXG4gIHZhciBidWYgPSBuZXcgQnVmZmVyKHN1YmplY3QsIGVuY29kaW5nKVxuICBkZWxldGUgYnVmLnBhcmVudFxuICByZXR1cm4gYnVmXG59XG5cbkJ1ZmZlci5pc0J1ZmZlciA9IGZ1bmN0aW9uIGlzQnVmZmVyIChiKSB7XG4gIHJldHVybiAhIShiICE9IG51bGwgJiYgYi5faXNCdWZmZXIpXG59XG5cbkJ1ZmZlci5jb21wYXJlID0gZnVuY3Rpb24gY29tcGFyZSAoYSwgYikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihhKSB8fCAhQnVmZmVyLmlzQnVmZmVyKGIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQXJndW1lbnRzIG11c3QgYmUgQnVmZmVycycpXG4gIH1cblxuICBpZiAoYSA9PT0gYikgcmV0dXJuIDBcblxuICB2YXIgeCA9IGEubGVuZ3RoXG4gIHZhciB5ID0gYi5sZW5ndGhcblxuICB2YXIgaSA9IDBcbiAgdmFyIGxlbiA9IE1hdGgubWluKHgsIHkpXG4gIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgaWYgKGFbaV0gIT09IGJbaV0pIGJyZWFrXG5cbiAgICArK2lcbiAgfVxuXG4gIGlmIChpICE9PSBsZW4pIHtcbiAgICB4ID0gYVtpXVxuICAgIHkgPSBiW2ldXG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbkJ1ZmZlci5pc0VuY29kaW5nID0gZnVuY3Rpb24gaXNFbmNvZGluZyAoZW5jb2RpbmcpIHtcbiAgc3dpdGNoIChTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlICdoZXgnOlxuICAgIGNhc2UgJ3V0ZjgnOlxuICAgIGNhc2UgJ3V0Zi04JzpcbiAgICBjYXNlICdhc2NpaSc6XG4gICAgY2FzZSAnYmluYXJ5JzpcbiAgICBjYXNlICdiYXNlNjQnOlxuICAgIGNhc2UgJ3Jhdyc6XG4gICAgY2FzZSAndWNzMic6XG4gICAgY2FzZSAndWNzLTInOlxuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgIHJldHVybiB0cnVlXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbkJ1ZmZlci5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQgKGxpc3QsIGxlbmd0aCkge1xuICBpZiAoIWlzQXJyYXkobGlzdCkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2xpc3QgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzLicpXG5cbiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIG5ldyBCdWZmZXIoMClcbiAgfVxuXG4gIHZhciBpXG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGxlbmd0aCA9IDBcbiAgICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoXG4gICAgfVxuICB9XG5cbiAgdmFyIGJ1ZiA9IG5ldyBCdWZmZXIobGVuZ3RoKVxuICB2YXIgcG9zID0gMFxuICBmb3IgKGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXVxuICAgIGl0ZW0uY29weShidWYsIHBvcylcbiAgICBwb3MgKz0gaXRlbS5sZW5ndGhcbiAgfVxuICByZXR1cm4gYnVmXG59XG5cbmZ1bmN0aW9uIGJ5dGVMZW5ndGggKHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKHR5cGVvZiBzdHJpbmcgIT09ICdzdHJpbmcnKSBzdHJpbmcgPSAnJyArIHN0cmluZ1xuXG4gIHZhciBsZW4gPSBzdHJpbmcubGVuZ3RoXG4gIGlmIChsZW4gPT09IDApIHJldHVybiAwXG5cbiAgLy8gVXNlIGEgZm9yIGxvb3AgdG8gYXZvaWQgcmVjdXJzaW9uXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgLy8gRGVwcmVjYXRlZFxuICAgICAgY2FzZSAncmF3JzpcbiAgICAgIGNhc2UgJ3Jhd3MnOlxuICAgICAgICByZXR1cm4gbGVuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoXG4gICAgICBjYXNlICd1Y3MyJzpcbiAgICAgIGNhc2UgJ3Vjcy0yJzpcbiAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgICAgY2FzZSAndXRmLTE2bGUnOlxuICAgICAgICByZXR1cm4gbGVuICogMlxuICAgICAgY2FzZSAnaGV4JzpcbiAgICAgICAgcmV0dXJuIGxlbiA+Pj4gMVxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgcmV0dXJuIGJhc2U2NFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgcmV0dXJuIHV0ZjhUb0J5dGVzKHN0cmluZykubGVuZ3RoIC8vIGFzc3VtZSB1dGY4XG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5CdWZmZXIuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcblxuZnVuY3Rpb24gc2xvd1RvU3RyaW5nIChlbmNvZGluZywgc3RhcnQsIGVuZCkge1xuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuXG4gIHN0YXJ0ID0gc3RhcnQgfCAwXG4gIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkIHx8IGVuZCA9PT0gSW5maW5pdHkgPyB0aGlzLmxlbmd0aCA6IGVuZCB8IDBcblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgaWYgKGVuZCA+IHRoaXMubGVuZ3RoKSBlbmQgPSB0aGlzLmxlbmd0aFxuICBpZiAoZW5kIDw9IHN0YXJ0KSByZXR1cm4gJydcblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBiaW5hcnlTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0U2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAndWNzMic6XG4gICAgICBjYXNlICd1Y3MtMic6XG4gICAgICBjYXNlICd1dGYxNmxlJzpcbiAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAobG93ZXJlZENhc2UpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgICAgICAgZW5jb2RpbmcgPSAoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKVxuICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcbiAgICB9XG4gIH1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nICgpIHtcbiAgdmFyIGxlbmd0aCA9IHRoaXMubGVuZ3RoIHwgMFxuICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJydcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKVxuICByZXR1cm4gc2xvd1RvU3RyaW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMgKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIHRydWVcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkge1xuICB2YXIgc3RyID0gJydcbiAgdmFyIG1heCA9IGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVNcbiAgaWYgKHRoaXMubGVuZ3RoID4gMCkge1xuICAgIHN0ciA9IHRoaXMudG9TdHJpbmcoJ2hleCcsIDAsIG1heCkubWF0Y2goLy57Mn0vZykuam9pbignICcpXG4gICAgaWYgKHRoaXMubGVuZ3RoID4gbWF4KSBzdHIgKz0gJyAuLi4gJ1xuICB9XG4gIHJldHVybiAnPEJ1ZmZlciAnICsgc3RyICsgJz4nXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIDBcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCkge1xuICBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIGJ5dGVPZmZzZXQgPSAweDdmZmZmZmZmXG4gIGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAtMHg4MDAwMDAwMCkgYnl0ZU9mZnNldCA9IC0weDgwMDAwMDAwXG4gIGJ5dGVPZmZzZXQgPj49IDBcblxuICBpZiAodGhpcy5sZW5ndGggPT09IDApIHJldHVybiAtMVxuICBpZiAoYnl0ZU9mZnNldCA+PSB0aGlzLmxlbmd0aCkgcmV0dXJuIC0xXG5cbiAgLy8gTmVnYXRpdmUgb2Zmc2V0cyBzdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlclxuICBpZiAoYnl0ZU9mZnNldCA8IDApIGJ5dGVPZmZzZXQgPSBNYXRoLm1heCh0aGlzLmxlbmd0aCArIGJ5dGVPZmZzZXQsIDApXG5cbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHJldHVybiAtMSAvLyBzcGVjaWFsIGNhc2U6IGxvb2tpbmcgZm9yIGVtcHR5IHN0cmluZyBhbHdheXMgZmFpbHNcbiAgICByZXR1cm4gU3RyaW5nLnByb3RvdHlwZS5pbmRleE9mLmNhbGwodGhpcywgdmFsLCBieXRlT2Zmc2V0KVxuICB9XG4gIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuICAgIHJldHVybiBhcnJheUluZGV4T2YodGhpcywgdmFsLCBieXRlT2Zmc2V0KVxuICB9XG4gIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJykge1xuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHRoaXMsIHZhbCwgYnl0ZU9mZnNldClcbiAgICB9XG4gICAgcmV0dXJuIGFycmF5SW5kZXhPZih0aGlzLCBbIHZhbCBdLCBieXRlT2Zmc2V0KVxuICB9XG5cbiAgZnVuY3Rpb24gYXJyYXlJbmRleE9mIChhcnIsIHZhbCwgYnl0ZU9mZnNldCkge1xuICAgIHZhciBmb3VuZEluZGV4ID0gLTFcbiAgICBmb3IgKHZhciBpID0gMDsgYnl0ZU9mZnNldCArIGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChhcnJbYnl0ZU9mZnNldCArIGldID09PSB2YWxbZm91bmRJbmRleCA9PT0gLTEgPyAwIDogaSAtIGZvdW5kSW5kZXhdKSB7XG4gICAgICAgIGlmIChmb3VuZEluZGV4ID09PSAtMSkgZm91bmRJbmRleCA9IGlcbiAgICAgICAgaWYgKGkgLSBmb3VuZEluZGV4ICsgMSA9PT0gdmFsLmxlbmd0aCkgcmV0dXJuIGJ5dGVPZmZzZXQgKyBmb3VuZEluZGV4XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBmb3VuZEluZGV4ID0gLTFcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIC0xXG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXInKVxufVxuXG4vLyBgZ2V0YCBpcyBkZXByZWNhdGVkXG5CdWZmZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIGdldCAob2Zmc2V0KSB7XG4gIGNvbnNvbGUubG9nKCcuZ2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC4nKVxuICByZXR1cm4gdGhpcy5yZWFkVUludDgob2Zmc2V0KVxufVxuXG4vLyBgc2V0YCBpcyBkZXByZWNhdGVkXG5CdWZmZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIHNldCAodiwgb2Zmc2V0KSB7XG4gIGNvbnNvbGUubG9nKCcuc2V0KCkgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHVzaW5nIGFycmF5IGluZGV4ZXMgaW5zdGVhZC4nKVxuICByZXR1cm4gdGhpcy53cml0ZVVJbnQ4KHYsIG9mZnNldClcbn1cblxuZnVuY3Rpb24gaGV4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICBvZmZzZXQgPSBOdW1iZXIob2Zmc2V0KSB8fCAwXG4gIHZhciByZW1haW5pbmcgPSBidWYubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmICghbGVuZ3RoKSB7XG4gICAgbGVuZ3RoID0gcmVtYWluaW5nXG4gIH0gZWxzZSB7XG4gICAgbGVuZ3RoID0gTnVtYmVyKGxlbmd0aClcbiAgICBpZiAobGVuZ3RoID4gcmVtYWluaW5nKSB7XG4gICAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgICB9XG4gIH1cblxuICAvLyBtdXN0IGJlIGFuIGV2ZW4gbnVtYmVyIG9mIGRpZ2l0c1xuICB2YXIgc3RyTGVuID0gc3RyaW5nLmxlbmd0aFxuICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGhleCBzdHJpbmcnKVxuXG4gIGlmIChsZW5ndGggPiBzdHJMZW4gLyAyKSB7XG4gICAgbGVuZ3RoID0gc3RyTGVuIC8gMlxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KVxuICAgIGlmIChpc05hTihwYXJzZWQpKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgaGV4IHN0cmluZycpXG4gICAgYnVmW29mZnNldCArIGldID0gcGFyc2VkXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuZnVuY3Rpb24gdXRmOFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBiaW5hcnlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBhc2NpaVdyaXRlKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYmFzZTY0V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIHVjczJXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHtcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZylcbiAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCdcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpXG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IG9mZnNldFxuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKVxuICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gICAgaWYgKGlzRmluaXRlKGxlbmd0aCkpIHtcbiAgICAgIGxlbmd0aCA9IGxlbmd0aCB8IDBcbiAgICAgIGlmIChlbmNvZGluZyA9PT0gdW5kZWZpbmVkKSBlbmNvZGluZyA9ICd1dGY4J1xuICAgIH0gZWxzZSB7XG4gICAgICBlbmNvZGluZyA9IGxlbmd0aFxuICAgICAgbGVuZ3RoID0gdW5kZWZpbmVkXG4gICAgfVxuICAvLyBsZWdhY3kgd3JpdGUoc3RyaW5nLCBlbmNvZGluZywgb2Zmc2V0LCBsZW5ndGgpIC0gcmVtb3ZlIGluIHYwLjEzXG4gIH0gZWxzZSB7XG4gICAgdmFyIHN3YXAgPSBlbmNvZGluZ1xuICAgIGVuY29kaW5nID0gb2Zmc2V0XG4gICAgb2Zmc2V0ID0gbGVuZ3RoIHwgMFxuICAgIGxlbmd0aCA9IHN3YXBcbiAgfVxuXG4gIHZhciByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldFxuICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgfHwgbGVuZ3RoID4gcmVtYWluaW5nKSBsZW5ndGggPSByZW1haW5pbmdcblxuICBpZiAoKHN0cmluZy5sZW5ndGggPiAwICYmIChsZW5ndGggPCAwIHx8IG9mZnNldCA8IDApKSB8fCBvZmZzZXQgPiB0aGlzLmxlbmd0aCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdhdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcycpXG4gIH1cblxuICBpZiAoIWVuY29kaW5nKSBlbmNvZGluZyA9ICd1dGY4J1xuXG4gIHZhciBsb3dlcmVkQ2FzZSA9IGZhbHNlXG4gIGZvciAoOzspIHtcbiAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAndXRmOCc6XG4gICAgICBjYXNlICd1dGYtOCc6XG4gICAgICAgIHJldHVybiB1dGY4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gYmluYXJ5V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgLy8gV2FybmluZzogbWF4TGVuZ3RoIG5vdCB0YWtlbiBpbnRvIGFjY291bnQgaW4gYmFzZTY0V3JpdGVcbiAgICAgICAgcmV0dXJuIGJhc2U2NFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnQnVmZmVyJyxcbiAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMClcbiAgfVxufVxuXG5mdW5jdGlvbiBiYXNlNjRTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGlmIChzdGFydCA9PT0gMCAmJiBlbmQgPT09IGJ1Zi5sZW5ndGgpIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpXG4gIH1cbn1cblxuZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuICB2YXIgcmVzID0gW11cblxuICB2YXIgaSA9IHN0YXJ0XG4gIHdoaWxlIChpIDwgZW5kKSB7XG4gICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXVxuICAgIHZhciBjb2RlUG9pbnQgPSBudWxsXG4gICAgdmFyIGJ5dGVzUGVyU2VxdWVuY2UgPSAoZmlyc3RCeXRlID4gMHhFRikgPyA0XG4gICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDNcbiAgICAgIDogKGZpcnN0Qnl0ZSA+IDB4QkYpID8gMlxuICAgICAgOiAxXG5cbiAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPD0gZW5kKSB7XG4gICAgICB2YXIgc2Vjb25kQnl0ZSwgdGhpcmRCeXRlLCBmb3VydGhCeXRlLCB0ZW1wQ29kZVBvaW50XG5cbiAgICAgIHN3aXRjaCAoYnl0ZXNQZXJTZXF1ZW5jZSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHtcbiAgICAgICAgICAgIGNvZGVQb2ludCA9IGZpcnN0Qnl0ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweDFGKSA8PCAweDYgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0YpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHhDIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAodGhpcmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RkYgJiYgKHRlbXBDb2RlUG9pbnQgPCAweEQ4MDAgfHwgdGVtcENvZGVQb2ludCA+IDB4REZGRikpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgZm91cnRoQnl0ZSA9IGJ1ZltpICsgM11cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4MTIgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4QyB8ICh0aGlyZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAoZm91cnRoQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4RkZGRiAmJiB0ZW1wQ29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7XG4gICAgICAvLyB3ZSBkaWQgbm90IGdlbmVyYXRlIGEgdmFsaWQgY29kZVBvaW50IHNvIGluc2VydCBhXG4gICAgICAvLyByZXBsYWNlbWVudCBjaGFyIChVK0ZGRkQpIGFuZCBhZHZhbmNlIG9ubHkgMSBieXRlXG4gICAgICBjb2RlUG9pbnQgPSAweEZGRkRcbiAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPiAweEZGRkYpIHtcbiAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpXG4gICAgICBjb2RlUG9pbnQgLT0gMHgxMDAwMFxuICAgICAgcmVzLnB1c2goY29kZVBvaW50ID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKVxuICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkZcbiAgICB9XG5cbiAgICByZXMucHVzaChjb2RlUG9pbnQpXG4gICAgaSArPSBieXRlc1BlclNlcXVlbmNlXG4gIH1cblxuICByZXR1cm4gZGVjb2RlQ29kZVBvaW50c0FycmF5KHJlcylcbn1cblxuLy8gQmFzZWQgb24gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjI3NDcyNzIvNjgwNzQyLCB0aGUgYnJvd3NlciB3aXRoXG4vLyB0aGUgbG93ZXN0IGxpbWl0IGlzIENocm9tZSwgd2l0aCAweDEwMDAwIGFyZ3MuXG4vLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5XG52YXIgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDBcblxuZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7XG4gIHZhciBsZW4gPSBjb2RlUG9pbnRzLmxlbmd0aFxuICBpZiAobGVuIDw9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpXG4gIH1cblxuICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkIFwiY2FsbCBzdGFjayBzaXplIGV4Y2VlZGVkXCIuXG4gIHZhciByZXMgPSAnJ1xuICB2YXIgaSA9IDBcbiAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShcbiAgICAgIFN0cmluZyxcbiAgICAgIGNvZGVQb2ludHMuc2xpY2UoaSwgaSArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSClcbiAgICApXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkrKykge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBiaW5hcnlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBoZXhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSBidWYubGVuZ3RoXG5cbiAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuXG5cbiAgdmFyIG91dCA9ICcnXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgb3V0ICs9IHRvSGV4KGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gb3V0XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKVxuICB2YXIgcmVzID0gJydcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgYnl0ZXNbaSArIDFdICogMjU2KVxuICB9XG4gIHJldHVybiByZXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zbGljZSA9IGZ1bmN0aW9uIHNsaWNlIChzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBzdGFydCA9IH5+c3RhcnRcbiAgZW5kID0gZW5kID09PSB1bmRlZmluZWQgPyBsZW4gOiB+fmVuZFxuXG4gIGlmIChzdGFydCA8IDApIHtcbiAgICBzdGFydCArPSBsZW5cbiAgICBpZiAoc3RhcnQgPCAwKSBzdGFydCA9IDBcbiAgfSBlbHNlIGlmIChzdGFydCA+IGxlbikge1xuICAgIHN0YXJ0ID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgMCkge1xuICAgIGVuZCArPSBsZW5cbiAgICBpZiAoZW5kIDwgMCkgZW5kID0gMFxuICB9IGVsc2UgaWYgKGVuZCA+IGxlbikge1xuICAgIGVuZCA9IGxlblxuICB9XG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIHZhciBuZXdCdWZcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgbmV3QnVmID0gQnVmZmVyLl9hdWdtZW50KHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZCkpXG4gIH0gZWxzZSB7XG4gICAgdmFyIHNsaWNlTGVuID0gZW5kIC0gc3RhcnRcbiAgICBuZXdCdWYgPSBuZXcgQnVmZmVyKHNsaWNlTGVuLCB1bmRlZmluZWQpXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzbGljZUxlbjsgaSsrKSB7XG4gICAgICBuZXdCdWZbaV0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH1cblxuICBpZiAobmV3QnVmLmxlbmd0aCkgbmV3QnVmLnBhcmVudCA9IHRoaXMucGFyZW50IHx8IHRoaXNcblxuICByZXR1cm4gbmV3QnVmXG59XG5cbi8qXG4gKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy5cbiAqL1xuZnVuY3Rpb24gY2hlY2tPZmZzZXQgKG9mZnNldCwgZXh0LCBsZW5ndGgpIHtcbiAgaWYgKChvZmZzZXQgJSAxKSAhPT0gMCB8fCBvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignb2Zmc2V0IGlzIG5vdCB1aW50JylcbiAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxuICB2YXIgbXVsID0gMVxuICB2YXIgaSA9IDBcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxuICB9XG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50QkUgPSBmdW5jdGlvbiByZWFkVUludEJFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuICB9XG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXVxuICB2YXIgbXVsID0gMVxuICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gcmVhZFVJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiB0aGlzW29mZnNldF1cbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2TEUgPSBmdW5jdGlvbiByZWFkVUludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDgpIHwgdGhpc1tvZmZzZXQgKyAxXVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgMTYpKSArXG4gICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSAqIDB4MTAwMDAwMCkgK1xuICAgICgodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcbiAgICB0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRMRSA9IGZ1bmN0aW9uIHJlYWRJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIHJlYWRJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aFxuICB2YXIgbXVsID0gMVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWldXG4gIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQ4ID0gZnVuY3Rpb24gcmVhZEludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcbiAgaWYgKCEodGhpc1tvZmZzZXRdICYgMHg4MCkpIHJldHVybiAodGhpc1tvZmZzZXRdKVxuICByZXR1cm4gKCgweGZmIC0gdGhpc1tvZmZzZXRdICsgMSkgKiAtMSlcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZMRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkUgPSBmdW5jdGlvbiByZWFkSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAxXSB8ICh0aGlzW29mZnNldF0gPDwgOClcbiAgcmV0dXJuICh2YWwgJiAweDgwMDApID8gdmFsIHwgMHhGRkZGMDAwMCA6IHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkxFID0gZnVuY3Rpb24gcmVhZEludDMyTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfFxuICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gcmVhZEludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlTEUgPSBmdW5jdGlvbiByZWFkRG91YmxlTEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDUyLCA4KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDgsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxufVxuXG5mdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKGJ1ZikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2J1ZmZlciBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJylcbiAgaWYgKHZhbHVlID4gbWF4IHx8IHZhbHVlIDwgbWluKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndmFsdWUgaXMgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCksIDApXG5cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlVUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCksIDApXG5cbiAgdmFyIGkgPSBieXRlTGVuZ3RoIC0gMVxuICB2YXIgbXVsID0gMVxuICB0aGlzW29mZnNldCArIGldID0gdmFsdWUgJiAweEZGXG4gIHdoaWxlICgtLWkgPj0gMCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAodmFsdWUgLyBtdWwpICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVVSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKVxuICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDE2IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZiArIHZhbHVlICsgMVxuICBmb3IgKHZhciBpID0gMCwgaiA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBvZmZzZXQsIDIpOyBpIDwgajsgaSsrKSB7XG4gICAgYnVmW29mZnNldCArIGldID0gKHZhbHVlICYgKDB4ZmYgPDwgKDggKiAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSkpKSA+Pj5cbiAgICAgIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpICogOFxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlVUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHhmZmZmLCAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSlcbiAgfVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDMyIChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCA0KTsgaSA8IGo7IGkrKykge1xuICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmZcbiAgfVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZVVJbnQzMkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICAgIHRoaXNbb2Zmc2V0ICsgMl0gPSAodmFsdWUgPj4+IDE2KVxuICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlVUludDMyQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHhmZmZmZmZmZiwgMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSAwXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSB2YWx1ZSA8IDAgPyAxIDogMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IHZhbHVlIDwgMCA/IDEgOiAwXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICgodmFsdWUgLyBtdWwpID4+IDApIC0gc3ViICYgMHhGRlxuICB9XG5cbiAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHg3ZiwgLTB4ODApXG4gIGlmICghQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHZhbHVlID0gTWF0aC5mbG9vcih2YWx1ZSlcbiAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmICsgdmFsdWUgKyAxXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyAxXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4N2ZmZiwgLTB4ODAwMClcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZUludDE2QkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIH0gZWxzZSB7XG4gICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXG4gIH1cbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCB8IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlID4+PiAyNClcbiAgfSBlbHNlIHtcbiAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgfCAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmZmZmZmZmYgKyB2YWx1ZSArIDFcbiAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcbiAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxuICB9IGVsc2Uge1xuICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxuICB9XG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbmZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3ZhbHVlIGlzIG91dCBvZiBib3VuZHMnKVxuICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2luZGV4IG91dCBvZiByYW5nZScpXG4gIGlmIChvZmZzZXQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignaW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuZnVuY3Rpb24gd3JpdGVGbG9hdCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA0LCAzLjQwMjgyMzQ2NjM4NTI4ODZlKzM4LCAtMy40MDI4MjM0NjYzODUyODg2ZSszOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNClcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG5mdW5jdGlvbiB3cml0ZURvdWJsZSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA4LCAxLjc5NzY5MzEzNDg2MjMxNTdFKzMwOCwgLTEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4KVxuICB9XG4gIGllZWU3NTQud3JpdGUoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIDUyLCA4KVxuICByZXR1cm4gb2Zmc2V0ICsgOFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlTEUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUxFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZURvdWJsZSh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSwgbm9Bc3NlcnQpXG59XG5cbi8vIGNvcHkodGFyZ2V0QnVmZmVyLCB0YXJnZXRTdGFydD0wLCBzb3VyY2VTdGFydD0wLCBzb3VyY2VFbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHtcbiAgaWYgKCFzdGFydCkgc3RhcnQgPSAwXG4gIGlmICghZW5kICYmIGVuZCAhPT0gMCkgZW5kID0gdGhpcy5sZW5ndGhcbiAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aFxuICBpZiAoIXRhcmdldFN0YXJ0KSB0YXJnZXRTdGFydCA9IDBcbiAgaWYgKGVuZCA+IDAgJiYgZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgLy8gQ29weSAwIGJ5dGVzOyB3ZSdyZSBkb25lXG4gIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMFxuICBpZiAodGFyZ2V0Lmxlbmd0aCA9PT0gMCB8fCB0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIDBcblxuICAvLyBGYXRhbCBlcnJvciBjb25kaXRpb25zXG4gIGlmICh0YXJnZXRTdGFydCA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcigndGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcycpXG4gIH1cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJylcblxuICAvLyBBcmUgd2Ugb29iP1xuICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgPCBlbmQgLSBzdGFydCkge1xuICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0XG4gIH1cblxuICB2YXIgbGVuID0gZW5kIC0gc3RhcnRcbiAgdmFyIGlcblxuICBpZiAodGhpcyA9PT0gdGFyZ2V0ICYmIHN0YXJ0IDwgdGFyZ2V0U3RhcnQgJiYgdGFyZ2V0U3RhcnQgPCBlbmQpIHtcbiAgICAvLyBkZXNjZW5kaW5nIGNvcHkgZnJvbSBlbmRcbiAgICBmb3IgKGkgPSBsZW4gLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH0gZWxzZSBpZiAobGVuIDwgMTAwMCB8fCAhQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcbiAgICAvLyBhc2NlbmRpbmcgY29weSBmcm9tIHN0YXJ0XG4gICAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQuX3NldCh0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksIHRhcmdldFN0YXJ0KVxuICB9XG5cbiAgcmV0dXJuIGxlblxufVxuXG4vLyBmaWxsKHZhbHVlLCBzdGFydD0wLCBlbmQ9YnVmZmVyLmxlbmd0aClcbkJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwgKHZhbHVlLCBzdGFydCwgZW5kKSB7XG4gIGlmICghdmFsdWUpIHZhbHVlID0gMFxuICBpZiAoIXN0YXJ0KSBzdGFydCA9IDBcbiAgaWYgKCFlbmQpIGVuZCA9IHRoaXMubGVuZ3RoXG5cbiAgaWYgKGVuZCA8IHN0YXJ0KSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignZW5kIDwgc3RhcnQnKVxuXG4gIC8vIEZpbGwgMCBieXRlczsgd2UncmUgZG9uZVxuICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuXG4gIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkgcmV0dXJuXG5cbiAgaWYgKHN0YXJ0IDwgMCB8fCBzdGFydCA+PSB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3N0YXJ0IG91dCBvZiBib3VuZHMnKVxuICBpZiAoZW5kIDwgMCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ2VuZCBvdXQgb2YgYm91bmRzJylcblxuICB2YXIgaVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIGZvciAoaSA9IHN0YXJ0OyBpIDwgZW5kOyBpKyspIHtcbiAgICAgIHRoaXNbaV0gPSB2YWx1ZVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgYnl0ZXMgPSB1dGY4VG9CeXRlcyh2YWx1ZS50b1N0cmluZygpKVxuICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGhcbiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICB0aGlzW2ldID0gYnl0ZXNbaSAlIGxlbl1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGhpc1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgYEFycmF5QnVmZmVyYCB3aXRoIHRoZSAqY29waWVkKiBtZW1vcnkgb2YgdGhlIGJ1ZmZlciBpbnN0YW5jZS5cbiAqIEFkZGVkIGluIE5vZGUgMC4xMi4gT25seSBhdmFpbGFibGUgaW4gYnJvd3NlcnMgdGhhdCBzdXBwb3J0IEFycmF5QnVmZmVyLlxuICovXG5CdWZmZXIucHJvdG90eXBlLnRvQXJyYXlCdWZmZXIgPSBmdW5jdGlvbiB0b0FycmF5QnVmZmVyICgpIHtcbiAgaWYgKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJykge1xuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xuICAgICAgcmV0dXJuIChuZXcgQnVmZmVyKHRoaXMpKS5idWZmZXJcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGJ1ZiA9IG5ldyBVaW50OEFycmF5KHRoaXMubGVuZ3RoKVxuICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGJ1Zi5sZW5ndGg7IGkgPCBsZW47IGkgKz0gMSkge1xuICAgICAgICBidWZbaV0gPSB0aGlzW2ldXG4gICAgICB9XG4gICAgICByZXR1cm4gYnVmLmJ1ZmZlclxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCdWZmZXIudG9BcnJheUJ1ZmZlciBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlcicpXG4gIH1cbn1cblxuLy8gSEVMUEVSIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PVxuXG52YXIgQlAgPSBCdWZmZXIucHJvdG90eXBlXG5cbi8qKlxuICogQXVnbWVudCBhIFVpbnQ4QXJyYXkgKmluc3RhbmNlKiAobm90IHRoZSBVaW50OEFycmF5IGNsYXNzISkgd2l0aCBCdWZmZXIgbWV0aG9kc1xuICovXG5CdWZmZXIuX2F1Z21lbnQgPSBmdW5jdGlvbiBfYXVnbWVudCAoYXJyKSB7XG4gIGFyci5jb25zdHJ1Y3RvciA9IEJ1ZmZlclxuICBhcnIuX2lzQnVmZmVyID0gdHJ1ZVxuXG4gIC8vIHNhdmUgcmVmZXJlbmNlIHRvIG9yaWdpbmFsIFVpbnQ4QXJyYXkgc2V0IG1ldGhvZCBiZWZvcmUgb3ZlcndyaXRpbmdcbiAgYXJyLl9zZXQgPSBhcnIuc2V0XG5cbiAgLy8gZGVwcmVjYXRlZFxuICBhcnIuZ2V0ID0gQlAuZ2V0XG4gIGFyci5zZXQgPSBCUC5zZXRcblxuICBhcnIud3JpdGUgPSBCUC53cml0ZVxuICBhcnIudG9TdHJpbmcgPSBCUC50b1N0cmluZ1xuICBhcnIudG9Mb2NhbGVTdHJpbmcgPSBCUC50b1N0cmluZ1xuICBhcnIudG9KU09OID0gQlAudG9KU09OXG4gIGFyci5lcXVhbHMgPSBCUC5lcXVhbHNcbiAgYXJyLmNvbXBhcmUgPSBCUC5jb21wYXJlXG4gIGFyci5pbmRleE9mID0gQlAuaW5kZXhPZlxuICBhcnIuY29weSA9IEJQLmNvcHlcbiAgYXJyLnNsaWNlID0gQlAuc2xpY2VcbiAgYXJyLnJlYWRVSW50TEUgPSBCUC5yZWFkVUludExFXG4gIGFyci5yZWFkVUludEJFID0gQlAucmVhZFVJbnRCRVxuICBhcnIucmVhZFVJbnQ4ID0gQlAucmVhZFVJbnQ4XG4gIGFyci5yZWFkVUludDE2TEUgPSBCUC5yZWFkVUludDE2TEVcbiAgYXJyLnJlYWRVSW50MTZCRSA9IEJQLnJlYWRVSW50MTZCRVxuICBhcnIucmVhZFVJbnQzMkxFID0gQlAucmVhZFVJbnQzMkxFXG4gIGFyci5yZWFkVUludDMyQkUgPSBCUC5yZWFkVUludDMyQkVcbiAgYXJyLnJlYWRJbnRMRSA9IEJQLnJlYWRJbnRMRVxuICBhcnIucmVhZEludEJFID0gQlAucmVhZEludEJFXG4gIGFyci5yZWFkSW50OCA9IEJQLnJlYWRJbnQ4XG4gIGFyci5yZWFkSW50MTZMRSA9IEJQLnJlYWRJbnQxNkxFXG4gIGFyci5yZWFkSW50MTZCRSA9IEJQLnJlYWRJbnQxNkJFXG4gIGFyci5yZWFkSW50MzJMRSA9IEJQLnJlYWRJbnQzMkxFXG4gIGFyci5yZWFkSW50MzJCRSA9IEJQLnJlYWRJbnQzMkJFXG4gIGFyci5yZWFkRmxvYXRMRSA9IEJQLnJlYWRGbG9hdExFXG4gIGFyci5yZWFkRmxvYXRCRSA9IEJQLnJlYWRGbG9hdEJFXG4gIGFyci5yZWFkRG91YmxlTEUgPSBCUC5yZWFkRG91YmxlTEVcbiAgYXJyLnJlYWREb3VibGVCRSA9IEJQLnJlYWREb3VibGVCRVxuICBhcnIud3JpdGVVSW50OCA9IEJQLndyaXRlVUludDhcbiAgYXJyLndyaXRlVUludExFID0gQlAud3JpdGVVSW50TEVcbiAgYXJyLndyaXRlVUludEJFID0gQlAud3JpdGVVSW50QkVcbiAgYXJyLndyaXRlVUludDE2TEUgPSBCUC53cml0ZVVJbnQxNkxFXG4gIGFyci53cml0ZVVJbnQxNkJFID0gQlAud3JpdGVVSW50MTZCRVxuICBhcnIud3JpdGVVSW50MzJMRSA9IEJQLndyaXRlVUludDMyTEVcbiAgYXJyLndyaXRlVUludDMyQkUgPSBCUC53cml0ZVVJbnQzMkJFXG4gIGFyci53cml0ZUludExFID0gQlAud3JpdGVJbnRMRVxuICBhcnIud3JpdGVJbnRCRSA9IEJQLndyaXRlSW50QkVcbiAgYXJyLndyaXRlSW50OCA9IEJQLndyaXRlSW50OFxuICBhcnIud3JpdGVJbnQxNkxFID0gQlAud3JpdGVJbnQxNkxFXG4gIGFyci53cml0ZUludDE2QkUgPSBCUC53cml0ZUludDE2QkVcbiAgYXJyLndyaXRlSW50MzJMRSA9IEJQLndyaXRlSW50MzJMRVxuICBhcnIud3JpdGVJbnQzMkJFID0gQlAud3JpdGVJbnQzMkJFXG4gIGFyci53cml0ZUZsb2F0TEUgPSBCUC53cml0ZUZsb2F0TEVcbiAgYXJyLndyaXRlRmxvYXRCRSA9IEJQLndyaXRlRmxvYXRCRVxuICBhcnIud3JpdGVEb3VibGVMRSA9IEJQLndyaXRlRG91YmxlTEVcbiAgYXJyLndyaXRlRG91YmxlQkUgPSBCUC53cml0ZURvdWJsZUJFXG4gIGFyci5maWxsID0gQlAuZmlsbFxuICBhcnIuaW5zcGVjdCA9IEJQLmluc3BlY3RcbiAgYXJyLnRvQXJyYXlCdWZmZXIgPSBCUC50b0FycmF5QnVmZmVyXG5cbiAgcmV0dXJuIGFyclxufVxuXG52YXIgSU5WQUxJRF9CQVNFNjRfUkUgPSAvW14rXFwvMC05QS1aYS16LV9dL2dcblxuZnVuY3Rpb24gYmFzZTY0Y2xlYW4gKHN0cikge1xuICAvLyBOb2RlIHN0cmlwcyBvdXQgaW52YWxpZCBjaGFyYWN0ZXJzIGxpa2UgXFxuIGFuZCBcXHQgZnJvbSB0aGUgc3RyaW5nLCBiYXNlNjQtanMgZG9lcyBub3RcbiAgc3RyID0gc3RyaW5ndHJpbShzdHIpLnJlcGxhY2UoSU5WQUxJRF9CQVNFNjRfUkUsICcnKVxuICAvLyBOb2RlIGNvbnZlcnRzIHN0cmluZ3Mgd2l0aCBsZW5ndGggPCAyIHRvICcnXG4gIGlmIChzdHIubGVuZ3RoIDwgMikgcmV0dXJuICcnXG4gIC8vIE5vZGUgYWxsb3dzIGZvciBub24tcGFkZGVkIGJhc2U2NCBzdHJpbmdzIChtaXNzaW5nIHRyYWlsaW5nID09PSksIGJhc2U2NC1qcyBkb2VzIG5vdFxuICB3aGlsZSAoc3RyLmxlbmd0aCAlIDQgIT09IDApIHtcbiAgICBzdHIgPSBzdHIgKyAnPSdcbiAgfVxuICByZXR1cm4gc3RyXG59XG5cbmZ1bmN0aW9uIHN0cmluZ3RyaW0gKHN0cikge1xuICBpZiAoc3RyLnRyaW0pIHJldHVybiBzdHIudHJpbSgpXG4gIHJldHVybiBzdHIucmVwbGFjZSgvXlxccyt8XFxzKyQvZywgJycpXG59XG5cbmZ1bmN0aW9uIHRvSGV4IChuKSB7XG4gIGlmIChuIDwgMTYpIHJldHVybiAnMCcgKyBuLnRvU3RyaW5nKDE2KVxuICByZXR1cm4gbi50b1N0cmluZygxNilcbn1cblxuZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHtcbiAgdW5pdHMgPSB1bml0cyB8fCBJbmZpbml0eVxuICB2YXIgY29kZVBvaW50XG4gIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoXG4gIHZhciBsZWFkU3Vycm9nYXRlID0gbnVsbFxuICB2YXIgYnl0ZXMgPSBbXVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBjb2RlUG9pbnQgPSBzdHJpbmcuY2hhckNvZGVBdChpKVxuXG4gICAgLy8gaXMgc3Vycm9nYXRlIGNvbXBvbmVudFxuICAgIGlmIChjb2RlUG9pbnQgPiAweEQ3RkYgJiYgY29kZVBvaW50IDwgMHhFMDAwKSB7XG4gICAgICAvLyBsYXN0IGNoYXIgd2FzIGEgbGVhZFxuICAgICAgaWYgKCFsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAgIC8vIG5vIGxlYWQgeWV0XG4gICAgICAgIGlmIChjb2RlUG9pbnQgPiAweERCRkYpIHtcbiAgICAgICAgICAvLyB1bmV4cGVjdGVkIHRyYWlsXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfSBlbHNlIGlmIChpICsgMSA9PT0gbGVuZ3RoKSB7XG4gICAgICAgICAgLy8gdW5wYWlyZWQgbGVhZFxuICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICAgIGNvbnRpbnVlXG4gICAgICAgIH1cblxuICAgICAgICAvLyB2YWxpZCBsZWFkXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcblxuICAgICAgICBjb250aW51ZVxuICAgICAgfVxuXG4gICAgICAvLyAyIGxlYWRzIGluIGEgcm93XG4gICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XG4gICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyXG4gICAgICBjb2RlUG9pbnQgPSAobGVhZFN1cnJvZ2F0ZSAtIDB4RDgwMCA8PCAxMCB8IGNvZGVQb2ludCAtIDB4REMwMCkgKyAweDEwMDAwXG4gICAgfSBlbHNlIGlmIChsZWFkU3Vycm9nYXRlKSB7XG4gICAgICAvLyB2YWxpZCBibXAgY2hhciwgYnV0IGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICB9XG5cbiAgICBsZWFkU3Vycm9nYXRlID0gbnVsbFxuXG4gICAgLy8gZW5jb2RlIHV0ZjhcbiAgICBpZiAoY29kZVBvaW50IDwgMHg4MCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAxKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKGNvZGVQb2ludClcbiAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4ODAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDIpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgfCAweEMwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDIHwgMHhFMCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4MTIgfCAweEYwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHhDICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcbiAgICAgIClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGNvZGUgcG9pbnQnKVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBieXRlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVRvQnl0ZXMgKHN0cikge1xuICB2YXIgYnl0ZUFycmF5ID0gW11cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcbiAgICAvLyBOb2RlJ3MgY29kZSBzZWVtcyB0byBiZSBkb2luZyB0aGlzIGFuZCBub3QgJiAweDdGLi5cbiAgICBieXRlQXJyYXkucHVzaChzdHIuY2hhckNvZGVBdChpKSAmIDB4RkYpXG4gIH1cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xuICB2YXIgYywgaGksIGxvXG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xuICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuXG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpXG4gICAgaGkgPSBjID4+IDhcbiAgICBsbyA9IGMgJSAyNTZcbiAgICBieXRlQXJyYXkucHVzaChsbylcbiAgICBieXRlQXJyYXkucHVzaChoaSlcbiAgfVxuXG4gIHJldHVybiBieXRlQXJyYXlcbn1cblxuZnVuY3Rpb24gYmFzZTY0VG9CeXRlcyAoc3RyKSB7XG4gIHJldHVybiBiYXNlNjQudG9CeXRlQXJyYXkoYmFzZTY0Y2xlYW4oc3RyKSlcbn1cblxuZnVuY3Rpb24gYmxpdEJ1ZmZlciAoc3JjLCBkc3QsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoKGkgKyBvZmZzZXQgPj0gZHN0Lmxlbmd0aCkgfHwgKGkgPj0gc3JjLmxlbmd0aCkpIGJyZWFrXG4gICAgZHN0W2kgKyBvZmZzZXRdID0gc3JjW2ldXG4gIH1cbiAgcmV0dXJuIGlcbn1cbiIsInZhciBsb29rdXAgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7XG5cbjsoZnVuY3Rpb24gKGV4cG9ydHMpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG4gIHZhciBBcnIgPSAodHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnKVxuICAgID8gVWludDhBcnJheVxuICAgIDogQXJyYXlcblxuXHR2YXIgUExVUyAgID0gJysnLmNoYXJDb2RlQXQoMClcblx0dmFyIFNMQVNIICA9ICcvJy5jaGFyQ29kZUF0KDApXG5cdHZhciBOVU1CRVIgPSAnMCcuY2hhckNvZGVBdCgwKVxuXHR2YXIgTE9XRVIgID0gJ2EnLmNoYXJDb2RlQXQoMClcblx0dmFyIFVQUEVSICA9ICdBJy5jaGFyQ29kZUF0KDApXG5cdHZhciBQTFVTX1VSTF9TQUZFID0gJy0nLmNoYXJDb2RlQXQoMClcblx0dmFyIFNMQVNIX1VSTF9TQUZFID0gJ18nLmNoYXJDb2RlQXQoMClcblxuXHRmdW5jdGlvbiBkZWNvZGUgKGVsdCkge1xuXHRcdHZhciBjb2RlID0gZWx0LmNoYXJDb2RlQXQoMClcblx0XHRpZiAoY29kZSA9PT0gUExVUyB8fFxuXHRcdCAgICBjb2RlID09PSBQTFVTX1VSTF9TQUZFKVxuXHRcdFx0cmV0dXJuIDYyIC8vICcrJ1xuXHRcdGlmIChjb2RlID09PSBTTEFTSCB8fFxuXHRcdCAgICBjb2RlID09PSBTTEFTSF9VUkxfU0FGRSlcblx0XHRcdHJldHVybiA2MyAvLyAnLydcblx0XHRpZiAoY29kZSA8IE5VTUJFUilcblx0XHRcdHJldHVybiAtMSAvL25vIG1hdGNoXG5cdFx0aWYgKGNvZGUgPCBOVU1CRVIgKyAxMClcblx0XHRcdHJldHVybiBjb2RlIC0gTlVNQkVSICsgMjYgKyAyNlxuXHRcdGlmIChjb2RlIDwgVVBQRVIgKyAyNilcblx0XHRcdHJldHVybiBjb2RlIC0gVVBQRVJcblx0XHRpZiAoY29kZSA8IExPV0VSICsgMjYpXG5cdFx0XHRyZXR1cm4gY29kZSAtIExPV0VSICsgMjZcblx0fVxuXG5cdGZ1bmN0aW9uIGI2NFRvQnl0ZUFycmF5IChiNjQpIHtcblx0XHR2YXIgaSwgaiwgbCwgdG1wLCBwbGFjZUhvbGRlcnMsIGFyclxuXG5cdFx0aWYgKGI2NC5sZW5ndGggJSA0ID4gMCkge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0Jylcblx0XHR9XG5cblx0XHQvLyB0aGUgbnVtYmVyIG9mIGVxdWFsIHNpZ25zIChwbGFjZSBob2xkZXJzKVxuXHRcdC8vIGlmIHRoZXJlIGFyZSB0d28gcGxhY2Vob2xkZXJzLCB0aGFuIHRoZSB0d28gY2hhcmFjdGVycyBiZWZvcmUgaXRcblx0XHQvLyByZXByZXNlbnQgb25lIGJ5dGVcblx0XHQvLyBpZiB0aGVyZSBpcyBvbmx5IG9uZSwgdGhlbiB0aGUgdGhyZWUgY2hhcmFjdGVycyBiZWZvcmUgaXQgcmVwcmVzZW50IDIgYnl0ZXNcblx0XHQvLyB0aGlzIGlzIGp1c3QgYSBjaGVhcCBoYWNrIHRvIG5vdCBkbyBpbmRleE9mIHR3aWNlXG5cdFx0dmFyIGxlbiA9IGI2NC5sZW5ndGhcblx0XHRwbGFjZUhvbGRlcnMgPSAnPScgPT09IGI2NC5jaGFyQXQobGVuIC0gMikgPyAyIDogJz0nID09PSBiNjQuY2hhckF0KGxlbiAtIDEpID8gMSA6IDBcblxuXHRcdC8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuXHRcdGFyciA9IG5ldyBBcnIoYjY0Lmxlbmd0aCAqIDMgLyA0IC0gcGxhY2VIb2xkZXJzKVxuXG5cdFx0Ly8gaWYgdGhlcmUgYXJlIHBsYWNlaG9sZGVycywgb25seSBnZXQgdXAgdG8gdGhlIGxhc3QgY29tcGxldGUgNCBjaGFyc1xuXHRcdGwgPSBwbGFjZUhvbGRlcnMgPiAwID8gYjY0Lmxlbmd0aCAtIDQgOiBiNjQubGVuZ3RoXG5cblx0XHR2YXIgTCA9IDBcblxuXHRcdGZ1bmN0aW9uIHB1c2ggKHYpIHtcblx0XHRcdGFycltMKytdID0gdlxuXHRcdH1cblxuXHRcdGZvciAoaSA9IDAsIGogPSAwOyBpIDwgbDsgaSArPSA0LCBqICs9IDMpIHtcblx0XHRcdHRtcCA9IChkZWNvZGUoYjY0LmNoYXJBdChpKSkgPDwgMTgpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAxKSkgPDwgMTIpIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAyKSkgPDwgNikgfCBkZWNvZGUoYjY0LmNoYXJBdChpICsgMykpXG5cdFx0XHRwdXNoKCh0bXAgJiAweEZGMDAwMCkgPj4gMTYpXG5cdFx0XHRwdXNoKCh0bXAgJiAweEZGMDApID4+IDgpXG5cdFx0XHRwdXNoKHRtcCAmIDB4RkYpXG5cdFx0fVxuXG5cdFx0aWYgKHBsYWNlSG9sZGVycyA9PT0gMikge1xuXHRcdFx0dG1wID0gKGRlY29kZShiNjQuY2hhckF0KGkpKSA8PCAyKSB8IChkZWNvZGUoYjY0LmNoYXJBdChpICsgMSkpID4+IDQpXG5cdFx0XHRwdXNoKHRtcCAmIDB4RkYpXG5cdFx0fSBlbHNlIGlmIChwbGFjZUhvbGRlcnMgPT09IDEpIHtcblx0XHRcdHRtcCA9IChkZWNvZGUoYjY0LmNoYXJBdChpKSkgPDwgMTApIHwgKGRlY29kZShiNjQuY2hhckF0KGkgKyAxKSkgPDwgNCkgfCAoZGVjb2RlKGI2NC5jaGFyQXQoaSArIDIpKSA+PiAyKVxuXHRcdFx0cHVzaCgodG1wID4+IDgpICYgMHhGRilcblx0XHRcdHB1c2godG1wICYgMHhGRilcblx0XHR9XG5cblx0XHRyZXR1cm4gYXJyXG5cdH1cblxuXHRmdW5jdGlvbiB1aW50OFRvQmFzZTY0ICh1aW50OCkge1xuXHRcdHZhciBpLFxuXHRcdFx0ZXh0cmFCeXRlcyA9IHVpbnQ4Lmxlbmd0aCAlIDMsIC8vIGlmIHdlIGhhdmUgMSBieXRlIGxlZnQsIHBhZCAyIGJ5dGVzXG5cdFx0XHRvdXRwdXQgPSBcIlwiLFxuXHRcdFx0dGVtcCwgbGVuZ3RoXG5cblx0XHRmdW5jdGlvbiBlbmNvZGUgKG51bSkge1xuXHRcdFx0cmV0dXJuIGxvb2t1cC5jaGFyQXQobnVtKVxuXHRcdH1cblxuXHRcdGZ1bmN0aW9uIHRyaXBsZXRUb0Jhc2U2NCAobnVtKSB7XG5cdFx0XHRyZXR1cm4gZW5jb2RlKG51bSA+PiAxOCAmIDB4M0YpICsgZW5jb2RlKG51bSA+PiAxMiAmIDB4M0YpICsgZW5jb2RlKG51bSA+PiA2ICYgMHgzRikgKyBlbmNvZGUobnVtICYgMHgzRilcblx0XHR9XG5cblx0XHQvLyBnbyB0aHJvdWdoIHRoZSBhcnJheSBldmVyeSB0aHJlZSBieXRlcywgd2UnbGwgZGVhbCB3aXRoIHRyYWlsaW5nIHN0dWZmIGxhdGVyXG5cdFx0Zm9yIChpID0gMCwgbGVuZ3RoID0gdWludDgubGVuZ3RoIC0gZXh0cmFCeXRlczsgaSA8IGxlbmd0aDsgaSArPSAzKSB7XG5cdFx0XHR0ZW1wID0gKHVpbnQ4W2ldIDw8IDE2KSArICh1aW50OFtpICsgMV0gPDwgOCkgKyAodWludDhbaSArIDJdKVxuXHRcdFx0b3V0cHV0ICs9IHRyaXBsZXRUb0Jhc2U2NCh0ZW1wKVxuXHRcdH1cblxuXHRcdC8vIHBhZCB0aGUgZW5kIHdpdGggemVyb3MsIGJ1dCBtYWtlIHN1cmUgdG8gbm90IGZvcmdldCB0aGUgZXh0cmEgYnl0ZXNcblx0XHRzd2l0Y2ggKGV4dHJhQnl0ZXMpIHtcblx0XHRcdGNhc2UgMTpcblx0XHRcdFx0dGVtcCA9IHVpbnQ4W3VpbnQ4Lmxlbmd0aCAtIDFdXG5cdFx0XHRcdG91dHB1dCArPSBlbmNvZGUodGVtcCA+PiAyKVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wIDw8IDQpICYgMHgzRilcblx0XHRcdFx0b3V0cHV0ICs9ICc9PSdcblx0XHRcdFx0YnJlYWtcblx0XHRcdGNhc2UgMjpcblx0XHRcdFx0dGVtcCA9ICh1aW50OFt1aW50OC5sZW5ndGggLSAyXSA8PCA4KSArICh1aW50OFt1aW50OC5sZW5ndGggLSAxXSlcblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSh0ZW1wID4+IDEwKVxuXHRcdFx0XHRvdXRwdXQgKz0gZW5jb2RlKCh0ZW1wID4+IDQpICYgMHgzRilcblx0XHRcdFx0b3V0cHV0ICs9IGVuY29kZSgodGVtcCA8PCAyKSAmIDB4M0YpXG5cdFx0XHRcdG91dHB1dCArPSAnPSdcblx0XHRcdFx0YnJlYWtcblx0XHR9XG5cblx0XHRyZXR1cm4gb3V0cHV0XG5cdH1cblxuXHRleHBvcnRzLnRvQnl0ZUFycmF5ID0gYjY0VG9CeXRlQXJyYXlcblx0ZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gdWludDhUb0Jhc2U2NFxufSh0eXBlb2YgZXhwb3J0cyA9PT0gJ3VuZGVmaW5lZCcgPyAodGhpcy5iYXNlNjRqcyA9IHt9KSA6IGV4cG9ydHMpKVxuIiwiZXhwb3J0cy5yZWFkID0gZnVuY3Rpb24gKGJ1ZmZlciwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG1cbiAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDFcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG4gIHZhciBuQml0cyA9IC03XG4gIHZhciBpID0gaXNMRSA/IChuQnl0ZXMgLSAxKSA6IDBcbiAgdmFyIGQgPSBpc0xFID8gLTEgOiAxXG4gIHZhciBzID0gYnVmZmVyW29mZnNldCArIGldXG5cbiAgaSArPSBkXG5cbiAgZSA9IHMgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgcyA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gZUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBlID0gZSAqIDI1NiArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIGUgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IG1MZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IG0gKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBpZiAoZSA9PT0gMCkge1xuICAgIGUgPSAxIC0gZUJpYXNcbiAgfSBlbHNlIGlmIChlID09PSBlTWF4KSB7XG4gICAgcmV0dXJuIG0gPyBOYU4gOiAoKHMgPyAtMSA6IDEpICogSW5maW5pdHkpXG4gIH0gZWxzZSB7XG4gICAgbSA9IG0gKyBNYXRoLnBvdygyLCBtTGVuKVxuICAgIGUgPSBlIC0gZUJpYXNcbiAgfVxuICByZXR1cm4gKHMgPyAtMSA6IDEpICogbSAqIE1hdGgucG93KDIsIGUgLSBtTGVuKVxufVxuXG5leHBvcnRzLndyaXRlID0gZnVuY3Rpb24gKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtLCBjXG4gIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApXG4gIHZhciBpID0gaXNMRSA/IDAgOiAobkJ5dGVzIC0gMSlcbiAgdmFyIGQgPSBpc0xFID8gMSA6IC0xXG4gIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwXG5cbiAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSlcblxuICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkge1xuICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMFxuICAgIGUgPSBlTWF4XG4gIH0gZWxzZSB7XG4gICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpXG4gICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkge1xuICAgICAgZS0tXG4gICAgICBjICo9IDJcbiAgICB9XG4gICAgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICB2YWx1ZSArPSBydCAvIGNcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpXG4gICAgfVxuICAgIGlmICh2YWx1ZSAqIGMgPj0gMikge1xuICAgICAgZSsrXG4gICAgICBjIC89IDJcbiAgICB9XG5cbiAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcbiAgICAgIG0gPSAwXG4gICAgICBlID0gZU1heFxuICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIG0gPSAodmFsdWUgKiBjIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IGUgKyBlQmlhc1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSAwXG4gICAgfVxuICB9XG5cbiAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCkge31cblxuICBlID0gKGUgPDwgbUxlbikgfCBtXG4gIGVMZW4gKz0gbUxlblxuICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9XG5cbiAgYnVmZmVyW29mZnNldCArIGkgLSBkXSB8PSBzICogMTI4XG59XG4iLCJ2YXIgdG9TdHJpbmcgPSB7fS50b1N0cmluZztcblxubW9kdWxlLmV4cG9ydHMgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcnIpIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwoYXJyKSA9PSAnW29iamVjdCBBcnJheV0nO1xufTtcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCIvKipcbiAqIFdyYXBwZXJzIGFyb3VuZCBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgdG8gZmFjaWxpdGF0ZSB0ZXN0aW5nIGFuZCBjbGljay10cmFja2luZy5cbiAqXG4gKiBUaGlzIGFkZHMgdGhlIGNvbmNlcHQgb2YgYSBcImRhdGEgc3RhY2tcIiB0byB0aGUgY2FudmFzLiBXaGVuIHNoYXBlcyBhcmVcbiAqIGRyYXduLCB0aGV5IHJlcHJlc2VudCB0aGUgb2JqZWN0cyBjdXJyZW50bHkgb24gdGhlIHN0YWNrLiBUaGlzIHN0YWNrIGNhbiBiZVxuICogbWFuaXB1bGF0ZWQgdXNpbmcgY29udGV4dC5wdXNoT2JqZWN0KCkgYW5kIGNvbnRleHQucG9wT2JqZWN0KCkuXG4gKlxuICogU2VlIHRlc3QgZmlsZSBmb3Igc2FtcGxlIHVzYWdlLlxuICovXG5cbihmdW5jdGlvbigpIHtcblxuJ3VzZSBzdHJpY3QnO1xuXG4vLyBUdXJuIG9iaiBpbnRvIGEgcHJveHkgZm9yIHRhcmdldC4gVGhpcyBmb3J3YXJkcyBib3RoIGZ1bmN0aW9uIGNhbGxzIGFuZFxuLy8gcHJvcGVydHkgc2V0dGVycy9nZXR0ZXJzLlxuZnVuY3Rpb24gZm9yd2FyZChvYmosIHRhcmdldCwgb25seUFjY2Vzc29ycykge1xuICBvbmx5QWNjZXNzb3JzID0gb25seUFjY2Vzc29ycyB8fCBmYWxzZTtcbiAgZm9yICh2YXIgayBpbiB0YXJnZXQpIHtcbiAgICAoZnVuY3Rpb24oaykge1xuICAgICAgaWYgKHR5cGVvZih0YXJnZXRba10pID09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgaWYgKCFvbmx5QWNjZXNzb3JzKSB7XG4gICAgICAgICAgb2JqW2tdID0gIHRhcmdldFtrXS5iaW5kKHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGssIHtcbiAgICAgICAgICBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGFyZ2V0W2tdOyB9LFxuICAgICAgICAgIHNldDogZnVuY3Rpb24oeCkgeyB0YXJnZXRba10gPSB4OyB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pKGspO1xuICB9XG59XG5cbi8vIFRoZSBtb3N0IGJhc2ljIGRhdGEtYXdhcmUgY2FudmFzLiBUaGlzIHRocm93cyBhd2F5IGFsbCBkYXRhIGluZm9ybWF0aW9uLlxuLy8gVXNlIHRoaXMgZm9yIGJhc2ljIGRyYXdpbmdcbmZ1bmN0aW9uIERhdGFDb250ZXh0KGN0eCkge1xuICBmb3J3YXJkKHRoaXMsIGN0eCk7XG4gIHRoaXMucHVzaE9iamVjdCA9IHRoaXMucG9wT2JqZWN0ID0gdGhpcy5yZXNldCA9IGZ1bmN0aW9uKCkge307XG59XG5cbnZhciBzdHViR2V0RGF0YUNvbnRleHQgPSBudWxsO1xuXG4vKipcbiAqIEdldCBhIERhdGFDb250ZXh0IGZvciB0aGUgYnVpbHQtaW4gQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELlxuICpcbiAqIFRoaXMgY2FjaGVzIERhdGFDb250ZXh0cyBhbmQgZmFjaWxpdGF0ZXMgc3R1YmJpbmcgaW4gdGVzdHMuXG4gKlxuICogQXMgYSBjb252ZW5pZW5jZSwgeW91IG1heSBwYXNzIGluIGEgQ2FudmFzIGVsZW1lbnQgaW5zdGVhZCBvZiBhXG4gKiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQuIGRhdGEtY2FudmFzIHdpbGwgY2FsbCBnZXRDb250ZXh0KCcyZCcpIGZvciB5b3UuXG4gKi9cbmZ1bmN0aW9uIGdldERhdGFDb250ZXh0KGN0eE9yQ2FudmFzKSB7XG4gIGlmIChjdHhPckNhbnZhcyBpbnN0YW5jZW9mIEhUTUxDYW52YXNFbGVtZW50KSB7XG4gICAgcmV0dXJuIGdldERhdGFDb250ZXh0KGN0eE9yQ2FudmFzLmdldENvbnRleHQoJzJkJykpO1xuICB9XG5cbiAgdmFyIGN0eCA9IGN0eE9yQ2FudmFzO1xuICBpZiAoc3R1YkdldERhdGFDb250ZXh0KSB7XG4gICAgcmV0dXJuIHN0dWJHZXREYXRhQ29udGV4dChjdHgpO1xuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2V0RGF0YUNvbnRleHQuY2FjaGUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBwYWlyID0gZ2V0RGF0YUNvbnRleHQuY2FjaGVbaV07XG4gICAgICBpZiAocGFpclswXSA9PSBjdHgpIHJldHVybiBwYWlyWzFdO1xuICAgIH1cbiAgICB2YXIgZHR4ID0gbmV3IERhdGFDb250ZXh0KGN0eCk7XG4gICAgZ2V0RGF0YUNvbnRleHQuY2FjaGUucHVzaChbY3R4LCBkdHhdKTtcbiAgICByZXR1cm4gZHR4O1xuICB9XG59XG5nZXREYXRhQ29udGV4dC5jYWNoZSA9IFtdOyAgLy8gKENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgRGF0YUNvbnRleHQpIHBhaXJzXG5cblxuLyoqXG4gKiBBIGNvbnRleHQgd2hpY2ggcmVjb3JkcyB3aGF0IGl0IGRvZXMgKGZvciB0ZXN0aW5nKS5cbiAqXG4gKiBUaGlzIHByb3hpZXMgYWxsIGNhbGxzIHRvIHRoZSB1bmRlcmx5aW5nIGNhbnZhcywgc28gdGhleSBkbyBwcm9kdWNlIHZpc2libGVcbiAqIGRyYXdpbmcuIFVzZSBgZHJhd25PYmplY3RzV2l0aGAgb3IgYGNhbGxzYCB0byB0ZXN0IHdoYXQgd2FzIGRyYXduLlxuICovXG5mdW5jdGlvbiBSZWNvcmRpbmdDb250ZXh0KGN0eCkge1xuICBmb3J3YXJkKHRoaXMsIGN0eCwgdHJ1ZSAvKiBvbmx5IGZvd2FyZCBhY2Nlc3NvcnMgKi8pO1xuXG4gIHZhciBjYWxscyA9IFtdO1xuICB0aGlzLmNhbGxzID0gY2FsbHM7XG5cbiAgZm9yICh2YXIgayBpbiBjdHgpIHtcbiAgICAoZnVuY3Rpb24oaykge1xuICAgICAgaWYgKHR5cGVvZihjdHhba10pICE9ICdmdW5jdGlvbicpIHJldHVybjtcbiAgICAgIHRoaXNba10gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gVE9ETzogcmVjb3JkIGN1cnJlbnQgZHJhd2luZyBzdHlsZVxuICAgICAgICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7XG4gICAgICAgIGNhbGxzLnB1c2goW2tdLmNvbmNhdChhcmdzKSk7XG4gICAgICAgIHJldHVybiBjdHhba10uYXBwbHkoY3R4LCBhcmd1bWVudHMpO1xuICAgICAgfTtcbiAgICB9KS5iaW5kKHRoaXMpKGspO1xuICB9XG5cbiAgdGhpcy5wdXNoT2JqZWN0ID0gZnVuY3Rpb24obykge1xuICAgIGNhbGxzLnB1c2goWydwdXNoT2JqZWN0Jywgb10pO1xuICB9O1xuICBcbiAgdGhpcy5wb3BPYmplY3QgPSBmdW5jdGlvbigpIHtcbiAgICBjYWxscy5wdXNoKFsncG9wT2JqZWN0J10pO1xuICB9O1xuXG4gIHRoaXMucmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmNhbGxzID0gY2FsbHMgPSBbXTtcbiAgfTtcblxuICB2YXIgcmVjb3JkaW5nRHJhd0ltYWdlID0gdGhpcy5kcmF3SW1hZ2U7ICAvLyBwbGFpbiByZWNvcmRpbmcgZHJhd0ltYWdlKClcbiAgdGhpcy5kcmF3SW1hZ2UgPSBmdW5jdGlvbihpbWFnZSkge1xuICAgIC8vIElmIHRoZSBkcmF3biBpbWFnZSBoYXMgcmVjb3JkZWQgY2FsbHMsIHRoZW4gdGhleSBuZWVkIHRvIGJlIHRyYW5zZmVycmVkIG92ZXIuXG4gICAgdmFyIHJlY29yZGVyID0gUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlckZvckNhbnZhcyhpbWFnZSk7XG4gICAgaWYgKCFyZWNvcmRlcikge1xuICAgICAgcmVjb3JkaW5nRHJhd0ltYWdlLmFwcGx5KGN0eCwgYXJndW1lbnRzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3R4LmRyYXdJbWFnZS5hcHBseShjdHgsIGFyZ3VtZW50cyk7XG4gICAgICBjYWxscyA9IGNhbGxzLmNvbmNhdCh0cmFuc2Zvcm1lZENhbGxzKHJlY29yZGVyLmNhbGxzLCBhcmd1bWVudHMpKTtcbiAgICAgIHRoaXMuY2FsbHMgPSBjYWxscztcbiAgICB9XG4gIH1cbn1cblxuLy8gVHJhbnNmb3JtIHRoZSBjYWxscyB0byBhIG5ldyBjb29yZGluYXRlIHN5c3RlbS5cbi8vIFRoZSBhcmd1bWVudHMgYXJlIHRob3NlIHRvIGRyYXdJbWFnZSgpLlxuZnVuY3Rpb24gdHJhbnNmb3JtZWRDYWxscyhjYWxscywgYXJncykge1xuICB2YXIgaW1hZ2UgPSBhcmdzWzBdLFxuICAgICAgc3ggPSAwLFxuICAgICAgc3kgPSAwLFxuICAgICAgc1dpZHRoID0gaW1hZ2Uud2lkdGgsXG4gICAgICBzSGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0LFxuICAgICAgZHgsXG4gICAgICBkeSxcbiAgICAgIGRXaWR0aCA9IGltYWdlLndpZHRoLFxuICAgICAgZEhlaWdodCA9IGltYWdlLmhlaWdodDtcblxuICBpZiAoYXJncy5sZW5ndGggPT0gMykge1xuICAgIC8vIHZvaWQgY3R4LmRyYXdJbWFnZShpbWFnZSwgZHgsIGR5KTtcbiAgICBkeCA9IGFyZ3NbMV07XG4gICAgZHkgPSBhcmdzWzJdO1xuICB9IGVsc2UgaWYgKGFyZ3MubGVuZ3RoID09IDUpIHtcbiAgICAvLyB2b2lkIGN0eC5kcmF3SW1hZ2UoaW1hZ2UsIGR4LCBkeSwgZFdpZHRoLCBkSGVpZ2h0KTtcbiAgICBkeCA9IGFyZ3NbMV07XG4gICAgZHkgPSBhcmdzWzJdO1xuICAgIGRXaWR0aCA9IGFyZ3NbM107XG4gICAgZEhlaWdodCA9IGFyZ3NbNF07XG4gIH0gZWxzZSBpZiAoYXJncy5sZW5ndGggPT0gOSkge1xuICAgIC8vIHZvaWQgY3R4LmRyYXdJbWFnZShpbWFnZSwgc3gsIHN5LCBzV2lkdGgsIHNIZWlnaHQsIGR4LCBkeSwgZFdpZHRoLCBkSGVpZ2h0KTtcbiAgICBzeCA9IGFyZ3NbMV07XG4gICAgc3kgPSBhcmdzWzJdO1xuICAgIHNXaWR0aCA9IGFyZ3NbM107XG4gICAgc0hlaWdodCA9IGFyZ3NbNF07XG4gICAgZHggPSBhcmdzWzVdO1xuICAgIGR5ID0gYXJnc1s2XTtcbiAgICBkV2lkdGggPSBhcmdzWzddO1xuICAgIGRIZWlnaHQgPSBhcmdzWzhdO1xuICB9XG4gIC8vIE90aGVyIGFyaXRpZXMgd2lsbCBtYWtlIHRoZSBicm93c2VyIHRocm93IGFuIGVycm9yIG9uIGN0eC5kcmF3SW1hZ2UuYXBwbHlcblxuICB2YXIgeFNjYWxpbmcgPSBnZXRTY2FsZUZhY3RvcihzeCwgc3ggKyBzV2lkdGgsIGR4LCBkeCArIGRXaWR0aCksXG4gICAgICB4U2NhbGUgICA9IG1ha2VTY2FsZSggc3gsIHN4ICsgc1dpZHRoLCBkeCwgZHggKyBkV2lkdGgpLFxuICAgICAgeVNjYWxpbmcgPSBnZXRTY2FsZUZhY3RvcihzeSwgc3kgKyBzSGVpZ2h0LCBkeSwgZHkgKyBkSGVpZ2h0KSxcbiAgICAgIHlTY2FsZSAgID0gbWFrZVNjYWxlKCBzeSwgc3kgKyBzSGVpZ2h0LCBkeSwgZHkgKyBkSGVpZ2h0KTtcblxuICAvLyBUaGVzZSBjYWxscyBhcmUgbW9yZSBjb21wbGV4OlxuICAvLyBhcmNcbiAgLy8gYXJjVG9cbiAgLy8gZWxsaXBzZVxuXG4gIC8vIFRPRE86IGNsaXAgY2FsbHMgb3V0c2lkZSBvZiB0aGUgc291cmNlIHJlY3RhbmdsZS5cbiAgdmFyIHRyYW5zZm9ybUNhbGwgPSBmdW5jdGlvbihvcmlnaW5hbENhbGwpIHtcbiAgICB2YXIgY2FsbCA9IG9yaWdpbmFsQ2FsbC5zbGljZSgpLCAgLy8gbWFrZSBhIGNvcHlcbiAgICAgICAgdHlwZSA9IGNhbGxbMF07XG4gICAgaWYgKHR5cGUgaW4gQ0FMTFNfWFkpIHtcbiAgICAgIHZhciB4eXMgPSBDQUxMU19YWVt0eXBlXTtcbiAgICAgIGlmICh0eXBlb2YoeHlzKSA9PSAnbnVtYmVyJykgeHlzID0gW3h5c107XG4gICAgICB4eXMuZm9yRWFjaChmdW5jdGlvbihwb3MpIHtcbiAgICAgICAgY2FsbFsxICsgcG9zXSA9IHhTY2FsZShjYWxsWzEgKyBwb3NdKTtcbiAgICAgICAgY2FsbFsyICsgcG9zXSA9IHlTY2FsZShjYWxsWzIgKyBwb3NdKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodHlwZSBpbiBDQUxMU19XSCkge1xuICAgICAgdmFyIHdocyA9IENBTExTX1dIW3R5cGVdO1xuICAgICAgaWYgKHR5cGVvZih3aHMpID09ICdudW1iZXInKSB3aHMgPSBbd2hzXTtcbiAgICAgIHdocy5mb3JFYWNoKGZ1bmN0aW9uKHBvcykge1xuICAgICAgICBjYWxsWzEgKyBwb3NdICo9IHhTY2FsaW5nO1xuICAgICAgICBjYWxsWzIgKyBwb3NdICo9IHlTY2FsaW5nO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBjYWxsO1xuICB9O1xuXG4gIHJldHVybiBjYWxscy5tYXAodHJhbnNmb3JtQ2FsbCk7XG59XG5cbi8vIEhlbHBlcnMgZm9yIHRyYW5zZm9ybWVkQ2FsbHNcblxuLy8gTWFwICh4MSwgeDIpIC0tPiAoeTEsIHkyKVxuZnVuY3Rpb24gZ2V0U2NhbGVGYWN0b3IoeDEsIHgyLCB5MSwgeTIpIHtcbiAgcmV0dXJuICh5MiAtIHkxKSAvICh4MiAtIHgxKTtcbn07XG5mdW5jdGlvbiBtYWtlU2NhbGUoeDEsIHgyLCB5MSwgeTIpIHtcbiAgdmFyIHNjYWxlID0gZ2V0U2NhbGVGYWN0b3IoeDEsIHgyLCB5MSwgeTIpO1xuICByZXR1cm4gZnVuY3Rpb24oeCkge1xuICAgIHJldHVybiB5MSArIHNjYWxlICogKHggLSB4MSk7XG4gIH07XG59O1xuXG4vLyBUaGVzZSBjYWxscyBhbGwgaGF2ZSAoeCwgeSkgYXMgYXJncyBhdCB0aGUgc3BlY2lmaWVkIHBvc2l0aW9ucy5cbnZhciBDQUxMU19YWSA9IHtcbiAgY2xlYXJSZWN0OiAwLFxuICBmaWxsUmVjdDogMCxcbiAgc3Ryb2tlUmVjdDogMCxcbiAgZmlsbFRleHQ6IDEsXG4gIHN0cm9rZVRleHQ6IDEsXG4gIG1vdmVUbzogMCxcbiAgbGluZVRvOiAwLFxuICBiZXppZXJDdXJ2ZVRvOiBbMCwgMiwgNF0sXG4gIHF1YWRyYXRpY0N1cnZlVG86IFswLCAyXSxcbiAgcmVjdDogMFxufTtcbi8vIFRoZXNlIGNhbGxzIGhhdmUgKHdpZHRoLCBoZWlnaHQpIGFzIGFyZ3MgYXQgdGhlIHNwZWNpZmllZCBwb3NpdGlvbnMuXG52YXIgQ0FMTFNfV0ggPSB7XG4gIGNsZWFyUmVjdDogMixcbiAgZmlsbFJlY3Q6IDIsXG4gIHN0cm9rZVJlY3Q6IDIsXG4gIC8vIGZpbGxUZXh0IGhhcyBhbiBvcHRpb25hbCBgbWF4X3dpZHRoYCBwYXJhbVxuICByZWN0OiAyLFxufTtcblxuLyoqXG4gKiBHZXQgYSBsaXN0IG9mIG9iamVjdHMgd2hpY2ggaGF2ZSBiZWVuIHB1c2hlZCB0byB0aGUgZGF0YSBjYW52YXMgdGhhdCBtYXRjaFxuICogdGhlIHBhcnRpY3VsYXIgcHJlZGljYXRlLlxuICogSWYgbm8gcHJlZGljYXRlIGlzIHNwZWNpZmllZCwgYWxsIG9iamVjdHMgYXJlIHJldHVybmVkLlxuICovXG5SZWNvcmRpbmdDb250ZXh0LnByb3RvdHlwZS5kcmF3bk9iamVjdHNXaXRoID0gZnVuY3Rpb24ocHJlZGljYXRlKSB7XG4gIGlmICghcHJlZGljYXRlKSBwcmVkaWNhdGUgPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH07XG4gIHJldHVybiB0aGlzLmNhbGxzT2YoJ3B1c2hPYmplY3QnKVxuICAgICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24oeCkgeyByZXR1cm4gcHJlZGljYXRlKHhbMV0pIH0pXG4gICAgICAgICAgICAgLm1hcChmdW5jdGlvbih4KSB7IHJldHVybiB4WzFdOyB9KTtcbn07XG4vLyBUaGlzIHZlcnNpb24gcmVhZHMgYmV0dGVyIGlmIHRoZXJlJ3Mgbm8gcHJlZGljYXRlLlxuUmVjb3JkaW5nQ29udGV4dC5wcm90b3R5cGUuZHJhd25PYmplY3RzID0gUmVjb3JkaW5nQ29udGV4dC5wcm90b3R5cGUuZHJhd25PYmplY3RzV2l0aDtcblxuLyoqXG4gKiBGaW5kIGNhbGxzIG9mIGEgcGFydGljdWxhciB0eXBlLCBlLmcuIGBmaWxsVGV4dGAgb3IgYHB1c2hPYmplY3RgLlxuICpcbiAqIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIGNhbGxzIGFuZCB0aGVpciBwYXJhbWV0ZXJzLCBlLmcuXG4gKiBbIFsnZmlsbFRleHQnLCAnSGVsbG8hJywgMjAsIDEwXSBdXG4gKi9cblJlY29yZGluZ0NvbnRleHQucHJvdG90eXBlLmNhbGxzT2YgPSBmdW5jdGlvbih0eXBlKSB7XG4gIHJldHVybiB0aGlzLmNhbGxzLmZpbHRlcihmdW5jdGlvbihjYWxsKSB7IHJldHVybiBjYWxsWzBdID09IHR5cGUgfSk7XG59O1xuXG4vKipcbiAqIFN0YXRpYyBtZXRob2QgdG8gYmVnaW4gc3dhcHBpbmcgaW4gUmVjb3JkaW5nQ29udGV4dCBpbiBwbGFjZSBvZiBEYXRhQ29udGV4dC5cbiAqIERvbid0IGZvcmdldCB0byBjYWxsIFJlY29yZGluZ0NvbnRleHQucmVzZXQoKSBhZnRlciB0aGUgdGVzdCBjb21wbGV0ZXMhXG4gKi9cblJlY29yZGluZ0NvbnRleHQucmVjb3JkQWxsID0gZnVuY3Rpb24oKSB7XG4gIGlmIChzdHViR2V0RGF0YUNvbnRleHQgIT0gbnVsbCkge1xuICAgIHRocm93ICdZb3UgZm9yZ290IHRvIGNhbGwgUmVjb3JkaW5nQ29udGV4dC5yZXNldCgpJztcbiAgfVxuICBSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVycyA9IFtdO1xuICBzdHViR2V0RGF0YUNvbnRleHQgPSBmdW5jdGlvbihjdHgpIHtcbiAgICB2YXIgcmVjb3JkZXIgPSBSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVyRm9yQ2FudmFzKGN0eC5jYW52YXMpO1xuICAgIGlmIChyZWNvcmRlcikgcmV0dXJuIHJlY29yZGVyO1xuXG4gICAgcmVjb3JkZXIgPSBuZXcgUmVjb3JkaW5nQ29udGV4dChjdHgpO1xuICAgIFJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJzLnB1c2goW2N0eC5jYW52YXMsIHJlY29yZGVyXSk7XG4gICAgcmV0dXJuIHJlY29yZGVyO1xuICB9O1xufTtcblxuLyoqXG4gKiBSZXZlcnQgdGhlIHN0dWJiaW5nIHBlcmZvcm1lZCBieSBSZWNvcmRpbmdDb250ZXh0LnJlY29yZEFsbC5cbiAqL1xuUmVjb3JkaW5nQ29udGV4dC5yZXNldCA9IGZ1bmN0aW9uKCkge1xuICBpZiAoIXN0dWJHZXREYXRhQ29udGV4dCkge1xuICAgIHRocm93ICdDYWxsZWQgUmVjb3JkaW5nQ29udGV4dC5yZXNldCgpIGJlZm9yZSBSZWNvcmRpbmdDb250ZXh0LnJlY29yZEFsbCgpJztcbiAgfVxuICBzdHViR2V0RGF0YUNvbnRleHQgPSBudWxsO1xuICBSZWNvcmRpbmdDb250ZXh0LnJlY29yZGVycyA9IG51bGw7XG59O1xuXG4vLyBHZXQgdGhlIHJlY29yZGluZyBjb250ZXh0IGZvciBhIGNhbnZhcy5cblJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJGb3JDYW52YXMgPSBmdW5jdGlvbihjYW52YXMpIHtcbiAgdmFyIHJlY29yZGVycyA9IFJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJzO1xuICBpZiAocmVjb3JkZXJzID09IG51bGwpIHtcbiAgICB0aHJvdyAnWW91IG11c3QgY2FsbCBSZWNvcmRpbmdDb250ZXh0LnJlY29yZEFsbCgpIGJlZm9yZSB1c2luZyBvdGhlciBSZWNvcmRpbmdDb250ZXh0IHN0YXRpYyBtZXRob2RzJztcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHJlY29yZGVycy5sZW5ndGg7IGkrKykge1xuICAgIHZhciByID0gcmVjb3JkZXJzW2ldO1xuICAgIGlmIChyWzBdID09IGNhbnZhcykgcmV0dXJuIHJbMV07XG4gIH1cbiAgcmV0dXJuIG51bGw7XG59O1xuXG4vKipcbiAqIEdldCB0aGUgcmVjb3JkaW5nIGNvbnRleHQgZm9yIGEgY2FudmFzIGluc2lkZSBvZiBkaXYucXVlcnlTZWxlY3RvcihzZWxlY3RvcikuXG4gKlxuICogVGhpcyBpcyB1c2VmdWwgd2hlbiB5b3UgaGF2ZSBhIHRlc3QgZGl2IGFuZCBzZXZlcmFsIGNhbnZhc2VzLlxuICovXG5SZWNvcmRpbmdDb250ZXh0LnJlY29yZGVyRm9yU2VsZWN0b3IgPSBmdW5jdGlvbihkaXYsIHNlbGVjdG9yKSB7XG4gIHZhciBjYW52YXMgPSBkaXYucXVlcnlTZWxlY3RvcihzZWxlY3RvciArICcgY2FudmFzJykgfHwgZGl2LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICBpZiAoIWNhbnZhcykge1xuICAgIHRocm93ICdVbmFibGUgdG8gZmluZCBhIGNhbnZhcyBtYXRjaGluZyAnICsgc2VsZWN0b3I7XG4gIH0gZWxzZSBpZiAoIShjYW52YXMgaW5zdGFuY2VvZiBIVE1MQ2FudmFzRWxlbWVudCkpIHtcbiAgICB0aHJvdyAnU2VsZWN0b3IgJyArIHNlbGVjdG9yICsgJyBuZWl0aGVyIG1hdGNoZXMgbm9yIGNvbnRhaW5zIGEgY2FudmFzJztcbiAgfVxuICByZXR1cm4gUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlckZvckNhbnZhcyhjYW52YXMpO1xufTtcblxuLy8gUmVzb2x2ZXMgYXJndW1lbnRzIGZvciBSZWNvcmRpbmdDb250ZXh0IGhlbHBlcnMuXG4vLyBZb3UgY2FuIGVpdGhlciBzcGVjaWZ5IGEgZGl2ICYgc2VsZWN0b3IgdG8gZmluZCB0aGUgY2FudmFzLCBvciBvbWl0IHRoaXMgaWZcbi8vIHRoZXJlJ3Mgb25seSBvbmUgY2FudmFzIGJlaW5nIHJlY29yZGVkLlxuZnVuY3Rpb24gZmluZFJlY29yZGVyKGRpdiwgc2VsZWN0b3IpIHtcbiAgaWYgKCFkaXYpIHtcbiAgICBpZiAoIVJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJzKSB7XG4gICAgICB0aHJvdyAnWW91IG11c3QgY2FsbCBSZWNvcmRpbmdDb250ZXh0LnJlY29yZEFsbCgpIGJlZm9yZSB1c2luZyBvdGhlciBSZWNvcmRpbmdDb250ZXh0IHN0YXRpYyBtZXRob2RzJztcbiAgICB9IGVsc2UgaWYgKFJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJzLmxlbmd0aCA9PSAwKSB7XG4gICAgICB0aHJvdyAnQ2FsbGVkIGEgUmVjb3JkaW5nQ29udGV4dCBtZXRob2QsIGJ1dCBubyBjYW52YXNlcyBhcmUgYmVpbmcgcmVjb3JkZWQuJztcbiAgICB9IGVsc2UgaWYgKFJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJzLmxlbmd0aCA+IDEpIHtcbiAgICAgIHRocm93ICdDYWxsZWQgYSBSZWNvcmRpbmdDb250ZXh0IG1ldGhvZCB3aGlsZSBtdWx0aXBsZSBjYW52YXNlcyB3ZXJlIGJlaW5nIHJlY29yZGVkLiBTcGVjaWZ5IG9uZSB1c2luZyBhIGRpdiBhbmQgc2VsZWN0b3IuJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFJlY29yZGluZ0NvbnRleHQucmVjb3JkZXJzWzBdWzFdO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gUmVjb3JkaW5nQ29udGV4dC5yZWNvcmRlckZvclNlbGVjdG9yKGRpdiwgc2VsZWN0b3IpO1xuICB9XG59XG5cbi8vIEZpbmQgb2JqZWN0cyBwdXNoZWQgb250byBhIHBhcnRpY3VsYXIgcmVjb3JkZWQgY2FudmFzLlxuUmVjb3JkaW5nQ29udGV4dC5kcmF3bk9iamVjdHNXaXRoID0gZnVuY3Rpb24oZGl2LCBzZWxlY3RvciwgcHJlZGljYXRlKSB7XG4gIC8vIENoZWNrIGZvciB0aGUgemVyby1hcmd1bWVudCBvciBvbmUtYXJndW1lbnQgdmVyc2lvbi5cbiAgaWYgKHR5cGVvZihkaXYpID09ICdmdW5jdGlvbicgfHwgYXJndW1lbnRzLmxlbmd0aCA9PSAwKSB7XG4gICAgcHJlZGljYXRlID0gZGl2O1xuICAgIGRpdiA9IG51bGw7XG4gIH1cbiAgdmFyIHJlY29yZGVyID0gZmluZFJlY29yZGVyKGRpdiwgc2VsZWN0b3IpO1xuICBwcmVkaWNhdGUgPSBwcmVkaWNhdGUgfHwgZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9O1xuICByZXR1cm4gcmVjb3JkZXIgPyByZWNvcmRlci5kcmF3bk9iamVjdHNXaXRoKHByZWRpY2F0ZSkgOiBbXTtcbn07XG5cbi8vIFRoaXMgdmVyc2lvbiByZWFkcyBiZXR0ZXIgaWYgdGhlcmUncyBubyBwcmVkaWNhdGUuXG5SZWNvcmRpbmdDb250ZXh0LmRyYXduT2JqZWN0cyA9IFJlY29yZGluZ0NvbnRleHQuZHJhd25PYmplY3RzV2l0aDtcblxuLy8gRmluZCBjYWxscyBvZiBwYXJ0aWN1bGFyIGRyYXdpbmcgZnVuY3Rpb25zIChlLmcuIGZpbGxUZXh0KVxuUmVjb3JkaW5nQ29udGV4dC5jYWxsc09mID0gZnVuY3Rpb24gKGRpdiwgc2VsZWN0b3IsIHR5cGUpIHtcbiAgLy8gQ2hlY2sgZm9yIHRoZSBvbmUtYXJndW1lbnQgdmVyc2lvbi5cbiAgaWYgKHR5cGVvZihkaXYpID09ICdzdHJpbmcnKSB7XG4gICAgdHlwZSA9IGRpdjtcbiAgICBkaXYgPSBudWxsO1xuICB9XG4gIHZhciByZWNvcmRlciA9IGZpbmRSZWNvcmRlcihkaXYsIHNlbGVjdG9yKTtcbiAgcmV0dXJuIHJlY29yZGVyID8gcmVjb3JkZXIuY2FsbHNPZih0eXBlKSA6IFtdO1xufTtcblxuXG4vKipcbiAqIEEgY29udGV4dCB3aGljaCBkZXRlcm1pbmVzIHRoZSBkYXRhIGF0IGEgcGFydGljdWxhciBsb2NhdGlvbi5cbiAqXG4gKiBXaGVuIGRyYXdpbmcgbWV0aG9kcyBhcmUgY2FsbGVkIG9uIHRoaXMgY2xhc3MsIG5vdGhpbmcgaXMgcmVuZGVyZWQuIEluc3RlYWQsXG4gKiBlYWNoIHNoYXBlIGlzIGNoZWNrZWQgdG8gc2VlIGlmIGl0IGluY2x1ZGVzIHRoZSBwb2ludCBvZiBpbnRlcmVzdC4gSWYgaXRcbiAqIGRvZXMsIHRoZSBjdXJyZW50IGRhdGEgc3RhY2sgaXMgc2F2ZWQgYXMgYSBcImhpdFwiLlxuICpcbiAqIFRoZSBgaGl0c2AgcHJvcGVydHkgcmVjb3JkcyBhbGwgc3VjaCBoaXRzLlxuICogVGhlIGBoaXRgIHByb3BlcnR5IHJlY29yZHMgb25seSB0aGUgbGFzdCAodG9wKSBoaXQuXG4gKi9cbmZ1bmN0aW9uIENsaWNrVHJhY2tpbmdDb250ZXh0KGN0eCwgcHgsIHB5KSB7XG4gIGZvcndhcmQodGhpcywgY3R4KTtcblxuICB2YXIgc3RhY2sgPSBbXTtcbiAgdGhpcy5oaXRzID0gW107XG4gIHRoaXMuaGl0ID0gbnVsbDtcbiAgXG4gIHZhciB0aGF0ID0gdGhpcztcbiAgZnVuY3Rpb24gcmVjb3JkSGl0KCkge1xuICAgIHRoYXQuaGl0cy51bnNoaWZ0KEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHN0YWNrKSk7XG4gICAgdGhhdC5oaXQgPSB0aGF0LmhpdHNbMF07XG4gIH1cblxuICB0aGlzLnB1c2hPYmplY3QgPSBmdW5jdGlvbihvKSB7XG4gICAgc3RhY2sudW5zaGlmdChvKTtcbiAgfTtcbiAgXG4gIHRoaXMucG9wT2JqZWN0ID0gZnVuY3Rpb24oKSB7XG4gICAgc3RhY2suc2hpZnQoKTtcbiAgfTtcblxuICB0aGlzLnJlc2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5oaXRzID0gW107XG4gICAgdGhpcy5oaXQgPSBudWxsO1xuICB9O1xuXG4gIC8vIFRoZXNlIGFyZSAobW9zdCBvZikgdGhlIGNhbnZhcyBtZXRob2RzIHdoaWNoIGRyYXcgc29tZXRoaW5nLlxuICAvLyBUT0RPOiB3b3VsZCBpdCBtYWtlIHNlbnNlIHRvIHB1cmdlIGV4aXN0aW5nIGhpdHMgY292ZXJlZCBieSB0aGlzP1xuICB0aGlzLmNsZWFyUmVjdCA9IGZ1bmN0aW9uKHgsIHksIHcsIGgpIHsgfTtcblxuICB0aGlzLmZpbGxSZWN0ID0gZnVuY3Rpb24oeCwgeSwgdywgaCkge1xuICAgIGlmIChweCA+PSB4ICYmIHB4IDw9IHggKyB3ICYmIHB5ID49IHkgJiYgcHkgPD0geSArIGgpIHJlY29yZEhpdCgpO1xuICB9O1xuXG4gIHRoaXMuc3Ryb2tlUmVjdCA9IGZ1bmN0aW9uKHgsIHksIHcsIGgpIHtcbiAgICAvLyAuLi5cbiAgfTtcblxuICB0aGlzLmZpbGwgPSBmdW5jdGlvbihmaWxsUnVsZSkge1xuICAgIC8vIFRPRE86IGltcGxlbWVudCBmaWxsUnVsZVxuICAgIGlmIChjdHguaXNQb2ludEluUGF0aChweCwgcHkpKSByZWNvcmRIaXQoKTtcbiAgfTtcblxuICB0aGlzLnN0cm9rZSA9IGZ1bmN0aW9uKCkge1xuICAgIGlmIChjdHguaXNQb2ludEluU3Ryb2tlKHB4LCBweSkpIHJlY29yZEhpdCgpO1xuICB9O1xuXG4gIHRoaXMuZmlsbFRleHQgPSBmdW5jdGlvbih0ZXh0LCB4LCB5LCBtYXhXaWR0aCkge1xuICAgIC8vIC4uLlxuICB9O1xuXG4gIHRoaXMuc3Ryb2tlVGV4dCA9IGZ1bmN0aW9uKHRleHQsIHgsIHksIG1heFdpZHRoKSB7XG4gICAgLy8gLi4uXG4gIH07XG59XG5cbnZhciBleHBvcnRzID0ge1xuICBEYXRhQ29udGV4dDogRGF0YUNvbnRleHQsXG4gIFJlY29yZGluZ0NvbnRleHQ6IFJlY29yZGluZ0NvbnRleHQsXG4gIENsaWNrVHJhY2tpbmdDb250ZXh0OiBDbGlja1RyYWNraW5nQ29udGV4dCxcbiAgZ2V0RGF0YUNvbnRleHQ6IGdldERhdGFDb250ZXh0XG59O1xuXG5pZiAodHlwZW9mKG1vZHVsZSkgIT09ICd1bmRlZmluZWQnKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gIG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cztcbn0gZWxzZSB7XG4gIHdpbmRvdy5kYXRhQ2FudmFzID0gZXhwb3J0cztcbn1cblxufSkoKTtcbiIsIiFmdW5jdGlvbihhKXt2YXIgYj10aGlzO1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP21vZHVsZS5leHBvcnRzPWEoYixyZXF1aXJlKFwiamRhdGF2aWV3XCIpKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFtcImpkYXRhdmlld1wiXSxmdW5jdGlvbihjKXtyZXR1cm4gYShiLGMpfSk6Yi5qQmluYXJ5PWEoYixiLmpEYXRhVmlldyl9KGZ1bmN0aW9uKGEsYil7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYyhhLGIpe3JldHVybiBiJiZhIGluc3RhbmNlb2YgYn1mdW5jdGlvbiBkKGEpe2Zvcih2YXIgYj0xLGM9YXJndW1lbnRzLmxlbmd0aDtjPmI7KytiKXt2YXIgZD1hcmd1bWVudHNbYl07Zm9yKHZhciBlIGluIGQpdm9pZCAwIT09ZFtlXSYmKGFbZV09ZFtlXSl9cmV0dXJuIGF9ZnVuY3Rpb24gZShhKXtyZXR1cm4gYXJndW1lbnRzWzBdPW0oYSksZC5hcHBseShudWxsLGFyZ3VtZW50cyl9ZnVuY3Rpb24gZihhLGIsZCl7cmV0dXJuIGMoZCxGdW5jdGlvbik/ZC5jYWxsKGEsYi5jb250ZXh0c1swXSk6ZH1mdW5jdGlvbiBnKGEpe3JldHVybiBmdW5jdGlvbigpe3ZhciBiPWFyZ3VtZW50cyxkPWIubGVuZ3RoLTEsZT1hLmxlbmd0aC0xLGY9YltkXTtpZihiLmxlbmd0aD1lKzEsIWMoZixGdW5jdGlvbikpe3ZhciBnPXRoaXM7cmV0dXJuIG5ldyBsKGZ1bmN0aW9uKGMsZCl7YltlXT1mdW5jdGlvbihhLGIpe3JldHVybiBhP2QoYSk6YyhiKX0sYS5hcHBseShnLGIpfSl9YltkXT12b2lkIDAsYltlXT1mLGEuYXBwbHkodGhpcyxiKX19ZnVuY3Rpb24gaChhLGQpe3JldHVybiBjKGEsaCk/YS5hcyhkKTooYyhhLGIpfHwoYT1uZXcgYihhLHZvaWQgMCx2b2lkIDAsZD9kW1wiakJpbmFyeS5saXR0bGVFbmRpYW5cIl06dm9pZCAwKSksYyh0aGlzLGgpPyh0aGlzLnZpZXc9YSx0aGlzLnZpZXcuc2VlaygwKSx0aGlzLmNvbnRleHRzPVtdLHRoaXMuYXMoZCwhMCkpOm5ldyBoKGEsZCkpfWZ1bmN0aW9uIGkoYSl7cmV0dXJuIGUoaS5wcm90b3R5cGUsYSl9ZnVuY3Rpb24gaihhKXtyZXR1cm4gZShqLnByb3RvdHlwZSxhLHtjcmVhdGVQcm9wZXJ0eTpmdW5jdGlvbigpe3ZhciBiPShhLmNyZWF0ZVByb3BlcnR5fHxqLnByb3RvdHlwZS5jcmVhdGVQcm9wZXJ0eSkuYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBiLmdldEJhc2VUeXBlJiYoYi5iYXNlVHlwZT1iLmJpbmFyeS5nZXRUeXBlKGIuZ2V0QmFzZVR5cGUoYi5iaW5hcnkuY29udGV4dHNbMF0pKSksYn19KX12YXIgaz1hLmRvY3VtZW50O1wiYXRvYlwiaW4gYSYmXCJidG9hXCJpbiBhfHwhZnVuY3Rpb24oKXtmdW5jdGlvbiBiKGEpe3ZhciBiLGMsZSxmLGcsaDtmb3IoZT1hLmxlbmd0aCxjPTAsYj1cIlwiO2U+Yzspe2lmKGY9MjU1JmEuY2hhckNvZGVBdChjKyspLGM9PWUpe2IrPWQuY2hhckF0KGY+PjIpLGIrPWQuY2hhckF0KCgzJmYpPDw0KSxiKz1cIj09XCI7YnJlYWt9aWYoZz1hLmNoYXJDb2RlQXQoYysrKSxjPT1lKXtiKz1kLmNoYXJBdChmPj4yKSxiKz1kLmNoYXJBdCgoMyZmKTw8NHwoMjQwJmcpPj40KSxiKz1kLmNoYXJBdCgoMTUmZyk8PDIpLGIrPVwiPVwiO2JyZWFrfWg9YS5jaGFyQ29kZUF0KGMrKyksYis9ZC5jaGFyQXQoZj4+MiksYis9ZC5jaGFyQXQoKDMmZik8PDR8KDI0MCZnKT4+NCksYis9ZC5jaGFyQXQoKDE1JmcpPDwyfCgxOTImaCk+PjYpLGIrPWQuY2hhckF0KDYzJmgpfXJldHVybiBifWZ1bmN0aW9uIGMoYSl7dmFyIGIsYyxkLGYsZyxoLGk7Zm9yKGg9YS5sZW5ndGgsZz0wLGk9XCJcIjtoPmc7KXtkbyBiPWVbMjU1JmEuY2hhckNvZGVBdChnKyspXTt3aGlsZShoPmcmJi0xPT1iKTtpZigtMT09YilicmVhaztkbyBjPWVbMjU1JmEuY2hhckNvZGVBdChnKyspXTt3aGlsZShoPmcmJi0xPT1jKTtpZigtMT09YylicmVhaztpKz1TdHJpbmcuZnJvbUNoYXJDb2RlKGI8PDJ8KDQ4JmMpPj40KTtkb3tpZihkPTI1NSZhLmNoYXJDb2RlQXQoZysrKSw2MT09ZClyZXR1cm4gaTtkPWVbZF19d2hpbGUoaD5nJiYtMT09ZCk7aWYoLTE9PWQpYnJlYWs7aSs9U3RyaW5nLmZyb21DaGFyQ29kZSgoMTUmYyk8PDR8KDYwJmQpPj4yKTtkb3tpZihmPTI1NSZhLmNoYXJDb2RlQXQoZysrKSw2MT09ZilyZXR1cm4gaTtmPWVbZl19d2hpbGUoaD5nJiYtMT09Zik7aWYoLTE9PWYpYnJlYWs7aSs9U3RyaW5nLmZyb21DaGFyQ29kZSgoMyZkKTw8NnxmKX1yZXR1cm4gaX12YXIgZD1cIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky9cIixlPVstMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwtMSw2MiwtMSwtMSwtMSw2Myw1Miw1Myw1NCw1NSw1Niw1Nyw1OCw1OSw2MCw2MSwtMSwtMSwtMSwtMSwtMSwtMSwtMSwwLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5LDIwLDIxLDIyLDIzLDI0LDI1LC0xLC0xLC0xLC0xLC0xLC0xLDI2LDI3LDI4LDI5LDMwLDMxLDMyLDMzLDM0LDM1LDM2LDM3LDM4LDM5LDQwLDQxLDQyLDQzLDQ0LDQ1LDQ2LDQ3LDQ4LDQ5LDUwLDUxLC0xLC0xLC0xLC0xLC0xXTthLmJ0b2F8fChhLmJ0b2E9YiksYS5hdG9ifHwoYS5hdG9iPWMpfSgpO3ZhciBsPWEuUHJvbWlzZXx8ZnVuY3Rpb24oYSl7dGhpcy50aGVuPWF9LG09T2JqZWN0LmNyZWF0ZTttfHwobT1mdW5jdGlvbihhKXt2YXIgYj1mdW5jdGlvbigpe307cmV0dXJuIGIucHJvdG90eXBlPWEsbmV3IGJ9KTt2YXIgbj1oLnByb3RvdHlwZSxvPW4udHlwZVNldD17fTtuLnRvVmFsdWU9ZnVuY3Rpb24oYSl7cmV0dXJuIGYodGhpcyx0aGlzLGEpfSxuLl9uYW1lZD1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIGEuZGlzcGxheU5hbWU9YitcIiBAIFwiKyh2b2lkIDAhPT1jP2M6dGhpcy52aWV3LnRlbGwoKSksYX07dmFyIHA9T2JqZWN0LmRlZmluZVByb3BlcnR5O2lmKHApdHJ5e3Aoe30sXCJ4XCIse30pfWNhdGNoKHEpe3A9dm9pZCAwfWVsc2UgcD1mdW5jdGlvbihhLGIsYyxkKXtkJiYoYVtiXT1jLnZhbHVlKX07dmFyIHI9XCJqQmluYXJ5LkNhY2hlXCIscz0wO24uX2dldENhY2hlZD1mdW5jdGlvbihhLGIsYyl7aWYoYS5oYXNPd25Qcm9wZXJ0eSh0aGlzLmNhY2hlS2V5KSlyZXR1cm4gYVt0aGlzLmNhY2hlS2V5XTt2YXIgZD1iLmNhbGwodGhpcyxhKTtyZXR1cm4gcChhLHRoaXMuY2FjaGVLZXkse3ZhbHVlOmR9LGMpLGR9LG4uZ2V0Q29udGV4dD1mdW5jdGlvbihhKXtzd2l0Y2godHlwZW9mIGEpe2Nhc2VcInVuZGVmaW5lZFwiOmE9MDtjYXNlXCJudW1iZXJcIjpyZXR1cm4gdGhpcy5jb250ZXh0c1thXTtjYXNlXCJzdHJpbmdcIjpyZXR1cm4gdGhpcy5nZXRDb250ZXh0KGZ1bmN0aW9uKGIpe3JldHVybiBhIGluIGJ9KTtjYXNlXCJmdW5jdGlvblwiOmZvcih2YXIgYj0wLGM9dGhpcy5jb250ZXh0cy5sZW5ndGg7Yz5iO2IrKyl7dmFyIGQ9dGhpcy5jb250ZXh0c1tiXTtpZihhLmNhbGwodGhpcyxkKSlyZXR1cm4gZH19fSxuLmluQ29udGV4dD1mdW5jdGlvbihhLGIpe3RoaXMuY29udGV4dHMudW5zaGlmdChhKTt2YXIgYz1iLmNhbGwodGhpcyk7cmV0dXJuIHRoaXMuY29udGV4dHMuc2hpZnQoKSxjfSxpLnByb3RvdHlwZT17aW5oZXJpdDpmdW5jdGlvbihhLGIpe2Z1bmN0aW9uIGMoYSxiKXt2YXIgYz1mW2FdO2MmJihkfHwoZD1lKGYpKSxiLmNhbGwoZCxjKSxkW2FdPW51bGwpfXZhciBkLGY9dGhpcztyZXR1cm4gYyhcInBhcmFtc1wiLGZ1bmN0aW9uKGIpe2Zvcih2YXIgYz0wLGQ9Yi5sZW5ndGg7ZD5jO2MrKyl0aGlzW2JbY11dPWFbY119KSxjKFwic2V0UGFyYW1zXCIsZnVuY3Rpb24oYil7Yi5hcHBseSh0aGlzLGEpfSksYyhcInR5cGVQYXJhbXNcIixmdW5jdGlvbihhKXtmb3IodmFyIGM9MCxkPWEubGVuZ3RoO2Q+YztjKyspe3ZhciBlPWFbY10sZj10aGlzW2VdO2YmJih0aGlzW2VdPWIoZikpfX0pLGMoXCJyZXNvbHZlXCIsZnVuY3Rpb24oYSl7YS5jYWxsKHRoaXMsYil9KSxkfHxmfSxjcmVhdGVQcm9wZXJ0eTpmdW5jdGlvbihhKXtyZXR1cm4gZSh0aGlzLHtiaW5hcnk6YSx2aWV3OmEudmlld30pfSx0b1ZhbHVlOmZ1bmN0aW9uKGEsYil7cmV0dXJuIGIhPT0hMSYmXCJzdHJpbmdcIj09dHlwZW9mIGE/dGhpcy5iaW5hcnkuZ2V0Q29udGV4dChhKVthXTpmKHRoaXMsdGhpcy5iaW5hcnksYSl9fSxoLlR5cGU9aSxqLnByb3RvdHlwZT1lKGkucHJvdG90eXBlLHtzZXRQYXJhbXM6ZnVuY3Rpb24oKXt0aGlzLmJhc2VUeXBlJiYodGhpcy50eXBlUGFyYW1zPVtcImJhc2VUeXBlXCJdLmNvbmNhdCh0aGlzLnR5cGVQYXJhbXN8fFtdKSl9LGJhc2VSZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYmluYXJ5LnJlYWQodGhpcy5iYXNlVHlwZSl9LGJhc2VXcml0ZTpmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5iaW5hcnkud3JpdGUodGhpcy5iYXNlVHlwZSxhKX19KSxkKGoucHJvdG90eXBlLHtyZWFkOmoucHJvdG90eXBlLmJhc2VSZWFkLHdyaXRlOmoucHJvdG90eXBlLmJhc2VXcml0ZX0pLGguVGVtcGxhdGU9aixuLmFzPWZ1bmN0aW9uKGEsYil7dmFyIGM9Yj90aGlzOmUodGhpcyk7cmV0dXJuIGE9YXx8byxjLnR5cGVTZXQ9YT09PW98fG8uaXNQcm90b3R5cGVPZihhKT9hOmUobyxhKSxjLmNhY2hlS2V5PXIsYy5jYWNoZUtleT1jLl9nZXRDYWNoZWQoYSxmdW5jdGlvbigpe3JldHVybiByK1wiLlwiKyArK3N9LCEwKSxjfSxuLnNlZWs9ZnVuY3Rpb24oYSxiKXtpZihhPXRoaXMudG9WYWx1ZShhKSx2b2lkIDAhPT1iKXt2YXIgYz10aGlzLnZpZXcudGVsbCgpO3RoaXMudmlldy5zZWVrKGEpO3ZhciBkPWIuY2FsbCh0aGlzKTtyZXR1cm4gdGhpcy52aWV3LnNlZWsoYyksZH1yZXR1cm4gdGhpcy52aWV3LnNlZWsoYSl9LG4udGVsbD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXcudGVsbCgpfSxuLnNraXA9ZnVuY3Rpb24oYSxiKXtyZXR1cm4gdGhpcy5zZWVrKHRoaXMudGVsbCgpK3RoaXMudG9WYWx1ZShhKSxiKX0sbi5zbGljZT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIG5ldyBoKHRoaXMudmlldy5zbGljZShhLGIsYyksdGhpcy50eXBlU2V0KX0sbi5fZ2V0VHlwZT1mdW5jdGlvbihhLGIpe3N3aXRjaCh0eXBlb2YgYSl7Y2FzZVwic3RyaW5nXCI6aWYoIShhIGluIHRoaXMudHlwZVNldCkpdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwiVW5rbm93biB0eXBlOiBcIithKTtyZXR1cm4gdGhpcy5fZ2V0VHlwZSh0aGlzLnR5cGVTZXRbYV0sYik7Y2FzZVwibnVtYmVyXCI6cmV0dXJuIHRoaXMuX2dldFR5cGUoby5iaXRmaWVsZCxbYV0pO2Nhc2VcIm9iamVjdFwiOmlmKGMoYSxpKSl7dmFyIGQ9dGhpcztyZXR1cm4gYS5pbmhlcml0KGJ8fFtdLGZ1bmN0aW9uKGEpe3JldHVybiBkLmdldFR5cGUoYSl9KX1yZXR1cm4gYyhhLEFycmF5KT90aGlzLl9nZXRDYWNoZWQoYSxmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRUeXBlKGFbMF0sYS5zbGljZSgxKSl9LCEwKTp0aGlzLl9nZXRDYWNoZWQoYSxmdW5jdGlvbihhKXtyZXR1cm4gdGhpcy5nZXRUeXBlKG8ub2JqZWN0LFthXSl9LCExKX19LG4uZ2V0VHlwZT1mdW5jdGlvbihhLGIpe3ZhciBkPXRoaXMuX2dldFR5cGUoYSxiKTtyZXR1cm4gZCYmIWMoYSxpKSYmKGQubmFtZT1cIm9iamVjdFwiPT10eXBlb2YgYT9jKGEsQXJyYXkpP2FbMF0rXCIoXCIrYS5zbGljZSgxKS5qb2luKFwiLCBcIikrXCIpXCI6XCJvYmplY3RcIjpTdHJpbmcoYSkpLGR9LG4uX2FjdGlvbj1mdW5jdGlvbihhLGIsYyl7aWYodm9pZCAwIT09YSl7YT10aGlzLmdldFR5cGUoYSk7dmFyIGQ9dGhpcy5fbmFtZWQoZnVuY3Rpb24oKXtyZXR1cm4gYy5jYWxsKHRoaXMsYS5jcmVhdGVQcm9wZXJ0eSh0aGlzKSx0aGlzLmNvbnRleHRzWzBdKX0sXCJbXCIrYS5uYW1lK1wiXVwiLGIpO3JldHVybiB2b2lkIDAhPT1iP3RoaXMuc2VlayhiLGQpOmQuY2FsbCh0aGlzKX19LG4ucmVhZD1mdW5jdGlvbihhLGIpe3JldHVybiB0aGlzLl9hY3Rpb24oYSxiLGZ1bmN0aW9uKGEsYil7cmV0dXJuIGEucmVhZChiKX0pfSxuLnJlYWRBbGw9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWFkKFwiakJpbmFyeS5hbGxcIiwwKX0sbi53cml0ZT1mdW5jdGlvbihhLGIsYyl7cmV0dXJuIHRoaXMuX2FjdGlvbihhLGMsZnVuY3Rpb24oYSxjKXt2YXIgZD10aGlzLnRlbGwoKTtyZXR1cm4gYS53cml0ZShiLGMpLHRoaXMudGVsbCgpLWR9KX0sbi53cml0ZUFsbD1mdW5jdGlvbihhKXtyZXR1cm4gdGhpcy53cml0ZShcImpCaW5hcnkuYWxsXCIsYSwwKX0sZnVuY3Rpb24oYSxiKXtmb3IodmFyIGM9MCxkPWIubGVuZ3RoO2Q+YztjKyspe3ZhciBmPWJbY107b1tmLnRvTG93ZXJDYXNlKCldPWUoYSx7ZGF0YVR5cGU6Zn0pfX0oaSh7cGFyYW1zOltcImxpdHRsZUVuZGlhblwiXSxyZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlld1tcImdldFwiK3RoaXMuZGF0YVR5cGVdKHZvaWQgMCx0aGlzLmxpdHRsZUVuZGlhbil9LHdyaXRlOmZ1bmN0aW9uKGEpe3RoaXMudmlld1tcIndyaXRlXCIrdGhpcy5kYXRhVHlwZV0oYSx0aGlzLmxpdHRsZUVuZGlhbil9fSksW1wiVWludDhcIixcIlVpbnQxNlwiLFwiVWludDMyXCIsXCJVaW50NjRcIixcIkludDhcIixcIkludDE2XCIsXCJJbnQzMlwiLFwiSW50NjRcIixcIkZsb2F0MzJcIixcIkZsb2F0NjRcIixcIkNoYXJcIl0pLGQobyx7XCJieXRlXCI6by51aW50OCxcImZsb2F0XCI6by5mbG9hdDMyLFwiZG91YmxlXCI6by5mbG9hdDY0fSksby5hcnJheT1qKHtwYXJhbXM6W1wiYmFzZVR5cGVcIixcImxlbmd0aFwiXSxyZWFkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy50b1ZhbHVlKHRoaXMubGVuZ3RoKTtpZih0aGlzLmJhc2VUeXBlPT09by51aW50OClyZXR1cm4gdGhpcy52aWV3LmdldEJ5dGVzKGEsdm9pZCAwLCEwLCEwKTt2YXIgYjtpZih2b2lkIDAhPT1hKXtiPW5ldyBBcnJheShhKTtmb3IodmFyIGM9MDthPmM7YysrKWJbY109dGhpcy5iYXNlUmVhZCgpfWVsc2V7dmFyIGQ9dGhpcy52aWV3LmJ5dGVMZW5ndGg7Zm9yKGI9W107dGhpcy5iaW5hcnkudGVsbCgpPGQ7KWIucHVzaCh0aGlzLmJhc2VSZWFkKCkpfXJldHVybiBifSx3cml0ZTpmdW5jdGlvbihhKXtpZih0aGlzLmJhc2VUeXBlPT09by51aW50OClyZXR1cm4gdGhpcy52aWV3LndyaXRlQnl0ZXMoYSk7Zm9yKHZhciBiPTAsYz1hLmxlbmd0aDtjPmI7YisrKXRoaXMuYmFzZVdyaXRlKGFbYl0pfX0pLG8uYmluYXJ5PWooe3BhcmFtczpbXCJsZW5ndGhcIixcInR5cGVTZXRcIl0scmVhZDpmdW5jdGlvbigpe3ZhciBhPXRoaXMuYmluYXJ5LnRlbGwoKSxiPXRoaXMuYmluYXJ5LnNraXAodGhpcy50b1ZhbHVlKHRoaXMubGVuZ3RoKSksYz10aGlzLnZpZXcuc2xpY2UoYSxiKTtyZXR1cm4gbmV3IGgoYyx0aGlzLnR5cGVTZXQpfSx3cml0ZTpmdW5jdGlvbihhKXt0aGlzLmJpbmFyeS53cml0ZShcImJsb2JcIixhLnJlYWQoXCJibG9iXCIsMCkpfX0pLG8uYml0ZmllbGQ9aSh7cGFyYW1zOltcImJpdFNpemVcIl0scmVhZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXcuZ2V0VW5zaWduZWQodGhpcy5iaXRTaXplKX0sd3JpdGU6ZnVuY3Rpb24oYSl7dGhpcy52aWV3LndyaXRlVW5zaWduZWQoYSx0aGlzLmJpdFNpemUpfX0pLG8uYmxvYj1pKHtwYXJhbXM6W1wibGVuZ3RoXCJdLHJlYWQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52aWV3LmdldEJ5dGVzKHRoaXMudG9WYWx1ZSh0aGlzLmxlbmd0aCkpfSx3cml0ZTpmdW5jdGlvbihhKXt0aGlzLnZpZXcud3JpdGVCeXRlcyhhLCEwKX19KSxvW1wiY29uc3RcIl09aih7cGFyYW1zOltcImJhc2VUeXBlXCIsXCJ2YWx1ZVwiLFwic3RyaWN0XCJdLHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmJhc2VSZWFkKCk7aWYodGhpcy5zdHJpY3QmJmEhPT10aGlzLnZhbHVlKXtpZihjKHRoaXMuc3RyaWN0LEZ1bmN0aW9uKSlyZXR1cm4gdGhpcy5zdHJpY3QoYSk7dGhyb3cgbmV3IFR5cGVFcnJvcihcIlVuZXhwZWN0ZWQgdmFsdWUgKFwiK2ErXCIgIT09IFwiK3RoaXMudmFsdWUrXCIpLlwiKX1yZXR1cm4gYX0sd3JpdGU6ZnVuY3Rpb24oYSl7dGhpcy5iYXNlV3JpdGUodGhpcy5zdHJpY3R8fHZvaWQgMD09PWE/dGhpcy52YWx1ZTphKX19KSxvW1wiZW51bVwiXT1qKHtwYXJhbXM6W1wiYmFzZVR5cGVcIixcIm1hdGNoZXNcIl0sc2V0UGFyYW1zOmZ1bmN0aW9uKGEsYil7dGhpcy5iYWNrTWF0Y2hlcz17fTtmb3IodmFyIGMgaW4gYil0aGlzLmJhY2tNYXRjaGVzW2JbY11dPWN9LHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLmJhc2VSZWFkKCk7cmV0dXJuIGEgaW4gdGhpcy5tYXRjaGVzP3RoaXMubWF0Y2hlc1thXTphfSx3cml0ZTpmdW5jdGlvbihhKXt0aGlzLmJhc2VXcml0ZShhIGluIHRoaXMuYmFja01hdGNoZXM/dGhpcy5iYWNrTWF0Y2hlc1thXTphKX19KSxvLmV4dGVuZD1pKHtzZXRQYXJhbXM6ZnVuY3Rpb24oKXt0aGlzLnBhcnRzPWFyZ3VtZW50c30scmVzb2x2ZTpmdW5jdGlvbihhKXtmb3IodmFyIGI9dGhpcy5wYXJ0cyxjPWIubGVuZ3RoLGQ9bmV3IEFycmF5KGMpLGU9MDtjPmU7ZSsrKWRbZV09YShiW2VdKTt0aGlzLnBhcnRzPWR9LHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLnBhcnRzLGI9dGhpcy5iaW5hcnkucmVhZChhWzBdKTtyZXR1cm4gdGhpcy5iaW5hcnkuaW5Db250ZXh0KGIsZnVuY3Rpb24oKXtmb3IodmFyIGM9MSxlPWEubGVuZ3RoO2U+YztjKyspZChiLHRoaXMucmVhZChhW2NdKSl9KSxifSx3cml0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnBhcnRzO3RoaXMuYmluYXJ5LmluQ29udGV4dChhLGZ1bmN0aW9uKCl7Zm9yKHZhciBjPTAsZD1iLmxlbmd0aDtkPmM7YysrKXRoaXMud3JpdGUoYltjXSxhKX0pfX0pLG9bXCJpZlwiXT1qKHtwYXJhbXM6W1wiY29uZGl0aW9uXCIsXCJ0cnVlVHlwZVwiLFwiZmFsc2VUeXBlXCJdLHR5cGVQYXJhbXM6W1widHJ1ZVR5cGVcIixcImZhbHNlVHlwZVwiXSxnZXRCYXNlVHlwZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnRvVmFsdWUodGhpcy5jb25kaXRpb24pP3RoaXMudHJ1ZVR5cGU6dGhpcy5mYWxzZVR5cGV9fSksby5pZl9ub3Q9by5pZk5vdD1qKHtzZXRQYXJhbXM6ZnVuY3Rpb24oYSxiLGMpe3RoaXMuYmFzZVR5cGU9W1wiaWZcIixhLGMsYl19fSksby5sYXp5PWooe21hcmtlcjpcImpCaW5hcnkuTGF6eVwiLHBhcmFtczpbXCJpbm5lclR5cGVcIixcImxlbmd0aFwiXSxnZXRCYXNlVHlwZTpmdW5jdGlvbigpe3JldHVybltcImJpbmFyeVwiLHRoaXMubGVuZ3RoLHRoaXMuYmluYXJ5LnR5cGVTZXRdfSxyZWFkOmZ1bmN0aW9uKCl7dmFyIGE9ZnVuY3Rpb24oYil7cmV0dXJuIDA9PT1hcmd1bWVudHMubGVuZ3RoP1widmFsdWVcImluIGE/YS52YWx1ZTphLnZhbHVlPWEuYmluYXJ5LnJlYWQoYS5pbm5lclR5cGUpOmQoYSx7d2FzQ2hhbmdlZDohMCx2YWx1ZTpifSkudmFsdWV9O3JldHVybiBhW3RoaXMubWFya2VyXT0hMCxkKGEse2JpbmFyeTpkKHRoaXMuYmFzZVJlYWQoKSx7Y29udGV4dHM6dGhpcy5iaW5hcnkuY29udGV4dHMuc2xpY2UoKX0pLGlubmVyVHlwZTp0aGlzLmlubmVyVHlwZX0pfSx3cml0ZTpmdW5jdGlvbihhKXthLndhc0NoYW5nZWR8fCFhW3RoaXMubWFya2VyXT90aGlzLmJpbmFyeS53cml0ZSh0aGlzLmlubmVyVHlwZSxhKCkpOnRoaXMuYmFzZVdyaXRlKGEuYmluYXJ5KX19KSxvLm9iamVjdD1pKHtwYXJhbXM6W1wic3RydWN0dXJlXCIsXCJwcm90b1wiXSxyZXNvbHZlOmZ1bmN0aW9uKGEpe3ZhciBiPXt9O2Zvcih2YXIgZCBpbiB0aGlzLnN0cnVjdHVyZSliW2RdPWModGhpcy5zdHJ1Y3R1cmVbZF0sRnVuY3Rpb24pP3RoaXMuc3RydWN0dXJlW2RdOmEodGhpcy5zdHJ1Y3R1cmVbZF0pO3RoaXMuc3RydWN0dXJlPWJ9LHJlYWQ6ZnVuY3Rpb24oKXt2YXIgYT10aGlzLGI9dGhpcy5zdHJ1Y3R1cmUsZD10aGlzLnByb3RvP2UodGhpcy5wcm90byk6e307cmV0dXJuIHRoaXMuYmluYXJ5LmluQ29udGV4dChkLGZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIGIpdGhpcy5fbmFtZWQoZnVuY3Rpb24oKXt2YXIgZj1jKGJbZV0sRnVuY3Rpb24pP2JbZV0uY2FsbChhLGQpOnRoaXMucmVhZChiW2VdKTt2b2lkIDAhPT1mJiYoZFtlXT1mKX0sZSkuY2FsbCh0aGlzKX0pLGR9LHdyaXRlOmZ1bmN0aW9uKGEpe3ZhciBiPXRoaXMsZD10aGlzLnN0cnVjdHVyZTt0aGlzLmJpbmFyeS5pbkNvbnRleHQoYSxmdW5jdGlvbigpe2Zvcih2YXIgZSBpbiBkKXRoaXMuX25hbWVkKGZ1bmN0aW9uKCl7YyhkW2VdLEZ1bmN0aW9uKT9hW2VdPWRbZV0uY2FsbChiLGEpOnRoaXMud3JpdGUoZFtlXSxhW2VdKX0sZSkuY2FsbCh0aGlzKX0pfX0pLG8uc2tpcD1pKHtwYXJhbXM6W1wibGVuZ3RoXCJdLHJlYWQ6ZnVuY3Rpb24oKXt0aGlzLnZpZXcuc2tpcCh0aGlzLnRvVmFsdWUodGhpcy5sZW5ndGgpKX0sd3JpdGU6ZnVuY3Rpb24oKXt0aGlzLnJlYWQoKX19KSxvLnN0cmluZz1qKHtwYXJhbXM6W1wibGVuZ3RoXCIsXCJlbmNvZGluZ1wiXSxyZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmlldy5nZXRTdHJpbmcodGhpcy50b1ZhbHVlKHRoaXMubGVuZ3RoKSx2b2lkIDAsdGhpcy5lbmNvZGluZyl9LHdyaXRlOmZ1bmN0aW9uKGEpe3RoaXMudmlldy53cml0ZVN0cmluZyhhLHRoaXMuZW5jb2RpbmcpfX0pLG8uc3RyaW5nMD1pKHtwYXJhbXM6W1wibGVuZ3RoXCIsXCJlbmNvZGluZ1wiXSxyZWFkOmZ1bmN0aW9uKCl7dmFyIGE9dGhpcy52aWV3LGI9dGhpcy5sZW5ndGg7aWYodm9pZCAwPT09Yil7dmFyIGMsZD1hLnRlbGwoKSxlPTA7Zm9yKGI9YS5ieXRlTGVuZ3RoLWQ7Yj5lJiYoYz1hLmdldFVpbnQ4KCkpOyllKys7dmFyIGY9YS5nZXRTdHJpbmcoZSxkLHRoaXMuZW5jb2RpbmcpO3JldHVybiBiPmUmJmEuc2tpcCgxKSxmfXJldHVybiBhLmdldFN0cmluZyhiLHZvaWQgMCx0aGlzLmVuY29kaW5nKS5yZXBsYWNlKC9cXDAuKiQvLFwiXCIpfSx3cml0ZTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnZpZXcsYz12b2lkIDA9PT10aGlzLmxlbmd0aD8xOnRoaXMubGVuZ3RoLWEubGVuZ3RoO2Iud3JpdGVTdHJpbmcoYSx2b2lkIDAsdGhpcy5lbmNvZGluZyksYz4wJiYoYi53cml0ZVVpbnQ4KDApLGIuc2tpcChjLTEpKX19KTtoLmxvYWREYXRhPWcoZnVuY3Rpb24oYixkKXt2YXIgZTtpZihjKGIsYS5CbG9iKSl7dmFyIGY7aWYoXCJGaWxlUmVhZGVyXCJpbiBhKWY9bmV3IEZpbGVSZWFkZXIsZi5vbmxvYWQ9Zi5vbmVycm9yPWZ1bmN0aW9uKCl7ZCh0aGlzLmVycm9yLHRoaXMucmVzdWx0KX0sZi5yZWFkQXNBcnJheUJ1ZmZlcihiKTtlbHNle2Y9bmV3IEZpbGVSZWFkZXJTeW5jO3ZhciBnLGg7dHJ5e2g9Zi5yZWFkQXNBcnJheUJ1ZmZlcihiKX1jYXRjaChpKXtnPWl9ZmluYWxseXtkKGcsaCl9fX1lbHNle2lmKFwic3RyaW5nXCIhPXR5cGVvZiBiKWQobmV3IFR5cGVFcnJvcihcIlVuc3VwcG9ydGVkIHNvdXJjZSB0eXBlLlwiKSk7ZWxzZSBpZihlPWIubWF0Y2goL15kYXRhOiguKz8pKDtiYXNlNjQpPywoLiopJC8pKXRyeXt2YXIgaj1lWzJdLGs9ZVszXTtkKG51bGwsKGo/YXRvYjpkZWNvZGVVUklDb21wb25lbnQpKGspKX1jYXRjaChpKXtkKGkpfWVsc2UgaWYoXCJYTUxIdHRwUmVxdWVzdFwiaW4gYSl7dmFyIGw9bmV3IFhNTEh0dHBSZXF1ZXN0O2wub3BlbihcIkdFVFwiLGIsITApLFwicmVzcG9uc2VUeXBlXCJpbiBsP2wucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIjpcIm92ZXJyaWRlTWltZVR5cGVcImluIGw/bC5vdmVycmlkZU1pbWVUeXBlKFwidGV4dC9wbGFpbjsgY2hhcnNldD14LXVzZXItZGVmaW5lZFwiKTpsLnNldFJlcXVlc3RIZWFkZXIoXCJBY2NlcHQtQ2hhcnNldFwiLFwieC11c2VyLWRlZmluZWRcIiksXCJvbmxvYWRcImluIGx8fChsLm9ucmVhZHlzdGF0ZWNoYW5nZT1mdW5jdGlvbigpezQ9PT10aGlzLnJlYWR5U3RhdGUmJnRoaXMub25sb2FkKCl9KTt2YXIgbT1mdW5jdGlvbihhKXtkKG5ldyBFcnJvcihhKSl9O2wub25sb2FkPWZ1bmN0aW9uKCl7cmV0dXJuIDAhPT10aGlzLnN0YXR1cyYmMjAwIT09dGhpcy5zdGF0dXM/bShcIkhUVFAgRXJyb3IgI1wiK3RoaXMuc3RhdHVzK1wiOiBcIit0aGlzLnN0YXR1c1RleHQpOihcInJlc3BvbnNlXCJpbiB0aGlzfHwodGhpcy5yZXNwb25zZT1uZXcgVkJBcnJheSh0aGlzLnJlc3BvbnNlQm9keSkudG9BcnJheSgpKSx2b2lkIGQobnVsbCx0aGlzLnJlc3BvbnNlKSl9LGwub25lcnJvcj1mdW5jdGlvbigpe20oXCJOZXR3b3JrIGVycm9yLlwiKX0sbC5zZW5kKG51bGwpfWVsc2UgZChuZXcgVHlwZUVycm9yKFwiVW5zdXBwb3J0ZWQgc291cmNlIHR5cGUuXCIpKX19KSxoLmxvYWQ9ZyhmdW5jdGlvbihhLGIsYyl7dmFyIGQ9aC5sb2FkRGF0YShhKTtoLmxvYWQuZ2V0VHlwZVNldChhLGIsZnVuY3Rpb24oYSl7ZC50aGVuKGZ1bmN0aW9uKGIpe2MobnVsbCxuZXcgaChiLGEpKX0sYyl9KX0pLGgubG9hZC5nZXRUeXBlU2V0PWZ1bmN0aW9uKGEsYixjKXtjKGIpfSxuLl90b1VSST1cIlVSTFwiaW4gYSYmXCJjcmVhdGVPYmplY3RVUkxcImluIFVSTD9mdW5jdGlvbihhKXt2YXIgYj10aGlzLnNlZWsoMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXcuZ2V0Qnl0ZXMoKX0pO3JldHVybiBVUkwuY3JlYXRlT2JqZWN0VVJMKG5ldyBCbG9iKFtiXSx7dHlwZTphfSkpfTpmdW5jdGlvbihhKXt2YXIgYj10aGlzLnNlZWsoMCxmdW5jdGlvbigpe3JldHVybiB0aGlzLnZpZXcuZ2V0U3RyaW5nKHZvaWQgMCx2b2lkIDAsXCJiaW5hcnlcIil9KTtyZXR1cm5cImRhdGE6XCIrYStcIjtiYXNlNjQsXCIrYnRvYShiKX0sbi5fbWltZVR5cGU9ZnVuY3Rpb24oYSl7cmV0dXJuIGF8fHRoaXMudHlwZVNldFtcImpCaW5hcnkubWltZVR5cGVcIl18fFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCJ9LG4udG9VUkk9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuX3RvVVJJKHRoaXMuX21pbWVUeXBlKGEpKX07aWYoayl7dmFyIHQ9aC5kb3dubG9hZGVyPWsuY3JlYXRlRWxlbWVudChcImFcIik7dC5zdHlsZS5kaXNwbGF5PVwibm9uZVwifXJldHVybiBuLnNhdmVBcz1nKGZ1bmN0aW9uKGEsYixjKXtpZihcInN0cmluZ1wiPT10eXBlb2YgYSl7XCJtc1NhdmVCbG9iXCJpbiBuYXZpZ2F0b3I/bmF2aWdhdG9yLm1zU2F2ZUJsb2IobmV3IEJsb2IoW3RoaXMucmVhZChcImJsb2JcIiwwKV0se3R5cGU6dGhpcy5fbWltZVR5cGUoYil9KSxhKTprPyh0LnBhcmVudE5vZGV8fGsuYm9keS5hcHBlbmRDaGlsZCh0KSx0LmhyZWY9dGhpcy50b1VSSShiKSx0LmRvd25sb2FkPWEsdC5jbGljaygpLHQuaHJlZj10LmRvd25sb2FkPVwiXCIpOmMobmV3IFR5cGVFcnJvcihcIlNhdmluZyBmcm9tIFdlYiBXb3JrZXIgaXMgbm90IHN1cHBvcnRlZC5cIikpLGMoKX1lbHNlIGMobmV3IFR5cGVFcnJvcihcIlVuc3VwcG9ydGVkIHN0b3JhZ2UgdHlwZS5cIikpfSksaH0pO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9amJpbmFyeS5qcy5tYXAiLCIhZnVuY3Rpb24oZmFjdG9yeSkge1xuICAgIHZhciBnbG9iYWwgPSB0aGlzO1xuICAgIG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeShnbG9iYWwpO1xufShmdW5jdGlvbihnbG9iYWwpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBmdW5jdGlvbiBpcyhvYmosIEN0b3IpIHtcbiAgICAgICAgcmV0dXJuIFwib2JqZWN0XCIgIT0gdHlwZW9mIG9iaiB8fCBudWxsID09PSBvYmogPyAhMSA6IG9iai5jb25zdHJ1Y3RvciA9PT0gQ3RvciB8fCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSA9PT0gXCJbb2JqZWN0IFwiICsgQ3Rvci5uYW1lICsgXCJdXCI7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGFycmF5RnJvbShhcnJheUxpa2UsIGZvcmNlQ29weSkge1xuICAgICAgICByZXR1cm4gIWZvcmNlQ29weSAmJiBpcyhhcnJheUxpa2UsIEFycmF5KSA/IGFycmF5TGlrZSA6IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFycmF5TGlrZSk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGRlZmluZWQodmFsdWUsIGRlZmF1bHRWYWx1ZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB2YWx1ZSA/IHZhbHVlIDogZGVmYXVsdFZhbHVlO1xuICAgIH1cbiAgICBmdW5jdGlvbiBqRGF0YVZpZXcoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgaWYgKGpEYXRhVmlldy5pcyhidWZmZXIpKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gYnVmZmVyLnNsaWNlKGJ5dGVPZmZzZXQsIGJ5dGVPZmZzZXQgKyBieXRlTGVuZ3RoKTtcbiAgICAgICAgICAgIHJldHVybiByZXN1bHQuX2xpdHRsZUVuZGlhbiA9IGRlZmluZWQobGl0dGxlRW5kaWFuLCByZXN1bHQuX2xpdHRsZUVuZGlhbiksIHJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIWpEYXRhVmlldy5pcyh0aGlzKSkgcmV0dXJuIG5ldyBqRGF0YVZpZXcoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICBpZiAodGhpcy5idWZmZXIgPSBidWZmZXIgPSBqRGF0YVZpZXcud3JhcEJ1ZmZlcihidWZmZXIpLCB0aGlzLl9pc0FycmF5QnVmZmVyID0gY29tcGF0aWJpbGl0eS5BcnJheUJ1ZmZlciAmJiBpcyhidWZmZXIsIEFycmF5QnVmZmVyKSwgXG4gICAgICAgIHRoaXMuX2lzUGl4ZWxEYXRhID0gITEsIHRoaXMuX2lzRGF0YVZpZXcgPSBjb21wYXRpYmlsaXR5LkRhdGFWaWV3ICYmIHRoaXMuX2lzQXJyYXlCdWZmZXIsIFxuICAgICAgICB0aGlzLl9pc05vZGVCdWZmZXIgPSAhMCAmJiBjb21wYXRpYmlsaXR5Lk5vZGVCdWZmZXIgJiYgaXMoYnVmZmVyLCBCdWZmZXIpLCAhdGhpcy5faXNOb2RlQnVmZmVyICYmICF0aGlzLl9pc0FycmF5QnVmZmVyICYmICFpcyhidWZmZXIsIEFycmF5KSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcImpEYXRhVmlldyBidWZmZXIgaGFzIGFuIGluY29tcGF0aWJsZSB0eXBlXCIpO1xuICAgICAgICB0aGlzLl9saXR0bGVFbmRpYW4gPSAhIWxpdHRsZUVuZGlhbjtcbiAgICAgICAgdmFyIGJ1ZmZlckxlbmd0aCA9IFwiYnl0ZUxlbmd0aFwiIGluIGJ1ZmZlciA/IGJ1ZmZlci5ieXRlTGVuZ3RoIDogYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5ieXRlT2Zmc2V0ID0gYnl0ZU9mZnNldCA9IGRlZmluZWQoYnl0ZU9mZnNldCwgMCksIHRoaXMuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPSBkZWZpbmVkKGJ5dGVMZW5ndGgsIGJ1ZmZlckxlbmd0aCAtIGJ5dGVPZmZzZXQpLCBcbiAgICAgICAgdGhpcy5fb2Zmc2V0ID0gdGhpcy5fYml0T2Zmc2V0ID0gMCwgdGhpcy5faXNEYXRhVmlldyA/IHRoaXMuX3ZpZXcgPSBuZXcgRGF0YVZpZXcoYnVmZmVyLCBieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKSA6IHRoaXMuX2NoZWNrQm91bmRzKGJ5dGVPZmZzZXQsIGJ5dGVMZW5ndGgsIGJ1ZmZlckxlbmd0aCksIFxuICAgICAgICB0aGlzLl9lbmdpbmVBY3Rpb24gPSB0aGlzLl9pc0RhdGFWaWV3ID8gdGhpcy5fZGF0YVZpZXdBY3Rpb24gOiB0aGlzLl9pc05vZGVCdWZmZXIgPyB0aGlzLl9ub2RlQnVmZmVyQWN0aW9uIDogdGhpcy5faXNBcnJheUJ1ZmZlciA/IHRoaXMuX2FycmF5QnVmZmVyQWN0aW9uIDogdGhpcy5fYXJyYXlBY3Rpb247XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldENoYXJDb2RlcyhzdHJpbmcpIHtcbiAgICAgICAgaWYgKGNvbXBhdGliaWxpdHkuTm9kZUJ1ZmZlcikgcmV0dXJuIG5ldyBCdWZmZXIoc3RyaW5nLCBcImJpbmFyeVwiKTtcbiAgICAgICAgZm9yICh2YXIgVHlwZSA9IGNvbXBhdGliaWxpdHkuQXJyYXlCdWZmZXIgPyBVaW50OEFycmF5IDogQXJyYXksIGNvZGVzID0gbmV3IFR5cGUoc3RyaW5nLmxlbmd0aCksIGkgPSAwLCBsZW5ndGggPSBzdHJpbmcubGVuZ3RoOyBsZW5ndGggPiBpOyBpKyspIGNvZGVzW2ldID0gMjU1ICYgc3RyaW5nLmNoYXJDb2RlQXQoaSk7XG4gICAgICAgIHJldHVybiBjb2RlcztcbiAgICB9XG4gICAgZnVuY3Rpb24gcG93MihuKSB7XG4gICAgICAgIHJldHVybiBuID49IDAgJiYgMzEgPiBuID8gMSA8PCBuIDogcG93MltuXSB8fCAocG93MltuXSA9IE1hdGgucG93KDIsIG4pKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gVWludDY0KGxvLCBoaSkge1xuICAgICAgICB0aGlzLmxvID0gbG8sIHRoaXMuaGkgPSBoaTtcbiAgICB9XG4gICAgZnVuY3Rpb24gSW50NjQoKSB7XG4gICAgICAgIFVpbnQ2NC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICB2YXIgY29tcGF0aWJpbGl0eSA9IHtcbiAgICAgICAgTm9kZUJ1ZmZlcjogITAgJiYgXCJCdWZmZXJcIiBpbiBnbG9iYWwsXG4gICAgICAgIERhdGFWaWV3OiBcIkRhdGFWaWV3XCIgaW4gZ2xvYmFsLFxuICAgICAgICBBcnJheUJ1ZmZlcjogXCJBcnJheUJ1ZmZlclwiIGluIGdsb2JhbCxcbiAgICAgICAgUGl4ZWxEYXRhOiAhMVxuICAgIH0sIFRleHRFbmNvZGVyID0gZ2xvYmFsLlRleHRFbmNvZGVyLCBUZXh0RGVjb2RlciA9IGdsb2JhbC5UZXh0RGVjb2RlcjtcbiAgICBjb21wYXRpYmlsaXR5Lk5vZGVCdWZmZXIgJiYgIWZ1bmN0aW9uKGJ1ZmZlcikge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYnVmZmVyLndyaXRlRmxvYXRMRSgxLzAsIDApO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBjb21wYXRpYmlsaXR5Lk5vZGVCdWZmZXIgPSAhMTtcbiAgICAgICAgfVxuICAgIH0obmV3IEJ1ZmZlcig0KSk7XG4gICAgdmFyIGRhdGFUeXBlcyA9IHtcbiAgICAgICAgSW50ODogMSxcbiAgICAgICAgSW50MTY6IDIsXG4gICAgICAgIEludDMyOiA0LFxuICAgICAgICBVaW50ODogMSxcbiAgICAgICAgVWludDE2OiAyLFxuICAgICAgICBVaW50MzI6IDQsXG4gICAgICAgIEZsb2F0MzI6IDQsXG4gICAgICAgIEZsb2F0NjQ6IDhcbiAgICB9O1xuICAgIGpEYXRhVmlldy53cmFwQnVmZmVyID0gZnVuY3Rpb24oYnVmZmVyKSB7XG4gICAgICAgIHN3aXRjaCAodHlwZW9mIGJ1ZmZlcikge1xuICAgICAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgICAgIGlmIChjb21wYXRpYmlsaXR5Lk5vZGVCdWZmZXIpIGJ1ZmZlciA9IG5ldyBCdWZmZXIoYnVmZmVyKSwgYnVmZmVyLmZpbGwoMCk7IGVsc2UgaWYgKGNvbXBhdGliaWxpdHkuQXJyYXlCdWZmZXIpIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcikuYnVmZmVyOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBidWZmZXIgPSBuZXcgQXJyYXkoYnVmZmVyKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGg7IGkrKykgYnVmZmVyW2ldID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBidWZmZXI7XG5cbiAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICBidWZmZXIgPSBnZXRDaGFyQ29kZXMoYnVmZmVyKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJsZW5ndGhcIiBpbiBidWZmZXIgJiYgIShjb21wYXRpYmlsaXR5Lk5vZGVCdWZmZXIgJiYgaXMoYnVmZmVyLCBCdWZmZXIpIHx8IGNvbXBhdGliaWxpdHkuQXJyYXlCdWZmZXIgJiYgaXMoYnVmZmVyLCBBcnJheUJ1ZmZlcikpICYmIChjb21wYXRpYmlsaXR5Lk5vZGVCdWZmZXIgPyBidWZmZXIgPSBuZXcgQnVmZmVyKGJ1ZmZlcikgOiBjb21wYXRpYmlsaXR5LkFycmF5QnVmZmVyID8gaXMoYnVmZmVyLCBBcnJheUJ1ZmZlcikgfHwgKGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcikuYnVmZmVyLCBcbiAgICAgICAgICAgIGlzKGJ1ZmZlciwgQXJyYXlCdWZmZXIpIHx8IChidWZmZXIgPSBuZXcgVWludDhBcnJheShhcnJheUZyb20oYnVmZmVyLCAhMCkpLmJ1ZmZlcikpIDogYnVmZmVyID0gYXJyYXlGcm9tKGJ1ZmZlcikpLCBcbiAgICAgICAgICAgIGJ1ZmZlcjtcbiAgICAgICAgfVxuICAgIH0sIGpEYXRhVmlldy5pcyA9IGZ1bmN0aW9uKHZpZXcpIHtcbiAgICAgICAgcmV0dXJuIHZpZXcgJiYgdmlldy5qRGF0YVZpZXc7XG4gICAgfSwgakRhdGFWaWV3LmZyb20gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBqRGF0YVZpZXcoYXJndW1lbnRzKTtcbiAgICB9LCBqRGF0YVZpZXcuVWludDY0ID0gVWludDY0LCBVaW50NjQucHJvdG90eXBlID0ge1xuICAgICAgICB2YWx1ZU9mOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvICsgcG93MigzMikgKiB0aGlzLmhpO1xuICAgICAgICB9LFxuICAgICAgICB0b1N0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICByZXR1cm4gTnVtYmVyLnByb3RvdHlwZS50b1N0cmluZy5hcHBseSh0aGlzLnZhbHVlT2YoKSwgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH0sIFVpbnQ2NC5mcm9tTnVtYmVyID0gZnVuY3Rpb24obnVtYmVyKSB7XG4gICAgICAgIHZhciBoaSA9IE1hdGguZmxvb3IobnVtYmVyIC8gcG93MigzMikpLCBsbyA9IG51bWJlciAtIGhpICogcG93MigzMik7XG4gICAgICAgIHJldHVybiBuZXcgVWludDY0KGxvLCBoaSk7XG4gICAgfSwgakRhdGFWaWV3LkludDY0ID0gSW50NjQsIEludDY0LnByb3RvdHlwZSA9IFwiY3JlYXRlXCIgaW4gT2JqZWN0ID8gT2JqZWN0LmNyZWF0ZShVaW50NjQucHJvdG90eXBlKSA6IG5ldyBVaW50NjQoKSwgXG4gICAgSW50NjQucHJvdG90eXBlLnZhbHVlT2YgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaGkgPCBwb3cyKDMxKSA/IFVpbnQ2NC5wcm90b3R5cGUudmFsdWVPZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDogLShwb3cyKDMyKSAtIHRoaXMubG8gKyBwb3cyKDMyKSAqIChwb3cyKDMyKSAtIDEgLSB0aGlzLmhpKSk7XG4gICAgfSwgSW50NjQuZnJvbU51bWJlciA9IGZ1bmN0aW9uKG51bWJlcikge1xuICAgICAgICB2YXIgbG8sIGhpO1xuICAgICAgICBpZiAobnVtYmVyID49IDApIHtcbiAgICAgICAgICAgIHZhciB1bnNpZ25lZCA9IFVpbnQ2NC5mcm9tTnVtYmVyKG51bWJlcik7XG4gICAgICAgICAgICBsbyA9IHVuc2lnbmVkLmxvLCBoaSA9IHVuc2lnbmVkLmhpO1xuICAgICAgICB9IGVsc2UgaGkgPSBNYXRoLmZsb29yKG51bWJlciAvIHBvdzIoMzIpKSwgbG8gPSBudW1iZXIgLSBoaSAqIHBvdzIoMzIpLCBoaSArPSBwb3cyKDMyKTtcbiAgICAgICAgcmV0dXJuIG5ldyBJbnQ2NChsbywgaGkpO1xuICAgIH07XG4gICAgdmFyIHByb3RvID0gakRhdGFWaWV3LnByb3RvdHlwZSA9IHtcbiAgICAgICAgY29tcGF0aWJpbGl0eTogY29tcGF0aWJpbGl0eSxcbiAgICAgICAgakRhdGFWaWV3OiAhMCxcbiAgICAgICAgX2NoZWNrQm91bmRzOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhMZW5ndGgpIHtcbiAgICAgICAgICAgIGlmIChcIm51bWJlclwiICE9IHR5cGVvZiBieXRlT2Zmc2V0KSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2Zmc2V0IGlzIG5vdCBhIG51bWJlci5cIik7XG4gICAgICAgICAgICBpZiAoXCJudW1iZXJcIiAhPSB0eXBlb2YgYnl0ZUxlbmd0aCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlNpemUgaXMgbm90IGEgbnVtYmVyLlwiKTtcbiAgICAgICAgICAgIGlmICgwID4gYnl0ZUxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoXCJMZW5ndGggaXMgbmVnYXRpdmUuXCIpO1xuICAgICAgICAgICAgaWYgKDAgPiBieXRlT2Zmc2V0IHx8IGJ5dGVPZmZzZXQgKyBieXRlTGVuZ3RoID4gZGVmaW5lZChtYXhMZW5ndGgsIHRoaXMuYnl0ZUxlbmd0aCkpIHRocm93IG5ldyBSYW5nZUVycm9yKFwiT2Zmc2V0cyBhcmUgb3V0IG9mIGJvdW5kcy5cIik7XG4gICAgICAgIH0sXG4gICAgICAgIF9hY3Rpb246IGZ1bmN0aW9uKHR5cGUsIGlzUmVhZEFjdGlvbiwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuLCB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VuZ2luZUFjdGlvbih0eXBlLCBpc1JlYWRBY3Rpb24sIGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KSwgZGVmaW5lZChsaXR0bGVFbmRpYW4sIHRoaXMuX2xpdHRsZUVuZGlhbiksIHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgX2RhdGFWaWV3QWN0aW9uOiBmdW5jdGlvbih0eXBlLCBpc1JlYWRBY3Rpb24sIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiwgdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9vZmZzZXQgPSBieXRlT2Zmc2V0ICsgZGF0YVR5cGVzW3R5cGVdLCBpc1JlYWRBY3Rpb24gPyB0aGlzLl92aWV3W1wiZ2V0XCIgKyB0eXBlXShieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIDogdGhpcy5fdmlld1tcInNldFwiICsgdHlwZV0oYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIF9hcnJheUJ1ZmZlckFjdGlvbjogZnVuY3Rpb24odHlwZSwgaXNSZWFkQWN0aW9uLCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4sIHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgdHlwZWRBcnJheSwgc2l6ZSA9IGRhdGFUeXBlc1t0eXBlXSwgVHlwZWRBcnJheSA9IGdsb2JhbFt0eXBlICsgXCJBcnJheVwiXTtcbiAgICAgICAgICAgIGlmIChsaXR0bGVFbmRpYW4gPSBkZWZpbmVkKGxpdHRsZUVuZGlhbiwgdGhpcy5fbGl0dGxlRW5kaWFuKSwgMSA9PT0gc2l6ZSB8fCAodGhpcy5ieXRlT2Zmc2V0ICsgYnl0ZU9mZnNldCkgJSBzaXplID09PSAwICYmIGxpdHRsZUVuZGlhbikgcmV0dXJuIHR5cGVkQXJyYXkgPSBuZXcgVHlwZWRBcnJheSh0aGlzLmJ1ZmZlciwgdGhpcy5ieXRlT2Zmc2V0ICsgYnl0ZU9mZnNldCwgMSksIFxuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldCArIHNpemUsIGlzUmVhZEFjdGlvbiA/IHR5cGVkQXJyYXlbMF0gOiB0eXBlZEFycmF5WzBdID0gdmFsdWU7XG4gICAgICAgICAgICB2YXIgYnl0ZXMgPSBuZXcgVWludDhBcnJheShpc1JlYWRBY3Rpb24gPyB0aGlzLmdldEJ5dGVzKHNpemUsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiwgITApIDogc2l6ZSk7XG4gICAgICAgICAgICByZXR1cm4gdHlwZWRBcnJheSA9IG5ldyBUeXBlZEFycmF5KGJ5dGVzLmJ1ZmZlciwgMCwgMSksIGlzUmVhZEFjdGlvbiA/IHR5cGVkQXJyYXlbMF0gOiAodHlwZWRBcnJheVswXSA9IHZhbHVlLCBcbiAgICAgICAgICAgIHZvaWQgdGhpcy5fc2V0Qnl0ZXMoYnl0ZU9mZnNldCwgYnl0ZXMsIGxpdHRsZUVuZGlhbikpO1xuICAgICAgICB9LFxuICAgICAgICBfYXJyYXlBY3Rpb246IGZ1bmN0aW9uKHR5cGUsIGlzUmVhZEFjdGlvbiwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuLCB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGlzUmVhZEFjdGlvbiA/IHRoaXNbXCJfZ2V0XCIgKyB0eXBlXShieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIDogdGhpc1tcIl9zZXRcIiArIHR5cGVdKGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICB9LFxuICAgICAgICBfZ2V0Qnl0ZXM6IGZ1bmN0aW9uKGxlbmd0aCwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICBsaXR0bGVFbmRpYW4gPSBkZWZpbmVkKGxpdHRsZUVuZGlhbiwgdGhpcy5fbGl0dGxlRW5kaWFuKSwgYnl0ZU9mZnNldCA9IGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KSwgXG4gICAgICAgICAgICBsZW5ndGggPSBkZWZpbmVkKGxlbmd0aCwgdGhpcy5ieXRlTGVuZ3RoIC0gYnl0ZU9mZnNldCksIHRoaXMuX2NoZWNrQm91bmRzKGJ5dGVPZmZzZXQsIGxlbmd0aCksIFxuICAgICAgICAgICAgYnl0ZU9mZnNldCArPSB0aGlzLmJ5dGVPZmZzZXQsIHRoaXMuX29mZnNldCA9IGJ5dGVPZmZzZXQgLSB0aGlzLmJ5dGVPZmZzZXQgKyBsZW5ndGg7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5faXNBcnJheUJ1ZmZlciA/IG5ldyBVaW50OEFycmF5KHRoaXMuYnVmZmVyLCBieXRlT2Zmc2V0LCBsZW5ndGgpIDogKHRoaXMuYnVmZmVyLnNsaWNlIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZSkuY2FsbCh0aGlzLmJ1ZmZlciwgYnl0ZU9mZnNldCwgYnl0ZU9mZnNldCArIGxlbmd0aCk7XG4gICAgICAgICAgICByZXR1cm4gbGl0dGxlRW5kaWFuIHx8IDEgPj0gbGVuZ3RoID8gcmVzdWx0IDogYXJyYXlGcm9tKHJlc3VsdCkucmV2ZXJzZSgpO1xuICAgICAgICB9LFxuICAgICAgICBnZXRCeXRlczogZnVuY3Rpb24obGVuZ3RoLCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4sIHRvQXJyYXkpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLl9nZXRCeXRlcyhsZW5ndGgsIGJ5dGVPZmZzZXQsIGRlZmluZWQobGl0dGxlRW5kaWFuLCAhMCkpO1xuICAgICAgICAgICAgcmV0dXJuIHRvQXJyYXkgPyBhcnJheUZyb20ocmVzdWx0KSA6IHJlc3VsdDtcbiAgICAgICAgfSxcbiAgICAgICAgX3NldEJ5dGVzOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBieXRlcywgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB2YXIgbGVuZ3RoID0gYnl0ZXMubGVuZ3RoO1xuICAgICAgICAgICAgaWYgKDAgIT09IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmIChsaXR0bGVFbmRpYW4gPSBkZWZpbmVkKGxpdHRsZUVuZGlhbiwgdGhpcy5fbGl0dGxlRW5kaWFuKSwgYnl0ZU9mZnNldCA9IGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KSwgXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tCb3VuZHMoYnl0ZU9mZnNldCwgbGVuZ3RoKSwgIWxpdHRsZUVuZGlhbiAmJiBsZW5ndGggPiAxICYmIChieXRlcyA9IGFycmF5RnJvbShieXRlcywgITApLnJldmVyc2UoKSksIFxuICAgICAgICAgICAgICAgIGJ5dGVPZmZzZXQgKz0gdGhpcy5ieXRlT2Zmc2V0LCB0aGlzLl9pc0FycmF5QnVmZmVyKSBuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlciwgYnl0ZU9mZnNldCwgbGVuZ3RoKS5zZXQoYnl0ZXMpOyBlbHNlIGlmICh0aGlzLl9pc05vZGVCdWZmZXIpIG5ldyBCdWZmZXIoYnl0ZXMpLmNvcHkodGhpcy5idWZmZXIsIGJ5dGVPZmZzZXQpOyBlbHNlIGZvciAodmFyIGkgPSAwOyBsZW5ndGggPiBpOyBpKyspIHRoaXMuYnVmZmVyW2J5dGVPZmZzZXQgKyBpXSA9IGJ5dGVzW2ldO1xuICAgICAgICAgICAgICAgIHRoaXMuX29mZnNldCA9IGJ5dGVPZmZzZXQgLSB0aGlzLmJ5dGVPZmZzZXQgKyBsZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNldEJ5dGVzOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBieXRlcywgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRCeXRlcyhieXRlT2Zmc2V0LCBieXRlcywgZGVmaW5lZChsaXR0bGVFbmRpYW4sICEwKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFN0cmluZzogZnVuY3Rpb24oYnl0ZUxlbmd0aCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pc05vZGVCdWZmZXIpIHJldHVybiBieXRlT2Zmc2V0ID0gZGVmaW5lZChieXRlT2Zmc2V0LCB0aGlzLl9vZmZzZXQpLCBieXRlTGVuZ3RoID0gZGVmaW5lZChieXRlTGVuZ3RoLCB0aGlzLmJ5dGVMZW5ndGggLSBieXRlT2Zmc2V0KSwgXG4gICAgICAgICAgICB0aGlzLl9jaGVja0JvdW5kcyhieXRlT2Zmc2V0LCBieXRlTGVuZ3RoKSwgdGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldCArIGJ5dGVMZW5ndGgsIFxuICAgICAgICAgICAgdGhpcy5idWZmZXIudG9TdHJpbmcoZW5jb2RpbmcgfHwgXCJiaW5hcnlcIiwgdGhpcy5ieXRlT2Zmc2V0ICsgYnl0ZU9mZnNldCwgdGhpcy5ieXRlT2Zmc2V0ICsgdGhpcy5fb2Zmc2V0KTtcbiAgICAgICAgICAgIHZhciBieXRlcyA9IHRoaXMuX2dldEJ5dGVzKGJ5dGVMZW5ndGgsIGJ5dGVPZmZzZXQsICEwKTtcbiAgICAgICAgICAgIGlmIChlbmNvZGluZyA9IFwidXRmOFwiID09PSBlbmNvZGluZyA/IFwidXRmLThcIiA6IGVuY29kaW5nIHx8IFwiYmluYXJ5XCIsIFRleHREZWNvZGVyICYmIFwiYmluYXJ5XCIgIT09IGVuY29kaW5nKSByZXR1cm4gbmV3IFRleHREZWNvZGVyKGVuY29kaW5nKS5kZWNvZGUodGhpcy5faXNBcnJheUJ1ZmZlciA/IGJ5dGVzIDogbmV3IFVpbnQ4QXJyYXkoYnl0ZXMpKTtcbiAgICAgICAgICAgIHZhciBzdHJpbmcgPSBcIlwiO1xuICAgICAgICAgICAgYnl0ZUxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBieXRlTGVuZ3RoID4gaTsgaSsrKSBzdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShieXRlc1tpXSk7XG4gICAgICAgICAgICByZXR1cm4gXCJ1dGYtOFwiID09PSBlbmNvZGluZyAmJiAoc3RyaW5nID0gZGVjb2RlVVJJQ29tcG9uZW50KGVzY2FwZShzdHJpbmcpKSksIHN0cmluZztcbiAgICAgICAgfSxcbiAgICAgICAgc2V0U3RyaW5nOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBzdWJTdHJpbmcsIGVuY29kaW5nKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5faXNOb2RlQnVmZmVyKSByZXR1cm4gYnl0ZU9mZnNldCA9IGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KSwgdGhpcy5fY2hlY2tCb3VuZHMoYnl0ZU9mZnNldCwgc3ViU3RyaW5nLmxlbmd0aCksIFxuICAgICAgICAgICAgdm9pZCAodGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldCArIHRoaXMuYnVmZmVyLndyaXRlKHN1YlN0cmluZywgdGhpcy5ieXRlT2Zmc2V0ICsgYnl0ZU9mZnNldCwgZW5jb2RpbmcgfHwgXCJiaW5hcnlcIikpO1xuICAgICAgICAgICAgZW5jb2RpbmcgPSBcInV0ZjhcIiA9PT0gZW5jb2RpbmcgPyBcInV0Zi04XCIgOiBlbmNvZGluZyB8fCBcImJpbmFyeVwiO1xuICAgICAgICAgICAgdmFyIGJ5dGVzO1xuICAgICAgICAgICAgVGV4dEVuY29kZXIgJiYgXCJiaW5hcnlcIiAhPT0gZW5jb2RpbmcgPyBieXRlcyA9IG5ldyBUZXh0RW5jb2RlcihlbmNvZGluZykuZW5jb2RlKHN1YlN0cmluZykgOiAoXCJ1dGYtOFwiID09PSBlbmNvZGluZyAmJiAoc3ViU3RyaW5nID0gdW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHN1YlN0cmluZykpKSwgXG4gICAgICAgICAgICBieXRlcyA9IGdldENoYXJDb2RlcyhzdWJTdHJpbmcpKSwgdGhpcy5fc2V0Qnl0ZXMoYnl0ZU9mZnNldCwgYnl0ZXMsICEwKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Q2hhcjogZnVuY3Rpb24oYnl0ZU9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0U3RyaW5nKDEsIGJ5dGVPZmZzZXQpO1xuICAgICAgICB9LFxuICAgICAgICBzZXRDaGFyOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBjaGFyYWN0ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RyaW5nKGJ5dGVPZmZzZXQsIGNoYXJhY3Rlcik7XG4gICAgICAgIH0sXG4gICAgICAgIHRlbGw6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29mZnNldDtcbiAgICAgICAgfSxcbiAgICAgICAgc2VlazogZnVuY3Rpb24oYnl0ZU9mZnNldCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrQm91bmRzKGJ5dGVPZmZzZXQsIDApLCB0aGlzLl9vZmZzZXQgPSBieXRlT2Zmc2V0O1xuICAgICAgICB9LFxuICAgICAgICBza2lwOiBmdW5jdGlvbihieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZWVrKHRoaXMuX29mZnNldCArIGJ5dGVMZW5ndGgpO1xuICAgICAgICB9LFxuICAgICAgICBzbGljZTogZnVuY3Rpb24oc3RhcnQsIGVuZCwgZm9yY2VDb3B5KSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBub3JtYWxpemVPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIDAgPiBvZmZzZXQgPyBvZmZzZXQgKyBieXRlTGVuZ3RoIDogb2Zmc2V0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0YXJ0ID0gbm9ybWFsaXplT2Zmc2V0KHN0YXJ0LCB0aGlzLmJ5dGVMZW5ndGgpLCBlbmQgPSBub3JtYWxpemVPZmZzZXQoZGVmaW5lZChlbmQsIHRoaXMuYnl0ZUxlbmd0aCksIHRoaXMuYnl0ZUxlbmd0aCksIFxuICAgICAgICAgICAgZm9yY2VDb3B5ID8gbmV3IGpEYXRhVmlldyh0aGlzLmdldEJ5dGVzKGVuZCAtIHN0YXJ0LCBzdGFydCwgITAsICEwKSwgdm9pZCAwLCB2b2lkIDAsIHRoaXMuX2xpdHRsZUVuZGlhbikgOiBuZXcgakRhdGFWaWV3KHRoaXMuYnVmZmVyLCB0aGlzLmJ5dGVPZmZzZXQgKyBzdGFydCwgZW5kIC0gc3RhcnQsIHRoaXMuX2xpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIGFsaWduQnk6IGZ1bmN0aW9uKGJ5dGVDb3VudCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2JpdE9mZnNldCA9IDAsIDEgIT09IGRlZmluZWQoYnl0ZUNvdW50LCAxKSA/IHRoaXMuc2tpcChieXRlQ291bnQgLSAodGhpcy5fb2Zmc2V0ICUgYnl0ZUNvdW50IHx8IGJ5dGVDb3VudCkpIDogdGhpcy5fb2Zmc2V0O1xuICAgICAgICB9LFxuICAgICAgICBfZ2V0RmxvYXQ2NDogZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMuX2dldEJ5dGVzKDgsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiksIHNpZ24gPSAxIC0gMiAqIChiWzddID4+IDcpLCBleHBvbmVudCA9ICgoYls3XSA8PCAxICYgMjU1KSA8PCAzIHwgYls2XSA+PiA0KSAtIDEwMjMsIG1hbnRpc3NhID0gKDE1ICYgYls2XSkgKiBwb3cyKDQ4KSArIGJbNV0gKiBwb3cyKDQwKSArIGJbNF0gKiBwb3cyKDMyKSArIGJbM10gKiBwb3cyKDI0KSArIGJbMl0gKiBwb3cyKDE2KSArIGJbMV0gKiBwb3cyKDgpICsgYlswXTtcbiAgICAgICAgICAgIHJldHVybiAxMDI0ID09PSBleHBvbmVudCA/IDAgIT09IG1hbnRpc3NhID8gMC8wIDogMS8wICogc2lnbiA6IC0xMDIzID09PSBleHBvbmVudCA/IHNpZ24gKiBtYW50aXNzYSAqIHBvdzIoLTEwNzQpIDogc2lnbiAqICgxICsgbWFudGlzc2EgKiBwb3cyKC01MikpICogcG93MihleHBvbmVudCk7XG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRGbG9hdDMyOiBmdW5jdGlvbihieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHZhciBiID0gdGhpcy5fZ2V0Qnl0ZXMoNCwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSwgc2lnbiA9IDEgLSAyICogKGJbM10gPj4gNyksIGV4cG9uZW50ID0gKGJbM10gPDwgMSAmIDI1NSB8IGJbMl0gPj4gNykgLSAxMjcsIG1hbnRpc3NhID0gKDEyNyAmIGJbMl0pIDw8IDE2IHwgYlsxXSA8PCA4IHwgYlswXTtcbiAgICAgICAgICAgIHJldHVybiAxMjggPT09IGV4cG9uZW50ID8gMCAhPT0gbWFudGlzc2EgPyAwLzAgOiAxLzAgKiBzaWduIDogLTEyNyA9PT0gZXhwb25lbnQgPyBzaWduICogbWFudGlzc2EgKiBwb3cyKC0xNDkpIDogc2lnbiAqICgxICsgbWFudGlzc2EgKiBwb3cyKC0yMykpICogcG93MihleHBvbmVudCk7XG4gICAgICAgIH0sXG4gICAgICAgIF9nZXQ2NDogZnVuY3Rpb24oVHlwZSwgYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICBsaXR0bGVFbmRpYW4gPSBkZWZpbmVkKGxpdHRsZUVuZGlhbiwgdGhpcy5fbGl0dGxlRW5kaWFuKSwgYnl0ZU9mZnNldCA9IGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KTtcbiAgICAgICAgICAgIGZvciAodmFyIHBhcnRzID0gbGl0dGxlRW5kaWFuID8gWyAwLCA0IF0gOiBbIDQsIDAgXSwgaSA9IDA7IDIgPiBpOyBpKyspIHBhcnRzW2ldID0gdGhpcy5nZXRVaW50MzIoYnl0ZU9mZnNldCArIHBhcnRzW2ldLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX29mZnNldCA9IGJ5dGVPZmZzZXQgKyA4LCBuZXcgVHlwZShwYXJ0c1swXSwgcGFydHNbMV0pO1xuICAgICAgICB9LFxuICAgICAgICBnZXRJbnQ2NDogZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0NjQoSW50NjQsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFVpbnQ2NDogZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0NjQoVWludDY0LCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICB9LFxuICAgICAgICBfZ2V0SW50MzI6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdmFyIGIgPSB0aGlzLl9nZXRCeXRlcyg0LCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICAgICAgcmV0dXJuIGJbM10gPDwgMjQgfCBiWzJdIDw8IDE2IHwgYlsxXSA8PCA4IHwgYlswXTtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldFVpbnQzMjogZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0SW50MzIoYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSA+Pj4gMDtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldEludDE2OiBmdW5jdGlvbihieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRVaW50MTYoYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSA8PCAxNiA+PiAxNjtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldFVpbnQxNjogZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB2YXIgYiA9IHRoaXMuX2dldEJ5dGVzKDIsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgICAgICByZXR1cm4gYlsxXSA8PCA4IHwgYlswXTtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldEludDg6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRVaW50OChieXRlT2Zmc2V0KSA8PCAyNCA+PiAyNDtcbiAgICAgICAgfSxcbiAgICAgICAgX2dldFVpbnQ4OiBmdW5jdGlvbihieXRlT2Zmc2V0KSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Qnl0ZXMoMSwgYnl0ZU9mZnNldClbMF07XG4gICAgICAgIH0sXG4gICAgICAgIF9nZXRCaXRSYW5nZURhdGE6IGZ1bmN0aW9uKGJpdExlbmd0aCwgYnl0ZU9mZnNldCkge1xuICAgICAgICAgICAgdmFyIHN0YXJ0Qml0ID0gKGRlZmluZWQoYnl0ZU9mZnNldCwgdGhpcy5fb2Zmc2V0KSA8PCAzKSArIHRoaXMuX2JpdE9mZnNldCwgZW5kQml0ID0gc3RhcnRCaXQgKyBiaXRMZW5ndGgsIHN0YXJ0ID0gc3RhcnRCaXQgPj4+IDMsIGVuZCA9IGVuZEJpdCArIDcgPj4+IDMsIGIgPSB0aGlzLl9nZXRCeXRlcyhlbmQgLSBzdGFydCwgc3RhcnQsICEwKSwgd2lkZVZhbHVlID0gMDtcbiAgICAgICAgICAgICh0aGlzLl9iaXRPZmZzZXQgPSA3ICYgZW5kQml0KSAmJiAodGhpcy5fYml0T2Zmc2V0IC09IDgpO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGIubGVuZ3RoOyBsZW5ndGggPiBpOyBpKyspIHdpZGVWYWx1ZSA9IHdpZGVWYWx1ZSA8PCA4IHwgYltpXTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0LFxuICAgICAgICAgICAgICAgIGJ5dGVzOiBiLFxuICAgICAgICAgICAgICAgIHdpZGVWYWx1ZTogd2lkZVZhbHVlXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBnZXRTaWduZWQ6IGZ1bmN0aW9uKGJpdExlbmd0aCwgYnl0ZU9mZnNldCkge1xuICAgICAgICAgICAgdmFyIHNoaWZ0ID0gMzIgLSBiaXRMZW5ndGg7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRVbnNpZ25lZChiaXRMZW5ndGgsIGJ5dGVPZmZzZXQpIDw8IHNoaWZ0ID4+IHNoaWZ0O1xuICAgICAgICB9LFxuICAgICAgICBnZXRVbnNpZ25lZDogZnVuY3Rpb24oYml0TGVuZ3RoLCBieXRlT2Zmc2V0KSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLl9nZXRCaXRSYW5nZURhdGEoYml0TGVuZ3RoLCBieXRlT2Zmc2V0KS53aWRlVmFsdWUgPj4+IC10aGlzLl9iaXRPZmZzZXQ7XG4gICAgICAgICAgICByZXR1cm4gMzIgPiBiaXRMZW5ndGggPyB2YWx1ZSAmIH4oLTEgPDwgYml0TGVuZ3RoKSA6IHZhbHVlO1xuICAgICAgICB9LFxuICAgICAgICBfc2V0QmluYXJ5RmxvYXQ6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIHZhbHVlLCBtYW50U2l6ZSwgZXhwU2l6ZSwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB2YXIgZXhwb25lbnQsIG1hbnRpc3NhLCBzaWduQml0ID0gMCA+IHZhbHVlID8gMSA6IDAsIGVNYXggPSB+KC0xIDw8IGV4cFNpemUgLSAxKSwgZU1pbiA9IDEgLSBlTWF4O1xuICAgICAgICAgICAgMCA+IHZhbHVlICYmICh2YWx1ZSA9IC12YWx1ZSksIDAgPT09IHZhbHVlID8gKGV4cG9uZW50ID0gMCwgbWFudGlzc2EgPSAwKSA6IGlzTmFOKHZhbHVlKSA/IChleHBvbmVudCA9IDIgKiBlTWF4ICsgMSwgXG4gICAgICAgICAgICBtYW50aXNzYSA9IDEpIDogMS8wID09PSB2YWx1ZSA/IChleHBvbmVudCA9IDIgKiBlTWF4ICsgMSwgbWFudGlzc2EgPSAwKSA6IChleHBvbmVudCA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpLCBcbiAgICAgICAgICAgIGV4cG9uZW50ID49IGVNaW4gJiYgZU1heCA+PSBleHBvbmVudCA/IChtYW50aXNzYSA9IE1hdGguZmxvb3IoKHZhbHVlICogcG93MigtZXhwb25lbnQpIC0gMSkgKiBwb3cyKG1hbnRTaXplKSksIFxuICAgICAgICAgICAgZXhwb25lbnQgKz0gZU1heCkgOiAobWFudGlzc2EgPSBNYXRoLmZsb29yKHZhbHVlIC8gcG93MihlTWluIC0gbWFudFNpemUpKSwgZXhwb25lbnQgPSAwKSk7XG4gICAgICAgICAgICBmb3IgKHZhciBiID0gW107IG1hbnRTaXplID49IDg7ICkgYi5wdXNoKG1hbnRpc3NhICUgMjU2KSwgbWFudGlzc2EgPSBNYXRoLmZsb29yKG1hbnRpc3NhIC8gMjU2KSwgXG4gICAgICAgICAgICBtYW50U2l6ZSAtPSA4O1xuICAgICAgICAgICAgZm9yIChleHBvbmVudCA9IGV4cG9uZW50IDw8IG1hbnRTaXplIHwgbWFudGlzc2EsIGV4cFNpemUgKz0gbWFudFNpemU7IGV4cFNpemUgPj0gODsgKSBiLnB1c2goMjU1ICYgZXhwb25lbnQpLCBcbiAgICAgICAgICAgIGV4cG9uZW50ID4+Pj0gOCwgZXhwU2l6ZSAtPSA4O1xuICAgICAgICAgICAgYi5wdXNoKHNpZ25CaXQgPDwgZXhwU2l6ZSB8IGV4cG9uZW50KSwgdGhpcy5fc2V0Qnl0ZXMoYnl0ZU9mZnNldCwgYiwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgfSxcbiAgICAgICAgX3NldEZsb2F0MzI6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHRoaXMuX3NldEJpbmFyeUZsb2F0KGJ5dGVPZmZzZXQsIHZhbHVlLCAyMywgOCwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgfSxcbiAgICAgICAgX3NldEZsb2F0NjQ6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHRoaXMuX3NldEJpbmFyeUZsb2F0KGJ5dGVPZmZzZXQsIHZhbHVlLCA1MiwgMTEsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIF9zZXQ2NDogZnVuY3Rpb24oVHlwZSwgYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgXCJvYmplY3RcIiAhPSB0eXBlb2YgdmFsdWUgJiYgKHZhbHVlID0gVHlwZS5mcm9tTnVtYmVyKHZhbHVlKSksIGxpdHRsZUVuZGlhbiA9IGRlZmluZWQobGl0dGxlRW5kaWFuLCB0aGlzLl9saXR0bGVFbmRpYW4pLCBcbiAgICAgICAgICAgIGJ5dGVPZmZzZXQgPSBkZWZpbmVkKGJ5dGVPZmZzZXQsIHRoaXMuX29mZnNldCk7XG4gICAgICAgICAgICB2YXIgcGFydHMgPSBsaXR0bGVFbmRpYW4gPyB7XG4gICAgICAgICAgICAgICAgbG86IDAsXG4gICAgICAgICAgICAgICAgaGk6IDRcbiAgICAgICAgICAgIH0gOiB7XG4gICAgICAgICAgICAgICAgbG86IDQsXG4gICAgICAgICAgICAgICAgaGk6IDBcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBmb3IgKHZhciBwYXJ0TmFtZSBpbiBwYXJ0cykgdGhpcy5zZXRVaW50MzIoYnl0ZU9mZnNldCArIHBhcnRzW3BhcnROYW1lXSwgdmFsdWVbcGFydE5hbWVdLCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICAgICAgdGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldCArIDg7XG4gICAgICAgIH0sXG4gICAgICAgIHNldEludDY0OiBmdW5jdGlvbihieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB0aGlzLl9zZXQ2NChJbnQ2NCwgYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFVpbnQ2NDogZnVuY3Rpb24oYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdGhpcy5fc2V0NjQoVWludDY0LCBieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKTtcbiAgICAgICAgfSxcbiAgICAgICAgX3NldFVpbnQzMjogZnVuY3Rpb24oYnl0ZU9mZnNldCwgdmFsdWUsIGxpdHRsZUVuZGlhbikge1xuICAgICAgICAgICAgdGhpcy5fc2V0Qnl0ZXMoYnl0ZU9mZnNldCwgWyAyNTUgJiB2YWx1ZSwgdmFsdWUgPj4+IDggJiAyNTUsIHZhbHVlID4+PiAxNiAmIDI1NSwgdmFsdWUgPj4+IDI0IF0sIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRVaW50MTY6IGZ1bmN0aW9uKGJ5dGVPZmZzZXQsIHZhbHVlLCBsaXR0bGVFbmRpYW4pIHtcbiAgICAgICAgICAgIHRoaXMuX3NldEJ5dGVzKGJ5dGVPZmZzZXQsIFsgMjU1ICYgdmFsdWUsIHZhbHVlID4+PiA4ICYgMjU1IF0sIGxpdHRsZUVuZGlhbik7XG4gICAgICAgIH0sXG4gICAgICAgIF9zZXRVaW50ODogZnVuY3Rpb24oYnl0ZU9mZnNldCwgdmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMuX3NldEJ5dGVzKGJ5dGVPZmZzZXQsIFsgMjU1ICYgdmFsdWUgXSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldFVuc2lnbmVkOiBmdW5jdGlvbihieXRlT2Zmc2V0LCB2YWx1ZSwgYml0TGVuZ3RoKSB7XG4gICAgICAgICAgICB2YXIgZGF0YSA9IHRoaXMuX2dldEJpdFJhbmdlRGF0YShiaXRMZW5ndGgsIGJ5dGVPZmZzZXQpLCB3aWRlVmFsdWUgPSBkYXRhLndpZGVWYWx1ZSwgYiA9IGRhdGEuYnl0ZXM7XG4gICAgICAgICAgICB3aWRlVmFsdWUgJj0gfih+KC0xIDw8IGJpdExlbmd0aCkgPDwgLXRoaXMuX2JpdE9mZnNldCksIHdpZGVWYWx1ZSB8PSAoMzIgPiBiaXRMZW5ndGggPyB2YWx1ZSAmIH4oLTEgPDwgYml0TGVuZ3RoKSA6IHZhbHVlKSA8PCAtdGhpcy5fYml0T2Zmc2V0O1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IGIubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGJbaV0gPSAyNTUgJiB3aWRlVmFsdWUsIHdpZGVWYWx1ZSA+Pj49IDg7XG4gICAgICAgICAgICB0aGlzLl9zZXRCeXRlcyhkYXRhLnN0YXJ0LCBiLCAhMCk7XG4gICAgICAgIH1cbiAgICB9LCBub2RlTmFtaW5nID0ge1xuICAgICAgICBJbnQ4OiBcIkludDhcIixcbiAgICAgICAgSW50MTY6IFwiSW50MTZcIixcbiAgICAgICAgSW50MzI6IFwiSW50MzJcIixcbiAgICAgICAgVWludDg6IFwiVUludDhcIixcbiAgICAgICAgVWludDE2OiBcIlVJbnQxNlwiLFxuICAgICAgICBVaW50MzI6IFwiVUludDMyXCIsXG4gICAgICAgIEZsb2F0MzI6IFwiRmxvYXRcIixcbiAgICAgICAgRmxvYXQ2NDogXCJEb3VibGVcIlxuICAgIH07XG4gICAgcHJvdG8uX25vZGVCdWZmZXJBY3Rpb24gPSBmdW5jdGlvbih0eXBlLCBpc1JlYWRBY3Rpb24sIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiwgdmFsdWUpIHtcbiAgICAgICAgdGhpcy5fb2Zmc2V0ID0gYnl0ZU9mZnNldCArIGRhdGFUeXBlc1t0eXBlXTtcbiAgICAgICAgdmFyIG5vZGVOYW1lID0gbm9kZU5hbWluZ1t0eXBlXSArIChcIkludDhcIiA9PT0gdHlwZSB8fCBcIlVpbnQ4XCIgPT09IHR5cGUgPyBcIlwiIDogbGl0dGxlRW5kaWFuID8gXCJMRVwiIDogXCJCRVwiKTtcbiAgICAgICAgcmV0dXJuIGJ5dGVPZmZzZXQgKz0gdGhpcy5ieXRlT2Zmc2V0LCBpc1JlYWRBY3Rpb24gPyB0aGlzLmJ1ZmZlcltcInJlYWRcIiArIG5vZGVOYW1lXShieXRlT2Zmc2V0KSA6IHRoaXMuYnVmZmVyW1wid3JpdGVcIiArIG5vZGVOYW1lXSh2YWx1ZSwgYnl0ZU9mZnNldCk7XG4gICAgfTtcbiAgICBmb3IgKHZhciB0eXBlIGluIGRhdGFUeXBlcykgIWZ1bmN0aW9uKHR5cGUpIHtcbiAgICAgICAgcHJvdG9bXCJnZXRcIiArIHR5cGVdID0gZnVuY3Rpb24oYnl0ZU9mZnNldCwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWN0aW9uKHR5cGUsICEwLCBieXRlT2Zmc2V0LCBsaXR0bGVFbmRpYW4pO1xuICAgICAgICB9LCBwcm90b1tcInNldFwiICsgdHlwZV0gPSBmdW5jdGlvbihieXRlT2Zmc2V0LCB2YWx1ZSwgbGl0dGxlRW5kaWFuKSB7XG4gICAgICAgICAgICB0aGlzLl9hY3Rpb24odHlwZSwgITEsIGJ5dGVPZmZzZXQsIGxpdHRsZUVuZGlhbiwgdmFsdWUpO1xuICAgICAgICB9O1xuICAgIH0odHlwZSk7XG4gICAgcHJvdG8uX3NldEludDMyID0gcHJvdG8uX3NldFVpbnQzMiwgcHJvdG8uX3NldEludDE2ID0gcHJvdG8uX3NldFVpbnQxNiwgcHJvdG8uX3NldEludDggPSBwcm90by5fc2V0VWludDgsIFxuICAgIHByb3RvLnNldFNpZ25lZCA9IHByb3RvLnNldFVuc2lnbmVkO1xuICAgIGZvciAodmFyIG1ldGhvZCBpbiBwcm90bykgXCJzZXRcIiA9PT0gbWV0aG9kLnNsaWNlKDAsIDMpICYmICFmdW5jdGlvbih0eXBlKSB7XG4gICAgICAgIHByb3RvW1wid3JpdGVcIiArIHR5cGVdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBBcnJheS5wcm90b3R5cGUudW5zaGlmdC5jYWxsKGFyZ3VtZW50cywgdm9pZCAwKSwgdGhpc1tcInNldFwiICsgdHlwZV0uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9KG1ldGhvZC5zbGljZSgzKSk7XG4gICAgcmV0dXJuIGpEYXRhVmlldztcbn0pOyIsIid1c2Ugc3RyaWN0JztcblxuXG52YXIgemxpYl9pbmZsYXRlID0gcmVxdWlyZSgnLi96bGliL2luZmxhdGUnKTtcbnZhciB1dGlscyAgICAgICAgPSByZXF1aXJlKCcuL3V0aWxzL2NvbW1vbicpO1xudmFyIHN0cmluZ3MgICAgICA9IHJlcXVpcmUoJy4vdXRpbHMvc3RyaW5ncycpO1xudmFyIGMgICAgICAgICAgICA9IHJlcXVpcmUoJy4vemxpYi9jb25zdGFudHMnKTtcbnZhciBtc2cgICAgICAgICAgPSByZXF1aXJlKCcuL3psaWIvbWVzc2FnZXMnKTtcbnZhciBaU3RyZWFtICAgICAgPSByZXF1aXJlKCcuL3psaWIvenN0cmVhbScpO1xudmFyIEdaaGVhZGVyICAgICA9IHJlcXVpcmUoJy4vemxpYi9nemhlYWRlcicpO1xuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIGNsYXNzIEluZmxhdGVcbiAqXG4gKiBHZW5lcmljIEpTLXN0eWxlIHdyYXBwZXIgZm9yIHpsaWIgY2FsbHMuIElmIHlvdSBkb24ndCBuZWVkXG4gKiBzdHJlYW1pbmcgYmVoYXZpb3VyIC0gdXNlIG1vcmUgc2ltcGxlIGZ1bmN0aW9uczogW1tpbmZsYXRlXV1cbiAqIGFuZCBbW2luZmxhdGVSYXddXS5cbiAqKi9cblxuLyogaW50ZXJuYWxcbiAqIGluZmxhdGUuY2h1bmtzIC0+IEFycmF5XG4gKlxuICogQ2h1bmtzIG9mIG91dHB1dCBkYXRhLCBpZiBbW0luZmxhdGUjb25EYXRhXV0gbm90IG92ZXJyaWRlbi5cbiAqKi9cblxuLyoqXG4gKiBJbmZsYXRlLnJlc3VsdCAtPiBVaW50OEFycmF5fEFycmF5fFN0cmluZ1xuICpcbiAqIFVuY29tcHJlc3NlZCByZXN1bHQsIGdlbmVyYXRlZCBieSBkZWZhdWx0IFtbSW5mbGF0ZSNvbkRhdGFdXVxuICogYW5kIFtbSW5mbGF0ZSNvbkVuZF1dIGhhbmRsZXJzLiBGaWxsZWQgYWZ0ZXIgeW91IHB1c2ggbGFzdCBjaHVua1xuICogKGNhbGwgW1tJbmZsYXRlI3B1c2hdXSB3aXRoIGBaX0ZJTklTSGAgLyBgdHJ1ZWAgcGFyYW0pIG9yIGlmIHlvdVxuICogcHVzaCBhIGNodW5rIHdpdGggZXhwbGljaXQgZmx1c2ggKGNhbGwgW1tJbmZsYXRlI3B1c2hdXSB3aXRoXG4gKiBgWl9TWU5DX0ZMVVNIYCBwYXJhbSkuXG4gKiovXG5cbi8qKlxuICogSW5mbGF0ZS5lcnIgLT4gTnVtYmVyXG4gKlxuICogRXJyb3IgY29kZSBhZnRlciBpbmZsYXRlIGZpbmlzaGVkLiAwIChaX09LKSBvbiBzdWNjZXNzLlxuICogU2hvdWxkIGJlIGNoZWNrZWQgaWYgYnJva2VuIGRhdGEgcG9zc2libGUuXG4gKiovXG5cbi8qKlxuICogSW5mbGF0ZS5tc2cgLT4gU3RyaW5nXG4gKlxuICogRXJyb3IgbWVzc2FnZSwgaWYgW1tJbmZsYXRlLmVycl1dICE9IDBcbiAqKi9cblxuXG4vKipcbiAqIG5ldyBJbmZsYXRlKG9wdGlvbnMpXG4gKiAtIG9wdGlvbnMgKE9iamVjdCk6IHpsaWIgaW5mbGF0ZSBvcHRpb25zLlxuICpcbiAqIENyZWF0ZXMgbmV3IGluZmxhdG9yIGluc3RhbmNlIHdpdGggc3BlY2lmaWVkIHBhcmFtcy4gVGhyb3dzIGV4Y2VwdGlvblxuICogb24gYmFkIHBhcmFtcy4gU3VwcG9ydGVkIG9wdGlvbnM6XG4gKlxuICogLSBgd2luZG93Qml0c2BcbiAqIC0gYGRpY3Rpb25hcnlgXG4gKlxuICogW2h0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZF0oaHR0cDovL3psaWIubmV0L21hbnVhbC5odG1sI0FkdmFuY2VkKVxuICogZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gdGhlc2UuXG4gKlxuICogQWRkaXRpb25hbCBvcHRpb25zLCBmb3IgaW50ZXJuYWwgbmVlZHM6XG4gKlxuICogLSBgY2h1bmtTaXplYCAtIHNpemUgb2YgZ2VuZXJhdGVkIGRhdGEgY2h1bmtzICgxNksgYnkgZGVmYXVsdClcbiAqIC0gYHJhd2AgKEJvb2xlYW4pIC0gZG8gcmF3IGluZmxhdGVcbiAqIC0gYHRvYCAoU3RyaW5nKSAtIGlmIGVxdWFsIHRvICdzdHJpbmcnLCB0aGVuIHJlc3VsdCB3aWxsIGJlIGNvbnZlcnRlZFxuICogICBmcm9tIHV0ZjggdG8gdXRmMTYgKGphdmFzY3JpcHQpIHN0cmluZy4gV2hlbiBzdHJpbmcgb3V0cHV0IHJlcXVlc3RlZCxcbiAqICAgY2h1bmsgbGVuZ3RoIGNhbiBkaWZmZXIgZnJvbSBgY2h1bmtTaXplYCwgZGVwZW5kaW5nIG9uIGNvbnRlbnQuXG4gKlxuICogQnkgZGVmYXVsdCwgd2hlbiBubyBvcHRpb25zIHNldCwgYXV0b2RldGVjdCBkZWZsYXRlL2d6aXAgZGF0YSBmb3JtYXQgdmlhXG4gKiB3cmFwcGVyIGhlYWRlci5cbiAqXG4gKiAjIyMjIyBFeGFtcGxlOlxuICpcbiAqIGBgYGphdmFzY3JpcHRcbiAqIHZhciBwYWtvID0gcmVxdWlyZSgncGFrbycpXG4gKiAgICwgY2h1bmsxID0gVWludDhBcnJheShbMSwyLDMsNCw1LDYsNyw4LDldKVxuICogICAsIGNodW5rMiA9IFVpbnQ4QXJyYXkoWzEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5XSk7XG4gKlxuICogdmFyIGluZmxhdGUgPSBuZXcgcGFrby5JbmZsYXRlKHsgbGV2ZWw6IDN9KTtcbiAqXG4gKiBpbmZsYXRlLnB1c2goY2h1bmsxLCBmYWxzZSk7XG4gKiBpbmZsYXRlLnB1c2goY2h1bmsyLCB0cnVlKTsgIC8vIHRydWUgLT4gbGFzdCBjaHVua1xuICpcbiAqIGlmIChpbmZsYXRlLmVycikgeyB0aHJvdyBuZXcgRXJyb3IoaW5mbGF0ZS5lcnIpOyB9XG4gKlxuICogY29uc29sZS5sb2coaW5mbGF0ZS5yZXN1bHQpO1xuICogYGBgXG4gKiovXG5mdW5jdGlvbiBJbmZsYXRlKG9wdGlvbnMpIHtcbiAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEluZmxhdGUpKSByZXR1cm4gbmV3IEluZmxhdGUob3B0aW9ucyk7XG5cbiAgdGhpcy5vcHRpb25zID0gdXRpbHMuYXNzaWduKHtcbiAgICBjaHVua1NpemU6IDE2Mzg0LFxuICAgIHdpbmRvd0JpdHM6IDAsXG4gICAgdG86ICcnXG4gIH0sIG9wdGlvbnMgfHwge30pO1xuXG4gIHZhciBvcHQgPSB0aGlzLm9wdGlvbnM7XG5cbiAgLy8gRm9yY2Ugd2luZG93IHNpemUgZm9yIGByYXdgIGRhdGEsIGlmIG5vdCBzZXQgZGlyZWN0bHksXG4gIC8vIGJlY2F1c2Ugd2UgaGF2ZSBubyBoZWFkZXIgZm9yIGF1dG9kZXRlY3QuXG4gIGlmIChvcHQucmF3ICYmIChvcHQud2luZG93Qml0cyA+PSAwKSAmJiAob3B0LndpbmRvd0JpdHMgPCAxNikpIHtcbiAgICBvcHQud2luZG93Qml0cyA9IC1vcHQud2luZG93Qml0cztcbiAgICBpZiAob3B0LndpbmRvd0JpdHMgPT09IDApIHsgb3B0LndpbmRvd0JpdHMgPSAtMTU7IH1cbiAgfVxuXG4gIC8vIElmIGB3aW5kb3dCaXRzYCBub3QgZGVmaW5lZCAoYW5kIG1vZGUgbm90IHJhdykgLSBzZXQgYXV0b2RldGVjdCBmbGFnIGZvciBnemlwL2RlZmxhdGVcbiAgaWYgKChvcHQud2luZG93Qml0cyA+PSAwKSAmJiAob3B0LndpbmRvd0JpdHMgPCAxNikgJiZcbiAgICAgICEob3B0aW9ucyAmJiBvcHRpb25zLndpbmRvd0JpdHMpKSB7XG4gICAgb3B0LndpbmRvd0JpdHMgKz0gMzI7XG4gIH1cblxuICAvLyBHemlwIGhlYWRlciBoYXMgbm8gaW5mbyBhYm91dCB3aW5kb3dzIHNpemUsIHdlIGNhbiBkbyBhdXRvZGV0ZWN0IG9ubHlcbiAgLy8gZm9yIGRlZmxhdGUuIFNvLCBpZiB3aW5kb3cgc2l6ZSBub3Qgc2V0LCBmb3JjZSBpdCB0byBtYXggd2hlbiBnemlwIHBvc3NpYmxlXG4gIGlmICgob3B0LndpbmRvd0JpdHMgPiAxNSkgJiYgKG9wdC53aW5kb3dCaXRzIDwgNDgpKSB7XG4gICAgLy8gYml0IDMgKDE2KSAtPiBnemlwcGVkIGRhdGFcbiAgICAvLyBiaXQgNCAoMzIpIC0+IGF1dG9kZXRlY3QgZ3ppcC9kZWZsYXRlXG4gICAgaWYgKChvcHQud2luZG93Qml0cyAmIDE1KSA9PT0gMCkge1xuICAgICAgb3B0LndpbmRvd0JpdHMgfD0gMTU7XG4gICAgfVxuICB9XG5cbiAgdGhpcy5lcnIgICAgPSAwOyAgICAgIC8vIGVycm9yIGNvZGUsIGlmIGhhcHBlbnMgKDAgPSBaX09LKVxuICB0aGlzLm1zZyAgICA9ICcnOyAgICAgLy8gZXJyb3IgbWVzc2FnZVxuICB0aGlzLmVuZGVkICA9IGZhbHNlOyAgLy8gdXNlZCB0byBhdm9pZCBtdWx0aXBsZSBvbkVuZCgpIGNhbGxzXG4gIHRoaXMuY2h1bmtzID0gW107ICAgICAvLyBjaHVua3Mgb2YgY29tcHJlc3NlZCBkYXRhXG5cbiAgdGhpcy5zdHJtICAgPSBuZXcgWlN0cmVhbSgpO1xuICB0aGlzLnN0cm0uYXZhaWxfb3V0ID0gMDtcblxuICB2YXIgc3RhdHVzICA9IHpsaWJfaW5mbGF0ZS5pbmZsYXRlSW5pdDIoXG4gICAgdGhpcy5zdHJtLFxuICAgIG9wdC53aW5kb3dCaXRzXG4gICk7XG5cbiAgaWYgKHN0YXR1cyAhPT0gYy5aX09LKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKG1zZ1tzdGF0dXNdKTtcbiAgfVxuXG4gIHRoaXMuaGVhZGVyID0gbmV3IEdaaGVhZGVyKCk7XG5cbiAgemxpYl9pbmZsYXRlLmluZmxhdGVHZXRIZWFkZXIodGhpcy5zdHJtLCB0aGlzLmhlYWRlcik7XG59XG5cbi8qKlxuICogSW5mbGF0ZSNwdXNoKGRhdGFbLCBtb2RlXSkgLT4gQm9vbGVhblxuICogLSBkYXRhIChVaW50OEFycmF5fEFycmF5fEFycmF5QnVmZmVyfFN0cmluZyk6IGlucHV0IGRhdGFcbiAqIC0gbW9kZSAoTnVtYmVyfEJvb2xlYW4pOiAwLi42IGZvciBjb3JyZXNwb25kaW5nIFpfTk9fRkxVU0guLlpfVFJFRSBtb2Rlcy5cbiAqICAgU2VlIGNvbnN0YW50cy4gU2tpcHBlZCBvciBgZmFsc2VgIG1lYW5zIFpfTk9fRkxVU0gsIGB0cnVlYCBtZWFuc2ggWl9GSU5JU0guXG4gKlxuICogU2VuZHMgaW5wdXQgZGF0YSB0byBpbmZsYXRlIHBpcGUsIGdlbmVyYXRpbmcgW1tJbmZsYXRlI29uRGF0YV1dIGNhbGxzIHdpdGhcbiAqIG5ldyBvdXRwdXQgY2h1bmtzLiBSZXR1cm5zIGB0cnVlYCBvbiBzdWNjZXNzLiBUaGUgbGFzdCBkYXRhIGJsb2NrIG11c3QgaGF2ZVxuICogbW9kZSBaX0ZJTklTSCAob3IgYHRydWVgKS4gVGhhdCB3aWxsIGZsdXNoIGludGVybmFsIHBlbmRpbmcgYnVmZmVycyBhbmQgY2FsbFxuICogW1tJbmZsYXRlI29uRW5kXV0uIEZvciBpbnRlcmltIGV4cGxpY2l0IGZsdXNoZXMgKHdpdGhvdXQgZW5kaW5nIHRoZSBzdHJlYW0pIHlvdVxuICogY2FuIHVzZSBtb2RlIFpfU1lOQ19GTFVTSCwga2VlcGluZyB0aGUgZGVjb21wcmVzc2lvbiBjb250ZXh0LlxuICpcbiAqIE9uIGZhaWwgY2FsbCBbW0luZmxhdGUjb25FbmRdXSB3aXRoIGVycm9yIGNvZGUgYW5kIHJldHVybiBmYWxzZS5cbiAqXG4gKiBXZSBzdHJvbmdseSByZWNvbW1lbmQgdG8gdXNlIGBVaW50OEFycmF5YCBvbiBpbnB1dCBmb3IgYmVzdCBzcGVlZCAob3V0cHV0XG4gKiBmb3JtYXQgaXMgZGV0ZWN0ZWQgYXV0b21hdGljYWxseSkuIEFsc28sIGRvbid0IHNraXAgbGFzdCBwYXJhbSBhbmQgYWx3YXlzXG4gKiB1c2UgdGhlIHNhbWUgdHlwZSBpbiB5b3VyIGNvZGUgKGJvb2xlYW4gb3IgbnVtYmVyKS4gVGhhdCB3aWxsIGltcHJvdmUgSlMgc3BlZWQuXG4gKlxuICogRm9yIHJlZ3VsYXIgYEFycmF5YC1zIG1ha2Ugc3VyZSBhbGwgZWxlbWVudHMgYXJlIFswLi4yNTVdLlxuICpcbiAqICMjIyMjIEV4YW1wbGVcbiAqXG4gKiBgYGBqYXZhc2NyaXB0XG4gKiBwdXNoKGNodW5rLCBmYWxzZSk7IC8vIHB1c2ggb25lIG9mIGRhdGEgY2h1bmtzXG4gKiAuLi5cbiAqIHB1c2goY2h1bmssIHRydWUpOyAgLy8gcHVzaCBsYXN0IGNodW5rXG4gKiBgYGBcbiAqKi9cbkluZmxhdGUucHJvdG90eXBlLnB1c2ggPSBmdW5jdGlvbiAoZGF0YSwgbW9kZSkge1xuICB2YXIgc3RybSA9IHRoaXMuc3RybTtcbiAgdmFyIGNodW5rU2l6ZSA9IHRoaXMub3B0aW9ucy5jaHVua1NpemU7XG4gIHZhciBkaWN0aW9uYXJ5ID0gdGhpcy5vcHRpb25zLmRpY3Rpb25hcnk7XG4gIHZhciBzdGF0dXMsIF9tb2RlO1xuICB2YXIgbmV4dF9vdXRfdXRmOCwgdGFpbCwgdXRmOHN0cjtcbiAgdmFyIGRpY3Q7XG5cbiAgLy8gRmxhZyB0byBwcm9wZXJseSBwcm9jZXNzIFpfQlVGX0VSUk9SIG9uIHRlc3RpbmcgaW5mbGF0ZSBjYWxsXG4gIC8vIHdoZW4gd2UgY2hlY2sgdGhhdCBhbGwgb3V0cHV0IGRhdGEgd2FzIGZsdXNoZWQuXG4gIHZhciBhbGxvd0J1ZkVycm9yID0gZmFsc2U7XG5cbiAgaWYgKHRoaXMuZW5kZWQpIHsgcmV0dXJuIGZhbHNlOyB9XG4gIF9tb2RlID0gKG1vZGUgPT09IH5+bW9kZSkgPyBtb2RlIDogKChtb2RlID09PSB0cnVlKSA/IGMuWl9GSU5JU0ggOiBjLlpfTk9fRkxVU0gpO1xuXG4gIC8vIENvbnZlcnQgZGF0YSBpZiBuZWVkZWRcbiAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgIC8vIE9ubHkgYmluYXJ5IHN0cmluZ3MgY2FuIGJlIGRlY29tcHJlc3NlZCBvbiBwcmFjdGljZVxuICAgIHN0cm0uaW5wdXQgPSBzdHJpbmdzLmJpbnN0cmluZzJidWYoZGF0YSk7XG4gIH0gZWxzZSBpZiAodG9TdHJpbmcuY2FsbChkYXRhKSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJykge1xuICAgIHN0cm0uaW5wdXQgPSBuZXcgVWludDhBcnJheShkYXRhKTtcbiAgfSBlbHNlIHtcbiAgICBzdHJtLmlucHV0ID0gZGF0YTtcbiAgfVxuXG4gIHN0cm0ubmV4dF9pbiA9IDA7XG4gIHN0cm0uYXZhaWxfaW4gPSBzdHJtLmlucHV0Lmxlbmd0aDtcblxuICBkbyB7XG4gICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICBzdHJtLm91dHB1dCA9IG5ldyB1dGlscy5CdWY4KGNodW5rU2l6ZSk7XG4gICAgICBzdHJtLm5leHRfb3V0ID0gMDtcbiAgICAgIHN0cm0uYXZhaWxfb3V0ID0gY2h1bmtTaXplO1xuICAgIH1cblxuICAgIHN0YXR1cyA9IHpsaWJfaW5mbGF0ZS5pbmZsYXRlKHN0cm0sIGMuWl9OT19GTFVTSCk7ICAgIC8qIG5vIGJhZCByZXR1cm4gdmFsdWUgKi9cblxuICAgIGlmIChzdGF0dXMgPT09IGMuWl9ORUVEX0RJQ1QgJiYgZGljdGlvbmFyeSkge1xuICAgICAgLy8gQ29udmVydCBkYXRhIGlmIG5lZWRlZFxuICAgICAgaWYgKHR5cGVvZiBkaWN0aW9uYXJ5ID09PSAnc3RyaW5nJykge1xuICAgICAgICBkaWN0ID0gc3RyaW5ncy5zdHJpbmcyYnVmKGRpY3Rpb25hcnkpO1xuICAgICAgfSBlbHNlIGlmICh0b1N0cmluZy5jYWxsKGRpY3Rpb25hcnkpID09PSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nKSB7XG4gICAgICAgIGRpY3QgPSBuZXcgVWludDhBcnJheShkaWN0aW9uYXJ5KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRpY3QgPSBkaWN0aW9uYXJ5O1xuICAgICAgfVxuXG4gICAgICBzdGF0dXMgPSB6bGliX2luZmxhdGUuaW5mbGF0ZVNldERpY3Rpb25hcnkodGhpcy5zdHJtLCBkaWN0KTtcblxuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IGMuWl9CVUZfRVJST1IgJiYgYWxsb3dCdWZFcnJvciA9PT0gdHJ1ZSkge1xuICAgICAgc3RhdHVzID0gYy5aX09LO1xuICAgICAgYWxsb3dCdWZFcnJvciA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgIT09IGMuWl9TVFJFQU1fRU5EICYmIHN0YXR1cyAhPT0gYy5aX09LKSB7XG4gICAgICB0aGlzLm9uRW5kKHN0YXR1cyk7XG4gICAgICB0aGlzLmVuZGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAoc3RybS5uZXh0X291dCkge1xuICAgICAgaWYgKHN0cm0uYXZhaWxfb3V0ID09PSAwIHx8IHN0YXR1cyA9PT0gYy5aX1NUUkVBTV9FTkQgfHwgKHN0cm0uYXZhaWxfaW4gPT09IDAgJiYgKF9tb2RlID09PSBjLlpfRklOSVNIIHx8IF9tb2RlID09PSBjLlpfU1lOQ19GTFVTSCkpKSB7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50byA9PT0gJ3N0cmluZycpIHtcblxuICAgICAgICAgIG5leHRfb3V0X3V0ZjggPSBzdHJpbmdzLnV0Zjhib3JkZXIoc3RybS5vdXRwdXQsIHN0cm0ubmV4dF9vdXQpO1xuXG4gICAgICAgICAgdGFpbCA9IHN0cm0ubmV4dF9vdXQgLSBuZXh0X291dF91dGY4O1xuICAgICAgICAgIHV0ZjhzdHIgPSBzdHJpbmdzLmJ1ZjJzdHJpbmcoc3RybS5vdXRwdXQsIG5leHRfb3V0X3V0ZjgpO1xuXG4gICAgICAgICAgLy8gbW92ZSB0YWlsXG4gICAgICAgICAgc3RybS5uZXh0X291dCA9IHRhaWw7XG4gICAgICAgICAgc3RybS5hdmFpbF9vdXQgPSBjaHVua1NpemUgLSB0YWlsO1xuICAgICAgICAgIGlmICh0YWlsKSB7IHV0aWxzLmFycmF5U2V0KHN0cm0ub3V0cHV0LCBzdHJtLm91dHB1dCwgbmV4dF9vdXRfdXRmOCwgdGFpbCwgMCk7IH1cblxuICAgICAgICAgIHRoaXMub25EYXRhKHV0ZjhzdHIpO1xuXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5vbkRhdGEodXRpbHMuc2hyaW5rQnVmKHN0cm0ub3V0cHV0LCBzdHJtLm5leHRfb3V0KSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXaGVuIG5vIG1vcmUgaW5wdXQgZGF0YSwgd2Ugc2hvdWxkIGNoZWNrIHRoYXQgaW50ZXJuYWwgaW5mbGF0ZSBidWZmZXJzXG4gICAgLy8gYXJlIGZsdXNoZWQuIFRoZSBvbmx5IHdheSB0byBkbyBpdCB3aGVuIGF2YWlsX291dCA9IDAgLSBydW4gb25lIG1vcmVcbiAgICAvLyBpbmZsYXRlIHBhc3MuIEJ1dCBpZiBvdXRwdXQgZGF0YSBub3QgZXhpc3RzLCBpbmZsYXRlIHJldHVybiBaX0JVRl9FUlJPUi5cbiAgICAvLyBIZXJlIHdlIHNldCBmbGFnIHRvIHByb2Nlc3MgdGhpcyBlcnJvciBwcm9wZXJseS5cbiAgICAvL1xuICAgIC8vIE5PVEUuIERlZmxhdGUgZG9lcyBub3QgcmV0dXJuIGVycm9yIGluIHRoaXMgY2FzZSBhbmQgZG9lcyBub3QgbmVlZHMgc3VjaFxuICAgIC8vIGxvZ2ljLlxuICAgIGlmIChzdHJtLmF2YWlsX2luID09PSAwICYmIHN0cm0uYXZhaWxfb3V0ID09PSAwKSB7XG4gICAgICBhbGxvd0J1ZkVycm9yID0gdHJ1ZTtcbiAgICB9XG5cbiAgfSB3aGlsZSAoKHN0cm0uYXZhaWxfaW4gPiAwIHx8IHN0cm0uYXZhaWxfb3V0ID09PSAwKSAmJiBzdGF0dXMgIT09IGMuWl9TVFJFQU1fRU5EKTtcblxuICBpZiAoc3RhdHVzID09PSBjLlpfU1RSRUFNX0VORCkge1xuICAgIF9tb2RlID0gYy5aX0ZJTklTSDtcbiAgfVxuXG4gIC8vIEZpbmFsaXplIG9uIHRoZSBsYXN0IGNodW5rLlxuICBpZiAoX21vZGUgPT09IGMuWl9GSU5JU0gpIHtcbiAgICBzdGF0dXMgPSB6bGliX2luZmxhdGUuaW5mbGF0ZUVuZCh0aGlzLnN0cm0pO1xuICAgIHRoaXMub25FbmQoc3RhdHVzKTtcbiAgICB0aGlzLmVuZGVkID0gdHJ1ZTtcbiAgICByZXR1cm4gc3RhdHVzID09PSBjLlpfT0s7XG4gIH1cblxuICAvLyBjYWxsYmFjayBpbnRlcmltIHJlc3VsdHMgaWYgWl9TWU5DX0ZMVVNILlxuICBpZiAoX21vZGUgPT09IGMuWl9TWU5DX0ZMVVNIKSB7XG4gICAgdGhpcy5vbkVuZChjLlpfT0spO1xuICAgIHN0cm0uYXZhaWxfb3V0ID0gMDtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufTtcblxuXG4vKipcbiAqIEluZmxhdGUjb25EYXRhKGNodW5rKSAtPiBWb2lkXG4gKiAtIGNodW5rIChVaW50OEFycmF5fEFycmF5fFN0cmluZyk6IG91cHV0IGRhdGEuIFR5cGUgb2YgYXJyYXkgZGVwZW5kc1xuICogICBvbiBqcyBlbmdpbmUgc3VwcG9ydC4gV2hlbiBzdHJpbmcgb3V0cHV0IHJlcXVlc3RlZCwgZWFjaCBjaHVua1xuICogICB3aWxsIGJlIHN0cmluZy5cbiAqXG4gKiBCeSBkZWZhdWx0LCBzdG9yZXMgZGF0YSBibG9ja3MgaW4gYGNodW5rc1tdYCBwcm9wZXJ0eSBhbmQgZ2x1ZVxuICogdGhvc2UgaW4gYG9uRW5kYC4gT3ZlcnJpZGUgdGhpcyBoYW5kbGVyLCBpZiB5b3UgbmVlZCBhbm90aGVyIGJlaGF2aW91ci5cbiAqKi9cbkluZmxhdGUucHJvdG90eXBlLm9uRGF0YSA9IGZ1bmN0aW9uIChjaHVuaykge1xuICB0aGlzLmNodW5rcy5wdXNoKGNodW5rKTtcbn07XG5cblxuLyoqXG4gKiBJbmZsYXRlI29uRW5kKHN0YXR1cykgLT4gVm9pZFxuICogLSBzdGF0dXMgKE51bWJlcik6IGluZmxhdGUgc3RhdHVzLiAwIChaX09LKSBvbiBzdWNjZXNzLFxuICogICBvdGhlciBpZiBub3QuXG4gKlxuICogQ2FsbGVkIGVpdGhlciBhZnRlciB5b3UgdGVsbCBpbmZsYXRlIHRoYXQgdGhlIGlucHV0IHN0cmVhbSBpc1xuICogY29tcGxldGUgKFpfRklOSVNIKSBvciBzaG91bGQgYmUgZmx1c2hlZCAoWl9TWU5DX0ZMVVNIKVxuICogb3IgaWYgYW4gZXJyb3IgaGFwcGVuZWQuIEJ5IGRlZmF1bHQgLSBqb2luIGNvbGxlY3RlZCBjaHVua3MsXG4gKiBmcmVlIG1lbW9yeSBhbmQgZmlsbCBgcmVzdWx0c2AgLyBgZXJyYCBwcm9wZXJ0aWVzLlxuICoqL1xuSW5mbGF0ZS5wcm90b3R5cGUub25FbmQgPSBmdW5jdGlvbiAoc3RhdHVzKSB7XG4gIC8vIE9uIHN1Y2Nlc3MgLSBqb2luXG4gIGlmIChzdGF0dXMgPT09IGMuWl9PSykge1xuICAgIGlmICh0aGlzLm9wdGlvbnMudG8gPT09ICdzdHJpbmcnKSB7XG4gICAgICAvLyBHbHVlICYgY29udmVydCBoZXJlLCB1bnRpbCB3ZSB0ZWFjaCBwYWtvIHRvIHNlbmRcbiAgICAgIC8vIHV0ZjggYWxsaWduZWQgc3RyaW5ncyB0byBvbkRhdGFcbiAgICAgIHRoaXMucmVzdWx0ID0gdGhpcy5jaHVua3Muam9pbignJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVzdWx0ID0gdXRpbHMuZmxhdHRlbkNodW5rcyh0aGlzLmNodW5rcyk7XG4gICAgfVxuICB9XG4gIHRoaXMuY2h1bmtzID0gW107XG4gIHRoaXMuZXJyID0gc3RhdHVzO1xuICB0aGlzLm1zZyA9IHRoaXMuc3RybS5tc2c7XG59O1xuXG5cbi8qKlxuICogaW5mbGF0ZShkYXRhWywgb3B0aW9uc10pIC0+IFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nXG4gKiAtIGRhdGEgKFVpbnQ4QXJyYXl8QXJyYXl8U3RyaW5nKTogaW5wdXQgZGF0YSB0byBkZWNvbXByZXNzLlxuICogLSBvcHRpb25zIChPYmplY3QpOiB6bGliIGluZmxhdGUgb3B0aW9ucy5cbiAqXG4gKiBEZWNvbXByZXNzIGBkYXRhYCB3aXRoIGluZmxhdGUvdW5nemlwIGFuZCBgb3B0aW9uc2AuIEF1dG9kZXRlY3RcbiAqIGZvcm1hdCB2aWEgd3JhcHBlciBoZWFkZXIgYnkgZGVmYXVsdC4gVGhhdCdzIHdoeSB3ZSBkb24ndCBwcm92aWRlXG4gKiBzZXBhcmF0ZSBgdW5nemlwYCBtZXRob2QuXG4gKlxuICogU3VwcG9ydGVkIG9wdGlvbnMgYXJlOlxuICpcbiAqIC0gd2luZG93Qml0c1xuICpcbiAqIFtodHRwOi8vemxpYi5uZXQvbWFudWFsLmh0bWwjQWR2YW5jZWRdKGh0dHA6Ly96bGliLm5ldC9tYW51YWwuaHRtbCNBZHZhbmNlZClcbiAqIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqIFN1Z2FyIChvcHRpb25zKTpcbiAqXG4gKiAtIGByYXdgIChCb29sZWFuKSAtIHNheSB0aGF0IHdlIHdvcmsgd2l0aCByYXcgc3RyZWFtLCBpZiB5b3UgZG9uJ3Qgd2lzaCB0byBzcGVjaWZ5XG4gKiAgIG5lZ2F0aXZlIHdpbmRvd0JpdHMgaW1wbGljaXRseS5cbiAqIC0gYHRvYCAoU3RyaW5nKSAtIGlmIGVxdWFsIHRvICdzdHJpbmcnLCB0aGVuIHJlc3VsdCB3aWxsIGJlIGNvbnZlcnRlZFxuICogICBmcm9tIHV0ZjggdG8gdXRmMTYgKGphdmFzY3JpcHQpIHN0cmluZy4gV2hlbiBzdHJpbmcgb3V0cHV0IHJlcXVlc3RlZCxcbiAqICAgY2h1bmsgbGVuZ3RoIGNhbiBkaWZmZXIgZnJvbSBgY2h1bmtTaXplYCwgZGVwZW5kaW5nIG9uIGNvbnRlbnQuXG4gKlxuICpcbiAqICMjIyMjIEV4YW1wbGU6XG4gKlxuICogYGBgamF2YXNjcmlwdFxuICogdmFyIHBha28gPSByZXF1aXJlKCdwYWtvJylcbiAqICAgLCBpbnB1dCA9IHBha28uZGVmbGF0ZShbMSwyLDMsNCw1LDYsNyw4LDldKVxuICogICAsIG91dHB1dDtcbiAqXG4gKiB0cnkge1xuICogICBvdXRwdXQgPSBwYWtvLmluZmxhdGUoaW5wdXQpO1xuICogfSBjYXRjaCAoZXJyKVxuICogICBjb25zb2xlLmxvZyhlcnIpO1xuICogfVxuICogYGBgXG4gKiovXG5mdW5jdGlvbiBpbmZsYXRlKGlucHV0LCBvcHRpb25zKSB7XG4gIHZhciBpbmZsYXRvciA9IG5ldyBJbmZsYXRlKG9wdGlvbnMpO1xuXG4gIGluZmxhdG9yLnB1c2goaW5wdXQsIHRydWUpO1xuXG4gIC8vIFRoYXQgd2lsbCBuZXZlciBoYXBwZW5zLCBpZiB5b3UgZG9uJ3QgY2hlYXQgd2l0aCBvcHRpb25zIDopXG4gIGlmIChpbmZsYXRvci5lcnIpIHsgdGhyb3cgaW5mbGF0b3IubXNnOyB9XG5cbiAgcmV0dXJuIGluZmxhdG9yLnJlc3VsdDtcbn1cblxuXG4vKipcbiAqIGluZmxhdGVSYXcoZGF0YVssIG9wdGlvbnNdKSAtPiBVaW50OEFycmF5fEFycmF5fFN0cmluZ1xuICogLSBkYXRhIChVaW50OEFycmF5fEFycmF5fFN0cmluZyk6IGlucHV0IGRhdGEgdG8gZGVjb21wcmVzcy5cbiAqIC0gb3B0aW9ucyAoT2JqZWN0KTogemxpYiBpbmZsYXRlIG9wdGlvbnMuXG4gKlxuICogVGhlIHNhbWUgYXMgW1tpbmZsYXRlXV0sIGJ1dCBjcmVhdGVzIHJhdyBkYXRhLCB3aXRob3V0IHdyYXBwZXJcbiAqIChoZWFkZXIgYW5kIGFkbGVyMzIgY3JjKS5cbiAqKi9cbmZ1bmN0aW9uIGluZmxhdGVSYXcoaW5wdXQsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIG9wdGlvbnMucmF3ID0gdHJ1ZTtcbiAgcmV0dXJuIGluZmxhdGUoaW5wdXQsIG9wdGlvbnMpO1xufVxuXG5cbi8qKlxuICogdW5nemlwKGRhdGFbLCBvcHRpb25zXSkgLT4gVWludDhBcnJheXxBcnJheXxTdHJpbmdcbiAqIC0gZGF0YSAoVWludDhBcnJheXxBcnJheXxTdHJpbmcpOiBpbnB1dCBkYXRhIHRvIGRlY29tcHJlc3MuXG4gKiAtIG9wdGlvbnMgKE9iamVjdCk6IHpsaWIgaW5mbGF0ZSBvcHRpb25zLlxuICpcbiAqIEp1c3Qgc2hvcnRjdXQgdG8gW1tpbmZsYXRlXV0sIGJlY2F1c2UgaXQgYXV0b2RldGVjdHMgZm9ybWF0XG4gKiBieSBoZWFkZXIuY29udGVudC4gRG9uZSBmb3IgY29udmVuaWVuY2UuXG4gKiovXG5cblxuZXhwb3J0cy5JbmZsYXRlID0gSW5mbGF0ZTtcbmV4cG9ydHMuaW5mbGF0ZSA9IGluZmxhdGU7XG5leHBvcnRzLmluZmxhdGVSYXcgPSBpbmZsYXRlUmF3O1xuZXhwb3J0cy51bmd6aXAgID0gaW5mbGF0ZTtcbiIsIid1c2Ugc3RyaWN0JztcblxuXG52YXIgVFlQRURfT0sgPSAgKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJykgJiZcbiAgICAgICAgICAgICAgICAodHlwZW9mIFVpbnQxNkFycmF5ICE9PSAndW5kZWZpbmVkJykgJiZcbiAgICAgICAgICAgICAgICAodHlwZW9mIEludDMyQXJyYXkgIT09ICd1bmRlZmluZWQnKTtcblxuXG5leHBvcnRzLmFzc2lnbiA9IGZ1bmN0aW9uIChvYmogLypmcm9tMSwgZnJvbTIsIGZyb20zLCAuLi4qLykge1xuICB2YXIgc291cmNlcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gIHdoaWxlIChzb3VyY2VzLmxlbmd0aCkge1xuICAgIHZhciBzb3VyY2UgPSBzb3VyY2VzLnNoaWZ0KCk7XG4gICAgaWYgKCFzb3VyY2UpIHsgY29udGludWU7IH1cblxuICAgIGlmICh0eXBlb2Ygc291cmNlICE9PSAnb2JqZWN0Jykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzb3VyY2UgKyAnbXVzdCBiZSBub24tb2JqZWN0Jyk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgcCBpbiBzb3VyY2UpIHtcbiAgICAgIGlmIChzb3VyY2UuaGFzT3duUHJvcGVydHkocCkpIHtcbiAgICAgICAgb2JqW3BdID0gc291cmNlW3BdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBvYmo7XG59O1xuXG5cbi8vIHJlZHVjZSBidWZmZXIgc2l6ZSwgYXZvaWRpbmcgbWVtIGNvcHlcbmV4cG9ydHMuc2hyaW5rQnVmID0gZnVuY3Rpb24gKGJ1Ziwgc2l6ZSkge1xuICBpZiAoYnVmLmxlbmd0aCA9PT0gc2l6ZSkgeyByZXR1cm4gYnVmOyB9XG4gIGlmIChidWYuc3ViYXJyYXkpIHsgcmV0dXJuIGJ1Zi5zdWJhcnJheSgwLCBzaXplKTsgfVxuICBidWYubGVuZ3RoID0gc2l6ZTtcbiAgcmV0dXJuIGJ1Zjtcbn07XG5cblxudmFyIGZuVHlwZWQgPSB7XG4gIGFycmF5U2V0OiBmdW5jdGlvbiAoZGVzdCwgc3JjLCBzcmNfb2ZmcywgbGVuLCBkZXN0X29mZnMpIHtcbiAgICBpZiAoc3JjLnN1YmFycmF5ICYmIGRlc3Quc3ViYXJyYXkpIHtcbiAgICAgIGRlc3Quc2V0KHNyYy5zdWJhcnJheShzcmNfb2Zmcywgc3JjX29mZnMgKyBsZW4pLCBkZXN0X29mZnMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBGYWxsYmFjayB0byBvcmRpbmFyeSBhcnJheVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgIGRlc3RbZGVzdF9vZmZzICsgaV0gPSBzcmNbc3JjX29mZnMgKyBpXTtcbiAgICB9XG4gIH0sXG4gIC8vIEpvaW4gYXJyYXkgb2YgY2h1bmtzIHRvIHNpbmdsZSBhcnJheS5cbiAgZmxhdHRlbkNodW5rczogZnVuY3Rpb24gKGNodW5rcykge1xuICAgIHZhciBpLCBsLCBsZW4sIHBvcywgY2h1bmssIHJlc3VsdDtcblxuICAgIC8vIGNhbGN1bGF0ZSBkYXRhIGxlbmd0aFxuICAgIGxlbiA9IDA7XG4gICAgZm9yIChpID0gMCwgbCA9IGNodW5rcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGxlbiArPSBjaHVua3NbaV0ubGVuZ3RoO1xuICAgIH1cblxuICAgIC8vIGpvaW4gY2h1bmtzXG4gICAgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkobGVuKTtcbiAgICBwb3MgPSAwO1xuICAgIGZvciAoaSA9IDAsIGwgPSBjaHVua3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBjaHVuayA9IGNodW5rc1tpXTtcbiAgICAgIHJlc3VsdC5zZXQoY2h1bmssIHBvcyk7XG4gICAgICBwb3MgKz0gY2h1bmsubGVuZ3RoO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn07XG5cbnZhciBmblVudHlwZWQgPSB7XG4gIGFycmF5U2V0OiBmdW5jdGlvbiAoZGVzdCwgc3JjLCBzcmNfb2ZmcywgbGVuLCBkZXN0X29mZnMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICBkZXN0W2Rlc3Rfb2ZmcyArIGldID0gc3JjW3NyY19vZmZzICsgaV07XG4gICAgfVxuICB9LFxuICAvLyBKb2luIGFycmF5IG9mIGNodW5rcyB0byBzaW5nbGUgYXJyYXkuXG4gIGZsYXR0ZW5DaHVua3M6IGZ1bmN0aW9uIChjaHVua3MpIHtcbiAgICByZXR1cm4gW10uY29uY2F0LmFwcGx5KFtdLCBjaHVua3MpO1xuICB9XG59O1xuXG5cbi8vIEVuYWJsZS9EaXNhYmxlIHR5cGVkIGFycmF5cyB1c2UsIGZvciB0ZXN0aW5nXG4vL1xuZXhwb3J0cy5zZXRUeXBlZCA9IGZ1bmN0aW9uIChvbikge1xuICBpZiAob24pIHtcbiAgICBleHBvcnRzLkJ1ZjggID0gVWludDhBcnJheTtcbiAgICBleHBvcnRzLkJ1ZjE2ID0gVWludDE2QXJyYXk7XG4gICAgZXhwb3J0cy5CdWYzMiA9IEludDMyQXJyYXk7XG4gICAgZXhwb3J0cy5hc3NpZ24oZXhwb3J0cywgZm5UeXBlZCk7XG4gIH0gZWxzZSB7XG4gICAgZXhwb3J0cy5CdWY4ICA9IEFycmF5O1xuICAgIGV4cG9ydHMuQnVmMTYgPSBBcnJheTtcbiAgICBleHBvcnRzLkJ1ZjMyID0gQXJyYXk7XG4gICAgZXhwb3J0cy5hc3NpZ24oZXhwb3J0cywgZm5VbnR5cGVkKTtcbiAgfVxufTtcblxuZXhwb3J0cy5zZXRUeXBlZChUWVBFRF9PSyk7XG4iLCIvLyBTdHJpbmcgZW5jb2RlL2RlY29kZSBoZWxwZXJzXG4ndXNlIHN0cmljdCc7XG5cblxudmFyIHV0aWxzID0gcmVxdWlyZSgnLi9jb21tb24nKTtcblxuXG4vLyBRdWljayBjaGVjayBpZiB3ZSBjYW4gdXNlIGZhc3QgYXJyYXkgdG8gYmluIHN0cmluZyBjb252ZXJzaW9uXG4vL1xuLy8gLSBhcHBseShBcnJheSkgY2FuIGZhaWwgb24gQW5kcm9pZCAyLjJcbi8vIC0gYXBwbHkoVWludDhBcnJheSkgY2FuIGZhaWwgb24gaU9TIDUuMSBTYWZhcnlcbi8vXG52YXIgU1RSX0FQUExZX09LID0gdHJ1ZTtcbnZhciBTVFJfQVBQTFlfVUlBX09LID0gdHJ1ZTtcblxudHJ5IHsgU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCBbIDAgXSk7IH0gY2F0Y2ggKF9fKSB7IFNUUl9BUFBMWV9PSyA9IGZhbHNlOyB9XG50cnkgeyBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsIG5ldyBVaW50OEFycmF5KDEpKTsgfSBjYXRjaCAoX18pIHsgU1RSX0FQUExZX1VJQV9PSyA9IGZhbHNlOyB9XG5cblxuLy8gVGFibGUgd2l0aCB1dGY4IGxlbmd0aHMgKGNhbGN1bGF0ZWQgYnkgZmlyc3QgYnl0ZSBvZiBzZXF1ZW5jZSlcbi8vIE5vdGUsIHRoYXQgNSAmIDYtYnl0ZSB2YWx1ZXMgYW5kIHNvbWUgNC1ieXRlIHZhbHVlcyBjYW4gbm90IGJlIHJlcHJlc2VudGVkIGluIEpTLFxuLy8gYmVjYXVzZSBtYXggcG9zc2libGUgY29kZXBvaW50IGlzIDB4MTBmZmZmXG52YXIgX3V0ZjhsZW4gPSBuZXcgdXRpbHMuQnVmOCgyNTYpO1xuZm9yICh2YXIgcSA9IDA7IHEgPCAyNTY7IHErKykge1xuICBfdXRmOGxlbltxXSA9IChxID49IDI1MiA/IDYgOiBxID49IDI0OCA/IDUgOiBxID49IDI0MCA/IDQgOiBxID49IDIyNCA/IDMgOiBxID49IDE5MiA/IDIgOiAxKTtcbn1cbl91dGY4bGVuWzI1NF0gPSBfdXRmOGxlblsyNTRdID0gMTsgLy8gSW52YWxpZCBzZXF1ZW5jZSBzdGFydFxuXG5cbi8vIGNvbnZlcnQgc3RyaW5nIHRvIGFycmF5ICh0eXBlZCwgd2hlbiBwb3NzaWJsZSlcbmV4cG9ydHMuc3RyaW5nMmJ1ZiA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgdmFyIGJ1ZiwgYywgYzIsIG1fcG9zLCBpLCBzdHJfbGVuID0gc3RyLmxlbmd0aCwgYnVmX2xlbiA9IDA7XG5cbiAgLy8gY291bnQgYmluYXJ5IHNpemVcbiAgZm9yIChtX3BvcyA9IDA7IG1fcG9zIDwgc3RyX2xlbjsgbV9wb3MrKykge1xuICAgIGMgPSBzdHIuY2hhckNvZGVBdChtX3Bvcyk7XG4gICAgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmIChtX3BvcyArIDEgPCBzdHJfbGVuKSkge1xuICAgICAgYzIgPSBzdHIuY2hhckNvZGVBdChtX3BvcyArIDEpO1xuICAgICAgaWYgKChjMiAmIDB4ZmMwMCkgPT09IDB4ZGMwMCkge1xuICAgICAgICBjID0gMHgxMDAwMCArICgoYyAtIDB4ZDgwMCkgPDwgMTApICsgKGMyIC0gMHhkYzAwKTtcbiAgICAgICAgbV9wb3MrKztcbiAgICAgIH1cbiAgICB9XG4gICAgYnVmX2xlbiArPSBjIDwgMHg4MCA/IDEgOiBjIDwgMHg4MDAgPyAyIDogYyA8IDB4MTAwMDAgPyAzIDogNDtcbiAgfVxuXG4gIC8vIGFsbG9jYXRlIGJ1ZmZlclxuICBidWYgPSBuZXcgdXRpbHMuQnVmOChidWZfbGVuKTtcblxuICAvLyBjb252ZXJ0XG4gIGZvciAoaSA9IDAsIG1fcG9zID0gMDsgaSA8IGJ1Zl9sZW47IG1fcG9zKyspIHtcbiAgICBjID0gc3RyLmNoYXJDb2RlQXQobV9wb3MpO1xuICAgIGlmICgoYyAmIDB4ZmMwMCkgPT09IDB4ZDgwMCAmJiAobV9wb3MgKyAxIDwgc3RyX2xlbikpIHtcbiAgICAgIGMyID0gc3RyLmNoYXJDb2RlQXQobV9wb3MgKyAxKTtcbiAgICAgIGlmICgoYzIgJiAweGZjMDApID09PSAweGRjMDApIHtcbiAgICAgICAgYyA9IDB4MTAwMDAgKyAoKGMgLSAweGQ4MDApIDw8IDEwKSArIChjMiAtIDB4ZGMwMCk7XG4gICAgICAgIG1fcG9zKys7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChjIDwgMHg4MCkge1xuICAgICAgLyogb25lIGJ5dGUgKi9cbiAgICAgIGJ1ZltpKytdID0gYztcbiAgICB9IGVsc2UgaWYgKGMgPCAweDgwMCkge1xuICAgICAgLyogdHdvIGJ5dGVzICovXG4gICAgICBidWZbaSsrXSA9IDB4QzAgfCAoYyA+Pj4gNik7XG4gICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyAmIDB4M2YpO1xuICAgIH0gZWxzZSBpZiAoYyA8IDB4MTAwMDApIHtcbiAgICAgIC8qIHRocmVlIGJ5dGVzICovXG4gICAgICBidWZbaSsrXSA9IDB4RTAgfCAoYyA+Pj4gMTIpO1xuICAgICAgYnVmW2krK10gPSAweDgwIHwgKGMgPj4+IDYgJiAweDNmKTtcbiAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjICYgMHgzZik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8qIGZvdXIgYnl0ZXMgKi9cbiAgICAgIGJ1ZltpKytdID0gMHhmMCB8IChjID4+PiAxOCk7XG4gICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyA+Pj4gMTIgJiAweDNmKTtcbiAgICAgIGJ1ZltpKytdID0gMHg4MCB8IChjID4+PiA2ICYgMHgzZik7XG4gICAgICBidWZbaSsrXSA9IDB4ODAgfCAoYyAmIDB4M2YpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBidWY7XG59O1xuXG4vLyBIZWxwZXIgKHVzZWQgaW4gMiBwbGFjZXMpXG5mdW5jdGlvbiBidWYyYmluc3RyaW5nKGJ1ZiwgbGVuKSB7XG4gIC8vIHVzZSBmYWxsYmFjayBmb3IgYmlnIGFycmF5cyB0byBhdm9pZCBzdGFjayBvdmVyZmxvd1xuICBpZiAobGVuIDwgNjU1MzcpIHtcbiAgICBpZiAoKGJ1Zi5zdWJhcnJheSAmJiBTVFJfQVBQTFlfVUlBX09LKSB8fCAoIWJ1Zi5zdWJhcnJheSAmJiBTVFJfQVBQTFlfT0spKSB7XG4gICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLCB1dGlscy5zaHJpbmtCdWYoYnVmLCBsZW4pKTtcbiAgICB9XG4gIH1cblxuICB2YXIgcmVzdWx0ID0gJyc7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcbiAgICByZXN1bHQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cblxuLy8gQ29udmVydCBieXRlIGFycmF5IHRvIGJpbmFyeSBzdHJpbmdcbmV4cG9ydHMuYnVmMmJpbnN0cmluZyA9IGZ1bmN0aW9uIChidWYpIHtcbiAgcmV0dXJuIGJ1ZjJiaW5zdHJpbmcoYnVmLCBidWYubGVuZ3RoKTtcbn07XG5cblxuLy8gQ29udmVydCBiaW5hcnkgc3RyaW5nICh0eXBlZCwgd2hlbiBwb3NzaWJsZSlcbmV4cG9ydHMuYmluc3RyaW5nMmJ1ZiA9IGZ1bmN0aW9uIChzdHIpIHtcbiAgdmFyIGJ1ZiA9IG5ldyB1dGlscy5CdWY4KHN0ci5sZW5ndGgpO1xuICBmb3IgKHZhciBpID0gMCwgbGVuID0gYnVmLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgYnVmW2ldID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gIH1cbiAgcmV0dXJuIGJ1Zjtcbn07XG5cblxuLy8gY29udmVydCBhcnJheSB0byBzdHJpbmdcbmV4cG9ydHMuYnVmMnN0cmluZyA9IGZ1bmN0aW9uIChidWYsIG1heCkge1xuICB2YXIgaSwgb3V0LCBjLCBjX2xlbjtcbiAgdmFyIGxlbiA9IG1heCB8fCBidWYubGVuZ3RoO1xuXG4gIC8vIFJlc2VydmUgbWF4IHBvc3NpYmxlIGxlbmd0aCAoMiB3b3JkcyBwZXIgY2hhcilcbiAgLy8gTkI6IGJ5IHVua25vd24gcmVhc29ucywgQXJyYXkgaXMgc2lnbmlmaWNhbnRseSBmYXN0ZXIgZm9yXG4gIC8vICAgICBTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5IHRoYW4gVWludDE2QXJyYXkuXG4gIHZhciB1dGYxNmJ1ZiA9IG5ldyBBcnJheShsZW4gKiAyKTtcblxuICBmb3IgKG91dCA9IDAsIGkgPSAwOyBpIDwgbGVuOykge1xuICAgIGMgPSBidWZbaSsrXTtcbiAgICAvLyBxdWljayBwcm9jZXNzIGFzY2lpXG4gICAgaWYgKGMgPCAweDgwKSB7IHV0ZjE2YnVmW291dCsrXSA9IGM7IGNvbnRpbnVlOyB9XG5cbiAgICBjX2xlbiA9IF91dGY4bGVuW2NdO1xuICAgIC8vIHNraXAgNSAmIDYgYnl0ZSBjb2Rlc1xuICAgIGlmIChjX2xlbiA+IDQpIHsgdXRmMTZidWZbb3V0KytdID0gMHhmZmZkOyBpICs9IGNfbGVuIC0gMTsgY29udGludWU7IH1cblxuICAgIC8vIGFwcGx5IG1hc2sgb24gZmlyc3QgYnl0ZVxuICAgIGMgJj0gY19sZW4gPT09IDIgPyAweDFmIDogY19sZW4gPT09IDMgPyAweDBmIDogMHgwNztcbiAgICAvLyBqb2luIHRoZSByZXN0XG4gICAgd2hpbGUgKGNfbGVuID4gMSAmJiBpIDwgbGVuKSB7XG4gICAgICBjID0gKGMgPDwgNikgfCAoYnVmW2krK10gJiAweDNmKTtcbiAgICAgIGNfbGVuLS07XG4gICAgfVxuXG4gICAgLy8gdGVybWluYXRlZCBieSBlbmQgb2Ygc3RyaW5nP1xuICAgIGlmIChjX2xlbiA+IDEpIHsgdXRmMTZidWZbb3V0KytdID0gMHhmZmZkOyBjb250aW51ZTsgfVxuXG4gICAgaWYgKGMgPCAweDEwMDAwKSB7XG4gICAgICB1dGYxNmJ1ZltvdXQrK10gPSBjO1xuICAgIH0gZWxzZSB7XG4gICAgICBjIC09IDB4MTAwMDA7XG4gICAgICB1dGYxNmJ1ZltvdXQrK10gPSAweGQ4MDAgfCAoKGMgPj4gMTApICYgMHgzZmYpO1xuICAgICAgdXRmMTZidWZbb3V0KytdID0gMHhkYzAwIHwgKGMgJiAweDNmZik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ1ZjJiaW5zdHJpbmcodXRmMTZidWYsIG91dCk7XG59O1xuXG5cbi8vIENhbGN1bGF0ZSBtYXggcG9zc2libGUgcG9zaXRpb24gaW4gdXRmOCBidWZmZXIsXG4vLyB0aGF0IHdpbGwgbm90IGJyZWFrIHNlcXVlbmNlLiBJZiB0aGF0J3Mgbm90IHBvc3NpYmxlXG4vLyAtICh2ZXJ5IHNtYWxsIGxpbWl0cykgcmV0dXJuIG1heCBzaXplIGFzIGlzLlxuLy9cbi8vIGJ1ZltdIC0gdXRmOCBieXRlcyBhcnJheVxuLy8gbWF4ICAgLSBsZW5ndGggbGltaXQgKG1hbmRhdG9yeSk7XG5leHBvcnRzLnV0Zjhib3JkZXIgPSBmdW5jdGlvbiAoYnVmLCBtYXgpIHtcbiAgdmFyIHBvcztcblxuICBtYXggPSBtYXggfHwgYnVmLmxlbmd0aDtcbiAgaWYgKG1heCA+IGJ1Zi5sZW5ndGgpIHsgbWF4ID0gYnVmLmxlbmd0aDsgfVxuXG4gIC8vIGdvIGJhY2sgZnJvbSBsYXN0IHBvc2l0aW9uLCB1bnRpbCBzdGFydCBvZiBzZXF1ZW5jZSBmb3VuZFxuICBwb3MgPSBtYXggLSAxO1xuICB3aGlsZSAocG9zID49IDAgJiYgKGJ1Zltwb3NdICYgMHhDMCkgPT09IDB4ODApIHsgcG9zLS07IH1cblxuICAvLyBGdWNrdXAgLSB2ZXJ5IHNtYWxsIGFuZCBicm9rZW4gc2VxdWVuY2UsXG4gIC8vIHJldHVybiBtYXgsIGJlY2F1c2Ugd2Ugc2hvdWxkIHJldHVybiBzb21ldGhpbmcgYW55d2F5LlxuICBpZiAocG9zIDwgMCkgeyByZXR1cm4gbWF4OyB9XG5cbiAgLy8gSWYgd2UgY2FtZSB0byBzdGFydCBvZiBidWZmZXIgLSB0aGF0IG1lYW5zIHZ1ZmZlciBpcyB0b28gc21hbGwsXG4gIC8vIHJldHVybiBtYXggdG9vLlxuICBpZiAocG9zID09PSAwKSB7IHJldHVybiBtYXg7IH1cblxuICByZXR1cm4gKHBvcyArIF91dGY4bGVuW2J1Zltwb3NdXSA+IG1heCkgPyBwb3MgOiBtYXg7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG4vLyBOb3RlOiBhZGxlcjMyIHRha2VzIDEyJSBmb3IgbGV2ZWwgMCBhbmQgMiUgZm9yIGxldmVsIDYuXG4vLyBJdCBkb2Vzbid0IHdvcnRoIHRvIG1ha2UgYWRkaXRpb25hbCBvcHRpbWl6YXRpb25hIGFzIGluIG9yaWdpbmFsLlxuLy8gU21hbGwgc2l6ZSBpcyBwcmVmZXJhYmxlLlxuXG5mdW5jdGlvbiBhZGxlcjMyKGFkbGVyLCBidWYsIGxlbiwgcG9zKSB7XG4gIHZhciBzMSA9IChhZGxlciAmIDB4ZmZmZikgfDAsXG4gICAgICBzMiA9ICgoYWRsZXIgPj4+IDE2KSAmIDB4ZmZmZikgfDAsXG4gICAgICBuID0gMDtcblxuICB3aGlsZSAobGVuICE9PSAwKSB7XG4gICAgLy8gU2V0IGxpbWl0IH4gdHdpY2UgbGVzcyB0aGFuIDU1NTIsIHRvIGtlZXBcbiAgICAvLyBzMiBpbiAzMS1iaXRzLCBiZWNhdXNlIHdlIGZvcmNlIHNpZ25lZCBpbnRzLlxuICAgIC8vIGluIG90aGVyIGNhc2UgJT0gd2lsbCBmYWlsLlxuICAgIG4gPSBsZW4gPiAyMDAwID8gMjAwMCA6IGxlbjtcbiAgICBsZW4gLT0gbjtcblxuICAgIGRvIHtcbiAgICAgIHMxID0gKHMxICsgYnVmW3BvcysrXSkgfDA7XG4gICAgICBzMiA9IChzMiArIHMxKSB8MDtcbiAgICB9IHdoaWxlICgtLW4pO1xuXG4gICAgczEgJT0gNjU1MjE7XG4gICAgczIgJT0gNjU1MjE7XG4gIH1cblxuICByZXR1cm4gKHMxIHwgKHMyIDw8IDE2KSkgfDA7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSBhZGxlcjMyO1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5cbm1vZHVsZS5leHBvcnRzID0ge1xuXG4gIC8qIEFsbG93ZWQgZmx1c2ggdmFsdWVzOyBzZWUgZGVmbGF0ZSgpIGFuZCBpbmZsYXRlKCkgYmVsb3cgZm9yIGRldGFpbHMgKi9cbiAgWl9OT19GTFVTSDogICAgICAgICAwLFxuICBaX1BBUlRJQUxfRkxVU0g6ICAgIDEsXG4gIFpfU1lOQ19GTFVTSDogICAgICAgMixcbiAgWl9GVUxMX0ZMVVNIOiAgICAgICAzLFxuICBaX0ZJTklTSDogICAgICAgICAgIDQsXG4gIFpfQkxPQ0s6ICAgICAgICAgICAgNSxcbiAgWl9UUkVFUzogICAgICAgICAgICA2LFxuXG4gIC8qIFJldHVybiBjb2RlcyBmb3IgdGhlIGNvbXByZXNzaW9uL2RlY29tcHJlc3Npb24gZnVuY3Rpb25zLiBOZWdhdGl2ZSB2YWx1ZXNcbiAgKiBhcmUgZXJyb3JzLCBwb3NpdGl2ZSB2YWx1ZXMgYXJlIHVzZWQgZm9yIHNwZWNpYWwgYnV0IG5vcm1hbCBldmVudHMuXG4gICovXG4gIFpfT0s6ICAgICAgICAgICAgICAgMCxcbiAgWl9TVFJFQU1fRU5EOiAgICAgICAxLFxuICBaX05FRURfRElDVDogICAgICAgIDIsXG4gIFpfRVJSTk86ICAgICAgICAgICAtMSxcbiAgWl9TVFJFQU1fRVJST1I6ICAgIC0yLFxuICBaX0RBVEFfRVJST1I6ICAgICAgLTMsXG4gIC8vWl9NRU1fRVJST1I6ICAgICAtNCxcbiAgWl9CVUZfRVJST1I6ICAgICAgIC01LFxuICAvL1pfVkVSU0lPTl9FUlJPUjogLTYsXG5cbiAgLyogY29tcHJlc3Npb24gbGV2ZWxzICovXG4gIFpfTk9fQ09NUFJFU1NJT046ICAgICAgICAgMCxcbiAgWl9CRVNUX1NQRUVEOiAgICAgICAgICAgICAxLFxuICBaX0JFU1RfQ09NUFJFU1NJT046ICAgICAgIDksXG4gIFpfREVGQVVMVF9DT01QUkVTU0lPTjogICAtMSxcblxuXG4gIFpfRklMVEVSRUQ6ICAgICAgICAgICAgICAgMSxcbiAgWl9IVUZGTUFOX09OTFk6ICAgICAgICAgICAyLFxuICBaX1JMRTogICAgICAgICAgICAgICAgICAgIDMsXG4gIFpfRklYRUQ6ICAgICAgICAgICAgICAgICAgNCxcbiAgWl9ERUZBVUxUX1NUUkFURUdZOiAgICAgICAwLFxuXG4gIC8qIFBvc3NpYmxlIHZhbHVlcyBvZiB0aGUgZGF0YV90eXBlIGZpZWxkICh0aG91Z2ggc2VlIGluZmxhdGUoKSkgKi9cbiAgWl9CSU5BUlk6ICAgICAgICAgICAgICAgICAwLFxuICBaX1RFWFQ6ICAgICAgICAgICAgICAgICAgIDEsXG4gIC8vWl9BU0NJSTogICAgICAgICAgICAgICAgMSwgLy8gPSBaX1RFWFQgKGRlcHJlY2F0ZWQpXG4gIFpfVU5LTk9XTjogICAgICAgICAgICAgICAgMixcblxuICAvKiBUaGUgZGVmbGF0ZSBjb21wcmVzc2lvbiBtZXRob2QgKi9cbiAgWl9ERUZMQVRFRDogICAgICAgICAgICAgICA4XG4gIC8vWl9OVUxMOiAgICAgICAgICAgICAgICAgbnVsbCAvLyBVc2UgLTEgb3IgbnVsbCBpbmxpbmUsIGRlcGVuZGluZyBvbiB2YXIgdHlwZVxufTtcbiIsIid1c2Ugc3RyaWN0JztcblxuLy8gTm90ZTogd2UgY2FuJ3QgZ2V0IHNpZ25pZmljYW50IHNwZWVkIGJvb3N0IGhlcmUuXG4vLyBTbyB3cml0ZSBjb2RlIHRvIG1pbmltaXplIHNpemUgLSBubyBwcmVnZW5lcmF0ZWQgdGFibGVzXG4vLyBhbmQgYXJyYXkgdG9vbHMgZGVwZW5kZW5jaWVzLlxuXG5cbi8vIFVzZSBvcmRpbmFyeSBhcnJheSwgc2luY2UgdW50eXBlZCBtYWtlcyBubyBib29zdCBoZXJlXG5mdW5jdGlvbiBtYWtlVGFibGUoKSB7XG4gIHZhciBjLCB0YWJsZSA9IFtdO1xuXG4gIGZvciAodmFyIG4gPSAwOyBuIDwgMjU2OyBuKyspIHtcbiAgICBjID0gbjtcbiAgICBmb3IgKHZhciBrID0gMDsgayA8IDg7IGsrKykge1xuICAgICAgYyA9ICgoYyAmIDEpID8gKDB4RURCODgzMjAgXiAoYyA+Pj4gMSkpIDogKGMgPj4+IDEpKTtcbiAgICB9XG4gICAgdGFibGVbbl0gPSBjO1xuICB9XG5cbiAgcmV0dXJuIHRhYmxlO1xufVxuXG4vLyBDcmVhdGUgdGFibGUgb24gbG9hZC4gSnVzdCAyNTUgc2lnbmVkIGxvbmdzLiBOb3QgYSBwcm9ibGVtLlxudmFyIGNyY1RhYmxlID0gbWFrZVRhYmxlKCk7XG5cblxuZnVuY3Rpb24gY3JjMzIoY3JjLCBidWYsIGxlbiwgcG9zKSB7XG4gIHZhciB0ID0gY3JjVGFibGUsXG4gICAgICBlbmQgPSBwb3MgKyBsZW47XG5cbiAgY3JjIF49IC0xO1xuXG4gIGZvciAodmFyIGkgPSBwb3M7IGkgPCBlbmQ7IGkrKykge1xuICAgIGNyYyA9IChjcmMgPj4+IDgpIF4gdFsoY3JjIF4gYnVmW2ldKSAmIDB4RkZdO1xuICB9XG5cbiAgcmV0dXJuIChjcmMgXiAoLTEpKTsgLy8gPj4+IDA7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSBjcmMzMjtcbiIsIid1c2Ugc3RyaWN0JztcblxuXG5mdW5jdGlvbiBHWmhlYWRlcigpIHtcbiAgLyogdHJ1ZSBpZiBjb21wcmVzc2VkIGRhdGEgYmVsaWV2ZWQgdG8gYmUgdGV4dCAqL1xuICB0aGlzLnRleHQgICAgICAgPSAwO1xuICAvKiBtb2RpZmljYXRpb24gdGltZSAqL1xuICB0aGlzLnRpbWUgICAgICAgPSAwO1xuICAvKiBleHRyYSBmbGFncyAobm90IHVzZWQgd2hlbiB3cml0aW5nIGEgZ3ppcCBmaWxlKSAqL1xuICB0aGlzLnhmbGFncyAgICAgPSAwO1xuICAvKiBvcGVyYXRpbmcgc3lzdGVtICovXG4gIHRoaXMub3MgICAgICAgICA9IDA7XG4gIC8qIHBvaW50ZXIgdG8gZXh0cmEgZmllbGQgb3IgWl9OVUxMIGlmIG5vbmUgKi9cbiAgdGhpcy5leHRyYSAgICAgID0gbnVsbDtcbiAgLyogZXh0cmEgZmllbGQgbGVuZ3RoICh2YWxpZCBpZiBleHRyYSAhPSBaX05VTEwpICovXG4gIHRoaXMuZXh0cmFfbGVuICA9IDA7IC8vIEFjdHVhbGx5LCB3ZSBkb24ndCBuZWVkIGl0IGluIEpTLFxuICAgICAgICAgICAgICAgICAgICAgICAvLyBidXQgbGVhdmUgZm9yIGZldyBjb2RlIG1vZGlmaWNhdGlvbnNcblxuICAvL1xuICAvLyBTZXR1cCBsaW1pdHMgaXMgbm90IG5lY2Vzc2FyeSBiZWNhdXNlIGluIGpzIHdlIHNob3VsZCBub3QgcHJlYWxsb2NhdGUgbWVtb3J5XG4gIC8vIGZvciBpbmZsYXRlIHVzZSBjb25zdGFudCBsaW1pdCBpbiA2NTUzNiBieXRlc1xuICAvL1xuXG4gIC8qIHNwYWNlIGF0IGV4dHJhIChvbmx5IHdoZW4gcmVhZGluZyBoZWFkZXIpICovXG4gIC8vIHRoaXMuZXh0cmFfbWF4ICA9IDA7XG4gIC8qIHBvaW50ZXIgdG8gemVyby10ZXJtaW5hdGVkIGZpbGUgbmFtZSBvciBaX05VTEwgKi9cbiAgdGhpcy5uYW1lICAgICAgID0gJyc7XG4gIC8qIHNwYWNlIGF0IG5hbWUgKG9ubHkgd2hlbiByZWFkaW5nIGhlYWRlcikgKi9cbiAgLy8gdGhpcy5uYW1lX21heCAgID0gMDtcbiAgLyogcG9pbnRlciB0byB6ZXJvLXRlcm1pbmF0ZWQgY29tbWVudCBvciBaX05VTEwgKi9cbiAgdGhpcy5jb21tZW50ICAgID0gJyc7XG4gIC8qIHNwYWNlIGF0IGNvbW1lbnQgKG9ubHkgd2hlbiByZWFkaW5nIGhlYWRlcikgKi9cbiAgLy8gdGhpcy5jb21tX21heCAgID0gMDtcbiAgLyogdHJ1ZSBpZiB0aGVyZSB3YXMgb3Igd2lsbCBiZSBhIGhlYWRlciBjcmMgKi9cbiAgdGhpcy5oY3JjICAgICAgID0gMDtcbiAgLyogdHJ1ZSB3aGVuIGRvbmUgcmVhZGluZyBnemlwIGhlYWRlciAobm90IHVzZWQgd2hlbiB3cml0aW5nIGEgZ3ppcCBmaWxlKSAqL1xuICB0aGlzLmRvbmUgICAgICAgPSBmYWxzZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBHWmhlYWRlcjtcbiIsIid1c2Ugc3RyaWN0JztcblxuLy8gU2VlIHN0YXRlIGRlZnMgZnJvbSBpbmZsYXRlLmpzXG52YXIgQkFEID0gMzA7ICAgICAgIC8qIGdvdCBhIGRhdGEgZXJyb3IgLS0gcmVtYWluIGhlcmUgdW50aWwgcmVzZXQgKi9cbnZhciBUWVBFID0gMTI7ICAgICAgLyogaTogd2FpdGluZyBmb3IgdHlwZSBiaXRzLCBpbmNsdWRpbmcgbGFzdC1mbGFnIGJpdCAqL1xuXG4vKlxuICAgRGVjb2RlIGxpdGVyYWwsIGxlbmd0aCwgYW5kIGRpc3RhbmNlIGNvZGVzIGFuZCB3cml0ZSBvdXQgdGhlIHJlc3VsdGluZ1xuICAgbGl0ZXJhbCBhbmQgbWF0Y2ggYnl0ZXMgdW50aWwgZWl0aGVyIG5vdCBlbm91Z2ggaW5wdXQgb3Igb3V0cHV0IGlzXG4gICBhdmFpbGFibGUsIGFuIGVuZC1vZi1ibG9jayBpcyBlbmNvdW50ZXJlZCwgb3IgYSBkYXRhIGVycm9yIGlzIGVuY291bnRlcmVkLlxuICAgV2hlbiBsYXJnZSBlbm91Z2ggaW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIGFyZSBzdXBwbGllZCB0byBpbmZsYXRlKCksIGZvclxuICAgZXhhbXBsZSwgYSAxNksgaW5wdXQgYnVmZmVyIGFuZCBhIDY0SyBvdXRwdXQgYnVmZmVyLCBtb3JlIHRoYW4gOTUlIG9mIHRoZVxuICAgaW5mbGF0ZSBleGVjdXRpb24gdGltZSBpcyBzcGVudCBpbiB0aGlzIHJvdXRpbmUuXG5cbiAgIEVudHJ5IGFzc3VtcHRpb25zOlxuXG4gICAgICAgIHN0YXRlLm1vZGUgPT09IExFTlxuICAgICAgICBzdHJtLmF2YWlsX2luID49IDZcbiAgICAgICAgc3RybS5hdmFpbF9vdXQgPj0gMjU4XG4gICAgICAgIHN0YXJ0ID49IHN0cm0uYXZhaWxfb3V0XG4gICAgICAgIHN0YXRlLmJpdHMgPCA4XG5cbiAgIE9uIHJldHVybiwgc3RhdGUubW9kZSBpcyBvbmUgb2Y6XG5cbiAgICAgICAgTEVOIC0tIHJhbiBvdXQgb2YgZW5vdWdoIG91dHB1dCBzcGFjZSBvciBlbm91Z2ggYXZhaWxhYmxlIGlucHV0XG4gICAgICAgIFRZUEUgLS0gcmVhY2hlZCBlbmQgb2YgYmxvY2sgY29kZSwgaW5mbGF0ZSgpIHRvIGludGVycHJldCBuZXh0IGJsb2NrXG4gICAgICAgIEJBRCAtLSBlcnJvciBpbiBibG9jayBkYXRhXG5cbiAgIE5vdGVzOlxuXG4gICAgLSBUaGUgbWF4aW11bSBpbnB1dCBiaXRzIHVzZWQgYnkgYSBsZW5ndGgvZGlzdGFuY2UgcGFpciBpcyAxNSBiaXRzIGZvciB0aGVcbiAgICAgIGxlbmd0aCBjb2RlLCA1IGJpdHMgZm9yIHRoZSBsZW5ndGggZXh0cmEsIDE1IGJpdHMgZm9yIHRoZSBkaXN0YW5jZSBjb2RlLFxuICAgICAgYW5kIDEzIGJpdHMgZm9yIHRoZSBkaXN0YW5jZSBleHRyYS4gIFRoaXMgdG90YWxzIDQ4IGJpdHMsIG9yIHNpeCBieXRlcy5cbiAgICAgIFRoZXJlZm9yZSBpZiBzdHJtLmF2YWlsX2luID49IDYsIHRoZW4gdGhlcmUgaXMgZW5vdWdoIGlucHV0IHRvIGF2b2lkXG4gICAgICBjaGVja2luZyBmb3IgYXZhaWxhYmxlIGlucHV0IHdoaWxlIGRlY29kaW5nLlxuXG4gICAgLSBUaGUgbWF4aW11bSBieXRlcyB0aGF0IGEgc2luZ2xlIGxlbmd0aC9kaXN0YW5jZSBwYWlyIGNhbiBvdXRwdXQgaXMgMjU4XG4gICAgICBieXRlcywgd2hpY2ggaXMgdGhlIG1heGltdW0gbGVuZ3RoIHRoYXQgY2FuIGJlIGNvZGVkLiAgaW5mbGF0ZV9mYXN0KClcbiAgICAgIHJlcXVpcmVzIHN0cm0uYXZhaWxfb3V0ID49IDI1OCBmb3IgZWFjaCBsb29wIHRvIGF2b2lkIGNoZWNraW5nIGZvclxuICAgICAgb3V0cHV0IHNwYWNlLlxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluZmxhdGVfZmFzdChzdHJtLCBzdGFydCkge1xuICB2YXIgc3RhdGU7XG4gIHZhciBfaW47ICAgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLmlucHV0ICovXG4gIHZhciBsYXN0OyAgICAgICAgICAgICAgICAgICAvKiBoYXZlIGVub3VnaCBpbnB1dCB3aGlsZSBpbiA8IGxhc3QgKi9cbiAgdmFyIF9vdXQ7ICAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0ub3V0cHV0ICovXG4gIHZhciBiZWc7ICAgICAgICAgICAgICAgICAgICAvKiBpbmZsYXRlKCkncyBpbml0aWFsIHN0cm0ub3V0cHV0ICovXG4gIHZhciBlbmQ7ICAgICAgICAgICAgICAgICAgICAvKiB3aGlsZSBvdXQgPCBlbmQsIGVub3VnaCBzcGFjZSBhdmFpbGFibGUgKi9cbi8vI2lmZGVmIElORkxBVEVfU1RSSUNUXG4gIHZhciBkbWF4OyAgICAgICAgICAgICAgICAgICAvKiBtYXhpbXVtIGRpc3RhbmNlIGZyb20gemxpYiBoZWFkZXIgKi9cbi8vI2VuZGlmXG4gIHZhciB3c2l6ZTsgICAgICAgICAgICAgICAgICAvKiB3aW5kb3cgc2l6ZSBvciB6ZXJvIGlmIG5vdCB1c2luZyB3aW5kb3cgKi9cbiAgdmFyIHdoYXZlOyAgICAgICAgICAgICAgICAgIC8qIHZhbGlkIGJ5dGVzIGluIHRoZSB3aW5kb3cgKi9cbiAgdmFyIHduZXh0OyAgICAgICAgICAgICAgICAgIC8qIHdpbmRvdyB3cml0ZSBpbmRleCAqL1xuICAvLyBVc2UgYHNfd2luZG93YCBpbnN0ZWFkIGB3aW5kb3dgLCBhdm9pZCBjb25mbGljdCB3aXRoIGluc3RydW1lbnRhdGlvbiB0b29sc1xuICB2YXIgc193aW5kb3c7ICAgICAgICAgICAgICAgLyogYWxsb2NhdGVkIHNsaWRpbmcgd2luZG93LCBpZiB3c2l6ZSAhPSAwICovXG4gIHZhciBob2xkOyAgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLmhvbGQgKi9cbiAgdmFyIGJpdHM7ICAgICAgICAgICAgICAgICAgIC8qIGxvY2FsIHN0cm0uYml0cyAqL1xuICB2YXIgbGNvZGU7ICAgICAgICAgICAgICAgICAgLyogbG9jYWwgc3RybS5sZW5jb2RlICovXG4gIHZhciBkY29kZTsgICAgICAgICAgICAgICAgICAvKiBsb2NhbCBzdHJtLmRpc3Rjb2RlICovXG4gIHZhciBsbWFzazsgICAgICAgICAgICAgICAgICAvKiBtYXNrIGZvciBmaXJzdCBsZXZlbCBvZiBsZW5ndGggY29kZXMgKi9cbiAgdmFyIGRtYXNrOyAgICAgICAgICAgICAgICAgIC8qIG1hc2sgZm9yIGZpcnN0IGxldmVsIG9mIGRpc3RhbmNlIGNvZGVzICovXG4gIHZhciBoZXJlOyAgICAgICAgICAgICAgICAgICAvKiByZXRyaWV2ZWQgdGFibGUgZW50cnkgKi9cbiAgdmFyIG9wOyAgICAgICAgICAgICAgICAgICAgIC8qIGNvZGUgYml0cywgb3BlcmF0aW9uLCBleHRyYSBiaXRzLCBvciAqL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogIHdpbmRvdyBwb3NpdGlvbiwgd2luZG93IGJ5dGVzIHRvIGNvcHkgKi9cbiAgdmFyIGxlbjsgICAgICAgICAgICAgICAgICAgIC8qIG1hdGNoIGxlbmd0aCwgdW51c2VkIGJ5dGVzICovXG4gIHZhciBkaXN0OyAgICAgICAgICAgICAgICAgICAvKiBtYXRjaCBkaXN0YW5jZSAqL1xuICB2YXIgZnJvbTsgICAgICAgICAgICAgICAgICAgLyogd2hlcmUgdG8gY29weSBtYXRjaCBmcm9tICovXG4gIHZhciBmcm9tX3NvdXJjZTtcblxuXG4gIHZhciBpbnB1dCwgb3V0cHV0OyAvLyBKUyBzcGVjaWZpYywgYmVjYXVzZSB3ZSBoYXZlIG5vIHBvaW50ZXJzXG5cbiAgLyogY29weSBzdGF0ZSB0byBsb2NhbCB2YXJpYWJsZXMgKi9cbiAgc3RhdGUgPSBzdHJtLnN0YXRlO1xuICAvL2hlcmUgPSBzdGF0ZS5oZXJlO1xuICBfaW4gPSBzdHJtLm5leHRfaW47XG4gIGlucHV0ID0gc3RybS5pbnB1dDtcbiAgbGFzdCA9IF9pbiArIChzdHJtLmF2YWlsX2luIC0gNSk7XG4gIF9vdXQgPSBzdHJtLm5leHRfb3V0O1xuICBvdXRwdXQgPSBzdHJtLm91dHB1dDtcbiAgYmVnID0gX291dCAtIChzdGFydCAtIHN0cm0uYXZhaWxfb3V0KTtcbiAgZW5kID0gX291dCArIChzdHJtLmF2YWlsX291dCAtIDI1Nyk7XG4vLyNpZmRlZiBJTkZMQVRFX1NUUklDVFxuICBkbWF4ID0gc3RhdGUuZG1heDtcbi8vI2VuZGlmXG4gIHdzaXplID0gc3RhdGUud3NpemU7XG4gIHdoYXZlID0gc3RhdGUud2hhdmU7XG4gIHduZXh0ID0gc3RhdGUud25leHQ7XG4gIHNfd2luZG93ID0gc3RhdGUud2luZG93O1xuICBob2xkID0gc3RhdGUuaG9sZDtcbiAgYml0cyA9IHN0YXRlLmJpdHM7XG4gIGxjb2RlID0gc3RhdGUubGVuY29kZTtcbiAgZGNvZGUgPSBzdGF0ZS5kaXN0Y29kZTtcbiAgbG1hc2sgPSAoMSA8PCBzdGF0ZS5sZW5iaXRzKSAtIDE7XG4gIGRtYXNrID0gKDEgPDwgc3RhdGUuZGlzdGJpdHMpIC0gMTtcblxuXG4gIC8qIGRlY29kZSBsaXRlcmFscyBhbmQgbGVuZ3RoL2Rpc3RhbmNlcyB1bnRpbCBlbmQtb2YtYmxvY2sgb3Igbm90IGVub3VnaFxuICAgICBpbnB1dCBkYXRhIG9yIG91dHB1dCBzcGFjZSAqL1xuXG4gIHRvcDpcbiAgZG8ge1xuICAgIGlmIChiaXRzIDwgMTUpIHtcbiAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICBiaXRzICs9IDg7XG4gICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgYml0cyArPSA4O1xuICAgIH1cblxuICAgIGhlcmUgPSBsY29kZVtob2xkICYgbG1hc2tdO1xuXG4gICAgZG9sZW46XG4gICAgZm9yICg7OykgeyAvLyBHb3RvIGVtdWxhdGlvblxuICAgICAgb3AgPSBoZXJlID4+PiAyNC8qaGVyZS5iaXRzKi87XG4gICAgICBob2xkID4+Pj0gb3A7XG4gICAgICBiaXRzIC09IG9wO1xuICAgICAgb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZi8qaGVyZS5vcCovO1xuICAgICAgaWYgKG9wID09PSAwKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBsaXRlcmFsICovXG4gICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBoZXJlLnZhbCA+PSAweDIwICYmIGhlcmUudmFsIDwgMHg3ZiA/XG4gICAgICAgIC8vICAgICAgICBcImluZmxhdGU6ICAgICAgICAgbGl0ZXJhbCAnJWMnXFxuXCIgOlxuICAgICAgICAvLyAgICAgICAgXCJpbmZsYXRlOiAgICAgICAgIGxpdGVyYWwgMHglMDJ4XFxuXCIsIGhlcmUudmFsKSk7XG4gICAgICAgIG91dHB1dFtfb3V0KytdID0gaGVyZSAmIDB4ZmZmZi8qaGVyZS52YWwqLztcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKG9wICYgMTYpIHsgICAgICAgICAgICAgICAgICAgICAvKiBsZW5ndGggYmFzZSAqL1xuICAgICAgICBsZW4gPSBoZXJlICYgMHhmZmZmLypoZXJlLnZhbCovO1xuICAgICAgICBvcCAmPSAxNTsgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgZXh0cmEgYml0cyAqL1xuICAgICAgICBpZiAob3ApIHtcbiAgICAgICAgICBpZiAoYml0cyA8IG9wKSB7XG4gICAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgIH1cbiAgICAgICAgICBsZW4gKz0gaG9sZCAmICgoMSA8PCBvcCkgLSAxKTtcbiAgICAgICAgICBob2xkID4+Pj0gb3A7XG4gICAgICAgICAgYml0cyAtPSBvcDtcbiAgICAgICAgfVxuICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICAgIGxlbmd0aCAldVxcblwiLCBsZW4pKTtcbiAgICAgICAgaWYgKGJpdHMgPCAxNSkge1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbX2luKytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIGhlcmUgPSBkY29kZVtob2xkICYgZG1hc2tdO1xuXG4gICAgICAgIGRvZGlzdDpcbiAgICAgICAgZm9yICg7OykgeyAvLyBnb3RvIGVtdWxhdGlvblxuICAgICAgICAgIG9wID0gaGVyZSA+Pj4gMjQvKmhlcmUuYml0cyovO1xuICAgICAgICAgIGhvbGQgPj4+PSBvcDtcbiAgICAgICAgICBiaXRzIC09IG9wO1xuICAgICAgICAgIG9wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmYvKmhlcmUub3AqLztcblxuICAgICAgICAgIGlmIChvcCAmIDE2KSB7ICAgICAgICAgICAgICAgICAgICAgIC8qIGRpc3RhbmNlIGJhc2UgKi9cbiAgICAgICAgICAgIGRpc3QgPSBoZXJlICYgMHhmZmZmLypoZXJlLnZhbCovO1xuICAgICAgICAgICAgb3AgJj0gMTU7ICAgICAgICAgICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgZXh0cmEgYml0cyAqL1xuICAgICAgICAgICAgaWYgKGJpdHMgPCBvcCkge1xuICAgICAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgICAgIGlmIChiaXRzIDwgb3ApIHtcbiAgICAgICAgICAgICAgICBob2xkICs9IGlucHV0W19pbisrXSA8PCBiaXRzO1xuICAgICAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGlzdCArPSBob2xkICYgKCgxIDw8IG9wKSAtIDEpO1xuLy8jaWZkZWYgSU5GTEFURV9TVFJJQ1RcbiAgICAgICAgICAgIGlmIChkaXN0ID4gZG1heCkge1xuICAgICAgICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGRpc3RhbmNlIHRvbyBmYXIgYmFjayc7XG4gICAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgICAgIGJyZWFrIHRvcDtcbiAgICAgICAgICAgIH1cbi8vI2VuZGlmXG4gICAgICAgICAgICBob2xkID4+Pj0gb3A7XG4gICAgICAgICAgICBiaXRzIC09IG9wO1xuICAgICAgICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgICBkaXN0YW5jZSAldVxcblwiLCBkaXN0KSk7XG4gICAgICAgICAgICBvcCA9IF9vdXQgLSBiZWc7ICAgICAgICAgICAgICAgIC8qIG1heCBkaXN0YW5jZSBpbiBvdXRwdXQgKi9cbiAgICAgICAgICAgIGlmIChkaXN0ID4gb3ApIHsgICAgICAgICAgICAgICAgLyogc2VlIGlmIGNvcHkgZnJvbSB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgb3AgPSBkaXN0IC0gb3A7ICAgICAgICAgICAgICAgLyogZGlzdGFuY2UgYmFjayBpbiB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgaWYgKG9wID4gd2hhdmUpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuc2FuZSkge1xuICAgICAgICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2snO1xuICAgICAgICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICAgICAgICAgIGJyZWFrIHRvcDtcbiAgICAgICAgICAgICAgICB9XG5cbi8vICghKSBUaGlzIGJsb2NrIGlzIGRpc2FibGVkIGluIHpsaWIgZGVmYWlsdHMsXG4vLyBkb24ndCBlbmFibGUgaXQgZm9yIGJpbmFyeSBjb21wYXRpYmlsaXR5XG4vLyNpZmRlZiBJTkZMQVRFX0FMTE9XX0lOVkFMSURfRElTVEFOQ0VfVE9PRkFSX0FSUlJcbi8vICAgICAgICAgICAgICAgIGlmIChsZW4gPD0gb3AgLSB3aGF2ZSkge1xuLy8gICAgICAgICAgICAgICAgICBkbyB7XG4vLyAgICAgICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSAwO1xuLy8gICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLWxlbik7XG4vLyAgICAgICAgICAgICAgICAgIGNvbnRpbnVlIHRvcDtcbi8vICAgICAgICAgICAgICAgIH1cbi8vICAgICAgICAgICAgICAgIGxlbiAtPSBvcCAtIHdoYXZlO1xuLy8gICAgICAgICAgICAgICAgZG8ge1xuLy8gICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IDA7XG4vLyAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wID4gd2hhdmUpO1xuLy8gICAgICAgICAgICAgICAgaWYgKG9wID09PSAwKSB7XG4vLyAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDtcbi8vICAgICAgICAgICAgICAgICAgZG8ge1xuLy8gICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4vLyAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tbGVuKTtcbi8vICAgICAgICAgICAgICAgICAgY29udGludWUgdG9wO1xuLy8gICAgICAgICAgICAgICAgfVxuLy8jZW5kaWZcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBmcm9tID0gMDsgLy8gd2luZG93IGluZGV4XG4gICAgICAgICAgICAgIGZyb21fc291cmNlID0gc193aW5kb3c7XG4gICAgICAgICAgICAgIGlmICh3bmV4dCA9PT0gMCkgeyAgICAgICAgICAgLyogdmVyeSBjb21tb24gY2FzZSAqL1xuICAgICAgICAgICAgICAgIGZyb20gKz0gd3NpemUgLSBvcDtcbiAgICAgICAgICAgICAgICBpZiAob3AgPCBsZW4pIHsgICAgICAgICAvKiBzb21lIGZyb20gd2luZG93ICovXG4gICAgICAgICAgICAgICAgICBsZW4gLT0gb3A7XG4gICAgICAgICAgICAgICAgICBkbyB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gc193aW5kb3dbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICAgIH0gd2hpbGUgKC0tb3ApO1xuICAgICAgICAgICAgICAgICAgZnJvbSA9IF9vdXQgLSBkaXN0OyAgLyogcmVzdCBmcm9tIG91dHB1dCAqL1xuICAgICAgICAgICAgICAgICAgZnJvbV9zb3VyY2UgPSBvdXRwdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2UgaWYgKHduZXh0IDwgb3ApIHsgICAgICAvKiB3cmFwIGFyb3VuZCB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgICBmcm9tICs9IHdzaXplICsgd25leHQgLSBvcDtcbiAgICAgICAgICAgICAgICBvcCAtPSB3bmV4dDtcbiAgICAgICAgICAgICAgICBpZiAob3AgPCBsZW4pIHsgICAgICAgICAvKiBzb21lIGZyb20gZW5kIG9mIHdpbmRvdyAqL1xuICAgICAgICAgICAgICAgICAgbGVuIC09IG9wO1xuICAgICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20rK107XG4gICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wKTtcbiAgICAgICAgICAgICAgICAgIGZyb20gPSAwO1xuICAgICAgICAgICAgICAgICAgaWYgKHduZXh0IDwgbGVuKSB7ICAvKiBzb21lIGZyb20gc3RhcnQgb2Ygd2luZG93ICovXG4gICAgICAgICAgICAgICAgICAgIG9wID0gd25leHQ7XG4gICAgICAgICAgICAgICAgICAgIGxlbiAtPSBvcDtcbiAgICAgICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gc193aW5kb3dbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICAgICAgfSB3aGlsZSAoLS1vcCk7XG4gICAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDsgICAgICAvKiByZXN0IGZyb20gb3V0cHV0ICovXG4gICAgICAgICAgICAgICAgICAgIGZyb21fc291cmNlID0gb3V0cHV0O1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHsgICAgICAgICAgICAgICAgICAgICAgLyogY29udGlndW91cyBpbiB3aW5kb3cgKi9cbiAgICAgICAgICAgICAgICBmcm9tICs9IHduZXh0IC0gb3A7XG4gICAgICAgICAgICAgICAgaWYgKG9wIDwgbGVuKSB7ICAgICAgICAgLyogc29tZSBmcm9tIHdpbmRvdyAqL1xuICAgICAgICAgICAgICAgICAgbGVuIC09IG9wO1xuICAgICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IHNfd2luZG93W2Zyb20rK107XG4gICAgICAgICAgICAgICAgICB9IHdoaWxlICgtLW9wKTtcbiAgICAgICAgICAgICAgICAgIGZyb20gPSBfb3V0IC0gZGlzdDsgIC8qIHJlc3QgZnJvbSBvdXRwdXQgKi9cbiAgICAgICAgICAgICAgICAgIGZyb21fc291cmNlID0gb3V0cHV0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB3aGlsZSAobGVuID4gMikge1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107XG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdO1xuICAgICAgICAgICAgICAgIGxlbiAtPSAzO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmIChsZW4pIHtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IGZyb21fc291cmNlW2Zyb20rK107XG4gICAgICAgICAgICAgICAgaWYgKGxlbiA+IDEpIHtcbiAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gZnJvbV9zb3VyY2VbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBmcm9tID0gX291dCAtIGRpc3Q7ICAgICAgICAgIC8qIGNvcHkgZGlyZWN0IGZyb20gb3V0cHV0ICovXG4gICAgICAgICAgICAgIGRvIHsgICAgICAgICAgICAgICAgICAgICAgICAvKiBtaW5pbXVtIGxlbmd0aCBpcyB0aHJlZSAqL1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4gICAgICAgICAgICAgICAgb3V0cHV0W19vdXQrK10gPSBvdXRwdXRbZnJvbSsrXTtcbiAgICAgICAgICAgICAgICBvdXRwdXRbX291dCsrXSA9IG91dHB1dFtmcm9tKytdO1xuICAgICAgICAgICAgICAgIGxlbiAtPSAzO1xuICAgICAgICAgICAgICB9IHdoaWxlIChsZW4gPiAyKTtcbiAgICAgICAgICAgICAgaWYgKGxlbikge1xuICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4gICAgICAgICAgICAgICAgaWYgKGxlbiA+IDEpIHtcbiAgICAgICAgICAgICAgICAgIG91dHB1dFtfb3V0KytdID0gb3V0cHV0W2Zyb20rK107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2UgaWYgKChvcCAmIDY0KSA9PT0gMCkgeyAgICAgICAgICAvKiAybmQgbGV2ZWwgZGlzdGFuY2UgY29kZSAqL1xuICAgICAgICAgICAgaGVyZSA9IGRjb2RlWyhoZXJlICYgMHhmZmZmKS8qaGVyZS52YWwqLyArIChob2xkICYgKCgxIDw8IG9wKSAtIDEpKV07XG4gICAgICAgICAgICBjb250aW51ZSBkb2Rpc3Q7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZSBjb2RlJztcbiAgICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgICBicmVhayB0b3A7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgYnJlYWs7IC8vIG5lZWQgdG8gZW11bGF0ZSBnb3RvIHZpYSBcImNvbnRpbnVlXCJcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoKG9wICYgNjQpID09PSAwKSB7ICAgICAgICAgICAgICAvKiAybmQgbGV2ZWwgbGVuZ3RoIGNvZGUgKi9cbiAgICAgICAgaGVyZSA9IGxjb2RlWyhoZXJlICYgMHhmZmZmKS8qaGVyZS52YWwqLyArIChob2xkICYgKCgxIDw8IG9wKSAtIDEpKV07XG4gICAgICAgIGNvbnRpbnVlIGRvbGVuO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAob3AgJiAzMikgeyAgICAgICAgICAgICAgICAgICAgIC8qIGVuZC1vZi1ibG9jayAqL1xuICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICAgIGVuZCBvZiBibG9ja1xcblwiKSk7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFO1xuICAgICAgICBicmVhayB0b3A7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBsaXRlcmFsL2xlbmd0aCBjb2RlJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWsgdG9wO1xuICAgICAgfVxuXG4gICAgICBicmVhazsgLy8gbmVlZCB0byBlbXVsYXRlIGdvdG8gdmlhIFwiY29udGludWVcIlxuICAgIH1cbiAgfSB3aGlsZSAoX2luIDwgbGFzdCAmJiBfb3V0IDwgZW5kKTtcblxuICAvKiByZXR1cm4gdW51c2VkIGJ5dGVzIChvbiBlbnRyeSwgYml0cyA8IDgsIHNvIGluIHdvbid0IGdvIHRvbyBmYXIgYmFjaykgKi9cbiAgbGVuID0gYml0cyA+PiAzO1xuICBfaW4gLT0gbGVuO1xuICBiaXRzIC09IGxlbiA8PCAzO1xuICBob2xkICY9ICgxIDw8IGJpdHMpIC0gMTtcblxuICAvKiB1cGRhdGUgc3RhdGUgYW5kIHJldHVybiAqL1xuICBzdHJtLm5leHRfaW4gPSBfaW47XG4gIHN0cm0ubmV4dF9vdXQgPSBfb3V0O1xuICBzdHJtLmF2YWlsX2luID0gKF9pbiA8IGxhc3QgPyA1ICsgKGxhc3QgLSBfaW4pIDogNSAtIChfaW4gLSBsYXN0KSk7XG4gIHN0cm0uYXZhaWxfb3V0ID0gKF9vdXQgPCBlbmQgPyAyNTcgKyAoZW5kIC0gX291dCkgOiAyNTcgLSAoX291dCAtIGVuZCkpO1xuICBzdGF0ZS5ob2xkID0gaG9sZDtcbiAgc3RhdGUuYml0cyA9IGJpdHM7XG4gIHJldHVybjtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cblxudmFyIHV0aWxzICAgICAgICAgPSByZXF1aXJlKCcuLi91dGlscy9jb21tb24nKTtcbnZhciBhZGxlcjMyICAgICAgID0gcmVxdWlyZSgnLi9hZGxlcjMyJyk7XG52YXIgY3JjMzIgICAgICAgICA9IHJlcXVpcmUoJy4vY3JjMzInKTtcbnZhciBpbmZsYXRlX2Zhc3QgID0gcmVxdWlyZSgnLi9pbmZmYXN0Jyk7XG52YXIgaW5mbGF0ZV90YWJsZSA9IHJlcXVpcmUoJy4vaW5mdHJlZXMnKTtcblxudmFyIENPREVTID0gMDtcbnZhciBMRU5TID0gMTtcbnZhciBESVNUUyA9IDI7XG5cbi8qIFB1YmxpYyBjb25zdGFudHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG4vKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0qL1xuXG5cbi8qIEFsbG93ZWQgZmx1c2ggdmFsdWVzOyBzZWUgZGVmbGF0ZSgpIGFuZCBpbmZsYXRlKCkgYmVsb3cgZm9yIGRldGFpbHMgKi9cbi8vdmFyIFpfTk9fRkxVU0ggICAgICA9IDA7XG4vL3ZhciBaX1BBUlRJQUxfRkxVU0ggPSAxO1xuLy92YXIgWl9TWU5DX0ZMVVNIICAgID0gMjtcbi8vdmFyIFpfRlVMTF9GTFVTSCAgICA9IDM7XG52YXIgWl9GSU5JU0ggICAgICAgID0gNDtcbnZhciBaX0JMT0NLICAgICAgICAgPSA1O1xudmFyIFpfVFJFRVMgICAgICAgICA9IDY7XG5cblxuLyogUmV0dXJuIGNvZGVzIGZvciB0aGUgY29tcHJlc3Npb24vZGVjb21wcmVzc2lvbiBmdW5jdGlvbnMuIE5lZ2F0aXZlIHZhbHVlc1xuICogYXJlIGVycm9ycywgcG9zaXRpdmUgdmFsdWVzIGFyZSB1c2VkIGZvciBzcGVjaWFsIGJ1dCBub3JtYWwgZXZlbnRzLlxuICovXG52YXIgWl9PSyAgICAgICAgICAgID0gMDtcbnZhciBaX1NUUkVBTV9FTkQgICAgPSAxO1xudmFyIFpfTkVFRF9ESUNUICAgICA9IDI7XG4vL3ZhciBaX0VSUk5PICAgICAgICAgPSAtMTtcbnZhciBaX1NUUkVBTV9FUlJPUiAgPSAtMjtcbnZhciBaX0RBVEFfRVJST1IgICAgPSAtMztcbnZhciBaX01FTV9FUlJPUiAgICAgPSAtNDtcbnZhciBaX0JVRl9FUlJPUiAgICAgPSAtNTtcbi8vdmFyIFpfVkVSU0lPTl9FUlJPUiA9IC02O1xuXG4vKiBUaGUgZGVmbGF0ZSBjb21wcmVzc2lvbiBtZXRob2QgKi9cbnZhciBaX0RFRkxBVEVEICA9IDg7XG5cblxuLyogU1RBVEVTID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cblxudmFyICAgIEhFQUQgPSAxOyAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBtYWdpYyBoZWFkZXIgKi9cbnZhciAgICBGTEFHUyA9IDI7ICAgICAgLyogaTogd2FpdGluZyBmb3IgbWV0aG9kIGFuZCBmbGFncyAoZ3ppcCkgKi9cbnZhciAgICBUSU1FID0gMzsgICAgICAgLyogaTogd2FpdGluZyBmb3IgbW9kaWZpY2F0aW9uIHRpbWUgKGd6aXApICovXG52YXIgICAgT1MgPSA0OyAgICAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGV4dHJhIGZsYWdzIGFuZCBvcGVyYXRpbmcgc3lzdGVtIChnemlwKSAqL1xudmFyICAgIEVYTEVOID0gNTsgICAgICAvKiBpOiB3YWl0aW5nIGZvciBleHRyYSBsZW5ndGggKGd6aXApICovXG52YXIgICAgRVhUUkEgPSA2OyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGV4dHJhIGJ5dGVzIChnemlwKSAqL1xudmFyICAgIE5BTUUgPSA3OyAgICAgICAvKiBpOiB3YWl0aW5nIGZvciBlbmQgb2YgZmlsZSBuYW1lIChnemlwKSAqL1xudmFyICAgIENPTU1FTlQgPSA4OyAgICAvKiBpOiB3YWl0aW5nIGZvciBlbmQgb2YgY29tbWVudCAoZ3ppcCkgKi9cbnZhciAgICBIQ1JDID0gOTsgICAgICAgLyogaTogd2FpdGluZyBmb3IgaGVhZGVyIGNyYyAoZ3ppcCkgKi9cbnZhciAgICBESUNUSUQgPSAxMDsgICAgLyogaTogd2FpdGluZyBmb3IgZGljdGlvbmFyeSBjaGVjayB2YWx1ZSAqL1xudmFyICAgIERJQ1QgPSAxMTsgICAgICAvKiB3YWl0aW5nIGZvciBpbmZsYXRlU2V0RGljdGlvbmFyeSgpIGNhbGwgKi9cbnZhciAgICAgICAgVFlQRSA9IDEyOyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIHR5cGUgYml0cywgaW5jbHVkaW5nIGxhc3QtZmxhZyBiaXQgKi9cbnZhciAgICAgICAgVFlQRURPID0gMTM7ICAgIC8qIGk6IHNhbWUsIGJ1dCBza2lwIGNoZWNrIHRvIGV4aXQgaW5mbGF0ZSBvbiBuZXcgYmxvY2sgKi9cbnZhciAgICAgICAgU1RPUkVEID0gMTQ7ICAgIC8qIGk6IHdhaXRpbmcgZm9yIHN0b3JlZCBzaXplIChsZW5ndGggYW5kIGNvbXBsZW1lbnQpICovXG52YXIgICAgICAgIENPUFlfID0gMTU7ICAgICAvKiBpL286IHNhbWUgYXMgQ09QWSBiZWxvdywgYnV0IG9ubHkgZmlyc3QgdGltZSBpbiAqL1xudmFyICAgICAgICBDT1BZID0gMTY7ICAgICAgLyogaS9vOiB3YWl0aW5nIGZvciBpbnB1dCBvciBvdXRwdXQgdG8gY29weSBzdG9yZWQgYmxvY2sgKi9cbnZhciAgICAgICAgVEFCTEUgPSAxNzsgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGR5bmFtaWMgYmxvY2sgdGFibGUgbGVuZ3RocyAqL1xudmFyICAgICAgICBMRU5MRU5TID0gMTg7ICAgLyogaTogd2FpdGluZyBmb3IgY29kZSBsZW5ndGggY29kZSBsZW5ndGhzICovXG52YXIgICAgICAgIENPREVMRU5TID0gMTk7ICAvKiBpOiB3YWl0aW5nIGZvciBsZW5ndGgvbGl0IGFuZCBkaXN0YW5jZSBjb2RlIGxlbmd0aHMgKi9cbnZhciAgICAgICAgICAgIExFTl8gPSAyMDsgICAgICAvKiBpOiBzYW1lIGFzIExFTiBiZWxvdywgYnV0IG9ubHkgZmlyc3QgdGltZSBpbiAqL1xudmFyICAgICAgICAgICAgTEVOID0gMjE7ICAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGxlbmd0aC9saXQvZW9iIGNvZGUgKi9cbnZhciAgICAgICAgICAgIExFTkVYVCA9IDIyOyAgICAvKiBpOiB3YWl0aW5nIGZvciBsZW5ndGggZXh0cmEgYml0cyAqL1xudmFyICAgICAgICAgICAgRElTVCA9IDIzOyAgICAgIC8qIGk6IHdhaXRpbmcgZm9yIGRpc3RhbmNlIGNvZGUgKi9cbnZhciAgICAgICAgICAgIERJU1RFWFQgPSAyNDsgICAvKiBpOiB3YWl0aW5nIGZvciBkaXN0YW5jZSBleHRyYSBiaXRzICovXG52YXIgICAgICAgICAgICBNQVRDSCA9IDI1OyAgICAgLyogbzogd2FpdGluZyBmb3Igb3V0cHV0IHNwYWNlIHRvIGNvcHkgc3RyaW5nICovXG52YXIgICAgICAgICAgICBMSVQgPSAyNjsgICAgICAgLyogbzogd2FpdGluZyBmb3Igb3V0cHV0IHNwYWNlIHRvIHdyaXRlIGxpdGVyYWwgKi9cbnZhciAgICBDSEVDSyA9IDI3OyAgICAgLyogaTogd2FpdGluZyBmb3IgMzItYml0IGNoZWNrIHZhbHVlICovXG52YXIgICAgTEVOR1RIID0gMjg7ICAgIC8qIGk6IHdhaXRpbmcgZm9yIDMyLWJpdCBsZW5ndGggKGd6aXApICovXG52YXIgICAgRE9ORSA9IDI5OyAgICAgIC8qIGZpbmlzaGVkIGNoZWNrLCBkb25lIC0tIHJlbWFpbiBoZXJlIHVudGlsIHJlc2V0ICovXG52YXIgICAgQkFEID0gMzA7ICAgICAgIC8qIGdvdCBhIGRhdGEgZXJyb3IgLS0gcmVtYWluIGhlcmUgdW50aWwgcmVzZXQgKi9cbnZhciAgICBNRU0gPSAzMTsgICAgICAgLyogZ290IGFuIGluZmxhdGUoKSBtZW1vcnkgZXJyb3IgLS0gcmVtYWluIGhlcmUgdW50aWwgcmVzZXQgKi9cbnZhciAgICBTWU5DID0gMzI7ICAgICAgLyogbG9va2luZyBmb3Igc3luY2hyb25pemF0aW9uIGJ5dGVzIHRvIHJlc3RhcnQgaW5mbGF0ZSgpICovXG5cbi8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG5cblxuXG52YXIgRU5PVUdIX0xFTlMgPSA4NTI7XG52YXIgRU5PVUdIX0RJU1RTID0gNTkyO1xuLy92YXIgRU5PVUdIID0gIChFTk9VR0hfTEVOUytFTk9VR0hfRElTVFMpO1xuXG52YXIgTUFYX1dCSVRTID0gMTU7XG4vKiAzMksgTFo3NyB3aW5kb3cgKi9cbnZhciBERUZfV0JJVFMgPSBNQVhfV0JJVFM7XG5cblxuZnVuY3Rpb24genN3YXAzMihxKSB7XG4gIHJldHVybiAgKCgocSA+Pj4gMjQpICYgMHhmZikgK1xuICAgICAgICAgICgocSA+Pj4gOCkgJiAweGZmMDApICtcbiAgICAgICAgICAoKHEgJiAweGZmMDApIDw8IDgpICtcbiAgICAgICAgICAoKHEgJiAweGZmKSA8PCAyNCkpO1xufVxuXG5cbmZ1bmN0aW9uIEluZmxhdGVTdGF0ZSgpIHtcbiAgdGhpcy5tb2RlID0gMDsgICAgICAgICAgICAgLyogY3VycmVudCBpbmZsYXRlIG1vZGUgKi9cbiAgdGhpcy5sYXN0ID0gZmFsc2U7ICAgICAgICAgIC8qIHRydWUgaWYgcHJvY2Vzc2luZyBsYXN0IGJsb2NrICovXG4gIHRoaXMud3JhcCA9IDA7ICAgICAgICAgICAgICAvKiBiaXQgMCB0cnVlIGZvciB6bGliLCBiaXQgMSB0cnVlIGZvciBnemlwICovXG4gIHRoaXMuaGF2ZWRpY3QgPSBmYWxzZTsgICAgICAvKiB0cnVlIGlmIGRpY3Rpb25hcnkgcHJvdmlkZWQgKi9cbiAgdGhpcy5mbGFncyA9IDA7ICAgICAgICAgICAgIC8qIGd6aXAgaGVhZGVyIG1ldGhvZCBhbmQgZmxhZ3MgKDAgaWYgemxpYikgKi9cbiAgdGhpcy5kbWF4ID0gMDsgICAgICAgICAgICAgIC8qIHpsaWIgaGVhZGVyIG1heCBkaXN0YW5jZSAoSU5GTEFURV9TVFJJQ1QpICovXG4gIHRoaXMuY2hlY2sgPSAwOyAgICAgICAgICAgICAvKiBwcm90ZWN0ZWQgY29weSBvZiBjaGVjayB2YWx1ZSAqL1xuICB0aGlzLnRvdGFsID0gMDsgICAgICAgICAgICAgLyogcHJvdGVjdGVkIGNvcHkgb2Ygb3V0cHV0IGNvdW50ICovXG4gIC8vIFRPRE86IG1heSBiZSB7fVxuICB0aGlzLmhlYWQgPSBudWxsOyAgICAgICAgICAgLyogd2hlcmUgdG8gc2F2ZSBnemlwIGhlYWRlciBpbmZvcm1hdGlvbiAqL1xuXG4gIC8qIHNsaWRpbmcgd2luZG93ICovXG4gIHRoaXMud2JpdHMgPSAwOyAgICAgICAgICAgICAvKiBsb2cgYmFzZSAyIG9mIHJlcXVlc3RlZCB3aW5kb3cgc2l6ZSAqL1xuICB0aGlzLndzaXplID0gMDsgICAgICAgICAgICAgLyogd2luZG93IHNpemUgb3IgemVybyBpZiBub3QgdXNpbmcgd2luZG93ICovXG4gIHRoaXMud2hhdmUgPSAwOyAgICAgICAgICAgICAvKiB2YWxpZCBieXRlcyBpbiB0aGUgd2luZG93ICovXG4gIHRoaXMud25leHQgPSAwOyAgICAgICAgICAgICAvKiB3aW5kb3cgd3JpdGUgaW5kZXggKi9cbiAgdGhpcy53aW5kb3cgPSBudWxsOyAgICAgICAgIC8qIGFsbG9jYXRlZCBzbGlkaW5nIHdpbmRvdywgaWYgbmVlZGVkICovXG5cbiAgLyogYml0IGFjY3VtdWxhdG9yICovXG4gIHRoaXMuaG9sZCA9IDA7ICAgICAgICAgICAgICAvKiBpbnB1dCBiaXQgYWNjdW11bGF0b3IgKi9cbiAgdGhpcy5iaXRzID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBiaXRzIGluIFwiaW5cIiAqL1xuXG4gIC8qIGZvciBzdHJpbmcgYW5kIHN0b3JlZCBibG9jayBjb3B5aW5nICovXG4gIHRoaXMubGVuZ3RoID0gMDsgICAgICAgICAgICAvKiBsaXRlcmFsIG9yIGxlbmd0aCBvZiBkYXRhIHRvIGNvcHkgKi9cbiAgdGhpcy5vZmZzZXQgPSAwOyAgICAgICAgICAgIC8qIGRpc3RhbmNlIGJhY2sgdG8gY29weSBzdHJpbmcgZnJvbSAqL1xuXG4gIC8qIGZvciB0YWJsZSBhbmQgY29kZSBkZWNvZGluZyAqL1xuICB0aGlzLmV4dHJhID0gMDsgICAgICAgICAgICAgLyogZXh0cmEgYml0cyBuZWVkZWQgKi9cblxuICAvKiBmaXhlZCBhbmQgZHluYW1pYyBjb2RlIHRhYmxlcyAqL1xuICB0aGlzLmxlbmNvZGUgPSBudWxsOyAgICAgICAgICAvKiBzdGFydGluZyB0YWJsZSBmb3IgbGVuZ3RoL2xpdGVyYWwgY29kZXMgKi9cbiAgdGhpcy5kaXN0Y29kZSA9IG51bGw7ICAgICAgICAgLyogc3RhcnRpbmcgdGFibGUgZm9yIGRpc3RhbmNlIGNvZGVzICovXG4gIHRoaXMubGVuYml0cyA9IDA7ICAgICAgICAgICAvKiBpbmRleCBiaXRzIGZvciBsZW5jb2RlICovXG4gIHRoaXMuZGlzdGJpdHMgPSAwOyAgICAgICAgICAvKiBpbmRleCBiaXRzIGZvciBkaXN0Y29kZSAqL1xuXG4gIC8qIGR5bmFtaWMgdGFibGUgYnVpbGRpbmcgKi9cbiAgdGhpcy5uY29kZSA9IDA7ICAgICAgICAgICAgIC8qIG51bWJlciBvZiBjb2RlIGxlbmd0aCBjb2RlIGxlbmd0aHMgKi9cbiAgdGhpcy5ubGVuID0gMDsgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBsZW5ndGggY29kZSBsZW5ndGhzICovXG4gIHRoaXMubmRpc3QgPSAwOyAgICAgICAgICAgICAvKiBudW1iZXIgb2YgZGlzdGFuY2UgY29kZSBsZW5ndGhzICovXG4gIHRoaXMuaGF2ZSA9IDA7ICAgICAgICAgICAgICAvKiBudW1iZXIgb2YgY29kZSBsZW5ndGhzIGluIGxlbnNbXSAqL1xuICB0aGlzLm5leHQgPSBudWxsOyAgICAgICAgICAgICAgLyogbmV4dCBhdmFpbGFibGUgc3BhY2UgaW4gY29kZXNbXSAqL1xuXG4gIHRoaXMubGVucyA9IG5ldyB1dGlscy5CdWYxNigzMjApOyAvKiB0ZW1wb3Jhcnkgc3RvcmFnZSBmb3IgY29kZSBsZW5ndGhzICovXG4gIHRoaXMud29yayA9IG5ldyB1dGlscy5CdWYxNigyODgpOyAvKiB3b3JrIGFyZWEgZm9yIGNvZGUgdGFibGUgYnVpbGRpbmcgKi9cblxuICAvKlxuICAgYmVjYXVzZSB3ZSBkb24ndCBoYXZlIHBvaW50ZXJzIGluIGpzLCB3ZSB1c2UgbGVuY29kZSBhbmQgZGlzdGNvZGUgZGlyZWN0bHlcbiAgIGFzIGJ1ZmZlcnMgc28gd2UgZG9uJ3QgbmVlZCBjb2Rlc1xuICAqL1xuICAvL3RoaXMuY29kZXMgPSBuZXcgdXRpbHMuQnVmMzIoRU5PVUdIKTsgICAgICAgLyogc3BhY2UgZm9yIGNvZGUgdGFibGVzICovXG4gIHRoaXMubGVuZHluID0gbnVsbDsgICAgICAgICAgICAgIC8qIGR5bmFtaWMgdGFibGUgZm9yIGxlbmd0aC9saXRlcmFsIGNvZGVzIChKUyBzcGVjaWZpYykgKi9cbiAgdGhpcy5kaXN0ZHluID0gbnVsbDsgICAgICAgICAgICAgLyogZHluYW1pYyB0YWJsZSBmb3IgZGlzdGFuY2UgY29kZXMgKEpTIHNwZWNpZmljKSAqL1xuICB0aGlzLnNhbmUgPSAwOyAgICAgICAgICAgICAgICAgICAvKiBpZiBmYWxzZSwgYWxsb3cgaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyICovXG4gIHRoaXMuYmFjayA9IDA7ICAgICAgICAgICAgICAgICAgIC8qIGJpdHMgYmFjayBvZiBsYXN0IHVucHJvY2Vzc2VkIGxlbmd0aC9saXQgKi9cbiAgdGhpcy53YXMgPSAwOyAgICAgICAgICAgICAgICAgICAgLyogaW5pdGlhbCBsZW5ndGggb2YgbWF0Y2ggKi9cbn1cblxuZnVuY3Rpb24gaW5mbGF0ZVJlc2V0S2VlcChzdHJtKSB7XG4gIHZhciBzdGF0ZTtcblxuICBpZiAoIXN0cm0gfHwgIXN0cm0uc3RhdGUpIHsgcmV0dXJuIFpfU1RSRUFNX0VSUk9SOyB9XG4gIHN0YXRlID0gc3RybS5zdGF0ZTtcbiAgc3RybS50b3RhbF9pbiA9IHN0cm0udG90YWxfb3V0ID0gc3RhdGUudG90YWwgPSAwO1xuICBzdHJtLm1zZyA9ICcnOyAvKlpfTlVMTCovXG4gIGlmIChzdGF0ZS53cmFwKSB7ICAgICAgIC8qIHRvIHN1cHBvcnQgaWxsLWNvbmNlaXZlZCBKYXZhIHRlc3Qgc3VpdGUgKi9cbiAgICBzdHJtLmFkbGVyID0gc3RhdGUud3JhcCAmIDE7XG4gIH1cbiAgc3RhdGUubW9kZSA9IEhFQUQ7XG4gIHN0YXRlLmxhc3QgPSAwO1xuICBzdGF0ZS5oYXZlZGljdCA9IDA7XG4gIHN0YXRlLmRtYXggPSAzMjc2ODtcbiAgc3RhdGUuaGVhZCA9IG51bGwvKlpfTlVMTCovO1xuICBzdGF0ZS5ob2xkID0gMDtcbiAgc3RhdGUuYml0cyA9IDA7XG4gIC8vc3RhdGUubGVuY29kZSA9IHN0YXRlLmRpc3Rjb2RlID0gc3RhdGUubmV4dCA9IHN0YXRlLmNvZGVzO1xuICBzdGF0ZS5sZW5jb2RlID0gc3RhdGUubGVuZHluID0gbmV3IHV0aWxzLkJ1ZjMyKEVOT1VHSF9MRU5TKTtcbiAgc3RhdGUuZGlzdGNvZGUgPSBzdGF0ZS5kaXN0ZHluID0gbmV3IHV0aWxzLkJ1ZjMyKEVOT1VHSF9ESVNUUyk7XG5cbiAgc3RhdGUuc2FuZSA9IDE7XG4gIHN0YXRlLmJhY2sgPSAtMTtcbiAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiByZXNldFxcblwiKSk7XG4gIHJldHVybiBaX09LO1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlUmVzZXQoc3RybSkge1xuICB2YXIgc3RhdGU7XG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG4gIHN0YXRlLndzaXplID0gMDtcbiAgc3RhdGUud2hhdmUgPSAwO1xuICBzdGF0ZS53bmV4dCA9IDA7XG4gIHJldHVybiBpbmZsYXRlUmVzZXRLZWVwKHN0cm0pO1xuXG59XG5cbmZ1bmN0aW9uIGluZmxhdGVSZXNldDIoc3RybSwgd2luZG93Qml0cykge1xuICB2YXIgd3JhcDtcbiAgdmFyIHN0YXRlO1xuXG4gIC8qIGdldCB0aGUgc3RhdGUgKi9cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG5cbiAgLyogZXh0cmFjdCB3cmFwIHJlcXVlc3QgZnJvbSB3aW5kb3dCaXRzIHBhcmFtZXRlciAqL1xuICBpZiAod2luZG93Qml0cyA8IDApIHtcbiAgICB3cmFwID0gMDtcbiAgICB3aW5kb3dCaXRzID0gLXdpbmRvd0JpdHM7XG4gIH1cbiAgZWxzZSB7XG4gICAgd3JhcCA9ICh3aW5kb3dCaXRzID4+IDQpICsgMTtcbiAgICBpZiAod2luZG93Qml0cyA8IDQ4KSB7XG4gICAgICB3aW5kb3dCaXRzICY9IDE1O1xuICAgIH1cbiAgfVxuXG4gIC8qIHNldCBudW1iZXIgb2Ygd2luZG93IGJpdHMsIGZyZWUgd2luZG93IGlmIGRpZmZlcmVudCAqL1xuICBpZiAod2luZG93Qml0cyAmJiAod2luZG93Qml0cyA8IDggfHwgd2luZG93Qml0cyA+IDE1KSkge1xuICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgfVxuICBpZiAoc3RhdGUud2luZG93ICE9PSBudWxsICYmIHN0YXRlLndiaXRzICE9PSB3aW5kb3dCaXRzKSB7XG4gICAgc3RhdGUud2luZG93ID0gbnVsbDtcbiAgfVxuXG4gIC8qIHVwZGF0ZSBzdGF0ZSBhbmQgcmVzZXQgdGhlIHJlc3Qgb2YgaXQgKi9cbiAgc3RhdGUud3JhcCA9IHdyYXA7XG4gIHN0YXRlLndiaXRzID0gd2luZG93Qml0cztcbiAgcmV0dXJuIGluZmxhdGVSZXNldChzdHJtKTtcbn1cblxuZnVuY3Rpb24gaW5mbGF0ZUluaXQyKHN0cm0sIHdpbmRvd0JpdHMpIHtcbiAgdmFyIHJldDtcbiAgdmFyIHN0YXRlO1xuXG4gIGlmICghc3RybSkgeyByZXR1cm4gWl9TVFJFQU1fRVJST1I7IH1cbiAgLy9zdHJtLm1zZyA9IFpfTlVMTDsgICAgICAgICAgICAgICAgIC8qIGluIGNhc2Ugd2UgcmV0dXJuIGFuIGVycm9yICovXG5cbiAgc3RhdGUgPSBuZXcgSW5mbGF0ZVN0YXRlKCk7XG5cbiAgLy9pZiAoc3RhdGUgPT09IFpfTlVMTCkgcmV0dXJuIFpfTUVNX0VSUk9SO1xuICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6IGFsbG9jYXRlZFxcblwiKSk7XG4gIHN0cm0uc3RhdGUgPSBzdGF0ZTtcbiAgc3RhdGUud2luZG93ID0gbnVsbC8qWl9OVUxMKi87XG4gIHJldCA9IGluZmxhdGVSZXNldDIoc3RybSwgd2luZG93Qml0cyk7XG4gIGlmIChyZXQgIT09IFpfT0spIHtcbiAgICBzdHJtLnN0YXRlID0gbnVsbC8qWl9OVUxMKi87XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gaW5mbGF0ZUluaXQoc3RybSkge1xuICByZXR1cm4gaW5mbGF0ZUluaXQyKHN0cm0sIERFRl9XQklUUyk7XG59XG5cblxuLypcbiBSZXR1cm4gc3RhdGUgd2l0aCBsZW5ndGggYW5kIGRpc3RhbmNlIGRlY29kaW5nIHRhYmxlcyBhbmQgaW5kZXggc2l6ZXMgc2V0IHRvXG4gZml4ZWQgY29kZSBkZWNvZGluZy4gIE5vcm1hbGx5IHRoaXMgcmV0dXJucyBmaXhlZCB0YWJsZXMgZnJvbSBpbmZmaXhlZC5oLlxuIElmIEJVSUxERklYRUQgaXMgZGVmaW5lZCwgdGhlbiBpbnN0ZWFkIHRoaXMgcm91dGluZSBidWlsZHMgdGhlIHRhYmxlcyB0aGVcbiBmaXJzdCB0aW1lIGl0J3MgY2FsbGVkLCBhbmQgcmV0dXJucyB0aG9zZSB0YWJsZXMgdGhlIGZpcnN0IHRpbWUgYW5kXG4gdGhlcmVhZnRlci4gIFRoaXMgcmVkdWNlcyB0aGUgc2l6ZSBvZiB0aGUgY29kZSBieSBhYm91dCAySyBieXRlcywgaW5cbiBleGNoYW5nZSBmb3IgYSBsaXR0bGUgZXhlY3V0aW9uIHRpbWUuICBIb3dldmVyLCBCVUlMREZJWEVEIHNob3VsZCBub3QgYmVcbiB1c2VkIGZvciB0aHJlYWRlZCBhcHBsaWNhdGlvbnMsIHNpbmNlIHRoZSByZXdyaXRpbmcgb2YgdGhlIHRhYmxlcyBhbmQgdmlyZ2luXG4gbWF5IG5vdCBiZSB0aHJlYWQtc2FmZS5cbiAqL1xudmFyIHZpcmdpbiA9IHRydWU7XG5cbnZhciBsZW5maXgsIGRpc3RmaXg7IC8vIFdlIGhhdmUgbm8gcG9pbnRlcnMgaW4gSlMsIHNvIGtlZXAgdGFibGVzIHNlcGFyYXRlXG5cbmZ1bmN0aW9uIGZpeGVkdGFibGVzKHN0YXRlKSB7XG4gIC8qIGJ1aWxkIGZpeGVkIGh1ZmZtYW4gdGFibGVzIGlmIGZpcnN0IGNhbGwgKG1heSBub3QgYmUgdGhyZWFkIHNhZmUpICovXG4gIGlmICh2aXJnaW4pIHtcbiAgICB2YXIgc3ltO1xuXG4gICAgbGVuZml4ID0gbmV3IHV0aWxzLkJ1ZjMyKDUxMik7XG4gICAgZGlzdGZpeCA9IG5ldyB1dGlscy5CdWYzMigzMik7XG5cbiAgICAvKiBsaXRlcmFsL2xlbmd0aCB0YWJsZSAqL1xuICAgIHN5bSA9IDA7XG4gICAgd2hpbGUgKHN5bSA8IDE0NCkgeyBzdGF0ZS5sZW5zW3N5bSsrXSA9IDg7IH1cbiAgICB3aGlsZSAoc3ltIDwgMjU2KSB7IHN0YXRlLmxlbnNbc3ltKytdID0gOTsgfVxuICAgIHdoaWxlIChzeW0gPCAyODApIHsgc3RhdGUubGVuc1tzeW0rK10gPSA3OyB9XG4gICAgd2hpbGUgKHN5bSA8IDI4OCkgeyBzdGF0ZS5sZW5zW3N5bSsrXSA9IDg7IH1cblxuICAgIGluZmxhdGVfdGFibGUoTEVOUywgIHN0YXRlLmxlbnMsIDAsIDI4OCwgbGVuZml4LCAgIDAsIHN0YXRlLndvcmssIHsgYml0czogOSB9KTtcblxuICAgIC8qIGRpc3RhbmNlIHRhYmxlICovXG4gICAgc3ltID0gMDtcbiAgICB3aGlsZSAoc3ltIDwgMzIpIHsgc3RhdGUubGVuc1tzeW0rK10gPSA1OyB9XG5cbiAgICBpbmZsYXRlX3RhYmxlKERJU1RTLCBzdGF0ZS5sZW5zLCAwLCAzMiwgICBkaXN0Zml4LCAwLCBzdGF0ZS53b3JrLCB7IGJpdHM6IDUgfSk7XG5cbiAgICAvKiBkbyB0aGlzIGp1c3Qgb25jZSAqL1xuICAgIHZpcmdpbiA9IGZhbHNlO1xuICB9XG5cbiAgc3RhdGUubGVuY29kZSA9IGxlbmZpeDtcbiAgc3RhdGUubGVuYml0cyA9IDk7XG4gIHN0YXRlLmRpc3Rjb2RlID0gZGlzdGZpeDtcbiAgc3RhdGUuZGlzdGJpdHMgPSA1O1xufVxuXG5cbi8qXG4gVXBkYXRlIHRoZSB3aW5kb3cgd2l0aCB0aGUgbGFzdCB3c2l6ZSAobm9ybWFsbHkgMzJLKSBieXRlcyB3cml0dGVuIGJlZm9yZVxuIHJldHVybmluZy4gIElmIHdpbmRvdyBkb2VzIG5vdCBleGlzdCB5ZXQsIGNyZWF0ZSBpdC4gIFRoaXMgaXMgb25seSBjYWxsZWRcbiB3aGVuIGEgd2luZG93IGlzIGFscmVhZHkgaW4gdXNlLCBvciB3aGVuIG91dHB1dCBoYXMgYmVlbiB3cml0dGVuIGR1cmluZyB0aGlzXG4gaW5mbGF0ZSBjYWxsLCBidXQgdGhlIGVuZCBvZiB0aGUgZGVmbGF0ZSBzdHJlYW0gaGFzIG5vdCBiZWVuIHJlYWNoZWQgeWV0LlxuIEl0IGlzIGFsc28gY2FsbGVkIHRvIGNyZWF0ZSBhIHdpbmRvdyBmb3IgZGljdGlvbmFyeSBkYXRhIHdoZW4gYSBkaWN0aW9uYXJ5XG4gaXMgbG9hZGVkLlxuXG4gUHJvdmlkaW5nIG91dHB1dCBidWZmZXJzIGxhcmdlciB0aGFuIDMySyB0byBpbmZsYXRlKCkgc2hvdWxkIHByb3ZpZGUgYSBzcGVlZFxuIGFkdmFudGFnZSwgc2luY2Ugb25seSB0aGUgbGFzdCAzMksgb2Ygb3V0cHV0IGlzIGNvcGllZCB0byB0aGUgc2xpZGluZyB3aW5kb3dcbiB1cG9uIHJldHVybiBmcm9tIGluZmxhdGUoKSwgYW5kIHNpbmNlIGFsbCBkaXN0YW5jZXMgYWZ0ZXIgdGhlIGZpcnN0IDMySyBvZlxuIG91dHB1dCB3aWxsIGZhbGwgaW4gdGhlIG91dHB1dCBkYXRhLCBtYWtpbmcgbWF0Y2ggY29waWVzIHNpbXBsZXIgYW5kIGZhc3Rlci5cbiBUaGUgYWR2YW50YWdlIG1heSBiZSBkZXBlbmRlbnQgb24gdGhlIHNpemUgb2YgdGhlIHByb2Nlc3NvcidzIGRhdGEgY2FjaGVzLlxuICovXG5mdW5jdGlvbiB1cGRhdGV3aW5kb3coc3RybSwgc3JjLCBlbmQsIGNvcHkpIHtcbiAgdmFyIGRpc3Q7XG4gIHZhciBzdGF0ZSA9IHN0cm0uc3RhdGU7XG5cbiAgLyogaWYgaXQgaGFzbid0IGJlZW4gZG9uZSBhbHJlYWR5LCBhbGxvY2F0ZSBzcGFjZSBmb3IgdGhlIHdpbmRvdyAqL1xuICBpZiAoc3RhdGUud2luZG93ID09PSBudWxsKSB7XG4gICAgc3RhdGUud3NpemUgPSAxIDw8IHN0YXRlLndiaXRzO1xuICAgIHN0YXRlLnduZXh0ID0gMDtcbiAgICBzdGF0ZS53aGF2ZSA9IDA7XG5cbiAgICBzdGF0ZS53aW5kb3cgPSBuZXcgdXRpbHMuQnVmOChzdGF0ZS53c2l6ZSk7XG4gIH1cblxuICAvKiBjb3B5IHN0YXRlLT53c2l6ZSBvciBsZXNzIG91dHB1dCBieXRlcyBpbnRvIHRoZSBjaXJjdWxhciB3aW5kb3cgKi9cbiAgaWYgKGNvcHkgPj0gc3RhdGUud3NpemUpIHtcbiAgICB1dGlscy5hcnJheVNldChzdGF0ZS53aW5kb3csIHNyYywgZW5kIC0gc3RhdGUud3NpemUsIHN0YXRlLndzaXplLCAwKTtcbiAgICBzdGF0ZS53bmV4dCA9IDA7XG4gICAgc3RhdGUud2hhdmUgPSBzdGF0ZS53c2l6ZTtcbiAgfVxuICBlbHNlIHtcbiAgICBkaXN0ID0gc3RhdGUud3NpemUgLSBzdGF0ZS53bmV4dDtcbiAgICBpZiAoZGlzdCA+IGNvcHkpIHtcbiAgICAgIGRpc3QgPSBjb3B5O1xuICAgIH1cbiAgICAvL3ptZW1jcHkoc3RhdGUtPndpbmRvdyArIHN0YXRlLT53bmV4dCwgZW5kIC0gY29weSwgZGlzdCk7XG4gICAgdXRpbHMuYXJyYXlTZXQoc3RhdGUud2luZG93LCBzcmMsIGVuZCAtIGNvcHksIGRpc3QsIHN0YXRlLnduZXh0KTtcbiAgICBjb3B5IC09IGRpc3Q7XG4gICAgaWYgKGNvcHkpIHtcbiAgICAgIC8vem1lbWNweShzdGF0ZS0+d2luZG93LCBlbmQgLSBjb3B5LCBjb3B5KTtcbiAgICAgIHV0aWxzLmFycmF5U2V0KHN0YXRlLndpbmRvdywgc3JjLCBlbmQgLSBjb3B5LCBjb3B5LCAwKTtcbiAgICAgIHN0YXRlLnduZXh0ID0gY29weTtcbiAgICAgIHN0YXRlLndoYXZlID0gc3RhdGUud3NpemU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgc3RhdGUud25leHQgKz0gZGlzdDtcbiAgICAgIGlmIChzdGF0ZS53bmV4dCA9PT0gc3RhdGUud3NpemUpIHsgc3RhdGUud25leHQgPSAwOyB9XG4gICAgICBpZiAoc3RhdGUud2hhdmUgPCBzdGF0ZS53c2l6ZSkgeyBzdGF0ZS53aGF2ZSArPSBkaXN0OyB9XG4gICAgfVxuICB9XG4gIHJldHVybiAwO1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlKHN0cm0sIGZsdXNoKSB7XG4gIHZhciBzdGF0ZTtcbiAgdmFyIGlucHV0LCBvdXRwdXQ7ICAgICAgICAgIC8vIGlucHV0L291dHB1dCBidWZmZXJzXG4gIHZhciBuZXh0OyAgICAgICAgICAgICAgICAgICAvKiBuZXh0IGlucHV0IElOREVYICovXG4gIHZhciBwdXQ7ICAgICAgICAgICAgICAgICAgICAvKiBuZXh0IG91dHB1dCBJTkRFWCAqL1xuICB2YXIgaGF2ZSwgbGVmdDsgICAgICAgICAgICAgLyogYXZhaWxhYmxlIGlucHV0IGFuZCBvdXRwdXQgKi9cbiAgdmFyIGhvbGQ7ICAgICAgICAgICAgICAgICAgIC8qIGJpdCBidWZmZXIgKi9cbiAgdmFyIGJpdHM7ICAgICAgICAgICAgICAgICAgIC8qIGJpdHMgaW4gYml0IGJ1ZmZlciAqL1xuICB2YXIgX2luLCBfb3V0OyAgICAgICAgICAgICAgLyogc2F2ZSBzdGFydGluZyBhdmFpbGFibGUgaW5wdXQgYW5kIG91dHB1dCAqL1xuICB2YXIgY29weTsgICAgICAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIHN0b3JlZCBvciBtYXRjaCBieXRlcyB0byBjb3B5ICovXG4gIHZhciBmcm9tOyAgICAgICAgICAgICAgICAgICAvKiB3aGVyZSB0byBjb3B5IG1hdGNoIGJ5dGVzIGZyb20gKi9cbiAgdmFyIGZyb21fc291cmNlO1xuICB2YXIgaGVyZSA9IDA7ICAgICAgICAgICAgICAgLyogY3VycmVudCBkZWNvZGluZyB0YWJsZSBlbnRyeSAqL1xuICB2YXIgaGVyZV9iaXRzLCBoZXJlX29wLCBoZXJlX3ZhbDsgLy8gcGFrZWQgXCJoZXJlXCIgZGVub3JtYWxpemVkIChKUyBzcGVjaWZpYylcbiAgLy92YXIgbGFzdDsgICAgICAgICAgICAgICAgICAgLyogcGFyZW50IHRhYmxlIGVudHJ5ICovXG4gIHZhciBsYXN0X2JpdHMsIGxhc3Rfb3AsIGxhc3RfdmFsOyAvLyBwYWtlZCBcImxhc3RcIiBkZW5vcm1hbGl6ZWQgKEpTIHNwZWNpZmljKVxuICB2YXIgbGVuOyAgICAgICAgICAgICAgICAgICAgLyogbGVuZ3RoIHRvIGNvcHkgZm9yIHJlcGVhdHMsIGJpdHMgdG8gZHJvcCAqL1xuICB2YXIgcmV0OyAgICAgICAgICAgICAgICAgICAgLyogcmV0dXJuIGNvZGUgKi9cbiAgdmFyIGhidWYgPSBuZXcgdXRpbHMuQnVmOCg0KTsgICAgLyogYnVmZmVyIGZvciBnemlwIGhlYWRlciBjcmMgY2FsY3VsYXRpb24gKi9cbiAgdmFyIG9wdHM7XG5cbiAgdmFyIG47IC8vIHRlbXBvcmFyeSB2YXIgZm9yIE5FRURfQklUU1xuXG4gIHZhciBvcmRlciA9IC8qIHBlcm11dGF0aW9uIG9mIGNvZGUgbGVuZ3RocyAqL1xuICAgIFsgMTYsIDE3LCAxOCwgMCwgOCwgNywgOSwgNiwgMTAsIDUsIDExLCA0LCAxMiwgMywgMTMsIDIsIDE0LCAxLCAxNSBdO1xuXG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlIHx8ICFzdHJtLm91dHB1dCB8fFxuICAgICAgKCFzdHJtLmlucHV0ICYmIHN0cm0uYXZhaWxfaW4gIT09IDApKSB7XG4gICAgcmV0dXJuIFpfU1RSRUFNX0VSUk9SO1xuICB9XG5cbiAgc3RhdGUgPSBzdHJtLnN0YXRlO1xuICBpZiAoc3RhdGUubW9kZSA9PT0gVFlQRSkgeyBzdGF0ZS5tb2RlID0gVFlQRURPOyB9ICAgIC8qIHNraXAgY2hlY2sgKi9cblxuXG4gIC8vLS0tIExPQUQoKSAtLS1cbiAgcHV0ID0gc3RybS5uZXh0X291dDtcbiAgb3V0cHV0ID0gc3RybS5vdXRwdXQ7XG4gIGxlZnQgPSBzdHJtLmF2YWlsX291dDtcbiAgbmV4dCA9IHN0cm0ubmV4dF9pbjtcbiAgaW5wdXQgPSBzdHJtLmlucHV0O1xuICBoYXZlID0gc3RybS5hdmFpbF9pbjtcbiAgaG9sZCA9IHN0YXRlLmhvbGQ7XG4gIGJpdHMgPSBzdGF0ZS5iaXRzO1xuICAvLy0tLVxuXG4gIF9pbiA9IGhhdmU7XG4gIF9vdXQgPSBsZWZ0O1xuICByZXQgPSBaX09LO1xuXG4gIGluZl9sZWF2ZTogLy8gZ290byBlbXVsYXRpb25cbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoc3RhdGUubW9kZSkge1xuICAgIGNhc2UgSEVBRDpcbiAgICAgIGlmIChzdGF0ZS53cmFwID09PSAwKSB7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBUWVBFRE87XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy89PT0gTkVFREJJVFMoMTYpO1xuICAgICAgd2hpbGUgKGJpdHMgPCAxNikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgaWYgKChzdGF0ZS53cmFwICYgMikgJiYgaG9sZCA9PT0gMHg4YjFmKSB7ICAvKiBnemlwIGhlYWRlciAqL1xuICAgICAgICBzdGF0ZS5jaGVjayA9IDAvKmNyYzMyKDBMLCBaX05VTEwsIDApKi87XG4gICAgICAgIC8vPT09IENSQzIoc3RhdGUuY2hlY2ssIGhvbGQpO1xuICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7XG4gICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmO1xuICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBoYnVmLCAyLCAwKTtcbiAgICAgICAgLy89PT0vL1xuXG4gICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgIGhvbGQgPSAwO1xuICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgLy89PT0vL1xuICAgICAgICBzdGF0ZS5tb2RlID0gRkxBR1M7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhdGUuZmxhZ3MgPSAwOyAgICAgICAgICAgLyogZXhwZWN0IHpsaWIgaGVhZGVyICovXG4gICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICBzdGF0ZS5oZWFkLmRvbmUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIGlmICghKHN0YXRlLndyYXAgJiAxKSB8fCAgIC8qIGNoZWNrIGlmIHpsaWIgaGVhZGVyIGFsbG93ZWQgKi9cbiAgICAgICAgKCgoaG9sZCAmIDB4ZmYpLypCSVRTKDgpKi8gPDwgOCkgKyAoaG9sZCA+PiA4KSkgJSAzMSkge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbmNvcnJlY3QgaGVhZGVyIGNoZWNrJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoKGhvbGQgJiAweDBmKS8qQklUUyg0KSovICE9PSBaX0RFRkxBVEVEKSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ3Vua25vd24gY29tcHJlc3Npb24gbWV0aG9kJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLy0tLSBEUk9QQklUUyg0KSAtLS0vL1xuICAgICAgaG9sZCA+Pj49IDQ7XG4gICAgICBiaXRzIC09IDQ7XG4gICAgICAvLy0tLS8vXG4gICAgICBsZW4gPSAoaG9sZCAmIDB4MGYpLypCSVRTKDQpKi8gKyA4O1xuICAgICAgaWYgKHN0YXRlLndiaXRzID09PSAwKSB7XG4gICAgICAgIHN0YXRlLndiaXRzID0gbGVuO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAobGVuID4gc3RhdGUud2JpdHMpIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCB3aW5kb3cgc2l6ZSc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhdGUuZG1heCA9IDEgPDwgbGVuO1xuICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgIHpsaWIgaGVhZGVyIG9rXFxuXCIpKTtcbiAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IDEvKmFkbGVyMzIoMEwsIFpfTlVMTCwgMCkqLztcbiAgICAgIHN0YXRlLm1vZGUgPSBob2xkICYgMHgyMDAgPyBESUNUSUQgOiBUWVBFO1xuICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgIGhvbGQgPSAwO1xuICAgICAgYml0cyA9IDA7XG4gICAgICAvLz09PS8vXG4gICAgICBicmVhaztcbiAgICBjYXNlIEZMQUdTOlxuICAgICAgLy89PT0gTkVFREJJVFMoMTYpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAxNikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUuZmxhZ3MgPSBob2xkO1xuICAgICAgaWYgKChzdGF0ZS5mbGFncyAmIDB4ZmYpICE9PSBaX0RFRkxBVEVEKSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ3Vua25vd24gY29tcHJlc3Npb24gbWV0aG9kJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweGUwMDApIHtcbiAgICAgICAgc3RybS5tc2cgPSAndW5rbm93biBoZWFkZXIgZmxhZ3Mgc2V0JztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICBzdGF0ZS5oZWFkLnRleHQgPSAoKGhvbGQgPj4gOCkgJiAxKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAvLz09PSBDUkMyKHN0YXRlLmNoZWNrLCBob2xkKTtcbiAgICAgICAgaGJ1ZlswXSA9IGhvbGQgJiAweGZmO1xuICAgICAgICBoYnVmWzFdID0gKGhvbGQgPj4+IDgpICYgMHhmZjtcbiAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7XG4gICAgICAgIC8vPT09Ly9cbiAgICAgIH1cbiAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICBob2xkID0gMDtcbiAgICAgIGJpdHMgPSAwO1xuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUubW9kZSA9IFRJTUU7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBUSU1FOlxuICAgICAgLy89PT0gTkVFREJJVFMoMzIpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAzMikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC50aW1lID0gaG9sZDtcbiAgICAgIH1cbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAvLz09PSBDUkM0KHN0YXRlLmNoZWNrLCBob2xkKVxuICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7XG4gICAgICAgIGhidWZbMV0gPSAoaG9sZCA+Pj4gOCkgJiAweGZmO1xuICAgICAgICBoYnVmWzJdID0gKGhvbGQgPj4+IDE2KSAmIDB4ZmY7XG4gICAgICAgIGhidWZbM10gPSAoaG9sZCA+Pj4gMjQpICYgMHhmZjtcbiAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgNCwgMCk7XG4gICAgICAgIC8vPT09XG4gICAgICB9XG4gICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgaG9sZCA9IDA7XG4gICAgICBiaXRzID0gMDtcbiAgICAgIC8vPT09Ly9cbiAgICAgIHN0YXRlLm1vZGUgPSBPUztcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIE9TOlxuICAgICAgLy89PT0gTkVFREJJVFMoMTYpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAxNikge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC54ZmxhZ3MgPSAoaG9sZCAmIDB4ZmYpO1xuICAgICAgICBzdGF0ZS5oZWFkLm9zID0gKGhvbGQgPj4gOCk7XG4gICAgICB9XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgLy89PT0gQ1JDMihzdGF0ZS5jaGVjaywgaG9sZCk7XG4gICAgICAgIGhidWZbMF0gPSBob2xkICYgMHhmZjtcbiAgICAgICAgaGJ1ZlsxXSA9IChob2xkID4+PiA4KSAmIDB4ZmY7XG4gICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGhidWYsIDIsIDApO1xuICAgICAgICAvLz09PS8vXG4gICAgICB9XG4gICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgaG9sZCA9IDA7XG4gICAgICBiaXRzID0gMDtcbiAgICAgIC8vPT09Ly9cbiAgICAgIHN0YXRlLm1vZGUgPSBFWExFTjtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIEVYTEVOOlxuICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwNDAwKSB7XG4gICAgICAgIC8vPT09IE5FRURCSVRTKDE2KTsgKi9cbiAgICAgICAgd2hpbGUgKGJpdHMgPCAxNikge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0vL1xuICAgICAgICBzdGF0ZS5sZW5ndGggPSBob2xkO1xuICAgICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmFfbGVuID0gaG9sZDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDAyMDApIHtcbiAgICAgICAgICAvLz09PSBDUkMyKHN0YXRlLmNoZWNrLCBob2xkKTtcbiAgICAgICAgICBoYnVmWzBdID0gaG9sZCAmIDB4ZmY7XG4gICAgICAgICAgaGJ1ZlsxXSA9IChob2xkID4+PiA4KSAmIDB4ZmY7XG4gICAgICAgICAgc3RhdGUuY2hlY2sgPSBjcmMzMihzdGF0ZS5jaGVjaywgaGJ1ZiwgMiwgMCk7XG4gICAgICAgICAgLy89PT0vL1xuICAgICAgICB9XG4gICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgIGhvbGQgPSAwO1xuICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgLy89PT0vL1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICBzdGF0ZS5oZWFkLmV4dHJhID0gbnVsbC8qWl9OVUxMKi87XG4gICAgICB9XG4gICAgICBzdGF0ZS5tb2RlID0gRVhUUkE7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBFWFRSQTpcbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDQwMCkge1xuICAgICAgICBjb3B5ID0gc3RhdGUubGVuZ3RoO1xuICAgICAgICBpZiAoY29weSA+IGhhdmUpIHsgY29weSA9IGhhdmU7IH1cbiAgICAgICAgaWYgKGNvcHkpIHtcbiAgICAgICAgICBpZiAoc3RhdGUuaGVhZCkge1xuICAgICAgICAgICAgbGVuID0gc3RhdGUuaGVhZC5leHRyYV9sZW4gLSBzdGF0ZS5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoIXN0YXRlLmhlYWQuZXh0cmEpIHtcbiAgICAgICAgICAgICAgLy8gVXNlIHVudHlwZWQgYXJyYXkgZm9yIG1vcmUgY29udmVuaWVuZCBwcm9jZXNzaW5nIGxhdGVyXG4gICAgICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmEgPSBuZXcgQXJyYXkoc3RhdGUuaGVhZC5leHRyYV9sZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdXRpbHMuYXJyYXlTZXQoXG4gICAgICAgICAgICAgIHN0YXRlLmhlYWQuZXh0cmEsXG4gICAgICAgICAgICAgIGlucHV0LFxuICAgICAgICAgICAgICBuZXh0LFxuICAgICAgICAgICAgICAvLyBleHRyYSBmaWVsZCBpcyBsaW1pdGVkIHRvIDY1NTM2IGJ5dGVzXG4gICAgICAgICAgICAgIC8vIC0gbm8gbmVlZCBmb3IgYWRkaXRpb25hbCBzaXplIGNoZWNrXG4gICAgICAgICAgICAgIGNvcHksXG4gICAgICAgICAgICAgIC8qbGVuICsgY29weSA+IHN0YXRlLmhlYWQuZXh0cmFfbWF4IC0gbGVuID8gc3RhdGUuaGVhZC5leHRyYV9tYXggOiBjb3B5LCovXG4gICAgICAgICAgICAgIGxlblxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIC8vem1lbWNweShzdGF0ZS5oZWFkLmV4dHJhICsgbGVuLCBuZXh0LFxuICAgICAgICAgICAgLy8gICAgICAgIGxlbiArIGNvcHkgPiBzdGF0ZS5oZWFkLmV4dHJhX21heCA/XG4gICAgICAgICAgICAvLyAgICAgICAgc3RhdGUuaGVhZC5leHRyYV9tYXggLSBsZW4gOiBjb3B5KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN0YXRlLmZsYWdzICYgMHgwMjAwKSB7XG4gICAgICAgICAgICBzdGF0ZS5jaGVjayA9IGNyYzMyKHN0YXRlLmNoZWNrLCBpbnB1dCwgY29weSwgbmV4dCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGhhdmUgLT0gY29weTtcbiAgICAgICAgICBuZXh0ICs9IGNvcHk7XG4gICAgICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN0YXRlLmxlbmd0aCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIH1cbiAgICAgIHN0YXRlLmxlbmd0aCA9IDA7XG4gICAgICBzdGF0ZS5tb2RlID0gTkFNRTtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIE5BTUU6XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDA4MDApIHtcbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGNvcHkgPSAwO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgLy8gVE9ETzogMiBvciAxIGJ5dGVzP1xuICAgICAgICAgIGxlbiA9IGlucHV0W25leHQgKyBjb3B5KytdO1xuICAgICAgICAgIC8qIHVzZSBjb25zdGFudCBsaW1pdCBiZWNhdXNlIGluIGpzIHdlIHNob3VsZCBub3QgcHJlYWxsb2NhdGUgbWVtb3J5ICovXG4gICAgICAgICAgaWYgKHN0YXRlLmhlYWQgJiYgbGVuICYmXG4gICAgICAgICAgICAgIChzdGF0ZS5sZW5ndGggPCA2NTUzNiAvKnN0YXRlLmhlYWQubmFtZV9tYXgqLykpIHtcbiAgICAgICAgICAgIHN0YXRlLmhlYWQubmFtZSArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGxlbik7XG4gICAgICAgICAgfVxuICAgICAgICB9IHdoaWxlIChsZW4gJiYgY29weSA8IGhhdmUpO1xuXG4gICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGlucHV0LCBjb3B5LCBuZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBoYXZlIC09IGNvcHk7XG4gICAgICAgIG5leHQgKz0gY29weTtcbiAgICAgICAgaWYgKGxlbikgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC5uYW1lID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHN0YXRlLmxlbmd0aCA9IDA7XG4gICAgICBzdGF0ZS5tb2RlID0gQ09NTUVOVDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIENPTU1FTlQ6XG4gICAgICBpZiAoc3RhdGUuZmxhZ3MgJiAweDEwMDApIHtcbiAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgIGNvcHkgPSAwO1xuICAgICAgICBkbyB7XG4gICAgICAgICAgbGVuID0gaW5wdXRbbmV4dCArIGNvcHkrK107XG4gICAgICAgICAgLyogdXNlIGNvbnN0YW50IGxpbWl0IGJlY2F1c2UgaW4ganMgd2Ugc2hvdWxkIG5vdCBwcmVhbGxvY2F0ZSBtZW1vcnkgKi9cbiAgICAgICAgICBpZiAoc3RhdGUuaGVhZCAmJiBsZW4gJiZcbiAgICAgICAgICAgICAgKHN0YXRlLmxlbmd0aCA8IDY1NTM2IC8qc3RhdGUuaGVhZC5jb21tX21heCovKSkge1xuICAgICAgICAgICAgc3RhdGUuaGVhZC5jb21tZW50ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUobGVuKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gd2hpbGUgKGxlbiAmJiBjb3B5IDwgaGF2ZSk7XG4gICAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAgIHN0YXRlLmNoZWNrID0gY3JjMzIoc3RhdGUuY2hlY2ssIGlucHV0LCBjb3B5LCBuZXh0KTtcbiAgICAgICAgfVxuICAgICAgICBoYXZlIC09IGNvcHk7XG4gICAgICAgIG5leHQgKz0gY29weTtcbiAgICAgICAgaWYgKGxlbikgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC5jb21tZW50ID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHN0YXRlLm1vZGUgPSBIQ1JDO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgSENSQzpcbiAgICAgIGlmIChzdGF0ZS5mbGFncyAmIDB4MDIwMCkge1xuICAgICAgICAvLz09PSBORUVEQklUUygxNik7ICovXG4gICAgICAgIHdoaWxlIChiaXRzIDwgMTYpIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgaWYgKGhvbGQgIT09IChzdGF0ZS5jaGVjayAmIDB4ZmZmZikpIHtcbiAgICAgICAgICBzdHJtLm1zZyA9ICdoZWFkZXIgY3JjIG1pc21hdGNoJztcbiAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIC8vPT09IElOSVRCSVRTKCk7XG4gICAgICAgIGhvbGQgPSAwO1xuICAgICAgICBiaXRzID0gMDtcbiAgICAgICAgLy89PT0vL1xuICAgICAgfVxuICAgICAgaWYgKHN0YXRlLmhlYWQpIHtcbiAgICAgICAgc3RhdGUuaGVhZC5oY3JjID0gKChzdGF0ZS5mbGFncyA+PiA5KSAmIDEpO1xuICAgICAgICBzdGF0ZS5oZWFkLmRvbmUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID0gMDtcbiAgICAgIHN0YXRlLm1vZGUgPSBUWVBFO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBESUNUSUQ6XG4gICAgICAvLz09PSBORUVEQklUUygzMik7ICovXG4gICAgICB3aGlsZSAoYml0cyA8IDMyKSB7XG4gICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICBoYXZlLS07XG4gICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICBiaXRzICs9IDg7XG4gICAgICB9XG4gICAgICAvLz09PS8vXG4gICAgICBzdHJtLmFkbGVyID0gc3RhdGUuY2hlY2sgPSB6c3dhcDMyKGhvbGQpO1xuICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgIGhvbGQgPSAwO1xuICAgICAgYml0cyA9IDA7XG4gICAgICAvLz09PS8vXG4gICAgICBzdGF0ZS5tb2RlID0gRElDVDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIERJQ1Q6XG4gICAgICBpZiAoc3RhdGUuaGF2ZWRpY3QgPT09IDApIHtcbiAgICAgICAgLy8tLS0gUkVTVE9SRSgpIC0tLVxuICAgICAgICBzdHJtLm5leHRfb3V0ID0gcHV0O1xuICAgICAgICBzdHJtLmF2YWlsX291dCA9IGxlZnQ7XG4gICAgICAgIHN0cm0ubmV4dF9pbiA9IG5leHQ7XG4gICAgICAgIHN0cm0uYXZhaWxfaW4gPSBoYXZlO1xuICAgICAgICBzdGF0ZS5ob2xkID0gaG9sZDtcbiAgICAgICAgc3RhdGUuYml0cyA9IGJpdHM7XG4gICAgICAgIC8vLS0tXG4gICAgICAgIHJldHVybiBaX05FRURfRElDVDtcbiAgICAgIH1cbiAgICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IDEvKmFkbGVyMzIoMEwsIFpfTlVMTCwgMCkqLztcbiAgICAgIHN0YXRlLm1vZGUgPSBUWVBFO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgVFlQRTpcbiAgICAgIGlmIChmbHVzaCA9PT0gWl9CTE9DSyB8fCBmbHVzaCA9PT0gWl9UUkVFUykgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIFRZUEVETzpcbiAgICAgIGlmIChzdGF0ZS5sYXN0KSB7XG4gICAgICAgIC8vLS0tIEJZVEVCSVRTKCkgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IGJpdHMgJiA3O1xuICAgICAgICBiaXRzIC09IGJpdHMgJiA3O1xuICAgICAgICAvLy0tLS8vXG4gICAgICAgIHN0YXRlLm1vZGUgPSBDSEVDSztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLz09PSBORUVEQklUUygzKTsgKi9cbiAgICAgIHdoaWxlIChiaXRzIDwgMykge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUubGFzdCA9IChob2xkICYgMHgwMSkvKkJJVFMoMSkqLztcbiAgICAgIC8vLS0tIERST1BCSVRTKDEpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gMTtcbiAgICAgIGJpdHMgLT0gMTtcbiAgICAgIC8vLS0tLy9cblxuICAgICAgc3dpdGNoICgoaG9sZCAmIDB4MDMpLypCSVRTKDIpKi8pIHtcbiAgICAgIGNhc2UgMDogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHN0b3JlZCBibG9jayAqL1xuICAgICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICBzdG9yZWQgYmxvY2slc1xcblwiLFxuICAgICAgICAvLyAgICAgICAgc3RhdGUubGFzdCA/IFwiIChsYXN0KVwiIDogXCJcIikpO1xuICAgICAgICBzdGF0ZS5tb2RlID0gU1RPUkVEO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMTogICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIGZpeGVkIGJsb2NrICovXG4gICAgICAgIGZpeGVkdGFibGVzKHN0YXRlKTtcbiAgICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgZml4ZWQgY29kZXMgYmxvY2slc1xcblwiLFxuICAgICAgICAvLyAgICAgICAgc3RhdGUubGFzdCA/IFwiIChsYXN0KVwiIDogXCJcIikpO1xuICAgICAgICBzdGF0ZS5tb2RlID0gTEVOXzsgICAgICAgICAgICAgLyogZGVjb2RlIGNvZGVzICovXG4gICAgICAgIGlmIChmbHVzaCA9PT0gWl9UUkVFUykge1xuICAgICAgICAgIC8vLS0tIERST1BCSVRTKDIpIC0tLS8vXG4gICAgICAgICAgaG9sZCA+Pj49IDI7XG4gICAgICAgICAgYml0cyAtPSAyO1xuICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICBicmVhayBpbmZfbGVhdmU7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDI6ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKiBkeW5hbWljIGJsb2NrICovXG4gICAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgIGR5bmFtaWMgY29kZXMgYmxvY2slc1xcblwiLFxuICAgICAgICAvLyAgICAgICAgc3RhdGUubGFzdCA/IFwiIChsYXN0KVwiIDogXCJcIikpO1xuICAgICAgICBzdGF0ZS5tb2RlID0gVEFCTEU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGJsb2NrIHR5cGUnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgfVxuICAgICAgLy8tLS0gRFJPUEJJVFMoMikgLS0tLy9cbiAgICAgIGhvbGQgPj4+PSAyO1xuICAgICAgYml0cyAtPSAyO1xuICAgICAgLy8tLS0vL1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBTVE9SRUQ6XG4gICAgICAvLy0tLSBCWVRFQklUUygpIC0tLS8vIC8qIGdvIHRvIGJ5dGUgYm91bmRhcnkgKi9cbiAgICAgIGhvbGQgPj4+PSBiaXRzICYgNztcbiAgICAgIGJpdHMgLT0gYml0cyAmIDc7XG4gICAgICAvLy0tLS8vXG4gICAgICAvLz09PSBORUVEQklUUygzMik7ICovXG4gICAgICB3aGlsZSAoYml0cyA8IDMyKSB7XG4gICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICBoYXZlLS07XG4gICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICBiaXRzICs9IDg7XG4gICAgICB9XG4gICAgICAvLz09PS8vXG4gICAgICBpZiAoKGhvbGQgJiAweGZmZmYpICE9PSAoKGhvbGQgPj4+IDE2KSBeIDB4ZmZmZikpIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBzdG9yZWQgYmxvY2sgbGVuZ3Rocyc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgc3RhdGUubGVuZ3RoID0gaG9sZCAmIDB4ZmZmZjtcbiAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgc3RvcmVkIGxlbmd0aCAldVxcblwiLFxuICAgICAgLy8gICAgICAgIHN0YXRlLmxlbmd0aCkpO1xuICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgIGhvbGQgPSAwO1xuICAgICAgYml0cyA9IDA7XG4gICAgICAvLz09PS8vXG4gICAgICBzdGF0ZS5tb2RlID0gQ09QWV87XG4gICAgICBpZiAoZmx1c2ggPT09IFpfVFJFRVMpIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBDT1BZXzpcbiAgICAgIHN0YXRlLm1vZGUgPSBDT1BZO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgQ09QWTpcbiAgICAgIGNvcHkgPSBzdGF0ZS5sZW5ndGg7XG4gICAgICBpZiAoY29weSkge1xuICAgICAgICBpZiAoY29weSA+IGhhdmUpIHsgY29weSA9IGhhdmU7IH1cbiAgICAgICAgaWYgKGNvcHkgPiBsZWZ0KSB7IGNvcHkgPSBsZWZ0OyB9XG4gICAgICAgIGlmIChjb3B5ID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAvLy0tLSB6bWVtY3B5KHB1dCwgbmV4dCwgY29weSk7IC0tLVxuICAgICAgICB1dGlscy5hcnJheVNldChvdXRwdXQsIGlucHV0LCBuZXh0LCBjb3B5LCBwdXQpO1xuICAgICAgICAvLy0tLS8vXG4gICAgICAgIGhhdmUgLT0gY29weTtcbiAgICAgICAgbmV4dCArPSBjb3B5O1xuICAgICAgICBsZWZ0IC09IGNvcHk7XG4gICAgICAgIHB1dCArPSBjb3B5O1xuICAgICAgICBzdGF0ZS5sZW5ndGggLT0gY29weTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvL1RyYWNldigoc3RkZXJyLCBcImluZmxhdGU6ICAgICAgIHN0b3JlZCBlbmRcXG5cIikpO1xuICAgICAgc3RhdGUubW9kZSA9IFRZUEU7XG4gICAgICBicmVhaztcbiAgICBjYXNlIFRBQkxFOlxuICAgICAgLy89PT0gTkVFREJJVFMoMTQpOyAqL1xuICAgICAgd2hpbGUgKGJpdHMgPCAxNCkge1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgfVxuICAgICAgLy89PT0vL1xuICAgICAgc3RhdGUubmxlbiA9IChob2xkICYgMHgxZikvKkJJVFMoNSkqLyArIDI1NztcbiAgICAgIC8vLS0tIERST1BCSVRTKDUpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gNTtcbiAgICAgIGJpdHMgLT0gNTtcbiAgICAgIC8vLS0tLy9cbiAgICAgIHN0YXRlLm5kaXN0ID0gKGhvbGQgJiAweDFmKS8qQklUUyg1KSovICsgMTtcbiAgICAgIC8vLS0tIERST1BCSVRTKDUpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gNTtcbiAgICAgIGJpdHMgLT0gNTtcbiAgICAgIC8vLS0tLy9cbiAgICAgIHN0YXRlLm5jb2RlID0gKGhvbGQgJiAweDBmKS8qQklUUyg0KSovICsgNDtcbiAgICAgIC8vLS0tIERST1BCSVRTKDQpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gNDtcbiAgICAgIGJpdHMgLT0gNDtcbiAgICAgIC8vLS0tLy9cbi8vI2lmbmRlZiBQS1pJUF9CVUdfV09SS0FST1VORFxuICAgICAgaWYgKHN0YXRlLm5sZW4gPiAyODYgfHwgc3RhdGUubmRpc3QgPiAzMCkge1xuICAgICAgICBzdHJtLm1zZyA9ICd0b28gbWFueSBsZW5ndGggb3IgZGlzdGFuY2Ugc3ltYm9scyc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuLy8jZW5kaWZcbiAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgdGFibGUgc2l6ZXMgb2tcXG5cIikpO1xuICAgICAgc3RhdGUuaGF2ZSA9IDA7XG4gICAgICBzdGF0ZS5tb2RlID0gTEVOTEVOUztcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIExFTkxFTlM6XG4gICAgICB3aGlsZSAoc3RhdGUuaGF2ZSA8IHN0YXRlLm5jb2RlKSB7XG4gICAgICAgIC8vPT09IE5FRURCSVRTKDMpO1xuICAgICAgICB3aGlsZSAoYml0cyA8IDMpIHtcbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICB9XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgc3RhdGUubGVuc1tvcmRlcltzdGF0ZS5oYXZlKytdXSA9IChob2xkICYgMHgwNyk7Ly9CSVRTKDMpO1xuICAgICAgICAvLy0tLSBEUk9QQklUUygzKSAtLS0vL1xuICAgICAgICBob2xkID4+Pj0gMztcbiAgICAgICAgYml0cyAtPSAzO1xuICAgICAgICAvLy0tLS8vXG4gICAgICB9XG4gICAgICB3aGlsZSAoc3RhdGUuaGF2ZSA8IDE5KSB7XG4gICAgICAgIHN0YXRlLmxlbnNbb3JkZXJbc3RhdGUuaGF2ZSsrXV0gPSAwO1xuICAgICAgfVxuICAgICAgLy8gV2UgaGF2ZSBzZXBhcmF0ZSB0YWJsZXMgJiBubyBwb2ludGVycy4gMiBjb21tZW50ZWQgbGluZXMgYmVsb3cgbm90IG5lZWRlZC5cbiAgICAgIC8vc3RhdGUubmV4dCA9IHN0YXRlLmNvZGVzO1xuICAgICAgLy9zdGF0ZS5sZW5jb2RlID0gc3RhdGUubmV4dDtcbiAgICAgIC8vIFN3aXRjaCB0byB1c2UgZHluYW1pYyB0YWJsZVxuICAgICAgc3RhdGUubGVuY29kZSA9IHN0YXRlLmxlbmR5bjtcbiAgICAgIHN0YXRlLmxlbmJpdHMgPSA3O1xuXG4gICAgICBvcHRzID0geyBiaXRzOiBzdGF0ZS5sZW5iaXRzIH07XG4gICAgICByZXQgPSBpbmZsYXRlX3RhYmxlKENPREVTLCBzdGF0ZS5sZW5zLCAwLCAxOSwgc3RhdGUubGVuY29kZSwgMCwgc3RhdGUud29yaywgb3B0cyk7XG4gICAgICBzdGF0ZS5sZW5iaXRzID0gb3B0cy5iaXRzO1xuXG4gICAgICBpZiAocmV0KSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgY29kZSBsZW5ndGhzIHNldCc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICBjb2RlIGxlbmd0aHMgb2tcXG5cIikpO1xuICAgICAgc3RhdGUuaGF2ZSA9IDA7XG4gICAgICBzdGF0ZS5tb2RlID0gQ09ERUxFTlM7XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBDT0RFTEVOUzpcbiAgICAgIHdoaWxlIChzdGF0ZS5oYXZlIDwgc3RhdGUubmxlbiArIHN0YXRlLm5kaXN0KSB7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICBoZXJlID0gc3RhdGUubGVuY29kZVtob2xkICYgKCgxIDw8IHN0YXRlLmxlbmJpdHMpIC0gMSldOy8qQklUUyhzdGF0ZS5sZW5iaXRzKSovXG4gICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7XG4gICAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmO1xuICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjtcblxuICAgICAgICAgIGlmICgoaGVyZV9iaXRzKSA8PSBiaXRzKSB7IGJyZWFrOyB9XG4gICAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICB9XG4gICAgICAgIGlmIChoZXJlX3ZhbCA8IDE2KSB7XG4gICAgICAgICAgLy8tLS0gRFJPUEJJVFMoaGVyZS5iaXRzKSAtLS0vL1xuICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7XG4gICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICAgIHN0YXRlLmxlbnNbc3RhdGUuaGF2ZSsrXSA9IGhlcmVfdmFsO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGlmIChoZXJlX3ZhbCA9PT0gMTYpIHtcbiAgICAgICAgICAgIC8vPT09IE5FRURCSVRTKGhlcmUuYml0cyArIDIpO1xuICAgICAgICAgICAgbiA9IGhlcmVfYml0cyArIDI7XG4gICAgICAgICAgICB3aGlsZSAoYml0cyA8IG4pIHtcbiAgICAgICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vPT09Ly9cbiAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKGhlcmUuYml0cykgLS0tLy9cbiAgICAgICAgICAgIGhvbGQgPj4+PSBoZXJlX2JpdHM7XG4gICAgICAgICAgICBiaXRzIC09IGhlcmVfYml0cztcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICAgIGlmIChzdGF0ZS5oYXZlID09PSAwKSB7XG4gICAgICAgICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgYml0IGxlbmd0aCByZXBlYXQnO1xuICAgICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxlbiA9IHN0YXRlLmxlbnNbc3RhdGUuaGF2ZSAtIDFdO1xuICAgICAgICAgICAgY29weSA9IDMgKyAoaG9sZCAmIDB4MDMpOy8vQklUUygyKTtcbiAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKDIpIC0tLS8vXG4gICAgICAgICAgICBob2xkID4+Pj0gMjtcbiAgICAgICAgICAgIGJpdHMgLT0gMjtcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoaGVyZV92YWwgPT09IDE3KSB7XG4gICAgICAgICAgICAvLz09PSBORUVEQklUUyhoZXJlLmJpdHMgKyAzKTtcbiAgICAgICAgICAgIG4gPSBoZXJlX2JpdHMgKyAzO1xuICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7XG4gICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLz09PS8vXG4gICAgICAgICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vXG4gICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzO1xuICAgICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7XG4gICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgICBsZW4gPSAwO1xuICAgICAgICAgICAgY29weSA9IDMgKyAoaG9sZCAmIDB4MDcpOy8vQklUUygzKTtcbiAgICAgICAgICAgIC8vLS0tIERST1BCSVRTKDMpIC0tLS8vXG4gICAgICAgICAgICBob2xkID4+Pj0gMztcbiAgICAgICAgICAgIGJpdHMgLT0gMztcbiAgICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLz09PSBORUVEQklUUyhoZXJlLmJpdHMgKyA3KTtcbiAgICAgICAgICAgIG4gPSBoZXJlX2JpdHMgKyA3O1xuICAgICAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7XG4gICAgICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLz09PS8vXG4gICAgICAgICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vXG4gICAgICAgICAgICBob2xkID4+Pj0gaGVyZV9iaXRzO1xuICAgICAgICAgICAgYml0cyAtPSBoZXJlX2JpdHM7XG4gICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgICBsZW4gPSAwO1xuICAgICAgICAgICAgY29weSA9IDExICsgKGhvbGQgJiAweDdmKTsvL0JJVFMoNyk7XG4gICAgICAgICAgICAvLy0tLSBEUk9QQklUUyg3KSAtLS0vL1xuICAgICAgICAgICAgaG9sZCA+Pj49IDc7XG4gICAgICAgICAgICBiaXRzIC09IDc7XG4gICAgICAgICAgICAvLy0tLS8vXG4gICAgICAgICAgfVxuICAgICAgICAgIGlmIChzdGF0ZS5oYXZlICsgY29weSA+IHN0YXRlLm5sZW4gKyBzdGF0ZS5uZGlzdCkge1xuICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBiaXQgbGVuZ3RoIHJlcGVhdCc7XG4gICAgICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIHdoaWxlIChjb3B5LS0pIHtcbiAgICAgICAgICAgIHN0YXRlLmxlbnNbc3RhdGUuaGF2ZSsrXSA9IGxlbjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyogaGFuZGxlIGVycm9yIGJyZWFrcyBpbiB3aGlsZSAqL1xuICAgICAgaWYgKHN0YXRlLm1vZGUgPT09IEJBRCkgeyBicmVhazsgfVxuXG4gICAgICAvKiBjaGVjayBmb3IgZW5kLW9mLWJsb2NrIGNvZGUgKGJldHRlciBoYXZlIG9uZSkgKi9cbiAgICAgIGlmIChzdGF0ZS5sZW5zWzI1Nl0gPT09IDApIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBjb2RlIC0tIG1pc3NpbmcgZW5kLW9mLWJsb2NrJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIC8qIGJ1aWxkIGNvZGUgdGFibGVzIC0tIG5vdGU6IGRvIG5vdCBjaGFuZ2UgdGhlIGxlbmJpdHMgb3IgZGlzdGJpdHNcbiAgICAgICAgIHZhbHVlcyBoZXJlICg5IGFuZCA2KSB3aXRob3V0IHJlYWRpbmcgdGhlIGNvbW1lbnRzIGluIGluZnRyZWVzLmhcbiAgICAgICAgIGNvbmNlcm5pbmcgdGhlIEVOT1VHSCBjb25zdGFudHMsIHdoaWNoIGRlcGVuZCBvbiB0aG9zZSB2YWx1ZXMgKi9cbiAgICAgIHN0YXRlLmxlbmJpdHMgPSA5O1xuXG4gICAgICBvcHRzID0geyBiaXRzOiBzdGF0ZS5sZW5iaXRzIH07XG4gICAgICByZXQgPSBpbmZsYXRlX3RhYmxlKExFTlMsIHN0YXRlLmxlbnMsIDAsIHN0YXRlLm5sZW4sIHN0YXRlLmxlbmNvZGUsIDAsIHN0YXRlLndvcmssIG9wdHMpO1xuICAgICAgLy8gV2UgaGF2ZSBzZXBhcmF0ZSB0YWJsZXMgJiBubyBwb2ludGVycy4gMiBjb21tZW50ZWQgbGluZXMgYmVsb3cgbm90IG5lZWRlZC5cbiAgICAgIC8vIHN0YXRlLm5leHRfaW5kZXggPSBvcHRzLnRhYmxlX2luZGV4O1xuICAgICAgc3RhdGUubGVuYml0cyA9IG9wdHMuYml0cztcbiAgICAgIC8vIHN0YXRlLmxlbmNvZGUgPSBzdGF0ZS5uZXh0O1xuXG4gICAgICBpZiAocmV0KSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgbGl0ZXJhbC9sZW5ndGhzIHNldCc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBzdGF0ZS5kaXN0Yml0cyA9IDY7XG4gICAgICAvL3N0YXRlLmRpc3Rjb2RlLmNvcHkoc3RhdGUuY29kZXMpO1xuICAgICAgLy8gU3dpdGNoIHRvIHVzZSBkeW5hbWljIHRhYmxlXG4gICAgICBzdGF0ZS5kaXN0Y29kZSA9IHN0YXRlLmRpc3RkeW47XG4gICAgICBvcHRzID0geyBiaXRzOiBzdGF0ZS5kaXN0Yml0cyB9O1xuICAgICAgcmV0ID0gaW5mbGF0ZV90YWJsZShESVNUUywgc3RhdGUubGVucywgc3RhdGUubmxlbiwgc3RhdGUubmRpc3QsIHN0YXRlLmRpc3Rjb2RlLCAwLCBzdGF0ZS53b3JrLCBvcHRzKTtcbiAgICAgIC8vIFdlIGhhdmUgc2VwYXJhdGUgdGFibGVzICYgbm8gcG9pbnRlcnMuIDIgY29tbWVudGVkIGxpbmVzIGJlbG93IG5vdCBuZWVkZWQuXG4gICAgICAvLyBzdGF0ZS5uZXh0X2luZGV4ID0gb3B0cy50YWJsZV9pbmRleDtcbiAgICAgIHN0YXRlLmRpc3RiaXRzID0gb3B0cy5iaXRzO1xuICAgICAgLy8gc3RhdGUuZGlzdGNvZGUgPSBzdGF0ZS5uZXh0O1xuXG4gICAgICBpZiAocmV0KSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2VzIHNldCc7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgJ2luZmxhdGU6ICAgICAgIGNvZGVzIG9rXFxuJykpO1xuICAgICAgc3RhdGUubW9kZSA9IExFTl87XG4gICAgICBpZiAoZmx1c2ggPT09IFpfVFJFRVMpIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgY2FzZSBMRU5fOlxuICAgICAgc3RhdGUubW9kZSA9IExFTjtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIExFTjpcbiAgICAgIGlmIChoYXZlID49IDYgJiYgbGVmdCA+PSAyNTgpIHtcbiAgICAgICAgLy8tLS0gUkVTVE9SRSgpIC0tLVxuICAgICAgICBzdHJtLm5leHRfb3V0ID0gcHV0O1xuICAgICAgICBzdHJtLmF2YWlsX291dCA9IGxlZnQ7XG4gICAgICAgIHN0cm0ubmV4dF9pbiA9IG5leHQ7XG4gICAgICAgIHN0cm0uYXZhaWxfaW4gPSBoYXZlO1xuICAgICAgICBzdGF0ZS5ob2xkID0gaG9sZDtcbiAgICAgICAgc3RhdGUuYml0cyA9IGJpdHM7XG4gICAgICAgIC8vLS0tXG4gICAgICAgIGluZmxhdGVfZmFzdChzdHJtLCBfb3V0KTtcbiAgICAgICAgLy8tLS0gTE9BRCgpIC0tLVxuICAgICAgICBwdXQgPSBzdHJtLm5leHRfb3V0O1xuICAgICAgICBvdXRwdXQgPSBzdHJtLm91dHB1dDtcbiAgICAgICAgbGVmdCA9IHN0cm0uYXZhaWxfb3V0O1xuICAgICAgICBuZXh0ID0gc3RybS5uZXh0X2luO1xuICAgICAgICBpbnB1dCA9IHN0cm0uaW5wdXQ7XG4gICAgICAgIGhhdmUgPSBzdHJtLmF2YWlsX2luO1xuICAgICAgICBob2xkID0gc3RhdGUuaG9sZDtcbiAgICAgICAgYml0cyA9IHN0YXRlLmJpdHM7XG4gICAgICAgIC8vLS0tXG5cbiAgICAgICAgaWYgKHN0YXRlLm1vZGUgPT09IFRZUEUpIHtcbiAgICAgICAgICBzdGF0ZS5iYWNrID0gLTE7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBzdGF0ZS5iYWNrID0gMDtcbiAgICAgIGZvciAoOzspIHtcbiAgICAgICAgaGVyZSA9IHN0YXRlLmxlbmNvZGVbaG9sZCAmICgoMSA8PCBzdGF0ZS5sZW5iaXRzKSAtIDEpXTsgIC8qQklUUyhzdGF0ZS5sZW5iaXRzKSovXG4gICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0O1xuICAgICAgICBoZXJlX29wID0gKGhlcmUgPj4+IDE2KSAmIDB4ZmY7XG4gICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjtcblxuICAgICAgICBpZiAoaGVyZV9iaXRzIDw9IGJpdHMpIHsgYnJlYWs7IH1cbiAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAvLy0tLS8vXG4gICAgICB9XG4gICAgICBpZiAoaGVyZV9vcCAmJiAoaGVyZV9vcCAmIDB4ZjApID09PSAwKSB7XG4gICAgICAgIGxhc3RfYml0cyA9IGhlcmVfYml0cztcbiAgICAgICAgbGFzdF9vcCA9IGhlcmVfb3A7XG4gICAgICAgIGxhc3RfdmFsID0gaGVyZV92YWw7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICBoZXJlID0gc3RhdGUubGVuY29kZVtsYXN0X3ZhbCArXG4gICAgICAgICAgICAgICAgICAoKGhvbGQgJiAoKDEgPDwgKGxhc3RfYml0cyArIGxhc3Rfb3ApKSAtIDEpKS8qQklUUyhsYXN0LmJpdHMgKyBsYXN0Lm9wKSovID4+IGxhc3RfYml0cyldO1xuICAgICAgICAgIGhlcmVfYml0cyA9IGhlcmUgPj4+IDI0O1xuICAgICAgICAgIGhlcmVfb3AgPSAoaGVyZSA+Pj4gMTYpICYgMHhmZjtcbiAgICAgICAgICBoZXJlX3ZhbCA9IGhlcmUgJiAweGZmZmY7XG5cbiAgICAgICAgICBpZiAoKGxhc3RfYml0cyArIGhlcmVfYml0cykgPD0gYml0cykgeyBicmVhazsgfVxuICAgICAgICAgIC8vLS0tIFBVTExCWVRFKCkgLS0tLy9cbiAgICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgICBoYXZlLS07XG4gICAgICAgICAgaG9sZCArPSBpbnB1dFtuZXh0KytdIDw8IGJpdHM7XG4gICAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAgIC8vLS0tLy9cbiAgICAgICAgfVxuICAgICAgICAvLy0tLSBEUk9QQklUUyhsYXN0LmJpdHMpIC0tLS8vXG4gICAgICAgIGhvbGQgPj4+PSBsYXN0X2JpdHM7XG4gICAgICAgIGJpdHMgLT0gbGFzdF9iaXRzO1xuICAgICAgICAvLy0tLS8vXG4gICAgICAgIHN0YXRlLmJhY2sgKz0gbGFzdF9iaXRzO1xuICAgICAgfVxuICAgICAgLy8tLS0gRFJPUEJJVFMoaGVyZS5iaXRzKSAtLS0vL1xuICAgICAgaG9sZCA+Pj49IGhlcmVfYml0cztcbiAgICAgIGJpdHMgLT0gaGVyZV9iaXRzO1xuICAgICAgLy8tLS0vL1xuICAgICAgc3RhdGUuYmFjayArPSBoZXJlX2JpdHM7XG4gICAgICBzdGF0ZS5sZW5ndGggPSBoZXJlX3ZhbDtcbiAgICAgIGlmIChoZXJlX29wID09PSAwKSB7XG4gICAgICAgIC8vVHJhY2V2digoc3RkZXJyLCBoZXJlLnZhbCA+PSAweDIwICYmIGhlcmUudmFsIDwgMHg3ZiA/XG4gICAgICAgIC8vICAgICAgICBcImluZmxhdGU6ICAgICAgICAgbGl0ZXJhbCAnJWMnXFxuXCIgOlxuICAgICAgICAvLyAgICAgICAgXCJpbmZsYXRlOiAgICAgICAgIGxpdGVyYWwgMHglMDJ4XFxuXCIsIGhlcmUudmFsKSk7XG4gICAgICAgIHN0YXRlLm1vZGUgPSBMSVQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKGhlcmVfb3AgJiAzMikge1xuICAgICAgICAvL1RyYWNldnYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICAgIGVuZCBvZiBibG9ja1xcblwiKSk7XG4gICAgICAgIHN0YXRlLmJhY2sgPSAtMTtcbiAgICAgICAgc3RhdGUubW9kZSA9IFRZUEU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgaWYgKGhlcmVfb3AgJiA2NCkge1xuICAgICAgICBzdHJtLm1zZyA9ICdpbnZhbGlkIGxpdGVyYWwvbGVuZ3RoIGNvZGUnO1xuICAgICAgICBzdGF0ZS5tb2RlID0gQkFEO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHN0YXRlLmV4dHJhID0gaGVyZV9vcCAmIDE1O1xuICAgICAgc3RhdGUubW9kZSA9IExFTkVYVDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIExFTkVYVDpcbiAgICAgIGlmIChzdGF0ZS5leHRyYSkge1xuICAgICAgICAvLz09PSBORUVEQklUUyhzdGF0ZS5leHRyYSk7XG4gICAgICAgIG4gPSBzdGF0ZS5leHRyYTtcbiAgICAgICAgd2hpbGUgKGJpdHMgPCBuKSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICAvLz09PS8vXG4gICAgICAgIHN0YXRlLmxlbmd0aCArPSBob2xkICYgKCgxIDw8IHN0YXRlLmV4dHJhKSAtIDEpLypCSVRTKHN0YXRlLmV4dHJhKSovO1xuICAgICAgICAvLy0tLSBEUk9QQklUUyhzdGF0ZS5leHRyYSkgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IHN0YXRlLmV4dHJhO1xuICAgICAgICBiaXRzIC09IHN0YXRlLmV4dHJhO1xuICAgICAgICAvLy0tLS8vXG4gICAgICAgIHN0YXRlLmJhY2sgKz0gc3RhdGUuZXh0cmE7XG4gICAgICB9XG4gICAgICAvL1RyYWNldnYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgICAgICAgIGxlbmd0aCAldVxcblwiLCBzdGF0ZS5sZW5ndGgpKTtcbiAgICAgIHN0YXRlLndhcyA9IHN0YXRlLmxlbmd0aDtcbiAgICAgIHN0YXRlLm1vZGUgPSBESVNUO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgRElTVDpcbiAgICAgIGZvciAoOzspIHtcbiAgICAgICAgaGVyZSA9IHN0YXRlLmRpc3Rjb2RlW2hvbGQgJiAoKDEgPDwgc3RhdGUuZGlzdGJpdHMpIC0gMSldOy8qQklUUyhzdGF0ZS5kaXN0Yml0cykqL1xuICAgICAgICBoZXJlX2JpdHMgPSBoZXJlID4+PiAyNDtcbiAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmO1xuICAgICAgICBoZXJlX3ZhbCA9IGhlcmUgJiAweGZmZmY7XG5cbiAgICAgICAgaWYgKChoZXJlX2JpdHMpIDw9IGJpdHMpIHsgYnJlYWs7IH1cbiAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICBpZiAoaGF2ZSA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgICAgaGF2ZS0tO1xuICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgYml0cyArPSA4O1xuICAgICAgICAvLy0tLS8vXG4gICAgICB9XG4gICAgICBpZiAoKGhlcmVfb3AgJiAweGYwKSA9PT0gMCkge1xuICAgICAgICBsYXN0X2JpdHMgPSBoZXJlX2JpdHM7XG4gICAgICAgIGxhc3Rfb3AgPSBoZXJlX29wO1xuICAgICAgICBsYXN0X3ZhbCA9IGhlcmVfdmFsO1xuICAgICAgICBmb3IgKDs7KSB7XG4gICAgICAgICAgaGVyZSA9IHN0YXRlLmRpc3Rjb2RlW2xhc3RfdmFsICtcbiAgICAgICAgICAgICAgICAgICgoaG9sZCAmICgoMSA8PCAobGFzdF9iaXRzICsgbGFzdF9vcCkpIC0gMSkpLypCSVRTKGxhc3QuYml0cyArIGxhc3Qub3ApKi8gPj4gbGFzdF9iaXRzKV07XG4gICAgICAgICAgaGVyZV9iaXRzID0gaGVyZSA+Pj4gMjQ7XG4gICAgICAgICAgaGVyZV9vcCA9IChoZXJlID4+PiAxNikgJiAweGZmO1xuICAgICAgICAgIGhlcmVfdmFsID0gaGVyZSAmIDB4ZmZmZjtcblxuICAgICAgICAgIGlmICgobGFzdF9iaXRzICsgaGVyZV9iaXRzKSA8PSBiaXRzKSB7IGJyZWFrOyB9XG4gICAgICAgICAgLy8tLS0gUFVMTEJZVEUoKSAtLS0vL1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgICAgLy8tLS0vL1xuICAgICAgICB9XG4gICAgICAgIC8vLS0tIERST1BCSVRTKGxhc3QuYml0cykgLS0tLy9cbiAgICAgICAgaG9sZCA+Pj49IGxhc3RfYml0cztcbiAgICAgICAgYml0cyAtPSBsYXN0X2JpdHM7XG4gICAgICAgIC8vLS0tLy9cbiAgICAgICAgc3RhdGUuYmFjayArPSBsYXN0X2JpdHM7XG4gICAgICB9XG4gICAgICAvLy0tLSBEUk9QQklUUyhoZXJlLmJpdHMpIC0tLS8vXG4gICAgICBob2xkID4+Pj0gaGVyZV9iaXRzO1xuICAgICAgYml0cyAtPSBoZXJlX2JpdHM7XG4gICAgICAvLy0tLS8vXG4gICAgICBzdGF0ZS5iYWNrICs9IGhlcmVfYml0cztcbiAgICAgIGlmIChoZXJlX29wICYgNjQpIHtcbiAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZSBjb2RlJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBzdGF0ZS5vZmZzZXQgPSBoZXJlX3ZhbDtcbiAgICAgIHN0YXRlLmV4dHJhID0gKGhlcmVfb3ApICYgMTU7XG4gICAgICBzdGF0ZS5tb2RlID0gRElTVEVYVDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIERJU1RFWFQ6XG4gICAgICBpZiAoc3RhdGUuZXh0cmEpIHtcbiAgICAgICAgLy89PT0gTkVFREJJVFMoc3RhdGUuZXh0cmEpO1xuICAgICAgICBuID0gc3RhdGUuZXh0cmE7XG4gICAgICAgIHdoaWxlIChiaXRzIDwgbikge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICBob2xkICs9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0vL1xuICAgICAgICBzdGF0ZS5vZmZzZXQgKz0gaG9sZCAmICgoMSA8PCBzdGF0ZS5leHRyYSkgLSAxKS8qQklUUyhzdGF0ZS5leHRyYSkqLztcbiAgICAgICAgLy8tLS0gRFJPUEJJVFMoc3RhdGUuZXh0cmEpIC0tLS8vXG4gICAgICAgIGhvbGQgPj4+PSBzdGF0ZS5leHRyYTtcbiAgICAgICAgYml0cyAtPSBzdGF0ZS5leHRyYTtcbiAgICAgICAgLy8tLS0vL1xuICAgICAgICBzdGF0ZS5iYWNrICs9IHN0YXRlLmV4dHJhO1xuICAgICAgfVxuLy8jaWZkZWYgSU5GTEFURV9TVFJJQ1RcbiAgICAgIGlmIChzdGF0ZS5vZmZzZXQgPiBzdGF0ZS5kbWF4KSB7XG4gICAgICAgIHN0cm0ubXNnID0gJ2ludmFsaWQgZGlzdGFuY2UgdG9vIGZhciBiYWNrJztcbiAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4vLyNlbmRpZlxuICAgICAgLy9UcmFjZXZ2KChzdGRlcnIsIFwiaW5mbGF0ZTogICAgICAgICBkaXN0YW5jZSAldVxcblwiLCBzdGF0ZS5vZmZzZXQpKTtcbiAgICAgIHN0YXRlLm1vZGUgPSBNQVRDSDtcbiAgICAgIC8qIGZhbGxzIHRocm91Z2ggKi9cbiAgICBjYXNlIE1BVENIOlxuICAgICAgaWYgKGxlZnQgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICBjb3B5ID0gX291dCAtIGxlZnQ7XG4gICAgICBpZiAoc3RhdGUub2Zmc2V0ID4gY29weSkgeyAgICAgICAgIC8qIGNvcHkgZnJvbSB3aW5kb3cgKi9cbiAgICAgICAgY29weSA9IHN0YXRlLm9mZnNldCAtIGNvcHk7XG4gICAgICAgIGlmIChjb3B5ID4gc3RhdGUud2hhdmUpIHtcbiAgICAgICAgICBpZiAoc3RhdGUuc2FuZSkge1xuICAgICAgICAgICAgc3RybS5tc2cgPSAnaW52YWxpZCBkaXN0YW5jZSB0b28gZmFyIGJhY2snO1xuICAgICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbi8vICghKSBUaGlzIGJsb2NrIGlzIGRpc2FibGVkIGluIHpsaWIgZGVmYWlsdHMsXG4vLyBkb24ndCBlbmFibGUgaXQgZm9yIGJpbmFyeSBjb21wYXRpYmlsaXR5XG4vLyNpZmRlZiBJTkZMQVRFX0FMTE9XX0lOVkFMSURfRElTVEFOQ0VfVE9PRkFSX0FSUlJcbi8vICAgICAgICAgIFRyYWNlKChzdGRlcnIsIFwiaW5mbGF0ZS5jIHRvbyBmYXJcXG5cIikpO1xuLy8gICAgICAgICAgY29weSAtPSBzdGF0ZS53aGF2ZTtcbi8vICAgICAgICAgIGlmIChjb3B5ID4gc3RhdGUubGVuZ3RoKSB7IGNvcHkgPSBzdGF0ZS5sZW5ndGg7IH1cbi8vICAgICAgICAgIGlmIChjb3B5ID4gbGVmdCkgeyBjb3B5ID0gbGVmdDsgfVxuLy8gICAgICAgICAgbGVmdCAtPSBjb3B5O1xuLy8gICAgICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7XG4vLyAgICAgICAgICBkbyB7XG4vLyAgICAgICAgICAgIG91dHB1dFtwdXQrK10gPSAwO1xuLy8gICAgICAgICAgfSB3aGlsZSAoLS1jb3B5KTtcbi8vICAgICAgICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApIHsgc3RhdGUubW9kZSA9IExFTjsgfVxuLy8gICAgICAgICAgYnJlYWs7XG4vLyNlbmRpZlxuICAgICAgICB9XG4gICAgICAgIGlmIChjb3B5ID4gc3RhdGUud25leHQpIHtcbiAgICAgICAgICBjb3B5IC09IHN0YXRlLnduZXh0O1xuICAgICAgICAgIGZyb20gPSBzdGF0ZS53c2l6ZSAtIGNvcHk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgZnJvbSA9IHN0YXRlLnduZXh0IC0gY29weTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY29weSA+IHN0YXRlLmxlbmd0aCkgeyBjb3B5ID0gc3RhdGUubGVuZ3RoOyB9XG4gICAgICAgIGZyb21fc291cmNlID0gc3RhdGUud2luZG93O1xuICAgICAgfVxuICAgICAgZWxzZSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyogY29weSBmcm9tIG91dHB1dCAqL1xuICAgICAgICBmcm9tX3NvdXJjZSA9IG91dHB1dDtcbiAgICAgICAgZnJvbSA9IHB1dCAtIHN0YXRlLm9mZnNldDtcbiAgICAgICAgY29weSA9IHN0YXRlLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIGlmIChjb3B5ID4gbGVmdCkgeyBjb3B5ID0gbGVmdDsgfVxuICAgICAgbGVmdCAtPSBjb3B5O1xuICAgICAgc3RhdGUubGVuZ3RoIC09IGNvcHk7XG4gICAgICBkbyB7XG4gICAgICAgIG91dHB1dFtwdXQrK10gPSBmcm9tX3NvdXJjZVtmcm9tKytdO1xuICAgICAgfSB3aGlsZSAoLS1jb3B5KTtcbiAgICAgIGlmIChzdGF0ZS5sZW5ndGggPT09IDApIHsgc3RhdGUubW9kZSA9IExFTjsgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSBMSVQ6XG4gICAgICBpZiAobGVmdCA9PT0gMCkgeyBicmVhayBpbmZfbGVhdmU7IH1cbiAgICAgIG91dHB1dFtwdXQrK10gPSBzdGF0ZS5sZW5ndGg7XG4gICAgICBsZWZ0LS07XG4gICAgICBzdGF0ZS5tb2RlID0gTEVOO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBDSEVDSzpcbiAgICAgIGlmIChzdGF0ZS53cmFwKSB7XG4gICAgICAgIC8vPT09IE5FRURCSVRTKDMyKTtcbiAgICAgICAgd2hpbGUgKGJpdHMgPCAzMikge1xuICAgICAgICAgIGlmIChoYXZlID09PSAwKSB7IGJyZWFrIGluZl9sZWF2ZTsgfVxuICAgICAgICAgIGhhdmUtLTtcbiAgICAgICAgICAvLyBVc2UgJ3wnIGluc2RlYWQgb2YgJysnIHRvIG1ha2Ugc3VyZSB0aGF0IHJlc3VsdCBpcyBzaWduZWRcbiAgICAgICAgICBob2xkIHw9IGlucHV0W25leHQrK10gPDwgYml0cztcbiAgICAgICAgICBiaXRzICs9IDg7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0vL1xuICAgICAgICBfb3V0IC09IGxlZnQ7XG4gICAgICAgIHN0cm0udG90YWxfb3V0ICs9IF9vdXQ7XG4gICAgICAgIHN0YXRlLnRvdGFsICs9IF9vdXQ7XG4gICAgICAgIGlmIChfb3V0KSB7XG4gICAgICAgICAgc3RybS5hZGxlciA9IHN0YXRlLmNoZWNrID1cbiAgICAgICAgICAgICAgLypVUERBVEUoc3RhdGUuY2hlY2ssIHB1dCAtIF9vdXQsIF9vdXQpOyovXG4gICAgICAgICAgICAgIChzdGF0ZS5mbGFncyA/IGNyYzMyKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHB1dCAtIF9vdXQpIDogYWRsZXIzMihzdGF0ZS5jaGVjaywgb3V0cHV0LCBfb3V0LCBwdXQgLSBfb3V0KSk7XG5cbiAgICAgICAgfVxuICAgICAgICBfb3V0ID0gbGVmdDtcbiAgICAgICAgLy8gTkI6IGNyYzMyIHN0b3JlZCBhcyBzaWduZWQgMzItYml0IGludCwgenN3YXAzMiByZXR1cm5zIHNpZ25lZCB0b29cbiAgICAgICAgaWYgKChzdGF0ZS5mbGFncyA/IGhvbGQgOiB6c3dhcDMyKGhvbGQpKSAhPT0gc3RhdGUuY2hlY2spIHtcbiAgICAgICAgICBzdHJtLm1zZyA9ICdpbmNvcnJlY3QgZGF0YSBjaGVjayc7XG4gICAgICAgICAgc3RhdGUubW9kZSA9IEJBRDtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLz09PSBJTklUQklUUygpO1xuICAgICAgICBob2xkID0gMDtcbiAgICAgICAgYml0cyA9IDA7XG4gICAgICAgIC8vPT09Ly9cbiAgICAgICAgLy9UcmFjZXYoKHN0ZGVyciwgXCJpbmZsYXRlOiAgIGNoZWNrIG1hdGNoZXMgdHJhaWxlclxcblwiKSk7XG4gICAgICB9XG4gICAgICBzdGF0ZS5tb2RlID0gTEVOR1RIO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgTEVOR1RIOlxuICAgICAgaWYgKHN0YXRlLndyYXAgJiYgc3RhdGUuZmxhZ3MpIHtcbiAgICAgICAgLy89PT0gTkVFREJJVFMoMzIpO1xuICAgICAgICB3aGlsZSAoYml0cyA8IDMyKSB7XG4gICAgICAgICAgaWYgKGhhdmUgPT09IDApIHsgYnJlYWsgaW5mX2xlYXZlOyB9XG4gICAgICAgICAgaGF2ZS0tO1xuICAgICAgICAgIGhvbGQgKz0gaW5wdXRbbmV4dCsrXSA8PCBiaXRzO1xuICAgICAgICAgIGJpdHMgKz0gODtcbiAgICAgICAgfVxuICAgICAgICAvLz09PS8vXG4gICAgICAgIGlmIChob2xkICE9PSAoc3RhdGUudG90YWwgJiAweGZmZmZmZmZmKSkge1xuICAgICAgICAgIHN0cm0ubXNnID0gJ2luY29ycmVjdCBsZW5ndGggY2hlY2snO1xuICAgICAgICAgIHN0YXRlLm1vZGUgPSBCQUQ7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgLy89PT0gSU5JVEJJVFMoKTtcbiAgICAgICAgaG9sZCA9IDA7XG4gICAgICAgIGJpdHMgPSAwO1xuICAgICAgICAvLz09PS8vXG4gICAgICAgIC8vVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICBsZW5ndGggbWF0Y2hlcyB0cmFpbGVyXFxuXCIpKTtcbiAgICAgIH1cbiAgICAgIHN0YXRlLm1vZGUgPSBET05FO1xuICAgICAgLyogZmFsbHMgdGhyb3VnaCAqL1xuICAgIGNhc2UgRE9ORTpcbiAgICAgIHJldCA9IFpfU1RSRUFNX0VORDtcbiAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICBjYXNlIEJBRDpcbiAgICAgIHJldCA9IFpfREFUQV9FUlJPUjtcbiAgICAgIGJyZWFrIGluZl9sZWF2ZTtcbiAgICBjYXNlIE1FTTpcbiAgICAgIHJldHVybiBaX01FTV9FUlJPUjtcbiAgICBjYXNlIFNZTkM6XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgICB9XG4gIH1cblxuICAvLyBpbmZfbGVhdmUgPC0gaGVyZSBpcyByZWFsIHBsYWNlIGZvciBcImdvdG8gaW5mX2xlYXZlXCIsIGVtdWxhdGVkIHZpYSBcImJyZWFrIGluZl9sZWF2ZVwiXG5cbiAgLypcbiAgICAgUmV0dXJuIGZyb20gaW5mbGF0ZSgpLCB1cGRhdGluZyB0aGUgdG90YWwgY291bnRzIGFuZCB0aGUgY2hlY2sgdmFsdWUuXG4gICAgIElmIHRoZXJlIHdhcyBubyBwcm9ncmVzcyBkdXJpbmcgdGhlIGluZmxhdGUoKSBjYWxsLCByZXR1cm4gYSBidWZmZXJcbiAgICAgZXJyb3IuICBDYWxsIHVwZGF0ZXdpbmRvdygpIHRvIGNyZWF0ZSBhbmQvb3IgdXBkYXRlIHRoZSB3aW5kb3cgc3RhdGUuXG4gICAgIE5vdGU6IGEgbWVtb3J5IGVycm9yIGZyb20gaW5mbGF0ZSgpIGlzIG5vbi1yZWNvdmVyYWJsZS5cbiAgICovXG5cbiAgLy8tLS0gUkVTVE9SRSgpIC0tLVxuICBzdHJtLm5leHRfb3V0ID0gcHV0O1xuICBzdHJtLmF2YWlsX291dCA9IGxlZnQ7XG4gIHN0cm0ubmV4dF9pbiA9IG5leHQ7XG4gIHN0cm0uYXZhaWxfaW4gPSBoYXZlO1xuICBzdGF0ZS5ob2xkID0gaG9sZDtcbiAgc3RhdGUuYml0cyA9IGJpdHM7XG4gIC8vLS0tXG5cbiAgaWYgKHN0YXRlLndzaXplIHx8IChfb3V0ICE9PSBzdHJtLmF2YWlsX291dCAmJiBzdGF0ZS5tb2RlIDwgQkFEICYmXG4gICAgICAgICAgICAgICAgICAgICAgKHN0YXRlLm1vZGUgPCBDSEVDSyB8fCBmbHVzaCAhPT0gWl9GSU5JU0gpKSkge1xuICAgIGlmICh1cGRhdGV3aW5kb3coc3RybSwgc3RybS5vdXRwdXQsIHN0cm0ubmV4dF9vdXQsIF9vdXQgLSBzdHJtLmF2YWlsX291dCkpIHtcbiAgICAgIHN0YXRlLm1vZGUgPSBNRU07XG4gICAgICByZXR1cm4gWl9NRU1fRVJST1I7XG4gICAgfVxuICB9XG4gIF9pbiAtPSBzdHJtLmF2YWlsX2luO1xuICBfb3V0IC09IHN0cm0uYXZhaWxfb3V0O1xuICBzdHJtLnRvdGFsX2luICs9IF9pbjtcbiAgc3RybS50b3RhbF9vdXQgKz0gX291dDtcbiAgc3RhdGUudG90YWwgKz0gX291dDtcbiAgaWYgKHN0YXRlLndyYXAgJiYgX291dCkge1xuICAgIHN0cm0uYWRsZXIgPSBzdGF0ZS5jaGVjayA9IC8qVVBEQVRFKHN0YXRlLmNoZWNrLCBzdHJtLm5leHRfb3V0IC0gX291dCwgX291dCk7Ki9cbiAgICAgIChzdGF0ZS5mbGFncyA/IGNyYzMyKHN0YXRlLmNoZWNrLCBvdXRwdXQsIF9vdXQsIHN0cm0ubmV4dF9vdXQgLSBfb3V0KSA6IGFkbGVyMzIoc3RhdGUuY2hlY2ssIG91dHB1dCwgX291dCwgc3RybS5uZXh0X291dCAtIF9vdXQpKTtcbiAgfVxuICBzdHJtLmRhdGFfdHlwZSA9IHN0YXRlLmJpdHMgKyAoc3RhdGUubGFzdCA/IDY0IDogMCkgK1xuICAgICAgICAgICAgICAgICAgICAoc3RhdGUubW9kZSA9PT0gVFlQRSA/IDEyOCA6IDApICtcbiAgICAgICAgICAgICAgICAgICAgKHN0YXRlLm1vZGUgPT09IExFTl8gfHwgc3RhdGUubW9kZSA9PT0gQ09QWV8gPyAyNTYgOiAwKTtcbiAgaWYgKCgoX2luID09PSAwICYmIF9vdXQgPT09IDApIHx8IGZsdXNoID09PSBaX0ZJTklTSCkgJiYgcmV0ID09PSBaX09LKSB7XG4gICAgcmV0ID0gWl9CVUZfRVJST1I7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuZnVuY3Rpb24gaW5mbGF0ZUVuZChzdHJtKSB7XG5cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlIC8qfHwgc3RybS0+emZyZWUgPT0gKGZyZWVfZnVuYykwKi8pIHtcbiAgICByZXR1cm4gWl9TVFJFQU1fRVJST1I7XG4gIH1cblxuICB2YXIgc3RhdGUgPSBzdHJtLnN0YXRlO1xuICBpZiAoc3RhdGUud2luZG93KSB7XG4gICAgc3RhdGUud2luZG93ID0gbnVsbDtcbiAgfVxuICBzdHJtLnN0YXRlID0gbnVsbDtcbiAgcmV0dXJuIFpfT0s7XG59XG5cbmZ1bmN0aW9uIGluZmxhdGVHZXRIZWFkZXIoc3RybSwgaGVhZCkge1xuICB2YXIgc3RhdGU7XG5cbiAgLyogY2hlY2sgc3RhdGUgKi9cbiAgaWYgKCFzdHJtIHx8ICFzdHJtLnN0YXRlKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG4gIGlmICgoc3RhdGUud3JhcCAmIDIpID09PSAwKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuXG4gIC8qIHNhdmUgaGVhZGVyIHN0cnVjdHVyZSAqL1xuICBzdGF0ZS5oZWFkID0gaGVhZDtcbiAgaGVhZC5kb25lID0gZmFsc2U7XG4gIHJldHVybiBaX09LO1xufVxuXG5mdW5jdGlvbiBpbmZsYXRlU2V0RGljdGlvbmFyeShzdHJtLCBkaWN0aW9uYXJ5KSB7XG4gIHZhciBkaWN0TGVuZ3RoID0gZGljdGlvbmFyeS5sZW5ndGg7XG5cbiAgdmFyIHN0YXRlO1xuICB2YXIgZGljdGlkO1xuICB2YXIgcmV0O1xuXG4gIC8qIGNoZWNrIHN0YXRlICovXG4gIGlmICghc3RybSAvKiA9PSBaX05VTEwgKi8gfHwgIXN0cm0uc3RhdGUgLyogPT0gWl9OVUxMICovKSB7IHJldHVybiBaX1NUUkVBTV9FUlJPUjsgfVxuICBzdGF0ZSA9IHN0cm0uc3RhdGU7XG5cbiAgaWYgKHN0YXRlLndyYXAgIT09IDAgJiYgc3RhdGUubW9kZSAhPT0gRElDVCkge1xuICAgIHJldHVybiBaX1NUUkVBTV9FUlJPUjtcbiAgfVxuXG4gIC8qIGNoZWNrIGZvciBjb3JyZWN0IGRpY3Rpb25hcnkgaWRlbnRpZmllciAqL1xuICBpZiAoc3RhdGUubW9kZSA9PT0gRElDVCkge1xuICAgIGRpY3RpZCA9IDE7IC8qIGFkbGVyMzIoMCwgbnVsbCwgMCkqL1xuICAgIC8qIGRpY3RpZCA9IGFkbGVyMzIoZGljdGlkLCBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoKTsgKi9cbiAgICBkaWN0aWQgPSBhZGxlcjMyKGRpY3RpZCwgZGljdGlvbmFyeSwgZGljdExlbmd0aCwgMCk7XG4gICAgaWYgKGRpY3RpZCAhPT0gc3RhdGUuY2hlY2spIHtcbiAgICAgIHJldHVybiBaX0RBVEFfRVJST1I7XG4gICAgfVxuICB9XG4gIC8qIGNvcHkgZGljdGlvbmFyeSB0byB3aW5kb3cgdXNpbmcgdXBkYXRld2luZG93KCksIHdoaWNoIHdpbGwgYW1lbmQgdGhlXG4gICBleGlzdGluZyBkaWN0aW9uYXJ5IGlmIGFwcHJvcHJpYXRlICovXG4gIHJldCA9IHVwZGF0ZXdpbmRvdyhzdHJtLCBkaWN0aW9uYXJ5LCBkaWN0TGVuZ3RoLCBkaWN0TGVuZ3RoKTtcbiAgaWYgKHJldCkge1xuICAgIHN0YXRlLm1vZGUgPSBNRU07XG4gICAgcmV0dXJuIFpfTUVNX0VSUk9SO1xuICB9XG4gIHN0YXRlLmhhdmVkaWN0ID0gMTtcbiAgLy8gVHJhY2V2KChzdGRlcnIsIFwiaW5mbGF0ZTogICBkaWN0aW9uYXJ5IHNldFxcblwiKSk7XG4gIHJldHVybiBaX09LO1xufVxuXG5leHBvcnRzLmluZmxhdGVSZXNldCA9IGluZmxhdGVSZXNldDtcbmV4cG9ydHMuaW5mbGF0ZVJlc2V0MiA9IGluZmxhdGVSZXNldDI7XG5leHBvcnRzLmluZmxhdGVSZXNldEtlZXAgPSBpbmZsYXRlUmVzZXRLZWVwO1xuZXhwb3J0cy5pbmZsYXRlSW5pdCA9IGluZmxhdGVJbml0O1xuZXhwb3J0cy5pbmZsYXRlSW5pdDIgPSBpbmZsYXRlSW5pdDI7XG5leHBvcnRzLmluZmxhdGUgPSBpbmZsYXRlO1xuZXhwb3J0cy5pbmZsYXRlRW5kID0gaW5mbGF0ZUVuZDtcbmV4cG9ydHMuaW5mbGF0ZUdldEhlYWRlciA9IGluZmxhdGVHZXRIZWFkZXI7XG5leHBvcnRzLmluZmxhdGVTZXREaWN0aW9uYXJ5ID0gaW5mbGF0ZVNldERpY3Rpb25hcnk7XG5leHBvcnRzLmluZmxhdGVJbmZvID0gJ3Bha28gaW5mbGF0ZSAoZnJvbSBOb2RlY2EgcHJvamVjdCknO1xuXG4vKiBOb3QgaW1wbGVtZW50ZWRcbmV4cG9ydHMuaW5mbGF0ZUNvcHkgPSBpbmZsYXRlQ29weTtcbmV4cG9ydHMuaW5mbGF0ZUdldERpY3Rpb25hcnkgPSBpbmZsYXRlR2V0RGljdGlvbmFyeTtcbmV4cG9ydHMuaW5mbGF0ZU1hcmsgPSBpbmZsYXRlTWFyaztcbmV4cG9ydHMuaW5mbGF0ZVByaW1lID0gaW5mbGF0ZVByaW1lO1xuZXhwb3J0cy5pbmZsYXRlU3luYyA9IGluZmxhdGVTeW5jO1xuZXhwb3J0cy5pbmZsYXRlU3luY1BvaW50ID0gaW5mbGF0ZVN5bmNQb2ludDtcbmV4cG9ydHMuaW5mbGF0ZVVuZGVybWluZSA9IGluZmxhdGVVbmRlcm1pbmU7XG4qL1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5cbnZhciB1dGlscyA9IHJlcXVpcmUoJy4uL3V0aWxzL2NvbW1vbicpO1xuXG52YXIgTUFYQklUUyA9IDE1O1xudmFyIEVOT1VHSF9MRU5TID0gODUyO1xudmFyIEVOT1VHSF9ESVNUUyA9IDU5Mjtcbi8vdmFyIEVOT1VHSCA9IChFTk9VR0hfTEVOUytFTk9VR0hfRElTVFMpO1xuXG52YXIgQ09ERVMgPSAwO1xudmFyIExFTlMgPSAxO1xudmFyIERJU1RTID0gMjtcblxudmFyIGxiYXNlID0gWyAvKiBMZW5ndGggY29kZXMgMjU3Li4yODUgYmFzZSAqL1xuICAzLCA0LCA1LCA2LCA3LCA4LCA5LCAxMCwgMTEsIDEzLCAxNSwgMTcsIDE5LCAyMywgMjcsIDMxLFxuICAzNSwgNDMsIDUxLCA1OSwgNjcsIDgzLCA5OSwgMTE1LCAxMzEsIDE2MywgMTk1LCAyMjcsIDI1OCwgMCwgMFxuXTtcblxudmFyIGxleHQgPSBbIC8qIExlbmd0aCBjb2RlcyAyNTcuLjI4NSBleHRyYSAqL1xuICAxNiwgMTYsIDE2LCAxNiwgMTYsIDE2LCAxNiwgMTYsIDE3LCAxNywgMTcsIDE3LCAxOCwgMTgsIDE4LCAxOCxcbiAgMTksIDE5LCAxOSwgMTksIDIwLCAyMCwgMjAsIDIwLCAyMSwgMjEsIDIxLCAyMSwgMTYsIDcyLCA3OFxuXTtcblxudmFyIGRiYXNlID0gWyAvKiBEaXN0YW5jZSBjb2RlcyAwLi4yOSBiYXNlICovXG4gIDEsIDIsIDMsIDQsIDUsIDcsIDksIDEzLCAxNywgMjUsIDMzLCA0OSwgNjUsIDk3LCAxMjksIDE5MyxcbiAgMjU3LCAzODUsIDUxMywgNzY5LCAxMDI1LCAxNTM3LCAyMDQ5LCAzMDczLCA0MDk3LCA2MTQ1LFxuICA4MTkzLCAxMjI4OSwgMTYzODUsIDI0NTc3LCAwLCAwXG5dO1xuXG52YXIgZGV4dCA9IFsgLyogRGlzdGFuY2UgY29kZXMgMC4uMjkgZXh0cmEgKi9cbiAgMTYsIDE2LCAxNiwgMTYsIDE3LCAxNywgMTgsIDE4LCAxOSwgMTksIDIwLCAyMCwgMjEsIDIxLCAyMiwgMjIsXG4gIDIzLCAyMywgMjQsIDI0LCAyNSwgMjUsIDI2LCAyNiwgMjcsIDI3LFxuICAyOCwgMjgsIDI5LCAyOSwgNjQsIDY0XG5dO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluZmxhdGVfdGFibGUodHlwZSwgbGVucywgbGVuc19pbmRleCwgY29kZXMsIHRhYmxlLCB0YWJsZV9pbmRleCwgd29yaywgb3B0cylcbntcbiAgdmFyIGJpdHMgPSBvcHRzLmJpdHM7XG4gICAgICAvL2hlcmUgPSBvcHRzLmhlcmU7IC8qIHRhYmxlIGVudHJ5IGZvciBkdXBsaWNhdGlvbiAqL1xuXG4gIHZhciBsZW4gPSAwOyAgICAgICAgICAgICAgIC8qIGEgY29kZSdzIGxlbmd0aCBpbiBiaXRzICovXG4gIHZhciBzeW0gPSAwOyAgICAgICAgICAgICAgIC8qIGluZGV4IG9mIGNvZGUgc3ltYm9scyAqL1xuICB2YXIgbWluID0gMCwgbWF4ID0gMDsgICAgICAgICAgLyogbWluaW11bSBhbmQgbWF4aW11bSBjb2RlIGxlbmd0aHMgKi9cbiAgdmFyIHJvb3QgPSAwOyAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGluZGV4IGJpdHMgZm9yIHJvb3QgdGFibGUgKi9cbiAgdmFyIGN1cnIgPSAwOyAgICAgICAgICAgICAgLyogbnVtYmVyIG9mIGluZGV4IGJpdHMgZm9yIGN1cnJlbnQgdGFibGUgKi9cbiAgdmFyIGRyb3AgPSAwOyAgICAgICAgICAgICAgLyogY29kZSBiaXRzIHRvIGRyb3AgZm9yIHN1Yi10YWJsZSAqL1xuICB2YXIgbGVmdCA9IDA7ICAgICAgICAgICAgICAgICAgIC8qIG51bWJlciBvZiBwcmVmaXggY29kZXMgYXZhaWxhYmxlICovXG4gIHZhciB1c2VkID0gMDsgICAgICAgICAgICAgIC8qIGNvZGUgZW50cmllcyBpbiB0YWJsZSB1c2VkICovXG4gIHZhciBodWZmID0gMDsgICAgICAgICAgICAgIC8qIEh1ZmZtYW4gY29kZSAqL1xuICB2YXIgaW5jcjsgICAgICAgICAgICAgIC8qIGZvciBpbmNyZW1lbnRpbmcgY29kZSwgaW5kZXggKi9cbiAgdmFyIGZpbGw7ICAgICAgICAgICAgICAvKiBpbmRleCBmb3IgcmVwbGljYXRpbmcgZW50cmllcyAqL1xuICB2YXIgbG93OyAgICAgICAgICAgICAgIC8qIGxvdyBiaXRzIGZvciBjdXJyZW50IHJvb3QgZW50cnkgKi9cbiAgdmFyIG1hc2s7ICAgICAgICAgICAgICAvKiBtYXNrIGZvciBsb3cgcm9vdCBiaXRzICovXG4gIHZhciBuZXh0OyAgICAgICAgICAgICAvKiBuZXh0IGF2YWlsYWJsZSBzcGFjZSBpbiB0YWJsZSAqL1xuICB2YXIgYmFzZSA9IG51bGw7ICAgICAvKiBiYXNlIHZhbHVlIHRhYmxlIHRvIHVzZSAqL1xuICB2YXIgYmFzZV9pbmRleCA9IDA7XG4vLyAgdmFyIHNob2V4dHJhOyAgICAvKiBleHRyYSBiaXRzIHRhYmxlIHRvIHVzZSAqL1xuICB2YXIgZW5kOyAgICAgICAgICAgICAgICAgICAgLyogdXNlIGJhc2UgYW5kIGV4dHJhIGZvciBzeW1ib2wgPiBlbmQgKi9cbiAgdmFyIGNvdW50ID0gbmV3IHV0aWxzLkJ1ZjE2KE1BWEJJVFMgKyAxKTsgLy9bTUFYQklUUysxXTsgICAgLyogbnVtYmVyIG9mIGNvZGVzIG9mIGVhY2ggbGVuZ3RoICovXG4gIHZhciBvZmZzID0gbmV3IHV0aWxzLkJ1ZjE2KE1BWEJJVFMgKyAxKTsgLy9bTUFYQklUUysxXTsgICAgIC8qIG9mZnNldHMgaW4gdGFibGUgZm9yIGVhY2ggbGVuZ3RoICovXG4gIHZhciBleHRyYSA9IG51bGw7XG4gIHZhciBleHRyYV9pbmRleCA9IDA7XG5cbiAgdmFyIGhlcmVfYml0cywgaGVyZV9vcCwgaGVyZV92YWw7XG5cbiAgLypcbiAgIFByb2Nlc3MgYSBzZXQgb2YgY29kZSBsZW5ndGhzIHRvIGNyZWF0ZSBhIGNhbm9uaWNhbCBIdWZmbWFuIGNvZGUuICBUaGVcbiAgIGNvZGUgbGVuZ3RocyBhcmUgbGVuc1swLi5jb2Rlcy0xXS4gIEVhY2ggbGVuZ3RoIGNvcnJlc3BvbmRzIHRvIHRoZVxuICAgc3ltYm9scyAwLi5jb2Rlcy0xLiAgVGhlIEh1ZmZtYW4gY29kZSBpcyBnZW5lcmF0ZWQgYnkgZmlyc3Qgc29ydGluZyB0aGVcbiAgIHN5bWJvbHMgYnkgbGVuZ3RoIGZyb20gc2hvcnQgdG8gbG9uZywgYW5kIHJldGFpbmluZyB0aGUgc3ltYm9sIG9yZGVyXG4gICBmb3IgY29kZXMgd2l0aCBlcXVhbCBsZW5ndGhzLiAgVGhlbiB0aGUgY29kZSBzdGFydHMgd2l0aCBhbGwgemVybyBiaXRzXG4gICBmb3IgdGhlIGZpcnN0IGNvZGUgb2YgdGhlIHNob3J0ZXN0IGxlbmd0aCwgYW5kIHRoZSBjb2RlcyBhcmUgaW50ZWdlclxuICAgaW5jcmVtZW50cyBmb3IgdGhlIHNhbWUgbGVuZ3RoLCBhbmQgemVyb3MgYXJlIGFwcGVuZGVkIGFzIHRoZSBsZW5ndGhcbiAgIGluY3JlYXNlcy4gIEZvciB0aGUgZGVmbGF0ZSBmb3JtYXQsIHRoZXNlIGJpdHMgYXJlIHN0b3JlZCBiYWNrd2FyZHNcbiAgIGZyb20gdGhlaXIgbW9yZSBuYXR1cmFsIGludGVnZXIgaW5jcmVtZW50IG9yZGVyaW5nLCBhbmQgc28gd2hlbiB0aGVcbiAgIGRlY29kaW5nIHRhYmxlcyBhcmUgYnVpbHQgaW4gdGhlIGxhcmdlIGxvb3AgYmVsb3csIHRoZSBpbnRlZ2VyIGNvZGVzXG4gICBhcmUgaW5jcmVtZW50ZWQgYmFja3dhcmRzLlxuXG4gICBUaGlzIHJvdXRpbmUgYXNzdW1lcywgYnV0IGRvZXMgbm90IGNoZWNrLCB0aGF0IGFsbCBvZiB0aGUgZW50cmllcyBpblxuICAgbGVuc1tdIGFyZSBpbiB0aGUgcmFuZ2UgMC4uTUFYQklUUy4gIFRoZSBjYWxsZXIgbXVzdCBhc3N1cmUgdGhpcy5cbiAgIDEuLk1BWEJJVFMgaXMgaW50ZXJwcmV0ZWQgYXMgdGhhdCBjb2RlIGxlbmd0aC4gIHplcm8gbWVhbnMgdGhhdCB0aGF0XG4gICBzeW1ib2wgZG9lcyBub3Qgb2NjdXIgaW4gdGhpcyBjb2RlLlxuXG4gICBUaGUgY29kZXMgYXJlIHNvcnRlZCBieSBjb21wdXRpbmcgYSBjb3VudCBvZiBjb2RlcyBmb3IgZWFjaCBsZW5ndGgsXG4gICBjcmVhdGluZyBmcm9tIHRoYXQgYSB0YWJsZSBvZiBzdGFydGluZyBpbmRpY2VzIGZvciBlYWNoIGxlbmd0aCBpbiB0aGVcbiAgIHNvcnRlZCB0YWJsZSwgYW5kIHRoZW4gZW50ZXJpbmcgdGhlIHN5bWJvbHMgaW4gb3JkZXIgaW4gdGhlIHNvcnRlZFxuICAgdGFibGUuICBUaGUgc29ydGVkIHRhYmxlIGlzIHdvcmtbXSwgd2l0aCB0aGF0IHNwYWNlIGJlaW5nIHByb3ZpZGVkIGJ5XG4gICB0aGUgY2FsbGVyLlxuXG4gICBUaGUgbGVuZ3RoIGNvdW50cyBhcmUgdXNlZCBmb3Igb3RoZXIgcHVycG9zZXMgYXMgd2VsbCwgaS5lLiBmaW5kaW5nXG4gICB0aGUgbWluaW11bSBhbmQgbWF4aW11bSBsZW5ndGggY29kZXMsIGRldGVybWluaW5nIGlmIHRoZXJlIGFyZSBhbnlcbiAgIGNvZGVzIGF0IGFsbCwgY2hlY2tpbmcgZm9yIGEgdmFsaWQgc2V0IG9mIGxlbmd0aHMsIGFuZCBsb29raW5nIGFoZWFkXG4gICBhdCBsZW5ndGggY291bnRzIHRvIGRldGVybWluZSBzdWItdGFibGUgc2l6ZXMgd2hlbiBidWlsZGluZyB0aGVcbiAgIGRlY29kaW5nIHRhYmxlcy5cbiAgICovXG5cbiAgLyogYWNjdW11bGF0ZSBsZW5ndGhzIGZvciBjb2RlcyAoYXNzdW1lcyBsZW5zW10gYWxsIGluIDAuLk1BWEJJVFMpICovXG4gIGZvciAobGVuID0gMDsgbGVuIDw9IE1BWEJJVFM7IGxlbisrKSB7XG4gICAgY291bnRbbGVuXSA9IDA7XG4gIH1cbiAgZm9yIChzeW0gPSAwOyBzeW0gPCBjb2Rlczsgc3ltKyspIHtcbiAgICBjb3VudFtsZW5zW2xlbnNfaW5kZXggKyBzeW1dXSsrO1xuICB9XG5cbiAgLyogYm91bmQgY29kZSBsZW5ndGhzLCBmb3JjZSByb290IHRvIGJlIHdpdGhpbiBjb2RlIGxlbmd0aHMgKi9cbiAgcm9vdCA9IGJpdHM7XG4gIGZvciAobWF4ID0gTUFYQklUUzsgbWF4ID49IDE7IG1heC0tKSB7XG4gICAgaWYgKGNvdW50W21heF0gIT09IDApIHsgYnJlYWs7IH1cbiAgfVxuICBpZiAocm9vdCA+IG1heCkge1xuICAgIHJvb3QgPSBtYXg7XG4gIH1cbiAgaWYgKG1heCA9PT0gMCkgeyAgICAgICAgICAgICAgICAgICAgIC8qIG5vIHN5bWJvbHMgdG8gY29kZSBhdCBhbGwgKi9cbiAgICAvL3RhYmxlLm9wW29wdHMudGFibGVfaW5kZXhdID0gNjQ7ICAvL2hlcmUub3AgPSAodmFyIGNoYXIpNjQ7ICAgIC8qIGludmFsaWQgY29kZSBtYXJrZXIgKi9cbiAgICAvL3RhYmxlLmJpdHNbb3B0cy50YWJsZV9pbmRleF0gPSAxOyAgIC8vaGVyZS5iaXRzID0gKHZhciBjaGFyKTE7XG4gICAgLy90YWJsZS52YWxbb3B0cy50YWJsZV9pbmRleCsrXSA9IDA7ICAgLy9oZXJlLnZhbCA9ICh2YXIgc2hvcnQpMDtcbiAgICB0YWJsZVt0YWJsZV9pbmRleCsrXSA9ICgxIDw8IDI0KSB8ICg2NCA8PCAxNikgfCAwO1xuXG5cbiAgICAvL3RhYmxlLm9wW29wdHMudGFibGVfaW5kZXhdID0gNjQ7XG4gICAgLy90YWJsZS5iaXRzW29wdHMudGFibGVfaW5kZXhdID0gMTtcbiAgICAvL3RhYmxlLnZhbFtvcHRzLnRhYmxlX2luZGV4KytdID0gMDtcbiAgICB0YWJsZVt0YWJsZV9pbmRleCsrXSA9ICgxIDw8IDI0KSB8ICg2NCA8PCAxNikgfCAwO1xuXG4gICAgb3B0cy5iaXRzID0gMTtcbiAgICByZXR1cm4gMDsgICAgIC8qIG5vIHN5bWJvbHMsIGJ1dCB3YWl0IGZvciBkZWNvZGluZyB0byByZXBvcnQgZXJyb3IgKi9cbiAgfVxuICBmb3IgKG1pbiA9IDE7IG1pbiA8IG1heDsgbWluKyspIHtcbiAgICBpZiAoY291bnRbbWluXSAhPT0gMCkgeyBicmVhazsgfVxuICB9XG4gIGlmIChyb290IDwgbWluKSB7XG4gICAgcm9vdCA9IG1pbjtcbiAgfVxuXG4gIC8qIGNoZWNrIGZvciBhbiBvdmVyLXN1YnNjcmliZWQgb3IgaW5jb21wbGV0ZSBzZXQgb2YgbGVuZ3RocyAqL1xuICBsZWZ0ID0gMTtcbiAgZm9yIChsZW4gPSAxOyBsZW4gPD0gTUFYQklUUzsgbGVuKyspIHtcbiAgICBsZWZ0IDw8PSAxO1xuICAgIGxlZnQgLT0gY291bnRbbGVuXTtcbiAgICBpZiAobGVmdCA8IDApIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9ICAgICAgICAvKiBvdmVyLXN1YnNjcmliZWQgKi9cbiAgfVxuICBpZiAobGVmdCA+IDAgJiYgKHR5cGUgPT09IENPREVTIHx8IG1heCAhPT0gMSkpIHtcbiAgICByZXR1cm4gLTE7ICAgICAgICAgICAgICAgICAgICAgIC8qIGluY29tcGxldGUgc2V0ICovXG4gIH1cblxuICAvKiBnZW5lcmF0ZSBvZmZzZXRzIGludG8gc3ltYm9sIHRhYmxlIGZvciBlYWNoIGxlbmd0aCBmb3Igc29ydGluZyAqL1xuICBvZmZzWzFdID0gMDtcbiAgZm9yIChsZW4gPSAxOyBsZW4gPCBNQVhCSVRTOyBsZW4rKykge1xuICAgIG9mZnNbbGVuICsgMV0gPSBvZmZzW2xlbl0gKyBjb3VudFtsZW5dO1xuICB9XG5cbiAgLyogc29ydCBzeW1ib2xzIGJ5IGxlbmd0aCwgYnkgc3ltYm9sIG9yZGVyIHdpdGhpbiBlYWNoIGxlbmd0aCAqL1xuICBmb3IgKHN5bSA9IDA7IHN5bSA8IGNvZGVzOyBzeW0rKykge1xuICAgIGlmIChsZW5zW2xlbnNfaW5kZXggKyBzeW1dICE9PSAwKSB7XG4gICAgICB3b3JrW29mZnNbbGVuc1tsZW5zX2luZGV4ICsgc3ltXV0rK10gPSBzeW07XG4gICAgfVxuICB9XG5cbiAgLypcbiAgIENyZWF0ZSBhbmQgZmlsbCBpbiBkZWNvZGluZyB0YWJsZXMuICBJbiB0aGlzIGxvb3AsIHRoZSB0YWJsZSBiZWluZ1xuICAgZmlsbGVkIGlzIGF0IG5leHQgYW5kIGhhcyBjdXJyIGluZGV4IGJpdHMuICBUaGUgY29kZSBiZWluZyB1c2VkIGlzIGh1ZmZcbiAgIHdpdGggbGVuZ3RoIGxlbi4gIFRoYXQgY29kZSBpcyBjb252ZXJ0ZWQgdG8gYW4gaW5kZXggYnkgZHJvcHBpbmcgZHJvcFxuICAgYml0cyBvZmYgb2YgdGhlIGJvdHRvbS4gIEZvciBjb2RlcyB3aGVyZSBsZW4gaXMgbGVzcyB0aGFuIGRyb3AgKyBjdXJyLFxuICAgdGhvc2UgdG9wIGRyb3AgKyBjdXJyIC0gbGVuIGJpdHMgYXJlIGluY3JlbWVudGVkIHRocm91Z2ggYWxsIHZhbHVlcyB0b1xuICAgZmlsbCB0aGUgdGFibGUgd2l0aCByZXBsaWNhdGVkIGVudHJpZXMuXG5cbiAgIHJvb3QgaXMgdGhlIG51bWJlciBvZiBpbmRleCBiaXRzIGZvciB0aGUgcm9vdCB0YWJsZS4gIFdoZW4gbGVuIGV4Y2VlZHNcbiAgIHJvb3QsIHN1Yi10YWJsZXMgYXJlIGNyZWF0ZWQgcG9pbnRlZCB0byBieSB0aGUgcm9vdCBlbnRyeSB3aXRoIGFuIGluZGV4XG4gICBvZiB0aGUgbG93IHJvb3QgYml0cyBvZiBodWZmLiAgVGhpcyBpcyBzYXZlZCBpbiBsb3cgdG8gY2hlY2sgZm9yIHdoZW4gYVxuICAgbmV3IHN1Yi10YWJsZSBzaG91bGQgYmUgc3RhcnRlZC4gIGRyb3AgaXMgemVybyB3aGVuIHRoZSByb290IHRhYmxlIGlzXG4gICBiZWluZyBmaWxsZWQsIGFuZCBkcm9wIGlzIHJvb3Qgd2hlbiBzdWItdGFibGVzIGFyZSBiZWluZyBmaWxsZWQuXG5cbiAgIFdoZW4gYSBuZXcgc3ViLXRhYmxlIGlzIG5lZWRlZCwgaXQgaXMgbmVjZXNzYXJ5IHRvIGxvb2sgYWhlYWQgaW4gdGhlXG4gICBjb2RlIGxlbmd0aHMgdG8gZGV0ZXJtaW5lIHdoYXQgc2l6ZSBzdWItdGFibGUgaXMgbmVlZGVkLiAgVGhlIGxlbmd0aFxuICAgY291bnRzIGFyZSB1c2VkIGZvciB0aGlzLCBhbmQgc28gY291bnRbXSBpcyBkZWNyZW1lbnRlZCBhcyBjb2RlcyBhcmVcbiAgIGVudGVyZWQgaW4gdGhlIHRhYmxlcy5cblxuICAgdXNlZCBrZWVwcyB0cmFjayBvZiBob3cgbWFueSB0YWJsZSBlbnRyaWVzIGhhdmUgYmVlbiBhbGxvY2F0ZWQgZnJvbSB0aGVcbiAgIHByb3ZpZGVkICp0YWJsZSBzcGFjZS4gIEl0IGlzIGNoZWNrZWQgZm9yIExFTlMgYW5kIERJU1QgdGFibGVzIGFnYWluc3RcbiAgIHRoZSBjb25zdGFudHMgRU5PVUdIX0xFTlMgYW5kIEVOT1VHSF9ESVNUUyB0byBndWFyZCBhZ2FpbnN0IGNoYW5nZXMgaW5cbiAgIHRoZSBpbml0aWFsIHJvb3QgdGFibGUgc2l6ZSBjb25zdGFudHMuICBTZWUgdGhlIGNvbW1lbnRzIGluIGluZnRyZWVzLmhcbiAgIGZvciBtb3JlIGluZm9ybWF0aW9uLlxuXG4gICBzeW0gaW5jcmVtZW50cyB0aHJvdWdoIGFsbCBzeW1ib2xzLCBhbmQgdGhlIGxvb3AgdGVybWluYXRlcyB3aGVuXG4gICBhbGwgY29kZXMgb2YgbGVuZ3RoIG1heCwgaS5lLiBhbGwgY29kZXMsIGhhdmUgYmVlbiBwcm9jZXNzZWQuICBUaGlzXG4gICByb3V0aW5lIHBlcm1pdHMgaW5jb21wbGV0ZSBjb2Rlcywgc28gYW5vdGhlciBsb29wIGFmdGVyIHRoaXMgb25lIGZpbGxzXG4gICBpbiB0aGUgcmVzdCBvZiB0aGUgZGVjb2RpbmcgdGFibGVzIHdpdGggaW52YWxpZCBjb2RlIG1hcmtlcnMuXG4gICAqL1xuXG4gIC8qIHNldCB1cCBmb3IgY29kZSB0eXBlICovXG4gIC8vIHBvb3IgbWFuIG9wdGltaXphdGlvbiAtIHVzZSBpZi1lbHNlIGluc3RlYWQgb2Ygc3dpdGNoLFxuICAvLyB0byBhdm9pZCBkZW9wdHMgaW4gb2xkIHY4XG4gIGlmICh0eXBlID09PSBDT0RFUykge1xuICAgIGJhc2UgPSBleHRyYSA9IHdvcms7ICAgIC8qIGR1bW15IHZhbHVlLS1ub3QgdXNlZCAqL1xuICAgIGVuZCA9IDE5O1xuXG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gTEVOUykge1xuICAgIGJhc2UgPSBsYmFzZTtcbiAgICBiYXNlX2luZGV4IC09IDI1NztcbiAgICBleHRyYSA9IGxleHQ7XG4gICAgZXh0cmFfaW5kZXggLT0gMjU3O1xuICAgIGVuZCA9IDI1NjtcblxuICB9IGVsc2UgeyAgICAgICAgICAgICAgICAgICAgLyogRElTVFMgKi9cbiAgICBiYXNlID0gZGJhc2U7XG4gICAgZXh0cmEgPSBkZXh0O1xuICAgIGVuZCA9IC0xO1xuICB9XG5cbiAgLyogaW5pdGlhbGl6ZSBvcHRzIGZvciBsb29wICovXG4gIGh1ZmYgPSAwOyAgICAgICAgICAgICAgICAgICAvKiBzdGFydGluZyBjb2RlICovXG4gIHN5bSA9IDA7ICAgICAgICAgICAgICAgICAgICAvKiBzdGFydGluZyBjb2RlIHN5bWJvbCAqL1xuICBsZW4gPSBtaW47ICAgICAgICAgICAgICAgICAgLyogc3RhcnRpbmcgY29kZSBsZW5ndGggKi9cbiAgbmV4dCA9IHRhYmxlX2luZGV4OyAgICAgICAgICAgICAgLyogY3VycmVudCB0YWJsZSB0byBmaWxsIGluICovXG4gIGN1cnIgPSByb290OyAgICAgICAgICAgICAgICAvKiBjdXJyZW50IHRhYmxlIGluZGV4IGJpdHMgKi9cbiAgZHJvcCA9IDA7ICAgICAgICAgICAgICAgICAgIC8qIGN1cnJlbnQgYml0cyB0byBkcm9wIGZyb20gY29kZSBmb3IgaW5kZXggKi9cbiAgbG93ID0gLTE7ICAgICAgICAgICAgICAgICAgIC8qIHRyaWdnZXIgbmV3IHN1Yi10YWJsZSB3aGVuIGxlbiA+IHJvb3QgKi9cbiAgdXNlZCA9IDEgPDwgcm9vdDsgICAgICAgICAgLyogdXNlIHJvb3QgdGFibGUgZW50cmllcyAqL1xuICBtYXNrID0gdXNlZCAtIDE7ICAgICAgICAgICAgLyogbWFzayBmb3IgY29tcGFyaW5nIGxvdyAqL1xuXG4gIC8qIGNoZWNrIGF2YWlsYWJsZSB0YWJsZSBzcGFjZSAqL1xuICBpZiAoKHR5cGUgPT09IExFTlMgJiYgdXNlZCA+IEVOT1VHSF9MRU5TKSB8fFxuICAgICh0eXBlID09PSBESVNUUyAmJiB1c2VkID4gRU5PVUdIX0RJU1RTKSkge1xuICAgIHJldHVybiAxO1xuICB9XG5cbiAgdmFyIGkgPSAwO1xuICAvKiBwcm9jZXNzIGFsbCBjb2RlcyBhbmQgbWFrZSB0YWJsZSBlbnRyaWVzICovXG4gIGZvciAoOzspIHtcbiAgICBpKys7XG4gICAgLyogY3JlYXRlIHRhYmxlIGVudHJ5ICovXG4gICAgaGVyZV9iaXRzID0gbGVuIC0gZHJvcDtcbiAgICBpZiAod29ya1tzeW1dIDwgZW5kKSB7XG4gICAgICBoZXJlX29wID0gMDtcbiAgICAgIGhlcmVfdmFsID0gd29ya1tzeW1dO1xuICAgIH1cbiAgICBlbHNlIGlmICh3b3JrW3N5bV0gPiBlbmQpIHtcbiAgICAgIGhlcmVfb3AgPSBleHRyYVtleHRyYV9pbmRleCArIHdvcmtbc3ltXV07XG4gICAgICBoZXJlX3ZhbCA9IGJhc2VbYmFzZV9pbmRleCArIHdvcmtbc3ltXV07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgaGVyZV9vcCA9IDMyICsgNjQ7ICAgICAgICAgLyogZW5kIG9mIGJsb2NrICovXG4gICAgICBoZXJlX3ZhbCA9IDA7XG4gICAgfVxuXG4gICAgLyogcmVwbGljYXRlIGZvciB0aG9zZSBpbmRpY2VzIHdpdGggbG93IGxlbiBiaXRzIGVxdWFsIHRvIGh1ZmYgKi9cbiAgICBpbmNyID0gMSA8PCAobGVuIC0gZHJvcCk7XG4gICAgZmlsbCA9IDEgPDwgY3VycjtcbiAgICBtaW4gPSBmaWxsOyAgICAgICAgICAgICAgICAgLyogc2F2ZSBvZmZzZXQgdG8gbmV4dCB0YWJsZSAqL1xuICAgIGRvIHtcbiAgICAgIGZpbGwgLT0gaW5jcjtcbiAgICAgIHRhYmxlW25leHQgKyAoaHVmZiA+PiBkcm9wKSArIGZpbGxdID0gKGhlcmVfYml0cyA8PCAyNCkgfCAoaGVyZV9vcCA8PCAxNikgfCBoZXJlX3ZhbCB8MDtcbiAgICB9IHdoaWxlIChmaWxsICE9PSAwKTtcblxuICAgIC8qIGJhY2t3YXJkcyBpbmNyZW1lbnQgdGhlIGxlbi1iaXQgY29kZSBodWZmICovXG4gICAgaW5jciA9IDEgPDwgKGxlbiAtIDEpO1xuICAgIHdoaWxlIChodWZmICYgaW5jcikge1xuICAgICAgaW5jciA+Pj0gMTtcbiAgICB9XG4gICAgaWYgKGluY3IgIT09IDApIHtcbiAgICAgIGh1ZmYgJj0gaW5jciAtIDE7XG4gICAgICBodWZmICs9IGluY3I7XG4gICAgfSBlbHNlIHtcbiAgICAgIGh1ZmYgPSAwO1xuICAgIH1cblxuICAgIC8qIGdvIHRvIG5leHQgc3ltYm9sLCB1cGRhdGUgY291bnQsIGxlbiAqL1xuICAgIHN5bSsrO1xuICAgIGlmICgtLWNvdW50W2xlbl0gPT09IDApIHtcbiAgICAgIGlmIChsZW4gPT09IG1heCkgeyBicmVhazsgfVxuICAgICAgbGVuID0gbGVuc1tsZW5zX2luZGV4ICsgd29ya1tzeW1dXTtcbiAgICB9XG5cbiAgICAvKiBjcmVhdGUgbmV3IHN1Yi10YWJsZSBpZiBuZWVkZWQgKi9cbiAgICBpZiAobGVuID4gcm9vdCAmJiAoaHVmZiAmIG1hc2spICE9PSBsb3cpIHtcbiAgICAgIC8qIGlmIGZpcnN0IHRpbWUsIHRyYW5zaXRpb24gdG8gc3ViLXRhYmxlcyAqL1xuICAgICAgaWYgKGRyb3AgPT09IDApIHtcbiAgICAgICAgZHJvcCA9IHJvb3Q7XG4gICAgICB9XG5cbiAgICAgIC8qIGluY3JlbWVudCBwYXN0IGxhc3QgdGFibGUgKi9cbiAgICAgIG5leHQgKz0gbWluOyAgICAgICAgICAgIC8qIGhlcmUgbWluIGlzIDEgPDwgY3VyciAqL1xuXG4gICAgICAvKiBkZXRlcm1pbmUgbGVuZ3RoIG9mIG5leHQgdGFibGUgKi9cbiAgICAgIGN1cnIgPSBsZW4gLSBkcm9wO1xuICAgICAgbGVmdCA9IDEgPDwgY3VycjtcbiAgICAgIHdoaWxlIChjdXJyICsgZHJvcCA8IG1heCkge1xuICAgICAgICBsZWZ0IC09IGNvdW50W2N1cnIgKyBkcm9wXTtcbiAgICAgICAgaWYgKGxlZnQgPD0gMCkgeyBicmVhazsgfVxuICAgICAgICBjdXJyKys7XG4gICAgICAgIGxlZnQgPDw9IDE7XG4gICAgICB9XG5cbiAgICAgIC8qIGNoZWNrIGZvciBlbm91Z2ggc3BhY2UgKi9cbiAgICAgIHVzZWQgKz0gMSA8PCBjdXJyO1xuICAgICAgaWYgKCh0eXBlID09PSBMRU5TICYmIHVzZWQgPiBFTk9VR0hfTEVOUykgfHxcbiAgICAgICAgKHR5cGUgPT09IERJU1RTICYmIHVzZWQgPiBFTk9VR0hfRElTVFMpKSB7XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgfVxuXG4gICAgICAvKiBwb2ludCBlbnRyeSBpbiByb290IHRhYmxlIHRvIHN1Yi10YWJsZSAqL1xuICAgICAgbG93ID0gaHVmZiAmIG1hc2s7XG4gICAgICAvKnRhYmxlLm9wW2xvd10gPSBjdXJyO1xuICAgICAgdGFibGUuYml0c1tsb3ddID0gcm9vdDtcbiAgICAgIHRhYmxlLnZhbFtsb3ddID0gbmV4dCAtIG9wdHMudGFibGVfaW5kZXg7Ki9cbiAgICAgIHRhYmxlW2xvd10gPSAocm9vdCA8PCAyNCkgfCAoY3VyciA8PCAxNikgfCAobmV4dCAtIHRhYmxlX2luZGV4KSB8MDtcbiAgICB9XG4gIH1cblxuICAvKiBmaWxsIGluIHJlbWFpbmluZyB0YWJsZSBlbnRyeSBpZiBjb2RlIGlzIGluY29tcGxldGUgKGd1YXJhbnRlZWQgdG8gaGF2ZVxuICAgYXQgbW9zdCBvbmUgcmVtYWluaW5nIGVudHJ5LCBzaW5jZSBpZiB0aGUgY29kZSBpcyBpbmNvbXBsZXRlLCB0aGVcbiAgIG1heGltdW0gY29kZSBsZW5ndGggdGhhdCB3YXMgYWxsb3dlZCB0byBnZXQgdGhpcyBmYXIgaXMgb25lIGJpdCkgKi9cbiAgaWYgKGh1ZmYgIT09IDApIHtcbiAgICAvL3RhYmxlLm9wW25leHQgKyBodWZmXSA9IDY0OyAgICAgICAgICAgIC8qIGludmFsaWQgY29kZSBtYXJrZXIgKi9cbiAgICAvL3RhYmxlLmJpdHNbbmV4dCArIGh1ZmZdID0gbGVuIC0gZHJvcDtcbiAgICAvL3RhYmxlLnZhbFtuZXh0ICsgaHVmZl0gPSAwO1xuICAgIHRhYmxlW25leHQgKyBodWZmXSA9ICgobGVuIC0gZHJvcCkgPDwgMjQpIHwgKDY0IDw8IDE2KSB8MDtcbiAgfVxuXG4gIC8qIHNldCByZXR1cm4gcGFyYW1ldGVycyAqL1xuICAvL29wdHMudGFibGVfaW5kZXggKz0gdXNlZDtcbiAgb3B0cy5iaXRzID0gcm9vdDtcbiAgcmV0dXJuIDA7XG59O1xuIiwiJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgMjogICAgICAnbmVlZCBkaWN0aW9uYXJ5JywgICAgIC8qIFpfTkVFRF9ESUNUICAgICAgIDIgICovXG4gIDE6ICAgICAgJ3N0cmVhbSBlbmQnLCAgICAgICAgICAvKiBaX1NUUkVBTV9FTkQgICAgICAxICAqL1xuICAwOiAgICAgICcnLCAgICAgICAgICAgICAgICAgICAgLyogWl9PSyAgICAgICAgICAgICAgMCAgKi9cbiAgJy0xJzogICAnZmlsZSBlcnJvcicsICAgICAgICAgIC8qIFpfRVJSTk8gICAgICAgICAoLTEpICovXG4gICctMic6ICAgJ3N0cmVhbSBlcnJvcicsICAgICAgICAvKiBaX1NUUkVBTV9FUlJPUiAgKC0yKSAqL1xuICAnLTMnOiAgICdkYXRhIGVycm9yJywgICAgICAgICAgLyogWl9EQVRBX0VSUk9SICAgICgtMykgKi9cbiAgJy00JzogICAnaW5zdWZmaWNpZW50IG1lbW9yeScsIC8qIFpfTUVNX0VSUk9SICAgICAoLTQpICovXG4gICctNSc6ICAgJ2J1ZmZlciBlcnJvcicsICAgICAgICAvKiBaX0JVRl9FUlJPUiAgICAgKC01KSAqL1xuICAnLTYnOiAgICdpbmNvbXBhdGlibGUgdmVyc2lvbicgLyogWl9WRVJTSU9OX0VSUk9SICgtNikgKi9cbn07XG4iLCIndXNlIHN0cmljdCc7XG5cblxuZnVuY3Rpb24gWlN0cmVhbSgpIHtcbiAgLyogbmV4dCBpbnB1dCBieXRlICovXG4gIHRoaXMuaW5wdXQgPSBudWxsOyAvLyBKUyBzcGVjaWZpYywgYmVjYXVzZSB3ZSBoYXZlIG5vIHBvaW50ZXJzXG4gIHRoaXMubmV4dF9pbiA9IDA7XG4gIC8qIG51bWJlciBvZiBieXRlcyBhdmFpbGFibGUgYXQgaW5wdXQgKi9cbiAgdGhpcy5hdmFpbF9pbiA9IDA7XG4gIC8qIHRvdGFsIG51bWJlciBvZiBpbnB1dCBieXRlcyByZWFkIHNvIGZhciAqL1xuICB0aGlzLnRvdGFsX2luID0gMDtcbiAgLyogbmV4dCBvdXRwdXQgYnl0ZSBzaG91bGQgYmUgcHV0IHRoZXJlICovXG4gIHRoaXMub3V0cHV0ID0gbnVsbDsgLy8gSlMgc3BlY2lmaWMsIGJlY2F1c2Ugd2UgaGF2ZSBubyBwb2ludGVyc1xuICB0aGlzLm5leHRfb3V0ID0gMDtcbiAgLyogcmVtYWluaW5nIGZyZWUgc3BhY2UgYXQgb3V0cHV0ICovXG4gIHRoaXMuYXZhaWxfb3V0ID0gMDtcbiAgLyogdG90YWwgbnVtYmVyIG9mIGJ5dGVzIG91dHB1dCBzbyBmYXIgKi9cbiAgdGhpcy50b3RhbF9vdXQgPSAwO1xuICAvKiBsYXN0IGVycm9yIG1lc3NhZ2UsIE5VTEwgaWYgbm8gZXJyb3IgKi9cbiAgdGhpcy5tc2cgPSAnJy8qWl9OVUxMKi87XG4gIC8qIG5vdCB2aXNpYmxlIGJ5IGFwcGxpY2F0aW9ucyAqL1xuICB0aGlzLnN0YXRlID0gbnVsbDtcbiAgLyogYmVzdCBndWVzcyBhYm91dCB0aGUgZGF0YSB0eXBlOiBiaW5hcnkgb3IgdGV4dCAqL1xuICB0aGlzLmRhdGFfdHlwZSA9IDIvKlpfVU5LTk9XTiovO1xuICAvKiBhZGxlcjMyIHZhbHVlIG9mIHRoZSB1bmNvbXByZXNzZWQgZGF0YSAqL1xuICB0aGlzLmFkbGVyID0gMDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBaU3RyZWFtO1xuIiwiLy8gdmltOnRzPTQ6c3RzPTQ6c3c9NDpcbi8qIVxuICpcbiAqIENvcHlyaWdodCAyMDA5LTIwMTIgS3JpcyBLb3dhbCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIE1JVFxuICogbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vZ2l0aHViLmNvbS9rcmlza293YWwvcS9yYXcvbWFzdGVyL0xJQ0VOU0VcbiAqXG4gKiBXaXRoIHBhcnRzIGJ5IFR5bGVyIENsb3NlXG4gKiBDb3B5cmlnaHQgMjAwNy0yMDA5IFR5bGVyIENsb3NlIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgTUlUIFggbGljZW5zZSBmb3VuZFxuICogYXQgaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5odG1sXG4gKiBGb3JrZWQgYXQgcmVmX3NlbmQuanMgdmVyc2lvbjogMjAwOS0wNS0xMVxuICpcbiAqIFdpdGggcGFydHMgYnkgTWFyayBNaWxsZXJcbiAqIENvcHlyaWdodCAoQykgMjAxMSBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICpcbiAqL1xuXG4oZnVuY3Rpb24gKGRlZmluaXRpb24pIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIC8vIFRoaXMgZmlsZSB3aWxsIGZ1bmN0aW9uIHByb3Blcmx5IGFzIGEgPHNjcmlwdD4gdGFnLCBvciBhIG1vZHVsZVxuICAgIC8vIHVzaW5nIENvbW1vbkpTIGFuZCBOb2RlSlMgb3IgUmVxdWlyZUpTIG1vZHVsZSBmb3JtYXRzLiAgSW5cbiAgICAvLyBDb21tb24vTm9kZS9SZXF1aXJlSlMsIHRoZSBtb2R1bGUgZXhwb3J0cyB0aGUgUSBBUEkgYW5kIHdoZW5cbiAgICAvLyBleGVjdXRlZCBhcyBhIHNpbXBsZSA8c2NyaXB0PiwgaXQgY3JlYXRlcyBhIFEgZ2xvYmFsIGluc3RlYWQuXG5cbiAgICAvLyBNb250YWdlIFJlcXVpcmVcbiAgICBpZiAodHlwZW9mIGJvb3RzdHJhcCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIGJvb3RzdHJhcChcInByb21pc2VcIiwgZGVmaW5pdGlvbik7XG5cbiAgICAvLyBDb21tb25KU1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGRlZmluaXRpb24oKTtcblxuICAgIC8vIFJlcXVpcmVKU1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKGRlZmluaXRpb24pO1xuXG4gICAgLy8gU0VTIChTZWN1cmUgRWNtYVNjcmlwdClcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZXMgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgaWYgKCFzZXMub2soKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VzLm1ha2VRID0gZGVmaW5pdGlvbjtcbiAgICAgICAgfVxuXG4gICAgLy8gPHNjcmlwdD5cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgfHwgdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgLy8gUHJlZmVyIHdpbmRvdyBvdmVyIHNlbGYgZm9yIGFkZC1vbiBzY3JpcHRzLiBVc2Ugc2VsZiBmb3JcbiAgICAgICAgLy8gbm9uLXdpbmRvd2VkIGNvbnRleHRzLlxuICAgICAgICB2YXIgZ2xvYmFsID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHNlbGY7XG5cbiAgICAgICAgLy8gR2V0IHRoZSBgd2luZG93YCBvYmplY3QsIHNhdmUgdGhlIHByZXZpb3VzIFEgZ2xvYmFsXG4gICAgICAgIC8vIGFuZCBpbml0aWFsaXplIFEgYXMgYSBnbG9iYWwuXG4gICAgICAgIHZhciBwcmV2aW91c1EgPSBnbG9iYWwuUTtcbiAgICAgICAgZ2xvYmFsLlEgPSBkZWZpbml0aW9uKCk7XG5cbiAgICAgICAgLy8gQWRkIGEgbm9Db25mbGljdCBmdW5jdGlvbiBzbyBRIGNhbiBiZSByZW1vdmVkIGZyb20gdGhlXG4gICAgICAgIC8vIGdsb2JhbCBuYW1lc3BhY2UuXG4gICAgICAgIGdsb2JhbC5RLm5vQ29uZmxpY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBnbG9iYWwuUSA9IHByZXZpb3VzUTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuXG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBlbnZpcm9ubWVudCB3YXMgbm90IGFudGljaXBhdGVkIGJ5IFEuIFBsZWFzZSBmaWxlIGEgYnVnLlwiKTtcbiAgICB9XG5cbn0pKGZ1bmN0aW9uICgpIHtcblwidXNlIHN0cmljdFwiO1xuXG52YXIgaGFzU3RhY2tzID0gZmFsc2U7XG50cnkge1xuICAgIHRocm93IG5ldyBFcnJvcigpO1xufSBjYXRjaCAoZSkge1xuICAgIGhhc1N0YWNrcyA9ICEhZS5zdGFjaztcbn1cblxuLy8gQWxsIGNvZGUgYWZ0ZXIgdGhpcyBwb2ludCB3aWxsIGJlIGZpbHRlcmVkIGZyb20gc3RhY2sgdHJhY2VzIHJlcG9ydGVkXG4vLyBieSBRLlxudmFyIHFTdGFydGluZ0xpbmUgPSBjYXB0dXJlTGluZSgpO1xudmFyIHFGaWxlTmFtZTtcblxuLy8gc2hpbXNcblxuLy8gdXNlZCBmb3IgZmFsbGJhY2sgaW4gXCJhbGxSZXNvbHZlZFwiXG52YXIgbm9vcCA9IGZ1bmN0aW9uICgpIHt9O1xuXG4vLyBVc2UgdGhlIGZhc3Rlc3QgcG9zc2libGUgbWVhbnMgdG8gZXhlY3V0ZSBhIHRhc2sgaW4gYSBmdXR1cmUgdHVyblxuLy8gb2YgdGhlIGV2ZW50IGxvb3AuXG52YXIgbmV4dFRpY2sgPShmdW5jdGlvbiAoKSB7XG4gICAgLy8gbGlua2VkIGxpc3Qgb2YgdGFza3MgKHNpbmdsZSwgd2l0aCBoZWFkIG5vZGUpXG4gICAgdmFyIGhlYWQgPSB7dGFzazogdm9pZCAwLCBuZXh0OiBudWxsfTtcbiAgICB2YXIgdGFpbCA9IGhlYWQ7XG4gICAgdmFyIGZsdXNoaW5nID0gZmFsc2U7XG4gICAgdmFyIHJlcXVlc3RUaWNrID0gdm9pZCAwO1xuICAgIHZhciBpc05vZGVKUyA9IGZhbHNlO1xuICAgIC8vIHF1ZXVlIGZvciBsYXRlIHRhc2tzLCB1c2VkIGJ5IHVuaGFuZGxlZCByZWplY3Rpb24gdHJhY2tpbmdcbiAgICB2YXIgbGF0ZXJRdWV1ZSA9IFtdO1xuXG4gICAgZnVuY3Rpb24gZmx1c2goKSB7XG4gICAgICAgIC8qIGpzaGludCBsb29wZnVuYzogdHJ1ZSAqL1xuICAgICAgICB2YXIgdGFzaywgZG9tYWluO1xuXG4gICAgICAgIHdoaWxlIChoZWFkLm5leHQpIHtcbiAgICAgICAgICAgIGhlYWQgPSBoZWFkLm5leHQ7XG4gICAgICAgICAgICB0YXNrID0gaGVhZC50YXNrO1xuICAgICAgICAgICAgaGVhZC50YXNrID0gdm9pZCAwO1xuICAgICAgICAgICAgZG9tYWluID0gaGVhZC5kb21haW47XG5cbiAgICAgICAgICAgIGlmIChkb21haW4pIHtcbiAgICAgICAgICAgICAgICBoZWFkLmRvbWFpbiA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICBkb21haW4uZW50ZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJ1blNpbmdsZSh0YXNrLCBkb21haW4pO1xuXG4gICAgICAgIH1cbiAgICAgICAgd2hpbGUgKGxhdGVyUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICB0YXNrID0gbGF0ZXJRdWV1ZS5wb3AoKTtcbiAgICAgICAgICAgIHJ1blNpbmdsZSh0YXNrKTtcbiAgICAgICAgfVxuICAgICAgICBmbHVzaGluZyA9IGZhbHNlO1xuICAgIH1cbiAgICAvLyBydW5zIGEgc2luZ2xlIGZ1bmN0aW9uIGluIHRoZSBhc3luYyBxdWV1ZVxuICAgIGZ1bmN0aW9uIHJ1blNpbmdsZSh0YXNrLCBkb21haW4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRhc2soKTtcblxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoaXNOb2RlSlMpIHtcbiAgICAgICAgICAgICAgICAvLyBJbiBub2RlLCB1bmNhdWdodCBleGNlcHRpb25zIGFyZSBjb25zaWRlcmVkIGZhdGFsIGVycm9ycy5cbiAgICAgICAgICAgICAgICAvLyBSZS10aHJvdyB0aGVtIHN5bmNocm9ub3VzbHkgdG8gaW50ZXJydXB0IGZsdXNoaW5nIVxuXG4gICAgICAgICAgICAgICAgLy8gRW5zdXJlIGNvbnRpbnVhdGlvbiBpZiB0aGUgdW5jYXVnaHQgZXhjZXB0aW9uIGlzIHN1cHByZXNzZWRcbiAgICAgICAgICAgICAgICAvLyBsaXN0ZW5pbmcgXCJ1bmNhdWdodEV4Y2VwdGlvblwiIGV2ZW50cyAoYXMgZG9tYWlucyBkb2VzKS5cbiAgICAgICAgICAgICAgICAvLyBDb250aW51ZSBpbiBuZXh0IGV2ZW50IHRvIGF2b2lkIHRpY2sgcmVjdXJzaW9uLlxuICAgICAgICAgICAgICAgIGlmIChkb21haW4pIHtcbiAgICAgICAgICAgICAgICAgICAgZG9tYWluLmV4aXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmbHVzaCwgMCk7XG4gICAgICAgICAgICAgICAgaWYgKGRvbWFpbikge1xuICAgICAgICAgICAgICAgICAgICBkb21haW4uZW50ZXIoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aHJvdyBlO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEluIGJyb3dzZXJzLCB1bmNhdWdodCBleGNlcHRpb25zIGFyZSBub3QgZmF0YWwuXG4gICAgICAgICAgICAgICAgLy8gUmUtdGhyb3cgdGhlbSBhc3luY2hyb25vdXNseSB0byBhdm9pZCBzbG93LWRvd25zLlxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRvbWFpbikge1xuICAgICAgICAgICAgZG9tYWluLmV4aXQoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG5leHRUaWNrID0gZnVuY3Rpb24gKHRhc2spIHtcbiAgICAgICAgdGFpbCA9IHRhaWwubmV4dCA9IHtcbiAgICAgICAgICAgIHRhc2s6IHRhc2ssXG4gICAgICAgICAgICBkb21haW46IGlzTm9kZUpTICYmIHByb2Nlc3MuZG9tYWluLFxuICAgICAgICAgICAgbmV4dDogbnVsbFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmICghZmx1c2hpbmcpIHtcbiAgICAgICAgICAgIGZsdXNoaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHJlcXVlc3RUaWNrKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIHByb2Nlc3MudG9TdHJpbmcoKSA9PT0gXCJbb2JqZWN0IHByb2Nlc3NdXCIgJiYgcHJvY2Vzcy5uZXh0VGljaykge1xuICAgICAgICAvLyBFbnN1cmUgUSBpcyBpbiBhIHJlYWwgTm9kZSBlbnZpcm9ubWVudCwgd2l0aCBhIGBwcm9jZXNzLm5leHRUaWNrYC5cbiAgICAgICAgLy8gVG8gc2VlIHRocm91Z2ggZmFrZSBOb2RlIGVudmlyb25tZW50czpcbiAgICAgICAgLy8gKiBNb2NoYSB0ZXN0IHJ1bm5lciAtIGV4cG9zZXMgYSBgcHJvY2Vzc2AgZ2xvYmFsIHdpdGhvdXQgYSBgbmV4dFRpY2tgXG4gICAgICAgIC8vICogQnJvd3NlcmlmeSAtIGV4cG9zZXMgYSBgcHJvY2Vzcy5uZXhUaWNrYCBmdW5jdGlvbiB0aGF0IHVzZXNcbiAgICAgICAgLy8gICBgc2V0VGltZW91dGAuIEluIHRoaXMgY2FzZSBgc2V0SW1tZWRpYXRlYCBpcyBwcmVmZXJyZWQgYmVjYXVzZVxuICAgICAgICAvLyAgICBpdCBpcyBmYXN0ZXIuIEJyb3dzZXJpZnkncyBgcHJvY2Vzcy50b1N0cmluZygpYCB5aWVsZHNcbiAgICAgICAgLy8gICBcIltvYmplY3QgT2JqZWN0XVwiLCB3aGlsZSBpbiBhIHJlYWwgTm9kZSBlbnZpcm9ubWVudFxuICAgICAgICAvLyAgIGBwcm9jZXNzLm5leHRUaWNrKClgIHlpZWxkcyBcIltvYmplY3QgcHJvY2Vzc11cIi5cbiAgICAgICAgaXNOb2RlSlMgPSB0cnVlO1xuXG4gICAgICAgIHJlcXVlc3RUaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhmbHVzaCk7XG4gICAgICAgIH07XG5cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZXRJbW1lZGlhdGUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAvLyBJbiBJRTEwLCBOb2RlLmpzIDAuOSssIG9yIGh0dHBzOi8vZ2l0aHViLmNvbS9Ob2JsZUpTL3NldEltbWVkaWF0ZVxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgcmVxdWVzdFRpY2sgPSBzZXRJbW1lZGlhdGUuYmluZCh3aW5kb3csIGZsdXNoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlcXVlc3RUaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHNldEltbWVkaWF0ZShmbHVzaCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAvLyBtb2Rlcm4gYnJvd3NlcnNcbiAgICAgICAgLy8gaHR0cDovL3d3dy5ub25ibG9ja2luZy5pby8yMDExLzA2L3dpbmRvd25leHR0aWNrLmh0bWxcbiAgICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgICAgLy8gQXQgbGVhc3QgU2FmYXJpIFZlcnNpb24gNi4wLjUgKDg1MzYuMzAuMSkgaW50ZXJtaXR0ZW50bHkgY2Fubm90IGNyZWF0ZVxuICAgICAgICAvLyB3b3JraW5nIG1lc3NhZ2UgcG9ydHMgdGhlIGZpcnN0IHRpbWUgYSBwYWdlIGxvYWRzLlxuICAgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlcXVlc3RUaWNrID0gcmVxdWVzdFBvcnRUaWNrO1xuICAgICAgICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBmbHVzaDtcbiAgICAgICAgICAgIGZsdXNoKCk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciByZXF1ZXN0UG9ydFRpY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBPcGVyYSByZXF1aXJlcyB1cyB0byBwcm92aWRlIGEgbWVzc2FnZSBwYXlsb2FkLCByZWdhcmRsZXNzIG9mXG4gICAgICAgICAgICAvLyB3aGV0aGVyIHdlIHVzZSBpdC5cbiAgICAgICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG4gICAgICAgIH07XG4gICAgICAgIHJlcXVlc3RUaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2V0VGltZW91dChmbHVzaCwgMCk7XG4gICAgICAgICAgICByZXF1ZXN0UG9ydFRpY2soKTtcbiAgICAgICAgfTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG9sZCBicm93c2Vyc1xuICAgICAgICByZXF1ZXN0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZmx1c2gsIDApO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyBydW5zIGEgdGFzayBhZnRlciBhbGwgb3RoZXIgdGFza3MgaGF2ZSBiZWVuIHJ1blxuICAgIC8vIHRoaXMgaXMgdXNlZnVsIGZvciB1bmhhbmRsZWQgcmVqZWN0aW9uIHRyYWNraW5nIHRoYXQgbmVlZHMgdG8gaGFwcGVuXG4gICAgLy8gYWZ0ZXIgYWxsIGB0aGVuYGQgdGFza3MgaGF2ZSBiZWVuIHJ1bi5cbiAgICBuZXh0VGljay5ydW5BZnRlciA9IGZ1bmN0aW9uICh0YXNrKSB7XG4gICAgICAgIGxhdGVyUXVldWUucHVzaCh0YXNrKTtcbiAgICAgICAgaWYgKCFmbHVzaGluZykge1xuICAgICAgICAgICAgZmx1c2hpbmcgPSB0cnVlO1xuICAgICAgICAgICAgcmVxdWVzdFRpY2soKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIG5leHRUaWNrO1xufSkoKTtcblxuLy8gQXR0ZW1wdCB0byBtYWtlIGdlbmVyaWNzIHNhZmUgaW4gdGhlIGZhY2Ugb2YgZG93bnN0cmVhbVxuLy8gbW9kaWZpY2F0aW9ucy5cbi8vIFRoZXJlIGlzIG5vIHNpdHVhdGlvbiB3aGVyZSB0aGlzIGlzIG5lY2Vzc2FyeS5cbi8vIElmIHlvdSBuZWVkIGEgc2VjdXJpdHkgZ3VhcmFudGVlLCB0aGVzZSBwcmltb3JkaWFscyBuZWVkIHRvIGJlXG4vLyBkZWVwbHkgZnJvemVuIGFueXdheSwgYW5kIGlmIHlvdSBkb27igJl0IG5lZWQgYSBzZWN1cml0eSBndWFyYW50ZWUsXG4vLyB0aGlzIGlzIGp1c3QgcGxhaW4gcGFyYW5vaWQuXG4vLyBIb3dldmVyLCB0aGlzICoqbWlnaHQqKiBoYXZlIHRoZSBuaWNlIHNpZGUtZWZmZWN0IG9mIHJlZHVjaW5nIHRoZSBzaXplIG9mXG4vLyB0aGUgbWluaWZpZWQgY29kZSBieSByZWR1Y2luZyB4LmNhbGwoKSB0byBtZXJlbHkgeCgpXG4vLyBTZWUgTWFyayBNaWxsZXLigJlzIGV4cGxhbmF0aW9uIG9mIHdoYXQgdGhpcyBkb2VzLlxuLy8gaHR0cDovL3dpa2kuZWNtYXNjcmlwdC5vcmcvZG9rdS5waHA/aWQ9Y29udmVudGlvbnM6c2FmZV9tZXRhX3Byb2dyYW1taW5nXG52YXIgY2FsbCA9IEZ1bmN0aW9uLmNhbGw7XG5mdW5jdGlvbiB1bmN1cnJ5VGhpcyhmKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGNhbGwuYXBwbHkoZiwgYXJndW1lbnRzKTtcbiAgICB9O1xufVxuLy8gVGhpcyBpcyBlcXVpdmFsZW50LCBidXQgc2xvd2VyOlxuLy8gdW5jdXJyeVRoaXMgPSBGdW5jdGlvbl9iaW5kLmJpbmQoRnVuY3Rpb25fYmluZC5jYWxsKTtcbi8vIGh0dHA6Ly9qc3BlcmYuY29tL3VuY3Vycnl0aGlzXG5cbnZhciBhcnJheV9zbGljZSA9IHVuY3VycnlUaGlzKEFycmF5LnByb3RvdHlwZS5zbGljZSk7XG5cbnZhciBhcnJheV9yZWR1Y2UgPSB1bmN1cnJ5VGhpcyhcbiAgICBBcnJheS5wcm90b3R5cGUucmVkdWNlIHx8IGZ1bmN0aW9uIChjYWxsYmFjaywgYmFzaXMpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gMCxcbiAgICAgICAgICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoO1xuICAgICAgICAvLyBjb25jZXJuaW5nIHRoZSBpbml0aWFsIHZhbHVlLCBpZiBvbmUgaXMgbm90IHByb3ZpZGVkXG4gICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAvLyBzZWVrIHRvIHRoZSBmaXJzdCB2YWx1ZSBpbiB0aGUgYXJyYXksIGFjY291bnRpbmdcbiAgICAgICAgICAgIC8vIGZvciB0aGUgcG9zc2liaWxpdHkgdGhhdCBpcyBpcyBhIHNwYXJzZSBhcnJheVxuICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCBpbiB0aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2lzID0gdGhpc1tpbmRleCsrXTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICgrK2luZGV4ID49IGxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSB3aGlsZSAoMSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVkdWNlXG4gICAgICAgIGZvciAoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgLy8gYWNjb3VudCBmb3IgdGhlIHBvc3NpYmlsaXR5IHRoYXQgdGhlIGFycmF5IGlzIHNwYXJzZVxuICAgICAgICAgICAgaWYgKGluZGV4IGluIHRoaXMpIHtcbiAgICAgICAgICAgICAgICBiYXNpcyA9IGNhbGxiYWNrKGJhc2lzLCB0aGlzW2luZGV4XSwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBiYXNpcztcbiAgICB9XG4pO1xuXG52YXIgYXJyYXlfaW5kZXhPZiA9IHVuY3VycnlUaGlzKFxuICAgIEFycmF5LnByb3RvdHlwZS5pbmRleE9mIHx8IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAvLyBub3QgYSB2ZXJ5IGdvb2Qgc2hpbSwgYnV0IGdvb2QgZW5vdWdoIGZvciBvdXIgb25lIHVzZSBvZiBpdFxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0aGlzW2ldID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4pO1xuXG52YXIgYXJyYXlfbWFwID0gdW5jdXJyeVRoaXMoXG4gICAgQXJyYXkucHJvdG90eXBlLm1hcCB8fCBmdW5jdGlvbiAoY2FsbGJhY2ssIHRoaXNwKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgdmFyIGNvbGxlY3QgPSBbXTtcbiAgICAgICAgYXJyYXlfcmVkdWNlKHNlbGYsIGZ1bmN0aW9uICh1bmRlZmluZWQsIHZhbHVlLCBpbmRleCkge1xuICAgICAgICAgICAgY29sbGVjdC5wdXNoKGNhbGxiYWNrLmNhbGwodGhpc3AsIHZhbHVlLCBpbmRleCwgc2VsZikpO1xuICAgICAgICB9LCB2b2lkIDApO1xuICAgICAgICByZXR1cm4gY29sbGVjdDtcbiAgICB9XG4pO1xuXG52YXIgb2JqZWN0X2NyZWF0ZSA9IE9iamVjdC5jcmVhdGUgfHwgZnVuY3Rpb24gKHByb3RvdHlwZSkge1xuICAgIGZ1bmN0aW9uIFR5cGUoKSB7IH1cbiAgICBUeXBlLnByb3RvdHlwZSA9IHByb3RvdHlwZTtcbiAgICByZXR1cm4gbmV3IFR5cGUoKTtcbn07XG5cbnZhciBvYmplY3RfaGFzT3duUHJvcGVydHkgPSB1bmN1cnJ5VGhpcyhPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5KTtcblxudmFyIG9iamVjdF9rZXlzID0gT2JqZWN0LmtleXMgfHwgZnVuY3Rpb24gKG9iamVjdCkge1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgICAgICBpZiAob2JqZWN0X2hhc093blByb3BlcnR5KG9iamVjdCwga2V5KSkge1xuICAgICAgICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGtleXM7XG59O1xuXG52YXIgb2JqZWN0X3RvU3RyaW5nID0gdW5jdXJyeVRoaXMoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZyk7XG5cbmZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSBPYmplY3QodmFsdWUpO1xufVxuXG4vLyBnZW5lcmF0b3IgcmVsYXRlZCBzaGltc1xuXG4vLyBGSVhNRTogUmVtb3ZlIHRoaXMgZnVuY3Rpb24gb25jZSBFUzYgZ2VuZXJhdG9ycyBhcmUgaW4gU3BpZGVyTW9ua2V5LlxuZnVuY3Rpb24gaXNTdG9wSXRlcmF0aW9uKGV4Y2VwdGlvbikge1xuICAgIHJldHVybiAoXG4gICAgICAgIG9iamVjdF90b1N0cmluZyhleGNlcHRpb24pID09PSBcIltvYmplY3QgU3RvcEl0ZXJhdGlvbl1cIiB8fFxuICAgICAgICBleGNlcHRpb24gaW5zdGFuY2VvZiBRUmV0dXJuVmFsdWVcbiAgICApO1xufVxuXG4vLyBGSVhNRTogUmVtb3ZlIHRoaXMgaGVscGVyIGFuZCBRLnJldHVybiBvbmNlIEVTNiBnZW5lcmF0b3JzIGFyZSBpblxuLy8gU3BpZGVyTW9ua2V5LlxudmFyIFFSZXR1cm5WYWx1ZTtcbmlmICh0eXBlb2YgUmV0dXJuVmFsdWUgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBRUmV0dXJuVmFsdWUgPSBSZXR1cm5WYWx1ZTtcbn0gZWxzZSB7XG4gICAgUVJldHVyblZhbHVlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9O1xufVxuXG4vLyBsb25nIHN0YWNrIHRyYWNlc1xuXG52YXIgU1RBQ0tfSlVNUF9TRVBBUkFUT1IgPSBcIkZyb20gcHJldmlvdXMgZXZlbnQ6XCI7XG5cbmZ1bmN0aW9uIG1ha2VTdGFja1RyYWNlTG9uZyhlcnJvciwgcHJvbWlzZSkge1xuICAgIC8vIElmIHBvc3NpYmxlLCB0cmFuc2Zvcm0gdGhlIGVycm9yIHN0YWNrIHRyYWNlIGJ5IHJlbW92aW5nIE5vZGUgYW5kIFFcbiAgICAvLyBjcnVmdCwgdGhlbiBjb25jYXRlbmF0aW5nIHdpdGggdGhlIHN0YWNrIHRyYWNlIG9mIGBwcm9taXNlYC4gU2VlICM1Ny5cbiAgICBpZiAoaGFzU3RhY2tzICYmXG4gICAgICAgIHByb21pc2Uuc3RhY2sgJiZcbiAgICAgICAgdHlwZW9mIGVycm9yID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIGVycm9yICE9PSBudWxsICYmXG4gICAgICAgIGVycm9yLnN0YWNrICYmXG4gICAgICAgIGVycm9yLnN0YWNrLmluZGV4T2YoU1RBQ0tfSlVNUF9TRVBBUkFUT1IpID09PSAtMVxuICAgICkge1xuICAgICAgICB2YXIgc3RhY2tzID0gW107XG4gICAgICAgIGZvciAodmFyIHAgPSBwcm9taXNlOyAhIXA7IHAgPSBwLnNvdXJjZSkge1xuICAgICAgICAgICAgaWYgKHAuc3RhY2spIHtcbiAgICAgICAgICAgICAgICBzdGFja3MudW5zaGlmdChwLnN0YWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzdGFja3MudW5zaGlmdChlcnJvci5zdGFjayk7XG5cbiAgICAgICAgdmFyIGNvbmNhdGVkU3RhY2tzID0gc3RhY2tzLmpvaW4oXCJcXG5cIiArIFNUQUNLX0pVTVBfU0VQQVJBVE9SICsgXCJcXG5cIik7XG4gICAgICAgIGVycm9yLnN0YWNrID0gZmlsdGVyU3RhY2tTdHJpbmcoY29uY2F0ZWRTdGFja3MpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZmlsdGVyU3RhY2tTdHJpbmcoc3RhY2tTdHJpbmcpIHtcbiAgICB2YXIgbGluZXMgPSBzdGFja1N0cmluZy5zcGxpdChcIlxcblwiKTtcbiAgICB2YXIgZGVzaXJlZExpbmVzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7ICsraSkge1xuICAgICAgICB2YXIgbGluZSA9IGxpbmVzW2ldO1xuXG4gICAgICAgIGlmICghaXNJbnRlcm5hbEZyYW1lKGxpbmUpICYmICFpc05vZGVGcmFtZShsaW5lKSAmJiBsaW5lKSB7XG4gICAgICAgICAgICBkZXNpcmVkTGluZXMucHVzaChsaW5lKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGVzaXJlZExpbmVzLmpvaW4oXCJcXG5cIik7XG59XG5cbmZ1bmN0aW9uIGlzTm9kZUZyYW1lKHN0YWNrTGluZSkge1xuICAgIHJldHVybiBzdGFja0xpbmUuaW5kZXhPZihcIihtb2R1bGUuanM6XCIpICE9PSAtMSB8fFxuICAgICAgICAgICBzdGFja0xpbmUuaW5kZXhPZihcIihub2RlLmpzOlwiKSAhPT0gLTE7XG59XG5cbmZ1bmN0aW9uIGdldEZpbGVOYW1lQW5kTGluZU51bWJlcihzdGFja0xpbmUpIHtcbiAgICAvLyBOYW1lZCBmdW5jdGlvbnM6IFwiYXQgZnVuY3Rpb25OYW1lIChmaWxlbmFtZTpsaW5lTnVtYmVyOmNvbHVtbk51bWJlcilcIlxuICAgIC8vIEluIElFMTAgZnVuY3Rpb24gbmFtZSBjYW4gaGF2ZSBzcGFjZXMgKFwiQW5vbnltb3VzIGZ1bmN0aW9uXCIpIE9fb1xuICAgIHZhciBhdHRlbXB0MSA9IC9hdCAuKyBcXCgoLispOihcXGQrKTooPzpcXGQrKVxcKSQvLmV4ZWMoc3RhY2tMaW5lKTtcbiAgICBpZiAoYXR0ZW1wdDEpIHtcbiAgICAgICAgcmV0dXJuIFthdHRlbXB0MVsxXSwgTnVtYmVyKGF0dGVtcHQxWzJdKV07XG4gICAgfVxuXG4gICAgLy8gQW5vbnltb3VzIGZ1bmN0aW9uczogXCJhdCBmaWxlbmFtZTpsaW5lTnVtYmVyOmNvbHVtbk51bWJlclwiXG4gICAgdmFyIGF0dGVtcHQyID0gL2F0IChbXiBdKyk6KFxcZCspOig/OlxcZCspJC8uZXhlYyhzdGFja0xpbmUpO1xuICAgIGlmIChhdHRlbXB0Mikge1xuICAgICAgICByZXR1cm4gW2F0dGVtcHQyWzFdLCBOdW1iZXIoYXR0ZW1wdDJbMl0pXTtcbiAgICB9XG5cbiAgICAvLyBGaXJlZm94IHN0eWxlOiBcImZ1bmN0aW9uQGZpbGVuYW1lOmxpbmVOdW1iZXIgb3IgQGZpbGVuYW1lOmxpbmVOdW1iZXJcIlxuICAgIHZhciBhdHRlbXB0MyA9IC8uKkAoLispOihcXGQrKSQvLmV4ZWMoc3RhY2tMaW5lKTtcbiAgICBpZiAoYXR0ZW1wdDMpIHtcbiAgICAgICAgcmV0dXJuIFthdHRlbXB0M1sxXSwgTnVtYmVyKGF0dGVtcHQzWzJdKV07XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpc0ludGVybmFsRnJhbWUoc3RhY2tMaW5lKSB7XG4gICAgdmFyIGZpbGVOYW1lQW5kTGluZU51bWJlciA9IGdldEZpbGVOYW1lQW5kTGluZU51bWJlcihzdGFja0xpbmUpO1xuXG4gICAgaWYgKCFmaWxlTmFtZUFuZExpbmVOdW1iZXIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHZhciBmaWxlTmFtZSA9IGZpbGVOYW1lQW5kTGluZU51bWJlclswXTtcbiAgICB2YXIgbGluZU51bWJlciA9IGZpbGVOYW1lQW5kTGluZU51bWJlclsxXTtcblxuICAgIHJldHVybiBmaWxlTmFtZSA9PT0gcUZpbGVOYW1lICYmXG4gICAgICAgIGxpbmVOdW1iZXIgPj0gcVN0YXJ0aW5nTGluZSAmJlxuICAgICAgICBsaW5lTnVtYmVyIDw9IHFFbmRpbmdMaW5lO1xufVxuXG4vLyBkaXNjb3ZlciBvd24gZmlsZSBuYW1lIGFuZCBsaW5lIG51bWJlciByYW5nZSBmb3IgZmlsdGVyaW5nIHN0YWNrXG4vLyB0cmFjZXNcbmZ1bmN0aW9uIGNhcHR1cmVMaW5lKCkge1xuICAgIGlmICghaGFzU3RhY2tzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHZhciBsaW5lcyA9IGUuc3RhY2suc3BsaXQoXCJcXG5cIik7XG4gICAgICAgIHZhciBmaXJzdExpbmUgPSBsaW5lc1swXS5pbmRleE9mKFwiQFwiKSA+IDAgPyBsaW5lc1sxXSA6IGxpbmVzWzJdO1xuICAgICAgICB2YXIgZmlsZU5hbWVBbmRMaW5lTnVtYmVyID0gZ2V0RmlsZU5hbWVBbmRMaW5lTnVtYmVyKGZpcnN0TGluZSk7XG4gICAgICAgIGlmICghZmlsZU5hbWVBbmRMaW5lTnVtYmVyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBxRmlsZU5hbWUgPSBmaWxlTmFtZUFuZExpbmVOdW1iZXJbMF07XG4gICAgICAgIHJldHVybiBmaWxlTmFtZUFuZExpbmVOdW1iZXJbMV07XG4gICAgfVxufVxuXG5mdW5jdGlvbiBkZXByZWNhdGUoY2FsbGJhY2ssIG5hbWUsIGFsdGVybmF0aXZlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmXG4gICAgICAgICAgICB0eXBlb2YgY29uc29sZS53YXJuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihuYW1lICsgXCIgaXMgZGVwcmVjYXRlZCwgdXNlIFwiICsgYWx0ZXJuYXRpdmUgK1xuICAgICAgICAgICAgICAgICAgICAgICAgIFwiIGluc3RlYWQuXCIsIG5ldyBFcnJvcihcIlwiKS5zdGFjayk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KGNhbGxiYWNrLCBhcmd1bWVudHMpO1xuICAgIH07XG59XG5cbi8vIGVuZCBvZiBzaGltc1xuLy8gYmVnaW5uaW5nIG9mIHJlYWwgd29ya1xuXG4vKipcbiAqIENvbnN0cnVjdHMgYSBwcm9taXNlIGZvciBhbiBpbW1lZGlhdGUgcmVmZXJlbmNlLCBwYXNzZXMgcHJvbWlzZXMgdGhyb3VnaCwgb3JcbiAqIGNvZXJjZXMgcHJvbWlzZXMgZnJvbSBkaWZmZXJlbnQgc3lzdGVtcy5cbiAqIEBwYXJhbSB2YWx1ZSBpbW1lZGlhdGUgcmVmZXJlbmNlIG9yIHByb21pc2VcbiAqL1xuZnVuY3Rpb24gUSh2YWx1ZSkge1xuICAgIC8vIElmIHRoZSBvYmplY3QgaXMgYWxyZWFkeSBhIFByb21pc2UsIHJldHVybiBpdCBkaXJlY3RseS4gIFRoaXMgZW5hYmxlc1xuICAgIC8vIHRoZSByZXNvbHZlIGZ1bmN0aW9uIHRvIGJvdGggYmUgdXNlZCB0byBjcmVhdGVkIHJlZmVyZW5jZXMgZnJvbSBvYmplY3RzLFxuICAgIC8vIGJ1dCB0byB0b2xlcmFibHkgY29lcmNlIG5vbi1wcm9taXNlcyB0byBwcm9taXNlcy5cbiAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgICAvLyBhc3NpbWlsYXRlIHRoZW5hYmxlc1xuICAgIGlmIChpc1Byb21pc2VBbGlrZSh2YWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIGNvZXJjZSh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZ1bGZpbGwodmFsdWUpO1xuICAgIH1cbn1cblEucmVzb2x2ZSA9IFE7XG5cbi8qKlxuICogUGVyZm9ybXMgYSB0YXNrIGluIGEgZnV0dXJlIHR1cm4gb2YgdGhlIGV2ZW50IGxvb3AuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB0YXNrXG4gKi9cblEubmV4dFRpY2sgPSBuZXh0VGljaztcblxuLyoqXG4gKiBDb250cm9scyB3aGV0aGVyIG9yIG5vdCBsb25nIHN0YWNrIHRyYWNlcyB3aWxsIGJlIG9uXG4gKi9cblEubG9uZ1N0YWNrU3VwcG9ydCA9IGZhbHNlO1xuXG4vLyBlbmFibGUgbG9uZyBzdGFja3MgaWYgUV9ERUJVRyBpcyBzZXRcbmlmICh0eXBlb2YgcHJvY2VzcyA9PT0gXCJvYmplY3RcIiAmJiBwcm9jZXNzICYmIHByb2Nlc3MuZW52ICYmIHByb2Nlc3MuZW52LlFfREVCVUcpIHtcbiAgICBRLmxvbmdTdGFja1N1cHBvcnQgPSB0cnVlO1xufVxuXG4vKipcbiAqIENvbnN0cnVjdHMgYSB7cHJvbWlzZSwgcmVzb2x2ZSwgcmVqZWN0fSBvYmplY3QuXG4gKlxuICogYHJlc29sdmVgIGlzIGEgY2FsbGJhY2sgdG8gaW52b2tlIHdpdGggYSBtb3JlIHJlc29sdmVkIHZhbHVlIGZvciB0aGVcbiAqIHByb21pc2UuIFRvIGZ1bGZpbGwgdGhlIHByb21pc2UsIGludm9rZSBgcmVzb2x2ZWAgd2l0aCBhbnkgdmFsdWUgdGhhdCBpc1xuICogbm90IGEgdGhlbmFibGUuIFRvIHJlamVjdCB0aGUgcHJvbWlzZSwgaW52b2tlIGByZXNvbHZlYCB3aXRoIGEgcmVqZWN0ZWRcbiAqIHRoZW5hYmxlLCBvciBpbnZva2UgYHJlamVjdGAgd2l0aCB0aGUgcmVhc29uIGRpcmVjdGx5LiBUbyByZXNvbHZlIHRoZVxuICogcHJvbWlzZSB0byBhbm90aGVyIHRoZW5hYmxlLCB0aHVzIHB1dHRpbmcgaXQgaW4gdGhlIHNhbWUgc3RhdGUsIGludm9rZVxuICogYHJlc29sdmVgIHdpdGggdGhhdCBvdGhlciB0aGVuYWJsZS5cbiAqL1xuUS5kZWZlciA9IGRlZmVyO1xuZnVuY3Rpb24gZGVmZXIoKSB7XG4gICAgLy8gaWYgXCJtZXNzYWdlc1wiIGlzIGFuIFwiQXJyYXlcIiwgdGhhdCBpbmRpY2F0ZXMgdGhhdCB0aGUgcHJvbWlzZSBoYXMgbm90IHlldFxuICAgIC8vIGJlZW4gcmVzb2x2ZWQuICBJZiBpdCBpcyBcInVuZGVmaW5lZFwiLCBpdCBoYXMgYmVlbiByZXNvbHZlZC4gIEVhY2hcbiAgICAvLyBlbGVtZW50IG9mIHRoZSBtZXNzYWdlcyBhcnJheSBpcyBpdHNlbGYgYW4gYXJyYXkgb2YgY29tcGxldGUgYXJndW1lbnRzIHRvXG4gICAgLy8gZm9yd2FyZCB0byB0aGUgcmVzb2x2ZWQgcHJvbWlzZS4gIFdlIGNvZXJjZSB0aGUgcmVzb2x1dGlvbiB2YWx1ZSB0byBhXG4gICAgLy8gcHJvbWlzZSB1c2luZyB0aGUgYHJlc29sdmVgIGZ1bmN0aW9uIGJlY2F1c2UgaXQgaGFuZGxlcyBib3RoIGZ1bGx5XG4gICAgLy8gbm9uLXRoZW5hYmxlIHZhbHVlcyBhbmQgb3RoZXIgdGhlbmFibGVzIGdyYWNlZnVsbHkuXG4gICAgdmFyIG1lc3NhZ2VzID0gW10sIHByb2dyZXNzTGlzdGVuZXJzID0gW10sIHJlc29sdmVkUHJvbWlzZTtcblxuICAgIHZhciBkZWZlcnJlZCA9IG9iamVjdF9jcmVhdGUoZGVmZXIucHJvdG90eXBlKTtcbiAgICB2YXIgcHJvbWlzZSA9IG9iamVjdF9jcmVhdGUoUHJvbWlzZS5wcm90b3R5cGUpO1xuXG4gICAgcHJvbWlzZS5wcm9taXNlRGlzcGF0Y2ggPSBmdW5jdGlvbiAocmVzb2x2ZSwgb3AsIG9wZXJhbmRzKSB7XG4gICAgICAgIHZhciBhcmdzID0gYXJyYXlfc2xpY2UoYXJndW1lbnRzKTtcbiAgICAgICAgaWYgKG1lc3NhZ2VzKSB7XG4gICAgICAgICAgICBtZXNzYWdlcy5wdXNoKGFyZ3MpO1xuICAgICAgICAgICAgaWYgKG9wID09PSBcIndoZW5cIiAmJiBvcGVyYW5kc1sxXSkgeyAvLyBwcm9ncmVzcyBvcGVyYW5kXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NMaXN0ZW5lcnMucHVzaChvcGVyYW5kc1sxXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBRLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlZFByb21pc2UucHJvbWlzZURpc3BhdGNoLmFwcGx5KHJlc29sdmVkUHJvbWlzZSwgYXJncyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBYWFggZGVwcmVjYXRlZFxuICAgIHByb21pc2UudmFsdWVPZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKG1lc3NhZ2VzKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmVhcmVyVmFsdWUgPSBuZWFyZXIocmVzb2x2ZWRQcm9taXNlKTtcbiAgICAgICAgaWYgKGlzUHJvbWlzZShuZWFyZXJWYWx1ZSkpIHtcbiAgICAgICAgICAgIHJlc29sdmVkUHJvbWlzZSA9IG5lYXJlclZhbHVlOyAvLyBzaG9ydGVuIGNoYWluXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5lYXJlclZhbHVlO1xuICAgIH07XG5cbiAgICBwcm9taXNlLmluc3BlY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghcmVzb2x2ZWRQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm4geyBzdGF0ZTogXCJwZW5kaW5nXCIgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzb2x2ZWRQcm9taXNlLmluc3BlY3QoKTtcbiAgICB9O1xuXG4gICAgaWYgKFEubG9uZ1N0YWNrU3VwcG9ydCAmJiBoYXNTdGFja3MpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAvLyBOT1RFOiBkb24ndCB0cnkgdG8gdXNlIGBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZWAgb3IgdHJhbnNmZXIgdGhlXG4gICAgICAgICAgICAvLyBhY2Nlc3NvciBhcm91bmQ7IHRoYXQgY2F1c2VzIG1lbW9yeSBsZWFrcyBhcyBwZXIgR0gtMTExLiBKdXN0XG4gICAgICAgICAgICAvLyByZWlmeSB0aGUgc3RhY2sgdHJhY2UgYXMgYSBzdHJpbmcgQVNBUC5cbiAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAvLyBBdCB0aGUgc2FtZSB0aW1lLCBjdXQgb2ZmIHRoZSBmaXJzdCBsaW5lOyBpdCdzIGFsd2F5cyBqdXN0XG4gICAgICAgICAgICAvLyBcIltvYmplY3QgUHJvbWlzZV1cXG5cIiwgYXMgcGVyIHRoZSBgdG9TdHJpbmdgLlxuICAgICAgICAgICAgcHJvbWlzZS5zdGFjayA9IGUuc3RhY2suc3Vic3RyaW5nKGUuc3RhY2suaW5kZXhPZihcIlxcblwiKSArIDEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gTk9URTogd2UgZG8gdGhlIGNoZWNrcyBmb3IgYHJlc29sdmVkUHJvbWlzZWAgaW4gZWFjaCBtZXRob2QsIGluc3RlYWQgb2ZcbiAgICAvLyBjb25zb2xpZGF0aW5nIHRoZW0gaW50byBgYmVjb21lYCwgc2luY2Ugb3RoZXJ3aXNlIHdlJ2QgY3JlYXRlIG5ld1xuICAgIC8vIHByb21pc2VzIHdpdGggdGhlIGxpbmVzIGBiZWNvbWUod2hhdGV2ZXIodmFsdWUpKWAuIFNlZSBlLmcuIEdILTI1Mi5cblxuICAgIGZ1bmN0aW9uIGJlY29tZShuZXdQcm9taXNlKSB7XG4gICAgICAgIHJlc29sdmVkUHJvbWlzZSA9IG5ld1Byb21pc2U7XG4gICAgICAgIHByb21pc2Uuc291cmNlID0gbmV3UHJvbWlzZTtcblxuICAgICAgICBhcnJheV9yZWR1Y2UobWVzc2FnZXMsIGZ1bmN0aW9uICh1bmRlZmluZWQsIG1lc3NhZ2UpIHtcbiAgICAgICAgICAgIFEubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIG5ld1Byb21pc2UucHJvbWlzZURpc3BhdGNoLmFwcGx5KG5ld1Byb21pc2UsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIHZvaWQgMCk7XG5cbiAgICAgICAgbWVzc2FnZXMgPSB2b2lkIDA7XG4gICAgICAgIHByb2dyZXNzTGlzdGVuZXJzID0gdm9pZCAwO1xuICAgIH1cblxuICAgIGRlZmVycmVkLnByb21pc2UgPSBwcm9taXNlO1xuICAgIGRlZmVycmVkLnJlc29sdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgaWYgKHJlc29sdmVkUHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgYmVjb21lKFEodmFsdWUpKTtcbiAgICB9O1xuXG4gICAgZGVmZXJyZWQuZnVsZmlsbCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBpZiAocmVzb2x2ZWRQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBiZWNvbWUoZnVsZmlsbCh2YWx1ZSkpO1xuICAgIH07XG4gICAgZGVmZXJyZWQucmVqZWN0ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICBpZiAocmVzb2x2ZWRQcm9taXNlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBiZWNvbWUocmVqZWN0KHJlYXNvbikpO1xuICAgIH07XG4gICAgZGVmZXJyZWQubm90aWZ5ID0gZnVuY3Rpb24gKHByb2dyZXNzKSB7XG4gICAgICAgIGlmIChyZXNvbHZlZFByb21pc2UpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGFycmF5X3JlZHVjZShwcm9ncmVzc0xpc3RlbmVycywgZnVuY3Rpb24gKHVuZGVmaW5lZCwgcHJvZ3Jlc3NMaXN0ZW5lcikge1xuICAgICAgICAgICAgUS5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NMaXN0ZW5lcihwcm9ncmVzcyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgdm9pZCAwKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIGRlZmVycmVkO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBOb2RlLXN0eWxlIGNhbGxiYWNrIHRoYXQgd2lsbCByZXNvbHZlIG9yIHJlamVjdCB0aGUgZGVmZXJyZWRcbiAqIHByb21pc2UuXG4gKiBAcmV0dXJucyBhIG5vZGViYWNrXG4gKi9cbmRlZmVyLnByb3RvdHlwZS5tYWtlTm9kZVJlc29sdmVyID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXR1cm4gZnVuY3Rpb24gKGVycm9yLCB2YWx1ZSkge1xuICAgICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgICAgIHNlbGYucmVqZWN0KGVycm9yKTtcbiAgICAgICAgfSBlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMikge1xuICAgICAgICAgICAgc2VsZi5yZXNvbHZlKGFycmF5X3NsaWNlKGFyZ3VtZW50cywgMSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc2VsZi5yZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH07XG59O1xuXG4vKipcbiAqIEBwYXJhbSByZXNvbHZlciB7RnVuY3Rpb259IGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIG5vdGhpbmcgYW5kIGFjY2VwdHNcbiAqIHRoZSByZXNvbHZlLCByZWplY3QsIGFuZCBub3RpZnkgZnVuY3Rpb25zIGZvciBhIGRlZmVycmVkLlxuICogQHJldHVybnMgYSBwcm9taXNlIHRoYXQgbWF5IGJlIHJlc29sdmVkIHdpdGggdGhlIGdpdmVuIHJlc29sdmUgYW5kIHJlamVjdFxuICogZnVuY3Rpb25zLCBvciByZWplY3RlZCBieSBhIHRocm93biBleGNlcHRpb24gaW4gcmVzb2x2ZXJcbiAqL1xuUS5Qcm9taXNlID0gcHJvbWlzZTsgLy8gRVM2XG5RLnByb21pc2UgPSBwcm9taXNlO1xuZnVuY3Rpb24gcHJvbWlzZShyZXNvbHZlcikge1xuICAgIGlmICh0eXBlb2YgcmVzb2x2ZXIgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwicmVzb2x2ZXIgbXVzdCBiZSBhIGZ1bmN0aW9uLlwiKTtcbiAgICB9XG4gICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICB0cnkge1xuICAgICAgICByZXNvbHZlcihkZWZlcnJlZC5yZXNvbHZlLCBkZWZlcnJlZC5yZWplY3QsIGRlZmVycmVkLm5vdGlmeSk7XG4gICAgfSBjYXRjaCAocmVhc29uKSB7XG4gICAgICAgIGRlZmVycmVkLnJlamVjdChyZWFzb24pO1xuICAgIH1cbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn1cblxucHJvbWlzZS5yYWNlID0gcmFjZTsgLy8gRVM2XG5wcm9taXNlLmFsbCA9IGFsbDsgLy8gRVM2XG5wcm9taXNlLnJlamVjdCA9IHJlamVjdDsgLy8gRVM2XG5wcm9taXNlLnJlc29sdmUgPSBROyAvLyBFUzZcblxuLy8gWFhYIGV4cGVyaW1lbnRhbC4gIFRoaXMgbWV0aG9kIGlzIGEgd2F5IHRvIGRlbm90ZSB0aGF0IGEgbG9jYWwgdmFsdWUgaXNcbi8vIHNlcmlhbGl6YWJsZSBhbmQgc2hvdWxkIGJlIGltbWVkaWF0ZWx5IGRpc3BhdGNoZWQgdG8gYSByZW1vdGUgdXBvbiByZXF1ZXN0LFxuLy8gaW5zdGVhZCBvZiBwYXNzaW5nIGEgcmVmZXJlbmNlLlxuUS5wYXNzQnlDb3B5ID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgIC8vZnJlZXplKG9iamVjdCk7XG4gICAgLy9wYXNzQnlDb3BpZXMuc2V0KG9iamVjdCwgdHJ1ZSk7XG4gICAgcmV0dXJuIG9iamVjdDtcbn07XG5cblByb21pc2UucHJvdG90eXBlLnBhc3NCeUNvcHkgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy9mcmVlemUob2JqZWN0KTtcbiAgICAvL3Bhc3NCeUNvcGllcy5zZXQob2JqZWN0LCB0cnVlKTtcbiAgICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogSWYgdHdvIHByb21pc2VzIGV2ZW50dWFsbHkgZnVsZmlsbCB0byB0aGUgc2FtZSB2YWx1ZSwgcHJvbWlzZXMgdGhhdCB2YWx1ZSxcbiAqIGJ1dCBvdGhlcndpc2UgcmVqZWN0cy5cbiAqIEBwYXJhbSB4IHtBbnkqfVxuICogQHBhcmFtIHkge0FueSp9XG4gKiBAcmV0dXJucyB7QW55Kn0gYSBwcm9taXNlIGZvciB4IGFuZCB5IGlmIHRoZXkgYXJlIHRoZSBzYW1lLCBidXQgYSByZWplY3Rpb25cbiAqIG90aGVyd2lzZS5cbiAqXG4gKi9cblEuam9pbiA9IGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgcmV0dXJuIFEoeCkuam9pbih5KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmpvaW4gPSBmdW5jdGlvbiAodGhhdCkge1xuICAgIHJldHVybiBRKFt0aGlzLCB0aGF0XSkuc3ByZWFkKGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgICAgIGlmICh4ID09PSB5KSB7XG4gICAgICAgICAgICAvLyBUT0RPOiBcIj09PVwiIHNob3VsZCBiZSBPYmplY3QuaXMgb3IgZXF1aXZcbiAgICAgICAgICAgIHJldHVybiB4O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2FuJ3Qgam9pbjogbm90IHRoZSBzYW1lOiBcIiArIHggKyBcIiBcIiArIHkpO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgZmlyc3Qgb2YgYW4gYXJyYXkgb2YgcHJvbWlzZXMgdG8gYmVjb21lIHNldHRsZWQuXG4gKiBAcGFyYW0gYW5zd2VycyB7QXJyYXlbQW55Kl19IHByb21pc2VzIHRvIHJhY2VcbiAqIEByZXR1cm5zIHtBbnkqfSB0aGUgZmlyc3QgcHJvbWlzZSB0byBiZSBzZXR0bGVkXG4gKi9cblEucmFjZSA9IHJhY2U7XG5mdW5jdGlvbiByYWNlKGFuc3dlclBzKSB7XG4gICAgcmV0dXJuIHByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvLyBTd2l0Y2ggdG8gdGhpcyBvbmNlIHdlIGNhbiBhc3N1bWUgYXQgbGVhc3QgRVM1XG4gICAgICAgIC8vIGFuc3dlclBzLmZvckVhY2goZnVuY3Rpb24gKGFuc3dlclApIHtcbiAgICAgICAgLy8gICAgIFEoYW5zd2VyUCkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAvLyB9KTtcbiAgICAgICAgLy8gVXNlIHRoaXMgaW4gdGhlIG1lYW50aW1lXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhbnN3ZXJQcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgUShhbnN3ZXJQc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cblByb21pc2UucHJvdG90eXBlLnJhY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihRLnJhY2UpO1xufTtcblxuLyoqXG4gKiBDb25zdHJ1Y3RzIGEgUHJvbWlzZSB3aXRoIGEgcHJvbWlzZSBkZXNjcmlwdG9yIG9iamVjdCBhbmQgb3B0aW9uYWwgZmFsbGJhY2tcbiAqIGZ1bmN0aW9uLiAgVGhlIGRlc2NyaXB0b3IgY29udGFpbnMgbWV0aG9kcyBsaWtlIHdoZW4ocmVqZWN0ZWQpLCBnZXQobmFtZSksXG4gKiBzZXQobmFtZSwgdmFsdWUpLCBwb3N0KG5hbWUsIGFyZ3MpLCBhbmQgZGVsZXRlKG5hbWUpLCB3aGljaCBhbGxcbiAqIHJldHVybiBlaXRoZXIgYSB2YWx1ZSwgYSBwcm9taXNlIGZvciBhIHZhbHVlLCBvciBhIHJlamVjdGlvbi4gIFRoZSBmYWxsYmFja1xuICogYWNjZXB0cyB0aGUgb3BlcmF0aW9uIG5hbWUsIGEgcmVzb2x2ZXIsIGFuZCBhbnkgZnVydGhlciBhcmd1bWVudHMgdGhhdCB3b3VsZFxuICogaGF2ZSBiZWVuIGZvcndhcmRlZCB0byB0aGUgYXBwcm9wcmlhdGUgbWV0aG9kIGFib3ZlIGhhZCBhIG1ldGhvZCBiZWVuXG4gKiBwcm92aWRlZCB3aXRoIHRoZSBwcm9wZXIgbmFtZS4gIFRoZSBBUEkgbWFrZXMgbm8gZ3VhcmFudGVlcyBhYm91dCB0aGUgbmF0dXJlXG4gKiBvZiB0aGUgcmV0dXJuZWQgb2JqZWN0LCBhcGFydCBmcm9tIHRoYXQgaXQgaXMgdXNhYmxlIHdoZXJlZXZlciBwcm9taXNlcyBhcmVcbiAqIGJvdWdodCBhbmQgc29sZC5cbiAqL1xuUS5tYWtlUHJvbWlzZSA9IFByb21pc2U7XG5mdW5jdGlvbiBQcm9taXNlKGRlc2NyaXB0b3IsIGZhbGxiYWNrLCBpbnNwZWN0KSB7XG4gICAgaWYgKGZhbGxiYWNrID09PSB2b2lkIDApIHtcbiAgICAgICAgZmFsbGJhY2sgPSBmdW5jdGlvbiAob3ApIHtcbiAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IEVycm9yKFxuICAgICAgICAgICAgICAgIFwiUHJvbWlzZSBkb2VzIG5vdCBzdXBwb3J0IG9wZXJhdGlvbjogXCIgKyBvcFxuICAgICAgICAgICAgKSk7XG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmIChpbnNwZWN0ID09PSB2b2lkIDApIHtcbiAgICAgICAgaW5zcGVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7c3RhdGU6IFwidW5rbm93blwifTtcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgcHJvbWlzZSA9IG9iamVjdF9jcmVhdGUoUHJvbWlzZS5wcm90b3R5cGUpO1xuXG4gICAgcHJvbWlzZS5wcm9taXNlRGlzcGF0Y2ggPSBmdW5jdGlvbiAocmVzb2x2ZSwgb3AsIGFyZ3MpIHtcbiAgICAgICAgdmFyIHJlc3VsdDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChkZXNjcmlwdG9yW29wXSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdCA9IGRlc2NyaXB0b3Jbb3BdLmFwcGx5KHByb21pc2UsIGFyZ3MpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBmYWxsYmFjay5jYWxsKHByb21pc2UsIG9wLCBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICByZXN1bHQgPSByZWplY3QoZXhjZXB0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHByb21pc2UuaW5zcGVjdCA9IGluc3BlY3Q7XG5cbiAgICAvLyBYWFggZGVwcmVjYXRlZCBgdmFsdWVPZmAgYW5kIGBleGNlcHRpb25gIHN1cHBvcnRcbiAgICBpZiAoaW5zcGVjdCkge1xuICAgICAgICB2YXIgaW5zcGVjdGVkID0gaW5zcGVjdCgpO1xuICAgICAgICBpZiAoaW5zcGVjdGVkLnN0YXRlID09PSBcInJlamVjdGVkXCIpIHtcbiAgICAgICAgICAgIHByb21pc2UuZXhjZXB0aW9uID0gaW5zcGVjdGVkLnJlYXNvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIHByb21pc2UudmFsdWVPZiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBpbnNwZWN0ZWQgPSBpbnNwZWN0KCk7XG4gICAgICAgICAgICBpZiAoaW5zcGVjdGVkLnN0YXRlID09PSBcInBlbmRpbmdcIiB8fFxuICAgICAgICAgICAgICAgIGluc3BlY3RlZC5zdGF0ZSA9PT0gXCJyZWplY3RlZFwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5zcGVjdGVkLnZhbHVlO1xuICAgICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gXCJbb2JqZWN0IFByb21pc2VdXCI7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS50aGVuID0gZnVuY3Rpb24gKGZ1bGZpbGxlZCwgcmVqZWN0ZWQsIHByb2dyZXNzZWQpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICB2YXIgZG9uZSA9IGZhbHNlOyAgIC8vIGVuc3VyZSB0aGUgdW50cnVzdGVkIHByb21pc2UgbWFrZXMgYXQgbW9zdCBhXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzaW5nbGUgY2FsbCB0byBvbmUgb2YgdGhlIGNhbGxiYWNrc1xuXG4gICAgZnVuY3Rpb24gX2Z1bGZpbGxlZCh2YWx1ZSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBmdWxmaWxsZWQgPT09IFwiZnVuY3Rpb25cIiA/IGZ1bGZpbGxlZCh2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVqZWN0KGV4Y2VwdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfcmVqZWN0ZWQoZXhjZXB0aW9uKSB7XG4gICAgICAgIGlmICh0eXBlb2YgcmVqZWN0ZWQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgbWFrZVN0YWNrVHJhY2VMb25nKGV4Y2VwdGlvbiwgc2VsZik7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWplY3RlZChleGNlcHRpb24pO1xuICAgICAgICAgICAgfSBjYXRjaCAobmV3RXhjZXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChuZXdFeGNlcHRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZWplY3QoZXhjZXB0aW9uKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBfcHJvZ3Jlc3NlZCh2YWx1ZSkge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHByb2dyZXNzZWQgPT09IFwiZnVuY3Rpb25cIiA/IHByb2dyZXNzZWQodmFsdWUpIDogdmFsdWU7XG4gICAgfVxuXG4gICAgUS5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYucHJvbWlzZURpc3BhdGNoKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkb25lID0gdHJ1ZTtcblxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShfZnVsZmlsbGVkKHZhbHVlKSk7XG4gICAgICAgIH0sIFwid2hlblwiLCBbZnVuY3Rpb24gKGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkb25lID0gdHJ1ZTtcblxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShfcmVqZWN0ZWQoZXhjZXB0aW9uKSk7XG4gICAgICAgIH1dKTtcbiAgICB9KTtcblxuICAgIC8vIFByb2dyZXNzIHByb3BhZ2F0b3IgbmVlZCB0byBiZSBhdHRhY2hlZCBpbiB0aGUgY3VycmVudCB0aWNrLlxuICAgIHNlbGYucHJvbWlzZURpc3BhdGNoKHZvaWQgMCwgXCJ3aGVuXCIsIFt2b2lkIDAsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgbmV3VmFsdWU7XG4gICAgICAgIHZhciB0aHJldyA9IGZhbHNlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbmV3VmFsdWUgPSBfcHJvZ3Jlc3NlZCh2YWx1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHRocmV3ID0gdHJ1ZTtcbiAgICAgICAgICAgIGlmIChRLm9uZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBRLm9uZXJyb3IoZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRocmV3KSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5ub3RpZnkobmV3VmFsdWUpO1xuICAgICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59O1xuXG5RLnRhcCA9IGZ1bmN0aW9uIChwcm9taXNlLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBRKHByb21pc2UpLnRhcChjYWxsYmFjayk7XG59O1xuXG4vKipcbiAqIFdvcmtzIGFsbW9zdCBsaWtlIFwiZmluYWxseVwiLCBidXQgbm90IGNhbGxlZCBmb3IgcmVqZWN0aW9ucy5cbiAqIE9yaWdpbmFsIHJlc29sdXRpb24gdmFsdWUgaXMgcGFzc2VkIHRocm91Z2ggY2FsbGJhY2sgdW5hZmZlY3RlZC5cbiAqIENhbGxiYWNrIG1heSByZXR1cm4gYSBwcm9taXNlIHRoYXQgd2lsbCBiZSBhd2FpdGVkIGZvci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJucyB7US5Qcm9taXNlfVxuICogQGV4YW1wbGVcbiAqIGRvU29tZXRoaW5nKClcbiAqICAgLnRoZW4oLi4uKVxuICogICAudGFwKGNvbnNvbGUubG9nKVxuICogICAudGhlbiguLi4pO1xuICovXG5Qcm9taXNlLnByb3RvdHlwZS50YXAgPSBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICBjYWxsYmFjayA9IFEoY2FsbGJhY2spO1xuXG4gICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmZjYWxsKHZhbHVlKS50aGVuUmVzb2x2ZSh2YWx1ZSk7XG4gICAgfSk7XG59O1xuXG4vKipcbiAqIFJlZ2lzdGVycyBhbiBvYnNlcnZlciBvbiBhIHByb21pc2UuXG4gKlxuICogR3VhcmFudGVlczpcbiAqXG4gKiAxLiB0aGF0IGZ1bGZpbGxlZCBhbmQgcmVqZWN0ZWQgd2lsbCBiZSBjYWxsZWQgb25seSBvbmNlLlxuICogMi4gdGhhdCBlaXRoZXIgdGhlIGZ1bGZpbGxlZCBjYWxsYmFjayBvciB0aGUgcmVqZWN0ZWQgY2FsbGJhY2sgd2lsbCBiZVxuICogICAgY2FsbGVkLCBidXQgbm90IGJvdGguXG4gKiAzLiB0aGF0IGZ1bGZpbGxlZCBhbmQgcmVqZWN0ZWQgd2lsbCBub3QgYmUgY2FsbGVkIGluIHRoaXMgdHVybi5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgICAgICBwcm9taXNlIG9yIGltbWVkaWF0ZSByZWZlcmVuY2UgdG8gb2JzZXJ2ZVxuICogQHBhcmFtIGZ1bGZpbGxlZCAgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdpdGggdGhlIGZ1bGZpbGxlZCB2YWx1ZVxuICogQHBhcmFtIHJlamVjdGVkICAgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdpdGggdGhlIHJlamVjdGlvbiBleGNlcHRpb25cbiAqIEBwYXJhbSBwcm9ncmVzc2VkIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbiBhbnkgcHJvZ3Jlc3Mgbm90aWZpY2F0aW9uc1xuICogQHJldHVybiBwcm9taXNlIGZvciB0aGUgcmV0dXJuIHZhbHVlIGZyb20gdGhlIGludm9rZWQgY2FsbGJhY2tcbiAqL1xuUS53aGVuID0gd2hlbjtcbmZ1bmN0aW9uIHdoZW4odmFsdWUsIGZ1bGZpbGxlZCwgcmVqZWN0ZWQsIHByb2dyZXNzZWQpIHtcbiAgICByZXR1cm4gUSh2YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkLCBwcm9ncmVzc2VkKTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUudGhlblJlc29sdmUgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uICgpIHsgcmV0dXJuIHZhbHVlOyB9KTtcbn07XG5cblEudGhlblJlc29sdmUgPSBmdW5jdGlvbiAocHJvbWlzZSwgdmFsdWUpIHtcbiAgICByZXR1cm4gUShwcm9taXNlKS50aGVuUmVzb2x2ZSh2YWx1ZSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS50aGVuUmVqZWN0ID0gZnVuY3Rpb24gKHJlYXNvbikge1xuICAgIHJldHVybiB0aGlzLnRoZW4oZnVuY3Rpb24gKCkgeyB0aHJvdyByZWFzb247IH0pO1xufTtcblxuUS50aGVuUmVqZWN0ID0gZnVuY3Rpb24gKHByb21pc2UsIHJlYXNvbikge1xuICAgIHJldHVybiBRKHByb21pc2UpLnRoZW5SZWplY3QocmVhc29uKTtcbn07XG5cbi8qKlxuICogSWYgYW4gb2JqZWN0IGlzIG5vdCBhIHByb21pc2UsIGl0IGlzIGFzIFwibmVhclwiIGFzIHBvc3NpYmxlLlxuICogSWYgYSBwcm9taXNlIGlzIHJlamVjdGVkLCBpdCBpcyBhcyBcIm5lYXJcIiBhcyBwb3NzaWJsZSB0b28uXG4gKiBJZiBpdOKAmXMgYSBmdWxmaWxsZWQgcHJvbWlzZSwgdGhlIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5lYXJlci5cbiAqIElmIGl04oCZcyBhIGRlZmVycmVkIHByb21pc2UgYW5kIHRoZSBkZWZlcnJlZCBoYXMgYmVlbiByZXNvbHZlZCwgdGhlXG4gKiByZXNvbHV0aW9uIGlzIFwibmVhcmVyXCIuXG4gKiBAcGFyYW0gb2JqZWN0XG4gKiBAcmV0dXJucyBtb3N0IHJlc29sdmVkIChuZWFyZXN0KSBmb3JtIG9mIHRoZSBvYmplY3RcbiAqL1xuXG4vLyBYWFggc2hvdWxkIHdlIHJlLWRvIHRoaXM/XG5RLm5lYXJlciA9IG5lYXJlcjtcbmZ1bmN0aW9uIG5lYXJlcih2YWx1ZSkge1xuICAgIGlmIChpc1Byb21pc2UodmFsdWUpKSB7XG4gICAgICAgIHZhciBpbnNwZWN0ZWQgPSB2YWx1ZS5pbnNwZWN0KCk7XG4gICAgICAgIGlmIChpbnNwZWN0ZWQuc3RhdGUgPT09IFwiZnVsZmlsbGVkXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBpbnNwZWN0ZWQudmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuXG4vKipcbiAqIEByZXR1cm5zIHdoZXRoZXIgdGhlIGdpdmVuIG9iamVjdCBpcyBhIHByb21pc2UuXG4gKiBPdGhlcndpc2UgaXQgaXMgYSBmdWxmaWxsZWQgdmFsdWUuXG4gKi9cblEuaXNQcm9taXNlID0gaXNQcm9taXNlO1xuZnVuY3Rpb24gaXNQcm9taXNlKG9iamVjdCkge1xuICAgIHJldHVybiBvYmplY3QgaW5zdGFuY2VvZiBQcm9taXNlO1xufVxuXG5RLmlzUHJvbWlzZUFsaWtlID0gaXNQcm9taXNlQWxpa2U7XG5mdW5jdGlvbiBpc1Byb21pc2VBbGlrZShvYmplY3QpIHtcbiAgICByZXR1cm4gaXNPYmplY3Qob2JqZWN0KSAmJiB0eXBlb2Ygb2JqZWN0LnRoZW4gPT09IFwiZnVuY3Rpb25cIjtcbn1cblxuLyoqXG4gKiBAcmV0dXJucyB3aGV0aGVyIHRoZSBnaXZlbiBvYmplY3QgaXMgYSBwZW5kaW5nIHByb21pc2UsIG1lYW5pbmcgbm90XG4gKiBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuXG4gKi9cblEuaXNQZW5kaW5nID0gaXNQZW5kaW5nO1xuZnVuY3Rpb24gaXNQZW5kaW5nKG9iamVjdCkge1xuICAgIHJldHVybiBpc1Byb21pc2Uob2JqZWN0KSAmJiBvYmplY3QuaW5zcGVjdCgpLnN0YXRlID09PSBcInBlbmRpbmdcIjtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUuaXNQZW5kaW5nID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmluc3BlY3QoKS5zdGF0ZSA9PT0gXCJwZW5kaW5nXCI7XG59O1xuXG4vKipcbiAqIEByZXR1cm5zIHdoZXRoZXIgdGhlIGdpdmVuIG9iamVjdCBpcyBhIHZhbHVlIG9yIGZ1bGZpbGxlZFxuICogcHJvbWlzZS5cbiAqL1xuUS5pc0Z1bGZpbGxlZCA9IGlzRnVsZmlsbGVkO1xuZnVuY3Rpb24gaXNGdWxmaWxsZWQob2JqZWN0KSB7XG4gICAgcmV0dXJuICFpc1Byb21pc2Uob2JqZWN0KSB8fCBvYmplY3QuaW5zcGVjdCgpLnN0YXRlID09PSBcImZ1bGZpbGxlZFwiO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5pc0Z1bGZpbGxlZCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnNwZWN0KCkuc3RhdGUgPT09IFwiZnVsZmlsbGVkXCI7XG59O1xuXG4vKipcbiAqIEByZXR1cm5zIHdoZXRoZXIgdGhlIGdpdmVuIG9iamVjdCBpcyBhIHJlamVjdGVkIHByb21pc2UuXG4gKi9cblEuaXNSZWplY3RlZCA9IGlzUmVqZWN0ZWQ7XG5mdW5jdGlvbiBpc1JlamVjdGVkKG9iamVjdCkge1xuICAgIHJldHVybiBpc1Byb21pc2Uob2JqZWN0KSAmJiBvYmplY3QuaW5zcGVjdCgpLnN0YXRlID09PSBcInJlamVjdGVkXCI7XG59XG5cblByb21pc2UucHJvdG90eXBlLmlzUmVqZWN0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5zcGVjdCgpLnN0YXRlID09PSBcInJlamVjdGVkXCI7XG59O1xuXG4vLy8vIEJFR0lOIFVOSEFORExFRCBSRUpFQ1RJT04gVFJBQ0tJTkdcblxuLy8gVGhpcyBwcm9taXNlIGxpYnJhcnkgY29uc3VtZXMgZXhjZXB0aW9ucyB0aHJvd24gaW4gaGFuZGxlcnMgc28gdGhleSBjYW4gYmVcbi8vIGhhbmRsZWQgYnkgYSBzdWJzZXF1ZW50IHByb21pc2UuICBUaGUgZXhjZXB0aW9ucyBnZXQgYWRkZWQgdG8gdGhpcyBhcnJheSB3aGVuXG4vLyB0aGV5IGFyZSBjcmVhdGVkLCBhbmQgcmVtb3ZlZCB3aGVuIHRoZXkgYXJlIGhhbmRsZWQuICBOb3RlIHRoYXQgaW4gRVM2IG9yXG4vLyBzaGltbWVkIGVudmlyb25tZW50cywgdGhpcyB3b3VsZCBuYXR1cmFsbHkgYmUgYSBgU2V0YC5cbnZhciB1bmhhbmRsZWRSZWFzb25zID0gW107XG52YXIgdW5oYW5kbGVkUmVqZWN0aW9ucyA9IFtdO1xudmFyIHJlcG9ydGVkVW5oYW5kbGVkUmVqZWN0aW9ucyA9IFtdO1xudmFyIHRyYWNrVW5oYW5kbGVkUmVqZWN0aW9ucyA9IHRydWU7XG5cbmZ1bmN0aW9uIHJlc2V0VW5oYW5kbGVkUmVqZWN0aW9ucygpIHtcbiAgICB1bmhhbmRsZWRSZWFzb25zLmxlbmd0aCA9IDA7XG4gICAgdW5oYW5kbGVkUmVqZWN0aW9ucy5sZW5ndGggPSAwO1xuXG4gICAgaWYgKCF0cmFja1VuaGFuZGxlZFJlamVjdGlvbnMpIHtcbiAgICAgICAgdHJhY2tVbmhhbmRsZWRSZWplY3Rpb25zID0gdHJ1ZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHRyYWNrUmVqZWN0aW9uKHByb21pc2UsIHJlYXNvbikge1xuICAgIGlmICghdHJhY2tVbmhhbmRsZWRSZWplY3Rpb25zKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBwcm9jZXNzLmVtaXQgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBRLm5leHRUaWNrLnJ1bkFmdGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChhcnJheV9pbmRleE9mKHVuaGFuZGxlZFJlamVjdGlvbnMsIHByb21pc2UpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgIHByb2Nlc3MuZW1pdChcInVuaGFuZGxlZFJlamVjdGlvblwiLCByZWFzb24sIHByb21pc2UpO1xuICAgICAgICAgICAgICAgIHJlcG9ydGVkVW5oYW5kbGVkUmVqZWN0aW9ucy5wdXNoKHByb21pc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB1bmhhbmRsZWRSZWplY3Rpb25zLnB1c2gocHJvbWlzZSk7XG4gICAgaWYgKHJlYXNvbiAmJiB0eXBlb2YgcmVhc29uLnN0YWNrICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIHVuaGFuZGxlZFJlYXNvbnMucHVzaChyZWFzb24uc3RhY2spO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHVuaGFuZGxlZFJlYXNvbnMucHVzaChcIihubyBzdGFjaykgXCIgKyByZWFzb24pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdW50cmFja1JlamVjdGlvbihwcm9taXNlKSB7XG4gICAgaWYgKCF0cmFja1VuaGFuZGxlZFJlamVjdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBhdCA9IGFycmF5X2luZGV4T2YodW5oYW5kbGVkUmVqZWN0aW9ucywgcHJvbWlzZSk7XG4gICAgaWYgKGF0ICE9PSAtMSkge1xuICAgICAgICBpZiAodHlwZW9mIHByb2Nlc3MgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHByb2Nlc3MuZW1pdCA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBRLm5leHRUaWNrLnJ1bkFmdGVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXRSZXBvcnQgPSBhcnJheV9pbmRleE9mKHJlcG9ydGVkVW5oYW5kbGVkUmVqZWN0aW9ucywgcHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgaWYgKGF0UmVwb3J0ICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmVtaXQoXCJyZWplY3Rpb25IYW5kbGVkXCIsIHVuaGFuZGxlZFJlYXNvbnNbYXRdLCBwcm9taXNlKTtcbiAgICAgICAgICAgICAgICAgICAgcmVwb3J0ZWRVbmhhbmRsZWRSZWplY3Rpb25zLnNwbGljZShhdFJlcG9ydCwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgdW5oYW5kbGVkUmVqZWN0aW9ucy5zcGxpY2UoYXQsIDEpO1xuICAgICAgICB1bmhhbmRsZWRSZWFzb25zLnNwbGljZShhdCwgMSk7XG4gICAgfVxufVxuXG5RLnJlc2V0VW5oYW5kbGVkUmVqZWN0aW9ucyA9IHJlc2V0VW5oYW5kbGVkUmVqZWN0aW9ucztcblxuUS5nZXRVbmhhbmRsZWRSZWFzb25zID0gZnVuY3Rpb24gKCkge1xuICAgIC8vIE1ha2UgYSBjb3B5IHNvIHRoYXQgY29uc3VtZXJzIGNhbid0IGludGVyZmVyZSB3aXRoIG91ciBpbnRlcm5hbCBzdGF0ZS5cbiAgICByZXR1cm4gdW5oYW5kbGVkUmVhc29ucy5zbGljZSgpO1xufTtcblxuUS5zdG9wVW5oYW5kbGVkUmVqZWN0aW9uVHJhY2tpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmVzZXRVbmhhbmRsZWRSZWplY3Rpb25zKCk7XG4gICAgdHJhY2tVbmhhbmRsZWRSZWplY3Rpb25zID0gZmFsc2U7XG59O1xuXG5yZXNldFVuaGFuZGxlZFJlamVjdGlvbnMoKTtcblxuLy8vLyBFTkQgVU5IQU5ETEVEIFJFSkVDVElPTiBUUkFDS0lOR1xuXG4vKipcbiAqIENvbnN0cnVjdHMgYSByZWplY3RlZCBwcm9taXNlLlxuICogQHBhcmFtIHJlYXNvbiB2YWx1ZSBkZXNjcmliaW5nIHRoZSBmYWlsdXJlXG4gKi9cblEucmVqZWN0ID0gcmVqZWN0O1xuZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuICAgIHZhciByZWplY3Rpb24gPSBQcm9taXNlKHtcbiAgICAgICAgXCJ3aGVuXCI6IGZ1bmN0aW9uIChyZWplY3RlZCkge1xuICAgICAgICAgICAgLy8gbm90ZSB0aGF0IHRoZSBlcnJvciBoYXMgYmVlbiBoYW5kbGVkXG4gICAgICAgICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICB1bnRyYWNrUmVqZWN0aW9uKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHJlamVjdGVkID8gcmVqZWN0ZWQocmVhc29uKSA6IHRoaXM7XG4gICAgICAgIH1cbiAgICB9LCBmdW5jdGlvbiBmYWxsYmFjaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSwgZnVuY3Rpb24gaW5zcGVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHsgc3RhdGU6IFwicmVqZWN0ZWRcIiwgcmVhc29uOiByZWFzb24gfTtcbiAgICB9KTtcblxuICAgIC8vIE5vdGUgdGhhdCB0aGUgcmVhc29uIGhhcyBub3QgYmVlbiBoYW5kbGVkLlxuICAgIHRyYWNrUmVqZWN0aW9uKHJlamVjdGlvbiwgcmVhc29uKTtcblxuICAgIHJldHVybiByZWplY3Rpb247XG59XG5cbi8qKlxuICogQ29uc3RydWN0cyBhIGZ1bGZpbGxlZCBwcm9taXNlIGZvciBhbiBpbW1lZGlhdGUgcmVmZXJlbmNlLlxuICogQHBhcmFtIHZhbHVlIGltbWVkaWF0ZSByZWZlcmVuY2VcbiAqL1xuUS5mdWxmaWxsID0gZnVsZmlsbDtcbmZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHtcbiAgICByZXR1cm4gUHJvbWlzZSh7XG4gICAgICAgIFwid2hlblwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0sXG4gICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWVbbmFtZV07XG4gICAgICAgIH0sXG4gICAgICAgIFwic2V0XCI6IGZ1bmN0aW9uIChuYW1lLCByaHMpIHtcbiAgICAgICAgICAgIHZhbHVlW25hbWVdID0gcmhzO1xuICAgICAgICB9LFxuICAgICAgICBcImRlbGV0ZVwiOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgZGVsZXRlIHZhbHVlW25hbWVdO1xuICAgICAgICB9LFxuICAgICAgICBcInBvc3RcIjogZnVuY3Rpb24gKG5hbWUsIGFyZ3MpIHtcbiAgICAgICAgICAgIC8vIE1hcmsgTWlsbGVyIHByb3Bvc2VzIHRoYXQgcG9zdCB3aXRoIG5vIG5hbWUgc2hvdWxkIGFwcGx5IGFcbiAgICAgICAgICAgIC8vIHByb21pc2VkIGZ1bmN0aW9uLlxuICAgICAgICAgICAgaWYgKG5hbWUgPT09IG51bGwgfHwgbmFtZSA9PT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLmFwcGx5KHZvaWQgMCwgYXJncyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZVtuYW1lXS5hcHBseSh2YWx1ZSwgYXJncyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiYXBwbHlcIjogZnVuY3Rpb24gKHRoaXNwLCBhcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUuYXBwbHkodGhpc3AsIGFyZ3MpO1xuICAgICAgICB9LFxuICAgICAgICBcImtleXNcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG9iamVjdF9rZXlzKHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0sIHZvaWQgMCwgZnVuY3Rpb24gaW5zcGVjdCgpIHtcbiAgICAgICAgcmV0dXJuIHsgc3RhdGU6IFwiZnVsZmlsbGVkXCIsIHZhbHVlOiB2YWx1ZSB9O1xuICAgIH0pO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoZW5hYmxlcyB0byBRIHByb21pc2VzLlxuICogQHBhcmFtIHByb21pc2UgdGhlbmFibGUgcHJvbWlzZVxuICogQHJldHVybnMgYSBRIHByb21pc2VcbiAqL1xuZnVuY3Rpb24gY29lcmNlKHByb21pc2UpIHtcbiAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIFEubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcHJvbWlzZS50aGVuKGRlZmVycmVkLnJlc29sdmUsIGRlZmVycmVkLnJlamVjdCwgZGVmZXJyZWQubm90aWZ5KTtcbiAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXhjZXB0aW9uKTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufVxuXG4vKipcbiAqIEFubm90YXRlcyBhbiBvYmplY3Qgc3VjaCB0aGF0IGl0IHdpbGwgbmV2ZXIgYmVcbiAqIHRyYW5zZmVycmVkIGF3YXkgZnJvbSB0aGlzIHByb2Nlc3Mgb3ZlciBhbnkgcHJvbWlzZVxuICogY29tbXVuaWNhdGlvbiBjaGFubmVsLlxuICogQHBhcmFtIG9iamVjdFxuICogQHJldHVybnMgcHJvbWlzZSBhIHdyYXBwaW5nIG9mIHRoYXQgb2JqZWN0IHRoYXRcbiAqIGFkZGl0aW9uYWxseSByZXNwb25kcyB0byB0aGUgXCJpc0RlZlwiIG1lc3NhZ2VcbiAqIHdpdGhvdXQgYSByZWplY3Rpb24uXG4gKi9cblEubWFzdGVyID0gbWFzdGVyO1xuZnVuY3Rpb24gbWFzdGVyKG9iamVjdCkge1xuICAgIHJldHVybiBQcm9taXNlKHtcbiAgICAgICAgXCJpc0RlZlwiOiBmdW5jdGlvbiAoKSB7fVxuICAgIH0sIGZ1bmN0aW9uIGZhbGxiYWNrKG9wLCBhcmdzKSB7XG4gICAgICAgIHJldHVybiBkaXNwYXRjaChvYmplY3QsIG9wLCBhcmdzKTtcbiAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBRKG9iamVjdCkuaW5zcGVjdCgpO1xuICAgIH0pO1xufVxuXG4vKipcbiAqIFNwcmVhZHMgdGhlIHZhbHVlcyBvZiBhIHByb21pc2VkIGFycmF5IG9mIGFyZ3VtZW50cyBpbnRvIHRoZVxuICogZnVsZmlsbG1lbnQgY2FsbGJhY2suXG4gKiBAcGFyYW0gZnVsZmlsbGVkIGNhbGxiYWNrIHRoYXQgcmVjZWl2ZXMgdmFyaWFkaWMgYXJndW1lbnRzIGZyb20gdGhlXG4gKiBwcm9taXNlZCBhcnJheVxuICogQHBhcmFtIHJlamVjdGVkIGNhbGxiYWNrIHRoYXQgcmVjZWl2ZXMgdGhlIGV4Y2VwdGlvbiBpZiB0aGUgcHJvbWlzZVxuICogaXMgcmVqZWN0ZWQuXG4gKiBAcmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSByZXR1cm4gdmFsdWUgb3IgdGhyb3duIGV4Y2VwdGlvbiBvZlxuICogZWl0aGVyIGNhbGxiYWNrLlxuICovXG5RLnNwcmVhZCA9IHNwcmVhZDtcbmZ1bmN0aW9uIHNwcmVhZCh2YWx1ZSwgZnVsZmlsbGVkLCByZWplY3RlZCkge1xuICAgIHJldHVybiBRKHZhbHVlKS5zcHJlYWQoZnVsZmlsbGVkLCByZWplY3RlZCk7XG59XG5cblByb21pc2UucHJvdG90eXBlLnNwcmVhZCA9IGZ1bmN0aW9uIChmdWxmaWxsZWQsIHJlamVjdGVkKSB7XG4gICAgcmV0dXJuIHRoaXMuYWxsKCkudGhlbihmdW5jdGlvbiAoYXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIGZ1bGZpbGxlZC5hcHBseSh2b2lkIDAsIGFycmF5KTtcbiAgICB9LCByZWplY3RlZCk7XG59O1xuXG4vKipcbiAqIFRoZSBhc3luYyBmdW5jdGlvbiBpcyBhIGRlY29yYXRvciBmb3IgZ2VuZXJhdG9yIGZ1bmN0aW9ucywgdHVybmluZ1xuICogdGhlbSBpbnRvIGFzeW5jaHJvbm91cyBnZW5lcmF0b3JzLiAgQWx0aG91Z2ggZ2VuZXJhdG9ycyBhcmUgb25seSBwYXJ0XG4gKiBvZiB0aGUgbmV3ZXN0IEVDTUFTY3JpcHQgNiBkcmFmdHMsIHRoaXMgY29kZSBkb2VzIG5vdCBjYXVzZSBzeW50YXhcbiAqIGVycm9ycyBpbiBvbGRlciBlbmdpbmVzLiAgVGhpcyBjb2RlIHNob3VsZCBjb250aW51ZSB0byB3b3JrIGFuZCB3aWxsXG4gKiBpbiBmYWN0IGltcHJvdmUgb3ZlciB0aW1lIGFzIHRoZSBsYW5ndWFnZSBpbXByb3Zlcy5cbiAqXG4gKiBFUzYgZ2VuZXJhdG9ycyBhcmUgY3VycmVudGx5IHBhcnQgb2YgVjggdmVyc2lvbiAzLjE5IHdpdGggdGhlXG4gKiAtLWhhcm1vbnktZ2VuZXJhdG9ycyBydW50aW1lIGZsYWcgZW5hYmxlZC4gIFNwaWRlck1vbmtleSBoYXMgaGFkIHRoZW1cbiAqIGZvciBsb25nZXIsIGJ1dCB1bmRlciBhbiBvbGRlciBQeXRob24taW5zcGlyZWQgZm9ybS4gIFRoaXMgZnVuY3Rpb25cbiAqIHdvcmtzIG9uIGJvdGgga2luZHMgb2YgZ2VuZXJhdG9ycy5cbiAqXG4gKiBEZWNvcmF0ZXMgYSBnZW5lcmF0b3IgZnVuY3Rpb24gc3VjaCB0aGF0OlxuICogIC0gaXQgbWF5IHlpZWxkIHByb21pc2VzXG4gKiAgLSBleGVjdXRpb24gd2lsbCBjb250aW51ZSB3aGVuIHRoYXQgcHJvbWlzZSBpcyBmdWxmaWxsZWRcbiAqICAtIHRoZSB2YWx1ZSBvZiB0aGUgeWllbGQgZXhwcmVzc2lvbiB3aWxsIGJlIHRoZSBmdWxmaWxsZWQgdmFsdWVcbiAqICAtIGl0IHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgcmV0dXJuIHZhbHVlICh3aGVuIHRoZSBnZW5lcmF0b3JcbiAqICAgIHN0b3BzIGl0ZXJhdGluZylcbiAqICAtIHRoZSBkZWNvcmF0ZWQgZnVuY3Rpb24gcmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSByZXR1cm4gdmFsdWVcbiAqICAgIG9mIHRoZSBnZW5lcmF0b3Igb3IgdGhlIGZpcnN0IHJlamVjdGVkIHByb21pc2UgYW1vbmcgdGhvc2VcbiAqICAgIHlpZWxkZWQuXG4gKiAgLSBpZiBhbiBlcnJvciBpcyB0aHJvd24gaW4gdGhlIGdlbmVyYXRvciwgaXQgcHJvcGFnYXRlcyB0aHJvdWdoXG4gKiAgICBldmVyeSBmb2xsb3dpbmcgeWllbGQgdW50aWwgaXQgaXMgY2F1Z2h0LCBvciB1bnRpbCBpdCBlc2NhcGVzXG4gKiAgICB0aGUgZ2VuZXJhdG9yIGZ1bmN0aW9uIGFsdG9nZXRoZXIsIGFuZCBpcyB0cmFuc2xhdGVkIGludG8gYVxuICogICAgcmVqZWN0aW9uIGZvciB0aGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGUgZGVjb3JhdGVkIGdlbmVyYXRvci5cbiAqL1xuUS5hc3luYyA9IGFzeW5jO1xuZnVuY3Rpb24gYXN5bmMobWFrZUdlbmVyYXRvcikge1xuICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIHdoZW4gdmVyYiBpcyBcInNlbmRcIiwgYXJnIGlzIGEgdmFsdWVcbiAgICAgICAgLy8gd2hlbiB2ZXJiIGlzIFwidGhyb3dcIiwgYXJnIGlzIGFuIGV4Y2VwdGlvblxuICAgICAgICBmdW5jdGlvbiBjb250aW51ZXIodmVyYiwgYXJnKSB7XG4gICAgICAgICAgICB2YXIgcmVzdWx0O1xuXG4gICAgICAgICAgICAvLyBVbnRpbCBWOCAzLjE5IC8gQ2hyb21pdW0gMjkgaXMgcmVsZWFzZWQsIFNwaWRlck1vbmtleSBpcyB0aGUgb25seVxuICAgICAgICAgICAgLy8gZW5naW5lIHRoYXQgaGFzIGEgZGVwbG95ZWQgYmFzZSBvZiBicm93c2VycyB0aGF0IHN1cHBvcnQgZ2VuZXJhdG9ycy5cbiAgICAgICAgICAgIC8vIEhvd2V2ZXIsIFNNJ3MgZ2VuZXJhdG9ycyB1c2UgdGhlIFB5dGhvbi1pbnNwaXJlZCBzZW1hbnRpY3Mgb2ZcbiAgICAgICAgICAgIC8vIG91dGRhdGVkIEVTNiBkcmFmdHMuICBXZSB3b3VsZCBsaWtlIHRvIHN1cHBvcnQgRVM2LCBidXQgd2UnZCBhbHNvXG4gICAgICAgICAgICAvLyBsaWtlIHRvIG1ha2UgaXQgcG9zc2libGUgdG8gdXNlIGdlbmVyYXRvcnMgaW4gZGVwbG95ZWQgYnJvd3NlcnMsIHNvXG4gICAgICAgICAgICAvLyB3ZSBhbHNvIHN1cHBvcnQgUHl0aG9uLXN0eWxlIGdlbmVyYXRvcnMuICBBdCBzb21lIHBvaW50IHdlIGNhbiByZW1vdmVcbiAgICAgICAgICAgIC8vIHRoaXMgYmxvY2suXG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgU3RvcEl0ZXJhdGlvbiA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgICAgICAgIC8vIEVTNiBHZW5lcmF0b3JzXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZ2VuZXJhdG9yW3ZlcmJdKGFyZyk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXhjZXB0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5kb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBRKHJlc3VsdC52YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdoZW4ocmVzdWx0LnZhbHVlLCBjYWxsYmFjaywgZXJyYmFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBTcGlkZXJNb25rZXkgR2VuZXJhdG9yc1xuICAgICAgICAgICAgICAgIC8vIEZJWE1FOiBSZW1vdmUgdGhpcyBjYXNlIHdoZW4gU00gZG9lcyBFUzYgZ2VuZXJhdG9ycy5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBnZW5lcmF0b3JbdmVyYl0oYXJnKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChleGNlcHRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzU3RvcEl0ZXJhdGlvbihleGNlcHRpb24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUShleGNlcHRpb24udmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChleGNlcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiB3aGVuKHJlc3VsdCwgY2FsbGJhY2ssIGVycmJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBnZW5lcmF0b3IgPSBtYWtlR2VuZXJhdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IGNvbnRpbnVlci5iaW5kKGNvbnRpbnVlciwgXCJuZXh0XCIpO1xuICAgICAgICB2YXIgZXJyYmFjayA9IGNvbnRpbnVlci5iaW5kKGNvbnRpbnVlciwgXCJ0aHJvd1wiKTtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgfTtcbn1cblxuLyoqXG4gKiBUaGUgc3Bhd24gZnVuY3Rpb24gaXMgYSBzbWFsbCB3cmFwcGVyIGFyb3VuZCBhc3luYyB0aGF0IGltbWVkaWF0ZWx5XG4gKiBjYWxscyB0aGUgZ2VuZXJhdG9yIGFuZCBhbHNvIGVuZHMgdGhlIHByb21pc2UgY2hhaW4sIHNvIHRoYXQgYW55XG4gKiB1bmhhbmRsZWQgZXJyb3JzIGFyZSB0aHJvd24gaW5zdGVhZCBvZiBmb3J3YXJkZWQgdG8gdGhlIGVycm9yXG4gKiBoYW5kbGVyLiBUaGlzIGlzIHVzZWZ1bCBiZWNhdXNlIGl0J3MgZXh0cmVtZWx5IGNvbW1vbiB0byBydW5cbiAqIGdlbmVyYXRvcnMgYXQgdGhlIHRvcC1sZXZlbCB0byB3b3JrIHdpdGggbGlicmFyaWVzLlxuICovXG5RLnNwYXduID0gc3Bhd247XG5mdW5jdGlvbiBzcGF3bihtYWtlR2VuZXJhdG9yKSB7XG4gICAgUS5kb25lKFEuYXN5bmMobWFrZUdlbmVyYXRvcikoKSk7XG59XG5cbi8vIEZJWE1FOiBSZW1vdmUgdGhpcyBpbnRlcmZhY2Ugb25jZSBFUzYgZ2VuZXJhdG9ycyBhcmUgaW4gU3BpZGVyTW9ua2V5LlxuLyoqXG4gKiBUaHJvd3MgYSBSZXR1cm5WYWx1ZSBleGNlcHRpb24gdG8gc3RvcCBhbiBhc3luY2hyb25vdXMgZ2VuZXJhdG9yLlxuICpcbiAqIFRoaXMgaW50ZXJmYWNlIGlzIGEgc3RvcC1nYXAgbWVhc3VyZSB0byBzdXBwb3J0IGdlbmVyYXRvciByZXR1cm5cbiAqIHZhbHVlcyBpbiBvbGRlciBGaXJlZm94L1NwaWRlck1vbmtleS4gIEluIGJyb3dzZXJzIHRoYXQgc3VwcG9ydCBFUzZcbiAqIGdlbmVyYXRvcnMgbGlrZSBDaHJvbWl1bSAyOSwganVzdCB1c2UgXCJyZXR1cm5cIiBpbiB5b3VyIGdlbmVyYXRvclxuICogZnVuY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB2YWx1ZSB0aGUgcmV0dXJuIHZhbHVlIGZvciB0aGUgc3Vycm91bmRpbmcgZ2VuZXJhdG9yXG4gKiBAdGhyb3dzIFJldHVyblZhbHVlIGV4Y2VwdGlvbiB3aXRoIHRoZSB2YWx1ZS5cbiAqIEBleGFtcGxlXG4gKiAvLyBFUzYgc3R5bGVcbiAqIFEuYXN5bmMoZnVuY3Rpb24qICgpIHtcbiAqICAgICAgdmFyIGZvbyA9IHlpZWxkIGdldEZvb1Byb21pc2UoKTtcbiAqICAgICAgdmFyIGJhciA9IHlpZWxkIGdldEJhclByb21pc2UoKTtcbiAqICAgICAgcmV0dXJuIGZvbyArIGJhcjtcbiAqIH0pXG4gKiAvLyBPbGRlciBTcGlkZXJNb25rZXkgc3R5bGVcbiAqIFEuYXN5bmMoZnVuY3Rpb24gKCkge1xuICogICAgICB2YXIgZm9vID0geWllbGQgZ2V0Rm9vUHJvbWlzZSgpO1xuICogICAgICB2YXIgYmFyID0geWllbGQgZ2V0QmFyUHJvbWlzZSgpO1xuICogICAgICBRLnJldHVybihmb28gKyBiYXIpO1xuICogfSlcbiAqL1xuUVtcInJldHVyblwiXSA9IF9yZXR1cm47XG5mdW5jdGlvbiBfcmV0dXJuKHZhbHVlKSB7XG4gICAgdGhyb3cgbmV3IFFSZXR1cm5WYWx1ZSh2YWx1ZSk7XG59XG5cbi8qKlxuICogVGhlIHByb21pc2VkIGZ1bmN0aW9uIGRlY29yYXRvciBlbnN1cmVzIHRoYXQgYW55IHByb21pc2UgYXJndW1lbnRzXG4gKiBhcmUgc2V0dGxlZCBhbmQgcGFzc2VkIGFzIHZhbHVlcyAoYHRoaXNgIGlzIGFsc28gc2V0dGxlZCBhbmQgcGFzc2VkXG4gKiBhcyBhIHZhbHVlKS4gIEl0IHdpbGwgYWxzbyBlbnN1cmUgdGhhdCB0aGUgcmVzdWx0IG9mIGEgZnVuY3Rpb24gaXNcbiAqIGFsd2F5cyBhIHByb21pc2UuXG4gKlxuICogQGV4YW1wbGVcbiAqIHZhciBhZGQgPSBRLnByb21pc2VkKGZ1bmN0aW9uIChhLCBiKSB7XG4gKiAgICAgcmV0dXJuIGEgKyBiO1xuICogfSk7XG4gKiBhZGQoUShhKSwgUShCKSk7XG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgVGhlIGZ1bmN0aW9uIHRvIGRlY29yYXRlXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb259IGEgZnVuY3Rpb24gdGhhdCBoYXMgYmVlbiBkZWNvcmF0ZWQuXG4gKi9cblEucHJvbWlzZWQgPSBwcm9taXNlZDtcbmZ1bmN0aW9uIHByb21pc2VkKGNhbGxiYWNrKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHNwcmVhZChbdGhpcywgYWxsKGFyZ3VtZW50cyldLCBmdW5jdGlvbiAoc2VsZiwgYXJncykge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KHNlbGYsIGFyZ3MpO1xuICAgICAgICB9KTtcbiAgICB9O1xufVxuXG4vKipcbiAqIHNlbmRzIGEgbWVzc2FnZSB0byBhIHZhbHVlIGluIGEgZnV0dXJlIHR1cm5cbiAqIEBwYXJhbSBvYmplY3QqIHRoZSByZWNpcGllbnRcbiAqIEBwYXJhbSBvcCB0aGUgbmFtZSBvZiB0aGUgbWVzc2FnZSBvcGVyYXRpb24sIGUuZy4sIFwid2hlblwiLFxuICogQHBhcmFtIGFyZ3MgZnVydGhlciBhcmd1bWVudHMgdG8gYmUgZm9yd2FyZGVkIHRvIHRoZSBvcGVyYXRpb25cbiAqIEByZXR1cm5zIHJlc3VsdCB7UHJvbWlzZX0gYSBwcm9taXNlIGZvciB0aGUgcmVzdWx0IG9mIHRoZSBvcGVyYXRpb25cbiAqL1xuUS5kaXNwYXRjaCA9IGRpc3BhdGNoO1xuZnVuY3Rpb24gZGlzcGF0Y2gob2JqZWN0LCBvcCwgYXJncykge1xuICAgIHJldHVybiBRKG9iamVjdCkuZGlzcGF0Y2gob3AsIGFyZ3MpO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5kaXNwYXRjaCA9IGZ1bmN0aW9uIChvcCwgYXJncykge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIFEubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLnByb21pc2VEaXNwYXRjaChkZWZlcnJlZC5yZXNvbHZlLCBvcCwgYXJncyk7XG4gICAgfSk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59O1xuXG4vKipcbiAqIEdldHMgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHkgaW4gYSBmdXR1cmUgdHVybi5cbiAqIEBwYXJhbSBvYmplY3QgICAgcHJvbWlzZSBvciBpbW1lZGlhdGUgcmVmZXJlbmNlIGZvciB0YXJnZXQgb2JqZWN0XG4gKiBAcGFyYW0gbmFtZSAgICAgIG5hbWUgb2YgcHJvcGVydHkgdG8gZ2V0XG4gKiBAcmV0dXJuIHByb21pc2UgZm9yIHRoZSBwcm9wZXJ0eSB2YWx1ZVxuICovXG5RLmdldCA9IGZ1bmN0aW9uIChvYmplY3QsIGtleSkge1xuICAgIHJldHVybiBRKG9iamVjdCkuZGlzcGF0Y2goXCJnZXRcIiwgW2tleV0pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiB0aGlzLmRpc3BhdGNoKFwiZ2V0XCIsIFtrZXldKTtcbn07XG5cbi8qKlxuICogU2V0cyB0aGUgdmFsdWUgb2YgYSBwcm9wZXJ0eSBpbiBhIGZ1dHVyZSB0dXJuLlxuICogQHBhcmFtIG9iamVjdCAgICBwcm9taXNlIG9yIGltbWVkaWF0ZSByZWZlcmVuY2UgZm9yIG9iamVjdCBvYmplY3RcbiAqIEBwYXJhbSBuYW1lICAgICAgbmFtZSBvZiBwcm9wZXJ0eSB0byBzZXRcbiAqIEBwYXJhbSB2YWx1ZSAgICAgbmV3IHZhbHVlIG9mIHByb3BlcnR5XG4gKiBAcmV0dXJuIHByb21pc2UgZm9yIHRoZSByZXR1cm4gdmFsdWVcbiAqL1xuUS5zZXQgPSBmdW5jdGlvbiAob2JqZWN0LCBrZXksIHZhbHVlKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kaXNwYXRjaChcInNldFwiLCBba2V5LCB2YWx1ZV0pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaChcInNldFwiLCBba2V5LCB2YWx1ZV0pO1xufTtcblxuLyoqXG4gKiBEZWxldGVzIGEgcHJvcGVydHkgaW4gYSBmdXR1cmUgdHVybi5cbiAqIEBwYXJhbSBvYmplY3QgICAgcHJvbWlzZSBvciBpbW1lZGlhdGUgcmVmZXJlbmNlIGZvciB0YXJnZXQgb2JqZWN0XG4gKiBAcGFyYW0gbmFtZSAgICAgIG5hbWUgb2YgcHJvcGVydHkgdG8gZGVsZXRlXG4gKiBAcmV0dXJuIHByb21pc2UgZm9yIHRoZSByZXR1cm4gdmFsdWVcbiAqL1xuUS5kZWwgPSAvLyBYWFggbGVnYWN5XG5RW1wiZGVsZXRlXCJdID0gZnVuY3Rpb24gKG9iamVjdCwga2V5KSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kaXNwYXRjaChcImRlbGV0ZVwiLCBba2V5XSk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5kZWwgPSAvLyBYWFggbGVnYWN5XG5Qcm9taXNlLnByb3RvdHlwZVtcImRlbGV0ZVwiXSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaChcImRlbGV0ZVwiLCBba2V5XSk7XG59O1xuXG4vKipcbiAqIEludm9rZXMgYSBtZXRob2QgaW4gYSBmdXR1cmUgdHVybi5cbiAqIEBwYXJhbSBvYmplY3QgICAgcHJvbWlzZSBvciBpbW1lZGlhdGUgcmVmZXJlbmNlIGZvciB0YXJnZXQgb2JqZWN0XG4gKiBAcGFyYW0gbmFtZSAgICAgIG5hbWUgb2YgbWV0aG9kIHRvIGludm9rZVxuICogQHBhcmFtIHZhbHVlICAgICBhIHZhbHVlIHRvIHBvc3QsIHR5cGljYWxseSBhbiBhcnJheSBvZlxuICogICAgICAgICAgICAgICAgICBpbnZvY2F0aW9uIGFyZ3VtZW50cyBmb3IgcHJvbWlzZXMgdGhhdFxuICogICAgICAgICAgICAgICAgICBhcmUgdWx0aW1hdGVseSBiYWNrZWQgd2l0aCBgcmVzb2x2ZWAgdmFsdWVzLFxuICogICAgICAgICAgICAgICAgICBhcyBvcHBvc2VkIHRvIHRob3NlIGJhY2tlZCB3aXRoIFVSTHNcbiAqICAgICAgICAgICAgICAgICAgd2hlcmVpbiB0aGUgcG9zdGVkIHZhbHVlIGNhbiBiZSBhbnlcbiAqICAgICAgICAgICAgICAgICAgSlNPTiBzZXJpYWxpemFibGUgb2JqZWN0LlxuICogQHJldHVybiBwcm9taXNlIGZvciB0aGUgcmV0dXJuIHZhbHVlXG4gKi9cbi8vIGJvdW5kIGxvY2FsbHkgYmVjYXVzZSBpdCBpcyB1c2VkIGJ5IG90aGVyIG1ldGhvZHNcblEubWFwcGx5ID0gLy8gWFhYIEFzIHByb3Bvc2VkIGJ5IFwiUmVkc2FuZHJvXCJcblEucG9zdCA9IGZ1bmN0aW9uIChvYmplY3QsIG5hbWUsIGFyZ3MpIHtcbiAgICByZXR1cm4gUShvYmplY3QpLmRpc3BhdGNoKFwicG9zdFwiLCBbbmFtZSwgYXJnc10pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubWFwcGx5ID0gLy8gWFhYIEFzIHByb3Bvc2VkIGJ5IFwiUmVkc2FuZHJvXCJcblByb21pc2UucHJvdG90eXBlLnBvc3QgPSBmdW5jdGlvbiAobmFtZSwgYXJncykge1xuICAgIHJldHVybiB0aGlzLmRpc3BhdGNoKFwicG9zdFwiLCBbbmFtZSwgYXJnc10pO1xufTtcblxuLyoqXG4gKiBJbnZva2VzIGEgbWV0aG9kIGluIGEgZnV0dXJlIHR1cm4uXG4gKiBAcGFyYW0gb2JqZWN0ICAgIHByb21pc2Ugb3IgaW1tZWRpYXRlIHJlZmVyZW5jZSBmb3IgdGFyZ2V0IG9iamVjdFxuICogQHBhcmFtIG5hbWUgICAgICBuYW1lIG9mIG1ldGhvZCB0byBpbnZva2VcbiAqIEBwYXJhbSAuLi5hcmdzICAgYXJyYXkgb2YgaW52b2NhdGlvbiBhcmd1bWVudHNcbiAqIEByZXR1cm4gcHJvbWlzZSBmb3IgdGhlIHJldHVybiB2YWx1ZVxuICovXG5RLnNlbmQgPSAvLyBYWFggTWFyayBNaWxsZXIncyBwcm9wb3NlZCBwYXJsYW5jZVxuUS5tY2FsbCA9IC8vIFhYWCBBcyBwcm9wb3NlZCBieSBcIlJlZHNhbmRyb1wiXG5RLmludm9rZSA9IGZ1bmN0aW9uIChvYmplY3QsIG5hbWUgLyouLi5hcmdzKi8pIHtcbiAgICByZXR1cm4gUShvYmplY3QpLmRpc3BhdGNoKFwicG9zdFwiLCBbbmFtZSwgYXJyYXlfc2xpY2UoYXJndW1lbnRzLCAyKV0pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuc2VuZCA9IC8vIFhYWCBNYXJrIE1pbGxlcidzIHByb3Bvc2VkIHBhcmxhbmNlXG5Qcm9taXNlLnByb3RvdHlwZS5tY2FsbCA9IC8vIFhYWCBBcyBwcm9wb3NlZCBieSBcIlJlZHNhbmRyb1wiXG5Qcm9taXNlLnByb3RvdHlwZS5pbnZva2UgPSBmdW5jdGlvbiAobmFtZSAvKi4uLmFyZ3MqLykge1xuICAgIHJldHVybiB0aGlzLmRpc3BhdGNoKFwicG9zdFwiLCBbbmFtZSwgYXJyYXlfc2xpY2UoYXJndW1lbnRzLCAxKV0pO1xufTtcblxuLyoqXG4gKiBBcHBsaWVzIHRoZSBwcm9taXNlZCBmdW5jdGlvbiBpbiBhIGZ1dHVyZSB0dXJuLlxuICogQHBhcmFtIG9iamVjdCAgICBwcm9taXNlIG9yIGltbWVkaWF0ZSByZWZlcmVuY2UgZm9yIHRhcmdldCBmdW5jdGlvblxuICogQHBhcmFtIGFyZ3MgICAgICBhcnJheSBvZiBhcHBsaWNhdGlvbiBhcmd1bWVudHNcbiAqL1xuUS5mYXBwbHkgPSBmdW5jdGlvbiAob2JqZWN0LCBhcmdzKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kaXNwYXRjaChcImFwcGx5XCIsIFt2b2lkIDAsIGFyZ3NdKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmZhcHBseSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgcmV0dXJuIHRoaXMuZGlzcGF0Y2goXCJhcHBseVwiLCBbdm9pZCAwLCBhcmdzXSk7XG59O1xuXG4vKipcbiAqIENhbGxzIHRoZSBwcm9taXNlZCBmdW5jdGlvbiBpbiBhIGZ1dHVyZSB0dXJuLlxuICogQHBhcmFtIG9iamVjdCAgICBwcm9taXNlIG9yIGltbWVkaWF0ZSByZWZlcmVuY2UgZm9yIHRhcmdldCBmdW5jdGlvblxuICogQHBhcmFtIC4uLmFyZ3MgICBhcnJheSBvZiBhcHBsaWNhdGlvbiBhcmd1bWVudHNcbiAqL1xuUVtcInRyeVwiXSA9XG5RLmZjYWxsID0gZnVuY3Rpb24gKG9iamVjdCAvKiAuLi5hcmdzKi8pIHtcbiAgICByZXR1cm4gUShvYmplY3QpLmRpc3BhdGNoKFwiYXBwbHlcIiwgW3ZvaWQgMCwgYXJyYXlfc2xpY2UoYXJndW1lbnRzLCAxKV0pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuZmNhbGwgPSBmdW5jdGlvbiAoLyouLi5hcmdzKi8pIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaChcImFwcGx5XCIsIFt2b2lkIDAsIGFycmF5X3NsaWNlKGFyZ3VtZW50cyldKTtcbn07XG5cbi8qKlxuICogQmluZHMgdGhlIHByb21pc2VkIGZ1bmN0aW9uLCB0cmFuc2Zvcm1pbmcgcmV0dXJuIHZhbHVlcyBpbnRvIGEgZnVsZmlsbGVkXG4gKiBwcm9taXNlIGFuZCB0aHJvd24gZXJyb3JzIGludG8gYSByZWplY3RlZCBvbmUuXG4gKiBAcGFyYW0gb2JqZWN0ICAgIHByb21pc2Ugb3IgaW1tZWRpYXRlIHJlZmVyZW5jZSBmb3IgdGFyZ2V0IGZ1bmN0aW9uXG4gKiBAcGFyYW0gLi4uYXJncyAgIGFycmF5IG9mIGFwcGxpY2F0aW9uIGFyZ3VtZW50c1xuICovXG5RLmZiaW5kID0gZnVuY3Rpb24gKG9iamVjdCAvKi4uLmFyZ3MqLykge1xuICAgIHZhciBwcm9taXNlID0gUShvYmplY3QpO1xuICAgIHZhciBhcmdzID0gYXJyYXlfc2xpY2UoYXJndW1lbnRzLCAxKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gZmJvdW5kKCkge1xuICAgICAgICByZXR1cm4gcHJvbWlzZS5kaXNwYXRjaChcImFwcGx5XCIsIFtcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICBhcmdzLmNvbmNhdChhcnJheV9zbGljZShhcmd1bWVudHMpKVxuICAgICAgICBdKTtcbiAgICB9O1xufTtcblByb21pc2UucHJvdG90eXBlLmZiaW5kID0gZnVuY3Rpb24gKC8qLi4uYXJncyovKSB7XG4gICAgdmFyIHByb21pc2UgPSB0aGlzO1xuICAgIHZhciBhcmdzID0gYXJyYXlfc2xpY2UoYXJndW1lbnRzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24gZmJvdW5kKCkge1xuICAgICAgICByZXR1cm4gcHJvbWlzZS5kaXNwYXRjaChcImFwcGx5XCIsIFtcbiAgICAgICAgICAgIHRoaXMsXG4gICAgICAgICAgICBhcmdzLmNvbmNhdChhcnJheV9zbGljZShhcmd1bWVudHMpKVxuICAgICAgICBdKTtcbiAgICB9O1xufTtcblxuLyoqXG4gKiBSZXF1ZXN0cyB0aGUgbmFtZXMgb2YgdGhlIG93bmVkIHByb3BlcnRpZXMgb2YgYSBwcm9taXNlZFxuICogb2JqZWN0IGluIGEgZnV0dXJlIHR1cm4uXG4gKiBAcGFyYW0gb2JqZWN0ICAgIHByb21pc2Ugb3IgaW1tZWRpYXRlIHJlZmVyZW5jZSBmb3IgdGFyZ2V0IG9iamVjdFxuICogQHJldHVybiBwcm9taXNlIGZvciB0aGUga2V5cyBvZiB0aGUgZXZlbnR1YWxseSBzZXR0bGVkIG9iamVjdFxuICovXG5RLmtleXMgPSBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kaXNwYXRjaChcImtleXNcIiwgW10pO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUua2V5cyA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5kaXNwYXRjaChcImtleXNcIiwgW10pO1xufTtcblxuLyoqXG4gKiBUdXJucyBhbiBhcnJheSBvZiBwcm9taXNlcyBpbnRvIGEgcHJvbWlzZSBmb3IgYW4gYXJyYXkuICBJZiBhbnkgb2ZcbiAqIHRoZSBwcm9taXNlcyBnZXRzIHJlamVjdGVkLCB0aGUgd2hvbGUgYXJyYXkgaXMgcmVqZWN0ZWQgaW1tZWRpYXRlbHkuXG4gKiBAcGFyYW0ge0FycmF5Kn0gYW4gYXJyYXkgKG9yIHByb21pc2UgZm9yIGFuIGFycmF5KSBvZiB2YWx1ZXMgKG9yXG4gKiBwcm9taXNlcyBmb3IgdmFsdWVzKVxuICogQHJldHVybnMgYSBwcm9taXNlIGZvciBhbiBhcnJheSBvZiB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZXNcbiAqL1xuLy8gQnkgTWFyayBNaWxsZXJcbi8vIGh0dHA6Ly93aWtpLmVjbWFzY3JpcHQub3JnL2Rva3UucGhwP2lkPXN0cmF3bWFuOmNvbmN1cnJlbmN5JnJldj0xMzA4Nzc2NTIxI2FsbGZ1bGZpbGxlZFxuUS5hbGwgPSBhbGw7XG5mdW5jdGlvbiBhbGwocHJvbWlzZXMpIHtcbiAgICByZXR1cm4gd2hlbihwcm9taXNlcywgZnVuY3Rpb24gKHByb21pc2VzKSB7XG4gICAgICAgIHZhciBwZW5kaW5nQ291bnQgPSAwO1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgICAgICBhcnJheV9yZWR1Y2UocHJvbWlzZXMsIGZ1bmN0aW9uICh1bmRlZmluZWQsIHByb21pc2UsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgc25hcHNob3Q7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgaXNQcm9taXNlKHByb21pc2UpICYmXG4gICAgICAgICAgICAgICAgKHNuYXBzaG90ID0gcHJvbWlzZS5pbnNwZWN0KCkpLnN0YXRlID09PSBcImZ1bGZpbGxlZFwiXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlc1tpbmRleF0gPSBzbmFwc2hvdC52YWx1ZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgKytwZW5kaW5nQ291bnQ7XG4gICAgICAgICAgICAgICAgd2hlbihcbiAgICAgICAgICAgICAgICAgICAgcHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlc1tpbmRleF0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgtLXBlbmRpbmdDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocHJvbWlzZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QsXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChwcm9ncmVzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQubm90aWZ5KHsgaW5kZXg6IGluZGV4LCB2YWx1ZTogcHJvZ3Jlc3MgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LCB2b2lkIDApO1xuICAgICAgICBpZiAocGVuZGluZ0NvdW50ID09PSAwKSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHByb21pc2VzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9KTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUuYWxsID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBhbGwodGhpcyk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGZpcnN0IHJlc29sdmVkIHByb21pc2Ugb2YgYW4gYXJyYXkuIFByaW9yIHJlamVjdGVkIHByb21pc2VzIGFyZVxuICogaWdub3JlZC4gIFJlamVjdHMgb25seSBpZiBhbGwgcHJvbWlzZXMgYXJlIHJlamVjdGVkLlxuICogQHBhcmFtIHtBcnJheSp9IGFuIGFycmF5IGNvbnRhaW5pbmcgdmFsdWVzIG9yIHByb21pc2VzIGZvciB2YWx1ZXNcbiAqIEByZXR1cm5zIGEgcHJvbWlzZSBmdWxmaWxsZWQgd2l0aCB0aGUgdmFsdWUgb2YgdGhlIGZpcnN0IHJlc29sdmVkIHByb21pc2UsXG4gKiBvciBhIHJlamVjdGVkIHByb21pc2UgaWYgYWxsIHByb21pc2VzIGFyZSByZWplY3RlZC5cbiAqL1xuUS5hbnkgPSBhbnk7XG5cbmZ1bmN0aW9uIGFueShwcm9taXNlcykge1xuICAgIGlmIChwcm9taXNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIFEucmVzb2x2ZSgpO1xuICAgIH1cblxuICAgIHZhciBkZWZlcnJlZCA9IFEuZGVmZXIoKTtcbiAgICB2YXIgcGVuZGluZ0NvdW50ID0gMDtcbiAgICBhcnJheV9yZWR1Y2UocHJvbWlzZXMsIGZ1bmN0aW9uIChwcmV2LCBjdXJyZW50LCBpbmRleCkge1xuICAgICAgICB2YXIgcHJvbWlzZSA9IHByb21pc2VzW2luZGV4XTtcblxuICAgICAgICBwZW5kaW5nQ291bnQrKztcblxuICAgICAgICB3aGVuKHByb21pc2UsIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBvblByb2dyZXNzKTtcbiAgICAgICAgZnVuY3Rpb24gb25GdWxmaWxsZWQocmVzdWx0KSB7XG4gICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gb25SZWplY3RlZCgpIHtcbiAgICAgICAgICAgIHBlbmRpbmdDb3VudC0tO1xuICAgICAgICAgICAgaWYgKHBlbmRpbmdDb3VudCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChuZXcgRXJyb3IoXG4gICAgICAgICAgICAgICAgICAgIFwiQ2FuJ3QgZ2V0IGZ1bGZpbGxtZW50IHZhbHVlIGZyb20gYW55IHByb21pc2UsIGFsbCBcIiArXG4gICAgICAgICAgICAgICAgICAgIFwicHJvbWlzZXMgd2VyZSByZWplY3RlZC5cIlxuICAgICAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG9uUHJvZ3Jlc3MocHJvZ3Jlc3MpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLm5vdGlmeSh7XG4gICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgIHZhbHVlOiBwcm9ncmVzc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9LCB1bmRlZmluZWQpO1xuXG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cblByb21pc2UucHJvdG90eXBlLmFueSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYW55KHRoaXMpO1xufTtcblxuLyoqXG4gKiBXYWl0cyBmb3IgYWxsIHByb21pc2VzIHRvIGJlIHNldHRsZWQsIGVpdGhlciBmdWxmaWxsZWQgb3JcbiAqIHJlamVjdGVkLiAgVGhpcyBpcyBkaXN0aW5jdCBmcm9tIGBhbGxgIHNpbmNlIHRoYXQgd291bGQgc3RvcFxuICogd2FpdGluZyBhdCB0aGUgZmlyc3QgcmVqZWN0aW9uLiAgVGhlIHByb21pc2UgcmV0dXJuZWQgYnlcbiAqIGBhbGxSZXNvbHZlZGAgd2lsbCBuZXZlciBiZSByZWplY3RlZC5cbiAqIEBwYXJhbSBwcm9taXNlcyBhIHByb21pc2UgZm9yIGFuIGFycmF5IChvciBhbiBhcnJheSkgb2YgcHJvbWlzZXNcbiAqIChvciB2YWx1ZXMpXG4gKiBAcmV0dXJuIGEgcHJvbWlzZSBmb3IgYW4gYXJyYXkgb2YgcHJvbWlzZXNcbiAqL1xuUS5hbGxSZXNvbHZlZCA9IGRlcHJlY2F0ZShhbGxSZXNvbHZlZCwgXCJhbGxSZXNvbHZlZFwiLCBcImFsbFNldHRsZWRcIik7XG5mdW5jdGlvbiBhbGxSZXNvbHZlZChwcm9taXNlcykge1xuICAgIHJldHVybiB3aGVuKHByb21pc2VzLCBmdW5jdGlvbiAocHJvbWlzZXMpIHtcbiAgICAgICAgcHJvbWlzZXMgPSBhcnJheV9tYXAocHJvbWlzZXMsIFEpO1xuICAgICAgICByZXR1cm4gd2hlbihhbGwoYXJyYXlfbWFwKHByb21pc2VzLCBmdW5jdGlvbiAocHJvbWlzZSkge1xuICAgICAgICAgICAgcmV0dXJuIHdoZW4ocHJvbWlzZSwgbm9vcCwgbm9vcCk7XG4gICAgICAgIH0pKSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHByb21pc2VzO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cblxuUHJvbWlzZS5wcm90b3R5cGUuYWxsUmVzb2x2ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGFsbFJlc29sdmVkKHRoaXMpO1xufTtcblxuLyoqXG4gKiBAc2VlIFByb21pc2UjYWxsU2V0dGxlZFxuICovXG5RLmFsbFNldHRsZWQgPSBhbGxTZXR0bGVkO1xuZnVuY3Rpb24gYWxsU2V0dGxlZChwcm9taXNlcykge1xuICAgIHJldHVybiBRKHByb21pc2VzKS5hbGxTZXR0bGVkKCk7XG59XG5cbi8qKlxuICogVHVybnMgYW4gYXJyYXkgb2YgcHJvbWlzZXMgaW50byBhIHByb21pc2UgZm9yIGFuIGFycmF5IG9mIHRoZWlyIHN0YXRlcyAoYXNcbiAqIHJldHVybmVkIGJ5IGBpbnNwZWN0YCkgd2hlbiB0aGV5IGhhdmUgYWxsIHNldHRsZWQuXG4gKiBAcGFyYW0ge0FycmF5W0FueSpdfSB2YWx1ZXMgYW4gYXJyYXkgKG9yIHByb21pc2UgZm9yIGFuIGFycmF5KSBvZiB2YWx1ZXMgKG9yXG4gKiBwcm9taXNlcyBmb3IgdmFsdWVzKVxuICogQHJldHVybnMge0FycmF5W1N0YXRlXX0gYW4gYXJyYXkgb2Ygc3RhdGVzIGZvciB0aGUgcmVzcGVjdGl2ZSB2YWx1ZXMuXG4gKi9cblByb21pc2UucHJvdG90eXBlLmFsbFNldHRsZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiAocHJvbWlzZXMpIHtcbiAgICAgICAgcmV0dXJuIGFsbChhcnJheV9tYXAocHJvbWlzZXMsIGZ1bmN0aW9uIChwcm9taXNlKSB7XG4gICAgICAgICAgICBwcm9taXNlID0gUShwcm9taXNlKTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlZ2FyZGxlc3MoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2UuaW5zcGVjdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbihyZWdhcmRsZXNzLCByZWdhcmRsZXNzKTtcbiAgICAgICAgfSkpO1xuICAgIH0pO1xufTtcblxuLyoqXG4gKiBDYXB0dXJlcyB0aGUgZmFpbHVyZSBvZiBhIHByb21pc2UsIGdpdmluZyBhbiBvcG9ydHVuaXR5IHRvIHJlY292ZXJcbiAqIHdpdGggYSBjYWxsYmFjay4gIElmIHRoZSBnaXZlbiBwcm9taXNlIGlzIGZ1bGZpbGxlZCwgdGhlIHJldHVybmVkXG4gKiBwcm9taXNlIGlzIGZ1bGZpbGxlZC5cbiAqIEBwYXJhbSB7QW55Kn0gcHJvbWlzZSBmb3Igc29tZXRoaW5nXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayB0byBmdWxmaWxsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlmIHRoZVxuICogZ2l2ZW4gcHJvbWlzZSBpcyByZWplY3RlZFxuICogQHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBjYWxsYmFja1xuICovXG5RLmZhaWwgPSAvLyBYWFggbGVnYWN5XG5RW1wiY2F0Y2hcIl0gPSBmdW5jdGlvbiAob2JqZWN0LCByZWplY3RlZCkge1xuICAgIHJldHVybiBRKG9iamVjdCkudGhlbih2b2lkIDAsIHJlamVjdGVkKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmZhaWwgPSAvLyBYWFggbGVnYWN5XG5Qcm9taXNlLnByb3RvdHlwZVtcImNhdGNoXCJdID0gZnVuY3Rpb24gKHJlamVjdGVkKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbih2b2lkIDAsIHJlamVjdGVkKTtcbn07XG5cbi8qKlxuICogQXR0YWNoZXMgYSBsaXN0ZW5lciB0aGF0IGNhbiByZXNwb25kIHRvIHByb2dyZXNzIG5vdGlmaWNhdGlvbnMgZnJvbSBhXG4gKiBwcm9taXNlJ3Mgb3JpZ2luYXRpbmcgZGVmZXJyZWQuIFRoaXMgbGlzdGVuZXIgcmVjZWl2ZXMgdGhlIGV4YWN0IGFyZ3VtZW50c1xuICogcGFzc2VkIHRvIGBgZGVmZXJyZWQubm90aWZ5YGAuXG4gKiBAcGFyYW0ge0FueSp9IHByb21pc2UgZm9yIHNvbWV0aGluZ1xuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2sgdG8gcmVjZWl2ZSBhbnkgcHJvZ3Jlc3Mgbm90aWZpY2F0aW9uc1xuICogQHJldHVybnMgdGhlIGdpdmVuIHByb21pc2UsIHVuY2hhbmdlZFxuICovXG5RLnByb2dyZXNzID0gcHJvZ3Jlc3M7XG5mdW5jdGlvbiBwcm9ncmVzcyhvYmplY3QsIHByb2dyZXNzZWQpIHtcbiAgICByZXR1cm4gUShvYmplY3QpLnRoZW4odm9pZCAwLCB2b2lkIDAsIHByb2dyZXNzZWQpO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5wcm9ncmVzcyA9IGZ1bmN0aW9uIChwcm9ncmVzc2VkKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbih2b2lkIDAsIHZvaWQgMCwgcHJvZ3Jlc3NlZCk7XG59O1xuXG4vKipcbiAqIFByb3ZpZGVzIGFuIG9wcG9ydHVuaXR5IHRvIG9ic2VydmUgdGhlIHNldHRsaW5nIG9mIGEgcHJvbWlzZSxcbiAqIHJlZ2FyZGxlc3Mgb2Ygd2hldGhlciB0aGUgcHJvbWlzZSBpcyBmdWxmaWxsZWQgb3IgcmVqZWN0ZWQuICBGb3J3YXJkc1xuICogdGhlIHJlc29sdXRpb24gdG8gdGhlIHJldHVybmVkIHByb21pc2Ugd2hlbiB0aGUgY2FsbGJhY2sgaXMgZG9uZS5cbiAqIFRoZSBjYWxsYmFjayBjYW4gcmV0dXJuIGEgcHJvbWlzZSB0byBkZWZlciBjb21wbGV0aW9uLlxuICogQHBhcmFtIHtBbnkqfSBwcm9taXNlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayB0byBvYnNlcnZlIHRoZSByZXNvbHV0aW9uIG9mIHRoZSBnaXZlblxuICogcHJvbWlzZSwgdGFrZXMgbm8gYXJndW1lbnRzLlxuICogQHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgcmVzb2x1dGlvbiBvZiB0aGUgZ2l2ZW4gcHJvbWlzZSB3aGVuXG4gKiBgYGZpbmBgIGlzIGRvbmUuXG4gKi9cblEuZmluID0gLy8gWFhYIGxlZ2FjeVxuUVtcImZpbmFsbHlcIl0gPSBmdW5jdGlvbiAob2JqZWN0LCBjYWxsYmFjaykge1xuICAgIHJldHVybiBRKG9iamVjdClbXCJmaW5hbGx5XCJdKGNhbGxiYWNrKTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmZpbiA9IC8vIFhYWCBsZWdhY3lcblByb21pc2UucHJvdG90eXBlW1wiZmluYWxseVwiXSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgIGNhbGxiYWNrID0gUShjYWxsYmFjayk7XG4gICAgcmV0dXJuIHRoaXMudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmZjYWxsKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgLy8gVE9ETyBhdHRlbXB0IHRvIHJlY3ljbGUgdGhlIHJlamVjdGlvbiB3aXRoIFwidGhpc1wiLlxuICAgICAgICByZXR1cm4gY2FsbGJhY2suZmNhbGwoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRocm93IHJlYXNvbjtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59O1xuXG4vKipcbiAqIFRlcm1pbmF0ZXMgYSBjaGFpbiBvZiBwcm9taXNlcywgZm9yY2luZyByZWplY3Rpb25zIHRvIGJlXG4gKiB0aHJvd24gYXMgZXhjZXB0aW9ucy5cbiAqIEBwYXJhbSB7QW55Kn0gcHJvbWlzZSBhdCB0aGUgZW5kIG9mIGEgY2hhaW4gb2YgcHJvbWlzZXNcbiAqIEByZXR1cm5zIG5vdGhpbmdcbiAqL1xuUS5kb25lID0gZnVuY3Rpb24gKG9iamVjdCwgZnVsZmlsbGVkLCByZWplY3RlZCwgcHJvZ3Jlc3MpIHtcbiAgICByZXR1cm4gUShvYmplY3QpLmRvbmUoZnVsZmlsbGVkLCByZWplY3RlZCwgcHJvZ3Jlc3MpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUuZG9uZSA9IGZ1bmN0aW9uIChmdWxmaWxsZWQsIHJlamVjdGVkLCBwcm9ncmVzcykge1xuICAgIHZhciBvblVuaGFuZGxlZEVycm9yID0gZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIC8vIGZvcndhcmQgdG8gYSBmdXR1cmUgdHVybiBzbyB0aGF0IGBgd2hlbmBgXG4gICAgICAgIC8vIGRvZXMgbm90IGNhdGNoIGl0IGFuZCB0dXJuIGl0IGludG8gYSByZWplY3Rpb24uXG4gICAgICAgIFEubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbWFrZVN0YWNrVHJhY2VMb25nKGVycm9yLCBwcm9taXNlKTtcbiAgICAgICAgICAgIGlmIChRLm9uZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBRLm9uZXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIEF2b2lkIHVubmVjZXNzYXJ5IGBuZXh0VGlja2BpbmcgdmlhIGFuIHVubmVjZXNzYXJ5IGB3aGVuYC5cbiAgICB2YXIgcHJvbWlzZSA9IGZ1bGZpbGxlZCB8fCByZWplY3RlZCB8fCBwcm9ncmVzcyA/XG4gICAgICAgIHRoaXMudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkLCBwcm9ncmVzcykgOlxuICAgICAgICB0aGlzO1xuXG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSBcIm9iamVjdFwiICYmIHByb2Nlc3MgJiYgcHJvY2Vzcy5kb21haW4pIHtcbiAgICAgICAgb25VbmhhbmRsZWRFcnJvciA9IHByb2Nlc3MuZG9tYWluLmJpbmQob25VbmhhbmRsZWRFcnJvcik7XG4gICAgfVxuXG4gICAgcHJvbWlzZS50aGVuKHZvaWQgMCwgb25VbmhhbmRsZWRFcnJvcik7XG59O1xuXG4vKipcbiAqIENhdXNlcyBhIHByb21pc2UgdG8gYmUgcmVqZWN0ZWQgaWYgaXQgZG9lcyBub3QgZ2V0IGZ1bGZpbGxlZCBiZWZvcmVcbiAqIHNvbWUgbWlsbGlzZWNvbmRzIHRpbWUgb3V0LlxuICogQHBhcmFtIHtBbnkqfSBwcm9taXNlXG4gKiBAcGFyYW0ge051bWJlcn0gbWlsbGlzZWNvbmRzIHRpbWVvdXRcbiAqIEBwYXJhbSB7QW55Kn0gY3VzdG9tIGVycm9yIG1lc3NhZ2Ugb3IgRXJyb3Igb2JqZWN0IChvcHRpb25hbClcbiAqIEByZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIHJlc29sdXRpb24gb2YgdGhlIGdpdmVuIHByb21pc2UgaWYgaXQgaXNcbiAqIGZ1bGZpbGxlZCBiZWZvcmUgdGhlIHRpbWVvdXQsIG90aGVyd2lzZSByZWplY3RlZC5cbiAqL1xuUS50aW1lb3V0ID0gZnVuY3Rpb24gKG9iamVjdCwgbXMsIGVycm9yKSB7XG4gICAgcmV0dXJuIFEob2JqZWN0KS50aW1lb3V0KG1zLCBlcnJvcik7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS50aW1lb3V0ID0gZnVuY3Rpb24gKG1zLCBlcnJvcikge1xuICAgIHZhciBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgdmFyIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIWVycm9yIHx8IFwic3RyaW5nXCIgPT09IHR5cGVvZiBlcnJvcikge1xuICAgICAgICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoZXJyb3IgfHwgXCJUaW1lZCBvdXQgYWZ0ZXIgXCIgKyBtcyArIFwiIG1zXCIpO1xuICAgICAgICAgICAgZXJyb3IuY29kZSA9IFwiRVRJTUVET1VUXCI7XG4gICAgICAgIH1cbiAgICAgICAgZGVmZXJyZWQucmVqZWN0KGVycm9yKTtcbiAgICB9LCBtcyk7XG5cbiAgICB0aGlzLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHZhbHVlKTtcbiAgICB9LCBmdW5jdGlvbiAoZXhjZXB0aW9uKSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xuICAgICAgICBkZWZlcnJlZC5yZWplY3QoZXhjZXB0aW9uKTtcbiAgICB9LCBkZWZlcnJlZC5ub3RpZnkpO1xuXG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgZ2l2ZW4gdmFsdWUgKG9yIHByb21pc2VkIHZhbHVlKSwgc29tZVxuICogbWlsbGlzZWNvbmRzIGFmdGVyIGl0IHJlc29sdmVkLiBQYXNzZXMgcmVqZWN0aW9ucyBpbW1lZGlhdGVseS5cbiAqIEBwYXJhbSB7QW55Kn0gcHJvbWlzZVxuICogQHBhcmFtIHtOdW1iZXJ9IG1pbGxpc2Vjb25kc1xuICogQHJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgcmVzb2x1dGlvbiBvZiB0aGUgZ2l2ZW4gcHJvbWlzZSBhZnRlciBtaWxsaXNlY29uZHNcbiAqIHRpbWUgaGFzIGVsYXBzZWQgc2luY2UgdGhlIHJlc29sdXRpb24gb2YgdGhlIGdpdmVuIHByb21pc2UuXG4gKiBJZiB0aGUgZ2l2ZW4gcHJvbWlzZSByZWplY3RzLCB0aGF0IGlzIHBhc3NlZCBpbW1lZGlhdGVseS5cbiAqL1xuUS5kZWxheSA9IGZ1bmN0aW9uIChvYmplY3QsIHRpbWVvdXQpIHtcbiAgICBpZiAodGltZW91dCA9PT0gdm9pZCAwKSB7XG4gICAgICAgIHRpbWVvdXQgPSBvYmplY3Q7XG4gICAgICAgIG9iamVjdCA9IHZvaWQgMDtcbiAgICB9XG4gICAgcmV0dXJuIFEob2JqZWN0KS5kZWxheSh0aW1lb3V0KTtcbn07XG5cblByb21pc2UucHJvdG90eXBlLmRlbGF5ID0gZnVuY3Rpb24gKHRpbWVvdXQpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUodmFsdWUpO1xuICAgICAgICB9LCB0aW1lb3V0KTtcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gICAgfSk7XG59O1xuXG4vKipcbiAqIFBhc3NlcyBhIGNvbnRpbnVhdGlvbiB0byBhIE5vZGUgZnVuY3Rpb24sIHdoaWNoIGlzIGNhbGxlZCB3aXRoIHRoZSBnaXZlblxuICogYXJndW1lbnRzIHByb3ZpZGVkIGFzIGFuIGFycmF5LCBhbmQgcmV0dXJucyBhIHByb21pc2UuXG4gKlxuICogICAgICBRLm5mYXBwbHkoRlMucmVhZEZpbGUsIFtfX2ZpbGVuYW1lXSlcbiAqICAgICAgLnRoZW4oZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAqICAgICAgfSlcbiAqXG4gKi9cblEubmZhcHBseSA9IGZ1bmN0aW9uIChjYWxsYmFjaywgYXJncykge1xuICAgIHJldHVybiBRKGNhbGxiYWNrKS5uZmFwcGx5KGFyZ3MpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubmZhcHBseSA9IGZ1bmN0aW9uIChhcmdzKSB7XG4gICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICB2YXIgbm9kZUFyZ3MgPSBhcnJheV9zbGljZShhcmdzKTtcbiAgICBub2RlQXJncy5wdXNoKGRlZmVycmVkLm1ha2VOb2RlUmVzb2x2ZXIoKSk7XG4gICAgdGhpcy5mYXBwbHkobm9kZUFyZ3MpLmZhaWwoZGVmZXJyZWQucmVqZWN0KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn07XG5cbi8qKlxuICogUGFzc2VzIGEgY29udGludWF0aW9uIHRvIGEgTm9kZSBmdW5jdGlvbiwgd2hpY2ggaXMgY2FsbGVkIHdpdGggdGhlIGdpdmVuXG4gKiBhcmd1bWVudHMgcHJvdmlkZWQgaW5kaXZpZHVhbGx5LCBhbmQgcmV0dXJucyBhIHByb21pc2UuXG4gKiBAZXhhbXBsZVxuICogUS5uZmNhbGwoRlMucmVhZEZpbGUsIF9fZmlsZW5hbWUpXG4gKiAudGhlbihmdW5jdGlvbiAoY29udGVudCkge1xuICogfSlcbiAqXG4gKi9cblEubmZjYWxsID0gZnVuY3Rpb24gKGNhbGxiYWNrIC8qLi4uYXJncyovKSB7XG4gICAgdmFyIGFyZ3MgPSBhcnJheV9zbGljZShhcmd1bWVudHMsIDEpO1xuICAgIHJldHVybiBRKGNhbGxiYWNrKS5uZmFwcGx5KGFyZ3MpO1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubmZjYWxsID0gZnVuY3Rpb24gKC8qLi4uYXJncyovKSB7XG4gICAgdmFyIG5vZGVBcmdzID0gYXJyYXlfc2xpY2UoYXJndW1lbnRzKTtcbiAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIG5vZGVBcmdzLnB1c2goZGVmZXJyZWQubWFrZU5vZGVSZXNvbHZlcigpKTtcbiAgICB0aGlzLmZhcHBseShub2RlQXJncykuZmFpbChkZWZlcnJlZC5yZWplY3QpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xufTtcblxuLyoqXG4gKiBXcmFwcyBhIE5vZGVKUyBjb250aW51YXRpb24gcGFzc2luZyBmdW5jdGlvbiBhbmQgcmV0dXJucyBhbiBlcXVpdmFsZW50XG4gKiB2ZXJzaW9uIHRoYXQgcmV0dXJucyBhIHByb21pc2UuXG4gKiBAZXhhbXBsZVxuICogUS5uZmJpbmQoRlMucmVhZEZpbGUsIF9fZmlsZW5hbWUpKFwidXRmLThcIilcbiAqIC50aGVuKGNvbnNvbGUubG9nKVxuICogLmRvbmUoKVxuICovXG5RLm5mYmluZCA9XG5RLmRlbm9kZWlmeSA9IGZ1bmN0aW9uIChjYWxsYmFjayAvKi4uLmFyZ3MqLykge1xuICAgIHZhciBiYXNlQXJncyA9IGFycmF5X3NsaWNlKGFyZ3VtZW50cywgMSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5vZGVBcmdzID0gYmFzZUFyZ3MuY29uY2F0KGFycmF5X3NsaWNlKGFyZ3VtZW50cykpO1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgICAgICBub2RlQXJncy5wdXNoKGRlZmVycmVkLm1ha2VOb2RlUmVzb2x2ZXIoKSk7XG4gICAgICAgIFEoY2FsbGJhY2spLmZhcHBseShub2RlQXJncykuZmFpbChkZWZlcnJlZC5yZWplY3QpO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubmZiaW5kID1cblByb21pc2UucHJvdG90eXBlLmRlbm9kZWlmeSA9IGZ1bmN0aW9uICgvKi4uLmFyZ3MqLykge1xuICAgIHZhciBhcmdzID0gYXJyYXlfc2xpY2UoYXJndW1lbnRzKTtcbiAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG4gICAgcmV0dXJuIFEuZGVub2RlaWZ5LmFwcGx5KHZvaWQgMCwgYXJncyk7XG59O1xuXG5RLm5iaW5kID0gZnVuY3Rpb24gKGNhbGxiYWNrLCB0aGlzcCAvKi4uLmFyZ3MqLykge1xuICAgIHZhciBiYXNlQXJncyA9IGFycmF5X3NsaWNlKGFyZ3VtZW50cywgMik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG5vZGVBcmdzID0gYmFzZUFyZ3MuY29uY2F0KGFycmF5X3NsaWNlKGFyZ3VtZW50cykpO1xuICAgICAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgICAgICBub2RlQXJncy5wdXNoKGRlZmVycmVkLm1ha2VOb2RlUmVzb2x2ZXIoKSk7XG4gICAgICAgIGZ1bmN0aW9uIGJvdW5kKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KHRoaXNwLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIFEoYm91bmQpLmZhcHBseShub2RlQXJncykuZmFpbChkZWZlcnJlZC5yZWplY3QpO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9O1xufTtcblxuUHJvbWlzZS5wcm90b3R5cGUubmJpbmQgPSBmdW5jdGlvbiAoLyp0aGlzcCwgLi4uYXJncyovKSB7XG4gICAgdmFyIGFyZ3MgPSBhcnJheV9zbGljZShhcmd1bWVudHMsIDApO1xuICAgIGFyZ3MudW5zaGlmdCh0aGlzKTtcbiAgICByZXR1cm4gUS5uYmluZC5hcHBseSh2b2lkIDAsIGFyZ3MpO1xufTtcblxuLyoqXG4gKiBDYWxscyBhIG1ldGhvZCBvZiBhIE5vZGUtc3R5bGUgb2JqZWN0IHRoYXQgYWNjZXB0cyBhIE5vZGUtc3R5bGVcbiAqIGNhbGxiYWNrIHdpdGggYSBnaXZlbiBhcnJheSBvZiBhcmd1bWVudHMsIHBsdXMgYSBwcm92aWRlZCBjYWxsYmFjay5cbiAqIEBwYXJhbSBvYmplY3QgYW4gb2JqZWN0IHRoYXQgaGFzIHRoZSBuYW1lZCBtZXRob2RcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIG1ldGhvZCBvZiBvYmplY3RcbiAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgYXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIG1ldGhvZDsgdGhlIGNhbGxiYWNrXG4gKiB3aWxsIGJlIHByb3ZpZGVkIGJ5IFEgYW5kIGFwcGVuZGVkIHRvIHRoZXNlIGFyZ3VtZW50cy5cbiAqIEByZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIHZhbHVlIG9yIGVycm9yXG4gKi9cblEubm1hcHBseSA9IC8vIFhYWCBBcyBwcm9wb3NlZCBieSBcIlJlZHNhbmRyb1wiXG5RLm5wb3N0ID0gZnVuY3Rpb24gKG9iamVjdCwgbmFtZSwgYXJncykge1xuICAgIHJldHVybiBRKG9iamVjdCkubnBvc3QobmFtZSwgYXJncyk7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5ubWFwcGx5ID0gLy8gWFhYIEFzIHByb3Bvc2VkIGJ5IFwiUmVkc2FuZHJvXCJcblByb21pc2UucHJvdG90eXBlLm5wb3N0ID0gZnVuY3Rpb24gKG5hbWUsIGFyZ3MpIHtcbiAgICB2YXIgbm9kZUFyZ3MgPSBhcnJheV9zbGljZShhcmdzIHx8IFtdKTtcbiAgICB2YXIgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgIG5vZGVBcmdzLnB1c2goZGVmZXJyZWQubWFrZU5vZGVSZXNvbHZlcigpKTtcbiAgICB0aGlzLmRpc3BhdGNoKFwicG9zdFwiLCBbbmFtZSwgbm9kZUFyZ3NdKS5mYWlsKGRlZmVycmVkLnJlamVjdCk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59O1xuXG4vKipcbiAqIENhbGxzIGEgbWV0aG9kIG9mIGEgTm9kZS1zdHlsZSBvYmplY3QgdGhhdCBhY2NlcHRzIGEgTm9kZS1zdHlsZVxuICogY2FsbGJhY2ssIGZvcndhcmRpbmcgdGhlIGdpdmVuIHZhcmlhZGljIGFyZ3VtZW50cywgcGx1cyBhIHByb3ZpZGVkXG4gKiBjYWxsYmFjayBhcmd1bWVudC5cbiAqIEBwYXJhbSBvYmplY3QgYW4gb2JqZWN0IHRoYXQgaGFzIHRoZSBuYW1lZCBtZXRob2RcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIG5hbWUgb2YgdGhlIG1ldGhvZCBvZiBvYmplY3RcbiAqIEBwYXJhbSAuLi5hcmdzIGFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSBtZXRob2Q7IHRoZSBjYWxsYmFjayB3aWxsXG4gKiBiZSBwcm92aWRlZCBieSBRIGFuZCBhcHBlbmRlZCB0byB0aGVzZSBhcmd1bWVudHMuXG4gKiBAcmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSB2YWx1ZSBvciBlcnJvclxuICovXG5RLm5zZW5kID0gLy8gWFhYIEJhc2VkIG9uIE1hcmsgTWlsbGVyJ3MgcHJvcG9zZWQgXCJzZW5kXCJcblEubm1jYWxsID0gLy8gWFhYIEJhc2VkIG9uIFwiUmVkc2FuZHJvJ3NcIiBwcm9wb3NhbFxuUS5uaW52b2tlID0gZnVuY3Rpb24gKG9iamVjdCwgbmFtZSAvKi4uLmFyZ3MqLykge1xuICAgIHZhciBub2RlQXJncyA9IGFycmF5X3NsaWNlKGFyZ3VtZW50cywgMik7XG4gICAgdmFyIGRlZmVycmVkID0gZGVmZXIoKTtcbiAgICBub2RlQXJncy5wdXNoKGRlZmVycmVkLm1ha2VOb2RlUmVzb2x2ZXIoKSk7XG4gICAgUShvYmplY3QpLmRpc3BhdGNoKFwicG9zdFwiLCBbbmFtZSwgbm9kZUFyZ3NdKS5mYWlsKGRlZmVycmVkLnJlamVjdCk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59O1xuXG5Qcm9taXNlLnByb3RvdHlwZS5uc2VuZCA9IC8vIFhYWCBCYXNlZCBvbiBNYXJrIE1pbGxlcidzIHByb3Bvc2VkIFwic2VuZFwiXG5Qcm9taXNlLnByb3RvdHlwZS5ubWNhbGwgPSAvLyBYWFggQmFzZWQgb24gXCJSZWRzYW5kcm8nc1wiIHByb3Bvc2FsXG5Qcm9taXNlLnByb3RvdHlwZS5uaW52b2tlID0gZnVuY3Rpb24gKG5hbWUgLyouLi5hcmdzKi8pIHtcbiAgICB2YXIgbm9kZUFyZ3MgPSBhcnJheV9zbGljZShhcmd1bWVudHMsIDEpO1xuICAgIHZhciBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgbm9kZUFyZ3MucHVzaChkZWZlcnJlZC5tYWtlTm9kZVJlc29sdmVyKCkpO1xuICAgIHRoaXMuZGlzcGF0Y2goXCJwb3N0XCIsIFtuYW1lLCBub2RlQXJnc10pLmZhaWwoZGVmZXJyZWQucmVqZWN0KTtcbiAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbn07XG5cbi8qKlxuICogSWYgYSBmdW5jdGlvbiB3b3VsZCBsaWtlIHRvIHN1cHBvcnQgYm90aCBOb2RlIGNvbnRpbnVhdGlvbi1wYXNzaW5nLXN0eWxlIGFuZFxuICogcHJvbWlzZS1yZXR1cm5pbmctc3R5bGUsIGl0IGNhbiBlbmQgaXRzIGludGVybmFsIHByb21pc2UgY2hhaW4gd2l0aFxuICogYG5vZGVpZnkobm9kZWJhY2spYCwgZm9yd2FyZGluZyB0aGUgb3B0aW9uYWwgbm9kZWJhY2sgYXJndW1lbnQuICBJZiB0aGUgdXNlclxuICogZWxlY3RzIHRvIHVzZSBhIG5vZGViYWNrLCB0aGUgcmVzdWx0IHdpbGwgYmUgc2VudCB0aGVyZS4gIElmIHRoZXkgZG8gbm90XG4gKiBwYXNzIGEgbm9kZWJhY2ssIHRoZXkgd2lsbCByZWNlaXZlIHRoZSByZXN1bHQgcHJvbWlzZS5cbiAqIEBwYXJhbSBvYmplY3QgYSByZXN1bHQgKG9yIGEgcHJvbWlzZSBmb3IgYSByZXN1bHQpXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBub2RlYmFjayBhIE5vZGUuanMtc3R5bGUgY2FsbGJhY2tcbiAqIEByZXR1cm5zIGVpdGhlciB0aGUgcHJvbWlzZSBvciBub3RoaW5nXG4gKi9cblEubm9kZWlmeSA9IG5vZGVpZnk7XG5mdW5jdGlvbiBub2RlaWZ5KG9iamVjdCwgbm9kZWJhY2spIHtcbiAgICByZXR1cm4gUShvYmplY3QpLm5vZGVpZnkobm9kZWJhY2spO1xufVxuXG5Qcm9taXNlLnByb3RvdHlwZS5ub2RlaWZ5ID0gZnVuY3Rpb24gKG5vZGViYWNrKSB7XG4gICAgaWYgKG5vZGViYWNrKSB7XG4gICAgICAgIHRoaXMudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIFEubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIG5vZGViYWNrKG51bGwsIHZhbHVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgICAgICAgIFEubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIG5vZGViYWNrKGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59O1xuXG5RLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJRLm5vQ29uZmxpY3Qgb25seSB3b3JrcyB3aGVuIFEgaXMgdXNlZCBhcyBhIGdsb2JhbFwiKTtcbn07XG5cbi8vIEFsbCBjb2RlIGJlZm9yZSB0aGlzIHBvaW50IHdpbGwgYmUgZmlsdGVyZWQgZnJvbSBzdGFjayB0cmFjZXMuXG52YXIgcUVuZGluZ0xpbmUgPSBjYXB0dXJlTGluZSgpO1xuXG5yZXR1cm4gUTtcblxufSk7XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gcmVxdWlyZSgncmVhY3QvbGliL1JlYWN0RE9NJyk7XG4iLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgQXV0b0ZvY3VzVXRpbHNcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xuXG52YXIgZmluZERPTU5vZGUgPSByZXF1aXJlKCcuL2ZpbmRET01Ob2RlJyk7XG52YXIgZm9jdXNOb2RlID0gcmVxdWlyZSgnZmJqcy9saWIvZm9jdXNOb2RlJyk7XG5cbnZhciBNaXhpbiA9IHtcbiAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5wcm9wcy5hdXRvRm9jdXMpIHtcbiAgICAgIGZvY3VzTm9kZShmaW5kRE9NTm9kZSh0aGlzKSk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgQXV0b0ZvY3VzVXRpbHMgPSB7XG4gIE1peGluOiBNaXhpbixcblxuICBmb2N1c0RPTUNvbXBvbmVudDogZnVuY3Rpb24gKCkge1xuICAgIGZvY3VzTm9kZShSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCkpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEF1dG9Gb2N1c1V0aWxzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIEJlZm9yZUlucHV0RXZlbnRQbHVnaW5cbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSByZXF1aXJlKCcuL0V2ZW50Q29uc3RhbnRzJyk7XG52YXIgRXZlbnRQcm9wYWdhdG9ycyA9IHJlcXVpcmUoJy4vRXZlbnRQcm9wYWdhdG9ycycpO1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcbnZhciBGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUgPSByZXF1aXJlKCcuL0ZhbGxiYWNrQ29tcG9zaXRpb25TdGF0ZScpO1xudmFyIFN5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0NvbXBvc2l0aW9uRXZlbnQnKTtcbnZhciBTeW50aGV0aWNJbnB1dEV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNJbnB1dEV2ZW50Jyk7XG5cbnZhciBrZXlPZiA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU9mJyk7XG5cbnZhciBFTkRfS0VZQ09ERVMgPSBbOSwgMTMsIDI3LCAzMl07IC8vIFRhYiwgUmV0dXJuLCBFc2MsIFNwYWNlXG52YXIgU1RBUlRfS0VZQ09ERSA9IDIyOTtcblxudmFyIGNhblVzZUNvbXBvc2l0aW9uRXZlbnQgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgJ0NvbXBvc2l0aW9uRXZlbnQnIGluIHdpbmRvdztcblxudmFyIGRvY3VtZW50TW9kZSA9IG51bGw7XG5pZiAoRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NICYmICdkb2N1bWVudE1vZGUnIGluIGRvY3VtZW50KSB7XG4gIGRvY3VtZW50TW9kZSA9IGRvY3VtZW50LmRvY3VtZW50TW9kZTtcbn1cblxuLy8gV2Via2l0IG9mZmVycyBhIHZlcnkgdXNlZnVsIGB0ZXh0SW5wdXRgIGV2ZW50IHRoYXQgY2FuIGJlIHVzZWQgdG9cbi8vIGRpcmVjdGx5IHJlcHJlc2VudCBgYmVmb3JlSW5wdXRgLiBUaGUgSUUgYHRleHRpbnB1dGAgZXZlbnQgaXMgbm90IGFzXG4vLyB1c2VmdWwsIHNvIHdlIGRvbid0IHVzZSBpdC5cbnZhciBjYW5Vc2VUZXh0SW5wdXRFdmVudCA9IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiAnVGV4dEV2ZW50JyBpbiB3aW5kb3cgJiYgIWRvY3VtZW50TW9kZSAmJiAhaXNQcmVzdG8oKTtcblxuLy8gSW4gSUU5Kywgd2UgaGF2ZSBhY2Nlc3MgdG8gY29tcG9zaXRpb24gZXZlbnRzLCBidXQgdGhlIGRhdGEgc3VwcGxpZWRcbi8vIGJ5IHRoZSBuYXRpdmUgY29tcG9zaXRpb25lbmQgZXZlbnQgbWF5IGJlIGluY29ycmVjdC4gSmFwYW5lc2UgaWRlb2dyYXBoaWNcbi8vIHNwYWNlcywgZm9yIGluc3RhbmNlIChcXHUzMDAwKSBhcmUgbm90IHJlY29yZGVkIGNvcnJlY3RseS5cbnZhciB1c2VGYWxsYmFja0NvbXBvc2l0aW9uRGF0YSA9IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiAoIWNhblVzZUNvbXBvc2l0aW9uRXZlbnQgfHwgZG9jdW1lbnRNb2RlICYmIGRvY3VtZW50TW9kZSA+IDggJiYgZG9jdW1lbnRNb2RlIDw9IDExKTtcblxuLyoqXG4gKiBPcGVyYSA8PSAxMiBpbmNsdWRlcyBUZXh0RXZlbnQgaW4gd2luZG93LCBidXQgZG9lcyBub3QgZmlyZVxuICogdGV4dCBpbnB1dCBldmVudHMuIFJlbHkgb24ga2V5cHJlc3MgaW5zdGVhZC5cbiAqL1xuZnVuY3Rpb24gaXNQcmVzdG8oKSB7XG4gIHZhciBvcGVyYSA9IHdpbmRvdy5vcGVyYTtcbiAgcmV0dXJuIHR5cGVvZiBvcGVyYSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG9wZXJhLnZlcnNpb24gPT09ICdmdW5jdGlvbicgJiYgcGFyc2VJbnQob3BlcmEudmVyc2lvbigpLCAxMCkgPD0gMTI7XG59XG5cbnZhciBTUEFDRUJBUl9DT0RFID0gMzI7XG52YXIgU1BBQ0VCQVJfQ0hBUiA9IFN0cmluZy5mcm9tQ2hhckNvZGUoU1BBQ0VCQVJfQ09ERSk7XG5cbnZhciB0b3BMZXZlbFR5cGVzID0gRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcztcblxuLy8gRXZlbnRzIGFuZCB0aGVpciBjb3JyZXNwb25kaW5nIHByb3BlcnR5IG5hbWVzLlxudmFyIGV2ZW50VHlwZXMgPSB7XG4gIGJlZm9yZUlucHV0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25CZWZvcmVJbnB1dDogbnVsbCB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQmVmb3JlSW5wdXRDYXB0dXJlOiBudWxsIH0pXG4gICAgfSxcbiAgICBkZXBlbmRlbmNpZXM6IFt0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uRW5kLCB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzLCB0b3BMZXZlbFR5cGVzLnRvcFRleHRJbnB1dCwgdG9wTGV2ZWxUeXBlcy50b3BQYXN0ZV1cbiAgfSxcbiAgY29tcG9zaXRpb25FbmQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNvbXBvc2l0aW9uRW5kOiBudWxsIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Db21wb3NpdGlvbkVuZENhcHR1cmU6IG51bGwgfSlcbiAgICB9LFxuICAgIGRlcGVuZGVuY2llczogW3RvcExldmVsVHlwZXMudG9wQmx1ciwgdG9wTGV2ZWxUeXBlcy50b3BDb21wb3NpdGlvbkVuZCwgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duLCB0b3BMZXZlbFR5cGVzLnRvcEtleVByZXNzLCB0b3BMZXZlbFR5cGVzLnRvcEtleVVwLCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bl1cbiAgfSxcbiAgY29tcG9zaXRpb25TdGFydDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQ29tcG9zaXRpb25TdGFydDogbnVsbCB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ29tcG9zaXRpb25TdGFydENhcHR1cmU6IG51bGwgfSlcbiAgICB9LFxuICAgIGRlcGVuZGVuY2llczogW3RvcExldmVsVHlwZXMudG9wQmx1ciwgdG9wTGV2ZWxUeXBlcy50b3BDb21wb3NpdGlvblN0YXJ0LCB0b3BMZXZlbFR5cGVzLnRvcEtleURvd24sIHRvcExldmVsVHlwZXMudG9wS2V5UHJlc3MsIHRvcExldmVsVHlwZXMudG9wS2V5VXAsIHRvcExldmVsVHlwZXMudG9wTW91c2VEb3duXVxuICB9LFxuICBjb21wb3NpdGlvblVwZGF0ZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQ29tcG9zaXRpb25VcGRhdGU6IG51bGwgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNvbXBvc2l0aW9uVXBkYXRlQ2FwdHVyZTogbnVsbCB9KVxuICAgIH0sXG4gICAgZGVwZW5kZW5jaWVzOiBbdG9wTGV2ZWxUeXBlcy50b3BCbHVyLCB0b3BMZXZlbFR5cGVzLnRvcENvbXBvc2l0aW9uVXBkYXRlLCB0b3BMZXZlbFR5cGVzLnRvcEtleURvd24sIHRvcExldmVsVHlwZXMudG9wS2V5UHJlc3MsIHRvcExldmVsVHlwZXMudG9wS2V5VXAsIHRvcExldmVsVHlwZXMudG9wTW91c2VEb3duXVxuICB9XG59O1xuXG4vLyBUcmFjayB3aGV0aGVyIHdlJ3ZlIGV2ZXIgaGFuZGxlZCBhIGtleXByZXNzIG9uIHRoZSBzcGFjZSBrZXkuXG52YXIgaGFzU3BhY2VLZXlwcmVzcyA9IGZhbHNlO1xuXG4vKipcbiAqIFJldHVybiB3aGV0aGVyIGEgbmF0aXZlIGtleXByZXNzIGV2ZW50IGlzIGFzc3VtZWQgdG8gYmUgYSBjb21tYW5kLlxuICogVGhpcyBpcyByZXF1aXJlZCBiZWNhdXNlIEZpcmVmb3ggZmlyZXMgYGtleXByZXNzYCBldmVudHMgZm9yIGtleSBjb21tYW5kc1xuICogKGN1dCwgY29weSwgc2VsZWN0LWFsbCwgZXRjLikgZXZlbiB0aG91Z2ggbm8gY2hhcmFjdGVyIGlzIGluc2VydGVkLlxuICovXG5mdW5jdGlvbiBpc0tleXByZXNzQ29tbWFuZChuYXRpdmVFdmVudCkge1xuICByZXR1cm4gKG5hdGl2ZUV2ZW50LmN0cmxLZXkgfHwgbmF0aXZlRXZlbnQuYWx0S2V5IHx8IG5hdGl2ZUV2ZW50Lm1ldGFLZXkpICYmXG4gIC8vIGN0cmxLZXkgJiYgYWx0S2V5IGlzIGVxdWl2YWxlbnQgdG8gQWx0R3IsIGFuZCBpcyBub3QgYSBjb21tYW5kLlxuICAhKG5hdGl2ZUV2ZW50LmN0cmxLZXkgJiYgbmF0aXZlRXZlbnQuYWx0S2V5KTtcbn1cblxuLyoqXG4gKiBUcmFuc2xhdGUgbmF0aXZlIHRvcCBsZXZlbCBldmVudHMgaW50byBldmVudCB0eXBlcy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlXG4gKiBAcmV0dXJuIHtvYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGdldENvbXBvc2l0aW9uRXZlbnRUeXBlKHRvcExldmVsVHlwZSkge1xuICBzd2l0Y2ggKHRvcExldmVsVHlwZSkge1xuICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BDb21wb3NpdGlvblN0YXJ0OlxuICAgICAgcmV0dXJuIGV2ZW50VHlwZXMuY29tcG9zaXRpb25TdGFydDtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25FbmQ6XG4gICAgICByZXR1cm4gZXZlbnRUeXBlcy5jb21wb3NpdGlvbkVuZDtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25VcGRhdGU6XG4gICAgICByZXR1cm4gZXZlbnRUeXBlcy5jb21wb3NpdGlvblVwZGF0ZTtcbiAgfVxufVxuXG4vKipcbiAqIERvZXMgb3VyIGZhbGxiYWNrIGJlc3QtZ3Vlc3MgbW9kZWwgdGhpbmsgdGhpcyBldmVudCBzaWduaWZpZXMgdGhhdFxuICogY29tcG9zaXRpb24gaGFzIGJlZ3VuP1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNGYWxsYmFja0NvbXBvc2l0aW9uU3RhcnQodG9wTGV2ZWxUeXBlLCBuYXRpdmVFdmVudCkge1xuICByZXR1cm4gdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcEtleURvd24gJiYgbmF0aXZlRXZlbnQua2V5Q29kZSA9PT0gU1RBUlRfS0VZQ09ERTtcbn1cblxuLyoqXG4gKiBEb2VzIG91ciBmYWxsYmFjayBtb2RlIHRoaW5rIHRoYXQgdGhpcyBldmVudCBpcyB0aGUgZW5kIG9mIGNvbXBvc2l0aW9uP1xuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gaXNGYWxsYmFja0NvbXBvc2l0aW9uRW5kKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcbiAgc3dpdGNoICh0b3BMZXZlbFR5cGUpIHtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5VXA6XG4gICAgICAvLyBDb21tYW5kIGtleXMgaW5zZXJ0IG9yIGNsZWFyIElNRSBpbnB1dC5cbiAgICAgIHJldHVybiBFTkRfS0VZQ09ERVMuaW5kZXhPZihuYXRpdmVFdmVudC5rZXlDb2RlKSAhPT0gLTE7XG4gICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleURvd246XG4gICAgICAvLyBFeHBlY3QgSU1FIGtleUNvZGUgb24gZWFjaCBrZXlkb3duLiBJZiB3ZSBnZXQgYW55IG90aGVyXG4gICAgICAvLyBjb2RlIHdlIG11c3QgaGF2ZSBleGl0ZWQgZWFybGllci5cbiAgICAgIHJldHVybiBuYXRpdmVFdmVudC5rZXlDb2RlICE9PSBTVEFSVF9LRVlDT0RFO1xuICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BLZXlQcmVzczpcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTW91c2VEb3duOlxuICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BCbHVyOlxuICAgICAgLy8gRXZlbnRzIGFyZSBub3QgcG9zc2libGUgd2l0aG91dCBjYW5jZWxsaW5nIElNRS5cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBHb29nbGUgSW5wdXQgVG9vbHMgcHJvdmlkZXMgY29tcG9zaXRpb24gZGF0YSB2aWEgYSBDdXN0b21FdmVudCxcbiAqIHdpdGggdGhlIGBkYXRhYCBwcm9wZXJ0eSBwb3B1bGF0ZWQgaW4gdGhlIGBkZXRhaWxgIG9iamVjdC4gSWYgdGhpc1xuICogaXMgYXZhaWxhYmxlIG9uIHRoZSBldmVudCBvYmplY3QsIHVzZSBpdC4gSWYgbm90LCB0aGlzIGlzIGEgcGxhaW5cbiAqIGNvbXBvc2l0aW9uIGV2ZW50IGFuZCB3ZSBoYXZlIG5vdGhpbmcgc3BlY2lhbCB0byBleHRyYWN0LlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudFxuICogQHJldHVybiB7P3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0RGF0YUZyb21DdXN0b21FdmVudChuYXRpdmVFdmVudCkge1xuICB2YXIgZGV0YWlsID0gbmF0aXZlRXZlbnQuZGV0YWlsO1xuICBpZiAodHlwZW9mIGRldGFpbCA9PT0gJ29iamVjdCcgJiYgJ2RhdGEnIGluIGRldGFpbCkge1xuICAgIHJldHVybiBkZXRhaWwuZGF0YTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLy8gVHJhY2sgdGhlIGN1cnJlbnQgSU1FIGNvbXBvc2l0aW9uIGZhbGxiYWNrIG9iamVjdCwgaWYgYW55LlxudmFyIGN1cnJlbnRDb21wb3NpdGlvbiA9IG51bGw7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4gez9vYmplY3R9IEEgU3ludGhldGljQ29tcG9zaXRpb25FdmVudC5cbiAqL1xuZnVuY3Rpb24gZXh0cmFjdENvbXBvc2l0aW9uRXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIHZhciBldmVudFR5cGU7XG4gIHZhciBmYWxsYmFja0RhdGE7XG5cbiAgaWYgKGNhblVzZUNvbXBvc2l0aW9uRXZlbnQpIHtcbiAgICBldmVudFR5cGUgPSBnZXRDb21wb3NpdGlvbkV2ZW50VHlwZSh0b3BMZXZlbFR5cGUpO1xuICB9IGVsc2UgaWYgKCFjdXJyZW50Q29tcG9zaXRpb24pIHtcbiAgICBpZiAoaXNGYWxsYmFja0NvbXBvc2l0aW9uU3RhcnQodG9wTGV2ZWxUeXBlLCBuYXRpdmVFdmVudCkpIHtcbiAgICAgIGV2ZW50VHlwZSA9IGV2ZW50VHlwZXMuY29tcG9zaXRpb25TdGFydDtcbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNGYWxsYmFja0NvbXBvc2l0aW9uRW5kKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpKSB7XG4gICAgZXZlbnRUeXBlID0gZXZlbnRUeXBlcy5jb21wb3NpdGlvbkVuZDtcbiAgfVxuXG4gIGlmICghZXZlbnRUeXBlKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAodXNlRmFsbGJhY2tDb21wb3NpdGlvbkRhdGEpIHtcbiAgICAvLyBUaGUgY3VycmVudCBjb21wb3NpdGlvbiBpcyBzdG9yZWQgc3RhdGljYWxseSBhbmQgbXVzdCBub3QgYmVcbiAgICAvLyBvdmVyd3JpdHRlbiB3aGlsZSBjb21wb3NpdGlvbiBjb250aW51ZXMuXG4gICAgaWYgKCFjdXJyZW50Q29tcG9zaXRpb24gJiYgZXZlbnRUeXBlID09PSBldmVudFR5cGVzLmNvbXBvc2l0aW9uU3RhcnQpIHtcbiAgICAgIGN1cnJlbnRDb21wb3NpdGlvbiA9IEZhbGxiYWNrQ29tcG9zaXRpb25TdGF0ZS5nZXRQb29sZWQodG9wTGV2ZWxUYXJnZXQpO1xuICAgIH0gZWxzZSBpZiAoZXZlbnRUeXBlID09PSBldmVudFR5cGVzLmNvbXBvc2l0aW9uRW5kKSB7XG4gICAgICBpZiAoY3VycmVudENvbXBvc2l0aW9uKSB7XG4gICAgICAgIGZhbGxiYWNrRGF0YSA9IGN1cnJlbnRDb21wb3NpdGlvbi5nZXREYXRhKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgdmFyIGV2ZW50ID0gU3ludGhldGljQ29tcG9zaXRpb25FdmVudC5nZXRQb29sZWQoZXZlbnRUeXBlLCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuXG4gIGlmIChmYWxsYmFja0RhdGEpIHtcbiAgICAvLyBJbmplY3QgZGF0YSBnZW5lcmF0ZWQgZnJvbSBmYWxsYmFjayBwYXRoIGludG8gdGhlIHN5bnRoZXRpYyBldmVudC5cbiAgICAvLyBUaGlzIG1hdGNoZXMgdGhlIHByb3BlcnR5IG9mIG5hdGl2ZSBDb21wb3NpdGlvbkV2ZW50SW50ZXJmYWNlLlxuICAgIGV2ZW50LmRhdGEgPSBmYWxsYmFja0RhdGE7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGN1c3RvbURhdGEgPSBnZXREYXRhRnJvbUN1c3RvbUV2ZW50KG5hdGl2ZUV2ZW50KTtcbiAgICBpZiAoY3VzdG9tRGF0YSAhPT0gbnVsbCkge1xuICAgICAgZXZlbnQuZGF0YSA9IGN1c3RvbURhdGE7XG4gICAgfVxuICB9XG5cbiAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50KTtcbiAgcmV0dXJuIGV2ZW50O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4gez9zdHJpbmd9IFRoZSBzdHJpbmcgY29ycmVzcG9uZGluZyB0byB0aGlzIGBiZWZvcmVJbnB1dGAgZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIGdldE5hdGl2ZUJlZm9yZUlucHV0Q2hhcnModG9wTGV2ZWxUeXBlLCBuYXRpdmVFdmVudCkge1xuICBzd2l0Y2ggKHRvcExldmVsVHlwZSkge1xuICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BDb21wb3NpdGlvbkVuZDpcbiAgICAgIHJldHVybiBnZXREYXRhRnJvbUN1c3RvbUV2ZW50KG5hdGl2ZUV2ZW50KTtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5UHJlc3M6XG4gICAgICAvKipcbiAgICAgICAqIElmIG5hdGl2ZSBgdGV4dElucHV0YCBldmVudHMgYXJlIGF2YWlsYWJsZSwgb3VyIGdvYWwgaXMgdG8gbWFrZVxuICAgICAgICogdXNlIG9mIHRoZW0uIEhvd2V2ZXIsIHRoZXJlIGlzIGEgc3BlY2lhbCBjYXNlOiB0aGUgc3BhY2ViYXIga2V5LlxuICAgICAgICogSW4gV2Via2l0LCBwcmV2ZW50aW5nIGRlZmF1bHQgb24gYSBzcGFjZWJhciBgdGV4dElucHV0YCBldmVudFxuICAgICAgICogY2FuY2VscyBjaGFyYWN0ZXIgaW5zZXJ0aW9uLCBidXQgaXQgKmFsc28qIGNhdXNlcyB0aGUgYnJvd3NlclxuICAgICAgICogdG8gZmFsbCBiYWNrIHRvIGl0cyBkZWZhdWx0IHNwYWNlYmFyIGJlaGF2aW9yIG9mIHNjcm9sbGluZyB0aGVcbiAgICAgICAqIHBhZ2UuXG4gICAgICAgKlxuICAgICAgICogVHJhY2tpbmcgYXQ6XG4gICAgICAgKiBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9MzU1MTAzXG4gICAgICAgKlxuICAgICAgICogVG8gYXZvaWQgdGhpcyBpc3N1ZSwgdXNlIHRoZSBrZXlwcmVzcyBldmVudCBhcyBpZiBubyBgdGV4dElucHV0YFxuICAgICAgICogZXZlbnQgaXMgYXZhaWxhYmxlLlxuICAgICAgICovXG4gICAgICB2YXIgd2hpY2ggPSBuYXRpdmVFdmVudC53aGljaDtcbiAgICAgIGlmICh3aGljaCAhPT0gU1BBQ0VCQVJfQ09ERSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgaGFzU3BhY2VLZXlwcmVzcyA9IHRydWU7XG4gICAgICByZXR1cm4gU1BBQ0VCQVJfQ0hBUjtcblxuICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BUZXh0SW5wdXQ6XG4gICAgICAvLyBSZWNvcmQgdGhlIGNoYXJhY3RlcnMgdG8gYmUgYWRkZWQgdG8gdGhlIERPTS5cbiAgICAgIHZhciBjaGFycyA9IG5hdGl2ZUV2ZW50LmRhdGE7XG5cbiAgICAgIC8vIElmIGl0J3MgYSBzcGFjZWJhciBjaGFyYWN0ZXIsIGFzc3VtZSB0aGF0IHdlIGhhdmUgYWxyZWFkeSBoYW5kbGVkXG4gICAgICAvLyBpdCBhdCB0aGUga2V5cHJlc3MgbGV2ZWwgYW5kIGJhaWwgaW1tZWRpYXRlbHkuIEFuZHJvaWQgQ2hyb21lXG4gICAgICAvLyBkb2Vzbid0IGdpdmUgdXMga2V5Y29kZXMsIHNvIHdlIG5lZWQgdG8gYmxhY2tsaXN0IGl0LlxuICAgICAgaWYgKGNoYXJzID09PSBTUEFDRUJBUl9DSEFSICYmIGhhc1NwYWNlS2V5cHJlc3MpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBjaGFycztcblxuICAgIGRlZmF1bHQ6XG4gICAgICAvLyBGb3Igb3RoZXIgbmF0aXZlIGV2ZW50IHR5cGVzLCBkbyBub3RoaW5nLlxuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBGb3IgYnJvd3NlcnMgdGhhdCBkbyBub3QgcHJvdmlkZSB0aGUgYHRleHRJbnB1dGAgZXZlbnQsIGV4dHJhY3QgdGhlXG4gKiBhcHByb3ByaWF0ZSBzdHJpbmcgdG8gdXNlIGZvciBTeW50aGV0aWNJbnB1dEV2ZW50LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4gez9zdHJpbmd9IFRoZSBmYWxsYmFjayBzdHJpbmcgZm9yIHRoaXMgYGJlZm9yZUlucHV0YCBldmVudC5cbiAqL1xuZnVuY3Rpb24gZ2V0RmFsbGJhY2tCZWZvcmVJbnB1dENoYXJzKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpIHtcbiAgLy8gSWYgd2UgYXJlIGN1cnJlbnRseSBjb21wb3NpbmcgKElNRSkgYW5kIHVzaW5nIGEgZmFsbGJhY2sgdG8gZG8gc28sXG4gIC8vIHRyeSB0byBleHRyYWN0IHRoZSBjb21wb3NlZCBjaGFyYWN0ZXJzIGZyb20gdGhlIGZhbGxiYWNrIG9iamVjdC5cbiAgaWYgKGN1cnJlbnRDb21wb3NpdGlvbikge1xuICAgIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25FbmQgfHwgaXNGYWxsYmFja0NvbXBvc2l0aW9uRW5kKHRvcExldmVsVHlwZSwgbmF0aXZlRXZlbnQpKSB7XG4gICAgICB2YXIgY2hhcnMgPSBjdXJyZW50Q29tcG9zaXRpb24uZ2V0RGF0YSgpO1xuICAgICAgRmFsbGJhY2tDb21wb3NpdGlvblN0YXRlLnJlbGVhc2UoY3VycmVudENvbXBvc2l0aW9uKTtcbiAgICAgIGN1cnJlbnRDb21wb3NpdGlvbiA9IG51bGw7XG4gICAgICByZXR1cm4gY2hhcnM7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgc3dpdGNoICh0b3BMZXZlbFR5cGUpIHtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wUGFzdGU6XG4gICAgICAvLyBJZiBhIHBhc3RlIGV2ZW50IG9jY3VycyBhZnRlciBhIGtleXByZXNzLCB0aHJvdyBvdXQgdGhlIGlucHV0XG4gICAgICAvLyBjaGFycy4gUGFzdGUgZXZlbnRzIHNob3VsZCBub3QgbGVhZCB0byBCZWZvcmVJbnB1dCBldmVudHMuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5UHJlc3M6XG4gICAgICAvKipcbiAgICAgICAqIEFzIG9mIHYyNywgRmlyZWZveCBtYXkgZmlyZSBrZXlwcmVzcyBldmVudHMgZXZlbiB3aGVuIG5vIGNoYXJhY3RlclxuICAgICAgICogd2lsbCBiZSBpbnNlcnRlZC4gQSBmZXcgcG9zc2liaWxpdGllczpcbiAgICAgICAqXG4gICAgICAgKiAtIGB3aGljaGAgaXMgYDBgLiBBcnJvdyBrZXlzLCBFc2Mga2V5LCBldGMuXG4gICAgICAgKlxuICAgICAgICogLSBgd2hpY2hgIGlzIHRoZSBwcmVzc2VkIGtleSBjb2RlLCBidXQgbm8gY2hhciBpcyBhdmFpbGFibGUuXG4gICAgICAgKiAgIEV4OiAnQWx0R3IgKyBkYCBpbiBQb2xpc2guIFRoZXJlIGlzIG5vIG1vZGlmaWVkIGNoYXJhY3RlciBmb3JcbiAgICAgICAqICAgdGhpcyBrZXkgY29tYmluYXRpb24gYW5kIG5vIGNoYXJhY3RlciBpcyBpbnNlcnRlZCBpbnRvIHRoZVxuICAgICAgICogICBkb2N1bWVudCwgYnV0IEZGIGZpcmVzIHRoZSBrZXlwcmVzcyBmb3IgY2hhciBjb2RlIGAxMDBgIGFueXdheS5cbiAgICAgICAqICAgTm8gYGlucHV0YCBldmVudCB3aWxsIG9jY3VyLlxuICAgICAgICpcbiAgICAgICAqIC0gYHdoaWNoYCBpcyB0aGUgcHJlc3NlZCBrZXkgY29kZSwgYnV0IGEgY29tbWFuZCBjb21iaW5hdGlvbiBpc1xuICAgICAgICogICBiZWluZyB1c2VkLiBFeDogYENtZCtDYC4gTm8gY2hhcmFjdGVyIGlzIGluc2VydGVkLCBhbmQgbm9cbiAgICAgICAqICAgYGlucHV0YCBldmVudCB3aWxsIG9jY3VyLlxuICAgICAgICovXG4gICAgICBpZiAobmF0aXZlRXZlbnQud2hpY2ggJiYgIWlzS2V5cHJlc3NDb21tYW5kKG5hdGl2ZUV2ZW50KSkge1xuICAgICAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShuYXRpdmVFdmVudC53aGljaCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29tcG9zaXRpb25FbmQ6XG4gICAgICByZXR1cm4gdXNlRmFsbGJhY2tDb21wb3NpdGlvbkRhdGEgPyBudWxsIDogbmF0aXZlRXZlbnQuZGF0YTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRyYWN0IGEgU3ludGhldGljSW5wdXRFdmVudCBmb3IgYGJlZm9yZUlucHV0YCwgYmFzZWQgb24gZWl0aGVyIG5hdGl2ZVxuICogYHRleHRJbnB1dGAgb3IgZmFsbGJhY2sgYmVoYXZpb3IuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVGFyZ2V0SUQgSUQgb2YgYHRvcExldmVsVGFyZ2V0YC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEByZXR1cm4gez9vYmplY3R9IEEgU3ludGhldGljSW5wdXRFdmVudC5cbiAqL1xuZnVuY3Rpb24gZXh0cmFjdEJlZm9yZUlucHV0RXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIHZhciBjaGFycztcblxuICBpZiAoY2FuVXNlVGV4dElucHV0RXZlbnQpIHtcbiAgICBjaGFycyA9IGdldE5hdGl2ZUJlZm9yZUlucHV0Q2hhcnModG9wTGV2ZWxUeXBlLCBuYXRpdmVFdmVudCk7XG4gIH0gZWxzZSB7XG4gICAgY2hhcnMgPSBnZXRGYWxsYmFja0JlZm9yZUlucHV0Q2hhcnModG9wTGV2ZWxUeXBlLCBuYXRpdmVFdmVudCk7XG4gIH1cblxuICAvLyBJZiBubyBjaGFyYWN0ZXJzIGFyZSBiZWluZyBpbnNlcnRlZCwgbm8gQmVmb3JlSW5wdXQgZXZlbnQgc2hvdWxkXG4gIC8vIGJlIGZpcmVkLlxuICBpZiAoIWNoYXJzKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgZXZlbnQgPSBTeW50aGV0aWNJbnB1dEV2ZW50LmdldFBvb2xlZChldmVudFR5cGVzLmJlZm9yZUlucHV0LCB0b3BMZXZlbFRhcmdldElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuXG4gIGV2ZW50LmRhdGEgPSBjaGFycztcbiAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50KTtcbiAgcmV0dXJuIGV2ZW50O1xufVxuXG4vKipcbiAqIENyZWF0ZSBhbiBgb25CZWZvcmVJbnB1dGAgZXZlbnQgdG8gbWF0Y2hcbiAqIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTMvV0QtRE9NLUxldmVsLTMtRXZlbnRzLTIwMTMxMTA1LyNldmVudHMtaW5wdXRldmVudHMuXG4gKlxuICogVGhpcyBldmVudCBwbHVnaW4gaXMgYmFzZWQgb24gdGhlIG5hdGl2ZSBgdGV4dElucHV0YCBldmVudFxuICogYXZhaWxhYmxlIGluIENocm9tZSwgU2FmYXJpLCBPcGVyYSwgYW5kIElFLiBUaGlzIGV2ZW50IGZpcmVzIGFmdGVyXG4gKiBgb25LZXlQcmVzc2AgYW5kIGBvbkNvbXBvc2l0aW9uRW5kYCwgYnV0IGJlZm9yZSBgb25JbnB1dGAuXG4gKlxuICogYGJlZm9yZUlucHV0YCBpcyBzcGVjJ2QgYnV0IG5vdCBpbXBsZW1lbnRlZCBpbiBhbnkgYnJvd3NlcnMsIGFuZFxuICogdGhlIGBpbnB1dGAgZXZlbnQgZG9lcyBub3QgcHJvdmlkZSBhbnkgdXNlZnVsIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgaGFzXG4gKiBhY3R1YWxseSBiZWVuIGFkZGVkLCBjb250cmFyeSB0byB0aGUgc3BlYy4gVGh1cywgYHRleHRJbnB1dGAgaXMgdGhlIGJlc3RcbiAqIGF2YWlsYWJsZSBldmVudCB0byBpZGVudGlmeSB0aGUgY2hhcmFjdGVycyB0aGF0IGhhdmUgYWN0dWFsbHkgYmVlbiBpbnNlcnRlZFxuICogaW50byB0aGUgdGFyZ2V0IG5vZGUuXG4gKlxuICogVGhpcyBwbHVnaW4gaXMgYWxzbyByZXNwb25zaWJsZSBmb3IgZW1pdHRpbmcgYGNvbXBvc2l0aW9uYCBldmVudHMsIHRodXNcbiAqIGFsbG93aW5nIHVzIHRvIHNoYXJlIGNvbXBvc2l0aW9uIGZhbGxiYWNrIGNvZGUgZm9yIGJvdGggYGJlZm9yZUlucHV0YCBhbmRcbiAqIGBjb21wb3NpdGlvbmAgZXZlbnQgdHlwZXMuXG4gKi9cbnZhciBCZWZvcmVJbnB1dEV2ZW50UGx1Z2luID0ge1xuXG4gIGV2ZW50VHlwZXM6IGV2ZW50VHlwZXMsXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4geyp9IEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAc2VlIHtFdmVudFBsdWdpbkh1Yi5leHRyYWN0RXZlbnRzfVxuICAgKi9cbiAgZXh0cmFjdEV2ZW50czogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICAgIHJldHVybiBbZXh0cmFjdENvbXBvc2l0aW9uRXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSwgZXh0cmFjdEJlZm9yZUlucHV0RXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KV07XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gQmVmb3JlSW5wdXRFdmVudFBsdWdpbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgQ1NTUHJvcGVydHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQ1NTIHByb3BlcnRpZXMgd2hpY2ggYWNjZXB0IG51bWJlcnMgYnV0IGFyZSBub3QgaW4gdW5pdHMgb2YgXCJweFwiLlxuICovXG52YXIgaXNVbml0bGVzc051bWJlciA9IHtcbiAgYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6IHRydWUsXG4gIGJveEZsZXg6IHRydWUsXG4gIGJveEZsZXhHcm91cDogdHJ1ZSxcbiAgYm94T3JkaW5hbEdyb3VwOiB0cnVlLFxuICBjb2x1bW5Db3VudDogdHJ1ZSxcbiAgZmxleDogdHJ1ZSxcbiAgZmxleEdyb3c6IHRydWUsXG4gIGZsZXhQb3NpdGl2ZTogdHJ1ZSxcbiAgZmxleFNocmluazogdHJ1ZSxcbiAgZmxleE5lZ2F0aXZlOiB0cnVlLFxuICBmbGV4T3JkZXI6IHRydWUsXG4gIGZvbnRXZWlnaHQ6IHRydWUsXG4gIGxpbmVDbGFtcDogdHJ1ZSxcbiAgbGluZUhlaWdodDogdHJ1ZSxcbiAgb3BhY2l0eTogdHJ1ZSxcbiAgb3JkZXI6IHRydWUsXG4gIG9ycGhhbnM6IHRydWUsXG4gIHRhYlNpemU6IHRydWUsXG4gIHdpZG93czogdHJ1ZSxcbiAgekluZGV4OiB0cnVlLFxuICB6b29tOiB0cnVlLFxuXG4gIC8vIFNWRy1yZWxhdGVkIHByb3BlcnRpZXNcbiAgZmlsbE9wYWNpdHk6IHRydWUsXG4gIHN0b3BPcGFjaXR5OiB0cnVlLFxuICBzdHJva2VEYXNob2Zmc2V0OiB0cnVlLFxuICBzdHJva2VPcGFjaXR5OiB0cnVlLFxuICBzdHJva2VXaWR0aDogdHJ1ZVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJlZml4IHZlbmRvci1zcGVjaWZpYyBwcmVmaXgsIGVnOiBXZWJraXRcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgc3R5bGUgbmFtZSwgZWc6IHRyYW5zaXRpb25EdXJhdGlvblxuICogQHJldHVybiB7c3RyaW5nfSBzdHlsZSBuYW1lIHByZWZpeGVkIHdpdGggYHByZWZpeGAsIHByb3Blcmx5IGNhbWVsQ2FzZWQsIGVnOlxuICogV2Via2l0VHJhbnNpdGlvbkR1cmF0aW9uXG4gKi9cbmZ1bmN0aW9uIHByZWZpeEtleShwcmVmaXgsIGtleSkge1xuICByZXR1cm4gcHJlZml4ICsga2V5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsga2V5LnN1YnN0cmluZygxKTtcbn1cblxuLyoqXG4gKiBTdXBwb3J0IHN0eWxlIG5hbWVzIHRoYXQgbWF5IGNvbWUgcGFzc2VkIGluIHByZWZpeGVkIGJ5IGFkZGluZyBwZXJtdXRhdGlvbnNcbiAqIG9mIHZlbmRvciBwcmVmaXhlcy5cbiAqL1xudmFyIHByZWZpeGVzID0gWydXZWJraXQnLCAnbXMnLCAnTW96JywgJ08nXTtcblxuLy8gVXNpbmcgT2JqZWN0LmtleXMgaGVyZSwgb3IgZWxzZSB0aGUgdmFuaWxsYSBmb3ItaW4gbG9vcCBtYWtlcyBJRTggZ28gaW50byBhblxuLy8gaW5maW5pdGUgbG9vcCwgYmVjYXVzZSBpdCBpdGVyYXRlcyBvdmVyIHRoZSBuZXdseSBhZGRlZCBwcm9wcyB0b28uXG5PYmplY3Qua2V5cyhpc1VuaXRsZXNzTnVtYmVyKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG4gIHByZWZpeGVzLmZvckVhY2goZnVuY3Rpb24gKHByZWZpeCkge1xuICAgIGlzVW5pdGxlc3NOdW1iZXJbcHJlZml4S2V5KHByZWZpeCwgcHJvcCldID0gaXNVbml0bGVzc051bWJlcltwcm9wXTtcbiAgfSk7XG59KTtcblxuLyoqXG4gKiBNb3N0IHN0eWxlIHByb3BlcnRpZXMgY2FuIGJlIHVuc2V0IGJ5IGRvaW5nIC5zdHlsZVtwcm9wXSA9ICcnIGJ1dCBJRThcbiAqIGRvZXNuJ3QgbGlrZSBkb2luZyB0aGF0IHdpdGggc2hvcnRoYW5kIHByb3BlcnRpZXMgc28gZm9yIHRoZSBwcm9wZXJ0aWVzIHRoYXRcbiAqIElFOCBicmVha3Mgb24sIHdoaWNoIGFyZSBsaXN0ZWQgaGVyZSwgd2UgaW5zdGVhZCB1bnNldCBlYWNoIG9mIHRoZVxuICogaW5kaXZpZHVhbCBwcm9wZXJ0aWVzLiBTZWUgaHR0cDovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTIzODUuXG4gKiBUaGUgNC12YWx1ZSAnY2xvY2snIHByb3BlcnRpZXMgbGlrZSBtYXJnaW4sIHBhZGRpbmcsIGJvcmRlci13aWR0aCBzZWVtIHRvXG4gKiBiZWhhdmUgd2l0aG91dCBhbnkgcHJvYmxlbXMuIEN1cmlvdXNseSwgbGlzdC1zdHlsZSB3b3JrcyB0b28gd2l0aG91dCBhbnlcbiAqIHNwZWNpYWwgcHJvZGRpbmcuXG4gKi9cbnZhciBzaG9ydGhhbmRQcm9wZXJ0eUV4cGFuc2lvbnMgPSB7XG4gIGJhY2tncm91bmQ6IHtcbiAgICBiYWNrZ3JvdW5kQXR0YWNobWVudDogdHJ1ZSxcbiAgICBiYWNrZ3JvdW5kQ29sb3I6IHRydWUsXG4gICAgYmFja2dyb3VuZEltYWdlOiB0cnVlLFxuICAgIGJhY2tncm91bmRQb3NpdGlvblg6IHRydWUsXG4gICAgYmFja2dyb3VuZFBvc2l0aW9uWTogdHJ1ZSxcbiAgICBiYWNrZ3JvdW5kUmVwZWF0OiB0cnVlXG4gIH0sXG4gIGJhY2tncm91bmRQb3NpdGlvbjoge1xuICAgIGJhY2tncm91bmRQb3NpdGlvblg6IHRydWUsXG4gICAgYmFja2dyb3VuZFBvc2l0aW9uWTogdHJ1ZVxuICB9LFxuICBib3JkZXI6IHtcbiAgICBib3JkZXJXaWR0aDogdHJ1ZSxcbiAgICBib3JkZXJTdHlsZTogdHJ1ZSxcbiAgICBib3JkZXJDb2xvcjogdHJ1ZVxuICB9LFxuICBib3JkZXJCb3R0b206IHtcbiAgICBib3JkZXJCb3R0b21XaWR0aDogdHJ1ZSxcbiAgICBib3JkZXJCb3R0b21TdHlsZTogdHJ1ZSxcbiAgICBib3JkZXJCb3R0b21Db2xvcjogdHJ1ZVxuICB9LFxuICBib3JkZXJMZWZ0OiB7XG4gICAgYm9yZGVyTGVmdFdpZHRoOiB0cnVlLFxuICAgIGJvcmRlckxlZnRTdHlsZTogdHJ1ZSxcbiAgICBib3JkZXJMZWZ0Q29sb3I6IHRydWVcbiAgfSxcbiAgYm9yZGVyUmlnaHQ6IHtcbiAgICBib3JkZXJSaWdodFdpZHRoOiB0cnVlLFxuICAgIGJvcmRlclJpZ2h0U3R5bGU6IHRydWUsXG4gICAgYm9yZGVyUmlnaHRDb2xvcjogdHJ1ZVxuICB9LFxuICBib3JkZXJUb3A6IHtcbiAgICBib3JkZXJUb3BXaWR0aDogdHJ1ZSxcbiAgICBib3JkZXJUb3BTdHlsZTogdHJ1ZSxcbiAgICBib3JkZXJUb3BDb2xvcjogdHJ1ZVxuICB9LFxuICBmb250OiB7XG4gICAgZm9udFN0eWxlOiB0cnVlLFxuICAgIGZvbnRWYXJpYW50OiB0cnVlLFxuICAgIGZvbnRXZWlnaHQ6IHRydWUsXG4gICAgZm9udFNpemU6IHRydWUsXG4gICAgbGluZUhlaWdodDogdHJ1ZSxcbiAgICBmb250RmFtaWx5OiB0cnVlXG4gIH0sXG4gIG91dGxpbmU6IHtcbiAgICBvdXRsaW5lV2lkdGg6IHRydWUsXG4gICAgb3V0bGluZVN0eWxlOiB0cnVlLFxuICAgIG91dGxpbmVDb2xvcjogdHJ1ZVxuICB9XG59O1xuXG52YXIgQ1NTUHJvcGVydHkgPSB7XG4gIGlzVW5pdGxlc3NOdW1iZXI6IGlzVW5pdGxlc3NOdW1iZXIsXG4gIHNob3J0aGFuZFByb3BlcnR5RXhwYW5zaW9uczogc2hvcnRoYW5kUHJvcGVydHlFeHBhbnNpb25zXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENTU1Byb3BlcnR5OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBDU1NQcm9wZXJ0eU9wZXJhdGlvbnNcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQ1NTUHJvcGVydHkgPSByZXF1aXJlKCcuL0NTU1Byb3BlcnR5Jyk7XG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xudmFyIFJlYWN0UGVyZiA9IHJlcXVpcmUoJy4vUmVhY3RQZXJmJyk7XG5cbnZhciBjYW1lbGl6ZVN0eWxlTmFtZSA9IHJlcXVpcmUoJ2ZianMvbGliL2NhbWVsaXplU3R5bGVOYW1lJyk7XG52YXIgZGFuZ2Vyb3VzU3R5bGVWYWx1ZSA9IHJlcXVpcmUoJy4vZGFuZ2Vyb3VzU3R5bGVWYWx1ZScpO1xudmFyIGh5cGhlbmF0ZVN0eWxlTmFtZSA9IHJlcXVpcmUoJ2ZianMvbGliL2h5cGhlbmF0ZVN0eWxlTmFtZScpO1xudmFyIG1lbW9pemVTdHJpbmdPbmx5ID0gcmVxdWlyZSgnZmJqcy9saWIvbWVtb2l6ZVN0cmluZ09ubHknKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG52YXIgcHJvY2Vzc1N0eWxlTmFtZSA9IG1lbW9pemVTdHJpbmdPbmx5KGZ1bmN0aW9uIChzdHlsZU5hbWUpIHtcbiAgcmV0dXJuIGh5cGhlbmF0ZVN0eWxlTmFtZShzdHlsZU5hbWUpO1xufSk7XG5cbnZhciBoYXNTaG9ydGhhbmRQcm9wZXJ0eUJ1ZyA9IGZhbHNlO1xudmFyIHN0eWxlRmxvYXRBY2Nlc3NvciA9ICdjc3NGbG9hdCc7XG5pZiAoRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gIHZhciB0ZW1wU3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKS5zdHlsZTtcbiAgdHJ5IHtcbiAgICAvLyBJRTggdGhyb3dzIFwiSW52YWxpZCBhcmd1bWVudC5cIiBpZiByZXNldHRpbmcgc2hvcnRoYW5kIHN0eWxlIHByb3BlcnRpZXMuXG4gICAgdGVtcFN0eWxlLmZvbnQgPSAnJztcbiAgfSBjYXRjaCAoZSkge1xuICAgIGhhc1Nob3J0aGFuZFByb3BlcnR5QnVnID0gdHJ1ZTtcbiAgfVxuICAvLyBJRTggb25seSBzdXBwb3J0cyBhY2Nlc3NpbmcgY3NzRmxvYXQgKHN0YW5kYXJkKSBhcyBzdHlsZUZsb2F0XG4gIGlmIChkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUuY3NzRmxvYXQgPT09IHVuZGVmaW5lZCkge1xuICAgIHN0eWxlRmxvYXRBY2Nlc3NvciA9ICdzdHlsZUZsb2F0JztcbiAgfVxufVxuXG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAvLyAnbXNUcmFuc2Zvcm0nIGlzIGNvcnJlY3QsIGJ1dCB0aGUgb3RoZXIgcHJlZml4ZXMgc2hvdWxkIGJlIGNhcGl0YWxpemVkXG4gIHZhciBiYWRWZW5kb3JlZFN0eWxlTmFtZVBhdHRlcm4gPSAvXig/OndlYmtpdHxtb3p8bylbQS1aXS87XG5cbiAgLy8gc3R5bGUgdmFsdWVzIHNob3VsZG4ndCBjb250YWluIGEgc2VtaWNvbG9uXG4gIHZhciBiYWRTdHlsZVZhbHVlV2l0aFNlbWljb2xvblBhdHRlcm4gPSAvO1xccyokLztcblxuICB2YXIgd2FybmVkU3R5bGVOYW1lcyA9IHt9O1xuICB2YXIgd2FybmVkU3R5bGVWYWx1ZXMgPSB7fTtcblxuICB2YXIgd2Fybkh5cGhlbmF0ZWRTdHlsZU5hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIGlmICh3YXJuZWRTdHlsZU5hbWVzLmhhc093blByb3BlcnR5KG5hbWUpICYmIHdhcm5lZFN0eWxlTmFtZXNbbmFtZV0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB3YXJuZWRTdHlsZU5hbWVzW25hbWVdID0gdHJ1ZTtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1Vuc3VwcG9ydGVkIHN0eWxlIHByb3BlcnR5ICVzLiBEaWQgeW91IG1lYW4gJXM/JywgbmFtZSwgY2FtZWxpemVTdHlsZU5hbWUobmFtZSkpIDogdW5kZWZpbmVkO1xuICB9O1xuXG4gIHZhciB3YXJuQmFkVmVuZG9yZWRTdHlsZU5hbWUgPSBmdW5jdGlvbiAobmFtZSkge1xuICAgIGlmICh3YXJuZWRTdHlsZU5hbWVzLmhhc093blByb3BlcnR5KG5hbWUpICYmIHdhcm5lZFN0eWxlTmFtZXNbbmFtZV0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB3YXJuZWRTdHlsZU5hbWVzW25hbWVdID0gdHJ1ZTtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1Vuc3VwcG9ydGVkIHZlbmRvci1wcmVmaXhlZCBzdHlsZSBwcm9wZXJ0eSAlcy4gRGlkIHlvdSBtZWFuICVzPycsIG5hbWUsIG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKDEpKSA6IHVuZGVmaW5lZDtcbiAgfTtcblxuICB2YXIgd2FyblN0eWxlVmFsdWVXaXRoU2VtaWNvbG9uID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKHdhcm5lZFN0eWxlVmFsdWVzLmhhc093blByb3BlcnR5KHZhbHVlKSAmJiB3YXJuZWRTdHlsZVZhbHVlc1t2YWx1ZV0pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB3YXJuZWRTdHlsZVZhbHVlc1t2YWx1ZV0gPSB0cnVlO1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnU3R5bGUgcHJvcGVydHkgdmFsdWVzIHNob3VsZG5cXCd0IGNvbnRhaW4gYSBzZW1pY29sb24uICcgKyAnVHJ5IFwiJXM6ICVzXCIgaW5zdGVhZC4nLCBuYW1lLCB2YWx1ZS5yZXBsYWNlKGJhZFN0eWxlVmFsdWVXaXRoU2VtaWNvbG9uUGF0dGVybiwgJycpKSA6IHVuZGVmaW5lZDtcbiAgfTtcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKi9cbiAgdmFyIHdhcm5WYWxpZFN0eWxlID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKG5hbWUuaW5kZXhPZignLScpID4gLTEpIHtcbiAgICAgIHdhcm5IeXBoZW5hdGVkU3R5bGVOYW1lKG5hbWUpO1xuICAgIH0gZWxzZSBpZiAoYmFkVmVuZG9yZWRTdHlsZU5hbWVQYXR0ZXJuLnRlc3QobmFtZSkpIHtcbiAgICAgIHdhcm5CYWRWZW5kb3JlZFN0eWxlTmFtZShuYW1lKTtcbiAgICB9IGVsc2UgaWYgKGJhZFN0eWxlVmFsdWVXaXRoU2VtaWNvbG9uUGF0dGVybi50ZXN0KHZhbHVlKSkge1xuICAgICAgd2FyblN0eWxlVmFsdWVXaXRoU2VtaWNvbG9uKG5hbWUsIHZhbHVlKTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogT3BlcmF0aW9ucyBmb3IgZGVhbGluZyB3aXRoIENTUyBwcm9wZXJ0aWVzLlxuICovXG52YXIgQ1NTUHJvcGVydHlPcGVyYXRpb25zID0ge1xuXG4gIC8qKlxuICAgKiBTZXJpYWxpemVzIGEgbWFwcGluZyBvZiBzdHlsZSBwcm9wZXJ0aWVzIGZvciB1c2UgYXMgaW5saW5lIHN0eWxlczpcbiAgICpcbiAgICogICA+IGNyZWF0ZU1hcmt1cEZvclN0eWxlcyh7d2lkdGg6ICcyMDBweCcsIGhlaWdodDogMH0pXG4gICAqICAgXCJ3aWR0aDoyMDBweDtoZWlnaHQ6MDtcIlxuICAgKlxuICAgKiBVbmRlZmluZWQgdmFsdWVzIGFyZSBpZ25vcmVkIHNvIHRoYXQgZGVjbGFyYXRpdmUgcHJvZ3JhbW1pbmcgaXMgZWFzaWVyLlxuICAgKiBUaGUgcmVzdWx0IHNob3VsZCBiZSBIVE1MLWVzY2FwZWQgYmVmb3JlIGluc2VydGlvbiBpbnRvIHRoZSBET00uXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBzdHlsZXNcbiAgICogQHJldHVybiB7P3N0cmluZ31cbiAgICovXG4gIGNyZWF0ZU1hcmt1cEZvclN0eWxlczogZnVuY3Rpb24gKHN0eWxlcykge1xuICAgIHZhciBzZXJpYWxpemVkID0gJyc7XG4gICAgZm9yICh2YXIgc3R5bGVOYW1lIGluIHN0eWxlcykge1xuICAgICAgaWYgKCFzdHlsZXMuaGFzT3duUHJvcGVydHkoc3R5bGVOYW1lKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhciBzdHlsZVZhbHVlID0gc3R5bGVzW3N0eWxlTmFtZV07XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuVmFsaWRTdHlsZShzdHlsZU5hbWUsIHN0eWxlVmFsdWUpO1xuICAgICAgfVxuICAgICAgaWYgKHN0eWxlVmFsdWUgIT0gbnVsbCkge1xuICAgICAgICBzZXJpYWxpemVkICs9IHByb2Nlc3NTdHlsZU5hbWUoc3R5bGVOYW1lKSArICc6JztcbiAgICAgICAgc2VyaWFsaXplZCArPSBkYW5nZXJvdXNTdHlsZVZhbHVlKHN0eWxlTmFtZSwgc3R5bGVWYWx1ZSkgKyAnOyc7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzZXJpYWxpemVkIHx8IG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhbHVlIGZvciBtdWx0aXBsZSBzdHlsZXMgb24gYSBub2RlLiAgSWYgYSB2YWx1ZSBpcyBzcGVjaWZpZWQgYXNcbiAgICogJycgKGVtcHR5IHN0cmluZyksIHRoZSBjb3JyZXNwb25kaW5nIHN0eWxlIHByb3BlcnR5IHdpbGwgYmUgdW5zZXQuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuICAgKiBAcGFyYW0ge29iamVjdH0gc3R5bGVzXG4gICAqL1xuICBzZXRWYWx1ZUZvclN0eWxlczogZnVuY3Rpb24gKG5vZGUsIHN0eWxlcykge1xuICAgIHZhciBzdHlsZSA9IG5vZGUuc3R5bGU7XG4gICAgZm9yICh2YXIgc3R5bGVOYW1lIGluIHN0eWxlcykge1xuICAgICAgaWYgKCFzdHlsZXMuaGFzT3duUHJvcGVydHkoc3R5bGVOYW1lKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHdhcm5WYWxpZFN0eWxlKHN0eWxlTmFtZSwgc3R5bGVzW3N0eWxlTmFtZV0pO1xuICAgICAgfVxuICAgICAgdmFyIHN0eWxlVmFsdWUgPSBkYW5nZXJvdXNTdHlsZVZhbHVlKHN0eWxlTmFtZSwgc3R5bGVzW3N0eWxlTmFtZV0pO1xuICAgICAgaWYgKHN0eWxlTmFtZSA9PT0gJ2Zsb2F0Jykge1xuICAgICAgICBzdHlsZU5hbWUgPSBzdHlsZUZsb2F0QWNjZXNzb3I7XG4gICAgICB9XG4gICAgICBpZiAoc3R5bGVWYWx1ZSkge1xuICAgICAgICBzdHlsZVtzdHlsZU5hbWVdID0gc3R5bGVWYWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBleHBhbnNpb24gPSBoYXNTaG9ydGhhbmRQcm9wZXJ0eUJ1ZyAmJiBDU1NQcm9wZXJ0eS5zaG9ydGhhbmRQcm9wZXJ0eUV4cGFuc2lvbnNbc3R5bGVOYW1lXTtcbiAgICAgICAgaWYgKGV4cGFuc2lvbikge1xuICAgICAgICAgIC8vIFNob3J0aGFuZCBwcm9wZXJ0eSB0aGF0IElFOCB3b24ndCBsaWtlIHVuc2V0dGluZywgc28gdW5zZXQgZWFjaFxuICAgICAgICAgIC8vIGNvbXBvbmVudCB0byBwbGFjYXRlIGl0XG4gICAgICAgICAgZm9yICh2YXIgaW5kaXZpZHVhbFN0eWxlTmFtZSBpbiBleHBhbnNpb24pIHtcbiAgICAgICAgICAgIHN0eWxlW2luZGl2aWR1YWxTdHlsZU5hbWVdID0gJyc7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0eWxlW3N0eWxlTmFtZV0gPSAnJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG59O1xuXG5SZWFjdFBlcmYubWVhc3VyZU1ldGhvZHMoQ1NTUHJvcGVydHlPcGVyYXRpb25zLCAnQ1NTUHJvcGVydHlPcGVyYXRpb25zJywge1xuICBzZXRWYWx1ZUZvclN0eWxlczogJ3NldFZhbHVlRm9yU3R5bGVzJ1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gQ1NTUHJvcGVydHlPcGVyYXRpb25zOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBDYWxsYmFja1F1ZXVlXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUG9vbGVkQ2xhc3MgPSByZXF1aXJlKCcuL1Bvb2xlZENsYXNzJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHBzZXVkby1ldmVudCBtb2R1bGUgdG8gaGVscCBrZWVwIHRyYWNrIG9mIGNvbXBvbmVudHMgd2FpdGluZyB0b1xuICogYmUgbm90aWZpZWQgd2hlbiB0aGVpciBET00gcmVwcmVzZW50YXRpb25zIGFyZSBhdmFpbGFibGUgZm9yIHVzZS5cbiAqXG4gKiBUaGlzIGltcGxlbWVudHMgYFBvb2xlZENsYXNzYCwgc28geW91IHNob3VsZCBuZXZlciBuZWVkIHRvIGluc3RhbnRpYXRlIHRoaXMuXG4gKiBJbnN0ZWFkLCB1c2UgYENhbGxiYWNrUXVldWUuZ2V0UG9vbGVkKClgLlxuICpcbiAqIEBjbGFzcyBSZWFjdE1vdW50UmVhZHlcbiAqIEBpbXBsZW1lbnRzIFBvb2xlZENsYXNzXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gQ2FsbGJhY2tRdWV1ZSgpIHtcbiAgdGhpcy5fY2FsbGJhY2tzID0gbnVsbDtcbiAgdGhpcy5fY29udGV4dHMgPSBudWxsO1xufVxuXG5hc3NpZ24oQ2FsbGJhY2tRdWV1ZS5wcm90b3R5cGUsIHtcblxuICAvKipcbiAgICogRW5xdWV1ZXMgYSBjYWxsYmFjayB0byBiZSBpbnZva2VkIHdoZW4gYG5vdGlmeUFsbGAgaXMgaW52b2tlZC5cbiAgICpcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgSW52b2tlZCB3aGVuIGBub3RpZnlBbGxgIGlzIGludm9rZWQuXG4gICAqIEBwYXJhbSB7P29iamVjdH0gY29udGV4dCBDb250ZXh0IHRvIGNhbGwgYGNhbGxiYWNrYCB3aXRoLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWU6IGZ1bmN0aW9uIChjYWxsYmFjaywgY29udGV4dCkge1xuICAgIHRoaXMuX2NhbGxiYWNrcyA9IHRoaXMuX2NhbGxiYWNrcyB8fCBbXTtcbiAgICB0aGlzLl9jb250ZXh0cyA9IHRoaXMuX2NvbnRleHRzIHx8IFtdO1xuICAgIHRoaXMuX2NhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICB0aGlzLl9jb250ZXh0cy5wdXNoKGNvbnRleHQpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJbnZva2VzIGFsbCBlbnF1ZXVlZCBjYWxsYmFja3MgYW5kIGNsZWFycyB0aGUgcXVldWUuIFRoaXMgaXMgaW52b2tlZCBhZnRlclxuICAgKiB0aGUgRE9NIHJlcHJlc2VudGF0aW9uIG9mIGEgY29tcG9uZW50IGhhcyBiZWVuIGNyZWF0ZWQgb3IgdXBkYXRlZC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICBub3RpZnlBbGw6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2FsbGJhY2tzID0gdGhpcy5fY2FsbGJhY2tzO1xuICAgIHZhciBjb250ZXh0cyA9IHRoaXMuX2NvbnRleHRzO1xuICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgICEoY2FsbGJhY2tzLmxlbmd0aCA9PT0gY29udGV4dHMubGVuZ3RoKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdNaXNtYXRjaGVkIGxpc3Qgb2YgY29udGV4dHMgaW4gY2FsbGJhY2sgcXVldWUnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICB0aGlzLl9jYWxsYmFja3MgPSBudWxsO1xuICAgICAgdGhpcy5fY29udGV4dHMgPSBudWxsO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjYWxsYmFja3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY2FsbGJhY2tzW2ldLmNhbGwoY29udGV4dHNbaV0pO1xuICAgICAgfVxuICAgICAgY2FsbGJhY2tzLmxlbmd0aCA9IDA7XG4gICAgICBjb250ZXh0cy5sZW5ndGggPSAwO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVzZXRzIHRoZSBpbnRlcm5hbCBxdWV1ZS5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICByZXNldDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuX2NhbGxiYWNrcyA9IG51bGw7XG4gICAgdGhpcy5fY29udGV4dHMgPSBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBgUG9vbGVkQ2xhc3NgIGxvb2tzIGZvciB0aGlzLlxuICAgKi9cbiAgZGVzdHJ1Y3RvcjogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucmVzZXQoKTtcbiAgfVxuXG59KTtcblxuUG9vbGVkQ2xhc3MuYWRkUG9vbGluZ1RvKENhbGxiYWNrUXVldWUpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENhbGxiYWNrUXVldWU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIENoYW5nZUV2ZW50UGx1Z2luXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSByZXF1aXJlKCcuL0V2ZW50Q29uc3RhbnRzJyk7XG52YXIgRXZlbnRQbHVnaW5IdWIgPSByZXF1aXJlKCcuL0V2ZW50UGx1Z2luSHViJyk7XG52YXIgRXZlbnRQcm9wYWdhdG9ycyA9IHJlcXVpcmUoJy4vRXZlbnRQcm9wYWdhdG9ycycpO1xudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xudmFyIFN5bnRoZXRpY0V2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNFdmVudCcpO1xuXG52YXIgZ2V0RXZlbnRUYXJnZXQgPSByZXF1aXJlKCcuL2dldEV2ZW50VGFyZ2V0Jyk7XG52YXIgaXNFdmVudFN1cHBvcnRlZCA9IHJlcXVpcmUoJy4vaXNFdmVudFN1cHBvcnRlZCcpO1xudmFyIGlzVGV4dElucHV0RWxlbWVudCA9IHJlcXVpcmUoJy4vaXNUZXh0SW5wdXRFbGVtZW50Jyk7XG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xuXG52YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG5cbnZhciBldmVudFR5cGVzID0ge1xuICBjaGFuZ2U6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNoYW5nZTogbnVsbCB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ2hhbmdlQ2FwdHVyZTogbnVsbCB9KVxuICAgIH0sXG4gICAgZGVwZW5kZW5jaWVzOiBbdG9wTGV2ZWxUeXBlcy50b3BCbHVyLCB0b3BMZXZlbFR5cGVzLnRvcENoYW5nZSwgdG9wTGV2ZWxUeXBlcy50b3BDbGljaywgdG9wTGV2ZWxUeXBlcy50b3BGb2N1cywgdG9wTGV2ZWxUeXBlcy50b3BJbnB1dCwgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duLCB0b3BMZXZlbFR5cGVzLnRvcEtleVVwLCB0b3BMZXZlbFR5cGVzLnRvcFNlbGVjdGlvbkNoYW5nZV1cbiAgfVxufTtcblxuLyoqXG4gKiBGb3IgSUUgc2hpbXNcbiAqL1xudmFyIGFjdGl2ZUVsZW1lbnQgPSBudWxsO1xudmFyIGFjdGl2ZUVsZW1lbnRJRCA9IG51bGw7XG52YXIgYWN0aXZlRWxlbWVudFZhbHVlID0gbnVsbDtcbnZhciBhY3RpdmVFbGVtZW50VmFsdWVQcm9wID0gbnVsbDtcblxuLyoqXG4gKiBTRUNUSU9OOiBoYW5kbGUgYGNoYW5nZWAgZXZlbnRcbiAqL1xuZnVuY3Rpb24gc2hvdWxkVXNlQ2hhbmdlRXZlbnQoZWxlbSkge1xuICB2YXIgbm9kZU5hbWUgPSBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgcmV0dXJuIG5vZGVOYW1lID09PSAnc2VsZWN0JyB8fCBub2RlTmFtZSA9PT0gJ2lucHV0JyAmJiBlbGVtLnR5cGUgPT09ICdmaWxlJztcbn1cblxudmFyIGRvZXNDaGFuZ2VFdmVudEJ1YmJsZSA9IGZhbHNlO1xuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICAvLyBTZWUgYGhhbmRsZUNoYW5nZWAgY29tbWVudCBiZWxvd1xuICBkb2VzQ2hhbmdlRXZlbnRCdWJibGUgPSBpc0V2ZW50U3VwcG9ydGVkKCdjaGFuZ2UnKSAmJiAoISgnZG9jdW1lbnRNb2RlJyBpbiBkb2N1bWVudCkgfHwgZG9jdW1lbnQuZG9jdW1lbnRNb2RlID4gOCk7XG59XG5cbmZ1bmN0aW9uIG1hbnVhbERpc3BhdGNoQ2hhbmdlRXZlbnQobmF0aXZlRXZlbnQpIHtcbiAgdmFyIGV2ZW50ID0gU3ludGhldGljRXZlbnQuZ2V0UG9vbGVkKGV2ZW50VHlwZXMuY2hhbmdlLCBhY3RpdmVFbGVtZW50SUQsIG5hdGl2ZUV2ZW50LCBnZXRFdmVudFRhcmdldChuYXRpdmVFdmVudCkpO1xuICBFdmVudFByb3BhZ2F0b3JzLmFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXMoZXZlbnQpO1xuXG4gIC8vIElmIGNoYW5nZSBhbmQgcHJvcGVydHljaGFuZ2UgYnViYmxlZCwgd2UnZCBqdXN0IGJpbmQgdG8gaXQgbGlrZSBhbGwgdGhlXG4gIC8vIG90aGVyIGV2ZW50cyBhbmQgaGF2ZSBpdCBnbyB0aHJvdWdoIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci4gU2luY2UgaXRcbiAgLy8gZG9lc24ndCwgd2UgbWFudWFsbHkgbGlzdGVuIGZvciB0aGUgZXZlbnRzIGFuZCBzbyB3ZSBoYXZlIHRvIGVucXVldWUgYW5kXG4gIC8vIHByb2Nlc3MgdGhlIGFic3RyYWN0IGV2ZW50IG1hbnVhbGx5LlxuICAvL1xuICAvLyBCYXRjaGluZyBpcyBuZWNlc3NhcnkgaGVyZSBpbiBvcmRlciB0byBlbnN1cmUgdGhhdCBhbGwgZXZlbnQgaGFuZGxlcnMgcnVuXG4gIC8vIGJlZm9yZSB0aGUgbmV4dCByZXJlbmRlciAoaW5jbHVkaW5nIGV2ZW50IGhhbmRsZXJzIGF0dGFjaGVkIHRvIGFuY2VzdG9yXG4gIC8vIGVsZW1lbnRzIGluc3RlYWQgb2YgZGlyZWN0bHkgb24gdGhlIGlucHV0KS4gV2l0aG91dCB0aGlzLCBjb250cm9sbGVkXG4gIC8vIGNvbXBvbmVudHMgZG9uJ3Qgd29yayBwcm9wZXJseSBpbiBjb25qdW5jdGlvbiB3aXRoIGV2ZW50IGJ1YmJsaW5nIGJlY2F1c2VcbiAgLy8gdGhlIGNvbXBvbmVudCBpcyByZXJlbmRlcmVkIGFuZCB0aGUgdmFsdWUgcmV2ZXJ0ZWQgYmVmb3JlIGFsbCB0aGUgZXZlbnRcbiAgLy8gaGFuZGxlcnMgY2FuIHJ1bi4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9yZWFjdC9pc3N1ZXMvNzA4LlxuICBSZWFjdFVwZGF0ZXMuYmF0Y2hlZFVwZGF0ZXMocnVuRXZlbnRJbkJhdGNoLCBldmVudCk7XG59XG5cbmZ1bmN0aW9uIHJ1bkV2ZW50SW5CYXRjaChldmVudCkge1xuICBFdmVudFBsdWdpbkh1Yi5lbnF1ZXVlRXZlbnRzKGV2ZW50KTtcbiAgRXZlbnRQbHVnaW5IdWIucHJvY2Vzc0V2ZW50UXVldWUoZmFsc2UpO1xufVxuXG5mdW5jdGlvbiBzdGFydFdhdGNoaW5nRm9yQ2hhbmdlRXZlbnRJRTgodGFyZ2V0LCB0YXJnZXRJRCkge1xuICBhY3RpdmVFbGVtZW50ID0gdGFyZ2V0O1xuICBhY3RpdmVFbGVtZW50SUQgPSB0YXJnZXRJRDtcbiAgYWN0aXZlRWxlbWVudC5hdHRhY2hFdmVudCgnb25jaGFuZ2UnLCBtYW51YWxEaXNwYXRjaENoYW5nZUV2ZW50KTtcbn1cblxuZnVuY3Rpb24gc3RvcFdhdGNoaW5nRm9yQ2hhbmdlRXZlbnRJRTgoKSB7XG4gIGlmICghYWN0aXZlRWxlbWVudCkge1xuICAgIHJldHVybjtcbiAgfVxuICBhY3RpdmVFbGVtZW50LmRldGFjaEV2ZW50KCdvbmNoYW5nZScsIG1hbnVhbERpc3BhdGNoQ2hhbmdlRXZlbnQpO1xuICBhY3RpdmVFbGVtZW50ID0gbnVsbDtcbiAgYWN0aXZlRWxlbWVudElEID0gbnVsbDtcbn1cblxuZnVuY3Rpb24gZ2V0VGFyZ2V0SURGb3JDaGFuZ2VFdmVudCh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKSB7XG4gIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wQ2hhbmdlKSB7XG4gICAgcmV0dXJuIHRvcExldmVsVGFyZ2V0SUQ7XG4gIH1cbn1cbmZ1bmN0aW9uIGhhbmRsZUV2ZW50c0ZvckNoYW5nZUV2ZW50SUU4KHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpIHtcbiAgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BGb2N1cykge1xuICAgIC8vIHN0b3BXYXRjaGluZygpIHNob3VsZCBiZSBhIG5vb3AgaGVyZSBidXQgd2UgY2FsbCBpdCBqdXN0IGluIGNhc2Ugd2VcbiAgICAvLyBtaXNzZWQgYSBibHVyIGV2ZW50IHNvbWVob3cuXG4gICAgc3RvcFdhdGNoaW5nRm9yQ2hhbmdlRXZlbnRJRTgoKTtcbiAgICBzdGFydFdhdGNoaW5nRm9yQ2hhbmdlRXZlbnRJRTgodG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpO1xuICB9IGVsc2UgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BCbHVyKSB7XG4gICAgc3RvcFdhdGNoaW5nRm9yQ2hhbmdlRXZlbnRJRTgoKTtcbiAgfVxufVxuXG4vKipcbiAqIFNFQ1RJT046IGhhbmRsZSBgaW5wdXRgIGV2ZW50XG4gKi9cbnZhciBpc0lucHV0RXZlbnRTdXBwb3J0ZWQgPSBmYWxzZTtcbmlmIChFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00pIHtcbiAgLy8gSUU5IGNsYWltcyB0byBzdXBwb3J0IHRoZSBpbnB1dCBldmVudCBidXQgZmFpbHMgdG8gdHJpZ2dlciBpdCB3aGVuXG4gIC8vIGRlbGV0aW5nIHRleHQsIHNvIHdlIGlnbm9yZSBpdHMgaW5wdXQgZXZlbnRzXG4gIGlzSW5wdXRFdmVudFN1cHBvcnRlZCA9IGlzRXZlbnRTdXBwb3J0ZWQoJ2lucHV0JykgJiYgKCEoJ2RvY3VtZW50TW9kZScgaW4gZG9jdW1lbnQpIHx8IGRvY3VtZW50LmRvY3VtZW50TW9kZSA+IDkpO1xufVxuXG4vKipcbiAqIChGb3Igb2xkIElFLikgUmVwbGFjZW1lbnQgZ2V0dGVyL3NldHRlciBmb3IgdGhlIGB2YWx1ZWAgcHJvcGVydHkgdGhhdCBnZXRzXG4gKiBzZXQgb24gdGhlIGFjdGl2ZSBlbGVtZW50LlxuICovXG52YXIgbmV3VmFsdWVQcm9wID0ge1xuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYWN0aXZlRWxlbWVudFZhbHVlUHJvcC5nZXQuY2FsbCh0aGlzKTtcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbiAodmFsKSB7XG4gICAgLy8gQ2FzdCB0byBhIHN0cmluZyBzbyB3ZSBjYW4gZG8gZXF1YWxpdHkgY2hlY2tzLlxuICAgIGFjdGl2ZUVsZW1lbnRWYWx1ZSA9ICcnICsgdmFsO1xuICAgIGFjdGl2ZUVsZW1lbnRWYWx1ZVByb3Auc2V0LmNhbGwodGhpcywgdmFsKTtcbiAgfVxufTtcblxuLyoqXG4gKiAoRm9yIG9sZCBJRS4pIFN0YXJ0cyB0cmFja2luZyBwcm9wZXJ0eWNoYW5nZSBldmVudHMgb24gdGhlIHBhc3NlZC1pbiBlbGVtZW50XG4gKiBhbmQgb3ZlcnJpZGUgdGhlIHZhbHVlIHByb3BlcnR5IHNvIHRoYXQgd2UgY2FuIGRpc3Rpbmd1aXNoIHVzZXIgZXZlbnRzIGZyb21cbiAqIHZhbHVlIGNoYW5nZXMgaW4gSlMuXG4gKi9cbmZ1bmN0aW9uIHN0YXJ0V2F0Y2hpbmdGb3JWYWx1ZUNoYW5nZSh0YXJnZXQsIHRhcmdldElEKSB7XG4gIGFjdGl2ZUVsZW1lbnQgPSB0YXJnZXQ7XG4gIGFjdGl2ZUVsZW1lbnRJRCA9IHRhcmdldElEO1xuICBhY3RpdmVFbGVtZW50VmFsdWUgPSB0YXJnZXQudmFsdWU7XG4gIGFjdGl2ZUVsZW1lbnRWYWx1ZVByb3AgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldC5jb25zdHJ1Y3Rvci5wcm90b3R5cGUsICd2YWx1ZScpO1xuXG4gIC8vIE5vdCBndWFyZGVkIGluIGEgY2FuRGVmaW5lUHJvcGVydHkgY2hlY2s6IElFOCBzdXBwb3J0cyBkZWZpbmVQcm9wZXJ0eSBvbmx5XG4gIC8vIG9uIERPTSBlbGVtZW50c1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoYWN0aXZlRWxlbWVudCwgJ3ZhbHVlJywgbmV3VmFsdWVQcm9wKTtcbiAgYWN0aXZlRWxlbWVudC5hdHRhY2hFdmVudCgnb25wcm9wZXJ0eWNoYW5nZScsIGhhbmRsZVByb3BlcnR5Q2hhbmdlKTtcbn1cblxuLyoqXG4gKiAoRm9yIG9sZCBJRS4pIFJlbW92ZXMgdGhlIGV2ZW50IGxpc3RlbmVycyBmcm9tIHRoZSBjdXJyZW50bHktdHJhY2tlZCBlbGVtZW50LFxuICogaWYgYW55IGV4aXN0cy5cbiAqL1xuZnVuY3Rpb24gc3RvcFdhdGNoaW5nRm9yVmFsdWVDaGFuZ2UoKSB7XG4gIGlmICghYWN0aXZlRWxlbWVudCkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIGRlbGV0ZSByZXN0b3JlcyB0aGUgb3JpZ2luYWwgcHJvcGVydHkgZGVmaW5pdGlvblxuICBkZWxldGUgYWN0aXZlRWxlbWVudC52YWx1ZTtcbiAgYWN0aXZlRWxlbWVudC5kZXRhY2hFdmVudCgnb25wcm9wZXJ0eWNoYW5nZScsIGhhbmRsZVByb3BlcnR5Q2hhbmdlKTtcblxuICBhY3RpdmVFbGVtZW50ID0gbnVsbDtcbiAgYWN0aXZlRWxlbWVudElEID0gbnVsbDtcbiAgYWN0aXZlRWxlbWVudFZhbHVlID0gbnVsbDtcbiAgYWN0aXZlRWxlbWVudFZhbHVlUHJvcCA9IG51bGw7XG59XG5cbi8qKlxuICogKEZvciBvbGQgSUUuKSBIYW5kbGVzIGEgcHJvcGVydHljaGFuZ2UgZXZlbnQsIHNlbmRpbmcgYSBgY2hhbmdlYCBldmVudCBpZlxuICogdGhlIHZhbHVlIG9mIHRoZSBhY3RpdmUgZWxlbWVudCBoYXMgY2hhbmdlZC5cbiAqL1xuZnVuY3Rpb24gaGFuZGxlUHJvcGVydHlDaGFuZ2UobmF0aXZlRXZlbnQpIHtcbiAgaWYgKG5hdGl2ZUV2ZW50LnByb3BlcnR5TmFtZSAhPT0gJ3ZhbHVlJykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgdmFsdWUgPSBuYXRpdmVFdmVudC5zcmNFbGVtZW50LnZhbHVlO1xuICBpZiAodmFsdWUgPT09IGFjdGl2ZUVsZW1lbnRWYWx1ZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBhY3RpdmVFbGVtZW50VmFsdWUgPSB2YWx1ZTtcblxuICBtYW51YWxEaXNwYXRjaENoYW5nZUV2ZW50KG5hdGl2ZUV2ZW50KTtcbn1cblxuLyoqXG4gKiBJZiBhIGBjaGFuZ2VgIGV2ZW50IHNob3VsZCBiZSBmaXJlZCwgcmV0dXJucyB0aGUgdGFyZ2V0J3MgSUQuXG4gKi9cbmZ1bmN0aW9uIGdldFRhcmdldElERm9ySW5wdXRFdmVudCh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKSB7XG4gIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wSW5wdXQpIHtcbiAgICAvLyBJbiBtb2Rlcm4gYnJvd3NlcnMgKGkuZS4sIG5vdCBJRTggb3IgSUU5KSwgdGhlIGlucHV0IGV2ZW50IGlzIGV4YWN0bHlcbiAgICAvLyB3aGF0IHdlIHdhbnQgc28gZmFsbCB0aHJvdWdoIGhlcmUgYW5kIHRyaWdnZXIgYW4gYWJzdHJhY3QgZXZlbnRcbiAgICByZXR1cm4gdG9wTGV2ZWxUYXJnZXRJRDtcbiAgfVxufVxuXG4vLyBGb3IgSUU4IGFuZCBJRTkuXG5mdW5jdGlvbiBoYW5kbGVFdmVudHNGb3JJbnB1dEV2ZW50SUUodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCkge1xuICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcEZvY3VzKSB7XG4gICAgLy8gSW4gSUU4LCB3ZSBjYW4gY2FwdHVyZSBhbG1vc3QgYWxsIC52YWx1ZSBjaGFuZ2VzIGJ5IGFkZGluZyBhXG4gICAgLy8gcHJvcGVydHljaGFuZ2UgaGFuZGxlciBhbmQgbG9va2luZyBmb3IgZXZlbnRzIHdpdGggcHJvcGVydHlOYW1lXG4gICAgLy8gZXF1YWwgdG8gJ3ZhbHVlJ1xuICAgIC8vIEluIElFOSwgcHJvcGVydHljaGFuZ2UgZmlyZXMgZm9yIG1vc3QgaW5wdXQgZXZlbnRzIGJ1dCBpcyBidWdneSBhbmRcbiAgICAvLyBkb2Vzbid0IGZpcmUgd2hlbiB0ZXh0IGlzIGRlbGV0ZWQsIGJ1dCBjb252ZW5pZW50bHksIHNlbGVjdGlvbmNoYW5nZVxuICAgIC8vIGFwcGVhcnMgdG8gZmlyZSBpbiBhbGwgb2YgdGhlIHJlbWFpbmluZyBjYXNlcyBzbyB3ZSBjYXRjaCB0aG9zZSBhbmRcbiAgICAvLyBmb3J3YXJkIHRoZSBldmVudCBpZiB0aGUgdmFsdWUgaGFzIGNoYW5nZWRcbiAgICAvLyBJbiBlaXRoZXIgY2FzZSwgd2UgZG9uJ3Qgd2FudCB0byBjYWxsIHRoZSBldmVudCBoYW5kbGVyIGlmIHRoZSB2YWx1ZVxuICAgIC8vIGlzIGNoYW5nZWQgZnJvbSBKUyBzbyB3ZSByZWRlZmluZSBhIHNldHRlciBmb3IgYC52YWx1ZWAgdGhhdCB1cGRhdGVzXG4gICAgLy8gb3VyIGFjdGl2ZUVsZW1lbnRWYWx1ZSB2YXJpYWJsZSwgYWxsb3dpbmcgdXMgdG8gaWdub3JlIHRob3NlIGNoYW5nZXNcbiAgICAvL1xuICAgIC8vIHN0b3BXYXRjaGluZygpIHNob3VsZCBiZSBhIG5vb3AgaGVyZSBidXQgd2UgY2FsbCBpdCBqdXN0IGluIGNhc2Ugd2VcbiAgICAvLyBtaXNzZWQgYSBibHVyIGV2ZW50IHNvbWVob3cuXG4gICAgc3RvcFdhdGNoaW5nRm9yVmFsdWVDaGFuZ2UoKTtcbiAgICBzdGFydFdhdGNoaW5nRm9yVmFsdWVDaGFuZ2UodG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpO1xuICB9IGVsc2UgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BCbHVyKSB7XG4gICAgc3RvcFdhdGNoaW5nRm9yVmFsdWVDaGFuZ2UoKTtcbiAgfVxufVxuXG4vLyBGb3IgSUU4IGFuZCBJRTkuXG5mdW5jdGlvbiBnZXRUYXJnZXRJREZvcklucHV0RXZlbnRJRSh0b3BMZXZlbFR5cGUsIHRvcExldmVsVGFyZ2V0LCB0b3BMZXZlbFRhcmdldElEKSB7XG4gIGlmICh0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wU2VsZWN0aW9uQ2hhbmdlIHx8IHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BLZXlVcCB8fCB0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wS2V5RG93bikge1xuICAgIC8vIE9uIHRoZSBzZWxlY3Rpb25jaGFuZ2UgZXZlbnQsIHRoZSB0YXJnZXQgaXMganVzdCBkb2N1bWVudCB3aGljaCBpc24ndFxuICAgIC8vIGhlbHBmdWwgZm9yIHVzIHNvIGp1c3QgY2hlY2sgYWN0aXZlRWxlbWVudCBpbnN0ZWFkLlxuICAgIC8vXG4gICAgLy8gOTklIG9mIHRoZSB0aW1lLCBrZXlkb3duIGFuZCBrZXl1cCBhcmVuJ3QgbmVjZXNzYXJ5LiBJRTggZmFpbHMgdG8gZmlyZVxuICAgIC8vIHByb3BlcnR5Y2hhbmdlIG9uIHRoZSBmaXJzdCBpbnB1dCBldmVudCBhZnRlciBzZXR0aW5nIGB2YWx1ZWAgZnJvbSBhXG4gICAgLy8gc2NyaXB0IGFuZCBmaXJlcyBvbmx5IGtleWRvd24sIGtleXByZXNzLCBrZXl1cC4gQ2F0Y2hpbmcga2V5dXAgdXN1YWxseVxuICAgIC8vIGdldHMgaXQgYW5kIGNhdGNoaW5nIGtleWRvd24gbGV0cyB1cyBmaXJlIGFuIGV2ZW50IGZvciB0aGUgZmlyc3RcbiAgICAvLyBrZXlzdHJva2UgaWYgdXNlciBkb2VzIGEga2V5IHJlcGVhdCAoaXQnbGwgYmUgYSBsaXR0bGUgZGVsYXllZDogcmlnaHRcbiAgICAvLyBiZWZvcmUgdGhlIHNlY29uZCBrZXlzdHJva2UpLiBPdGhlciBpbnB1dCBtZXRob2RzIChlLmcuLCBwYXN0ZSkgc2VlbSB0b1xuICAgIC8vIGZpcmUgc2VsZWN0aW9uY2hhbmdlIG5vcm1hbGx5LlxuICAgIGlmIChhY3RpdmVFbGVtZW50ICYmIGFjdGl2ZUVsZW1lbnQudmFsdWUgIT09IGFjdGl2ZUVsZW1lbnRWYWx1ZSkge1xuICAgICAgYWN0aXZlRWxlbWVudFZhbHVlID0gYWN0aXZlRWxlbWVudC52YWx1ZTtcbiAgICAgIHJldHVybiBhY3RpdmVFbGVtZW50SUQ7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogU0VDVElPTjogaGFuZGxlIGBjbGlja2AgZXZlbnRcbiAqL1xuZnVuY3Rpb24gc2hvdWxkVXNlQ2xpY2tFdmVudChlbGVtKSB7XG4gIC8vIFVzZSB0aGUgYGNsaWNrYCBldmVudCB0byBkZXRlY3QgY2hhbmdlcyB0byBjaGVja2JveCBhbmQgcmFkaW8gaW5wdXRzLlxuICAvLyBUaGlzIGFwcHJvYWNoIHdvcmtzIGFjcm9zcyBhbGwgYnJvd3NlcnMsIHdoZXJlYXMgYGNoYW5nZWAgZG9lcyBub3QgZmlyZVxuICAvLyB1bnRpbCBgYmx1cmAgaW4gSUU4LlxuICByZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcgJiYgKGVsZW0udHlwZSA9PT0gJ2NoZWNrYm94JyB8fCBlbGVtLnR5cGUgPT09ICdyYWRpbycpO1xufVxuXG5mdW5jdGlvbiBnZXRUYXJnZXRJREZvckNsaWNrRXZlbnQodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCkge1xuICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcENsaWNrKSB7XG4gICAgcmV0dXJuIHRvcExldmVsVGFyZ2V0SUQ7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIHBsdWdpbiBjcmVhdGVzIGFuIGBvbkNoYW5nZWAgZXZlbnQgdGhhdCBub3JtYWxpemVzIGNoYW5nZSBldmVudHNcbiAqIGFjcm9zcyBmb3JtIGVsZW1lbnRzLiBUaGlzIGV2ZW50IGZpcmVzIGF0IGEgdGltZSB3aGVuIGl0J3MgcG9zc2libGUgdG9cbiAqIGNoYW5nZSB0aGUgZWxlbWVudCdzIHZhbHVlIHdpdGhvdXQgc2VlaW5nIGEgZmxpY2tlci5cbiAqXG4gKiBTdXBwb3J0ZWQgZWxlbWVudHMgYXJlOlxuICogLSBpbnB1dCAoc2VlIGBpc1RleHRJbnB1dEVsZW1lbnRgKVxuICogLSB0ZXh0YXJlYVxuICogLSBzZWxlY3RcbiAqL1xudmFyIENoYW5nZUV2ZW50UGx1Z2luID0ge1xuXG4gIGV2ZW50VHlwZXM6IGV2ZW50VHlwZXMsXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4geyp9IEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAc2VlIHtFdmVudFBsdWdpbkh1Yi5leHRyYWN0RXZlbnRzfVxuICAgKi9cbiAgZXh0cmFjdEV2ZW50czogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuXG4gICAgdmFyIGdldFRhcmdldElERnVuYywgaGFuZGxlRXZlbnRGdW5jO1xuICAgIGlmIChzaG91bGRVc2VDaGFuZ2VFdmVudCh0b3BMZXZlbFRhcmdldCkpIHtcbiAgICAgIGlmIChkb2VzQ2hhbmdlRXZlbnRCdWJibGUpIHtcbiAgICAgICAgZ2V0VGFyZ2V0SURGdW5jID0gZ2V0VGFyZ2V0SURGb3JDaGFuZ2VFdmVudDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGhhbmRsZUV2ZW50RnVuYyA9IGhhbmRsZUV2ZW50c0ZvckNoYW5nZUV2ZW50SUU4O1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaXNUZXh0SW5wdXRFbGVtZW50KHRvcExldmVsVGFyZ2V0KSkge1xuICAgICAgaWYgKGlzSW5wdXRFdmVudFN1cHBvcnRlZCkge1xuICAgICAgICBnZXRUYXJnZXRJREZ1bmMgPSBnZXRUYXJnZXRJREZvcklucHV0RXZlbnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBnZXRUYXJnZXRJREZ1bmMgPSBnZXRUYXJnZXRJREZvcklucHV0RXZlbnRJRTtcbiAgICAgICAgaGFuZGxlRXZlbnRGdW5jID0gaGFuZGxlRXZlbnRzRm9ySW5wdXRFdmVudElFO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc2hvdWxkVXNlQ2xpY2tFdmVudCh0b3BMZXZlbFRhcmdldCkpIHtcbiAgICAgIGdldFRhcmdldElERnVuYyA9IGdldFRhcmdldElERm9yQ2xpY2tFdmVudDtcbiAgICB9XG5cbiAgICBpZiAoZ2V0VGFyZ2V0SURGdW5jKSB7XG4gICAgICB2YXIgdGFyZ2V0SUQgPSBnZXRUYXJnZXRJREZ1bmModG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCk7XG4gICAgICBpZiAodGFyZ2V0SUQpIHtcbiAgICAgICAgdmFyIGV2ZW50ID0gU3ludGhldGljRXZlbnQuZ2V0UG9vbGVkKGV2ZW50VHlwZXMuY2hhbmdlLCB0YXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbiAgICAgICAgZXZlbnQudHlwZSA9ICdjaGFuZ2UnO1xuICAgICAgICBFdmVudFByb3BhZ2F0b3JzLmFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXMoZXZlbnQpO1xuICAgICAgICByZXR1cm4gZXZlbnQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGhhbmRsZUV2ZW50RnVuYykge1xuICAgICAgaGFuZGxlRXZlbnRGdW5jKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQpO1xuICAgIH1cbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENoYW5nZUV2ZW50UGx1Z2luOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBDbGllbnRSZWFjdFJvb3RJbmRleFxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBuZXh0UmVhY3RSb290SW5kZXggPSAwO1xuXG52YXIgQ2xpZW50UmVhY3RSb290SW5kZXggPSB7XG4gIGNyZWF0ZVJlYWN0Um9vdEluZGV4OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG5leHRSZWFjdFJvb3RJbmRleCsrO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IENsaWVudFJlYWN0Um9vdEluZGV4OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBET01DaGlsZHJlbk9wZXJhdGlvbnNcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRGFuZ2VyID0gcmVxdWlyZSgnLi9EYW5nZXInKTtcbnZhciBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcyA9IHJlcXVpcmUoJy4vUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xuXG52YXIgc2V0SW5uZXJIVE1MID0gcmVxdWlyZSgnLi9zZXRJbm5lckhUTUwnKTtcbnZhciBzZXRUZXh0Q29udGVudCA9IHJlcXVpcmUoJy4vc2V0VGV4dENvbnRlbnQnKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBJbnNlcnRzIGBjaGlsZE5vZGVgIGFzIGEgY2hpbGQgb2YgYHBhcmVudE5vZGVgIGF0IHRoZSBgaW5kZXhgLlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcGFyZW50Tm9kZSBQYXJlbnQgbm9kZSBpbiB3aGljaCB0byBpbnNlcnQuXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNoaWxkTm9kZSBDaGlsZCBub2RlIHRvIGluc2VydC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleCBhdCB3aGljaCB0byBpbnNlcnQgdGhlIGNoaWxkLlxuICogQGludGVybmFsXG4gKi9cbmZ1bmN0aW9uIGluc2VydENoaWxkQXQocGFyZW50Tm9kZSwgY2hpbGROb2RlLCBpbmRleCkge1xuICAvLyBCeSBleHBsb2l0aW5nIGFycmF5cyByZXR1cm5pbmcgYHVuZGVmaW5lZGAgZm9yIGFuIHVuZGVmaW5lZCBpbmRleCwgd2UgY2FuXG4gIC8vIHJlbHkgZXhjbHVzaXZlbHkgb24gYGluc2VydEJlZm9yZShub2RlLCBudWxsKWAgaW5zdGVhZCBvZiBhbHNvIHVzaW5nXG4gIC8vIGBhcHBlbmRDaGlsZChub2RlKWAuIEhvd2V2ZXIsIHVzaW5nIGB1bmRlZmluZWRgIGlzIG5vdCBhbGxvd2VkIGJ5IGFsbFxuICAvLyBicm93c2VycyBzbyB3ZSBtdXN0IHJlcGxhY2UgaXQgd2l0aCBgbnVsbGAuXG5cbiAgLy8gZml4IHJlbmRlciBvcmRlciBlcnJvciBpbiBzYWZhcmlcbiAgLy8gSUU4IHdpbGwgdGhyb3cgZXJyb3Igd2hlbiBpbmRleCBvdXQgb2YgbGlzdCBzaXplLlxuICB2YXIgYmVmb3JlQ2hpbGQgPSBpbmRleCA+PSBwYXJlbnROb2RlLmNoaWxkTm9kZXMubGVuZ3RoID8gbnVsbCA6IHBhcmVudE5vZGUuY2hpbGROb2Rlcy5pdGVtKGluZGV4KTtcblxuICBwYXJlbnROb2RlLmluc2VydEJlZm9yZShjaGlsZE5vZGUsIGJlZm9yZUNoaWxkKTtcbn1cblxuLyoqXG4gKiBPcGVyYXRpb25zIGZvciB1cGRhdGluZyB3aXRoIERPTSBjaGlsZHJlbi5cbiAqL1xudmFyIERPTUNoaWxkcmVuT3BlcmF0aW9ucyA9IHtcblxuICBkYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cDogRGFuZ2VyLmRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwLFxuXG4gIHVwZGF0ZVRleHRDb250ZW50OiBzZXRUZXh0Q29udGVudCxcblxuICAvKipcbiAgICogVXBkYXRlcyBhIGNvbXBvbmVudCdzIGNoaWxkcmVuIGJ5IHByb2Nlc3NpbmcgYSBzZXJpZXMgb2YgdXBkYXRlcy4gVGhlXG4gICAqIHVwZGF0ZSBjb25maWd1cmF0aW9ucyBhcmUgZWFjaCBleHBlY3RlZCB0byBoYXZlIGEgYHBhcmVudE5vZGVgIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge2FycmF5PG9iamVjdD59IHVwZGF0ZXMgTGlzdCBvZiB1cGRhdGUgY29uZmlndXJhdGlvbnMuXG4gICAqIEBwYXJhbSB7YXJyYXk8c3RyaW5nPn0gbWFya3VwTGlzdCBMaXN0IG9mIG1hcmt1cCBzdHJpbmdzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHByb2Nlc3NVcGRhdGVzOiBmdW5jdGlvbiAodXBkYXRlcywgbWFya3VwTGlzdCkge1xuICAgIHZhciB1cGRhdGU7XG4gICAgLy8gTWFwcGluZyBmcm9tIHBhcmVudCBJRHMgdG8gaW5pdGlhbCBjaGlsZCBvcmRlcmluZ3MuXG4gICAgdmFyIGluaXRpYWxDaGlsZHJlbiA9IG51bGw7XG4gICAgLy8gTGlzdCBvZiBjaGlsZHJlbiB0aGF0IHdpbGwgYmUgbW92ZWQgb3IgcmVtb3ZlZC5cbiAgICB2YXIgdXBkYXRlZENoaWxkcmVuID0gbnVsbDtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdXBkYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdXBkYXRlID0gdXBkYXRlc1tpXTtcbiAgICAgIGlmICh1cGRhdGUudHlwZSA9PT0gUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuTU9WRV9FWElTVElORyB8fCB1cGRhdGUudHlwZSA9PT0gUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuUkVNT1ZFX05PREUpIHtcbiAgICAgICAgdmFyIHVwZGF0ZWRJbmRleCA9IHVwZGF0ZS5mcm9tSW5kZXg7XG4gICAgICAgIHZhciB1cGRhdGVkQ2hpbGQgPSB1cGRhdGUucGFyZW50Tm9kZS5jaGlsZE5vZGVzW3VwZGF0ZWRJbmRleF07XG4gICAgICAgIHZhciBwYXJlbnRJRCA9IHVwZGF0ZS5wYXJlbnRJRDtcblxuICAgICAgICAhdXBkYXRlZENoaWxkID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3Byb2Nlc3NVcGRhdGVzKCk6IFVuYWJsZSB0byBmaW5kIGNoaWxkICVzIG9mIGVsZW1lbnQuIFRoaXMgJyArICdwcm9iYWJseSBtZWFucyB0aGUgRE9NIHdhcyB1bmV4cGVjdGVkbHkgbXV0YXRlZCAoZS5nLiwgYnkgdGhlICcgKyAnYnJvd3NlciksIHVzdWFsbHkgZHVlIHRvIGZvcmdldHRpbmcgYSA8dGJvZHk+IHdoZW4gdXNpbmcgdGFibGVzLCAnICsgJ25lc3RpbmcgdGFncyBsaWtlIDxmb3JtPiwgPHA+LCBvciA8YT4sIG9yIHVzaW5nIG5vbi1TVkcgZWxlbWVudHMgJyArICdpbiBhbiA8c3ZnPiBwYXJlbnQuIFRyeSBpbnNwZWN0aW5nIHRoZSBjaGlsZCBub2RlcyBvZiB0aGUgZWxlbWVudCAnICsgJ3dpdGggUmVhY3QgSUQgYCVzYC4nLCB1cGRhdGVkSW5kZXgsIHBhcmVudElEKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgaW5pdGlhbENoaWxkcmVuID0gaW5pdGlhbENoaWxkcmVuIHx8IHt9O1xuICAgICAgICBpbml0aWFsQ2hpbGRyZW5bcGFyZW50SURdID0gaW5pdGlhbENoaWxkcmVuW3BhcmVudElEXSB8fCBbXTtcbiAgICAgICAgaW5pdGlhbENoaWxkcmVuW3BhcmVudElEXVt1cGRhdGVkSW5kZXhdID0gdXBkYXRlZENoaWxkO1xuXG4gICAgICAgIHVwZGF0ZWRDaGlsZHJlbiA9IHVwZGF0ZWRDaGlsZHJlbiB8fCBbXTtcbiAgICAgICAgdXBkYXRlZENoaWxkcmVuLnB1c2godXBkYXRlZENoaWxkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgcmVuZGVyZWRNYXJrdXA7XG4gICAgLy8gbWFya3VwTGlzdCBpcyBlaXRoZXIgYSBsaXN0IG9mIG1hcmt1cCBvciBqdXN0IGEgbGlzdCBvZiBlbGVtZW50c1xuICAgIGlmIChtYXJrdXBMaXN0Lmxlbmd0aCAmJiB0eXBlb2YgbWFya3VwTGlzdFswXSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHJlbmRlcmVkTWFya3VwID0gRGFuZ2VyLmRhbmdlcm91c2x5UmVuZGVyTWFya3VwKG1hcmt1cExpc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZW5kZXJlZE1hcmt1cCA9IG1hcmt1cExpc3Q7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIHVwZGF0ZWQgY2hpbGRyZW4gZmlyc3Qgc28gdGhhdCBgdG9JbmRleGAgaXMgY29uc2lzdGVudC5cbiAgICBpZiAodXBkYXRlZENoaWxkcmVuKSB7XG4gICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHVwZGF0ZWRDaGlsZHJlbi5sZW5ndGg7IGorKykge1xuICAgICAgICB1cGRhdGVkQ2hpbGRyZW5bal0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh1cGRhdGVkQ2hpbGRyZW5bal0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAodmFyIGsgPSAwOyBrIDwgdXBkYXRlcy5sZW5ndGg7IGsrKykge1xuICAgICAgdXBkYXRlID0gdXBkYXRlc1trXTtcbiAgICAgIHN3aXRjaCAodXBkYXRlLnR5cGUpIHtcbiAgICAgICAgY2FzZSBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5JTlNFUlRfTUFSS1VQOlxuICAgICAgICAgIGluc2VydENoaWxkQXQodXBkYXRlLnBhcmVudE5vZGUsIHJlbmRlcmVkTWFya3VwW3VwZGF0ZS5tYXJrdXBJbmRleF0sIHVwZGF0ZS50b0luZGV4KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5NT1ZFX0VYSVNUSU5HOlxuICAgICAgICAgIGluc2VydENoaWxkQXQodXBkYXRlLnBhcmVudE5vZGUsIGluaXRpYWxDaGlsZHJlblt1cGRhdGUucGFyZW50SURdW3VwZGF0ZS5mcm9tSW5kZXhdLCB1cGRhdGUudG9JbmRleCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuU0VUX01BUktVUDpcbiAgICAgICAgICBzZXRJbm5lckhUTUwodXBkYXRlLnBhcmVudE5vZGUsIHVwZGF0ZS5jb250ZW50KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5URVhUX0NPTlRFTlQ6XG4gICAgICAgICAgc2V0VGV4dENvbnRlbnQodXBkYXRlLnBhcmVudE5vZGUsIHVwZGF0ZS5jb250ZW50KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5SRU1PVkVfTk9ERTpcbiAgICAgICAgICAvLyBBbHJlYWR5IHJlbW92ZWQgYnkgdGhlIGZvci1sb29wIGFib3ZlLlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG59O1xuXG5SZWFjdFBlcmYubWVhc3VyZU1ldGhvZHMoRE9NQ2hpbGRyZW5PcGVyYXRpb25zLCAnRE9NQ2hpbGRyZW5PcGVyYXRpb25zJywge1xuICB1cGRhdGVUZXh0Q29udGVudDogJ3VwZGF0ZVRleHRDb250ZW50J1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gRE9NQ2hpbGRyZW5PcGVyYXRpb25zOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBET01Qcm9wZXJ0eVxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuZnVuY3Rpb24gY2hlY2tNYXNrKHZhbHVlLCBiaXRtYXNrKSB7XG4gIHJldHVybiAodmFsdWUgJiBiaXRtYXNrKSA9PT0gYml0bWFzaztcbn1cblxudmFyIERPTVByb3BlcnR5SW5qZWN0aW9uID0ge1xuICAvKipcbiAgICogTWFwcGluZyBmcm9tIG5vcm1hbGl6ZWQsIGNhbWVsY2FzZWQgcHJvcGVydHkgbmFtZXMgdG8gYSBjb25maWd1cmF0aW9uIHRoYXRcbiAgICogc3BlY2lmaWVzIGhvdyB0aGUgYXNzb2NpYXRlZCBET00gcHJvcGVydHkgc2hvdWxkIGJlIGFjY2Vzc2VkIG9yIHJlbmRlcmVkLlxuICAgKi9cbiAgTVVTVF9VU0VfQVRUUklCVVRFOiAweDEsXG4gIE1VU1RfVVNFX1BST1BFUlRZOiAweDIsXG4gIEhBU19TSURFX0VGRkVDVFM6IDB4NCxcbiAgSEFTX0JPT0xFQU5fVkFMVUU6IDB4OCxcbiAgSEFTX05VTUVSSUNfVkFMVUU6IDB4MTAsXG4gIEhBU19QT1NJVElWRV9OVU1FUklDX1ZBTFVFOiAweDIwIHwgMHgxMCxcbiAgSEFTX09WRVJMT0FERURfQk9PTEVBTl9WQUxVRTogMHg0MCxcblxuICAvKipcbiAgICogSW5qZWN0IHNvbWUgc3BlY2lhbGl6ZWQga25vd2xlZGdlIGFib3V0IHRoZSBET00uIFRoaXMgdGFrZXMgYSBjb25maWcgb2JqZWN0XG4gICAqIHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICAgKlxuICAgKiBpc0N1c3RvbUF0dHJpYnV0ZTogZnVuY3Rpb24gdGhhdCBnaXZlbiBhbiBhdHRyaWJ1dGUgbmFtZSB3aWxsIHJldHVybiB0cnVlXG4gICAqIGlmIGl0IGNhbiBiZSBpbnNlcnRlZCBpbnRvIHRoZSBET00gdmVyYmF0aW0uIFVzZWZ1bCBmb3IgZGF0YS0qIG9yIGFyaWEtKlxuICAgKiBhdHRyaWJ1dGVzIHdoZXJlIGl0J3MgaW1wb3NzaWJsZSB0byBlbnVtZXJhdGUgYWxsIG9mIHRoZSBwb3NzaWJsZVxuICAgKiBhdHRyaWJ1dGUgbmFtZXMsXG4gICAqXG4gICAqIFByb3BlcnRpZXM6IG9iamVjdCBtYXBwaW5nIERPTSBwcm9wZXJ0eSBuYW1lIHRvIG9uZSBvZiB0aGVcbiAgICogRE9NUHJvcGVydHlJbmplY3Rpb24gY29uc3RhbnRzIG9yIG51bGwuIElmIHlvdXIgYXR0cmlidXRlIGlzbid0IGluIGhlcmUsXG4gICAqIGl0IHdvbid0IGdldCB3cml0dGVuIHRvIHRoZSBET00uXG4gICAqXG4gICAqIERPTUF0dHJpYnV0ZU5hbWVzOiBvYmplY3QgbWFwcGluZyBSZWFjdCBhdHRyaWJ1dGUgbmFtZSB0byB0aGUgRE9NXG4gICAqIGF0dHJpYnV0ZSBuYW1lLiBBdHRyaWJ1dGUgbmFtZXMgbm90IHNwZWNpZmllZCB1c2UgdGhlICoqbG93ZXJjYXNlKipcbiAgICogbm9ybWFsaXplZCBuYW1lLlxuICAgKlxuICAgKiBET01BdHRyaWJ1dGVOYW1lc3BhY2VzOiBvYmplY3QgbWFwcGluZyBSZWFjdCBhdHRyaWJ1dGUgbmFtZSB0byB0aGUgRE9NXG4gICAqIGF0dHJpYnV0ZSBuYW1lc3BhY2UgVVJMLiAoQXR0cmlidXRlIG5hbWVzIG5vdCBzcGVjaWZpZWQgdXNlIG5vIG5hbWVzcGFjZS4pXG4gICAqXG4gICAqIERPTVByb3BlcnR5TmFtZXM6IHNpbWlsYXIgdG8gRE9NQXR0cmlidXRlTmFtZXMgYnV0IGZvciBET00gcHJvcGVydGllcy5cbiAgICogUHJvcGVydHkgbmFtZXMgbm90IHNwZWNpZmllZCB1c2UgdGhlIG5vcm1hbGl6ZWQgbmFtZS5cbiAgICpcbiAgICogRE9NTXV0YXRpb25NZXRob2RzOiBQcm9wZXJ0aWVzIHRoYXQgcmVxdWlyZSBzcGVjaWFsIG11dGF0aW9uIG1ldGhvZHMuIElmXG4gICAqIGB2YWx1ZWAgaXMgdW5kZWZpbmVkLCB0aGUgbXV0YXRpb24gbWV0aG9kIHNob3VsZCB1bnNldCB0aGUgcHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkb21Qcm9wZXJ0eUNvbmZpZyB0aGUgY29uZmlnIGFzIGRlc2NyaWJlZCBhYm92ZS5cbiAgICovXG4gIGluamVjdERPTVByb3BlcnR5Q29uZmlnOiBmdW5jdGlvbiAoZG9tUHJvcGVydHlDb25maWcpIHtcbiAgICB2YXIgSW5qZWN0aW9uID0gRE9NUHJvcGVydHlJbmplY3Rpb247XG4gICAgdmFyIFByb3BlcnRpZXMgPSBkb21Qcm9wZXJ0eUNvbmZpZy5Qcm9wZXJ0aWVzIHx8IHt9O1xuICAgIHZhciBET01BdHRyaWJ1dGVOYW1lc3BhY2VzID0gZG9tUHJvcGVydHlDb25maWcuRE9NQXR0cmlidXRlTmFtZXNwYWNlcyB8fCB7fTtcbiAgICB2YXIgRE9NQXR0cmlidXRlTmFtZXMgPSBkb21Qcm9wZXJ0eUNvbmZpZy5ET01BdHRyaWJ1dGVOYW1lcyB8fCB7fTtcbiAgICB2YXIgRE9NUHJvcGVydHlOYW1lcyA9IGRvbVByb3BlcnR5Q29uZmlnLkRPTVByb3BlcnR5TmFtZXMgfHwge307XG4gICAgdmFyIERPTU11dGF0aW9uTWV0aG9kcyA9IGRvbVByb3BlcnR5Q29uZmlnLkRPTU11dGF0aW9uTWV0aG9kcyB8fCB7fTtcblxuICAgIGlmIChkb21Qcm9wZXJ0eUNvbmZpZy5pc0N1c3RvbUF0dHJpYnV0ZSkge1xuICAgICAgRE9NUHJvcGVydHkuX2lzQ3VzdG9tQXR0cmlidXRlRnVuY3Rpb25zLnB1c2goZG9tUHJvcGVydHlDb25maWcuaXNDdXN0b21BdHRyaWJ1dGUpO1xuICAgIH1cblxuICAgIGZvciAodmFyIHByb3BOYW1lIGluIFByb3BlcnRpZXMpIHtcbiAgICAgICEhRE9NUHJvcGVydHkucHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnaW5qZWN0RE9NUHJvcGVydHlDb25maWcoLi4uKTogWW91XFwncmUgdHJ5aW5nIHRvIGluamVjdCBET00gcHJvcGVydHkgJyArICdcXCclc1xcJyB3aGljaCBoYXMgYWxyZWFkeSBiZWVuIGluamVjdGVkLiBZb3UgbWF5IGJlIGFjY2lkZW50YWxseSAnICsgJ2luamVjdGluZyB0aGUgc2FtZSBET00gcHJvcGVydHkgY29uZmlnIHR3aWNlLCBvciB5b3UgbWF5IGJlICcgKyAnaW5qZWN0aW5nIHR3byBjb25maWdzIHRoYXQgaGF2ZSBjb25mbGljdGluZyBwcm9wZXJ0eSBuYW1lcy4nLCBwcm9wTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgICB2YXIgbG93ZXJDYXNlZCA9IHByb3BOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICB2YXIgcHJvcENvbmZpZyA9IFByb3BlcnRpZXNbcHJvcE5hbWVdO1xuXG4gICAgICB2YXIgcHJvcGVydHlJbmZvID0ge1xuICAgICAgICBhdHRyaWJ1dGVOYW1lOiBsb3dlckNhc2VkLFxuICAgICAgICBhdHRyaWJ1dGVOYW1lc3BhY2U6IG51bGwsXG4gICAgICAgIHByb3BlcnR5TmFtZTogcHJvcE5hbWUsXG4gICAgICAgIG11dGF0aW9uTWV0aG9kOiBudWxsLFxuXG4gICAgICAgIG11c3RVc2VBdHRyaWJ1dGU6IGNoZWNrTWFzayhwcm9wQ29uZmlnLCBJbmplY3Rpb24uTVVTVF9VU0VfQVRUUklCVVRFKSxcbiAgICAgICAgbXVzdFVzZVByb3BlcnR5OiBjaGVja01hc2socHJvcENvbmZpZywgSW5qZWN0aW9uLk1VU1RfVVNFX1BST1BFUlRZKSxcbiAgICAgICAgaGFzU2lkZUVmZmVjdHM6IGNoZWNrTWFzayhwcm9wQ29uZmlnLCBJbmplY3Rpb24uSEFTX1NJREVfRUZGRUNUUyksXG4gICAgICAgIGhhc0Jvb2xlYW5WYWx1ZTogY2hlY2tNYXNrKHByb3BDb25maWcsIEluamVjdGlvbi5IQVNfQk9PTEVBTl9WQUxVRSksXG4gICAgICAgIGhhc051bWVyaWNWYWx1ZTogY2hlY2tNYXNrKHByb3BDb25maWcsIEluamVjdGlvbi5IQVNfTlVNRVJJQ19WQUxVRSksXG4gICAgICAgIGhhc1Bvc2l0aXZlTnVtZXJpY1ZhbHVlOiBjaGVja01hc2socHJvcENvbmZpZywgSW5qZWN0aW9uLkhBU19QT1NJVElWRV9OVU1FUklDX1ZBTFVFKSxcbiAgICAgICAgaGFzT3ZlcmxvYWRlZEJvb2xlYW5WYWx1ZTogY2hlY2tNYXNrKHByb3BDb25maWcsIEluamVjdGlvbi5IQVNfT1ZFUkxPQURFRF9CT09MRUFOX1ZBTFVFKVxuICAgICAgfTtcblxuICAgICAgISghcHJvcGVydHlJbmZvLm11c3RVc2VBdHRyaWJ1dGUgfHwgIXByb3BlcnR5SW5mby5tdXN0VXNlUHJvcGVydHkpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0RPTVByb3BlcnR5OiBDYW5ub3QgcmVxdWlyZSB1c2luZyBib3RoIGF0dHJpYnV0ZSBhbmQgcHJvcGVydHk6ICVzJywgcHJvcE5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgICEocHJvcGVydHlJbmZvLm11c3RVc2VQcm9wZXJ0eSB8fCAhcHJvcGVydHlJbmZvLmhhc1NpZGVFZmZlY3RzKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdET01Qcm9wZXJ0eTogUHJvcGVydGllcyB0aGF0IGhhdmUgc2lkZSBlZmZlY3RzIG11c3QgdXNlIHByb3BlcnR5OiAlcycsIHByb3BOYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICAhKHByb3BlcnR5SW5mby5oYXNCb29sZWFuVmFsdWUgKyBwcm9wZXJ0eUluZm8uaGFzTnVtZXJpY1ZhbHVlICsgcHJvcGVydHlJbmZvLmhhc092ZXJsb2FkZWRCb29sZWFuVmFsdWUgPD0gMSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRE9NUHJvcGVydHk6IFZhbHVlIGNhbiBiZSBvbmUgb2YgYm9vbGVhbiwgb3ZlcmxvYWRlZCBib29sZWFuLCBvciAnICsgJ251bWVyaWMgdmFsdWUsIGJ1dCBub3QgYSBjb21iaW5hdGlvbjogJXMnLCBwcm9wTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBET01Qcm9wZXJ0eS5nZXRQb3NzaWJsZVN0YW5kYXJkTmFtZVtsb3dlckNhc2VkXSA9IHByb3BOYW1lO1xuICAgICAgfVxuXG4gICAgICBpZiAoRE9NQXR0cmlidXRlTmFtZXMuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAgIHZhciBhdHRyaWJ1dGVOYW1lID0gRE9NQXR0cmlidXRlTmFtZXNbcHJvcE5hbWVdO1xuICAgICAgICBwcm9wZXJ0eUluZm8uYXR0cmlidXRlTmFtZSA9IGF0dHJpYnV0ZU5hbWU7XG4gICAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgRE9NUHJvcGVydHkuZ2V0UG9zc2libGVTdGFuZGFyZE5hbWVbYXR0cmlidXRlTmFtZV0gPSBwcm9wTmFtZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoRE9NQXR0cmlidXRlTmFtZXNwYWNlcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgcHJvcGVydHlJbmZvLmF0dHJpYnV0ZU5hbWVzcGFjZSA9IERPTUF0dHJpYnV0ZU5hbWVzcGFjZXNbcHJvcE5hbWVdO1xuICAgICAgfVxuXG4gICAgICBpZiAoRE9NUHJvcGVydHlOYW1lcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgcHJvcGVydHlJbmZvLnByb3BlcnR5TmFtZSA9IERPTVByb3BlcnR5TmFtZXNbcHJvcE5hbWVdO1xuICAgICAgfVxuXG4gICAgICBpZiAoRE9NTXV0YXRpb25NZXRob2RzLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgICBwcm9wZXJ0eUluZm8ubXV0YXRpb25NZXRob2QgPSBET01NdXRhdGlvbk1ldGhvZHNbcHJvcE5hbWVdO1xuICAgICAgfVxuXG4gICAgICBET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW3Byb3BOYW1lXSA9IHByb3BlcnR5SW5mbztcbiAgICB9XG4gIH1cbn07XG52YXIgZGVmYXVsdFZhbHVlQ2FjaGUgPSB7fTtcblxuLyoqXG4gKiBET01Qcm9wZXJ0eSBleHBvcnRzIGxvb2t1cCBvYmplY3RzIHRoYXQgY2FuIGJlIHVzZWQgbGlrZSBmdW5jdGlvbnM6XG4gKlxuICogICA+IERPTVByb3BlcnR5LmlzVmFsaWRbJ2lkJ11cbiAqICAgdHJ1ZVxuICogICA+IERPTVByb3BlcnR5LmlzVmFsaWRbJ2Zvb2JhciddXG4gKiAgIHVuZGVmaW5lZFxuICpcbiAqIEFsdGhvdWdoIHRoaXMgbWF5IGJlIGNvbmZ1c2luZywgaXQgcGVyZm9ybXMgYmV0dGVyIGluIGdlbmVyYWwuXG4gKlxuICogQHNlZSBodHRwOi8vanNwZXJmLmNvbS9rZXktZXhpc3RzXG4gKiBAc2VlIGh0dHA6Ly9qc3BlcmYuY29tL2tleS1taXNzaW5nXG4gKi9cbnZhciBET01Qcm9wZXJ0eSA9IHtcblxuICBJRF9BVFRSSUJVVEVfTkFNRTogJ2RhdGEtcmVhY3RpZCcsXG5cbiAgLyoqXG4gICAqIE1hcCBmcm9tIHByb3BlcnR5IFwic3RhbmRhcmQgbmFtZVwiIHRvIGFuIG9iamVjdCB3aXRoIGluZm8gYWJvdXQgaG93IHRvIHNldFxuICAgKiB0aGUgcHJvcGVydHkgaW4gdGhlIERPTS4gRWFjaCBvYmplY3QgY29udGFpbnM6XG4gICAqXG4gICAqIGF0dHJpYnV0ZU5hbWU6XG4gICAqICAgVXNlZCB3aGVuIHJlbmRlcmluZyBtYXJrdXAgb3Igd2l0aCBgKkF0dHJpYnV0ZSgpYC5cbiAgICogYXR0cmlidXRlTmFtZXNwYWNlXG4gICAqIHByb3BlcnR5TmFtZTpcbiAgICogICBVc2VkIG9uIERPTSBub2RlIGluc3RhbmNlcy4gKFRoaXMgaW5jbHVkZXMgcHJvcGVydGllcyB0aGF0IG11dGF0ZSBkdWUgdG9cbiAgICogICBleHRlcm5hbCBmYWN0b3JzLilcbiAgICogbXV0YXRpb25NZXRob2Q6XG4gICAqICAgSWYgbm9uLW51bGwsIHVzZWQgaW5zdGVhZCBvZiB0aGUgcHJvcGVydHkgb3IgYHNldEF0dHJpYnV0ZSgpYCBhZnRlclxuICAgKiAgIGluaXRpYWwgcmVuZGVyLlxuICAgKiBtdXN0VXNlQXR0cmlidXRlOlxuICAgKiAgIFdoZXRoZXIgdGhlIHByb3BlcnR5IG11c3QgYmUgYWNjZXNzZWQgYW5kIG11dGF0ZWQgdXNpbmcgYCpBdHRyaWJ1dGUoKWAuXG4gICAqICAgKFRoaXMgaW5jbHVkZXMgYW55dGhpbmcgdGhhdCBmYWlscyBgPHByb3BOYW1lPiBpbiA8ZWxlbWVudD5gLilcbiAgICogbXVzdFVzZVByb3BlcnR5OlxuICAgKiAgIFdoZXRoZXIgdGhlIHByb3BlcnR5IG11c3QgYmUgYWNjZXNzZWQgYW5kIG11dGF0ZWQgYXMgYW4gb2JqZWN0IHByb3BlcnR5LlxuICAgKiBoYXNTaWRlRWZmZWN0czpcbiAgICogICBXaGV0aGVyIG9yIG5vdCBzZXR0aW5nIGEgdmFsdWUgY2F1c2VzIHNpZGUgZWZmZWN0cyBzdWNoIGFzIHRyaWdnZXJpbmdcbiAgICogICByZXNvdXJjZXMgdG8gYmUgbG9hZGVkIG9yIHRleHQgc2VsZWN0aW9uIGNoYW5nZXMuIElmIHRydWUsIHdlIHJlYWQgZnJvbVxuICAgKiAgIHRoZSBET00gYmVmb3JlIHVwZGF0aW5nIHRvIGVuc3VyZSB0aGF0IHRoZSB2YWx1ZSBpcyBvbmx5IHNldCBpZiBpdCBoYXNcbiAgICogICBjaGFuZ2VkLlxuICAgKiBoYXNCb29sZWFuVmFsdWU6XG4gICAqICAgV2hldGhlciB0aGUgcHJvcGVydHkgc2hvdWxkIGJlIHJlbW92ZWQgd2hlbiBzZXQgdG8gYSBmYWxzZXkgdmFsdWUuXG4gICAqIGhhc051bWVyaWNWYWx1ZTpcbiAgICogICBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBtdXN0IGJlIG51bWVyaWMgb3IgcGFyc2UgYXMgYSBudW1lcmljIGFuZCBzaG91bGQgYmVcbiAgICogICByZW1vdmVkIHdoZW4gc2V0IHRvIGEgZmFsc2V5IHZhbHVlLlxuICAgKiBoYXNQb3NpdGl2ZU51bWVyaWNWYWx1ZTpcbiAgICogICBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBtdXN0IGJlIHBvc2l0aXZlIG51bWVyaWMgb3IgcGFyc2UgYXMgYSBwb3NpdGl2ZVxuICAgKiAgIG51bWVyaWMgYW5kIHNob3VsZCBiZSByZW1vdmVkIHdoZW4gc2V0IHRvIGEgZmFsc2V5IHZhbHVlLlxuICAgKiBoYXNPdmVybG9hZGVkQm9vbGVhblZhbHVlOlxuICAgKiAgIFdoZXRoZXIgdGhlIHByb3BlcnR5IGNhbiBiZSB1c2VkIGFzIGEgZmxhZyBhcyB3ZWxsIGFzIHdpdGggYSB2YWx1ZS5cbiAgICogICBSZW1vdmVkIHdoZW4gc3RyaWN0bHkgZXF1YWwgdG8gZmFsc2U7IHByZXNlbnQgd2l0aG91dCBhIHZhbHVlIHdoZW5cbiAgICogICBzdHJpY3RseSBlcXVhbCB0byB0cnVlOyBwcmVzZW50IHdpdGggYSB2YWx1ZSBvdGhlcndpc2UuXG4gICAqL1xuICBwcm9wZXJ0aWVzOiB7fSxcblxuICAvKipcbiAgICogTWFwcGluZyBmcm9tIGxvd2VyY2FzZSBwcm9wZXJ0eSBuYW1lcyB0byB0aGUgcHJvcGVybHkgY2FzZWQgdmVyc2lvbiwgdXNlZFxuICAgKiB0byB3YXJuIGluIHRoZSBjYXNlIG9mIG1pc3NpbmcgcHJvcGVydGllcy4gQXZhaWxhYmxlIG9ubHkgaW4gX19ERVZfXy5cbiAgICogQHR5cGUge09iamVjdH1cbiAgICovXG4gIGdldFBvc3NpYmxlU3RhbmRhcmROYW1lOiBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8ge30gOiBudWxsLFxuXG4gIC8qKlxuICAgKiBBbGwgb2YgdGhlIGlzQ3VzdG9tQXR0cmlidXRlKCkgZnVuY3Rpb25zIHRoYXQgaGF2ZSBiZWVuIGluamVjdGVkLlxuICAgKi9cbiAgX2lzQ3VzdG9tQXR0cmlidXRlRnVuY3Rpb25zOiBbXSxcblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgYSBwcm9wZXJ0eSBuYW1lIGlzIGEgY3VzdG9tIGF0dHJpYnV0ZS5cbiAgICogQG1ldGhvZFxuICAgKi9cbiAgaXNDdXN0b21BdHRyaWJ1dGU6IGZ1bmN0aW9uIChhdHRyaWJ1dGVOYW1lKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBET01Qcm9wZXJ0eS5faXNDdXN0b21BdHRyaWJ1dGVGdW5jdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpc0N1c3RvbUF0dHJpYnV0ZUZuID0gRE9NUHJvcGVydHkuX2lzQ3VzdG9tQXR0cmlidXRlRnVuY3Rpb25zW2ldO1xuICAgICAgaWYgKGlzQ3VzdG9tQXR0cmlidXRlRm4oYXR0cmlidXRlTmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZGVmYXVsdCBwcm9wZXJ0eSB2YWx1ZSBmb3IgYSBET00gcHJvcGVydHkgKGkuZS4sIG5vdCBhblxuICAgKiBhdHRyaWJ1dGUpLiBNb3N0IGRlZmF1bHQgdmFsdWVzIGFyZSAnJyBvciBmYWxzZSwgYnV0IG5vdCBhbGwuIFdvcnNlIHlldCxcbiAgICogc29tZSAoaW4gcGFydGljdWxhciwgYHR5cGVgKSB2YXJ5IGRlcGVuZGluZyBvbiB0aGUgdHlwZSBvZiBlbGVtZW50LlxuICAgKlxuICAgKiBUT0RPOiBJcyBpdCBiZXR0ZXIgdG8gZ3JhYiBhbGwgdGhlIHBvc3NpYmxlIHByb3BlcnRpZXMgd2hlbiBjcmVhdGluZyBhblxuICAgKiBlbGVtZW50IHRvIGF2b2lkIGhhdmluZyB0byBjcmVhdGUgdGhlIHNhbWUgZWxlbWVudCB0d2ljZT9cbiAgICovXG4gIGdldERlZmF1bHRWYWx1ZUZvclByb3BlcnR5OiBmdW5jdGlvbiAobm9kZU5hbWUsIHByb3ApIHtcbiAgICB2YXIgbm9kZURlZmF1bHRzID0gZGVmYXVsdFZhbHVlQ2FjaGVbbm9kZU5hbWVdO1xuICAgIHZhciB0ZXN0RWxlbWVudDtcbiAgICBpZiAoIW5vZGVEZWZhdWx0cykge1xuICAgICAgZGVmYXVsdFZhbHVlQ2FjaGVbbm9kZU5hbWVdID0gbm9kZURlZmF1bHRzID0ge307XG4gICAgfVxuICAgIGlmICghKHByb3AgaW4gbm9kZURlZmF1bHRzKSkge1xuICAgICAgdGVzdEVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5vZGVOYW1lKTtcbiAgICAgIG5vZGVEZWZhdWx0c1twcm9wXSA9IHRlc3RFbGVtZW50W3Byb3BdO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZURlZmF1bHRzW3Byb3BdO1xuICB9LFxuXG4gIGluamVjdGlvbjogRE9NUHJvcGVydHlJbmplY3Rpb25cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRE9NUHJvcGVydHk7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIERPTVByb3BlcnR5T3BlcmF0aW9uc1xuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBET01Qcm9wZXJ0eSA9IHJlcXVpcmUoJy4vRE9NUHJvcGVydHknKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xuXG52YXIgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIgPSByZXF1aXJlKCcuL3F1b3RlQXR0cmlidXRlVmFsdWVGb3JCcm93c2VyJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuLy8gU2ltcGxpZmllZCBzdWJzZXRcbnZhciBWQUxJRF9BVFRSSUJVVEVfTkFNRV9SRUdFWCA9IC9eW2EtekEtWl9dW1xcd1xcLlxcLV0qJC87XG52YXIgaWxsZWdhbEF0dHJpYnV0ZU5hbWVDYWNoZSA9IHt9O1xudmFyIHZhbGlkYXRlZEF0dHJpYnV0ZU5hbWVDYWNoZSA9IHt9O1xuXG5mdW5jdGlvbiBpc0F0dHJpYnV0ZU5hbWVTYWZlKGF0dHJpYnV0ZU5hbWUpIHtcbiAgaWYgKHZhbGlkYXRlZEF0dHJpYnV0ZU5hbWVDYWNoZS5oYXNPd25Qcm9wZXJ0eShhdHRyaWJ1dGVOYW1lKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmIChpbGxlZ2FsQXR0cmlidXRlTmFtZUNhY2hlLmhhc093blByb3BlcnR5KGF0dHJpYnV0ZU5hbWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmIChWQUxJRF9BVFRSSUJVVEVfTkFNRV9SRUdFWC50ZXN0KGF0dHJpYnV0ZU5hbWUpKSB7XG4gICAgdmFsaWRhdGVkQXR0cmlidXRlTmFtZUNhY2hlW2F0dHJpYnV0ZU5hbWVdID0gdHJ1ZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICBpbGxlZ2FsQXR0cmlidXRlTmFtZUNhY2hlW2F0dHJpYnV0ZU5hbWVdID0gdHJ1ZTtcbiAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdJbnZhbGlkIGF0dHJpYnV0ZSBuYW1lOiBgJXNgJywgYXR0cmlidXRlTmFtZSkgOiB1bmRlZmluZWQ7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gc2hvdWxkSWdub3JlVmFsdWUocHJvcGVydHlJbmZvLCB2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT0gbnVsbCB8fCBwcm9wZXJ0eUluZm8uaGFzQm9vbGVhblZhbHVlICYmICF2YWx1ZSB8fCBwcm9wZXJ0eUluZm8uaGFzTnVtZXJpY1ZhbHVlICYmIGlzTmFOKHZhbHVlKSB8fCBwcm9wZXJ0eUluZm8uaGFzUG9zaXRpdmVOdW1lcmljVmFsdWUgJiYgdmFsdWUgPCAxIHx8IHByb3BlcnR5SW5mby5oYXNPdmVybG9hZGVkQm9vbGVhblZhbHVlICYmIHZhbHVlID09PSBmYWxzZTtcbn1cblxuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgdmFyIHJlYWN0UHJvcHMgPSB7XG4gICAgY2hpbGRyZW46IHRydWUsXG4gICAgZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6IHRydWUsXG4gICAga2V5OiB0cnVlLFxuICAgIHJlZjogdHJ1ZVxuICB9O1xuICB2YXIgd2FybmVkUHJvcGVydGllcyA9IHt9O1xuXG4gIHZhciB3YXJuVW5rbm93blByb3BlcnR5ID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBpZiAocmVhY3RQcm9wcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiByZWFjdFByb3BzW25hbWVdIHx8IHdhcm5lZFByb3BlcnRpZXMuaGFzT3duUHJvcGVydHkobmFtZSkgJiYgd2FybmVkUHJvcGVydGllc1tuYW1lXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHdhcm5lZFByb3BlcnRpZXNbbmFtZV0gPSB0cnVlO1xuICAgIHZhciBsb3dlckNhc2VkTmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgIC8vIGRhdGEtKiBhdHRyaWJ1dGVzIHNob3VsZCBiZSBsb3dlcmNhc2U7IHN1Z2dlc3QgdGhlIGxvd2VyY2FzZSB2ZXJzaW9uXG4gICAgdmFyIHN0YW5kYXJkTmFtZSA9IERPTVByb3BlcnR5LmlzQ3VzdG9tQXR0cmlidXRlKGxvd2VyQ2FzZWROYW1lKSA/IGxvd2VyQ2FzZWROYW1lIDogRE9NUHJvcGVydHkuZ2V0UG9zc2libGVTdGFuZGFyZE5hbWUuaGFzT3duUHJvcGVydHkobG93ZXJDYXNlZE5hbWUpID8gRE9NUHJvcGVydHkuZ2V0UG9zc2libGVTdGFuZGFyZE5hbWVbbG93ZXJDYXNlZE5hbWVdIDogbnVsbDtcblxuICAgIC8vIEZvciBub3csIG9ubHkgd2FybiB3aGVuIHdlIGhhdmUgYSBzdWdnZXN0ZWQgY29ycmVjdGlvbi4gVGhpcyBwcmV2ZW50c1xuICAgIC8vIGxvZ2dpbmcgdG9vIG11Y2ggd2hlbiB1c2luZyB0cmFuc2ZlclByb3BzVG8uXG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoc3RhbmRhcmROYW1lID09IG51bGwsICdVbmtub3duIERPTSBwcm9wZXJ0eSAlcy4gRGlkIHlvdSBtZWFuICVzPycsIG5hbWUsIHN0YW5kYXJkTmFtZSkgOiB1bmRlZmluZWQ7XG4gIH07XG59XG5cbi8qKlxuICogT3BlcmF0aW9ucyBmb3IgZGVhbGluZyB3aXRoIERPTSBwcm9wZXJ0aWVzLlxuICovXG52YXIgRE9NUHJvcGVydHlPcGVyYXRpb25zID0ge1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIG1hcmt1cCBmb3IgdGhlIElEIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgVW5lc2NhcGVkIElELlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IE1hcmt1cCBzdHJpbmcuXG4gICAqL1xuICBjcmVhdGVNYXJrdXBGb3JJRDogZnVuY3Rpb24gKGlkKSB7XG4gICAgcmV0dXJuIERPTVByb3BlcnR5LklEX0FUVFJJQlVURV9OQU1FICsgJz0nICsgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXIoaWQpO1xuICB9LFxuXG4gIHNldEF0dHJpYnV0ZUZvcklEOiBmdW5jdGlvbiAobm9kZSwgaWQpIHtcbiAgICBub2RlLnNldEF0dHJpYnV0ZShET01Qcm9wZXJ0eS5JRF9BVFRSSUJVVEVfTkFNRSwgaWQpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIG1hcmt1cCBmb3IgYSBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfSBNYXJrdXAgc3RyaW5nLCBvciBudWxsIGlmIHRoZSBwcm9wZXJ0eSB3YXMgaW52YWxpZC5cbiAgICovXG4gIGNyZWF0ZU1hcmt1cEZvclByb3BlcnR5OiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICB2YXIgcHJvcGVydHlJbmZvID0gRE9NUHJvcGVydHkucHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSA/IERPTVByb3BlcnR5LnByb3BlcnRpZXNbbmFtZV0gOiBudWxsO1xuICAgIGlmIChwcm9wZXJ0eUluZm8pIHtcbiAgICAgIGlmIChzaG91bGRJZ25vcmVWYWx1ZShwcm9wZXJ0eUluZm8sIHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG4gICAgICB2YXIgYXR0cmlidXRlTmFtZSA9IHByb3BlcnR5SW5mby5hdHRyaWJ1dGVOYW1lO1xuICAgICAgaWYgKHByb3BlcnR5SW5mby5oYXNCb29sZWFuVmFsdWUgfHwgcHJvcGVydHlJbmZvLmhhc092ZXJsb2FkZWRCb29sZWFuVmFsdWUgJiYgdmFsdWUgPT09IHRydWUpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZU5hbWUgKyAnPVwiXCInO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGF0dHJpYnV0ZU5hbWUgKyAnPScgKyBxdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3Nlcih2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChET01Qcm9wZXJ0eS5pc0N1c3RvbUF0dHJpYnV0ZShuYW1lKSkge1xuICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5hbWUgKyAnPScgKyBxdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3Nlcih2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB3YXJuVW5rbm93blByb3BlcnR5KG5hbWUpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlcyBtYXJrdXAgZm9yIGEgY3VzdG9tIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEByZXR1cm4ge3N0cmluZ30gTWFya3VwIHN0cmluZywgb3IgZW1wdHkgc3RyaW5nIGlmIHRoZSBwcm9wZXJ0eSB3YXMgaW52YWxpZC5cbiAgICovXG4gIGNyZWF0ZU1hcmt1cEZvckN1c3RvbUF0dHJpYnV0ZTogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKCFpc0F0dHJpYnV0ZU5hbWVTYWZlKG5hbWUpIHx8IHZhbHVlID09IG51bGwpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgcmV0dXJuIG5hbWUgKyAnPScgKyBxdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3Nlcih2YWx1ZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhbHVlIGZvciBhIHByb3BlcnR5IG9uIGEgbm9kZS5cbiAgICpcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICovXG4gIHNldFZhbHVlRm9yUHJvcGVydHk6IGZ1bmN0aW9uIChub2RlLCBuYW1lLCB2YWx1ZSkge1xuICAgIHZhciBwcm9wZXJ0eUluZm8gPSBET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzLmhhc093blByb3BlcnR5KG5hbWUpID8gRE9NUHJvcGVydHkucHJvcGVydGllc1tuYW1lXSA6IG51bGw7XG4gICAgaWYgKHByb3BlcnR5SW5mbykge1xuICAgICAgdmFyIG11dGF0aW9uTWV0aG9kID0gcHJvcGVydHlJbmZvLm11dGF0aW9uTWV0aG9kO1xuICAgICAgaWYgKG11dGF0aW9uTWV0aG9kKSB7XG4gICAgICAgIG11dGF0aW9uTWV0aG9kKG5vZGUsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoc2hvdWxkSWdub3JlVmFsdWUocHJvcGVydHlJbmZvLCB2YWx1ZSkpIHtcbiAgICAgICAgdGhpcy5kZWxldGVWYWx1ZUZvclByb3BlcnR5KG5vZGUsIG5hbWUpO1xuICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eUluZm8ubXVzdFVzZUF0dHJpYnV0ZSkge1xuICAgICAgICB2YXIgYXR0cmlidXRlTmFtZSA9IHByb3BlcnR5SW5mby5hdHRyaWJ1dGVOYW1lO1xuICAgICAgICB2YXIgbmFtZXNwYWNlID0gcHJvcGVydHlJbmZvLmF0dHJpYnV0ZU5hbWVzcGFjZTtcbiAgICAgICAgLy8gYHNldEF0dHJpYnV0ZWAgd2l0aCBvYmplY3RzIGJlY29tZXMgb25seSBgW29iamVjdF1gIGluIElFOC85LFxuICAgICAgICAvLyAoJycgKyB2YWx1ZSkgbWFrZXMgaXQgb3V0cHV0IHRoZSBjb3JyZWN0IHRvU3RyaW5nKCktdmFsdWUuXG4gICAgICAgIGlmIChuYW1lc3BhY2UpIHtcbiAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZU5TKG5hbWVzcGFjZSwgYXR0cmlidXRlTmFtZSwgJycgKyB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlJbmZvLmhhc0Jvb2xlYW5WYWx1ZSB8fCBwcm9wZXJ0eUluZm8uaGFzT3ZlcmxvYWRlZEJvb2xlYW5WYWx1ZSAmJiB2YWx1ZSA9PT0gdHJ1ZSkge1xuICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKGF0dHJpYnV0ZU5hbWUsICcnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShhdHRyaWJ1dGVOYW1lLCAnJyArIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIHByb3BOYW1lID0gcHJvcGVydHlJbmZvLnByb3BlcnR5TmFtZTtcbiAgICAgICAgLy8gTXVzdCBleHBsaWNpdGx5IGNhc3QgdmFsdWVzIGZvciBIQVNfU0lERV9FRkZFQ1RTLXByb3BlcnRpZXMgdG8gdGhlXG4gICAgICAgIC8vIHByb3BlcnR5IHR5cGUgYmVmb3JlIGNvbXBhcmluZzsgb25seSBgdmFsdWVgIGRvZXMgYW5kIGlzIHN0cmluZy5cbiAgICAgICAgaWYgKCFwcm9wZXJ0eUluZm8uaGFzU2lkZUVmZmVjdHMgfHwgJycgKyBub2RlW3Byb3BOYW1lXSAhPT0gJycgKyB2YWx1ZSkge1xuICAgICAgICAgIC8vIENvbnRyYXJ5IHRvIGBzZXRBdHRyaWJ1dGVgLCBvYmplY3QgcHJvcGVydGllcyBhcmUgcHJvcGVybHlcbiAgICAgICAgICAvLyBgdG9TdHJpbmdgZWQgYnkgSUU4LzkuXG4gICAgICAgICAgbm9kZVtwcm9wTmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoRE9NUHJvcGVydHkuaXNDdXN0b21BdHRyaWJ1dGUobmFtZSkpIHtcbiAgICAgIERPTVByb3BlcnR5T3BlcmF0aW9ucy5zZXRWYWx1ZUZvckF0dHJpYnV0ZShub2RlLCBuYW1lLCB2YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB3YXJuVW5rbm93blByb3BlcnR5KG5hbWUpO1xuICAgIH1cbiAgfSxcblxuICBzZXRWYWx1ZUZvckF0dHJpYnV0ZTogZnVuY3Rpb24gKG5vZGUsIG5hbWUsIHZhbHVlKSB7XG4gICAgaWYgKCFpc0F0dHJpYnV0ZU5hbWVTYWZlKG5hbWUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUobmFtZSwgJycgKyB2YWx1ZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBEZWxldGVzIHRoZSB2YWx1ZSBmb3IgYSBwcm9wZXJ0eSBvbiBhIG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKi9cbiAgZGVsZXRlVmFsdWVGb3JQcm9wZXJ0eTogZnVuY3Rpb24gKG5vZGUsIG5hbWUpIHtcbiAgICB2YXIgcHJvcGVydHlJbmZvID0gRE9NUHJvcGVydHkucHJvcGVydGllcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSA/IERPTVByb3BlcnR5LnByb3BlcnRpZXNbbmFtZV0gOiBudWxsO1xuICAgIGlmIChwcm9wZXJ0eUluZm8pIHtcbiAgICAgIHZhciBtdXRhdGlvbk1ldGhvZCA9IHByb3BlcnR5SW5mby5tdXRhdGlvbk1ldGhvZDtcbiAgICAgIGlmIChtdXRhdGlvbk1ldGhvZCkge1xuICAgICAgICBtdXRhdGlvbk1ldGhvZChub2RlLCB1bmRlZmluZWQpO1xuICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eUluZm8ubXVzdFVzZUF0dHJpYnV0ZSkge1xuICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShwcm9wZXJ0eUluZm8uYXR0cmlidXRlTmFtZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgcHJvcE5hbWUgPSBwcm9wZXJ0eUluZm8ucHJvcGVydHlOYW1lO1xuICAgICAgICB2YXIgZGVmYXVsdFZhbHVlID0gRE9NUHJvcGVydHkuZ2V0RGVmYXVsdFZhbHVlRm9yUHJvcGVydHkobm9kZS5ub2RlTmFtZSwgcHJvcE5hbWUpO1xuICAgICAgICBpZiAoIXByb3BlcnR5SW5mby5oYXNTaWRlRWZmZWN0cyB8fCAnJyArIG5vZGVbcHJvcE5hbWVdICE9PSBkZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgICBub2RlW3Byb3BOYW1lXSA9IGRlZmF1bHRWYWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoRE9NUHJvcGVydHkuaXNDdXN0b21BdHRyaWJ1dGUobmFtZSkpIHtcbiAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgIH0gZWxzZSBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FyblVua25vd25Qcm9wZXJ0eShuYW1lKTtcbiAgICB9XG4gIH1cblxufTtcblxuUmVhY3RQZXJmLm1lYXN1cmVNZXRob2RzKERPTVByb3BlcnR5T3BlcmF0aW9ucywgJ0RPTVByb3BlcnR5T3BlcmF0aW9ucycsIHtcbiAgc2V0VmFsdWVGb3JQcm9wZXJ0eTogJ3NldFZhbHVlRm9yUHJvcGVydHknLFxuICBzZXRWYWx1ZUZvckF0dHJpYnV0ZTogJ3NldFZhbHVlRm9yQXR0cmlidXRlJyxcbiAgZGVsZXRlVmFsdWVGb3JQcm9wZXJ0eTogJ2RlbGV0ZVZhbHVlRm9yUHJvcGVydHknXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBET01Qcm9wZXJ0eU9wZXJhdGlvbnM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIERhbmdlclxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG5cbnZhciBjcmVhdGVOb2Rlc0Zyb21NYXJrdXAgPSByZXF1aXJlKCdmYmpzL2xpYi9jcmVhdGVOb2Rlc0Zyb21NYXJrdXAnKTtcbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlGdW5jdGlvbicpO1xudmFyIGdldE1hcmt1cFdyYXAgPSByZXF1aXJlKCdmYmpzL2xpYi9nZXRNYXJrdXBXcmFwJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbnZhciBPUEVOX1RBR19OQU1FX0VYUCA9IC9eKDxbXiBcXC8+XSspLztcbnZhciBSRVNVTFRfSU5ERVhfQVRUUiA9ICdkYXRhLWRhbmdlci1pbmRleCc7XG5cbi8qKlxuICogRXh0cmFjdHMgdGhlIGBub2RlTmFtZWAgZnJvbSBhIHN0cmluZyBvZiBtYXJrdXAuXG4gKlxuICogTk9URTogRXh0cmFjdGluZyB0aGUgYG5vZGVOYW1lYCBkb2VzIG5vdCByZXF1aXJlIGEgcmVndWxhciBleHByZXNzaW9uIG1hdGNoXG4gKiBiZWNhdXNlIHdlIG1ha2UgYXNzdW1wdGlvbnMgYWJvdXQgUmVhY3QtZ2VuZXJhdGVkIG1hcmt1cCAoaS5lLiB0aGVyZSBhcmUgbm9cbiAqIHNwYWNlcyBzdXJyb3VuZGluZyB0aGUgb3BlbmluZyB0YWcgYW5kIHRoZXJlIGlzIGF0IGxlYXN0IG9uZSBhdHRyaWJ1dGUpLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBtYXJrdXAgU3RyaW5nIG9mIG1hcmt1cC5cbiAqIEByZXR1cm4ge3N0cmluZ30gTm9kZSBuYW1lIG9mIHRoZSBzdXBwbGllZCBtYXJrdXAuXG4gKiBAc2VlIGh0dHA6Ly9qc3BlcmYuY29tL2V4dHJhY3Qtbm9kZW5hbWVcbiAqL1xuZnVuY3Rpb24gZ2V0Tm9kZU5hbWUobWFya3VwKSB7XG4gIHJldHVybiBtYXJrdXAuc3Vic3RyaW5nKDEsIG1hcmt1cC5pbmRleE9mKCcgJykpO1xufVxuXG52YXIgRGFuZ2VyID0ge1xuXG4gIC8qKlxuICAgKiBSZW5kZXJzIG1hcmt1cCBpbnRvIGFuIGFycmF5IG9mIG5vZGVzLiBUaGUgbWFya3VwIGlzIGV4cGVjdGVkIHRvIHJlbmRlclxuICAgKiBpbnRvIGEgbGlzdCBvZiByb290IG5vZGVzLiBBbHNvLCB0aGUgbGVuZ3RoIG9mIGByZXN1bHRMaXN0YCBhbmRcbiAgICogYG1hcmt1cExpc3RgIHNob3VsZCBiZSB0aGUgc2FtZS5cbiAgICpcbiAgICogQHBhcmFtIHthcnJheTxzdHJpbmc+fSBtYXJrdXBMaXN0IExpc3Qgb2YgbWFya3VwIHN0cmluZ3MgdG8gcmVuZGVyLlxuICAgKiBAcmV0dXJuIHthcnJheTxET01FbGVtZW50Pn0gTGlzdCBvZiByZW5kZXJlZCBub2Rlcy5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBkYW5nZXJvdXNseVJlbmRlck1hcmt1cDogZnVuY3Rpb24gKG1hcmt1cExpc3QpIHtcbiAgICAhRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2Rhbmdlcm91c2x5UmVuZGVyTWFya3VwKC4uLik6IENhbm5vdCByZW5kZXIgbWFya3VwIGluIGEgd29ya2VyICcgKyAndGhyZWFkLiBNYWtlIHN1cmUgYHdpbmRvd2AgYW5kIGBkb2N1bWVudGAgYXJlIGF2YWlsYWJsZSBnbG9iYWxseSAnICsgJ2JlZm9yZSByZXF1aXJpbmcgUmVhY3Qgd2hlbiB1bml0IHRlc3Rpbmcgb3IgdXNlICcgKyAnUmVhY3RET01TZXJ2ZXIucmVuZGVyVG9TdHJpbmcgZm9yIHNlcnZlciByZW5kZXJpbmcuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHZhciBub2RlTmFtZTtcbiAgICB2YXIgbWFya3VwQnlOb2RlTmFtZSA9IHt9O1xuICAgIC8vIEdyb3VwIG1hcmt1cCBieSBgbm9kZU5hbWVgIGlmIGEgd3JhcCBpcyBuZWNlc3NhcnksIGVsc2UgYnkgJyonLlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWFya3VwTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgIW1hcmt1cExpc3RbaV0gPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZGFuZ2Vyb3VzbHlSZW5kZXJNYXJrdXAoLi4uKTogTWlzc2luZyBtYXJrdXAuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgbm9kZU5hbWUgPSBnZXROb2RlTmFtZShtYXJrdXBMaXN0W2ldKTtcbiAgICAgIG5vZGVOYW1lID0gZ2V0TWFya3VwV3JhcChub2RlTmFtZSkgPyBub2RlTmFtZSA6ICcqJztcbiAgICAgIG1hcmt1cEJ5Tm9kZU5hbWVbbm9kZU5hbWVdID0gbWFya3VwQnlOb2RlTmFtZVtub2RlTmFtZV0gfHwgW107XG4gICAgICBtYXJrdXBCeU5vZGVOYW1lW25vZGVOYW1lXVtpXSA9IG1hcmt1cExpc3RbaV07XG4gICAgfVxuICAgIHZhciByZXN1bHRMaXN0ID0gW107XG4gICAgdmFyIHJlc3VsdExpc3RBc3NpZ25tZW50Q291bnQgPSAwO1xuICAgIGZvciAobm9kZU5hbWUgaW4gbWFya3VwQnlOb2RlTmFtZSkge1xuICAgICAgaWYgKCFtYXJrdXBCeU5vZGVOYW1lLmhhc093blByb3BlcnR5KG5vZGVOYW1lKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhciBtYXJrdXBMaXN0QnlOb2RlTmFtZSA9IG1hcmt1cEJ5Tm9kZU5hbWVbbm9kZU5hbWVdO1xuXG4gICAgICAvLyBUaGlzIGZvci1pbiBsb29wIHNraXBzIHRoZSBob2xlcyBvZiB0aGUgc3BhcnNlIGFycmF5LiBUaGUgb3JkZXIgb2ZcbiAgICAgIC8vIGl0ZXJhdGlvbiBzaG91bGQgZm9sbG93IHRoZSBvcmRlciBvZiBhc3NpZ25tZW50LCB3aGljaCBoYXBwZW5zIHRvIG1hdGNoXG4gICAgICAvLyBudW1lcmljYWwgaW5kZXggb3JkZXIsIGJ1dCB3ZSBkb24ndCByZWx5IG9uIHRoYXQuXG4gICAgICB2YXIgcmVzdWx0SW5kZXg7XG4gICAgICBmb3IgKHJlc3VsdEluZGV4IGluIG1hcmt1cExpc3RCeU5vZGVOYW1lKSB7XG4gICAgICAgIGlmIChtYXJrdXBMaXN0QnlOb2RlTmFtZS5oYXNPd25Qcm9wZXJ0eShyZXN1bHRJbmRleCkpIHtcbiAgICAgICAgICB2YXIgbWFya3VwID0gbWFya3VwTGlzdEJ5Tm9kZU5hbWVbcmVzdWx0SW5kZXhdO1xuXG4gICAgICAgICAgLy8gUHVzaCB0aGUgcmVxdWVzdGVkIG1hcmt1cCB3aXRoIGFuIGFkZGl0aW9uYWwgUkVTVUxUX0lOREVYX0FUVFJcbiAgICAgICAgICAvLyBhdHRyaWJ1dGUuICBJZiB0aGUgbWFya3VwIGRvZXMgbm90IHN0YXJ0IHdpdGggYSA8IGNoYXJhY3RlciwgaXRcbiAgICAgICAgICAvLyB3aWxsIGJlIGRpc2NhcmRlZCBiZWxvdyAod2l0aCBhbiBhcHByb3ByaWF0ZSBjb25zb2xlLmVycm9yKS5cbiAgICAgICAgICBtYXJrdXBMaXN0QnlOb2RlTmFtZVtyZXN1bHRJbmRleF0gPSBtYXJrdXAucmVwbGFjZShPUEVOX1RBR19OQU1FX0VYUCxcbiAgICAgICAgICAvLyBUaGlzIGluZGV4IHdpbGwgYmUgcGFyc2VkIGJhY2sgb3V0IGJlbG93LlxuICAgICAgICAgICckMSAnICsgUkVTVUxUX0lOREVYX0FUVFIgKyAnPVwiJyArIHJlc3VsdEluZGV4ICsgJ1wiICcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbmRlciBlYWNoIGdyb3VwIG9mIG1hcmt1cCB3aXRoIHNpbWlsYXIgd3JhcHBpbmcgYG5vZGVOYW1lYC5cbiAgICAgIHZhciByZW5kZXJOb2RlcyA9IGNyZWF0ZU5vZGVzRnJvbU1hcmt1cChtYXJrdXBMaXN0QnlOb2RlTmFtZS5qb2luKCcnKSwgZW1wdHlGdW5jdGlvbiAvLyBEbyBub3RoaW5nIHNwZWNpYWwgd2l0aCA8c2NyaXB0PiB0YWdzLlxuICAgICAgKTtcblxuICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByZW5kZXJOb2Rlcy5sZW5ndGg7ICsraikge1xuICAgICAgICB2YXIgcmVuZGVyTm9kZSA9IHJlbmRlck5vZGVzW2pdO1xuICAgICAgICBpZiAocmVuZGVyTm9kZS5oYXNBdHRyaWJ1dGUgJiYgcmVuZGVyTm9kZS5oYXNBdHRyaWJ1dGUoUkVTVUxUX0lOREVYX0FUVFIpKSB7XG5cbiAgICAgICAgICByZXN1bHRJbmRleCA9ICtyZW5kZXJOb2RlLmdldEF0dHJpYnV0ZShSRVNVTFRfSU5ERVhfQVRUUik7XG4gICAgICAgICAgcmVuZGVyTm9kZS5yZW1vdmVBdHRyaWJ1dGUoUkVTVUxUX0lOREVYX0FUVFIpO1xuXG4gICAgICAgICAgISFyZXN1bHRMaXN0Lmhhc093blByb3BlcnR5KHJlc3VsdEluZGV4KSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdEYW5nZXI6IEFzc2lnbmluZyB0byBhbiBhbHJlYWR5LW9jY3VwaWVkIHJlc3VsdCBpbmRleC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgICByZXN1bHRMaXN0W3Jlc3VsdEluZGV4XSA9IHJlbmRlck5vZGU7XG5cbiAgICAgICAgICAvLyBUaGlzIHNob3VsZCBtYXRjaCByZXN1bHRMaXN0Lmxlbmd0aCBhbmQgbWFya3VwTGlzdC5sZW5ndGggd2hlblxuICAgICAgICAgIC8vIHdlJ3JlIGRvbmUuXG4gICAgICAgICAgcmVzdWx0TGlzdEFzc2lnbm1lbnRDb3VudCArPSAxO1xuICAgICAgICB9IGVsc2UgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdEYW5nZXI6IERpc2NhcmRpbmcgdW5leHBlY3RlZCBub2RlOicsIHJlbmRlck5vZGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWx0aG91Z2ggcmVzdWx0TGlzdCB3YXMgcG9wdWxhdGVkIG91dCBvZiBvcmRlciwgaXQgc2hvdWxkIG5vdyBiZSBhIGRlbnNlXG4gICAgLy8gYXJyYXkuXG4gICAgIShyZXN1bHRMaXN0QXNzaWdubWVudENvdW50ID09PSByZXN1bHRMaXN0Lmxlbmd0aCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRGFuZ2VyOiBEaWQgbm90IGFzc2lnbiB0byBldmVyeSBpbmRleCBvZiByZXN1bHRMaXN0LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgICEocmVzdWx0TGlzdC5sZW5ndGggPT09IG1hcmt1cExpc3QubGVuZ3RoKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdEYW5nZXI6IEV4cGVjdGVkIG1hcmt1cCB0byByZW5kZXIgJXMgbm9kZXMsIGJ1dCByZW5kZXJlZCAlcy4nLCBtYXJrdXBMaXN0Lmxlbmd0aCwgcmVzdWx0TGlzdC5sZW5ndGgpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIHJldHVybiByZXN1bHRMaXN0O1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyBhIG5vZGUgd2l0aCBhIHN0cmluZyBvZiBtYXJrdXAgYXQgaXRzIGN1cnJlbnQgcG9zaXRpb24gd2l0aGluIGl0c1xuICAgKiBwYXJlbnQuIFRoZSBtYXJrdXAgbXVzdCByZW5kZXIgaW50byBhIHNpbmdsZSByb290IG5vZGUuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gb2xkQ2hpbGQgQ2hpbGQgbm9kZSB0byByZXBsYWNlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIE1hcmt1cCB0byByZW5kZXIgaW4gcGxhY2Ugb2YgdGhlIGNoaWxkIG5vZGUuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXA6IGZ1bmN0aW9uIChvbGRDaGlsZCwgbWFya3VwKSB7XG4gICAgIUV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdkYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cCguLi4pOiBDYW5ub3QgcmVuZGVyIG1hcmt1cCBpbiBhICcgKyAnd29ya2VyIHRocmVhZC4gTWFrZSBzdXJlIGB3aW5kb3dgIGFuZCBgZG9jdW1lbnRgIGFyZSBhdmFpbGFibGUgJyArICdnbG9iYWxseSBiZWZvcmUgcmVxdWlyaW5nIFJlYWN0IHdoZW4gdW5pdCB0ZXN0aW5nIG9yIHVzZSAnICsgJ1JlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RyaW5nKCkgZm9yIHNlcnZlciByZW5kZXJpbmcuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICFtYXJrdXAgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXAoLi4uKTogTWlzc2luZyBtYXJrdXAuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICEob2xkQ2hpbGQudGFnTmFtZS50b0xvd2VyQ2FzZSgpICE9PSAnaHRtbCcpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2Rhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwKC4uLik6IENhbm5vdCByZXBsYWNlIG1hcmt1cCBvZiB0aGUgJyArICc8aHRtbD4gbm9kZS4gVGhpcyBpcyBiZWNhdXNlIGJyb3dzZXIgcXVpcmtzIG1ha2UgdGhpcyB1bnJlbGlhYmxlICcgKyAnYW5kL29yIHNsb3cuIElmIHlvdSB3YW50IHRvIHJlbmRlciB0byB0aGUgcm9vdCB5b3UgbXVzdCB1c2UgJyArICdzZXJ2ZXIgcmVuZGVyaW5nLiBTZWUgUmVhY3RET01TZXJ2ZXIucmVuZGVyVG9TdHJpbmcoKS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgbmV3Q2hpbGQ7XG4gICAgaWYgKHR5cGVvZiBtYXJrdXAgPT09ICdzdHJpbmcnKSB7XG4gICAgICBuZXdDaGlsZCA9IGNyZWF0ZU5vZGVzRnJvbU1hcmt1cChtYXJrdXAsIGVtcHR5RnVuY3Rpb24pWzBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXdDaGlsZCA9IG1hcmt1cDtcbiAgICB9XG4gICAgb2xkQ2hpbGQucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobmV3Q2hpbGQsIG9sZENoaWxkKTtcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IERhbmdlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBrZXlPZiA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU9mJyk7XG5cbi8qKlxuICogTW9kdWxlIHRoYXQgaXMgaW5qZWN0YWJsZSBpbnRvIGBFdmVudFBsdWdpbkh1YmAsIHRoYXQgc3BlY2lmaWVzIGFcbiAqIGRldGVybWluaXN0aWMgb3JkZXJpbmcgb2YgYEV2ZW50UGx1Z2luYHMuIEEgY29udmVuaWVudCB3YXkgdG8gcmVhc29uIGFib3V0XG4gKiBwbHVnaW5zLCB3aXRob3V0IGhhdmluZyB0byBwYWNrYWdlIGV2ZXJ5IG9uZSBvZiB0aGVtLiBUaGlzIGlzIGJldHRlciB0aGFuXG4gKiBoYXZpbmcgcGx1Z2lucyBiZSBvcmRlcmVkIGluIHRoZSBzYW1lIG9yZGVyIHRoYXQgdGhleSBhcmUgaW5qZWN0ZWQgYmVjYXVzZVxuICogdGhhdCBvcmRlcmluZyB3b3VsZCBiZSBpbmZsdWVuY2VkIGJ5IHRoZSBwYWNrYWdpbmcgb3JkZXIuXG4gKiBgUmVzcG9uZGVyRXZlbnRQbHVnaW5gIG11c3Qgb2NjdXIgYmVmb3JlIGBTaW1wbGVFdmVudFBsdWdpbmAgc28gdGhhdFxuICogcHJldmVudGluZyBkZWZhdWx0IG9uIGV2ZW50cyBpcyBjb252ZW5pZW50IGluIGBTaW1wbGVFdmVudFBsdWdpbmAgaGFuZGxlcnMuXG4gKi9cbnZhciBEZWZhdWx0RXZlbnRQbHVnaW5PcmRlciA9IFtrZXlPZih7IFJlc3BvbmRlckV2ZW50UGx1Z2luOiBudWxsIH0pLCBrZXlPZih7IFNpbXBsZUV2ZW50UGx1Z2luOiBudWxsIH0pLCBrZXlPZih7IFRhcEV2ZW50UGx1Z2luOiBudWxsIH0pLCBrZXlPZih7IEVudGVyTGVhdmVFdmVudFBsdWdpbjogbnVsbCB9KSwga2V5T2YoeyBDaGFuZ2VFdmVudFBsdWdpbjogbnVsbCB9KSwga2V5T2YoeyBTZWxlY3RFdmVudFBsdWdpbjogbnVsbCB9KSwga2V5T2YoeyBCZWZvcmVJbnB1dEV2ZW50UGx1Z2luOiBudWxsIH0pXTtcblxubW9kdWxlLmV4cG9ydHMgPSBEZWZhdWx0RXZlbnRQbHVnaW5PcmRlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRW50ZXJMZWF2ZUV2ZW50UGx1Z2luXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIEV2ZW50UHJvcGFnYXRvcnMgPSByZXF1aXJlKCcuL0V2ZW50UHJvcGFnYXRvcnMnKTtcbnZhciBTeW50aGV0aWNNb3VzZUV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNNb3VzZUV2ZW50Jyk7XG5cbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xuXG52YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG52YXIgZ2V0Rmlyc3RSZWFjdERPTSA9IFJlYWN0TW91bnQuZ2V0Rmlyc3RSZWFjdERPTTtcblxudmFyIGV2ZW50VHlwZXMgPSB7XG4gIG1vdXNlRW50ZXI6IHtcbiAgICByZWdpc3RyYXRpb25OYW1lOiBrZXlPZih7IG9uTW91c2VFbnRlcjogbnVsbCB9KSxcbiAgICBkZXBlbmRlbmNpZXM6IFt0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3V0LCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3Zlcl1cbiAgfSxcbiAgbW91c2VMZWF2ZToge1xuICAgIHJlZ2lzdHJhdGlvbk5hbWU6IGtleU9mKHsgb25Nb3VzZUxlYXZlOiBudWxsIH0pLFxuICAgIGRlcGVuZGVuY2llczogW3RvcExldmVsVHlwZXMudG9wTW91c2VPdXQsIHRvcExldmVsVHlwZXMudG9wTW91c2VPdmVyXVxuICB9XG59O1xuXG52YXIgZXh0cmFjdGVkRXZlbnRzID0gW251bGwsIG51bGxdO1xuXG52YXIgRW50ZXJMZWF2ZUV2ZW50UGx1Z2luID0ge1xuXG4gIGV2ZW50VHlwZXM6IGV2ZW50VHlwZXMsXG5cbiAgLyoqXG4gICAqIEZvciBhbG1vc3QgZXZlcnkgaW50ZXJhY3Rpb24gd2UgY2FyZSBhYm91dCwgdGhlcmUgd2lsbCBiZSBib3RoIGEgdG9wLWxldmVsXG4gICAqIGBtb3VzZW92ZXJgIGFuZCBgbW91c2VvdXRgIGV2ZW50IHRoYXQgb2NjdXJzLiBPbmx5IHVzZSBgbW91c2VvdXRgIHNvIHRoYXRcbiAgICogd2UgZG8gbm90IGV4dHJhY3QgZHVwbGljYXRlIGV2ZW50cy4gSG93ZXZlciwgbW92aW5nIHRoZSBtb3VzZSBpbnRvIHRoZVxuICAgKiBicm93c2VyIGZyb20gb3V0c2lkZSB3aWxsIG5vdCBmaXJlIGEgYG1vdXNlb3V0YCBldmVudC4gSW4gdGhpcyBjYXNlLCB3ZSB1c2VcbiAgICogdGhlIGBtb3VzZW92ZXJgIHRvcC1sZXZlbCBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuICAgKiBAcGFyYW0ge0RPTUV2ZW50VGFyZ2V0fSB0b3BMZXZlbFRhcmdldCBUaGUgbGlzdGVuaW5nIGNvbXBvbmVudCByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAgICogQHJldHVybiB7Kn0gQW4gYWNjdW11bGF0aW9uIG9mIHN5bnRoZXRpYyBldmVudHMuXG4gICAqIEBzZWUge0V2ZW50UGx1Z2luSHViLmV4dHJhY3RFdmVudHN9XG4gICAqL1xuICBleHRyYWN0RXZlbnRzOiBmdW5jdGlvbiAodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gICAgaWYgKHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU92ZXIgJiYgKG5hdGl2ZUV2ZW50LnJlbGF0ZWRUYXJnZXQgfHwgbmF0aXZlRXZlbnQuZnJvbUVsZW1lbnQpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRvcExldmVsVHlwZSAhPT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU91dCAmJiB0b3BMZXZlbFR5cGUgIT09IHRvcExldmVsVHlwZXMudG9wTW91c2VPdmVyKSB7XG4gICAgICAvLyBNdXN0IG5vdCBiZSBhIG1vdXNlIGluIG9yIG1vdXNlIG91dCAtIGlnbm9yaW5nLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIHdpbjtcbiAgICBpZiAodG9wTGV2ZWxUYXJnZXQud2luZG93ID09PSB0b3BMZXZlbFRhcmdldCkge1xuICAgICAgLy8gYHRvcExldmVsVGFyZ2V0YCBpcyBwcm9iYWJseSBhIHdpbmRvdyBvYmplY3QuXG4gICAgICB3aW4gPSB0b3BMZXZlbFRhcmdldDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVE9ETzogRmlndXJlIG91dCB3aHkgYG93bmVyRG9jdW1lbnRgIGlzIHNvbWV0aW1lcyB1bmRlZmluZWQgaW4gSUU4LlxuICAgICAgdmFyIGRvYyA9IHRvcExldmVsVGFyZ2V0Lm93bmVyRG9jdW1lbnQ7XG4gICAgICBpZiAoZG9jKSB7XG4gICAgICAgIHdpbiA9IGRvYy5kZWZhdWx0VmlldyB8fCBkb2MucGFyZW50V2luZG93O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2luID0gd2luZG93O1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBmcm9tO1xuICAgIHZhciB0bztcbiAgICB2YXIgZnJvbUlEID0gJyc7XG4gICAgdmFyIHRvSUQgPSAnJztcbiAgICBpZiAodG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlT3V0KSB7XG4gICAgICBmcm9tID0gdG9wTGV2ZWxUYXJnZXQ7XG4gICAgICBmcm9tSUQgPSB0b3BMZXZlbFRhcmdldElEO1xuICAgICAgdG8gPSBnZXRGaXJzdFJlYWN0RE9NKG5hdGl2ZUV2ZW50LnJlbGF0ZWRUYXJnZXQgfHwgbmF0aXZlRXZlbnQudG9FbGVtZW50KTtcbiAgICAgIGlmICh0bykge1xuICAgICAgICB0b0lEID0gUmVhY3RNb3VudC5nZXRJRCh0byk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0byA9IHdpbjtcbiAgICAgIH1cbiAgICAgIHRvID0gdG8gfHwgd2luO1xuICAgIH0gZWxzZSB7XG4gICAgICBmcm9tID0gd2luO1xuICAgICAgdG8gPSB0b3BMZXZlbFRhcmdldDtcbiAgICAgIHRvSUQgPSB0b3BMZXZlbFRhcmdldElEO1xuICAgIH1cblxuICAgIGlmIChmcm9tID09PSB0bykge1xuICAgICAgLy8gTm90aGluZyBwZXJ0YWlucyB0byBvdXIgbWFuYWdlZCBjb21wb25lbnRzLlxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGxlYXZlID0gU3ludGhldGljTW91c2VFdmVudC5nZXRQb29sZWQoZXZlbnRUeXBlcy5tb3VzZUxlYXZlLCBmcm9tSUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgbGVhdmUudHlwZSA9ICdtb3VzZWxlYXZlJztcbiAgICBsZWF2ZS50YXJnZXQgPSBmcm9tO1xuICAgIGxlYXZlLnJlbGF0ZWRUYXJnZXQgPSB0bztcblxuICAgIHZhciBlbnRlciA9IFN5bnRoZXRpY01vdXNlRXZlbnQuZ2V0UG9vbGVkKGV2ZW50VHlwZXMubW91c2VFbnRlciwgdG9JRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbiAgICBlbnRlci50eXBlID0gJ21vdXNlZW50ZXInO1xuICAgIGVudGVyLnRhcmdldCA9IHRvO1xuICAgIGVudGVyLnJlbGF0ZWRUYXJnZXQgPSBmcm9tO1xuXG4gICAgRXZlbnRQcm9wYWdhdG9ycy5hY2N1bXVsYXRlRW50ZXJMZWF2ZURpc3BhdGNoZXMobGVhdmUsIGVudGVyLCBmcm9tSUQsIHRvSUQpO1xuXG4gICAgZXh0cmFjdGVkRXZlbnRzWzBdID0gbGVhdmU7XG4gICAgZXh0cmFjdGVkRXZlbnRzWzFdID0gZW50ZXI7XG5cbiAgICByZXR1cm4gZXh0cmFjdGVkRXZlbnRzO1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRW50ZXJMZWF2ZUV2ZW50UGx1Z2luOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBFdmVudENvbnN0YW50c1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGtleU1pcnJvciA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU1pcnJvcicpO1xuXG52YXIgUHJvcGFnYXRpb25QaGFzZXMgPSBrZXlNaXJyb3IoeyBidWJibGVkOiBudWxsLCBjYXB0dXJlZDogbnVsbCB9KTtcblxuLyoqXG4gKiBUeXBlcyBvZiByYXcgc2lnbmFscyBmcm9tIHRoZSBicm93c2VyIGNhdWdodCBhdCB0aGUgdG9wIGxldmVsLlxuICovXG52YXIgdG9wTGV2ZWxUeXBlcyA9IGtleU1pcnJvcih7XG4gIHRvcEFib3J0OiBudWxsLFxuICB0b3BCbHVyOiBudWxsLFxuICB0b3BDYW5QbGF5OiBudWxsLFxuICB0b3BDYW5QbGF5VGhyb3VnaDogbnVsbCxcbiAgdG9wQ2hhbmdlOiBudWxsLFxuICB0b3BDbGljazogbnVsbCxcbiAgdG9wQ29tcG9zaXRpb25FbmQ6IG51bGwsXG4gIHRvcENvbXBvc2l0aW9uU3RhcnQ6IG51bGwsXG4gIHRvcENvbXBvc2l0aW9uVXBkYXRlOiBudWxsLFxuICB0b3BDb250ZXh0TWVudTogbnVsbCxcbiAgdG9wQ29weTogbnVsbCxcbiAgdG9wQ3V0OiBudWxsLFxuICB0b3BEb3VibGVDbGljazogbnVsbCxcbiAgdG9wRHJhZzogbnVsbCxcbiAgdG9wRHJhZ0VuZDogbnVsbCxcbiAgdG9wRHJhZ0VudGVyOiBudWxsLFxuICB0b3BEcmFnRXhpdDogbnVsbCxcbiAgdG9wRHJhZ0xlYXZlOiBudWxsLFxuICB0b3BEcmFnT3ZlcjogbnVsbCxcbiAgdG9wRHJhZ1N0YXJ0OiBudWxsLFxuICB0b3BEcm9wOiBudWxsLFxuICB0b3BEdXJhdGlvbkNoYW5nZTogbnVsbCxcbiAgdG9wRW1wdGllZDogbnVsbCxcbiAgdG9wRW5jcnlwdGVkOiBudWxsLFxuICB0b3BFbmRlZDogbnVsbCxcbiAgdG9wRXJyb3I6IG51bGwsXG4gIHRvcEZvY3VzOiBudWxsLFxuICB0b3BJbnB1dDogbnVsbCxcbiAgdG9wS2V5RG93bjogbnVsbCxcbiAgdG9wS2V5UHJlc3M6IG51bGwsXG4gIHRvcEtleVVwOiBudWxsLFxuICB0b3BMb2FkOiBudWxsLFxuICB0b3BMb2FkZWREYXRhOiBudWxsLFxuICB0b3BMb2FkZWRNZXRhZGF0YTogbnVsbCxcbiAgdG9wTG9hZFN0YXJ0OiBudWxsLFxuICB0b3BNb3VzZURvd246IG51bGwsXG4gIHRvcE1vdXNlTW92ZTogbnVsbCxcbiAgdG9wTW91c2VPdXQ6IG51bGwsXG4gIHRvcE1vdXNlT3ZlcjogbnVsbCxcbiAgdG9wTW91c2VVcDogbnVsbCxcbiAgdG9wUGFzdGU6IG51bGwsXG4gIHRvcFBhdXNlOiBudWxsLFxuICB0b3BQbGF5OiBudWxsLFxuICB0b3BQbGF5aW5nOiBudWxsLFxuICB0b3BQcm9ncmVzczogbnVsbCxcbiAgdG9wUmF0ZUNoYW5nZTogbnVsbCxcbiAgdG9wUmVzZXQ6IG51bGwsXG4gIHRvcFNjcm9sbDogbnVsbCxcbiAgdG9wU2Vla2VkOiBudWxsLFxuICB0b3BTZWVraW5nOiBudWxsLFxuICB0b3BTZWxlY3Rpb25DaGFuZ2U6IG51bGwsXG4gIHRvcFN0YWxsZWQ6IG51bGwsXG4gIHRvcFN1Ym1pdDogbnVsbCxcbiAgdG9wU3VzcGVuZDogbnVsbCxcbiAgdG9wVGV4dElucHV0OiBudWxsLFxuICB0b3BUaW1lVXBkYXRlOiBudWxsLFxuICB0b3BUb3VjaENhbmNlbDogbnVsbCxcbiAgdG9wVG91Y2hFbmQ6IG51bGwsXG4gIHRvcFRvdWNoTW92ZTogbnVsbCxcbiAgdG9wVG91Y2hTdGFydDogbnVsbCxcbiAgdG9wVm9sdW1lQ2hhbmdlOiBudWxsLFxuICB0b3BXYWl0aW5nOiBudWxsLFxuICB0b3BXaGVlbDogbnVsbFxufSk7XG5cbnZhciBFdmVudENvbnN0YW50cyA9IHtcbiAgdG9wTGV2ZWxUeXBlczogdG9wTGV2ZWxUeXBlcyxcbiAgUHJvcGFnYXRpb25QaGFzZXM6IFByb3BhZ2F0aW9uUGhhc2VzXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEV2ZW50Q29uc3RhbnRzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBFdmVudFBsdWdpbkh1YlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50UGx1Z2luUmVnaXN0cnkgPSByZXF1aXJlKCcuL0V2ZW50UGx1Z2luUmVnaXN0cnknKTtcbnZhciBFdmVudFBsdWdpblV0aWxzID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpblV0aWxzJyk7XG52YXIgUmVhY3RFcnJvclV0aWxzID0gcmVxdWlyZSgnLi9SZWFjdEVycm9yVXRpbHMnKTtcblxudmFyIGFjY3VtdWxhdGVJbnRvID0gcmVxdWlyZSgnLi9hY2N1bXVsYXRlSW50bycpO1xudmFyIGZvckVhY2hBY2N1bXVsYXRlZCA9IHJlcXVpcmUoJy4vZm9yRWFjaEFjY3VtdWxhdGVkJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuLyoqXG4gKiBJbnRlcm5hbCBzdG9yZSBmb3IgZXZlbnQgbGlzdGVuZXJzXG4gKi9cbnZhciBsaXN0ZW5lckJhbmsgPSB7fTtcblxuLyoqXG4gKiBJbnRlcm5hbCBxdWV1ZSBvZiBldmVudHMgdGhhdCBoYXZlIGFjY3VtdWxhdGVkIHRoZWlyIGRpc3BhdGNoZXMgYW5kIGFyZVxuICogd2FpdGluZyB0byBoYXZlIHRoZWlyIGRpc3BhdGNoZXMgZXhlY3V0ZWQuXG4gKi9cbnZhciBldmVudFF1ZXVlID0gbnVsbDtcblxuLyoqXG4gKiBEaXNwYXRjaGVzIGFuIGV2ZW50IGFuZCByZWxlYXNlcyBpdCBiYWNrIGludG8gdGhlIHBvb2wsIHVubGVzcyBwZXJzaXN0ZW50LlxuICpcbiAqIEBwYXJhbSB7P29iamVjdH0gZXZlbnQgU3ludGhldGljIGV2ZW50IHRvIGJlIGRpc3BhdGNoZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNpbXVsYXRlZCBJZiB0aGUgZXZlbnQgaXMgc2ltdWxhdGVkIChjaGFuZ2VzIGV4biBiZWhhdmlvcilcbiAqIEBwcml2YXRlXG4gKi9cbnZhciBleGVjdXRlRGlzcGF0Y2hlc0FuZFJlbGVhc2UgPSBmdW5jdGlvbiAoZXZlbnQsIHNpbXVsYXRlZCkge1xuICBpZiAoZXZlbnQpIHtcbiAgICBFdmVudFBsdWdpblV0aWxzLmV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlcihldmVudCwgc2ltdWxhdGVkKTtcblxuICAgIGlmICghZXZlbnQuaXNQZXJzaXN0ZW50KCkpIHtcbiAgICAgIGV2ZW50LmNvbnN0cnVjdG9yLnJlbGVhc2UoZXZlbnQpO1xuICAgIH1cbiAgfVxufTtcbnZhciBleGVjdXRlRGlzcGF0Y2hlc0FuZFJlbGVhc2VTaW11bGF0ZWQgPSBmdW5jdGlvbiAoZSkge1xuICByZXR1cm4gZXhlY3V0ZURpc3BhdGNoZXNBbmRSZWxlYXNlKGUsIHRydWUpO1xufTtcbnZhciBleGVjdXRlRGlzcGF0Y2hlc0FuZFJlbGVhc2VUb3BMZXZlbCA9IGZ1bmN0aW9uIChlKSB7XG4gIHJldHVybiBleGVjdXRlRGlzcGF0Y2hlc0FuZFJlbGVhc2UoZSwgZmFsc2UpO1xufTtcblxuLyoqXG4gKiAtIGBJbnN0YW5jZUhhbmRsZWA6IFtyZXF1aXJlZF0gTW9kdWxlIHRoYXQgcGVyZm9ybXMgbG9naWNhbCB0cmF2ZXJzYWxzIG9mIERPTVxuICogICBoaWVyYXJjaHkgZ2l2ZW4gaWRzIG9mIHRoZSBsb2dpY2FsIERPTSBlbGVtZW50cyBpbnZvbHZlZC5cbiAqL1xudmFyIEluc3RhbmNlSGFuZGxlID0gbnVsbDtcblxuZnVuY3Rpb24gdmFsaWRhdGVJbnN0YW5jZUhhbmRsZSgpIHtcbiAgdmFyIHZhbGlkID0gSW5zdGFuY2VIYW5kbGUgJiYgSW5zdGFuY2VIYW5kbGUudHJhdmVyc2VUd29QaGFzZSAmJiBJbnN0YW5jZUhhbmRsZS50cmF2ZXJzZUVudGVyTGVhdmU7XG4gIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHZhbGlkLCAnSW5zdGFuY2VIYW5kbGUgbm90IGluamVjdGVkIGJlZm9yZSB1c2UhJykgOiB1bmRlZmluZWQ7XG59XG5cbi8qKlxuICogVGhpcyBpcyBhIHVuaWZpZWQgaW50ZXJmYWNlIGZvciBldmVudCBwbHVnaW5zIHRvIGJlIGluc3RhbGxlZCBhbmQgY29uZmlndXJlZC5cbiAqXG4gKiBFdmVudCBwbHVnaW5zIGNhbiBpbXBsZW1lbnQgdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxuICpcbiAqICAgYGV4dHJhY3RFdmVudHNgIHtmdW5jdGlvbihzdHJpbmcsIERPTUV2ZW50VGFyZ2V0LCBzdHJpbmcsIG9iamVjdCk6ICp9XG4gKiAgICAgUmVxdWlyZWQuIFdoZW4gYSB0b3AtbGV2ZWwgZXZlbnQgaXMgZmlyZWQsIHRoaXMgbWV0aG9kIGlzIGV4cGVjdGVkIHRvXG4gKiAgICAgZXh0cmFjdCBzeW50aGV0aWMgZXZlbnRzIHRoYXQgd2lsbCBpbiB0dXJuIGJlIHF1ZXVlZCBhbmQgZGlzcGF0Y2hlZC5cbiAqXG4gKiAgIGBldmVudFR5cGVzYCB7b2JqZWN0fVxuICogICAgIE9wdGlvbmFsLCBwbHVnaW5zIHRoYXQgZmlyZSBldmVudHMgbXVzdCBwdWJsaXNoIGEgbWFwcGluZyBvZiByZWdpc3RyYXRpb25cbiAqICAgICBuYW1lcyB0aGF0IGFyZSB1c2VkIHRvIHJlZ2lzdGVyIGxpc3RlbmVycy4gVmFsdWVzIG9mIHRoaXMgbWFwcGluZyBtdXN0XG4gKiAgICAgYmUgb2JqZWN0cyB0aGF0IGNvbnRhaW4gYHJlZ2lzdHJhdGlvbk5hbWVgIG9yIGBwaGFzZWRSZWdpc3RyYXRpb25OYW1lc2AuXG4gKlxuICogICBgZXhlY3V0ZURpc3BhdGNoYCB7ZnVuY3Rpb24ob2JqZWN0LCBmdW5jdGlvbiwgc3RyaW5nKX1cbiAqICAgICBPcHRpb25hbCwgYWxsb3dzIHBsdWdpbnMgdG8gb3ZlcnJpZGUgaG93IGFuIGV2ZW50IGdldHMgZGlzcGF0Y2hlZC4gQnlcbiAqICAgICBkZWZhdWx0LCB0aGUgbGlzdGVuZXIgaXMgc2ltcGx5IGludm9rZWQuXG4gKlxuICogRWFjaCBwbHVnaW4gdGhhdCBpcyBpbmplY3RlZCBpbnRvIGBFdmVudHNQbHVnaW5IdWJgIGlzIGltbWVkaWF0ZWx5IG9wZXJhYmxlLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xudmFyIEV2ZW50UGx1Z2luSHViID0ge1xuXG4gIC8qKlxuICAgKiBNZXRob2RzIGZvciBpbmplY3RpbmcgZGVwZW5kZW5jaWVzLlxuICAgKi9cbiAgaW5qZWN0aW9uOiB7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gSW5qZWN0ZWRNb3VudFxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBpbmplY3RNb3VudDogRXZlbnRQbHVnaW5VdGlscy5pbmplY3Rpb24uaW5qZWN0TW91bnQsXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gSW5qZWN0ZWRJbnN0YW5jZUhhbmRsZVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBpbmplY3RJbnN0YW5jZUhhbmRsZTogZnVuY3Rpb24gKEluamVjdGVkSW5zdGFuY2VIYW5kbGUpIHtcbiAgICAgIEluc3RhbmNlSGFuZGxlID0gSW5qZWN0ZWRJbnN0YW5jZUhhbmRsZTtcbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHZhbGlkYXRlSW5zdGFuY2VIYW5kbGUoKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgZ2V0SW5zdGFuY2VIYW5kbGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHZhbGlkYXRlSW5zdGFuY2VIYW5kbGUoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBJbnN0YW5jZUhhbmRsZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHthcnJheX0gSW5qZWN0ZWRFdmVudFBsdWdpbk9yZGVyXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIGluamVjdEV2ZW50UGx1Z2luT3JkZXI6IEV2ZW50UGx1Z2luUmVnaXN0cnkuaW5qZWN0RXZlbnRQbHVnaW5PcmRlcixcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBpbmplY3RlZE5hbWVzVG9QbHVnaW5zIE1hcCBmcm9tIG5hbWVzIHRvIHBsdWdpbiBtb2R1bGVzLlxuICAgICAqL1xuICAgIGluamVjdEV2ZW50UGx1Z2luc0J5TmFtZTogRXZlbnRQbHVnaW5SZWdpc3RyeS5pbmplY3RFdmVudFBsdWdpbnNCeU5hbWVcblxuICB9LFxuXG4gIGV2ZW50TmFtZURpc3BhdGNoQ29uZmlnczogRXZlbnRQbHVnaW5SZWdpc3RyeS5ldmVudE5hbWVEaXNwYXRjaENvbmZpZ3MsXG5cbiAgcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXM6IEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMsXG5cbiAgLyoqXG4gICAqIFN0b3JlcyBgbGlzdGVuZXJgIGF0IGBsaXN0ZW5lckJhbmtbcmVnaXN0cmF0aW9uTmFtZV1baWRdYC4gSXMgaWRlbXBvdGVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIHRoZSBET00gZWxlbWVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgTmFtZSBvZiBsaXN0ZW5lciAoZS5nLiBgb25DbGlja2ApLlxuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gbGlzdGVuZXIgVGhlIGNhbGxiYWNrIHRvIHN0b3JlLlxuICAgKi9cbiAgcHV0TGlzdGVuZXI6IGZ1bmN0aW9uIChpZCwgcmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXIpIHtcbiAgICAhKHR5cGVvZiBsaXN0ZW5lciA9PT0gJ2Z1bmN0aW9uJykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRXhwZWN0ZWQgJXMgbGlzdGVuZXIgdG8gYmUgYSBmdW5jdGlvbiwgaW5zdGVhZCBnb3QgdHlwZSAlcycsIHJlZ2lzdHJhdGlvbk5hbWUsIHR5cGVvZiBsaXN0ZW5lcikgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgdmFyIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lID0gbGlzdGVuZXJCYW5rW3JlZ2lzdHJhdGlvbk5hbWVdIHx8IChsaXN0ZW5lckJhbmtbcmVnaXN0cmF0aW9uTmFtZV0gPSB7fSk7XG4gICAgYmFua0ZvclJlZ2lzdHJhdGlvbk5hbWVbaWRdID0gbGlzdGVuZXI7XG5cbiAgICB2YXIgUGx1Z2luTW9kdWxlID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5yZWdpc3RyYXRpb25OYW1lTW9kdWxlc1tyZWdpc3RyYXRpb25OYW1lXTtcbiAgICBpZiAoUGx1Z2luTW9kdWxlICYmIFBsdWdpbk1vZHVsZS5kaWRQdXRMaXN0ZW5lcikge1xuICAgICAgUGx1Z2luTW9kdWxlLmRpZFB1dExpc3RlbmVyKGlkLCByZWdpc3RyYXRpb25OYW1lLCBsaXN0ZW5lcik7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgSUQgb2YgdGhlIERPTSBlbGVtZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVnaXN0cmF0aW9uTmFtZSBOYW1lIG9mIGxpc3RlbmVyIChlLmcuIGBvbkNsaWNrYCkuXG4gICAqIEByZXR1cm4gez9mdW5jdGlvbn0gVGhlIHN0b3JlZCBjYWxsYmFjay5cbiAgICovXG4gIGdldExpc3RlbmVyOiBmdW5jdGlvbiAoaWQsIHJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICB2YXIgYmFua0ZvclJlZ2lzdHJhdGlvbk5hbWUgPSBsaXN0ZW5lckJhbmtbcmVnaXN0cmF0aW9uTmFtZV07XG4gICAgcmV0dXJuIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lICYmIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lW2lkXTtcbiAgfSxcblxuICAvKipcbiAgICogRGVsZXRlcyBhIGxpc3RlbmVyIGZyb20gdGhlIHJlZ2lzdHJhdGlvbiBiYW5rLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgSUQgb2YgdGhlIERPTSBlbGVtZW50LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcmVnaXN0cmF0aW9uTmFtZSBOYW1lIG9mIGxpc3RlbmVyIChlLmcuIGBvbkNsaWNrYCkuXG4gICAqL1xuICBkZWxldGVMaXN0ZW5lcjogZnVuY3Rpb24gKGlkLCByZWdpc3RyYXRpb25OYW1lKSB7XG4gICAgdmFyIFBsdWdpbk1vZHVsZSA9IEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV07XG4gICAgaWYgKFBsdWdpbk1vZHVsZSAmJiBQbHVnaW5Nb2R1bGUud2lsbERlbGV0ZUxpc3RlbmVyKSB7XG4gICAgICBQbHVnaW5Nb2R1bGUud2lsbERlbGV0ZUxpc3RlbmVyKGlkLCByZWdpc3RyYXRpb25OYW1lKTtcbiAgICB9XG5cbiAgICB2YXIgYmFua0ZvclJlZ2lzdHJhdGlvbk5hbWUgPSBsaXN0ZW5lckJhbmtbcmVnaXN0cmF0aW9uTmFtZV07XG4gICAgLy8gVE9ETzogVGhpcyBzaG91bGQgbmV2ZXIgYmUgbnVsbCAtLSB3aGVuIGlzIGl0P1xuICAgIGlmIChiYW5rRm9yUmVnaXN0cmF0aW9uTmFtZSkge1xuICAgICAgZGVsZXRlIGJhbmtGb3JSZWdpc3RyYXRpb25OYW1lW2lkXTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIERlbGV0ZXMgYWxsIGxpc3RlbmVycyBmb3IgdGhlIERPTSBlbGVtZW50IHdpdGggdGhlIHN1cHBsaWVkIElELlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gaWQgSUQgb2YgdGhlIERPTSBlbGVtZW50LlxuICAgKi9cbiAgZGVsZXRlQWxsTGlzdGVuZXJzOiBmdW5jdGlvbiAoaWQpIHtcbiAgICBmb3IgKHZhciByZWdpc3RyYXRpb25OYW1lIGluIGxpc3RlbmVyQmFuaykge1xuICAgICAgaWYgKCFsaXN0ZW5lckJhbmtbcmVnaXN0cmF0aW9uTmFtZV1baWRdKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICB2YXIgUGx1Z2luTW9kdWxlID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5yZWdpc3RyYXRpb25OYW1lTW9kdWxlc1tyZWdpc3RyYXRpb25OYW1lXTtcbiAgICAgIGlmIChQbHVnaW5Nb2R1bGUgJiYgUGx1Z2luTW9kdWxlLndpbGxEZWxldGVMaXN0ZW5lcikge1xuICAgICAgICBQbHVnaW5Nb2R1bGUud2lsbERlbGV0ZUxpc3RlbmVyKGlkLCByZWdpc3RyYXRpb25OYW1lKTtcbiAgICAgIH1cblxuICAgICAgZGVsZXRlIGxpc3RlbmVyQmFua1tyZWdpc3RyYXRpb25OYW1lXVtpZF07XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBBbGxvd3MgcmVnaXN0ZXJlZCBwbHVnaW5zIGFuIG9wcG9ydHVuaXR5IHRvIGV4dHJhY3QgZXZlbnRzIGZyb20gdG9wLWxldmVsXG4gICAqIG5hdGl2ZSBicm93c2VyIGV2ZW50cy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuICAgKiBAcGFyYW0ge0RPTUV2ZW50VGFyZ2V0fSB0b3BMZXZlbFRhcmdldCBUaGUgbGlzdGVuaW5nIGNvbXBvbmVudCByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAgICogQHJldHVybiB7Kn0gQW4gYWNjdW11bGF0aW9uIG9mIHN5bnRoZXRpYyBldmVudHMuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZXh0cmFjdEV2ZW50czogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICAgIHZhciBldmVudHM7XG4gICAgdmFyIHBsdWdpbnMgPSBFdmVudFBsdWdpblJlZ2lzdHJ5LnBsdWdpbnM7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwbHVnaW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAvLyBOb3QgZXZlcnkgcGx1Z2luIGluIHRoZSBvcmRlcmluZyBtYXkgYmUgbG9hZGVkIGF0IHJ1bnRpbWUuXG4gICAgICB2YXIgcG9zc2libGVQbHVnaW4gPSBwbHVnaW5zW2ldO1xuICAgICAgaWYgKHBvc3NpYmxlUGx1Z2luKSB7XG4gICAgICAgIHZhciBleHRyYWN0ZWRFdmVudHMgPSBwb3NzaWJsZVBsdWdpbi5leHRyYWN0RXZlbnRzKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgICAgIGlmIChleHRyYWN0ZWRFdmVudHMpIHtcbiAgICAgICAgICBldmVudHMgPSBhY2N1bXVsYXRlSW50byhldmVudHMsIGV4dHJhY3RlZEV2ZW50cyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGV2ZW50cztcbiAgfSxcblxuICAvKipcbiAgICogRW5xdWV1ZXMgYSBzeW50aGV0aWMgZXZlbnQgdGhhdCBzaG91bGQgYmUgZGlzcGF0Y2hlZCB3aGVuXG4gICAqIGBwcm9jZXNzRXZlbnRRdWV1ZWAgaXMgaW52b2tlZC5cbiAgICpcbiAgICogQHBhcmFtIHsqfSBldmVudHMgQW4gYWNjdW11bGF0aW9uIG9mIHN5bnRoZXRpYyBldmVudHMuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZUV2ZW50czogZnVuY3Rpb24gKGV2ZW50cykge1xuICAgIGlmIChldmVudHMpIHtcbiAgICAgIGV2ZW50UXVldWUgPSBhY2N1bXVsYXRlSW50byhldmVudFF1ZXVlLCBldmVudHMpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRGlzcGF0Y2hlcyBhbGwgc3ludGhldGljIGV2ZW50cyBvbiB0aGUgZXZlbnQgcXVldWUuXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcHJvY2Vzc0V2ZW50UXVldWU6IGZ1bmN0aW9uIChzaW11bGF0ZWQpIHtcbiAgICAvLyBTZXQgYGV2ZW50UXVldWVgIHRvIG51bGwgYmVmb3JlIHByb2Nlc3NpbmcgaXQgc28gdGhhdCB3ZSBjYW4gdGVsbCBpZiBtb3JlXG4gICAgLy8gZXZlbnRzIGdldCBlbnF1ZXVlZCB3aGlsZSBwcm9jZXNzaW5nLlxuICAgIHZhciBwcm9jZXNzaW5nRXZlbnRRdWV1ZSA9IGV2ZW50UXVldWU7XG4gICAgZXZlbnRRdWV1ZSA9IG51bGw7XG4gICAgaWYgKHNpbXVsYXRlZCkge1xuICAgICAgZm9yRWFjaEFjY3VtdWxhdGVkKHByb2Nlc3NpbmdFdmVudFF1ZXVlLCBleGVjdXRlRGlzcGF0Y2hlc0FuZFJlbGVhc2VTaW11bGF0ZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBmb3JFYWNoQWNjdW11bGF0ZWQocHJvY2Vzc2luZ0V2ZW50UXVldWUsIGV4ZWN1dGVEaXNwYXRjaGVzQW5kUmVsZWFzZVRvcExldmVsKTtcbiAgICB9XG4gICAgISFldmVudFF1ZXVlID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3Byb2Nlc3NFdmVudFF1ZXVlKCk6IEFkZGl0aW9uYWwgZXZlbnRzIHdlcmUgZW5xdWV1ZWQgd2hpbGUgcHJvY2Vzc2luZyAnICsgJ2FuIGV2ZW50IHF1ZXVlLiBTdXBwb3J0IGZvciB0aGlzIGhhcyBub3QgeWV0IGJlZW4gaW1wbGVtZW50ZWQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIC8vIFRoaXMgd291bGQgYmUgYSBnb29kIHRpbWUgdG8gcmV0aHJvdyBpZiBhbnkgb2YgdGhlIGV2ZW50IGhhbmRsZXJzIHRocmV3LlxuICAgIFJlYWN0RXJyb3JVdGlscy5yZXRocm93Q2F1Z2h0RXJyb3IoKTtcbiAgfSxcblxuICAvKipcbiAgICogVGhlc2UgYXJlIG5lZWRlZCBmb3IgdGVzdHMgb25seS4gRG8gbm90IHVzZSFcbiAgICovXG4gIF9fcHVyZ2U6IGZ1bmN0aW9uICgpIHtcbiAgICBsaXN0ZW5lckJhbmsgPSB7fTtcbiAgfSxcblxuICBfX2dldExpc3RlbmVyQmFuazogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBsaXN0ZW5lckJhbms7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudFBsdWdpbkh1YjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgRXZlbnRQbHVnaW5SZWdpc3RyeVxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBJbmplY3RhYmxlIG9yZGVyaW5nIG9mIGV2ZW50IHBsdWdpbnMuXG4gKi9cbnZhciBFdmVudFBsdWdpbk9yZGVyID0gbnVsbDtcblxuLyoqXG4gKiBJbmplY3RhYmxlIG1hcHBpbmcgZnJvbSBuYW1lcyB0byBldmVudCBwbHVnaW4gbW9kdWxlcy5cbiAqL1xudmFyIG5hbWVzVG9QbHVnaW5zID0ge307XG5cbi8qKlxuICogUmVjb21wdXRlcyB0aGUgcGx1Z2luIGxpc3QgdXNpbmcgdGhlIGluamVjdGVkIHBsdWdpbnMgYW5kIHBsdWdpbiBvcmRlcmluZy5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiByZWNvbXB1dGVQbHVnaW5PcmRlcmluZygpIHtcbiAgaWYgKCFFdmVudFBsdWdpbk9yZGVyKSB7XG4gICAgLy8gV2FpdCB1bnRpbCBhbiBgRXZlbnRQbHVnaW5PcmRlcmAgaXMgaW5qZWN0ZWQuXG4gICAgcmV0dXJuO1xuICB9XG4gIGZvciAodmFyIHBsdWdpbk5hbWUgaW4gbmFtZXNUb1BsdWdpbnMpIHtcbiAgICB2YXIgUGx1Z2luTW9kdWxlID0gbmFtZXNUb1BsdWdpbnNbcGx1Z2luTmFtZV07XG4gICAgdmFyIHBsdWdpbkluZGV4ID0gRXZlbnRQbHVnaW5PcmRlci5pbmRleE9mKHBsdWdpbk5hbWUpO1xuICAgICEocGx1Z2luSW5kZXggPiAtMSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRXZlbnRQbHVnaW5SZWdpc3RyeTogQ2Fubm90IGluamVjdCBldmVudCBwbHVnaW5zIHRoYXQgZG8gbm90IGV4aXN0IGluICcgKyAndGhlIHBsdWdpbiBvcmRlcmluZywgYCVzYC4nLCBwbHVnaW5OYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgaWYgKEV2ZW50UGx1Z2luUmVnaXN0cnkucGx1Z2luc1twbHVnaW5JbmRleF0pIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICAhUGx1Z2luTW9kdWxlLmV4dHJhY3RFdmVudHMgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRXZlbnRQbHVnaW5SZWdpc3RyeTogRXZlbnQgcGx1Z2lucyBtdXN0IGltcGxlbWVudCBhbiBgZXh0cmFjdEV2ZW50c2AgJyArICdtZXRob2QsIGJ1dCBgJXNgIGRvZXMgbm90LicsIHBsdWdpbk5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBFdmVudFBsdWdpblJlZ2lzdHJ5LnBsdWdpbnNbcGx1Z2luSW5kZXhdID0gUGx1Z2luTW9kdWxlO1xuICAgIHZhciBwdWJsaXNoZWRFdmVudHMgPSBQbHVnaW5Nb2R1bGUuZXZlbnRUeXBlcztcbiAgICBmb3IgKHZhciBldmVudE5hbWUgaW4gcHVibGlzaGVkRXZlbnRzKSB7XG4gICAgICAhcHVibGlzaEV2ZW50Rm9yUGx1Z2luKHB1Ymxpc2hlZEV2ZW50c1tldmVudE5hbWVdLCBQbHVnaW5Nb2R1bGUsIGV2ZW50TmFtZSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnRXZlbnRQbHVnaW5SZWdpc3RyeTogRmFpbGVkIHRvIHB1Ymxpc2ggZXZlbnQgYCVzYCBmb3IgcGx1Z2luIGAlc2AuJywgZXZlbnROYW1lLCBwbHVnaW5OYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogUHVibGlzaGVzIGFuIGV2ZW50IHNvIHRoYXQgaXQgY2FuIGJlIGRpc3BhdGNoZWQgYnkgdGhlIHN1cHBsaWVkIHBsdWdpbi5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgRGlzcGF0Y2ggY29uZmlndXJhdGlvbiBmb3IgdGhlIGV2ZW50LlxuICogQHBhcmFtIHtvYmplY3R9IFBsdWdpbk1vZHVsZSBQbHVnaW4gcHVibGlzaGluZyB0aGUgZXZlbnQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCB3YXMgc3VjY2Vzc2Z1bGx5IHB1Ymxpc2hlZC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHB1Ymxpc2hFdmVudEZvclBsdWdpbihkaXNwYXRjaENvbmZpZywgUGx1Z2luTW9kdWxlLCBldmVudE5hbWUpIHtcbiAgISFFdmVudFBsdWdpblJlZ2lzdHJ5LmV2ZW50TmFtZURpc3BhdGNoQ29uZmlncy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luSHViOiBNb3JlIHRoYW4gb25lIHBsdWdpbiBhdHRlbXB0ZWQgdG8gcHVibGlzaCB0aGUgc2FtZSAnICsgJ2V2ZW50IG5hbWUsIGAlc2AuJywgZXZlbnROYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIEV2ZW50UGx1Z2luUmVnaXN0cnkuZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzW2V2ZW50TmFtZV0gPSBkaXNwYXRjaENvbmZpZztcblxuICB2YXIgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXMgPSBkaXNwYXRjaENvbmZpZy5waGFzZWRSZWdpc3RyYXRpb25OYW1lcztcbiAgaWYgKHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzKSB7XG4gICAgZm9yICh2YXIgcGhhc2VOYW1lIGluIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzKSB7XG4gICAgICBpZiAocGhhc2VkUmVnaXN0cmF0aW9uTmFtZXMuaGFzT3duUHJvcGVydHkocGhhc2VOYW1lKSkge1xuICAgICAgICB2YXIgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZSA9IHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzW3BoYXNlTmFtZV07XG4gICAgICAgIHB1Ymxpc2hSZWdpc3RyYXRpb25OYW1lKHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWUsIFBsdWdpbk1vZHVsZSwgZXZlbnROYW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0gZWxzZSBpZiAoZGlzcGF0Y2hDb25maWcucmVnaXN0cmF0aW9uTmFtZSkge1xuICAgIHB1Ymxpc2hSZWdpc3RyYXRpb25OYW1lKGRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWUsIFBsdWdpbk1vZHVsZSwgZXZlbnROYW1lKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogUHVibGlzaGVzIGEgcmVnaXN0cmF0aW9uIG5hbWUgdGhhdCBpcyB1c2VkIHRvIGlkZW50aWZ5IGRpc3BhdGNoZWQgZXZlbnRzIGFuZFxuICogY2FuIGJlIHVzZWQgd2l0aCBgRXZlbnRQbHVnaW5IdWIucHV0TGlzdGVuZXJgIHRvIHJlZ2lzdGVyIGxpc3RlbmVycy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcmVnaXN0cmF0aW9uTmFtZSBSZWdpc3RyYXRpb24gbmFtZSB0byBhZGQuXG4gKiBAcGFyYW0ge29iamVjdH0gUGx1Z2luTW9kdWxlIFBsdWdpbiBwdWJsaXNoaW5nIHRoZSBldmVudC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHB1Ymxpc2hSZWdpc3RyYXRpb25OYW1lKHJlZ2lzdHJhdGlvbk5hbWUsIFBsdWdpbk1vZHVsZSwgZXZlbnROYW1lKSB7XG4gICEhRXZlbnRQbHVnaW5SZWdpc3RyeS5yZWdpc3RyYXRpb25OYW1lTW9kdWxlc1tyZWdpc3RyYXRpb25OYW1lXSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFdmVudFBsdWdpbkh1YjogTW9yZSB0aGFuIG9uZSBwbHVnaW4gYXR0ZW1wdGVkIHRvIHB1Ymxpc2ggdGhlIHNhbWUgJyArICdyZWdpc3RyYXRpb24gbmFtZSwgYCVzYC4nLCByZWdpc3RyYXRpb25OYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXNbcmVnaXN0cmF0aW9uTmFtZV0gPSBQbHVnaW5Nb2R1bGU7XG4gIEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZURlcGVuZGVuY2llc1tyZWdpc3RyYXRpb25OYW1lXSA9IFBsdWdpbk1vZHVsZS5ldmVudFR5cGVzW2V2ZW50TmFtZV0uZGVwZW5kZW5jaWVzO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBwbHVnaW5zIHNvIHRoYXQgdGhleSBjYW4gZXh0cmFjdCBhbmQgZGlzcGF0Y2ggZXZlbnRzLlxuICpcbiAqIEBzZWUge0V2ZW50UGx1Z2luSHVifVxuICovXG52YXIgRXZlbnRQbHVnaW5SZWdpc3RyeSA9IHtcblxuICAvKipcbiAgICogT3JkZXJlZCBsaXN0IG9mIGluamVjdGVkIHBsdWdpbnMuXG4gICAqL1xuICBwbHVnaW5zOiBbXSxcblxuICAvKipcbiAgICogTWFwcGluZyBmcm9tIGV2ZW50IG5hbWUgdG8gZGlzcGF0Y2ggY29uZmlnXG4gICAqL1xuICBldmVudE5hbWVEaXNwYXRjaENvbmZpZ3M6IHt9LFxuXG4gIC8qKlxuICAgKiBNYXBwaW5nIGZyb20gcmVnaXN0cmF0aW9uIG5hbWUgdG8gcGx1Z2luIG1vZHVsZVxuICAgKi9cbiAgcmVnaXN0cmF0aW9uTmFtZU1vZHVsZXM6IHt9LFxuXG4gIC8qKlxuICAgKiBNYXBwaW5nIGZyb20gcmVnaXN0cmF0aW9uIG5hbWUgdG8gZXZlbnQgbmFtZVxuICAgKi9cbiAgcmVnaXN0cmF0aW9uTmFtZURlcGVuZGVuY2llczoge30sXG5cbiAgLyoqXG4gICAqIEluamVjdHMgYW4gb3JkZXJpbmcgb2YgcGx1Z2lucyAoYnkgcGx1Z2luIG5hbWUpLiBUaGlzIGFsbG93cyB0aGUgb3JkZXJpbmdcbiAgICogdG8gYmUgZGVjb3VwbGVkIGZyb20gaW5qZWN0aW9uIG9mIHRoZSBhY3R1YWwgcGx1Z2lucyBzbyB0aGF0IG9yZGVyaW5nIGlzXG4gICAqIGFsd2F5cyBkZXRlcm1pbmlzdGljIHJlZ2FyZGxlc3Mgb2YgcGFja2FnaW5nLCBvbi10aGUtZmx5IGluamVjdGlvbiwgZXRjLlxuICAgKlxuICAgKiBAcGFyYW0ge2FycmF5fSBJbmplY3RlZEV2ZW50UGx1Z2luT3JkZXJcbiAgICogQGludGVybmFsXG4gICAqIEBzZWUge0V2ZW50UGx1Z2luSHViLmluamVjdGlvbi5pbmplY3RFdmVudFBsdWdpbk9yZGVyfVxuICAgKi9cbiAgaW5qZWN0RXZlbnRQbHVnaW5PcmRlcjogZnVuY3Rpb24gKEluamVjdGVkRXZlbnRQbHVnaW5PcmRlcikge1xuICAgICEhRXZlbnRQbHVnaW5PcmRlciA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFdmVudFBsdWdpblJlZ2lzdHJ5OiBDYW5ub3QgaW5qZWN0IGV2ZW50IHBsdWdpbiBvcmRlcmluZyBtb3JlIHRoYW4gJyArICdvbmNlLiBZb3UgYXJlIGxpa2VseSB0cnlpbmcgdG8gbG9hZCBtb3JlIHRoYW4gb25lIGNvcHkgb2YgUmVhY3QuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIC8vIENsb25lIHRoZSBvcmRlcmluZyBzbyBpdCBjYW5ub3QgYmUgZHluYW1pY2FsbHkgbXV0YXRlZC5cbiAgICBFdmVudFBsdWdpbk9yZGVyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoSW5qZWN0ZWRFdmVudFBsdWdpbk9yZGVyKTtcbiAgICByZWNvbXB1dGVQbHVnaW5PcmRlcmluZygpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBJbmplY3RzIHBsdWdpbnMgdG8gYmUgdXNlZCBieSBgRXZlbnRQbHVnaW5IdWJgLiBUaGUgcGx1Z2luIG5hbWVzIG11c3QgYmVcbiAgICogaW4gdGhlIG9yZGVyaW5nIGluamVjdGVkIGJ5IGBpbmplY3RFdmVudFBsdWdpbk9yZGVyYC5cbiAgICpcbiAgICogUGx1Z2lucyBjYW4gYmUgaW5qZWN0ZWQgYXMgcGFydCBvZiBwYWdlIGluaXRpYWxpemF0aW9uIG9yIG9uLXRoZS1mbHkuXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBpbmplY3RlZE5hbWVzVG9QbHVnaW5zIE1hcCBmcm9tIG5hbWVzIHRvIHBsdWdpbiBtb2R1bGVzLlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHNlZSB7RXZlbnRQbHVnaW5IdWIuaW5qZWN0aW9uLmluamVjdEV2ZW50UGx1Z2luc0J5TmFtZX1cbiAgICovXG4gIGluamVjdEV2ZW50UGx1Z2luc0J5TmFtZTogZnVuY3Rpb24gKGluamVjdGVkTmFtZXNUb1BsdWdpbnMpIHtcbiAgICB2YXIgaXNPcmRlcmluZ0RpcnR5ID0gZmFsc2U7XG4gICAgZm9yICh2YXIgcGx1Z2luTmFtZSBpbiBpbmplY3RlZE5hbWVzVG9QbHVnaW5zKSB7XG4gICAgICBpZiAoIWluamVjdGVkTmFtZXNUb1BsdWdpbnMuaGFzT3duUHJvcGVydHkocGx1Z2luTmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgUGx1Z2luTW9kdWxlID0gaW5qZWN0ZWROYW1lc1RvUGx1Z2luc1twbHVnaW5OYW1lXTtcbiAgICAgIGlmICghbmFtZXNUb1BsdWdpbnMuaGFzT3duUHJvcGVydHkocGx1Z2luTmFtZSkgfHwgbmFtZXNUb1BsdWdpbnNbcGx1Z2luTmFtZV0gIT09IFBsdWdpbk1vZHVsZSkge1xuICAgICAgICAhIW5hbWVzVG9QbHVnaW5zW3BsdWdpbk5hbWVdID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V2ZW50UGx1Z2luUmVnaXN0cnk6IENhbm5vdCBpbmplY3QgdHdvIGRpZmZlcmVudCBldmVudCBwbHVnaW5zICcgKyAndXNpbmcgdGhlIHNhbWUgbmFtZSwgYCVzYC4nLCBwbHVnaW5OYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICAgIG5hbWVzVG9QbHVnaW5zW3BsdWdpbk5hbWVdID0gUGx1Z2luTW9kdWxlO1xuICAgICAgICBpc09yZGVyaW5nRGlydHkgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNPcmRlcmluZ0RpcnR5KSB7XG4gICAgICByZWNvbXB1dGVQbHVnaW5PcmRlcmluZygpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogTG9va3MgdXAgdGhlIHBsdWdpbiBmb3IgdGhlIHN1cHBsaWVkIGV2ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gZXZlbnQgQSBzeW50aGV0aWMgZXZlbnQuXG4gICAqIEByZXR1cm4gez9vYmplY3R9IFRoZSBwbHVnaW4gdGhhdCBjcmVhdGVkIHRoZSBzdXBwbGllZCBldmVudC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBnZXRQbHVnaW5Nb2R1bGVGb3JFdmVudDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIGRpc3BhdGNoQ29uZmlnID0gZXZlbnQuZGlzcGF0Y2hDb25maWc7XG4gICAgaWYgKGRpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWUpIHtcbiAgICAgIHJldHVybiBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzW2Rpc3BhdGNoQ29uZmlnLnJlZ2lzdHJhdGlvbk5hbWVdIHx8IG51bGw7XG4gICAgfVxuICAgIGZvciAodmFyIHBoYXNlIGluIGRpc3BhdGNoQ29uZmlnLnBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzKSB7XG4gICAgICBpZiAoIWRpc3BhdGNoQ29uZmlnLnBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzLmhhc093blByb3BlcnR5KHBoYXNlKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhciBQbHVnaW5Nb2R1bGUgPSBFdmVudFBsdWdpblJlZ2lzdHJ5LnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzW2Rpc3BhdGNoQ29uZmlnLnBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzW3BoYXNlXV07XG4gICAgICBpZiAoUGx1Z2luTW9kdWxlKSB7XG4gICAgICAgIHJldHVybiBQbHVnaW5Nb2R1bGU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBFeHBvc2VkIGZvciB1bml0IHRlc3RpbmcuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcmVzZXRFdmVudFBsdWdpbnM6IGZ1bmN0aW9uICgpIHtcbiAgICBFdmVudFBsdWdpbk9yZGVyID0gbnVsbDtcbiAgICBmb3IgKHZhciBwbHVnaW5OYW1lIGluIG5hbWVzVG9QbHVnaW5zKSB7XG4gICAgICBpZiAobmFtZXNUb1BsdWdpbnMuaGFzT3duUHJvcGVydHkocGx1Z2luTmFtZSkpIHtcbiAgICAgICAgZGVsZXRlIG5hbWVzVG9QbHVnaW5zW3BsdWdpbk5hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgICBFdmVudFBsdWdpblJlZ2lzdHJ5LnBsdWdpbnMubGVuZ3RoID0gMDtcblxuICAgIHZhciBldmVudE5hbWVEaXNwYXRjaENvbmZpZ3MgPSBFdmVudFBsdWdpblJlZ2lzdHJ5LmV2ZW50TmFtZURpc3BhdGNoQ29uZmlncztcbiAgICBmb3IgKHZhciBldmVudE5hbWUgaW4gZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzKSB7XG4gICAgICBpZiAoZXZlbnROYW1lRGlzcGF0Y2hDb25maWdzLmhhc093blByb3BlcnR5KGV2ZW50TmFtZSkpIHtcbiAgICAgICAgZGVsZXRlIGV2ZW50TmFtZURpc3BhdGNoQ29uZmlnc1tldmVudE5hbWVdO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciByZWdpc3RyYXRpb25OYW1lTW9kdWxlcyA9IEV2ZW50UGx1Z2luUmVnaXN0cnkucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXM7XG4gICAgZm9yICh2YXIgcmVnaXN0cmF0aW9uTmFtZSBpbiByZWdpc3RyYXRpb25OYW1lTW9kdWxlcykge1xuICAgICAgaWYgKHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLmhhc093blByb3BlcnR5KHJlZ2lzdHJhdGlvbk5hbWUpKSB7XG4gICAgICAgIGRlbGV0ZSByZWdpc3RyYXRpb25OYW1lTW9kdWxlc1tyZWdpc3RyYXRpb25OYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudFBsdWdpblJlZ2lzdHJ5OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBFdmVudFBsdWdpblV0aWxzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSByZXF1aXJlKCcuL0V2ZW50Q29uc3RhbnRzJyk7XG52YXIgUmVhY3RFcnJvclV0aWxzID0gcmVxdWlyZSgnLi9SZWFjdEVycm9yVXRpbHMnKTtcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogSW5qZWN0ZWQgZGVwZW5kZW5jaWVzOlxuICovXG5cbi8qKlxuICogLSBgTW91bnRgOiBbcmVxdWlyZWRdIE1vZHVsZSB0aGF0IGNhbiBjb252ZXJ0IGJldHdlZW4gUmVhY3QgZG9tIElEcyBhbmRcbiAqICAgYWN0dWFsIG5vZGUgcmVmZXJlbmNlcy5cbiAqL1xudmFyIGluamVjdGlvbiA9IHtcbiAgTW91bnQ6IG51bGwsXG4gIGluamVjdE1vdW50OiBmdW5jdGlvbiAoSW5qZWN0ZWRNb3VudCkge1xuICAgIGluamVjdGlvbi5Nb3VudCA9IEluamVjdGVkTW91bnQ7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKEluamVjdGVkTW91bnQgJiYgSW5qZWN0ZWRNb3VudC5nZXROb2RlICYmIEluamVjdGVkTW91bnQuZ2V0SUQsICdFdmVudFBsdWdpblV0aWxzLmluamVjdGlvbi5pbmplY3RNb3VudCguLi4pOiBJbmplY3RlZCBNb3VudCAnICsgJ21vZHVsZSBpcyBtaXNzaW5nIGdldE5vZGUgb3IgZ2V0SUQuJykgOiB1bmRlZmluZWQ7XG4gICAgfVxuICB9XG59O1xuXG52YXIgdG9wTGV2ZWxUeXBlcyA9IEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXM7XG5cbmZ1bmN0aW9uIGlzRW5kaXNoKHRvcExldmVsVHlwZSkge1xuICByZXR1cm4gdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlVXAgfHwgdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcFRvdWNoRW5kIHx8IHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BUb3VjaENhbmNlbDtcbn1cblxuZnVuY3Rpb24gaXNNb3ZlaXNoKHRvcExldmVsVHlwZSkge1xuICByZXR1cm4gdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlTW92ZSB8fCB0b3BMZXZlbFR5cGUgPT09IHRvcExldmVsVHlwZXMudG9wVG91Y2hNb3ZlO1xufVxuZnVuY3Rpb24gaXNTdGFydGlzaCh0b3BMZXZlbFR5cGUpIHtcbiAgcmV0dXJuIHRvcExldmVsVHlwZSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BNb3VzZURvd24gfHwgdG9wTGV2ZWxUeXBlID09PSB0b3BMZXZlbFR5cGVzLnRvcFRvdWNoU3RhcnQ7XG59XG5cbnZhciB2YWxpZGF0ZUV2ZW50RGlzcGF0Y2hlcztcbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhbGlkYXRlRXZlbnREaXNwYXRjaGVzID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIGRpc3BhdGNoTGlzdGVuZXJzID0gZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzO1xuICAgIHZhciBkaXNwYXRjaElEcyA9IGV2ZW50Ll9kaXNwYXRjaElEcztcblxuICAgIHZhciBsaXN0ZW5lcnNJc0FyciA9IEFycmF5LmlzQXJyYXkoZGlzcGF0Y2hMaXN0ZW5lcnMpO1xuICAgIHZhciBpZHNJc0FyciA9IEFycmF5LmlzQXJyYXkoZGlzcGF0Y2hJRHMpO1xuICAgIHZhciBJRHNMZW4gPSBpZHNJc0FyciA/IGRpc3BhdGNoSURzLmxlbmd0aCA6IGRpc3BhdGNoSURzID8gMSA6IDA7XG4gICAgdmFyIGxpc3RlbmVyc0xlbiA9IGxpc3RlbmVyc0lzQXJyID8gZGlzcGF0Y2hMaXN0ZW5lcnMubGVuZ3RoIDogZGlzcGF0Y2hMaXN0ZW5lcnMgPyAxIDogMDtcblxuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGlkc0lzQXJyID09PSBsaXN0ZW5lcnNJc0FyciAmJiBJRHNMZW4gPT09IGxpc3RlbmVyc0xlbiwgJ0V2ZW50UGx1Z2luVXRpbHM6IEludmFsaWQgYGV2ZW50YC4nKSA6IHVuZGVmaW5lZDtcbiAgfTtcbn1cblxuLyoqXG4gKiBEaXNwYXRjaCB0aGUgZXZlbnQgdG8gdGhlIGxpc3RlbmVyLlxuICogQHBhcmFtIHtTeW50aGV0aWNFdmVudH0gZXZlbnQgU3ludGhldGljRXZlbnQgdG8gaGFuZGxlXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHNpbXVsYXRlZCBJZiB0aGUgZXZlbnQgaXMgc2ltdWxhdGVkIChjaGFuZ2VzIGV4biBiZWhhdmlvcilcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGxpc3RlbmVyIEFwcGxpY2F0aW9uLWxldmVsIGNhbGxiYWNrXG4gKiBAcGFyYW0ge3N0cmluZ30gZG9tSUQgRE9NIGlkIHRvIHBhc3MgdG8gdGhlIGNhbGxiYWNrLlxuICovXG5mdW5jdGlvbiBleGVjdXRlRGlzcGF0Y2goZXZlbnQsIHNpbXVsYXRlZCwgbGlzdGVuZXIsIGRvbUlEKSB7XG4gIHZhciB0eXBlID0gZXZlbnQudHlwZSB8fCAndW5rbm93bi1ldmVudCc7XG4gIGV2ZW50LmN1cnJlbnRUYXJnZXQgPSBpbmplY3Rpb24uTW91bnQuZ2V0Tm9kZShkb21JRCk7XG4gIGlmIChzaW11bGF0ZWQpIHtcbiAgICBSZWFjdEVycm9yVXRpbHMuaW52b2tlR3VhcmRlZENhbGxiYWNrV2l0aENhdGNoKHR5cGUsIGxpc3RlbmVyLCBldmVudCwgZG9tSUQpO1xuICB9IGVsc2Uge1xuICAgIFJlYWN0RXJyb3JVdGlscy5pbnZva2VHdWFyZGVkQ2FsbGJhY2sodHlwZSwgbGlzdGVuZXIsIGV2ZW50LCBkb21JRCk7XG4gIH1cbiAgZXZlbnQuY3VycmVudFRhcmdldCA9IG51bGw7XG59XG5cbi8qKlxuICogU3RhbmRhcmQvc2ltcGxlIGl0ZXJhdGlvbiB0aHJvdWdoIGFuIGV2ZW50J3MgY29sbGVjdGVkIGRpc3BhdGNoZXMuXG4gKi9cbmZ1bmN0aW9uIGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlcihldmVudCwgc2ltdWxhdGVkKSB7XG4gIHZhciBkaXNwYXRjaExpc3RlbmVycyA9IGV2ZW50Ll9kaXNwYXRjaExpc3RlbmVycztcbiAgdmFyIGRpc3BhdGNoSURzID0gZXZlbnQuX2Rpc3BhdGNoSURzO1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHZhbGlkYXRlRXZlbnREaXNwYXRjaGVzKGV2ZW50KTtcbiAgfVxuICBpZiAoQXJyYXkuaXNBcnJheShkaXNwYXRjaExpc3RlbmVycykpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRpc3BhdGNoTGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIC8vIExpc3RlbmVycyBhbmQgSURzIGFyZSB0d28gcGFyYWxsZWwgYXJyYXlzIHRoYXQgYXJlIGFsd2F5cyBpbiBzeW5jLlxuICAgICAgZXhlY3V0ZURpc3BhdGNoKGV2ZW50LCBzaW11bGF0ZWQsIGRpc3BhdGNoTGlzdGVuZXJzW2ldLCBkaXNwYXRjaElEc1tpXSk7XG4gICAgfVxuICB9IGVsc2UgaWYgKGRpc3BhdGNoTGlzdGVuZXJzKSB7XG4gICAgZXhlY3V0ZURpc3BhdGNoKGV2ZW50LCBzaW11bGF0ZWQsIGRpc3BhdGNoTGlzdGVuZXJzLCBkaXNwYXRjaElEcyk7XG4gIH1cbiAgZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzID0gbnVsbDtcbiAgZXZlbnQuX2Rpc3BhdGNoSURzID0gbnVsbDtcbn1cblxuLyoqXG4gKiBTdGFuZGFyZC9zaW1wbGUgaXRlcmF0aW9uIHRocm91Z2ggYW4gZXZlbnQncyBjb2xsZWN0ZWQgZGlzcGF0Y2hlcywgYnV0IHN0b3BzXG4gKiBhdCB0aGUgZmlyc3QgZGlzcGF0Y2ggZXhlY3V0aW9uIHJldHVybmluZyB0cnVlLCBhbmQgcmV0dXJucyB0aGF0IGlkLlxuICpcbiAqIEByZXR1cm4gez9zdHJpbmd9IGlkIG9mIHRoZSBmaXJzdCBkaXNwYXRjaCBleGVjdXRpb24gd2hvJ3MgbGlzdGVuZXIgcmV0dXJuc1xuICogdHJ1ZSwgb3IgbnVsbCBpZiBubyBsaXN0ZW5lciByZXR1cm5lZCB0cnVlLlxuICovXG5mdW5jdGlvbiBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXJTdG9wQXRUcnVlSW1wbChldmVudCkge1xuICB2YXIgZGlzcGF0Y2hMaXN0ZW5lcnMgPSBldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnM7XG4gIHZhciBkaXNwYXRjaElEcyA9IGV2ZW50Ll9kaXNwYXRjaElEcztcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YWxpZGF0ZUV2ZW50RGlzcGF0Y2hlcyhldmVudCk7XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkoZGlzcGF0Y2hMaXN0ZW5lcnMpKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkaXNwYXRjaExpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICAvLyBMaXN0ZW5lcnMgYW5kIElEcyBhcmUgdHdvIHBhcmFsbGVsIGFycmF5cyB0aGF0IGFyZSBhbHdheXMgaW4gc3luYy5cbiAgICAgIGlmIChkaXNwYXRjaExpc3RlbmVyc1tpXShldmVudCwgZGlzcGF0Y2hJRHNbaV0pKSB7XG4gICAgICAgIHJldHVybiBkaXNwYXRjaElEc1tpXTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoZGlzcGF0Y2hMaXN0ZW5lcnMpIHtcbiAgICBpZiAoZGlzcGF0Y2hMaXN0ZW5lcnMoZXZlbnQsIGRpc3BhdGNoSURzKSkge1xuICAgICAgcmV0dXJuIGRpc3BhdGNoSURzO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBAc2VlIGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlclN0b3BBdFRydWVJbXBsXG4gKi9cbmZ1bmN0aW9uIGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlclN0b3BBdFRydWUoZXZlbnQpIHtcbiAgdmFyIHJldCA9IGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlclN0b3BBdFRydWVJbXBsKGV2ZW50KTtcbiAgZXZlbnQuX2Rpc3BhdGNoSURzID0gbnVsbDtcbiAgZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzID0gbnVsbDtcbiAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBFeGVjdXRpb24gb2YgYSBcImRpcmVjdFwiIGRpc3BhdGNoIC0gdGhlcmUgbXVzdCBiZSBhdCBtb3N0IG9uZSBkaXNwYXRjaFxuICogYWNjdW11bGF0ZWQgb24gdGhlIGV2ZW50IG9yIGl0IGlzIGNvbnNpZGVyZWQgYW4gZXJyb3IuIEl0IGRvZXNuJ3QgcmVhbGx5IG1ha2VcbiAqIHNlbnNlIGZvciBhbiBldmVudCB3aXRoIG11bHRpcGxlIGRpc3BhdGNoZXMgKGJ1YmJsZWQpIHRvIGtlZXAgdHJhY2sgb2YgdGhlXG4gKiByZXR1cm4gdmFsdWVzIGF0IGVhY2ggZGlzcGF0Y2ggZXhlY3V0aW9uLCBidXQgaXQgZG9lcyB0ZW5kIHRvIG1ha2Ugc2Vuc2Ugd2hlblxuICogZGVhbGluZyB3aXRoIFwiZGlyZWN0XCIgZGlzcGF0Y2hlcy5cbiAqXG4gKiBAcmV0dXJuIHsqfSBUaGUgcmV0dXJuIHZhbHVlIG9mIGV4ZWN1dGluZyB0aGUgc2luZ2xlIGRpc3BhdGNoLlxuICovXG5mdW5jdGlvbiBleGVjdXRlRGlyZWN0RGlzcGF0Y2goZXZlbnQpIHtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YWxpZGF0ZUV2ZW50RGlzcGF0Y2hlcyhldmVudCk7XG4gIH1cbiAgdmFyIGRpc3BhdGNoTGlzdGVuZXIgPSBldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnM7XG4gIHZhciBkaXNwYXRjaElEID0gZXZlbnQuX2Rpc3BhdGNoSURzO1xuICAhIUFycmF5LmlzQXJyYXkoZGlzcGF0Y2hMaXN0ZW5lcikgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZXhlY3V0ZURpcmVjdERpc3BhdGNoKC4uLik6IEludmFsaWQgYGV2ZW50YC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIHZhciByZXMgPSBkaXNwYXRjaExpc3RlbmVyID8gZGlzcGF0Y2hMaXN0ZW5lcihldmVudCwgZGlzcGF0Y2hJRCkgOiBudWxsO1xuICBldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnMgPSBudWxsO1xuICBldmVudC5fZGlzcGF0Y2hJRHMgPSBudWxsO1xuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7U3ludGhldGljRXZlbnR9IGV2ZW50XG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmZiBudW1iZXIgb2YgZGlzcGF0Y2hlcyBhY2N1bXVsYXRlZCBpcyBncmVhdGVyIHRoYW4gMC5cbiAqL1xuZnVuY3Rpb24gaGFzRGlzcGF0Y2hlcyhldmVudCkge1xuICByZXR1cm4gISFldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnM7XG59XG5cbi8qKlxuICogR2VuZXJhbCB1dGlsaXRpZXMgdGhhdCBhcmUgdXNlZnVsIGluIGNyZWF0aW5nIGN1c3RvbSBFdmVudCBQbHVnaW5zLlxuICovXG52YXIgRXZlbnRQbHVnaW5VdGlscyA9IHtcbiAgaXNFbmRpc2g6IGlzRW5kaXNoLFxuICBpc01vdmVpc2g6IGlzTW92ZWlzaCxcbiAgaXNTdGFydGlzaDogaXNTdGFydGlzaCxcblxuICBleGVjdXRlRGlyZWN0RGlzcGF0Y2g6IGV4ZWN1dGVEaXJlY3REaXNwYXRjaCxcbiAgZXhlY3V0ZURpc3BhdGNoZXNJbk9yZGVyOiBleGVjdXRlRGlzcGF0Y2hlc0luT3JkZXIsXG4gIGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlclN0b3BBdFRydWU6IGV4ZWN1dGVEaXNwYXRjaGVzSW5PcmRlclN0b3BBdFRydWUsXG4gIGhhc0Rpc3BhdGNoZXM6IGhhc0Rpc3BhdGNoZXMsXG5cbiAgZ2V0Tm9kZTogZnVuY3Rpb24gKGlkKSB7XG4gICAgcmV0dXJuIGluamVjdGlvbi5Nb3VudC5nZXROb2RlKGlkKTtcbiAgfSxcbiAgZ2V0SUQ6IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgcmV0dXJuIGluamVjdGlvbi5Nb3VudC5nZXRJRChub2RlKTtcbiAgfSxcblxuICBpbmplY3Rpb246IGluamVjdGlvblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudFBsdWdpblV0aWxzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBFdmVudFByb3BhZ2F0b3JzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSByZXF1aXJlKCcuL0V2ZW50Q29uc3RhbnRzJyk7XG52YXIgRXZlbnRQbHVnaW5IdWIgPSByZXF1aXJlKCcuL0V2ZW50UGx1Z2luSHViJyk7XG5cbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG52YXIgYWNjdW11bGF0ZUludG8gPSByZXF1aXJlKCcuL2FjY3VtdWxhdGVJbnRvJyk7XG52YXIgZm9yRWFjaEFjY3VtdWxhdGVkID0gcmVxdWlyZSgnLi9mb3JFYWNoQWNjdW11bGF0ZWQnKTtcblxudmFyIFByb3BhZ2F0aW9uUGhhc2VzID0gRXZlbnRDb25zdGFudHMuUHJvcGFnYXRpb25QaGFzZXM7XG52YXIgZ2V0TGlzdGVuZXIgPSBFdmVudFBsdWdpbkh1Yi5nZXRMaXN0ZW5lcjtcblxuLyoqXG4gKiBTb21lIGV2ZW50IHR5cGVzIGhhdmUgYSBub3Rpb24gb2YgZGlmZmVyZW50IHJlZ2lzdHJhdGlvbiBuYW1lcyBmb3IgZGlmZmVyZW50XG4gKiBcInBoYXNlc1wiIG9mIHByb3BhZ2F0aW9uLiBUaGlzIGZpbmRzIGxpc3RlbmVycyBieSBhIGdpdmVuIHBoYXNlLlxuICovXG5mdW5jdGlvbiBsaXN0ZW5lckF0UGhhc2UoaWQsIGV2ZW50LCBwcm9wYWdhdGlvblBoYXNlKSB7XG4gIHZhciByZWdpc3RyYXRpb25OYW1lID0gZXZlbnQuZGlzcGF0Y2hDb25maWcucGhhc2VkUmVnaXN0cmF0aW9uTmFtZXNbcHJvcGFnYXRpb25QaGFzZV07XG4gIHJldHVybiBnZXRMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSk7XG59XG5cbi8qKlxuICogVGFncyBhIGBTeW50aGV0aWNFdmVudGAgd2l0aCBkaXNwYXRjaGVkIGxpc3RlbmVycy4gQ3JlYXRpbmcgdGhpcyBmdW5jdGlvblxuICogaGVyZSwgYWxsb3dzIHVzIHRvIG5vdCBoYXZlIHRvIGJpbmQgb3IgY3JlYXRlIGZ1bmN0aW9ucyBmb3IgZWFjaCBldmVudC5cbiAqIE11dGF0aW5nIHRoZSBldmVudCdzIG1lbWJlcnMgYWxsb3dzIHVzIHRvIG5vdCBoYXZlIHRvIGNyZWF0ZSBhIHdyYXBwaW5nXG4gKiBcImRpc3BhdGNoXCIgb2JqZWN0IHRoYXQgcGFpcnMgdGhlIGV2ZW50IHdpdGggdGhlIGxpc3RlbmVyLlxuICovXG5mdW5jdGlvbiBhY2N1bXVsYXRlRGlyZWN0aW9uYWxEaXNwYXRjaGVzKGRvbUlELCB1cHdhcmRzLCBldmVudCkge1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGRvbUlELCAnRGlzcGF0Y2hpbmcgaWQgbXVzdCBub3QgYmUgbnVsbCcpIDogdW5kZWZpbmVkO1xuICB9XG4gIHZhciBwaGFzZSA9IHVwd2FyZHMgPyBQcm9wYWdhdGlvblBoYXNlcy5idWJibGVkIDogUHJvcGFnYXRpb25QaGFzZXMuY2FwdHVyZWQ7XG4gIHZhciBsaXN0ZW5lciA9IGxpc3RlbmVyQXRQaGFzZShkb21JRCwgZXZlbnQsIHBoYXNlKTtcbiAgaWYgKGxpc3RlbmVyKSB7XG4gICAgZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzID0gYWNjdW11bGF0ZUludG8oZXZlbnQuX2Rpc3BhdGNoTGlzdGVuZXJzLCBsaXN0ZW5lcik7XG4gICAgZXZlbnQuX2Rpc3BhdGNoSURzID0gYWNjdW11bGF0ZUludG8oZXZlbnQuX2Rpc3BhdGNoSURzLCBkb21JRCk7XG4gIH1cbn1cblxuLyoqXG4gKiBDb2xsZWN0IGRpc3BhdGNoZXMgKG11c3QgYmUgZW50aXJlbHkgY29sbGVjdGVkIGJlZm9yZSBkaXNwYXRjaGluZyAtIHNlZSB1bml0XG4gKiB0ZXN0cykuIExhemlseSBhbGxvY2F0ZSB0aGUgYXJyYXkgdG8gY29uc2VydmUgbWVtb3J5LiAgV2UgbXVzdCBsb29wIHRocm91Z2hcbiAqIGVhY2ggZXZlbnQgYW5kIHBlcmZvcm0gdGhlIHRyYXZlcnNhbCBmb3IgZWFjaCBvbmUuIFdlIGNhbm5vdCBwZXJmb3JtIGFcbiAqIHNpbmdsZSB0cmF2ZXJzYWwgZm9yIHRoZSBlbnRpcmUgY29sbGVjdGlvbiBvZiBldmVudHMgYmVjYXVzZSBlYWNoIGV2ZW50IG1heVxuICogaGF2ZSBhIGRpZmZlcmVudCB0YXJnZXQuXG4gKi9cbmZ1bmN0aW9uIGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTaW5nbGUoZXZlbnQpIHtcbiAgaWYgKGV2ZW50ICYmIGV2ZW50LmRpc3BhdGNoQ29uZmlnLnBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzKSB7XG4gICAgRXZlbnRQbHVnaW5IdWIuaW5qZWN0aW9uLmdldEluc3RhbmNlSGFuZGxlKCkudHJhdmVyc2VUd29QaGFzZShldmVudC5kaXNwYXRjaE1hcmtlciwgYWNjdW11bGF0ZURpcmVjdGlvbmFsRGlzcGF0Y2hlcywgZXZlbnQpO1xuICB9XG59XG5cbi8qKlxuICogU2FtZSBhcyBgYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlc1NpbmdsZWAsIGJ1dCBza2lwcyBvdmVyIHRoZSB0YXJnZXRJRC5cbiAqL1xuZnVuY3Rpb24gYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlc1NpbmdsZVNraXBUYXJnZXQoZXZlbnQpIHtcbiAgaWYgKGV2ZW50ICYmIGV2ZW50LmRpc3BhdGNoQ29uZmlnLnBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzKSB7XG4gICAgRXZlbnRQbHVnaW5IdWIuaW5qZWN0aW9uLmdldEluc3RhbmNlSGFuZGxlKCkudHJhdmVyc2VUd29QaGFzZVNraXBUYXJnZXQoZXZlbnQuZGlzcGF0Y2hNYXJrZXIsIGFjY3VtdWxhdGVEaXJlY3Rpb25hbERpc3BhdGNoZXMsIGV2ZW50KTtcbiAgfVxufVxuXG4vKipcbiAqIEFjY3VtdWxhdGVzIHdpdGhvdXQgcmVnYXJkIHRvIGRpcmVjdGlvbiwgZG9lcyBub3QgbG9vayBmb3IgcGhhc2VkXG4gKiByZWdpc3RyYXRpb24gbmFtZXMuIFNhbWUgYXMgYGFjY3VtdWxhdGVEaXJlY3REaXNwYXRjaGVzU2luZ2xlYCBidXQgd2l0aG91dFxuICogcmVxdWlyaW5nIHRoYXQgdGhlIGBkaXNwYXRjaE1hcmtlcmAgYmUgdGhlIHNhbWUgYXMgdGhlIGRpc3BhdGNoZWQgSUQuXG4gKi9cbmZ1bmN0aW9uIGFjY3VtdWxhdGVEaXNwYXRjaGVzKGlkLCBpZ25vcmVkRGlyZWN0aW9uLCBldmVudCkge1xuICBpZiAoZXZlbnQgJiYgZXZlbnQuZGlzcGF0Y2hDb25maWcucmVnaXN0cmF0aW9uTmFtZSkge1xuICAgIHZhciByZWdpc3RyYXRpb25OYW1lID0gZXZlbnQuZGlzcGF0Y2hDb25maWcucmVnaXN0cmF0aW9uTmFtZTtcbiAgICB2YXIgbGlzdGVuZXIgPSBnZXRMaXN0ZW5lcihpZCwgcmVnaXN0cmF0aW9uTmFtZSk7XG4gICAgaWYgKGxpc3RlbmVyKSB7XG4gICAgICBldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnMgPSBhY2N1bXVsYXRlSW50byhldmVudC5fZGlzcGF0Y2hMaXN0ZW5lcnMsIGxpc3RlbmVyKTtcbiAgICAgIGV2ZW50Ll9kaXNwYXRjaElEcyA9IGFjY3VtdWxhdGVJbnRvKGV2ZW50Ll9kaXNwYXRjaElEcywgaWQpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEFjY3VtdWxhdGVzIGRpc3BhdGNoZXMgb24gYW4gYFN5bnRoZXRpY0V2ZW50YCwgYnV0IG9ubHkgZm9yIHRoZVxuICogYGRpc3BhdGNoTWFya2VyYC5cbiAqIEBwYXJhbSB7U3ludGhldGljRXZlbnR9IGV2ZW50XG4gKi9cbmZ1bmN0aW9uIGFjY3VtdWxhdGVEaXJlY3REaXNwYXRjaGVzU2luZ2xlKGV2ZW50KSB7XG4gIGlmIChldmVudCAmJiBldmVudC5kaXNwYXRjaENvbmZpZy5yZWdpc3RyYXRpb25OYW1lKSB7XG4gICAgYWNjdW11bGF0ZURpc3BhdGNoZXMoZXZlbnQuZGlzcGF0Y2hNYXJrZXIsIG51bGwsIGV2ZW50KTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzKGV2ZW50cykge1xuICBmb3JFYWNoQWNjdW11bGF0ZWQoZXZlbnRzLCBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2luZ2xlKTtcbn1cblxuZnVuY3Rpb24gYWNjdW11bGF0ZVR3b1BoYXNlRGlzcGF0Y2hlc1NraXBUYXJnZXQoZXZlbnRzKSB7XG4gIGZvckVhY2hBY2N1bXVsYXRlZChldmVudHMsIGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTaW5nbGVTa2lwVGFyZ2V0KTtcbn1cblxuZnVuY3Rpb24gYWNjdW11bGF0ZUVudGVyTGVhdmVEaXNwYXRjaGVzKGxlYXZlLCBlbnRlciwgZnJvbUlELCB0b0lEKSB7XG4gIEV2ZW50UGx1Z2luSHViLmluamVjdGlvbi5nZXRJbnN0YW5jZUhhbmRsZSgpLnRyYXZlcnNlRW50ZXJMZWF2ZShmcm9tSUQsIHRvSUQsIGFjY3VtdWxhdGVEaXNwYXRjaGVzLCBsZWF2ZSwgZW50ZXIpO1xufVxuXG5mdW5jdGlvbiBhY2N1bXVsYXRlRGlyZWN0RGlzcGF0Y2hlcyhldmVudHMpIHtcbiAgZm9yRWFjaEFjY3VtdWxhdGVkKGV2ZW50cywgYWNjdW11bGF0ZURpcmVjdERpc3BhdGNoZXNTaW5nbGUpO1xufVxuXG4vKipcbiAqIEEgc21hbGwgc2V0IG9mIHByb3BhZ2F0aW9uIHBhdHRlcm5zLCBlYWNoIG9mIHdoaWNoIHdpbGwgYWNjZXB0IGEgc21hbGwgYW1vdW50XG4gKiBvZiBpbmZvcm1hdGlvbiwgYW5kIGdlbmVyYXRlIGEgc2V0IG9mIFwiZGlzcGF0Y2ggcmVhZHkgZXZlbnQgb2JqZWN0c1wiIC0gd2hpY2hcbiAqIGFyZSBzZXRzIG9mIGV2ZW50cyB0aGF0IGhhdmUgYWxyZWFkeSBiZWVuIGFubm90YXRlZCB3aXRoIGEgc2V0IG9mIGRpc3BhdGNoZWRcbiAqIGxpc3RlbmVyIGZ1bmN0aW9ucy9pZHMuIFRoZSBBUEkgaXMgZGVzaWduZWQgdGhpcyB3YXkgdG8gZGlzY291cmFnZSB0aGVzZVxuICogcHJvcGFnYXRpb24gc3RyYXRlZ2llcyBmcm9tIGFjdHVhbGx5IGV4ZWN1dGluZyB0aGUgZGlzcGF0Y2hlcywgc2luY2Ugd2VcbiAqIGFsd2F5cyB3YW50IHRvIGNvbGxlY3QgdGhlIGVudGlyZSBzZXQgb2YgZGlzcGF0Y2hlcyBiZWZvcmUgZXhlY3V0aW5nIGV2ZW50IGFcbiAqIHNpbmdsZSBvbmUuXG4gKlxuICogQGNvbnN0cnVjdG9yIEV2ZW50UHJvcGFnYXRvcnNcbiAqL1xudmFyIEV2ZW50UHJvcGFnYXRvcnMgPSB7XG4gIGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXM6IGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXMsXG4gIGFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXNTa2lwVGFyZ2V0OiBhY2N1bXVsYXRlVHdvUGhhc2VEaXNwYXRjaGVzU2tpcFRhcmdldCxcbiAgYWNjdW11bGF0ZURpcmVjdERpc3BhdGNoZXM6IGFjY3VtdWxhdGVEaXJlY3REaXNwYXRjaGVzLFxuICBhY2N1bXVsYXRlRW50ZXJMZWF2ZURpc3BhdGNoZXM6IGFjY3VtdWxhdGVFbnRlckxlYXZlRGlzcGF0Y2hlc1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudFByb3BhZ2F0b3JzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGVcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUG9vbGVkQ2xhc3MgPSByZXF1aXJlKCcuL1Bvb2xlZENsYXNzJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBnZXRUZXh0Q29udGVudEFjY2Vzc29yID0gcmVxdWlyZSgnLi9nZXRUZXh0Q29udGVudEFjY2Vzc29yJyk7XG5cbi8qKlxuICogVGhpcyBoZWxwZXIgY2xhc3Mgc3RvcmVzIGluZm9ybWF0aW9uIGFib3V0IHRleHQgY29udGVudCBvZiBhIHRhcmdldCBub2RlLFxuICogYWxsb3dpbmcgY29tcGFyaXNvbiBvZiBjb250ZW50IGJlZm9yZSBhbmQgYWZ0ZXIgYSBnaXZlbiBldmVudC5cbiAqXG4gKiBJZGVudGlmeSB0aGUgbm9kZSB3aGVyZSBzZWxlY3Rpb24gY3VycmVudGx5IGJlZ2lucywgdGhlbiBvYnNlcnZlXG4gKiBib3RoIGl0cyB0ZXh0IGNvbnRlbnQgYW5kIGl0cyBjdXJyZW50IHBvc2l0aW9uIGluIHRoZSBET00uIFNpbmNlIHRoZVxuICogYnJvd3NlciBtYXkgbmF0aXZlbHkgcmVwbGFjZSB0aGUgdGFyZ2V0IG5vZGUgZHVyaW5nIGNvbXBvc2l0aW9uLCB3ZSBjYW5cbiAqIHVzZSBpdHMgcG9zaXRpb24gdG8gZmluZCBpdHMgcmVwbGFjZW1lbnQuXG4gKlxuICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gcm9vdFxuICovXG5mdW5jdGlvbiBGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUocm9vdCkge1xuICB0aGlzLl9yb290ID0gcm9vdDtcbiAgdGhpcy5fc3RhcnRUZXh0ID0gdGhpcy5nZXRUZXh0KCk7XG4gIHRoaXMuX2ZhbGxiYWNrVGV4dCA9IG51bGw7XG59XG5cbmFzc2lnbihGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUucHJvdG90eXBlLCB7XG4gIGRlc3RydWN0b3I6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9yb290ID0gbnVsbDtcbiAgICB0aGlzLl9zdGFydFRleHQgPSBudWxsO1xuICAgIHRoaXMuX2ZhbGxiYWNrVGV4dCA9IG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHRleHQgb2YgaW5wdXQuXG4gICAqXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIGdldFRleHQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJ3ZhbHVlJyBpbiB0aGlzLl9yb290KSB7XG4gICAgICByZXR1cm4gdGhpcy5fcm9vdC52YWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3Jvb3RbZ2V0VGV4dENvbnRlbnRBY2Nlc3NvcigpXTtcbiAgfSxcblxuICAvKipcbiAgICogRGV0ZXJtaW5lIHRoZSBkaWZmZXJpbmcgc3Vic3RyaW5nIGJldHdlZW4gdGhlIGluaXRpYWxseSBzdG9yZWRcbiAgICogdGV4dCBjb250ZW50IGFuZCB0aGUgY3VycmVudCBjb250ZW50LlxuICAgKlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBnZXREYXRhOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX2ZhbGxiYWNrVGV4dCkge1xuICAgICAgcmV0dXJuIHRoaXMuX2ZhbGxiYWNrVGV4dDtcbiAgICB9XG5cbiAgICB2YXIgc3RhcnQ7XG4gICAgdmFyIHN0YXJ0VmFsdWUgPSB0aGlzLl9zdGFydFRleHQ7XG4gICAgdmFyIHN0YXJ0TGVuZ3RoID0gc3RhcnRWYWx1ZS5sZW5ndGg7XG4gICAgdmFyIGVuZDtcbiAgICB2YXIgZW5kVmFsdWUgPSB0aGlzLmdldFRleHQoKTtcbiAgICB2YXIgZW5kTGVuZ3RoID0gZW5kVmFsdWUubGVuZ3RoO1xuXG4gICAgZm9yIChzdGFydCA9IDA7IHN0YXJ0IDwgc3RhcnRMZW5ndGg7IHN0YXJ0KyspIHtcbiAgICAgIGlmIChzdGFydFZhbHVlW3N0YXJ0XSAhPT0gZW5kVmFsdWVbc3RhcnRdKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBtaW5FbmQgPSBzdGFydExlbmd0aCAtIHN0YXJ0O1xuICAgIGZvciAoZW5kID0gMTsgZW5kIDw9IG1pbkVuZDsgZW5kKyspIHtcbiAgICAgIGlmIChzdGFydFZhbHVlW3N0YXJ0TGVuZ3RoIC0gZW5kXSAhPT0gZW5kVmFsdWVbZW5kTGVuZ3RoIC0gZW5kXSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgc2xpY2VUYWlsID0gZW5kID4gMSA/IDEgLSBlbmQgOiB1bmRlZmluZWQ7XG4gICAgdGhpcy5fZmFsbGJhY2tUZXh0ID0gZW5kVmFsdWUuc2xpY2Uoc3RhcnQsIHNsaWNlVGFpbCk7XG4gICAgcmV0dXJuIHRoaXMuX2ZhbGxiYWNrVGV4dDtcbiAgfVxufSk7XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhGYWxsYmFja0NvbXBvc2l0aW9uU3RhdGUpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZhbGxiYWNrQ29tcG9zaXRpb25TdGF0ZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgSFRNTERPTVByb3BlcnR5Q29uZmlnXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRE9NUHJvcGVydHkgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5Jyk7XG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgTVVTVF9VU0VfQVRUUklCVVRFID0gRE9NUHJvcGVydHkuaW5qZWN0aW9uLk1VU1RfVVNFX0FUVFJJQlVURTtcbnZhciBNVVNUX1VTRV9QUk9QRVJUWSA9IERPTVByb3BlcnR5LmluamVjdGlvbi5NVVNUX1VTRV9QUk9QRVJUWTtcbnZhciBIQVNfQk9PTEVBTl9WQUxVRSA9IERPTVByb3BlcnR5LmluamVjdGlvbi5IQVNfQk9PTEVBTl9WQUxVRTtcbnZhciBIQVNfU0lERV9FRkZFQ1RTID0gRE9NUHJvcGVydHkuaW5qZWN0aW9uLkhBU19TSURFX0VGRkVDVFM7XG52YXIgSEFTX05VTUVSSUNfVkFMVUUgPSBET01Qcm9wZXJ0eS5pbmplY3Rpb24uSEFTX05VTUVSSUNfVkFMVUU7XG52YXIgSEFTX1BPU0lUSVZFX05VTUVSSUNfVkFMVUUgPSBET01Qcm9wZXJ0eS5pbmplY3Rpb24uSEFTX1BPU0lUSVZFX05VTUVSSUNfVkFMVUU7XG52YXIgSEFTX09WRVJMT0FERURfQk9PTEVBTl9WQUxVRSA9IERPTVByb3BlcnR5LmluamVjdGlvbi5IQVNfT1ZFUkxPQURFRF9CT09MRUFOX1ZBTFVFO1xuXG52YXIgaGFzU1ZHO1xuaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSkge1xuICB2YXIgaW1wbGVtZW50YXRpb24gPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbjtcbiAgaGFzU1ZHID0gaW1wbGVtZW50YXRpb24gJiYgaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSAmJiBpbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlKCdodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcxMS9mZWF0dXJlI0Jhc2ljU3RydWN0dXJlJywgJzEuMScpO1xufVxuXG52YXIgSFRNTERPTVByb3BlcnR5Q29uZmlnID0ge1xuICBpc0N1c3RvbUF0dHJpYnV0ZTogUmVnRXhwLnByb3RvdHlwZS50ZXN0LmJpbmQoL14oZGF0YXxhcmlhKS1bYS16X11bYS16XFxkXy5cXC1dKiQvKSxcbiAgUHJvcGVydGllczoge1xuICAgIC8qKlxuICAgICAqIFN0YW5kYXJkIFByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBhY2NlcHQ6IG51bGwsXG4gICAgYWNjZXB0Q2hhcnNldDogbnVsbCxcbiAgICBhY2Nlc3NLZXk6IG51bGwsXG4gICAgYWN0aW9uOiBudWxsLFxuICAgIGFsbG93RnVsbFNjcmVlbjogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgYWxsb3dUcmFuc3BhcmVuY3k6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBhbHQ6IG51bGwsXG4gICAgYXN5bmM6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGF1dG9Db21wbGV0ZTogbnVsbCxcbiAgICAvLyBhdXRvRm9jdXMgaXMgcG9seWZpbGxlZC9ub3JtYWxpemVkIGJ5IEF1dG9Gb2N1c1V0aWxzXG4gICAgLy8gYXV0b0ZvY3VzOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBhdXRvUGxheTogSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgY2FwdHVyZTogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgY2VsbFBhZGRpbmc6IG51bGwsXG4gICAgY2VsbFNwYWNpbmc6IG51bGwsXG4gICAgY2hhclNldDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGNoYWxsZW5nZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGNoZWNrZWQ6IE1VU1RfVVNFX1BST1BFUlRZIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgY2xhc3NJRDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIC8vIFRvIHNldCBjbGFzc05hbWUgb24gU1ZHIGVsZW1lbnRzLCBpdCdzIG5lY2Vzc2FyeSB0byB1c2UgLnNldEF0dHJpYnV0ZTtcbiAgICAvLyB0aGlzIHdvcmtzIG9uIEhUTUwgZWxlbWVudHMgdG9vIGluIGFsbCBicm93c2VycyBleGNlcHQgSUU4LiBDb252ZW5pZW50bHksXG4gICAgLy8gSUU4IGRvZXNuJ3Qgc3VwcG9ydCBTVkcgYW5kIHNvIHdlIGNhbiBzaW1wbHkgdXNlIHRoZSBhdHRyaWJ1dGUgaW5cbiAgICAvLyBicm93c2VycyB0aGF0IHN1cHBvcnQgU1ZHIGFuZCB0aGUgcHJvcGVydHkgaW4gYnJvd3NlcnMgdGhhdCBkb24ndCxcbiAgICAvLyByZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhlIGVsZW1lbnQgaXMgSFRNTCBvciBTVkcuXG4gICAgY2xhc3NOYW1lOiBoYXNTVkcgPyBNVVNUX1VTRV9BVFRSSUJVVEUgOiBNVVNUX1VTRV9QUk9QRVJUWSxcbiAgICBjb2xzOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRSxcbiAgICBjb2xTcGFuOiBudWxsLFxuICAgIGNvbnRlbnQ6IG51bGwsXG4gICAgY29udGVudEVkaXRhYmxlOiBudWxsLFxuICAgIGNvbnRleHRNZW51OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgY29udHJvbHM6IE1VU1RfVVNFX1BST1BFUlRZIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgY29vcmRzOiBudWxsLFxuICAgIGNyb3NzT3JpZ2luOiBudWxsLFxuICAgIGRhdGE6IG51bGwsIC8vIEZvciBgPG9iamVjdCAvPmAgYWN0cyBhcyBgc3JjYC5cbiAgICBkYXRlVGltZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgICdkZWZhdWx0JzogSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgZGVmZXI6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGRpcjogbnVsbCxcbiAgICBkaXNhYmxlZDogTVVTVF9VU0VfQVRUUklCVVRFIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgZG93bmxvYWQ6IEhBU19PVkVSTE9BREVEX0JPT0xFQU5fVkFMVUUsXG4gICAgZHJhZ2dhYmxlOiBudWxsLFxuICAgIGVuY1R5cGU6IG51bGwsXG4gICAgZm9ybTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGZvcm1BY3Rpb246IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmb3JtRW5jVHlwZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGZvcm1NZXRob2Q6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmb3JtTm9WYWxpZGF0ZTogSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgZm9ybVRhcmdldDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGZyYW1lQm9yZGVyOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgaGVhZGVyczogbnVsbCxcbiAgICBoZWlnaHQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBoaWRkZW46IE1VU1RfVVNFX0FUVFJJQlVURSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGhpZ2g6IG51bGwsXG4gICAgaHJlZjogbnVsbCxcbiAgICBocmVmTGFuZzogbnVsbCxcbiAgICBodG1sRm9yOiBudWxsLFxuICAgIGh0dHBFcXVpdjogbnVsbCxcbiAgICBpY29uOiBudWxsLFxuICAgIGlkOiBNVVNUX1VTRV9QUk9QRVJUWSxcbiAgICBpbnB1dE1vZGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBpbnRlZ3JpdHk6IG51bGwsXG4gICAgaXM6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBrZXlQYXJhbXM6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBrZXlUeXBlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAga2luZDogbnVsbCxcbiAgICBsYWJlbDogbnVsbCxcbiAgICBsYW5nOiBudWxsLFxuICAgIGxpc3Q6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBsb29wOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIGxvdzogbnVsbCxcbiAgICBtYW5pZmVzdDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIG1hcmdpbkhlaWdodDogbnVsbCxcbiAgICBtYXJnaW5XaWR0aDogbnVsbCxcbiAgICBtYXg6IG51bGwsXG4gICAgbWF4TGVuZ3RoOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbWVkaWE6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBtZWRpYUdyb3VwOiBudWxsLFxuICAgIG1ldGhvZDogbnVsbCxcbiAgICBtaW46IG51bGwsXG4gICAgbWluTGVuZ3RoOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgbXVsdGlwbGU6IE1VU1RfVVNFX1BST1BFUlRZIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgbXV0ZWQ6IE1VU1RfVVNFX1BST1BFUlRZIHwgSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgbmFtZTogbnVsbCxcbiAgICBub25jZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIG5vVmFsaWRhdGU6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIG9wZW46IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIG9wdGltdW06IG51bGwsXG4gICAgcGF0dGVybjogbnVsbCxcbiAgICBwbGFjZWhvbGRlcjogbnVsbCxcbiAgICBwb3N0ZXI6IG51bGwsXG4gICAgcHJlbG9hZDogbnVsbCxcbiAgICByYWRpb0dyb3VwOiBudWxsLFxuICAgIHJlYWRPbmx5OiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIHJlbDogbnVsbCxcbiAgICByZXF1aXJlZDogSEFTX0JPT0xFQU5fVkFMVUUsXG4gICAgcmV2ZXJzZWQ6IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIHJvbGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICByb3dzOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfUE9TSVRJVkVfTlVNRVJJQ19WQUxVRSxcbiAgICByb3dTcGFuOiBudWxsLFxuICAgIHNhbmRib3g6IG51bGwsXG4gICAgc2NvcGU6IG51bGwsXG4gICAgc2NvcGVkOiBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBzY3JvbGxpbmc6IG51bGwsXG4gICAgc2VhbWxlc3M6IE1VU1RfVVNFX0FUVFJJQlVURSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIHNlbGVjdGVkOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19CT09MRUFOX1ZBTFVFLFxuICAgIHNoYXBlOiBudWxsLFxuICAgIHNpemU6IE1VU1RfVVNFX0FUVFJJQlVURSB8IEhBU19QT1NJVElWRV9OVU1FUklDX1ZBTFVFLFxuICAgIHNpemVzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3BhbjogSEFTX1BPU0lUSVZFX05VTUVSSUNfVkFMVUUsXG4gICAgc3BlbGxDaGVjazogbnVsbCxcbiAgICBzcmM6IG51bGwsXG4gICAgc3JjRG9jOiBNVVNUX1VTRV9QUk9QRVJUWSxcbiAgICBzcmNMYW5nOiBudWxsLFxuICAgIHNyY1NldDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHN0YXJ0OiBIQVNfTlVNRVJJQ19WQUxVRSxcbiAgICBzdGVwOiBudWxsLFxuICAgIHN0eWxlOiBudWxsLFxuICAgIHN1bW1hcnk6IG51bGwsXG4gICAgdGFiSW5kZXg6IG51bGwsXG4gICAgdGFyZ2V0OiBudWxsLFxuICAgIHRpdGxlOiBudWxsLFxuICAgIHR5cGU6IG51bGwsXG4gICAgdXNlTWFwOiBudWxsLFxuICAgIHZhbHVlOiBNVVNUX1VTRV9QUk9QRVJUWSB8IEhBU19TSURFX0VGRkVDVFMsXG4gICAgd2lkdGg6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB3bW9kZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHdyYXA6IG51bGwsXG5cbiAgICAvKipcbiAgICAgKiBSREZhIFByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBhYm91dDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGRhdGF0eXBlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgaW5saXN0OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcHJlZml4OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgLy8gcHJvcGVydHkgaXMgYWxzbyBzdXBwb3J0ZWQgZm9yIE9wZW5HcmFwaCBpbiBtZXRhIHRhZ3MuXG4gICAgcHJvcGVydHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICByZXNvdXJjZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgICd0eXBlb2YnOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgdm9jYWI6IE1VU1RfVVNFX0FUVFJJQlVURSxcblxuICAgIC8qKlxuICAgICAqIE5vbi1zdGFuZGFyZCBQcm9wZXJ0aWVzXG4gICAgICovXG4gICAgLy8gYXV0b0NhcGl0YWxpemUgYW5kIGF1dG9Db3JyZWN0IGFyZSBzdXBwb3J0ZWQgaW4gTW9iaWxlIFNhZmFyaSBmb3JcbiAgICAvLyBrZXlib2FyZCBoaW50cy5cbiAgICBhdXRvQ2FwaXRhbGl6ZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGF1dG9Db3JyZWN0OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgLy8gYXV0b1NhdmUgYWxsb3dzIFdlYktpdC9CbGluayB0byBwZXJzaXN0IHZhbHVlcyBvZiBpbnB1dCBmaWVsZHMgb24gcGFnZSByZWxvYWRzXG4gICAgYXV0b1NhdmU6IG51bGwsXG4gICAgLy8gY29sb3IgaXMgZm9yIFNhZmFyaSBtYXNrLWljb24gbGlua1xuICAgIGNvbG9yOiBudWxsLFxuICAgIC8vIGl0ZW1Qcm9wLCBpdGVtU2NvcGUsIGl0ZW1UeXBlIGFyZSBmb3JcbiAgICAvLyBNaWNyb2RhdGEgc3VwcG9ydC4gU2VlIGh0dHA6Ly9zY2hlbWEub3JnL2RvY3MvZ3MuaHRtbFxuICAgIGl0ZW1Qcm9wOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgaXRlbVNjb3BlOiBNVVNUX1VTRV9BVFRSSUJVVEUgfCBIQVNfQk9PTEVBTl9WQUxVRSxcbiAgICBpdGVtVHlwZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIC8vIGl0ZW1JRCBhbmQgaXRlbVJlZiBhcmUgZm9yIE1pY3JvZGF0YSBzdXBwb3J0IGFzIHdlbGwgYnV0XG4gICAgLy8gb25seSBzcGVjaWZpZWQgaW4gdGhlIHRoZSBXSEFUV0cgc3BlYyBkb2N1bWVudC4gU2VlXG4gICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvbWljcm9kYXRhLmh0bWwjbWljcm9kYXRhLWRvbS1hcGlcbiAgICBpdGVtSUQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBpdGVtUmVmOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgLy8gcmVzdWx0cyBzaG93IGxvb2tpbmcgZ2xhc3MgaWNvbiBhbmQgcmVjZW50IHNlYXJjaGVzIG9uIGlucHV0XG4gICAgLy8gc2VhcmNoIGZpZWxkcyBpbiBXZWJLaXQvQmxpbmtcbiAgICByZXN1bHRzOiBudWxsLFxuICAgIC8vIElFLW9ubHkgYXR0cmlidXRlIHRoYXQgc3BlY2lmaWVzIHNlY3VyaXR5IHJlc3RyaWN0aW9ucyBvbiBhbiBpZnJhbWVcbiAgICAvLyBhcyBhbiBhbHRlcm5hdGl2ZSB0byB0aGUgc2FuZGJveCBhdHRyaWJ1dGUgb24gSUU8MTBcbiAgICBzZWN1cml0eTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIC8vIElFLW9ubHkgYXR0cmlidXRlIHRoYXQgY29udHJvbHMgZm9jdXMgYmVoYXZpb3JcbiAgICB1bnNlbGVjdGFibGU6IE1VU1RfVVNFX0FUVFJJQlVURVxuICB9LFxuICBET01BdHRyaWJ1dGVOYW1lczoge1xuICAgIGFjY2VwdENoYXJzZXQ6ICdhY2NlcHQtY2hhcnNldCcsXG4gICAgY2xhc3NOYW1lOiAnY2xhc3MnLFxuICAgIGh0bWxGb3I6ICdmb3InLFxuICAgIGh0dHBFcXVpdjogJ2h0dHAtZXF1aXYnXG4gIH0sXG4gIERPTVByb3BlcnR5TmFtZXM6IHtcbiAgICBhdXRvQ29tcGxldGU6ICdhdXRvY29tcGxldGUnLFxuICAgIGF1dG9Gb2N1czogJ2F1dG9mb2N1cycsXG4gICAgYXV0b1BsYXk6ICdhdXRvcGxheScsXG4gICAgYXV0b1NhdmU6ICdhdXRvc2F2ZScsXG4gICAgLy8gYGVuY29kaW5nYCBpcyBlcXVpdmFsZW50IHRvIGBlbmN0eXBlYCwgSUU4IGxhY2tzIGFuIGBlbmN0eXBlYCBzZXR0ZXIuXG4gICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvZm9ybXMuaHRtbCNkb20tZnMtZW5jb2RpbmdcbiAgICBlbmNUeXBlOiAnZW5jb2RpbmcnLFxuICAgIGhyZWZMYW5nOiAnaHJlZmxhbmcnLFxuICAgIHJhZGlvR3JvdXA6ICdyYWRpb2dyb3VwJyxcbiAgICBzcGVsbENoZWNrOiAnc3BlbGxjaGVjaycsXG4gICAgc3JjRG9jOiAnc3JjZG9jJyxcbiAgICBzcmNTZXQ6ICdzcmNzZXQnXG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gSFRNTERPTVByb3BlcnR5Q29uZmlnOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBMaW5rZWRWYWx1ZVV0aWxzXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0UHJvcFR5cGVzID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlcycpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMgPSByZXF1aXJlKCcuL1JlYWN0UHJvcFR5cGVMb2NhdGlvbnMnKTtcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciBoYXNSZWFkT25seVZhbHVlID0ge1xuICAnYnV0dG9uJzogdHJ1ZSxcbiAgJ2NoZWNrYm94JzogdHJ1ZSxcbiAgJ2ltYWdlJzogdHJ1ZSxcbiAgJ2hpZGRlbic6IHRydWUsXG4gICdyYWRpbyc6IHRydWUsXG4gICdyZXNldCc6IHRydWUsXG4gICdzdWJtaXQnOiB0cnVlXG59O1xuXG5mdW5jdGlvbiBfYXNzZXJ0U2luZ2xlTGluayhpbnB1dFByb3BzKSB7XG4gICEoaW5wdXRQcm9wcy5jaGVja2VkTGluayA9PSBudWxsIHx8IGlucHV0UHJvcHMudmFsdWVMaW5rID09IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0Nhbm5vdCBwcm92aWRlIGEgY2hlY2tlZExpbmsgYW5kIGEgdmFsdWVMaW5rLiBJZiB5b3Ugd2FudCB0byB1c2UgJyArICdjaGVja2VkTGluaywgeW91IHByb2JhYmx5IGRvblxcJ3Qgd2FudCB0byB1c2UgdmFsdWVMaW5rIGFuZCB2aWNlIHZlcnNhLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbn1cbmZ1bmN0aW9uIF9hc3NlcnRWYWx1ZUxpbmsoaW5wdXRQcm9wcykge1xuICBfYXNzZXJ0U2luZ2xlTGluayhpbnB1dFByb3BzKTtcbiAgIShpbnB1dFByb3BzLnZhbHVlID09IG51bGwgJiYgaW5wdXRQcm9wcy5vbkNoYW5nZSA9PSBudWxsKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdDYW5ub3QgcHJvdmlkZSBhIHZhbHVlTGluayBhbmQgYSB2YWx1ZSBvciBvbkNoYW5nZSBldmVudC4gSWYgeW91IHdhbnQgJyArICd0byB1c2UgdmFsdWUgb3Igb25DaGFuZ2UsIHlvdSBwcm9iYWJseSBkb25cXCd0IHdhbnQgdG8gdXNlIHZhbHVlTGluay4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG59XG5cbmZ1bmN0aW9uIF9hc3NlcnRDaGVja2VkTGluayhpbnB1dFByb3BzKSB7XG4gIF9hc3NlcnRTaW5nbGVMaW5rKGlucHV0UHJvcHMpO1xuICAhKGlucHV0UHJvcHMuY2hlY2tlZCA9PSBudWxsICYmIGlucHV0UHJvcHMub25DaGFuZ2UgPT0gbnVsbCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnQ2Fubm90IHByb3ZpZGUgYSBjaGVja2VkTGluayBhbmQgYSBjaGVja2VkIHByb3BlcnR5IG9yIG9uQ2hhbmdlIGV2ZW50LiAnICsgJ0lmIHlvdSB3YW50IHRvIHVzZSBjaGVja2VkIG9yIG9uQ2hhbmdlLCB5b3UgcHJvYmFibHkgZG9uXFwndCB3YW50IHRvICcgKyAndXNlIGNoZWNrZWRMaW5rJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xufVxuXG52YXIgcHJvcFR5cGVzID0ge1xuICB2YWx1ZTogZnVuY3Rpb24gKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSkge1xuICAgIGlmICghcHJvcHNbcHJvcE5hbWVdIHx8IGhhc1JlYWRPbmx5VmFsdWVbcHJvcHMudHlwZV0gfHwgcHJvcHMub25DaGFuZ2UgfHwgcHJvcHMucmVhZE9ubHkgfHwgcHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEVycm9yKCdZb3UgcHJvdmlkZWQgYSBgdmFsdWVgIHByb3AgdG8gYSBmb3JtIGZpZWxkIHdpdGhvdXQgYW4gJyArICdgb25DaGFuZ2VgIGhhbmRsZXIuIFRoaXMgd2lsbCByZW5kZXIgYSByZWFkLW9ubHkgZmllbGQuIElmICcgKyAndGhlIGZpZWxkIHNob3VsZCBiZSBtdXRhYmxlIHVzZSBgZGVmYXVsdFZhbHVlYC4gT3RoZXJ3aXNlLCAnICsgJ3NldCBlaXRoZXIgYG9uQ2hhbmdlYCBvciBgcmVhZE9ubHlgLicpO1xuICB9LFxuICBjaGVja2VkOiBmdW5jdGlvbiAocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lKSB7XG4gICAgaWYgKCFwcm9wc1twcm9wTmFtZV0gfHwgcHJvcHMub25DaGFuZ2UgfHwgcHJvcHMucmVhZE9ubHkgfHwgcHJvcHMuZGlzYWJsZWQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEVycm9yKCdZb3UgcHJvdmlkZWQgYSBgY2hlY2tlZGAgcHJvcCB0byBhIGZvcm0gZmllbGQgd2l0aG91dCBhbiAnICsgJ2BvbkNoYW5nZWAgaGFuZGxlci4gVGhpcyB3aWxsIHJlbmRlciBhIHJlYWQtb25seSBmaWVsZC4gSWYgJyArICd0aGUgZmllbGQgc2hvdWxkIGJlIG11dGFibGUgdXNlIGBkZWZhdWx0Q2hlY2tlZGAuIE90aGVyd2lzZSwgJyArICdzZXQgZWl0aGVyIGBvbkNoYW5nZWAgb3IgYHJlYWRPbmx5YC4nKTtcbiAgfSxcbiAgb25DaGFuZ2U6IFJlYWN0UHJvcFR5cGVzLmZ1bmNcbn07XG5cbnZhciBsb2dnZWRUeXBlRmFpbHVyZXMgPSB7fTtcbmZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShvd25lcikge1xuICBpZiAob3duZXIpIHtcbiAgICB2YXIgbmFtZSA9IG93bmVyLmdldE5hbWUoKTtcbiAgICBpZiAobmFtZSkge1xuICAgICAgcmV0dXJuICcgQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgYCcgKyBuYW1lICsgJ2AuJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIFByb3ZpZGUgYSBsaW5rZWQgYHZhbHVlYCBhdHRyaWJ1dGUgZm9yIGNvbnRyb2xsZWQgZm9ybXMuIFlvdSBzaG91bGQgbm90IHVzZVxuICogdGhpcyBvdXRzaWRlIG9mIHRoZSBSZWFjdERPTSBjb250cm9sbGVkIGZvcm0gY29tcG9uZW50cy5cbiAqL1xudmFyIExpbmtlZFZhbHVlVXRpbHMgPSB7XG4gIGNoZWNrUHJvcFR5cGVzOiBmdW5jdGlvbiAodGFnTmFtZSwgcHJvcHMsIG93bmVyKSB7XG4gICAgZm9yICh2YXIgcHJvcE5hbWUgaW4gcHJvcFR5cGVzKSB7XG4gICAgICBpZiAocHJvcFR5cGVzLmhhc093blByb3BlcnR5KHByb3BOYW1lKSkge1xuICAgICAgICB2YXIgZXJyb3IgPSBwcm9wVHlwZXNbcHJvcE5hbWVdKHByb3BzLCBwcm9wTmFtZSwgdGFnTmFtZSwgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5wcm9wKTtcbiAgICAgIH1cbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmICEoZXJyb3IubWVzc2FnZSBpbiBsb2dnZWRUeXBlRmFpbHVyZXMpKSB7XG4gICAgICAgIC8vIE9ubHkgbW9uaXRvciB0aGlzIGZhaWx1cmUgb25jZSBiZWNhdXNlIHRoZXJlIHRlbmRzIHRvIGJlIGEgbG90IG9mIHRoZVxuICAgICAgICAvLyBzYW1lIGVycm9yLlxuICAgICAgICBsb2dnZWRUeXBlRmFpbHVyZXNbZXJyb3IubWVzc2FnZV0gPSB0cnVlO1xuXG4gICAgICAgIHZhciBhZGRlbmR1bSA9IGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShvd25lcik7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnRmFpbGVkIGZvcm0gcHJvcFR5cGU6ICVzJXMnLCBlcnJvci5tZXNzYWdlLCBhZGRlbmR1bSkgOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge29iamVjdH0gaW5wdXRQcm9wcyBQcm9wcyBmb3IgZm9ybSBjb21wb25lbnRcbiAgICogQHJldHVybiB7Kn0gY3VycmVudCB2YWx1ZSBvZiB0aGUgaW5wdXQgZWl0aGVyIGZyb20gdmFsdWUgcHJvcCBvciBsaW5rLlxuICAgKi9cbiAgZ2V0VmFsdWU6IGZ1bmN0aW9uIChpbnB1dFByb3BzKSB7XG4gICAgaWYgKGlucHV0UHJvcHMudmFsdWVMaW5rKSB7XG4gICAgICBfYXNzZXJ0VmFsdWVMaW5rKGlucHV0UHJvcHMpO1xuICAgICAgcmV0dXJuIGlucHV0UHJvcHMudmFsdWVMaW5rLnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gaW5wdXRQcm9wcy52YWx1ZTtcbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtvYmplY3R9IGlucHV0UHJvcHMgUHJvcHMgZm9yIGZvcm0gY29tcG9uZW50XG4gICAqIEByZXR1cm4geyp9IGN1cnJlbnQgY2hlY2tlZCBzdGF0dXMgb2YgdGhlIGlucHV0IGVpdGhlciBmcm9tIGNoZWNrZWQgcHJvcFxuICAgKiAgICAgICAgICAgICBvciBsaW5rLlxuICAgKi9cbiAgZ2V0Q2hlY2tlZDogZnVuY3Rpb24gKGlucHV0UHJvcHMpIHtcbiAgICBpZiAoaW5wdXRQcm9wcy5jaGVja2VkTGluaykge1xuICAgICAgX2Fzc2VydENoZWNrZWRMaW5rKGlucHV0UHJvcHMpO1xuICAgICAgcmV0dXJuIGlucHV0UHJvcHMuY2hlY2tlZExpbmsudmFsdWU7XG4gICAgfVxuICAgIHJldHVybiBpbnB1dFByb3BzLmNoZWNrZWQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBpbnB1dFByb3BzIFByb3BzIGZvciBmb3JtIGNvbXBvbmVudFxuICAgKiBAcGFyYW0ge1N5bnRoZXRpY0V2ZW50fSBldmVudCBjaGFuZ2UgZXZlbnQgdG8gaGFuZGxlXG4gICAqL1xuICBleGVjdXRlT25DaGFuZ2U6IGZ1bmN0aW9uIChpbnB1dFByb3BzLCBldmVudCkge1xuICAgIGlmIChpbnB1dFByb3BzLnZhbHVlTGluaykge1xuICAgICAgX2Fzc2VydFZhbHVlTGluayhpbnB1dFByb3BzKTtcbiAgICAgIHJldHVybiBpbnB1dFByb3BzLnZhbHVlTGluay5yZXF1ZXN0Q2hhbmdlKGV2ZW50LnRhcmdldC52YWx1ZSk7XG4gICAgfSBlbHNlIGlmIChpbnB1dFByb3BzLmNoZWNrZWRMaW5rKSB7XG4gICAgICBfYXNzZXJ0Q2hlY2tlZExpbmsoaW5wdXRQcm9wcyk7XG4gICAgICByZXR1cm4gaW5wdXRQcm9wcy5jaGVja2VkTGluay5yZXF1ZXN0Q2hhbmdlKGV2ZW50LnRhcmdldC5jaGVja2VkKTtcbiAgICB9IGVsc2UgaWYgKGlucHV0UHJvcHMub25DaGFuZ2UpIHtcbiAgICAgIHJldHVybiBpbnB1dFByb3BzLm9uQ2hhbmdlLmNhbGwodW5kZWZpbmVkLCBldmVudCk7XG4gICAgfVxuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IExpbmtlZFZhbHVlVXRpbHM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIE9iamVjdC5hc3NpZ25cbiAqL1xuXG4vLyBodHRwczovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtb2JqZWN0LmFzc2lnblxuXG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGFzc2lnbih0YXJnZXQsIHNvdXJjZXMpIHtcbiAgaWYgKHRhcmdldCA9PSBudWxsKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignT2JqZWN0LmFzc2lnbiB0YXJnZXQgY2Fubm90IGJlIG51bGwgb3IgdW5kZWZpbmVkJyk7XG4gIH1cblxuICB2YXIgdG8gPSBPYmplY3QodGFyZ2V0KTtcbiAgdmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuICBmb3IgKHZhciBuZXh0SW5kZXggPSAxOyBuZXh0SW5kZXggPCBhcmd1bWVudHMubGVuZ3RoOyBuZXh0SW5kZXgrKykge1xuICAgIHZhciBuZXh0U291cmNlID0gYXJndW1lbnRzW25leHRJbmRleF07XG4gICAgaWYgKG5leHRTb3VyY2UgPT0gbnVsbCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgdmFyIGZyb20gPSBPYmplY3QobmV4dFNvdXJjZSk7XG5cbiAgICAvLyBXZSBkb24ndCBjdXJyZW50bHkgc3VwcG9ydCBhY2Nlc3NvcnMgbm9yIHByb3hpZXMuIFRoZXJlZm9yZSB0aGlzXG4gICAgLy8gY29weSBjYW5ub3QgdGhyb3cuIElmIHdlIGV2ZXIgc3VwcG9ydGVkIHRoaXMgdGhlbiB3ZSBtdXN0IGhhbmRsZVxuICAgIC8vIGV4Y2VwdGlvbnMgYW5kIHNpZGUtZWZmZWN0cy4gV2UgZG9uJ3Qgc3VwcG9ydCBzeW1ib2xzIHNvIHRoZXkgd29uJ3RcbiAgICAvLyBiZSB0cmFuc2ZlcnJlZC5cblxuICAgIGZvciAodmFyIGtleSBpbiBmcm9tKSB7XG4gICAgICBpZiAoaGFzT3duUHJvcGVydHkuY2FsbChmcm9tLCBrZXkpKSB7XG4gICAgICAgIHRvW2tleV0gPSBmcm9tW2tleV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRvO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFzc2lnbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUG9vbGVkQ2xhc3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBTdGF0aWMgcG9vbGVycy4gU2V2ZXJhbCBjdXN0b20gdmVyc2lvbnMgZm9yIGVhY2ggcG90ZW50aWFsIG51bWJlciBvZlxuICogYXJndW1lbnRzLiBBIGNvbXBsZXRlbHkgZ2VuZXJpYyBwb29sZXIgaXMgZWFzeSB0byBpbXBsZW1lbnQsIGJ1dCB3b3VsZFxuICogcmVxdWlyZSBhY2Nlc3NpbmcgdGhlIGBhcmd1bWVudHNgIG9iamVjdC4gSW4gZWFjaCBvZiB0aGVzZSwgYHRoaXNgIHJlZmVycyB0b1xuICogdGhlIENsYXNzIGl0c2VsZiwgbm90IGFuIGluc3RhbmNlLiBJZiBhbnkgb3RoZXJzIGFyZSBuZWVkZWQsIHNpbXBseSBhZGQgdGhlbVxuICogaGVyZSwgb3IgaW4gdGhlaXIgb3duIGZpbGVzLlxuICovXG52YXIgb25lQXJndW1lbnRQb29sZXIgPSBmdW5jdGlvbiAoY29weUZpZWxkc0Zyb20pIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgY29weUZpZWxkc0Zyb20pO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGNvcHlGaWVsZHNGcm9tKTtcbiAgfVxufTtcblxudmFyIHR3b0FyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24gKGExLCBhMikge1xuICB2YXIgS2xhc3MgPSB0aGlzO1xuICBpZiAoS2xhc3MuaW5zdGFuY2VQb29sLmxlbmd0aCkge1xuICAgIHZhciBpbnN0YW5jZSA9IEtsYXNzLmluc3RhbmNlUG9vbC5wb3AoKTtcbiAgICBLbGFzcy5jYWxsKGluc3RhbmNlLCBhMSwgYTIpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMik7XG4gIH1cbn07XG5cbnZhciB0aHJlZUFyZ3VtZW50UG9vbGVyID0gZnVuY3Rpb24gKGExLCBhMiwgYTMpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyLCBhMyk7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgS2xhc3MoYTEsIGEyLCBhMyk7XG4gIH1cbn07XG5cbnZhciBmb3VyQXJndW1lbnRQb29sZXIgPSBmdW5jdGlvbiAoYTEsIGEyLCBhMywgYTQpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyLCBhMywgYTQpO1xuICAgIHJldHVybiBpbnN0YW5jZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IEtsYXNzKGExLCBhMiwgYTMsIGE0KTtcbiAgfVxufTtcblxudmFyIGZpdmVBcmd1bWVudFBvb2xlciA9IGZ1bmN0aW9uIChhMSwgYTIsIGEzLCBhNCwgYTUpIHtcbiAgdmFyIEtsYXNzID0gdGhpcztcbiAgaWYgKEtsYXNzLmluc3RhbmNlUG9vbC5sZW5ndGgpIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBLbGFzcy5pbnN0YW5jZVBvb2wucG9wKCk7XG4gICAgS2xhc3MuY2FsbChpbnN0YW5jZSwgYTEsIGEyLCBhMywgYTQsIGE1KTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5ldyBLbGFzcyhhMSwgYTIsIGEzLCBhNCwgYTUpO1xuICB9XG59O1xuXG52YXIgc3RhbmRhcmRSZWxlYXNlciA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICB2YXIgS2xhc3MgPSB0aGlzO1xuICAhKGluc3RhbmNlIGluc3RhbmNlb2YgS2xhc3MpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1RyeWluZyB0byByZWxlYXNlIGFuIGluc3RhbmNlIGludG8gYSBwb29sIG9mIGEgZGlmZmVyZW50IHR5cGUuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBpbnN0YW5jZS5kZXN0cnVjdG9yKCk7XG4gIGlmIChLbGFzcy5pbnN0YW5jZVBvb2wubGVuZ3RoIDwgS2xhc3MucG9vbFNpemUpIHtcbiAgICBLbGFzcy5pbnN0YW5jZVBvb2wucHVzaChpbnN0YW5jZSk7XG4gIH1cbn07XG5cbnZhciBERUZBVUxUX1BPT0xfU0laRSA9IDEwO1xudmFyIERFRkFVTFRfUE9PTEVSID0gb25lQXJndW1lbnRQb29sZXI7XG5cbi8qKlxuICogQXVnbWVudHMgYENvcHlDb25zdHJ1Y3RvcmAgdG8gYmUgYSBwb29sYWJsZSBjbGFzcywgYXVnbWVudGluZyBvbmx5IHRoZSBjbGFzc1xuICogaXRzZWxmIChzdGF0aWNhbGx5KSBub3QgYWRkaW5nIGFueSBwcm90b3R5cGljYWwgZmllbGRzLiBBbnkgQ29weUNvbnN0cnVjdG9yXG4gKiB5b3UgZ2l2ZSB0aGlzIG1heSBoYXZlIGEgYHBvb2xTaXplYCBwcm9wZXJ0eSwgYW5kIHdpbGwgbG9vayBmb3IgYVxuICogcHJvdG90eXBpY2FsIGBkZXN0cnVjdG9yYCBvbiBpbnN0YW5jZXMgKG9wdGlvbmFsKS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBDb3B5Q29uc3RydWN0b3IgQ29uc3RydWN0b3IgdGhhdCBjYW4gYmUgdXNlZCB0byByZXNldC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHBvb2xlciBDdXN0b21pemFibGUgcG9vbGVyLlxuICovXG52YXIgYWRkUG9vbGluZ1RvID0gZnVuY3Rpb24gKENvcHlDb25zdHJ1Y3RvciwgcG9vbGVyKSB7XG4gIHZhciBOZXdLbGFzcyA9IENvcHlDb25zdHJ1Y3RvcjtcbiAgTmV3S2xhc3MuaW5zdGFuY2VQb29sID0gW107XG4gIE5ld0tsYXNzLmdldFBvb2xlZCA9IHBvb2xlciB8fCBERUZBVUxUX1BPT0xFUjtcbiAgaWYgKCFOZXdLbGFzcy5wb29sU2l6ZSkge1xuICAgIE5ld0tsYXNzLnBvb2xTaXplID0gREVGQVVMVF9QT09MX1NJWkU7XG4gIH1cbiAgTmV3S2xhc3MucmVsZWFzZSA9IHN0YW5kYXJkUmVsZWFzZXI7XG4gIHJldHVybiBOZXdLbGFzcztcbn07XG5cbnZhciBQb29sZWRDbGFzcyA9IHtcbiAgYWRkUG9vbGluZ1RvOiBhZGRQb29saW5nVG8sXG4gIG9uZUFyZ3VtZW50UG9vbGVyOiBvbmVBcmd1bWVudFBvb2xlcixcbiAgdHdvQXJndW1lbnRQb29sZXI6IHR3b0FyZ3VtZW50UG9vbGVyLFxuICB0aHJlZUFyZ3VtZW50UG9vbGVyOiB0aHJlZUFyZ3VtZW50UG9vbGVyLFxuICBmb3VyQXJndW1lbnRQb29sZXI6IGZvdXJBcmd1bWVudFBvb2xlcixcbiAgZml2ZUFyZ3VtZW50UG9vbGVyOiBmaXZlQXJndW1lbnRQb29sZXJcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUG9vbGVkQ2xhc3M7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RET00gPSByZXF1aXJlKCcuL1JlYWN0RE9NJyk7XG52YXIgUmVhY3RET01TZXJ2ZXIgPSByZXF1aXJlKCcuL1JlYWN0RE9NU2VydmVyJyk7XG52YXIgUmVhY3RJc29tb3JwaGljID0gcmVxdWlyZSgnLi9SZWFjdElzb21vcnBoaWMnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGRlcHJlY2F0ZWQgPSByZXF1aXJlKCcuL2RlcHJlY2F0ZWQnKTtcblxuLy8gYHZlcnNpb25gIHdpbGwgYmUgYWRkZWQgaGVyZSBieSBSZWFjdElzb21vcnBoaWMuXG52YXIgUmVhY3QgPSB7fTtcblxuYXNzaWduKFJlYWN0LCBSZWFjdElzb21vcnBoaWMpO1xuXG5hc3NpZ24oUmVhY3QsIHtcbiAgLy8gUmVhY3RET01cbiAgZmluZERPTU5vZGU6IGRlcHJlY2F0ZWQoJ2ZpbmRET01Ob2RlJywgJ1JlYWN0RE9NJywgJ3JlYWN0LWRvbScsIFJlYWN0RE9NLCBSZWFjdERPTS5maW5kRE9NTm9kZSksXG4gIHJlbmRlcjogZGVwcmVjYXRlZCgncmVuZGVyJywgJ1JlYWN0RE9NJywgJ3JlYWN0LWRvbScsIFJlYWN0RE9NLCBSZWFjdERPTS5yZW5kZXIpLFxuICB1bm1vdW50Q29tcG9uZW50QXROb2RlOiBkZXByZWNhdGVkKCd1bm1vdW50Q29tcG9uZW50QXROb2RlJywgJ1JlYWN0RE9NJywgJ3JlYWN0LWRvbScsIFJlYWN0RE9NLCBSZWFjdERPTS51bm1vdW50Q29tcG9uZW50QXROb2RlKSxcblxuICAvLyBSZWFjdERPTVNlcnZlclxuICByZW5kZXJUb1N0cmluZzogZGVwcmVjYXRlZCgncmVuZGVyVG9TdHJpbmcnLCAnUmVhY3RET01TZXJ2ZXInLCAncmVhY3QtZG9tL3NlcnZlcicsIFJlYWN0RE9NU2VydmVyLCBSZWFjdERPTVNlcnZlci5yZW5kZXJUb1N0cmluZyksXG4gIHJlbmRlclRvU3RhdGljTWFya3VwOiBkZXByZWNhdGVkKCdyZW5kZXJUb1N0YXRpY01hcmt1cCcsICdSZWFjdERPTVNlcnZlcicsICdyZWFjdC1kb20vc2VydmVyJywgUmVhY3RET01TZXJ2ZXIsIFJlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RhdGljTWFya3VwKVxufSk7XG5cblJlYWN0Ll9fU0VDUkVUX0RPTV9ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEID0gUmVhY3RET007XG5SZWFjdC5fX1NFQ1JFVF9ET01fU0VSVkVSX0RPX05PVF9VU0VfT1JfWU9VX1dJTExfQkVfRklSRUQgPSBSZWFjdERPTVNlcnZlcjtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RCcm93c2VyQ29tcG9uZW50TWl4aW5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEluc3RhbmNlTWFwID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlTWFwJyk7XG5cbnZhciBmaW5kRE9NTm9kZSA9IHJlcXVpcmUoJy4vZmluZERPTU5vZGUnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG52YXIgZGlkV2FybktleSA9ICdfZ2V0RE9NTm9kZURpZFdhcm4nO1xuXG52YXIgUmVhY3RCcm93c2VyQ29tcG9uZW50TWl4aW4gPSB7XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBET00gbm9kZSByZW5kZXJlZCBieSB0aGlzIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHJldHVybiB7RE9NRWxlbWVudH0gVGhlIHJvb3Qgbm9kZSBvZiB0aGlzIGNvbXBvbmVudC5cbiAgICogQGZpbmFsXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGdldERPTU5vZGU6IGZ1bmN0aW9uICgpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0aGlzLmNvbnN0cnVjdG9yW2RpZFdhcm5LZXldLCAnJXMuZ2V0RE9NTm9kZSguLi4pIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgJyArICdSZWFjdERPTS5maW5kRE9NTm9kZShpbnN0YW5jZSkgaW5zdGVhZC4nLCBSZWFjdEluc3RhbmNlTWFwLmdldCh0aGlzKS5nZXROYW1lKCkgfHwgdGhpcy50YWdOYW1lIHx8ICdVbmtub3duJykgOiB1bmRlZmluZWQ7XG4gICAgdGhpcy5jb25zdHJ1Y3RvcltkaWRXYXJuS2V5XSA9IHRydWU7XG4gICAgcmV0dXJuIGZpbmRET01Ob2RlKHRoaXMpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0QnJvd3NlckNvbXBvbmVudE1peGluOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXJcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSByZXF1aXJlKCcuL0V2ZW50Q29uc3RhbnRzJyk7XG52YXIgRXZlbnRQbHVnaW5IdWIgPSByZXF1aXJlKCcuL0V2ZW50UGx1Z2luSHViJyk7XG52YXIgRXZlbnRQbHVnaW5SZWdpc3RyeSA9IHJlcXVpcmUoJy4vRXZlbnRQbHVnaW5SZWdpc3RyeScpO1xudmFyIFJlYWN0RXZlbnRFbWl0dGVyTWl4aW4gPSByZXF1aXJlKCcuL1JlYWN0RXZlbnRFbWl0dGVyTWl4aW4nKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xudmFyIFZpZXdwb3J0TWV0cmljcyA9IHJlcXVpcmUoJy4vVmlld3BvcnRNZXRyaWNzJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBpc0V2ZW50U3VwcG9ydGVkID0gcmVxdWlyZSgnLi9pc0V2ZW50U3VwcG9ydGVkJyk7XG5cbi8qKlxuICogU3VtbWFyeSBvZiBgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyYCBldmVudCBoYW5kbGluZzpcbiAqXG4gKiAgLSBUb3AtbGV2ZWwgZGVsZWdhdGlvbiBpcyB1c2VkIHRvIHRyYXAgbW9zdCBuYXRpdmUgYnJvd3NlciBldmVudHMuIFRoaXNcbiAqICAgIG1heSBvbmx5IG9jY3VyIGluIHRoZSBtYWluIHRocmVhZCBhbmQgaXMgdGhlIHJlc3BvbnNpYmlsaXR5IG9mXG4gKiAgICBSZWFjdEV2ZW50TGlzdGVuZXIsIHdoaWNoIGlzIGluamVjdGVkIGFuZCBjYW4gdGhlcmVmb3JlIHN1cHBvcnQgcGx1Z2dhYmxlXG4gKiAgICBldmVudCBzb3VyY2VzLiBUaGlzIGlzIHRoZSBvbmx5IHdvcmsgdGhhdCBvY2N1cnMgaW4gdGhlIG1haW4gdGhyZWFkLlxuICpcbiAqICAtIFdlIG5vcm1hbGl6ZSBhbmQgZGUtZHVwbGljYXRlIGV2ZW50cyB0byBhY2NvdW50IGZvciBicm93c2VyIHF1aXJrcy4gVGhpc1xuICogICAgbWF5IGJlIGRvbmUgaW4gdGhlIHdvcmtlciB0aHJlYWQuXG4gKlxuICogIC0gRm9yd2FyZCB0aGVzZSBuYXRpdmUgZXZlbnRzICh3aXRoIHRoZSBhc3NvY2lhdGVkIHRvcC1sZXZlbCB0eXBlIHVzZWQgdG9cbiAqICAgIHRyYXAgaXQpIHRvIGBFdmVudFBsdWdpbkh1YmAsIHdoaWNoIGluIHR1cm4gd2lsbCBhc2sgcGx1Z2lucyBpZiB0aGV5IHdhbnRcbiAqICAgIHRvIGV4dHJhY3QgYW55IHN5bnRoZXRpYyBldmVudHMuXG4gKlxuICogIC0gVGhlIGBFdmVudFBsdWdpbkh1YmAgd2lsbCB0aGVuIHByb2Nlc3MgZWFjaCBldmVudCBieSBhbm5vdGF0aW5nIHRoZW0gd2l0aFxuICogICAgXCJkaXNwYXRjaGVzXCIsIGEgc2VxdWVuY2Ugb2YgbGlzdGVuZXJzIGFuZCBJRHMgdGhhdCBjYXJlIGFib3V0IHRoYXQgZXZlbnQuXG4gKlxuICogIC0gVGhlIGBFdmVudFBsdWdpbkh1YmAgdGhlbiBkaXNwYXRjaGVzIHRoZSBldmVudHMuXG4gKlxuICogT3ZlcnZpZXcgb2YgUmVhY3QgYW5kIHRoZSBldmVudCBzeXN0ZW06XG4gKlxuICogKy0tLS0tLS0tLS0tLSsgICAgLlxuICogfCAgICBET00gICAgIHwgICAgLlxuICogKy0tLS0tLS0tLS0tLSsgICAgLlxuICogICAgICAgfCAgICAgICAgICAgLlxuICogICAgICAgdiAgICAgICAgICAgLlxuICogKy0tLS0tLS0tLS0tLSsgICAgLlxuICogfCBSZWFjdEV2ZW50IHwgICAgLlxuICogfCAgTGlzdGVuZXIgIHwgICAgLlxuICogKy0tLS0tLS0tLS0tLSsgICAgLiAgICAgICAgICAgICAgICAgICAgICAgICArLS0tLS0tLS0tLS0rXG4gKiAgICAgICB8ICAgICAgICAgICAuICAgICAgICAgICAgICAgKy0tLS0tLS0tK3xTaW1wbGVFdmVudHxcbiAqICAgICAgIHwgICAgICAgICAgIC4gICAgICAgICAgICAgICB8ICAgICAgICAgfFBsdWdpbiAgICAgfFxuICogKy0tLS0tfC0tLS0tLSsgICAgLiAgICAgICAgICAgICAgIHYgICAgICAgICArLS0tLS0tLS0tLS0rXG4gKiB8ICAgICB8ICAgICAgfCAgICAuICAgICstLS0tLS0tLS0tLS0tLSsgICAgICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0rXG4gKiB8ICAgICArLS0tLS0tLS0tLS0uLS0tPnxFdmVudFBsdWdpbkh1YnwgICAgICAgICAgICAgICAgICAgIHwgICAgRXZlbnQgICB8XG4gKiB8ICAgICAgICAgICAgfCAgICAuICAgIHwgICAgICAgICAgICAgIHwgICAgICstLS0tLS0tLS0tLSsgIHwgUHJvcGFnYXRvcnN8XG4gKiB8IFJlYWN0RXZlbnQgfCAgICAuICAgIHwgICAgICAgICAgICAgIHwgICAgIHxUYXBFdmVudCAgIHwgIHwtLS0tLS0tLS0tLS18XG4gKiB8ICBFbWl0dGVyICAgfCAgICAuICAgIHwgICAgICAgICAgICAgIHw8LS0tK3xQbHVnaW4gICAgIHwgIHxvdGhlciBwbHVnaW58XG4gKiB8ICAgICAgICAgICAgfCAgICAuICAgIHwgICAgICAgICAgICAgIHwgICAgICstLS0tLS0tLS0tLSsgIHwgIHV0aWxpdGllcyB8XG4gKiB8ICAgICArLS0tLS0tLS0tLS0uLS0tPnwgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgICAgICstLS0tLS0tLS0tLS0rXG4gKiB8ICAgICB8ICAgICAgfCAgICAuICAgICstLS0tLS0tLS0tLS0tLStcbiAqICstLS0tLXwtLS0tLS0rICAgIC4gICAgICAgICAgICAgICAgXiAgICAgICAgKy0tLS0tLS0tLS0tK1xuICogICAgICAgfCAgICAgICAgICAgLiAgICAgICAgICAgICAgICB8ICAgICAgICB8RW50ZXIvTGVhdmV8XG4gKiAgICAgICArICAgICAgICAgICAuICAgICAgICAgICAgICAgICstLS0tLS0tK3xQbHVnaW4gICAgIHxcbiAqICstLS0tLS0tLS0tLS0tKyAgIC4gICAgICAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tK1xuICogfCBhcHBsaWNhdGlvbiB8ICAgLlxuICogfC0tLS0tLS0tLS0tLS18ICAgLlxuICogfCAgICAgICAgICAgICB8ICAgLlxuICogfCAgICAgICAgICAgICB8ICAgLlxuICogKy0tLS0tLS0tLS0tLS0rICAgLlxuICogICAgICAgICAgICAgICAgICAgLlxuICogICAgUmVhY3QgQ29yZSAgICAgLiAgR2VuZXJhbCBQdXJwb3NlIEV2ZW50IFBsdWdpbiBTeXN0ZW1cbiAqL1xuXG52YXIgYWxyZWFkeUxpc3RlbmluZ1RvID0ge307XG52YXIgaXNNb25pdG9yaW5nU2Nyb2xsVmFsdWUgPSBmYWxzZTtcbnZhciByZWFjdFRvcExpc3RlbmVyc0NvdW50ZXIgPSAwO1xuXG4vLyBGb3IgZXZlbnRzIGxpa2UgJ3N1Ym1pdCcgd2hpY2ggZG9uJ3QgY29uc2lzdGVudGx5IGJ1YmJsZSAod2hpY2ggd2UgdHJhcCBhdCBhXG4vLyBsb3dlciBub2RlIHRoYW4gYGRvY3VtZW50YCksIGJpbmRpbmcgYXQgYGRvY3VtZW50YCB3b3VsZCBjYXVzZSBkdXBsaWNhdGVcbi8vIGV2ZW50cyBzbyB3ZSBkb24ndCBpbmNsdWRlIHRoZW0gaGVyZVxudmFyIHRvcEV2ZW50TWFwcGluZyA9IHtcbiAgdG9wQWJvcnQ6ICdhYm9ydCcsXG4gIHRvcEJsdXI6ICdibHVyJyxcbiAgdG9wQ2FuUGxheTogJ2NhbnBsYXknLFxuICB0b3BDYW5QbGF5VGhyb3VnaDogJ2NhbnBsYXl0aHJvdWdoJyxcbiAgdG9wQ2hhbmdlOiAnY2hhbmdlJyxcbiAgdG9wQ2xpY2s6ICdjbGljaycsXG4gIHRvcENvbXBvc2l0aW9uRW5kOiAnY29tcG9zaXRpb25lbmQnLFxuICB0b3BDb21wb3NpdGlvblN0YXJ0OiAnY29tcG9zaXRpb25zdGFydCcsXG4gIHRvcENvbXBvc2l0aW9uVXBkYXRlOiAnY29tcG9zaXRpb251cGRhdGUnLFxuICB0b3BDb250ZXh0TWVudTogJ2NvbnRleHRtZW51JyxcbiAgdG9wQ29weTogJ2NvcHknLFxuICB0b3BDdXQ6ICdjdXQnLFxuICB0b3BEb3VibGVDbGljazogJ2RibGNsaWNrJyxcbiAgdG9wRHJhZzogJ2RyYWcnLFxuICB0b3BEcmFnRW5kOiAnZHJhZ2VuZCcsXG4gIHRvcERyYWdFbnRlcjogJ2RyYWdlbnRlcicsXG4gIHRvcERyYWdFeGl0OiAnZHJhZ2V4aXQnLFxuICB0b3BEcmFnTGVhdmU6ICdkcmFnbGVhdmUnLFxuICB0b3BEcmFnT3ZlcjogJ2RyYWdvdmVyJyxcbiAgdG9wRHJhZ1N0YXJ0OiAnZHJhZ3N0YXJ0JyxcbiAgdG9wRHJvcDogJ2Ryb3AnLFxuICB0b3BEdXJhdGlvbkNoYW5nZTogJ2R1cmF0aW9uY2hhbmdlJyxcbiAgdG9wRW1wdGllZDogJ2VtcHRpZWQnLFxuICB0b3BFbmNyeXB0ZWQ6ICdlbmNyeXB0ZWQnLFxuICB0b3BFbmRlZDogJ2VuZGVkJyxcbiAgdG9wRXJyb3I6ICdlcnJvcicsXG4gIHRvcEZvY3VzOiAnZm9jdXMnLFxuICB0b3BJbnB1dDogJ2lucHV0JyxcbiAgdG9wS2V5RG93bjogJ2tleWRvd24nLFxuICB0b3BLZXlQcmVzczogJ2tleXByZXNzJyxcbiAgdG9wS2V5VXA6ICdrZXl1cCcsXG4gIHRvcExvYWRlZERhdGE6ICdsb2FkZWRkYXRhJyxcbiAgdG9wTG9hZGVkTWV0YWRhdGE6ICdsb2FkZWRtZXRhZGF0YScsXG4gIHRvcExvYWRTdGFydDogJ2xvYWRzdGFydCcsXG4gIHRvcE1vdXNlRG93bjogJ21vdXNlZG93bicsXG4gIHRvcE1vdXNlTW92ZTogJ21vdXNlbW92ZScsXG4gIHRvcE1vdXNlT3V0OiAnbW91c2VvdXQnLFxuICB0b3BNb3VzZU92ZXI6ICdtb3VzZW92ZXInLFxuICB0b3BNb3VzZVVwOiAnbW91c2V1cCcsXG4gIHRvcFBhc3RlOiAncGFzdGUnLFxuICB0b3BQYXVzZTogJ3BhdXNlJyxcbiAgdG9wUGxheTogJ3BsYXknLFxuICB0b3BQbGF5aW5nOiAncGxheWluZycsXG4gIHRvcFByb2dyZXNzOiAncHJvZ3Jlc3MnLFxuICB0b3BSYXRlQ2hhbmdlOiAncmF0ZWNoYW5nZScsXG4gIHRvcFNjcm9sbDogJ3Njcm9sbCcsXG4gIHRvcFNlZWtlZDogJ3NlZWtlZCcsXG4gIHRvcFNlZWtpbmc6ICdzZWVraW5nJyxcbiAgdG9wU2VsZWN0aW9uQ2hhbmdlOiAnc2VsZWN0aW9uY2hhbmdlJyxcbiAgdG9wU3RhbGxlZDogJ3N0YWxsZWQnLFxuICB0b3BTdXNwZW5kOiAnc3VzcGVuZCcsXG4gIHRvcFRleHRJbnB1dDogJ3RleHRJbnB1dCcsXG4gIHRvcFRpbWVVcGRhdGU6ICd0aW1ldXBkYXRlJyxcbiAgdG9wVG91Y2hDYW5jZWw6ICd0b3VjaGNhbmNlbCcsXG4gIHRvcFRvdWNoRW5kOiAndG91Y2hlbmQnLFxuICB0b3BUb3VjaE1vdmU6ICd0b3VjaG1vdmUnLFxuICB0b3BUb3VjaFN0YXJ0OiAndG91Y2hzdGFydCcsXG4gIHRvcFZvbHVtZUNoYW5nZTogJ3ZvbHVtZWNoYW5nZScsXG4gIHRvcFdhaXRpbmc6ICd3YWl0aW5nJyxcbiAgdG9wV2hlZWw6ICd3aGVlbCdcbn07XG5cbi8qKlxuICogVG8gZW5zdXJlIG5vIGNvbmZsaWN0cyB3aXRoIG90aGVyIHBvdGVudGlhbCBSZWFjdCBpbnN0YW5jZXMgb24gdGhlIHBhZ2VcbiAqL1xudmFyIHRvcExpc3RlbmVyc0lES2V5ID0gJ19yZWFjdExpc3RlbmVyc0lEJyArIFN0cmluZyhNYXRoLnJhbmRvbSgpKS5zbGljZSgyKTtcblxuZnVuY3Rpb24gZ2V0TGlzdGVuaW5nRm9yRG9jdW1lbnQobW91bnRBdCkge1xuICAvLyBJbiBJRTgsIGBtb3VudEF0YCBpcyBhIGhvc3Qgb2JqZWN0IGFuZCBkb2Vzbid0IGhhdmUgYGhhc093blByb3BlcnR5YFxuICAvLyBkaXJlY3RseS5cbiAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW91bnRBdCwgdG9wTGlzdGVuZXJzSURLZXkpKSB7XG4gICAgbW91bnRBdFt0b3BMaXN0ZW5lcnNJREtleV0gPSByZWFjdFRvcExpc3RlbmVyc0NvdW50ZXIrKztcbiAgICBhbHJlYWR5TGlzdGVuaW5nVG9bbW91bnRBdFt0b3BMaXN0ZW5lcnNJREtleV1dID0ge307XG4gIH1cbiAgcmV0dXJuIGFscmVhZHlMaXN0ZW5pbmdUb1ttb3VudEF0W3RvcExpc3RlbmVyc0lES2V5XV07XG59XG5cbi8qKlxuICogYFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlcmAgaXMgdXNlZCB0byBhdHRhY2ggdG9wLWxldmVsIGV2ZW50IGxpc3RlbmVycy4gRm9yXG4gKiBleGFtcGxlOlxuICpcbiAqICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnB1dExpc3RlbmVyKCdteUlEJywgJ29uQ2xpY2snLCBteUZ1bmN0aW9uKTtcbiAqXG4gKiBUaGlzIHdvdWxkIGFsbG9jYXRlIGEgXCJyZWdpc3RyYXRpb25cIiBvZiBgKCdvbkNsaWNrJywgbXlGdW5jdGlvbilgIG9uICdteUlEJy5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xudmFyIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlciA9IGFzc2lnbih7fSwgUmVhY3RFdmVudEVtaXR0ZXJNaXhpbiwge1xuXG4gIC8qKlxuICAgKiBJbmplY3RhYmxlIGV2ZW50IGJhY2tlbmRcbiAgICovXG4gIFJlYWN0RXZlbnRMaXN0ZW5lcjogbnVsbCxcblxuICBpbmplY3Rpb246IHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gUmVhY3RFdmVudExpc3RlbmVyXG4gICAgICovXG4gICAgaW5qZWN0UmVhY3RFdmVudExpc3RlbmVyOiBmdW5jdGlvbiAoUmVhY3RFdmVudExpc3RlbmVyKSB7XG4gICAgICBSZWFjdEV2ZW50TGlzdGVuZXIuc2V0SGFuZGxlVG9wTGV2ZWwoUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmhhbmRsZVRvcExldmVsKTtcbiAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIgPSBSZWFjdEV2ZW50TGlzdGVuZXI7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIHdoZXRoZXIgb3Igbm90IGFueSBjcmVhdGVkIGNhbGxiYWNrcyBzaG91bGQgYmUgZW5hYmxlZC5cbiAgICpcbiAgICogQHBhcmFtIHtib29sZWFufSBlbmFibGVkIFRydWUgaWYgY2FsbGJhY2tzIHNob3VsZCBiZSBlbmFibGVkLlxuICAgKi9cbiAgc2V0RW5hYmxlZDogZnVuY3Rpb24gKGVuYWJsZWQpIHtcbiAgICBpZiAoUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lcikge1xuICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci5zZXRFbmFibGVkKGVuYWJsZWQpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBjYWxsYmFja3MgYXJlIGVuYWJsZWQuXG4gICAqL1xuICBpc0VuYWJsZWQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gISEoUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lciAmJiBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLmlzRW5hYmxlZCgpKTtcbiAgfSxcblxuICAvKipcbiAgICogV2UgbGlzdGVuIGZvciBidWJibGVkIHRvdWNoIGV2ZW50cyBvbiB0aGUgZG9jdW1lbnQgb2JqZWN0LlxuICAgKlxuICAgKiBGaXJlZm94IHY4LjAxIChhbmQgcG9zc2libHkgb3RoZXJzKSBleGhpYml0ZWQgc3RyYW5nZSBiZWhhdmlvciB3aGVuXG4gICAqIG1vdW50aW5nIGBvbm1vdXNlbW92ZWAgZXZlbnRzIGF0IHNvbWUgbm9kZSB0aGF0IHdhcyBub3QgdGhlIGRvY3VtZW50XG4gICAqIGVsZW1lbnQuIFRoZSBzeW1wdG9tcyB3ZXJlIHRoYXQgaWYgeW91ciBtb3VzZSBpcyBub3QgbW92aW5nIG92ZXIgc29tZXRoaW5nXG4gICAqIGNvbnRhaW5lZCB3aXRoaW4gdGhhdCBtb3VudCBwb2ludCAoZm9yIGV4YW1wbGUgb24gdGhlIGJhY2tncm91bmQpIHRoZVxuICAgKiB0b3AtbGV2ZWwgbGlzdGVuZXJzIGZvciBgb25tb3VzZW1vdmVgIHdvbid0IGJlIGNhbGxlZC4gSG93ZXZlciwgaWYgeW91XG4gICAqIHJlZ2lzdGVyIHRoZSBgbW91c2Vtb3ZlYCBvbiB0aGUgZG9jdW1lbnQgb2JqZWN0LCB0aGVuIGl0IHdpbGwgb2YgY291cnNlXG4gICAqIGNhdGNoIGFsbCBgbW91c2Vtb3ZlYHMuIFRoaXMgYWxvbmcgd2l0aCBpT1MgcXVpcmtzLCBqdXN0aWZpZXMgcmVzdHJpY3RpbmdcbiAgICogdG9wLWxldmVsIGxpc3RlbmVycyB0byB0aGUgZG9jdW1lbnQgb2JqZWN0IG9ubHksIGF0IGxlYXN0IGZvciB0aGVzZVxuICAgKiBtb3ZlbWVudCB0eXBlcyBvZiBldmVudHMgYW5kIHBvc3NpYmx5IGFsbCBldmVudHMuXG4gICAqXG4gICAqIEBzZWUgaHR0cDovL3d3dy5xdWlya3Ntb2RlLm9yZy9ibG9nL2FyY2hpdmVzLzIwMTAvMDkvY2xpY2tfZXZlbnRfZGVsLmh0bWxcbiAgICpcbiAgICogQWxzbywgYGtleXVwYC9ga2V5cHJlc3NgL2BrZXlkb3duYCBkbyBub3QgYnViYmxlIHRvIHRoZSB3aW5kb3cgb24gSUUsIGJ1dFxuICAgKiB0aGV5IGJ1YmJsZSB0byBkb2N1bWVudC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZ2lzdHJhdGlvbk5hbWUgTmFtZSBvZiBsaXN0ZW5lciAoZS5nLiBgb25DbGlja2ApLlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGVudERvY3VtZW50SGFuZGxlIERvY3VtZW50IHdoaWNoIG93bnMgdGhlIGNvbnRhaW5lclxuICAgKi9cbiAgbGlzdGVuVG86IGZ1bmN0aW9uIChyZWdpc3RyYXRpb25OYW1lLCBjb250ZW50RG9jdW1lbnRIYW5kbGUpIHtcbiAgICB2YXIgbW91bnRBdCA9IGNvbnRlbnREb2N1bWVudEhhbmRsZTtcbiAgICB2YXIgaXNMaXN0ZW5pbmcgPSBnZXRMaXN0ZW5pbmdGb3JEb2N1bWVudChtb3VudEF0KTtcbiAgICB2YXIgZGVwZW5kZW5jaWVzID0gRXZlbnRQbHVnaW5SZWdpc3RyeS5yZWdpc3RyYXRpb25OYW1lRGVwZW5kZW5jaWVzW3JlZ2lzdHJhdGlvbk5hbWVdO1xuXG4gICAgdmFyIHRvcExldmVsVHlwZXMgPSBFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGVwZW5kZW5jaWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGVwZW5kZW5jeSA9IGRlcGVuZGVuY2llc1tpXTtcbiAgICAgIGlmICghKGlzTGlzdGVuaW5nLmhhc093blByb3BlcnR5KGRlcGVuZGVuY3kpICYmIGlzTGlzdGVuaW5nW2RlcGVuZGVuY3ldKSkge1xuICAgICAgICBpZiAoZGVwZW5kZW5jeSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BXaGVlbCkge1xuICAgICAgICAgIGlmIChpc0V2ZW50U3VwcG9ydGVkKCd3aGVlbCcpKSB7XG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BXaGVlbCwgJ3doZWVsJywgbW91bnRBdCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChpc0V2ZW50U3VwcG9ydGVkKCdtb3VzZXdoZWVsJykpIHtcbiAgICAgICAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcEJ1YmJsZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcFdoZWVsLCAnbW91c2V3aGVlbCcsIG1vdW50QXQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGaXJlZm94IG5lZWRzIHRvIGNhcHR1cmUgYSBkaWZmZXJlbnQgbW91c2Ugc2Nyb2xsIGV2ZW50LlxuICAgICAgICAgICAgLy8gQHNlZSBodHRwOi8vd3d3LnF1aXJrc21vZGUub3JnL2RvbS9ldmVudHMvdGVzdHMvc2Nyb2xsLmh0bWxcbiAgICAgICAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcEJ1YmJsZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcFdoZWVsLCAnRE9NTW91c2VTY3JvbGwnLCBtb3VudEF0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoZGVwZW5kZW5jeSA9PT0gdG9wTGV2ZWxUeXBlcy50b3BTY3JvbGwpIHtcblxuICAgICAgICAgIGlmIChpc0V2ZW50U3VwcG9ydGVkKCdzY3JvbGwnLCB0cnVlKSkge1xuICAgICAgICAgICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQ2FwdHVyZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcFNjcm9sbCwgJ3Njcm9sbCcsIG1vdW50QXQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BTY3JvbGwsICdzY3JvbGwnLCBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLldJTkRPV19IQU5ETEUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChkZXBlbmRlbmN5ID09PSB0b3BMZXZlbFR5cGVzLnRvcEZvY3VzIHx8IGRlcGVuZGVuY3kgPT09IHRvcExldmVsVHlwZXMudG9wQmx1cikge1xuXG4gICAgICAgICAgaWYgKGlzRXZlbnRTdXBwb3J0ZWQoJ2ZvY3VzJywgdHJ1ZSkpIHtcbiAgICAgICAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcENhcHR1cmVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BGb2N1cywgJ2ZvY3VzJywgbW91bnRBdCk7XG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBDYXB0dXJlZEV2ZW50KHRvcExldmVsVHlwZXMudG9wQmx1ciwgJ2JsdXInLCBtb3VudEF0KTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGlzRXZlbnRTdXBwb3J0ZWQoJ2ZvY3VzaW4nKSkge1xuICAgICAgICAgICAgLy8gSUUgaGFzIGBmb2N1c2luYCBhbmQgYGZvY3Vzb3V0YCBldmVudHMgd2hpY2ggYnViYmxlLlxuICAgICAgICAgICAgLy8gQHNlZSBodHRwOi8vd3d3LnF1aXJrc21vZGUub3JnL2Jsb2cvYXJjaGl2ZXMvMjAwOC8wNC9kZWxlZ2F0aW5nX3RoZS5odG1sXG4gICAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQodG9wTGV2ZWxUeXBlcy50b3BGb2N1cywgJ2ZvY3VzaW4nLCBtb3VudEF0KTtcbiAgICAgICAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIudHJhcEJ1YmJsZWRFdmVudCh0b3BMZXZlbFR5cGVzLnRvcEJsdXIsICdmb2N1c291dCcsIG1vdW50QXQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHRvIG1ha2Ugc3VyZSBibHVyIGFuZCBmb2N1cyBldmVudCBsaXN0ZW5lcnMgYXJlIG9ubHkgYXR0YWNoZWQgb25jZVxuICAgICAgICAgIGlzTGlzdGVuaW5nW3RvcExldmVsVHlwZXMudG9wQmx1cl0gPSB0cnVlO1xuICAgICAgICAgIGlzTGlzdGVuaW5nW3RvcExldmVsVHlwZXMudG9wRm9jdXNdID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh0b3BFdmVudE1hcHBpbmcuaGFzT3duUHJvcGVydHkoZGVwZW5kZW5jeSkpIHtcbiAgICAgICAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBCdWJibGVkRXZlbnQoZGVwZW5kZW5jeSwgdG9wRXZlbnRNYXBwaW5nW2RlcGVuZGVuY3ldLCBtb3VudEF0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlzTGlzdGVuaW5nW2RlcGVuZGVuY3ldID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgdHJhcEJ1YmJsZWRFdmVudDogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgaGFuZGxlckJhc2VOYW1lLCBoYW5kbGUpIHtcbiAgICByZXR1cm4gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLlJlYWN0RXZlbnRMaXN0ZW5lci50cmFwQnViYmxlZEV2ZW50KHRvcExldmVsVHlwZSwgaGFuZGxlckJhc2VOYW1lLCBoYW5kbGUpO1xuICB9LFxuXG4gIHRyYXBDYXB0dXJlZEV2ZW50OiBmdW5jdGlvbiAodG9wTGV2ZWxUeXBlLCBoYW5kbGVyQmFzZU5hbWUsIGhhbmRsZSkge1xuICAgIHJldHVybiBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuUmVhY3RFdmVudExpc3RlbmVyLnRyYXBDYXB0dXJlZEV2ZW50KHRvcExldmVsVHlwZSwgaGFuZGxlckJhc2VOYW1lLCBoYW5kbGUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBMaXN0ZW5zIHRvIHdpbmRvdyBzY3JvbGwgYW5kIHJlc2l6ZSBldmVudHMuIFdlIGNhY2hlIHNjcm9sbCB2YWx1ZXMgc28gdGhhdFxuICAgKiBhcHBsaWNhdGlvbiBjb2RlIGNhbiBhY2Nlc3MgdGhlbSB3aXRob3V0IHRyaWdnZXJpbmcgcmVmbG93cy5cbiAgICpcbiAgICogTk9URTogU2Nyb2xsIGV2ZW50cyBkbyBub3QgYnViYmxlLlxuICAgKlxuICAgKiBAc2VlIGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvZG9tL2V2ZW50cy9zY3JvbGwuaHRtbFxuICAgKi9cbiAgZW5zdXJlU2Nyb2xsVmFsdWVNb25pdG9yaW5nOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFpc01vbml0b3JpbmdTY3JvbGxWYWx1ZSkge1xuICAgICAgdmFyIHJlZnJlc2ggPSBWaWV3cG9ydE1ldHJpY3MucmVmcmVzaFNjcm9sbFZhbHVlcztcbiAgICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5SZWFjdEV2ZW50TGlzdGVuZXIubW9uaXRvclNjcm9sbFZhbHVlKHJlZnJlc2gpO1xuICAgICAgaXNNb25pdG9yaW5nU2Nyb2xsVmFsdWUgPSB0cnVlO1xuICAgIH1cbiAgfSxcblxuICBldmVudE5hbWVEaXNwYXRjaENvbmZpZ3M6IEV2ZW50UGx1Z2luSHViLmV2ZW50TmFtZURpc3BhdGNoQ29uZmlncyxcblxuICByZWdpc3RyYXRpb25OYW1lTW9kdWxlczogRXZlbnRQbHVnaW5IdWIucmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMsXG5cbiAgcHV0TGlzdGVuZXI6IEV2ZW50UGx1Z2luSHViLnB1dExpc3RlbmVyLFxuXG4gIGdldExpc3RlbmVyOiBFdmVudFBsdWdpbkh1Yi5nZXRMaXN0ZW5lcixcblxuICBkZWxldGVMaXN0ZW5lcjogRXZlbnRQbHVnaW5IdWIuZGVsZXRlTGlzdGVuZXIsXG5cbiAgZGVsZXRlQWxsTGlzdGVuZXJzOiBFdmVudFBsdWdpbkh1Yi5kZWxldGVBbGxMaXN0ZW5lcnNcblxufSk7XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIsICdSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXInLCB7XG4gIHB1dExpc3RlbmVyOiAncHV0TGlzdGVuZXInLFxuICBkZWxldGVMaXN0ZW5lcjogJ2RlbGV0ZUxpc3RlbmVyJ1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENoaWxkUmVjb25jaWxlclxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFJlY29uY2lsZXIgPSByZXF1aXJlKCcuL1JlYWN0UmVjb25jaWxlcicpO1xuXG52YXIgaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCcpO1xudmFyIHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9zaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudCcpO1xudmFyIHRyYXZlcnNlQWxsQ2hpbGRyZW4gPSByZXF1aXJlKCcuL3RyYXZlcnNlQWxsQ2hpbGRyZW4nKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5mdW5jdGlvbiBpbnN0YW50aWF0ZUNoaWxkKGNoaWxkSW5zdGFuY2VzLCBjaGlsZCwgbmFtZSkge1xuICAvLyBXZSBmb3VuZCBhIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAgdmFyIGtleVVuaXF1ZSA9IGNoaWxkSW5zdGFuY2VzW25hbWVdID09PSB1bmRlZmluZWQ7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoa2V5VW5pcXVlLCAnZmxhdHRlbkNoaWxkcmVuKC4uLik6IEVuY291bnRlcmVkIHR3byBjaGlsZHJlbiB3aXRoIHRoZSBzYW1lIGtleSwgJyArICdgJXNgLiBDaGlsZCBrZXlzIG11c3QgYmUgdW5pcXVlOyB3aGVuIHR3byBjaGlsZHJlbiBzaGFyZSBhIGtleSwgb25seSAnICsgJ3RoZSBmaXJzdCBjaGlsZCB3aWxsIGJlIHVzZWQuJywgbmFtZSkgOiB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKGNoaWxkICE9IG51bGwgJiYga2V5VW5pcXVlKSB7XG4gICAgY2hpbGRJbnN0YW5jZXNbbmFtZV0gPSBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50KGNoaWxkLCBudWxsKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlYWN0Q2hpbGRSZWNvbmNpbGVyIHByb3ZpZGVzIGhlbHBlcnMgZm9yIGluaXRpYWxpemluZyBvciB1cGRhdGluZyBhIHNldCBvZlxuICogY2hpbGRyZW4uIEl0cyBvdXRwdXQgaXMgc3VpdGFibGUgZm9yIHBhc3NpbmcgaXQgb250byBSZWFjdE11bHRpQ2hpbGQgd2hpY2hcbiAqIGRvZXMgZGlmZmVkIHJlb3JkZXJpbmcgYW5kIGluc2VydGlvbi5cbiAqL1xudmFyIFJlYWN0Q2hpbGRSZWNvbmNpbGVyID0ge1xuICAvKipcbiAgICogR2VuZXJhdGVzIGEgXCJtb3VudCBpbWFnZVwiIGZvciBlYWNoIG9mIHRoZSBzdXBwbGllZCBjaGlsZHJlbi4gSW4gdGhlIGNhc2VcbiAgICogb2YgYFJlYWN0RE9NQ29tcG9uZW50YCwgYSBtb3VudCBpbWFnZSBpcyBhIHN0cmluZyBvZiBtYXJrdXAuXG4gICAqXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmVzdGVkQ2hpbGROb2RlcyBOZXN0ZWQgY2hpbGQgbWFwcy5cbiAgICogQHJldHVybiB7P29iamVjdH0gQSBzZXQgb2YgY2hpbGQgaW5zdGFuY2VzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGluc3RhbnRpYXRlQ2hpbGRyZW46IGZ1bmN0aW9uIChuZXN0ZWRDaGlsZE5vZGVzLCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIGlmIChuZXN0ZWRDaGlsZE5vZGVzID09IG51bGwpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB2YXIgY2hpbGRJbnN0YW5jZXMgPSB7fTtcbiAgICB0cmF2ZXJzZUFsbENoaWxkcmVuKG5lc3RlZENoaWxkTm9kZXMsIGluc3RhbnRpYXRlQ2hpbGQsIGNoaWxkSW5zdGFuY2VzKTtcbiAgICByZXR1cm4gY2hpbGRJbnN0YW5jZXM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZXMgdGhlIHJlbmRlcmVkIGNoaWxkcmVuIGFuZCByZXR1cm5zIGEgbmV3IHNldCBvZiBjaGlsZHJlbi5cbiAgICpcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBwcmV2Q2hpbGRyZW4gUHJldmlvdXNseSBpbml0aWFsaXplZCBzZXQgb2YgY2hpbGRyZW4uXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dENoaWxkcmVuIEZsYXQgY2hpbGQgZWxlbWVudCBtYXBzLlxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG4gICAqIEByZXR1cm4gez9vYmplY3R9IEEgbmV3IHNldCBvZiBjaGlsZCBpbnN0YW5jZXMuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdXBkYXRlQ2hpbGRyZW46IGZ1bmN0aW9uIChwcmV2Q2hpbGRyZW4sIG5leHRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAvLyBXZSBjdXJyZW50bHkgZG9uJ3QgaGF2ZSBhIHdheSB0byB0cmFjayBtb3ZlcyBoZXJlIGJ1dCBpZiB3ZSB1c2UgaXRlcmF0b3JzXG4gICAgLy8gaW5zdGVhZCBvZiBmb3IuLmluIHdlIGNhbiB6aXAgdGhlIGl0ZXJhdG9ycyBhbmQgY2hlY2sgaWYgYW4gaXRlbSBoYXNcbiAgICAvLyBtb3ZlZC5cbiAgICAvLyBUT0RPOiBJZiBub3RoaW5nIGhhcyBjaGFuZ2VkLCByZXR1cm4gdGhlIHByZXZDaGlsZHJlbiBvYmplY3Qgc28gdGhhdCB3ZVxuICAgIC8vIGNhbiBxdWlja2x5IGJhaWxvdXQgaWYgbm90aGluZyBoYXMgY2hhbmdlZC5cbiAgICBpZiAoIW5leHRDaGlsZHJlbiAmJiAhcHJldkNoaWxkcmVuKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdmFyIG5hbWU7XG4gICAgZm9yIChuYW1lIGluIG5leHRDaGlsZHJlbikge1xuICAgICAgaWYgKCFuZXh0Q2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICB2YXIgcHJldkNoaWxkID0gcHJldkNoaWxkcmVuICYmIHByZXZDaGlsZHJlbltuYW1lXTtcbiAgICAgIHZhciBwcmV2RWxlbWVudCA9IHByZXZDaGlsZCAmJiBwcmV2Q2hpbGQuX2N1cnJlbnRFbGVtZW50O1xuICAgICAgdmFyIG5leHRFbGVtZW50ID0gbmV4dENoaWxkcmVuW25hbWVdO1xuICAgICAgaWYgKHByZXZDaGlsZCAhPSBudWxsICYmIHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50KHByZXZFbGVtZW50LCBuZXh0RWxlbWVudCkpIHtcbiAgICAgICAgUmVhY3RSZWNvbmNpbGVyLnJlY2VpdmVDb21wb25lbnQocHJldkNoaWxkLCBuZXh0RWxlbWVudCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgICBuZXh0Q2hpbGRyZW5bbmFtZV0gPSBwcmV2Q2hpbGQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocHJldkNoaWxkKSB7XG4gICAgICAgICAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQocHJldkNoaWxkLCBuYW1lKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgY2hpbGQgbXVzdCBiZSBpbnN0YW50aWF0ZWQgYmVmb3JlIGl0J3MgbW91bnRlZC5cbiAgICAgICAgdmFyIG5leHRDaGlsZEluc3RhbmNlID0gaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudChuZXh0RWxlbWVudCwgbnVsbCk7XG4gICAgICAgIG5leHRDaGlsZHJlbltuYW1lXSA9IG5leHRDaGlsZEluc3RhbmNlO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBVbm1vdW50IGNoaWxkcmVuIHRoYXQgYXJlIG5vIGxvbmdlciBwcmVzZW50LlxuICAgIGZvciAobmFtZSBpbiBwcmV2Q2hpbGRyZW4pIHtcbiAgICAgIGlmIChwcmV2Q2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkgJiYgIShuZXh0Q2hpbGRyZW4gJiYgbmV4dENoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSkge1xuICAgICAgICBSZWFjdFJlY29uY2lsZXIudW5tb3VudENvbXBvbmVudChwcmV2Q2hpbGRyZW5bbmFtZV0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbmV4dENoaWxkcmVuO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVbm1vdW50cyBhbGwgcmVuZGVyZWQgY2hpbGRyZW4uIFRoaXMgc2hvdWxkIGJlIHVzZWQgdG8gY2xlYW4gdXAgY2hpbGRyZW5cbiAgICogd2hlbiB0aGlzIGNvbXBvbmVudCBpcyB1bm1vdW50ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7P29iamVjdH0gcmVuZGVyZWRDaGlsZHJlbiBQcmV2aW91c2x5IGluaXRpYWxpemVkIHNldCBvZiBjaGlsZHJlbi5cbiAgICogQGludGVybmFsXG4gICAqL1xuICB1bm1vdW50Q2hpbGRyZW46IGZ1bmN0aW9uIChyZW5kZXJlZENoaWxkcmVuKSB7XG4gICAgZm9yICh2YXIgbmFtZSBpbiByZW5kZXJlZENoaWxkcmVuKSB7XG4gICAgICBpZiAocmVuZGVyZWRDaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICB2YXIgcmVuZGVyZWRDaGlsZCA9IHJlbmRlcmVkQ2hpbGRyZW5bbmFtZV07XG4gICAgICAgIFJlYWN0UmVjb25jaWxlci51bm1vdW50Q29tcG9uZW50KHJlbmRlcmVkQ2hpbGQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0Q2hpbGRSZWNvbmNpbGVyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENoaWxkcmVuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUG9vbGVkQ2xhc3MgPSByZXF1aXJlKCcuL1Bvb2xlZENsYXNzJyk7XG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcblxudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eUZ1bmN0aW9uJyk7XG52YXIgdHJhdmVyc2VBbGxDaGlsZHJlbiA9IHJlcXVpcmUoJy4vdHJhdmVyc2VBbGxDaGlsZHJlbicpO1xuXG52YXIgdHdvQXJndW1lbnRQb29sZXIgPSBQb29sZWRDbGFzcy50d29Bcmd1bWVudFBvb2xlcjtcbnZhciBmb3VyQXJndW1lbnRQb29sZXIgPSBQb29sZWRDbGFzcy5mb3VyQXJndW1lbnRQb29sZXI7XG5cbnZhciB1c2VyUHJvdmlkZWRLZXlFc2NhcGVSZWdleCA9IC9cXC8oPyFcXC8pL2c7XG5mdW5jdGlvbiBlc2NhcGVVc2VyUHJvdmlkZWRLZXkodGV4dCkge1xuICByZXR1cm4gKCcnICsgdGV4dCkucmVwbGFjZSh1c2VyUHJvdmlkZWRLZXlFc2NhcGVSZWdleCwgJy8vJyk7XG59XG5cbi8qKlxuICogUG9vbGVkQ2xhc3MgcmVwcmVzZW50aW5nIHRoZSBib29ra2VlcGluZyBhc3NvY2lhdGVkIHdpdGggcGVyZm9ybWluZyBhIGNoaWxkXG4gKiB0cmF2ZXJzYWwuIEFsbG93cyBhdm9pZGluZyBiaW5kaW5nIGNhbGxiYWNrcy5cbiAqXG4gKiBAY29uc3RydWN0b3IgRm9yRWFjaEJvb2tLZWVwaW5nXG4gKiBAcGFyYW0geyFmdW5jdGlvbn0gZm9yRWFjaEZ1bmN0aW9uIEZ1bmN0aW9uIHRvIHBlcmZvcm0gdHJhdmVyc2FsIHdpdGguXG4gKiBAcGFyYW0gez8qfSBmb3JFYWNoQ29udGV4dCBDb250ZXh0IHRvIHBlcmZvcm0gY29udGV4dCB3aXRoLlxuICovXG5mdW5jdGlvbiBGb3JFYWNoQm9va0tlZXBpbmcoZm9yRWFjaEZ1bmN0aW9uLCBmb3JFYWNoQ29udGV4dCkge1xuICB0aGlzLmZ1bmMgPSBmb3JFYWNoRnVuY3Rpb247XG4gIHRoaXMuY29udGV4dCA9IGZvckVhY2hDb250ZXh0O1xuICB0aGlzLmNvdW50ID0gMDtcbn1cbkZvckVhY2hCb29rS2VlcGluZy5wcm90b3R5cGUuZGVzdHJ1Y3RvciA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5mdW5jID0gbnVsbDtcbiAgdGhpcy5jb250ZXh0ID0gbnVsbDtcbiAgdGhpcy5jb3VudCA9IDA7XG59O1xuUG9vbGVkQ2xhc3MuYWRkUG9vbGluZ1RvKEZvckVhY2hCb29rS2VlcGluZywgdHdvQXJndW1lbnRQb29sZXIpO1xuXG5mdW5jdGlvbiBmb3JFYWNoU2luZ2xlQ2hpbGQoYm9va0tlZXBpbmcsIGNoaWxkLCBuYW1lKSB7XG4gIHZhciBmdW5jID0gYm9va0tlZXBpbmcuZnVuYztcbiAgdmFyIGNvbnRleHQgPSBib29rS2VlcGluZy5jb250ZXh0O1xuXG4gIGZ1bmMuY2FsbChjb250ZXh0LCBjaGlsZCwgYm9va0tlZXBpbmcuY291bnQrKyk7XG59XG5cbi8qKlxuICogSXRlcmF0ZXMgdGhyb3VnaCBjaGlsZHJlbiB0aGF0IGFyZSB0eXBpY2FsbHkgc3BlY2lmaWVkIGFzIGBwcm9wcy5jaGlsZHJlbmAuXG4gKlxuICogVGhlIHByb3ZpZGVkIGZvckVhY2hGdW5jKGNoaWxkLCBpbmRleCkgd2lsbCBiZSBjYWxsZWQgZm9yIGVhY2hcbiAqIGxlYWYgY2hpbGQuXG4gKlxuICogQHBhcmFtIHs/Kn0gY2hpbGRyZW4gQ2hpbGRyZW4gdHJlZSBjb250YWluZXIuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCosIGludCl9IGZvckVhY2hGdW5jXG4gKiBAcGFyYW0geyp9IGZvckVhY2hDb250ZXh0IENvbnRleHQgZm9yIGZvckVhY2hDb250ZXh0LlxuICovXG5mdW5jdGlvbiBmb3JFYWNoQ2hpbGRyZW4oY2hpbGRyZW4sIGZvckVhY2hGdW5jLCBmb3JFYWNoQ29udGV4dCkge1xuICBpZiAoY2hpbGRyZW4gPT0gbnVsbCkge1xuICAgIHJldHVybiBjaGlsZHJlbjtcbiAgfVxuICB2YXIgdHJhdmVyc2VDb250ZXh0ID0gRm9yRWFjaEJvb2tLZWVwaW5nLmdldFBvb2xlZChmb3JFYWNoRnVuYywgZm9yRWFjaENvbnRleHQpO1xuICB0cmF2ZXJzZUFsbENoaWxkcmVuKGNoaWxkcmVuLCBmb3JFYWNoU2luZ2xlQ2hpbGQsIHRyYXZlcnNlQ29udGV4dCk7XG4gIEZvckVhY2hCb29rS2VlcGluZy5yZWxlYXNlKHRyYXZlcnNlQ29udGV4dCk7XG59XG5cbi8qKlxuICogUG9vbGVkQ2xhc3MgcmVwcmVzZW50aW5nIHRoZSBib29ra2VlcGluZyBhc3NvY2lhdGVkIHdpdGggcGVyZm9ybWluZyBhIGNoaWxkXG4gKiBtYXBwaW5nLiBBbGxvd3MgYXZvaWRpbmcgYmluZGluZyBjYWxsYmFja3MuXG4gKlxuICogQGNvbnN0cnVjdG9yIE1hcEJvb2tLZWVwaW5nXG4gKiBAcGFyYW0geyEqfSBtYXBSZXN1bHQgT2JqZWN0IGNvbnRhaW5pbmcgdGhlIG9yZGVyZWQgbWFwIG9mIHJlc3VsdHMuXG4gKiBAcGFyYW0geyFmdW5jdGlvbn0gbWFwRnVuY3Rpb24gRnVuY3Rpb24gdG8gcGVyZm9ybSBtYXBwaW5nIHdpdGguXG4gKiBAcGFyYW0gez8qfSBtYXBDb250ZXh0IENvbnRleHQgdG8gcGVyZm9ybSBtYXBwaW5nIHdpdGguXG4gKi9cbmZ1bmN0aW9uIE1hcEJvb2tLZWVwaW5nKG1hcFJlc3VsdCwga2V5UHJlZml4LCBtYXBGdW5jdGlvbiwgbWFwQ29udGV4dCkge1xuICB0aGlzLnJlc3VsdCA9IG1hcFJlc3VsdDtcbiAgdGhpcy5rZXlQcmVmaXggPSBrZXlQcmVmaXg7XG4gIHRoaXMuZnVuYyA9IG1hcEZ1bmN0aW9uO1xuICB0aGlzLmNvbnRleHQgPSBtYXBDb250ZXh0O1xuICB0aGlzLmNvdW50ID0gMDtcbn1cbk1hcEJvb2tLZWVwaW5nLnByb3RvdHlwZS5kZXN0cnVjdG9yID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLnJlc3VsdCA9IG51bGw7XG4gIHRoaXMua2V5UHJlZml4ID0gbnVsbDtcbiAgdGhpcy5mdW5jID0gbnVsbDtcbiAgdGhpcy5jb250ZXh0ID0gbnVsbDtcbiAgdGhpcy5jb3VudCA9IDA7XG59O1xuUG9vbGVkQ2xhc3MuYWRkUG9vbGluZ1RvKE1hcEJvb2tLZWVwaW5nLCBmb3VyQXJndW1lbnRQb29sZXIpO1xuXG5mdW5jdGlvbiBtYXBTaW5nbGVDaGlsZEludG9Db250ZXh0KGJvb2tLZWVwaW5nLCBjaGlsZCwgY2hpbGRLZXkpIHtcbiAgdmFyIHJlc3VsdCA9IGJvb2tLZWVwaW5nLnJlc3VsdDtcbiAgdmFyIGtleVByZWZpeCA9IGJvb2tLZWVwaW5nLmtleVByZWZpeDtcbiAgdmFyIGZ1bmMgPSBib29rS2VlcGluZy5mdW5jO1xuICB2YXIgY29udGV4dCA9IGJvb2tLZWVwaW5nLmNvbnRleHQ7XG5cbiAgdmFyIG1hcHBlZENoaWxkID0gZnVuYy5jYWxsKGNvbnRleHQsIGNoaWxkLCBib29rS2VlcGluZy5jb3VudCsrKTtcbiAgaWYgKEFycmF5LmlzQXJyYXkobWFwcGVkQ2hpbGQpKSB7XG4gICAgbWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbChtYXBwZWRDaGlsZCwgcmVzdWx0LCBjaGlsZEtleSwgZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0FyZ3VtZW50KTtcbiAgfSBlbHNlIGlmIChtYXBwZWRDaGlsZCAhPSBudWxsKSB7XG4gICAgaWYgKFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChtYXBwZWRDaGlsZCkpIHtcbiAgICAgIG1hcHBlZENoaWxkID0gUmVhY3RFbGVtZW50LmNsb25lQW5kUmVwbGFjZUtleShtYXBwZWRDaGlsZCxcbiAgICAgIC8vIEtlZXAgYm90aCB0aGUgKG1hcHBlZCkgYW5kIG9sZCBrZXlzIGlmIHRoZXkgZGlmZmVyLCBqdXN0IGFzXG4gICAgICAvLyB0cmF2ZXJzZUFsbENoaWxkcmVuIHVzZWQgdG8gZG8gZm9yIG9iamVjdHMgYXMgY2hpbGRyZW5cbiAgICAgIGtleVByZWZpeCArIChtYXBwZWRDaGlsZCAhPT0gY2hpbGQgPyBlc2NhcGVVc2VyUHJvdmlkZWRLZXkobWFwcGVkQ2hpbGQua2V5IHx8ICcnKSArICcvJyA6ICcnKSArIGNoaWxkS2V5KTtcbiAgICB9XG4gICAgcmVzdWx0LnB1c2gobWFwcGVkQ2hpbGQpO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1hcEludG9XaXRoS2V5UHJlZml4SW50ZXJuYWwoY2hpbGRyZW4sIGFycmF5LCBwcmVmaXgsIGZ1bmMsIGNvbnRleHQpIHtcbiAgdmFyIGVzY2FwZWRQcmVmaXggPSAnJztcbiAgaWYgKHByZWZpeCAhPSBudWxsKSB7XG4gICAgZXNjYXBlZFByZWZpeCA9IGVzY2FwZVVzZXJQcm92aWRlZEtleShwcmVmaXgpICsgJy8nO1xuICB9XG4gIHZhciB0cmF2ZXJzZUNvbnRleHQgPSBNYXBCb29rS2VlcGluZy5nZXRQb29sZWQoYXJyYXksIGVzY2FwZWRQcmVmaXgsIGZ1bmMsIGNvbnRleHQpO1xuICB0cmF2ZXJzZUFsbENoaWxkcmVuKGNoaWxkcmVuLCBtYXBTaW5nbGVDaGlsZEludG9Db250ZXh0LCB0cmF2ZXJzZUNvbnRleHQpO1xuICBNYXBCb29rS2VlcGluZy5yZWxlYXNlKHRyYXZlcnNlQ29udGV4dCk7XG59XG5cbi8qKlxuICogTWFwcyBjaGlsZHJlbiB0aGF0IGFyZSB0eXBpY2FsbHkgc3BlY2lmaWVkIGFzIGBwcm9wcy5jaGlsZHJlbmAuXG4gKlxuICogVGhlIHByb3ZpZGVkIG1hcEZ1bmN0aW9uKGNoaWxkLCBrZXksIGluZGV4KSB3aWxsIGJlIGNhbGxlZCBmb3IgZWFjaFxuICogbGVhZiBjaGlsZC5cbiAqXG4gKiBAcGFyYW0gez8qfSBjaGlsZHJlbiBDaGlsZHJlbiB0cmVlIGNvbnRhaW5lci5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oKiwgaW50KX0gZnVuYyBUaGUgbWFwIGZ1bmN0aW9uLlxuICogQHBhcmFtIHsqfSBjb250ZXh0IENvbnRleHQgZm9yIG1hcEZ1bmN0aW9uLlxuICogQHJldHVybiB7b2JqZWN0fSBPYmplY3QgY29udGFpbmluZyB0aGUgb3JkZXJlZCBtYXAgb2YgcmVzdWx0cy5cbiAqL1xuZnVuY3Rpb24gbWFwQ2hpbGRyZW4oY2hpbGRyZW4sIGZ1bmMsIGNvbnRleHQpIHtcbiAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIH1cbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBtYXBJbnRvV2l0aEtleVByZWZpeEludGVybmFsKGNoaWxkcmVuLCByZXN1bHQsIG51bGwsIGZ1bmMsIGNvbnRleHQpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBmb3JFYWNoU2luZ2xlQ2hpbGREdW1teSh0cmF2ZXJzZUNvbnRleHQsIGNoaWxkLCBuYW1lKSB7XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIENvdW50IHRoZSBudW1iZXIgb2YgY2hpbGRyZW4gdGhhdCBhcmUgdHlwaWNhbGx5IHNwZWNpZmllZCBhc1xuICogYHByb3BzLmNoaWxkcmVuYC5cbiAqXG4gKiBAcGFyYW0gez8qfSBjaGlsZHJlbiBDaGlsZHJlbiB0cmVlIGNvbnRhaW5lci5cbiAqIEByZXR1cm4ge251bWJlcn0gVGhlIG51bWJlciBvZiBjaGlsZHJlbi5cbiAqL1xuZnVuY3Rpb24gY291bnRDaGlsZHJlbihjaGlsZHJlbiwgY29udGV4dCkge1xuICByZXR1cm4gdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgZm9yRWFjaFNpbmdsZUNoaWxkRHVtbXksIG51bGwpO1xufVxuXG4vKipcbiAqIEZsYXR0ZW4gYSBjaGlsZHJlbiBvYmplY3QgKHR5cGljYWxseSBzcGVjaWZpZWQgYXMgYHByb3BzLmNoaWxkcmVuYCkgYW5kXG4gKiByZXR1cm4gYW4gYXJyYXkgd2l0aCBhcHByb3ByaWF0ZWx5IHJlLWtleWVkIGNoaWxkcmVuLlxuICovXG5mdW5jdGlvbiB0b0FycmF5KGNoaWxkcmVuKSB7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgbWFwSW50b1dpdGhLZXlQcmVmaXhJbnRlcm5hbChjaGlsZHJlbiwgcmVzdWx0LCBudWxsLCBlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zQXJndW1lbnQpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG52YXIgUmVhY3RDaGlsZHJlbiA9IHtcbiAgZm9yRWFjaDogZm9yRWFjaENoaWxkcmVuLFxuICBtYXA6IG1hcENoaWxkcmVuLFxuICBtYXBJbnRvV2l0aEtleVByZWZpeEludGVybmFsOiBtYXBJbnRvV2l0aEtleVByZWZpeEludGVybmFsLFxuICBjb3VudDogY291bnRDaGlsZHJlbixcbiAgdG9BcnJheTogdG9BcnJheVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENoaWxkcmVuOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENsYXNzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50Jyk7XG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdFByb3BUeXBlTG9jYXRpb25zID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlTG9jYXRpb25zJyk7XG52YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXMgPSByZXF1aXJlKCcuL1JlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzJyk7XG52YXIgUmVhY3ROb29wVXBkYXRlUXVldWUgPSByZXF1aXJlKCcuL1JlYWN0Tm9vcFVwZGF0ZVF1ZXVlJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBlbXB0eU9iamVjdCA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5T2JqZWN0Jyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIga2V5TWlycm9yID0gcmVxdWlyZSgnZmJqcy9saWIva2V5TWlycm9yJyk7XG52YXIga2V5T2YgPSByZXF1aXJlKCdmYmpzL2xpYi9rZXlPZicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbnZhciBNSVhJTlNfS0VZID0ga2V5T2YoeyBtaXhpbnM6IG51bGwgfSk7XG5cbi8qKlxuICogUG9saWNpZXMgdGhhdCBkZXNjcmliZSBtZXRob2RzIGluIGBSZWFjdENsYXNzSW50ZXJmYWNlYC5cbiAqL1xudmFyIFNwZWNQb2xpY3kgPSBrZXlNaXJyb3Ioe1xuICAvKipcbiAgICogVGhlc2UgbWV0aG9kcyBtYXkgYmUgZGVmaW5lZCBvbmx5IG9uY2UgYnkgdGhlIGNsYXNzIHNwZWNpZmljYXRpb24gb3IgbWl4aW4uXG4gICAqL1xuICBERUZJTkVfT05DRTogbnVsbCxcbiAgLyoqXG4gICAqIFRoZXNlIG1ldGhvZHMgbWF5IGJlIGRlZmluZWQgYnkgYm90aCB0aGUgY2xhc3Mgc3BlY2lmaWNhdGlvbiBhbmQgbWl4aW5zLlxuICAgKiBTdWJzZXF1ZW50IGRlZmluaXRpb25zIHdpbGwgYmUgY2hhaW5lZC4gVGhlc2UgbWV0aG9kcyBtdXN0IHJldHVybiB2b2lkLlxuICAgKi9cbiAgREVGSU5FX01BTlk6IG51bGwsXG4gIC8qKlxuICAgKiBUaGVzZSBtZXRob2RzIGFyZSBvdmVycmlkaW5nIHRoZSBiYXNlIGNsYXNzLlxuICAgKi9cbiAgT1ZFUlJJREVfQkFTRTogbnVsbCxcbiAgLyoqXG4gICAqIFRoZXNlIG1ldGhvZHMgYXJlIHNpbWlsYXIgdG8gREVGSU5FX01BTlksIGV4Y2VwdCB3ZSBhc3N1bWUgdGhleSByZXR1cm5cbiAgICogb2JqZWN0cy4gV2UgdHJ5IHRvIG1lcmdlIHRoZSBrZXlzIG9mIHRoZSByZXR1cm4gdmFsdWVzIG9mIGFsbCB0aGUgbWl4ZWQgaW5cbiAgICogZnVuY3Rpb25zLiBJZiB0aGVyZSBpcyBhIGtleSBjb25mbGljdCB3ZSB0aHJvdy5cbiAgICovXG4gIERFRklORV9NQU5ZX01FUkdFRDogbnVsbFxufSk7XG5cbnZhciBpbmplY3RlZE1peGlucyA9IFtdO1xuXG52YXIgd2FybmVkU2V0UHJvcHMgPSBmYWxzZTtcbmZ1bmN0aW9uIHdhcm5TZXRQcm9wcygpIHtcbiAgaWYgKCF3YXJuZWRTZXRQcm9wcykge1xuICAgIHdhcm5lZFNldFByb3BzID0gdHJ1ZTtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ3NldFByb3BzKC4uLikgYW5kIHJlcGxhY2VQcm9wcyguLi4pIGFyZSBkZXByZWNhdGVkLiAnICsgJ0luc3RlYWQsIGNhbGwgcmVuZGVyIGFnYWluIGF0IHRoZSB0b3AgbGV2ZWwuJykgOiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBDb21wb3NpdGUgY29tcG9uZW50cyBhcmUgaGlnaGVyLWxldmVsIGNvbXBvbmVudHMgdGhhdCBjb21wb3NlIG90aGVyIGNvbXBvc2l0ZVxuICogb3IgbmF0aXZlIGNvbXBvbmVudHMuXG4gKlxuICogVG8gY3JlYXRlIGEgbmV3IHR5cGUgb2YgYFJlYWN0Q2xhc3NgLCBwYXNzIGEgc3BlY2lmaWNhdGlvbiBvZlxuICogeW91ciBuZXcgY2xhc3MgdG8gYFJlYWN0LmNyZWF0ZUNsYXNzYC4gVGhlIG9ubHkgcmVxdWlyZW1lbnQgb2YgeW91ciBjbGFzc1xuICogc3BlY2lmaWNhdGlvbiBpcyB0aGF0IHlvdSBpbXBsZW1lbnQgYSBgcmVuZGVyYCBtZXRob2QuXG4gKlxuICogICB2YXIgTXlDb21wb25lbnQgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gKiAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAqICAgICAgIHJldHVybiA8ZGl2PkhlbGxvIFdvcmxkPC9kaXY+O1xuICogICAgIH1cbiAqICAgfSk7XG4gKlxuICogVGhlIGNsYXNzIHNwZWNpZmljYXRpb24gc3VwcG9ydHMgYSBzcGVjaWZpYyBwcm90b2NvbCBvZiBtZXRob2RzIHRoYXQgaGF2ZVxuICogc3BlY2lhbCBtZWFuaW5nIChlLmcuIGByZW5kZXJgKS4gU2VlIGBSZWFjdENsYXNzSW50ZXJmYWNlYCBmb3JcbiAqIG1vcmUgdGhlIGNvbXByZWhlbnNpdmUgcHJvdG9jb2wuIEFueSBvdGhlciBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzIGluIHRoZVxuICogY2xhc3Mgc3BlY2lmaWNhdGlvbiB3aWxsIGJlIGF2YWlsYWJsZSBvbiB0aGUgcHJvdG90eXBlLlxuICpcbiAqIEBpbnRlcmZhY2UgUmVhY3RDbGFzc0ludGVyZmFjZVxuICogQGludGVybmFsXG4gKi9cbnZhciBSZWFjdENsYXNzSW50ZXJmYWNlID0ge1xuXG4gIC8qKlxuICAgKiBBbiBhcnJheSBvZiBNaXhpbiBvYmplY3RzIHRvIGluY2x1ZGUgd2hlbiBkZWZpbmluZyB5b3VyIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHR5cGUge2FycmF5fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIG1peGluczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogQW4gb2JqZWN0IGNvbnRhaW5pbmcgcHJvcGVydGllcyBhbmQgbWV0aG9kcyB0aGF0IHNob3VsZCBiZSBkZWZpbmVkIG9uXG4gICAqIHRoZSBjb21wb25lbnQncyBjb25zdHJ1Y3RvciBpbnN0ZWFkIG9mIGl0cyBwcm90b3R5cGUgKHN0YXRpYyBtZXRob2RzKS5cbiAgICpcbiAgICogQHR5cGUge29iamVjdH1cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBzdGF0aWNzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBEZWZpbml0aW9uIG9mIHByb3AgdHlwZXMgZm9yIHRoaXMgY29tcG9uZW50LlxuICAgKlxuICAgKiBAdHlwZSB7b2JqZWN0fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIHByb3BUeXBlczogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogRGVmaW5pdGlvbiBvZiBjb250ZXh0IHR5cGVzIGZvciB0aGlzIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHR5cGUge29iamVjdH1cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBjb250ZXh0VHlwZXM6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIERlZmluaXRpb24gb2YgY29udGV4dCB0eXBlcyB0aGlzIGNvbXBvbmVudCBzZXRzIGZvciBpdHMgY2hpbGRyZW4uXG4gICAqXG4gICAqIEB0eXBlIHtvYmplY3R9XG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgY2hpbGRDb250ZXh0VHlwZXM6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLy8gPT09PSBEZWZpbml0aW9uIG1ldGhvZHMgPT09PVxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBtb3VudGVkLiBWYWx1ZXMgaW4gdGhlIG1hcHBpbmcgd2lsbCBiZSBzZXQgb25cbiAgICogYHRoaXMucHJvcHNgIGlmIHRoYXQgcHJvcCBpcyBub3Qgc3BlY2lmaWVkIChpLmUuIHVzaW5nIGFuIGBpbmAgY2hlY2spLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBpcyBpbnZva2VkIGJlZm9yZSBgZ2V0SW5pdGlhbFN0YXRlYCBhbmQgdGhlcmVmb3JlIGNhbm5vdCByZWx5XG4gICAqIG9uIGB0aGlzLnN0YXRlYCBvciB1c2UgYHRoaXMuc2V0U3RhdGVgLlxuICAgKlxuICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgZ2V0RGVmYXVsdFByb3BzOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZX01FUkdFRCxcblxuICAvKipcbiAgICogSW52b2tlZCBvbmNlIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIG1vdW50ZWQuIFRoZSByZXR1cm4gdmFsdWUgd2lsbCBiZSB1c2VkXG4gICAqIGFzIHRoZSBpbml0aWFsIHZhbHVlIG9mIGB0aGlzLnN0YXRlYC5cbiAgICpcbiAgICogICBnZXRJbml0aWFsU3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgKiAgICAgcmV0dXJuIHtcbiAgICogICAgICAgaXNPbjogZmFsc2UsXG4gICAqICAgICAgIGZvb0JhejogbmV3IEJhekZvbygpXG4gICAqICAgICB9XG4gICAqICAgfVxuICAgKlxuICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgZ2V0SW5pdGlhbFN0YXRlOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZX01FUkdFRCxcblxuICAvKipcbiAgICogQHJldHVybiB7b2JqZWN0fVxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGdldENoaWxkQ29udGV4dDogU3BlY1BvbGljeS5ERUZJTkVfTUFOWV9NRVJHRUQsXG5cbiAgLyoqXG4gICAqIFVzZXMgcHJvcHMgZnJvbSBgdGhpcy5wcm9wc2AgYW5kIHN0YXRlIGZyb20gYHRoaXMuc3RhdGVgIHRvIHJlbmRlciB0aGVcbiAgICogc3RydWN0dXJlIG9mIHRoZSBjb21wb25lbnQuXG4gICAqXG4gICAqIE5vIGd1YXJhbnRlZXMgYXJlIG1hZGUgYWJvdXQgd2hlbiBvciBob3cgb2Z0ZW4gdGhpcyBtZXRob2QgaXMgaW52b2tlZCwgc29cbiAgICogaXQgbXVzdCBub3QgaGF2ZSBzaWRlIGVmZmVjdHMuXG4gICAqXG4gICAqICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICogICAgIHZhciBuYW1lID0gdGhpcy5wcm9wcy5uYW1lO1xuICAgKiAgICAgcmV0dXJuIDxkaXY+SGVsbG8sIHtuYW1lfSE8L2Rpdj47XG4gICAqICAgfVxuICAgKlxuICAgKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH1cbiAgICogQG5vc2lkZWVmZmVjdHNcbiAgICogQHJlcXVpcmVkXG4gICAqL1xuICByZW5kZXI6IFNwZWNQb2xpY3kuREVGSU5FX09OQ0UsXG5cbiAgLy8gPT09PSBEZWxlZ2F0ZSBtZXRob2RzID09PT1cblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaXMgaW5pdGlhbGx5IGNyZWF0ZWQgYW5kIGFib3V0IHRvIGJlIG1vdW50ZWQuXG4gICAqIFRoaXMgbWF5IGhhdmUgc2lkZSBlZmZlY3RzLCBidXQgYW55IGV4dGVybmFsIHN1YnNjcmlwdGlvbnMgb3IgZGF0YSBjcmVhdGVkXG4gICAqIGJ5IHRoaXMgbWV0aG9kIG11c3QgYmUgY2xlYW5lZCB1cCBpbiBgY29tcG9uZW50V2lsbFVubW91bnRgLlxuICAgKlxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNvbXBvbmVudFdpbGxNb3VudDogU3BlY1BvbGljeS5ERUZJTkVfTUFOWSxcblxuICAvKipcbiAgICogSW52b2tlZCB3aGVuIHRoZSBjb21wb25lbnQgaGFzIGJlZW4gbW91bnRlZCBhbmQgaGFzIGEgRE9NIHJlcHJlc2VudGF0aW9uLlxuICAgKiBIb3dldmVyLCB0aGVyZSBpcyBubyBndWFyYW50ZWUgdGhhdCB0aGUgRE9NIG5vZGUgaXMgaW4gdGhlIGRvY3VtZW50LlxuICAgKlxuICAgKiBVc2UgdGhpcyBhcyBhbiBvcHBvcnR1bml0eSB0byBvcGVyYXRlIG9uIHRoZSBET00gd2hlbiB0aGUgY29tcG9uZW50IGhhc1xuICAgKiBiZWVuIG1vdW50ZWQgKGluaXRpYWxpemVkIGFuZCByZW5kZXJlZCkgZm9yIHRoZSBmaXJzdCB0aW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IHJvb3ROb2RlIERPTSBlbGVtZW50IHJlcHJlc2VudGluZyB0aGUgY29tcG9uZW50LlxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNvbXBvbmVudERpZE1vdW50OiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIGJlZm9yZSB0aGUgY29tcG9uZW50IHJlY2VpdmVzIG5ldyBwcm9wcy5cbiAgICpcbiAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gcmVhY3QgdG8gYSBwcm9wIHRyYW5zaXRpb24gYnkgdXBkYXRpbmcgdGhlXG4gICAqIHN0YXRlIHVzaW5nIGB0aGlzLnNldFN0YXRlYC4gQ3VycmVudCBwcm9wcyBhcmUgYWNjZXNzZWQgdmlhIGB0aGlzLnByb3BzYC5cbiAgICpcbiAgICogICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzOiBmdW5jdGlvbihuZXh0UHJvcHMsIG5leHRDb250ZXh0KSB7XG4gICAqICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICogICAgICAgbGlrZXNJbmNyZWFzaW5nOiBuZXh0UHJvcHMubGlrZUNvdW50ID4gdGhpcy5wcm9wcy5saWtlQ291bnRcbiAgICogICAgIH0pO1xuICAgKiAgIH1cbiAgICpcbiAgICogTk9URTogVGhlcmUgaXMgbm8gZXF1aXZhbGVudCBgY29tcG9uZW50V2lsbFJlY2VpdmVTdGF0ZWAuIEFuIGluY29taW5nIHByb3BcbiAgICogdHJhbnNpdGlvbiBtYXkgY2F1c2UgYSBzdGF0ZSBjaGFuZ2UsIGJ1dCB0aGUgb3Bwb3NpdGUgaXMgbm90IHRydWUuIElmIHlvdVxuICAgKiBuZWVkIGl0LCB5b3UgYXJlIHByb2JhYmx5IGxvb2tpbmcgZm9yIGBjb21wb25lbnRXaWxsVXBkYXRlYC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IG5leHRQcm9wc1xuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHM6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hpbGUgZGVjaWRpbmcgaWYgdGhlIGNvbXBvbmVudCBzaG91bGQgYmUgdXBkYXRlZCBhcyBhIHJlc3VsdCBvZlxuICAgKiByZWNlaXZpbmcgbmV3IHByb3BzLCBzdGF0ZSBhbmQvb3IgY29udGV4dC5cbiAgICpcbiAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gYHJldHVybiBmYWxzZWAgd2hlbiB5b3UncmUgY2VydGFpbiB0aGF0IHRoZVxuICAgKiB0cmFuc2l0aW9uIHRvIHRoZSBuZXcgcHJvcHMvc3RhdGUvY29udGV4dCB3aWxsIG5vdCByZXF1aXJlIGEgY29tcG9uZW50XG4gICAqIHVwZGF0ZS5cbiAgICpcbiAgICogICBzaG91bGRDb21wb25lbnRVcGRhdGU6IGZ1bmN0aW9uKG5leHRQcm9wcywgbmV4dFN0YXRlLCBuZXh0Q29udGV4dCkge1xuICAgKiAgICAgcmV0dXJuICFlcXVhbChuZXh0UHJvcHMsIHRoaXMucHJvcHMpIHx8XG4gICAqICAgICAgICFlcXVhbChuZXh0U3RhdGUsIHRoaXMuc3RhdGUpIHx8XG4gICAqICAgICAgICFlcXVhbChuZXh0Q29udGV4dCwgdGhpcy5jb250ZXh0KTtcbiAgICogICB9XG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHNcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0U3RhdGVcbiAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0Q29udGV4dFxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBjb21wb25lbnQgc2hvdWxkIHVwZGF0ZS5cbiAgICogQG9wdGlvbmFsXG4gICAqL1xuICBzaG91bGRDb21wb25lbnRVcGRhdGU6IFNwZWNQb2xpY3kuREVGSU5FX09OQ0UsXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50IGlzIGFib3V0IHRvIHVwZGF0ZSBkdWUgdG8gYSB0cmFuc2l0aW9uIGZyb21cbiAgICogYHRoaXMucHJvcHNgLCBgdGhpcy5zdGF0ZWAgYW5kIGB0aGlzLmNvbnRleHRgIHRvIGBuZXh0UHJvcHNgLCBgbmV4dFN0YXRlYFxuICAgKiBhbmQgYG5leHRDb250ZXh0YC5cbiAgICpcbiAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gcGVyZm9ybSBwcmVwYXJhdGlvbiBiZWZvcmUgYW4gdXBkYXRlIG9jY3Vycy5cbiAgICpcbiAgICogTk9URTogWW91ICoqY2Fubm90KiogdXNlIGB0aGlzLnNldFN0YXRlKClgIGluIHRoaXMgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dFN0YXRlXG4gICAqIEBwYXJhbSB7P29iamVjdH0gbmV4dENvbnRleHRcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAb3B0aW9uYWxcbiAgICovXG4gIGNvbXBvbmVudFdpbGxVcGRhdGU6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLyoqXG4gICAqIEludm9rZWQgd2hlbiB0aGUgY29tcG9uZW50J3MgRE9NIHJlcHJlc2VudGF0aW9uIGhhcyBiZWVuIHVwZGF0ZWQuXG4gICAqXG4gICAqIFVzZSB0aGlzIGFzIGFuIG9wcG9ydHVuaXR5IHRvIG9wZXJhdGUgb24gdGhlIERPTSB3aGVuIHRoZSBjb21wb25lbnQgaGFzXG4gICAqIGJlZW4gdXBkYXRlZC5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IHByZXZQcm9wc1xuICAgKiBAcGFyYW0gez9vYmplY3R9IHByZXZTdGF0ZVxuICAgKiBAcGFyYW0gez9vYmplY3R9IHByZXZDb250ZXh0XG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gcm9vdE5vZGUgRE9NIGVsZW1lbnQgcmVwcmVzZW50aW5nIHRoZSBjb21wb25lbnQuXG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgY29tcG9uZW50RGlkVXBkYXRlOiBTcGVjUG9saWN5LkRFRklORV9NQU5ZLFxuXG4gIC8qKlxuICAgKiBJbnZva2VkIHdoZW4gdGhlIGNvbXBvbmVudCBpcyBhYm91dCB0byBiZSByZW1vdmVkIGZyb20gaXRzIHBhcmVudCBhbmQgaGF2ZVxuICAgKiBpdHMgRE9NIHJlcHJlc2VudGF0aW9uIGRlc3Ryb3llZC5cbiAgICpcbiAgICogVXNlIHRoaXMgYXMgYW4gb3Bwb3J0dW5pdHkgdG8gZGVhbGxvY2F0ZSBhbnkgZXh0ZXJuYWwgcmVzb3VyY2VzLlxuICAgKlxuICAgKiBOT1RFOiBUaGVyZSBpcyBubyBgY29tcG9uZW50RGlkVW5tb3VudGAgc2luY2UgeW91ciBjb21wb25lbnQgd2lsbCBoYXZlIGJlZW5cbiAgICogZGVzdHJveWVkIGJ5IHRoYXQgcG9pbnQuXG4gICAqXG4gICAqIEBvcHRpb25hbFxuICAgKi9cbiAgY29tcG9uZW50V2lsbFVubW91bnQ6IFNwZWNQb2xpY3kuREVGSU5FX01BTlksXG5cbiAgLy8gPT09PSBBZHZhbmNlZCBtZXRob2RzID09PT1cblxuICAvKipcbiAgICogVXBkYXRlcyB0aGUgY29tcG9uZW50J3MgY3VycmVudGx5IG1vdW50ZWQgRE9NIHJlcHJlc2VudGF0aW9uLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCB0aGlzIGltcGxlbWVudHMgUmVhY3QncyByZW5kZXJpbmcgYW5kIHJlY29uY2lsaWF0aW9uIGFsZ29yaXRobS5cbiAgICogU29waGlzdGljYXRlZCBjbGllbnRzIG1heSB3aXNoIHRvIG92ZXJyaWRlIHRoaXMuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQGludGVybmFsXG4gICAqIEBvdmVycmlkYWJsZVxuICAgKi9cbiAgdXBkYXRlQ29tcG9uZW50OiBTcGVjUG9saWN5Lk9WRVJSSURFX0JBU0VcblxufTtcblxuLyoqXG4gKiBNYXBwaW5nIGZyb20gY2xhc3Mgc3BlY2lmaWNhdGlvbiBrZXlzIHRvIHNwZWNpYWwgcHJvY2Vzc2luZyBmdW5jdGlvbnMuXG4gKlxuICogQWx0aG91Z2ggdGhlc2UgYXJlIGRlY2xhcmVkIGxpa2UgaW5zdGFuY2UgcHJvcGVydGllcyBpbiB0aGUgc3BlY2lmaWNhdGlvblxuICogd2hlbiBkZWZpbmluZyBjbGFzc2VzIHVzaW5nIGBSZWFjdC5jcmVhdGVDbGFzc2AsIHRoZXkgYXJlIGFjdHVhbGx5IHN0YXRpY1xuICogYW5kIGFyZSBhY2Nlc3NpYmxlIG9uIHRoZSBjb25zdHJ1Y3RvciBpbnN0ZWFkIG9mIHRoZSBwcm90b3R5cGUuIERlc3BpdGVcbiAqIGJlaW5nIHN0YXRpYywgdGhleSBtdXN0IGJlIGRlZmluZWQgb3V0c2lkZSBvZiB0aGUgXCJzdGF0aWNzXCIga2V5IHVuZGVyXG4gKiB3aGljaCBhbGwgb3RoZXIgc3RhdGljIG1ldGhvZHMgYXJlIGRlZmluZWQuXG4gKi9cbnZhciBSRVNFUlZFRF9TUEVDX0tFWVMgPSB7XG4gIGRpc3BsYXlOYW1lOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIGRpc3BsYXlOYW1lKSB7XG4gICAgQ29uc3RydWN0b3IuZGlzcGxheU5hbWUgPSBkaXNwbGF5TmFtZTtcbiAgfSxcbiAgbWl4aW5zOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIG1peGlucykge1xuICAgIGlmIChtaXhpbnMpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWl4aW5zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIG1peFNwZWNJbnRvQ29tcG9uZW50KENvbnN0cnVjdG9yLCBtaXhpbnNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgY2hpbGRDb250ZXh0VHlwZXM6IGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgY2hpbGRDb250ZXh0VHlwZXMpIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFsaWRhdGVUeXBlRGVmKENvbnN0cnVjdG9yLCBjaGlsZENvbnRleHRUeXBlcywgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5jaGlsZENvbnRleHQpO1xuICAgIH1cbiAgICBDb25zdHJ1Y3Rvci5jaGlsZENvbnRleHRUeXBlcyA9IGFzc2lnbih7fSwgQ29uc3RydWN0b3IuY2hpbGRDb250ZXh0VHlwZXMsIGNoaWxkQ29udGV4dFR5cGVzKTtcbiAgfSxcbiAgY29udGV4dFR5cGVzOiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIGNvbnRleHRUeXBlcykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YWxpZGF0ZVR5cGVEZWYoQ29uc3RydWN0b3IsIGNvbnRleHRUeXBlcywgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5jb250ZXh0KTtcbiAgICB9XG4gICAgQ29uc3RydWN0b3IuY29udGV4dFR5cGVzID0gYXNzaWduKHt9LCBDb25zdHJ1Y3Rvci5jb250ZXh0VHlwZXMsIGNvbnRleHRUeXBlcyk7XG4gIH0sXG4gIC8qKlxuICAgKiBTcGVjaWFsIGNhc2UgZ2V0RGVmYXVsdFByb3BzIHdoaWNoIHNob3VsZCBtb3ZlIGludG8gc3RhdGljcyBidXQgcmVxdWlyZXNcbiAgICogYXV0b21hdGljIG1lcmdpbmcuXG4gICAqL1xuICBnZXREZWZhdWx0UHJvcHM6IGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgZ2V0RGVmYXVsdFByb3BzKSB7XG4gICAgaWYgKENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcykge1xuICAgICAgQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzID0gY3JlYXRlTWVyZ2VkUmVzdWx0RnVuY3Rpb24oQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzLCBnZXREZWZhdWx0UHJvcHMpO1xuICAgIH0gZWxzZSB7XG4gICAgICBDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMgPSBnZXREZWZhdWx0UHJvcHM7XG4gICAgfVxuICB9LFxuICBwcm9wVHlwZXM6IGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvcFR5cGVzKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhbGlkYXRlVHlwZURlZihDb25zdHJ1Y3RvciwgcHJvcFR5cGVzLCBSZWFjdFByb3BUeXBlTG9jYXRpb25zLnByb3ApO1xuICAgIH1cbiAgICBDb25zdHJ1Y3Rvci5wcm9wVHlwZXMgPSBhc3NpZ24oe30sIENvbnN0cnVjdG9yLnByb3BUeXBlcywgcHJvcFR5cGVzKTtcbiAgfSxcbiAgc3RhdGljczogZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBzdGF0aWNzKSB7XG4gICAgbWl4U3RhdGljU3BlY0ludG9Db21wb25lbnQoQ29uc3RydWN0b3IsIHN0YXRpY3MpO1xuICB9LFxuICBhdXRvYmluZDogZnVuY3Rpb24gKCkge30gfTtcblxuLy8gbm9vcFxuZnVuY3Rpb24gdmFsaWRhdGVUeXBlRGVmKENvbnN0cnVjdG9yLCB0eXBlRGVmLCBsb2NhdGlvbikge1xuICBmb3IgKHZhciBwcm9wTmFtZSBpbiB0eXBlRGVmKSB7XG4gICAgaWYgKHR5cGVEZWYuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpKSB7XG4gICAgICAvLyB1c2UgYSB3YXJuaW5nIGluc3RlYWQgb2YgYW4gaW52YXJpYW50IHNvIGNvbXBvbmVudHNcbiAgICAgIC8vIGRvbid0IHNob3cgdXAgaW4gcHJvZCBidXQgbm90IGluIF9fREVWX19cbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHR5cGVvZiB0eXBlRGVmW3Byb3BOYW1lXSA9PT0gJ2Z1bmN0aW9uJywgJyVzOiAlcyB0eXBlIGAlc2AgaXMgaW52YWxpZDsgaXQgbXVzdCBiZSBhIGZ1bmN0aW9uLCB1c3VhbGx5IGZyb20gJyArICdSZWFjdC5Qcm9wVHlwZXMuJywgQ29uc3RydWN0b3IuZGlzcGxheU5hbWUgfHwgJ1JlYWN0Q2xhc3MnLCBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl0sIHByb3BOYW1lKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVNZXRob2RPdmVycmlkZShwcm90bywgbmFtZSkge1xuICB2YXIgc3BlY1BvbGljeSA9IFJlYWN0Q2xhc3NJbnRlcmZhY2UuaGFzT3duUHJvcGVydHkobmFtZSkgPyBSZWFjdENsYXNzSW50ZXJmYWNlW25hbWVdIDogbnVsbDtcblxuICAvLyBEaXNhbGxvdyBvdmVycmlkaW5nIG9mIGJhc2UgY2xhc3MgbWV0aG9kcyB1bmxlc3MgZXhwbGljaXRseSBhbGxvd2VkLlxuICBpZiAoUmVhY3RDbGFzc01peGluLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgIShzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5Lk9WRVJSSURFX0JBU0UpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0Q2xhc3NJbnRlcmZhY2U6IFlvdSBhcmUgYXR0ZW1wdGluZyB0byBvdmVycmlkZSAnICsgJ2Alc2AgZnJvbSB5b3VyIGNsYXNzIHNwZWNpZmljYXRpb24uIEVuc3VyZSB0aGF0IHlvdXIgbWV0aG9kIG5hbWVzICcgKyAnZG8gbm90IG92ZXJsYXAgd2l0aCBSZWFjdCBtZXRob2RzLicsIG5hbWUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIC8vIERpc2FsbG93IGRlZmluaW5nIG1ldGhvZHMgbW9yZSB0aGFuIG9uY2UgdW5sZXNzIGV4cGxpY2l0bHkgYWxsb3dlZC5cbiAgaWYgKHByb3RvLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgIShzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5LkRFRklORV9NQU5ZIHx8IHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTllfTUVSR0VEKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzSW50ZXJmYWNlOiBZb3UgYXJlIGF0dGVtcHRpbmcgdG8gZGVmaW5lICcgKyAnYCVzYCBvbiB5b3VyIGNvbXBvbmVudCBtb3JlIHRoYW4gb25jZS4gVGhpcyBjb25mbGljdCBtYXkgYmUgZHVlICcgKyAndG8gYSBtaXhpbi4nLCBuYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBNaXhpbiBoZWxwZXIgd2hpY2ggaGFuZGxlcyBwb2xpY3kgdmFsaWRhdGlvbiBhbmQgcmVzZXJ2ZWRcbiAqIHNwZWNpZmljYXRpb24ga2V5cyB3aGVuIGJ1aWxkaW5nIFJlYWN0IGNsYXNzc2VzLlxuICovXG5mdW5jdGlvbiBtaXhTcGVjSW50b0NvbXBvbmVudChDb25zdHJ1Y3Rvciwgc3BlYykge1xuICBpZiAoIXNwZWMpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICAhKHR5cGVvZiBzcGVjICE9PSAnZnVuY3Rpb24nKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzOiBZb3VcXCdyZSBhdHRlbXB0aW5nIHRvICcgKyAndXNlIGEgY29tcG9uZW50IGNsYXNzIGFzIGEgbWl4aW4uIEluc3RlYWQsIGp1c3QgdXNlIGEgcmVndWxhciBvYmplY3QuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAhIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChzcGVjKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzOiBZb3VcXCdyZSBhdHRlbXB0aW5nIHRvICcgKyAndXNlIGEgY29tcG9uZW50IGFzIGEgbWl4aW4uIEluc3RlYWQsIGp1c3QgdXNlIGEgcmVndWxhciBvYmplY3QuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gIHZhciBwcm90byA9IENvbnN0cnVjdG9yLnByb3RvdHlwZTtcblxuICAvLyBCeSBoYW5kbGluZyBtaXhpbnMgYmVmb3JlIGFueSBvdGhlciBwcm9wZXJ0aWVzLCB3ZSBlbnN1cmUgdGhlIHNhbWVcbiAgLy8gY2hhaW5pbmcgb3JkZXIgaXMgYXBwbGllZCB0byBtZXRob2RzIHdpdGggREVGSU5FX01BTlkgcG9saWN5LCB3aGV0aGVyXG4gIC8vIG1peGlucyBhcmUgbGlzdGVkIGJlZm9yZSBvciBhZnRlciB0aGVzZSBtZXRob2RzIGluIHRoZSBzcGVjLlxuICBpZiAoc3BlYy5oYXNPd25Qcm9wZXJ0eShNSVhJTlNfS0VZKSkge1xuICAgIFJFU0VSVkVEX1NQRUNfS0VZUy5taXhpbnMoQ29uc3RydWN0b3IsIHNwZWMubWl4aW5zKTtcbiAgfVxuXG4gIGZvciAodmFyIG5hbWUgaW4gc3BlYykge1xuICAgIGlmICghc3BlYy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgaWYgKG5hbWUgPT09IE1JWElOU19LRVkpIHtcbiAgICAgIC8vIFdlIGhhdmUgYWxyZWFkeSBoYW5kbGVkIG1peGlucyBpbiBhIHNwZWNpYWwgY2FzZSBhYm92ZS5cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHZhciBwcm9wZXJ0eSA9IHNwZWNbbmFtZV07XG4gICAgdmFsaWRhdGVNZXRob2RPdmVycmlkZShwcm90bywgbmFtZSk7XG5cbiAgICBpZiAoUkVTRVJWRURfU1BFQ19LRVlTLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICBSRVNFUlZFRF9TUEVDX0tFWVNbbmFtZV0oQ29uc3RydWN0b3IsIHByb3BlcnR5KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2V0dXAgbWV0aG9kcyBvbiBwcm90b3R5cGU6XG4gICAgICAvLyBUaGUgZm9sbG93aW5nIG1lbWJlciBtZXRob2RzIHNob3VsZCBub3QgYmUgYXV0b21hdGljYWxseSBib3VuZDpcbiAgICAgIC8vIDEuIEV4cGVjdGVkIFJlYWN0Q2xhc3MgbWV0aG9kcyAoaW4gdGhlIFwiaW50ZXJmYWNlXCIpLlxuICAgICAgLy8gMi4gT3ZlcnJpZGRlbiBtZXRob2RzICh0aGF0IHdlcmUgbWl4ZWQgaW4pLlxuICAgICAgdmFyIGlzUmVhY3RDbGFzc01ldGhvZCA9IFJlYWN0Q2xhc3NJbnRlcmZhY2UuaGFzT3duUHJvcGVydHkobmFtZSk7XG4gICAgICB2YXIgaXNBbHJlYWR5RGVmaW5lZCA9IHByb3RvLmhhc093blByb3BlcnR5KG5hbWUpO1xuICAgICAgdmFyIGlzRnVuY3Rpb24gPSB0eXBlb2YgcHJvcGVydHkgPT09ICdmdW5jdGlvbic7XG4gICAgICB2YXIgc2hvdWxkQXV0b0JpbmQgPSBpc0Z1bmN0aW9uICYmICFpc1JlYWN0Q2xhc3NNZXRob2QgJiYgIWlzQWxyZWFkeURlZmluZWQgJiYgc3BlYy5hdXRvYmluZCAhPT0gZmFsc2U7XG5cbiAgICAgIGlmIChzaG91bGRBdXRvQmluZCkge1xuICAgICAgICBpZiAoIXByb3RvLl9fcmVhY3RBdXRvQmluZE1hcCkge1xuICAgICAgICAgIHByb3RvLl9fcmVhY3RBdXRvQmluZE1hcCA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHByb3RvLl9fcmVhY3RBdXRvQmluZE1hcFtuYW1lXSA9IHByb3BlcnR5O1xuICAgICAgICBwcm90b1tuYW1lXSA9IHByb3BlcnR5O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGlzQWxyZWFkeURlZmluZWQpIHtcbiAgICAgICAgICB2YXIgc3BlY1BvbGljeSA9IFJlYWN0Q2xhc3NJbnRlcmZhY2VbbmFtZV07XG5cbiAgICAgICAgICAvLyBUaGVzZSBjYXNlcyBzaG91bGQgYWxyZWFkeSBiZSBjYXVnaHQgYnkgdmFsaWRhdGVNZXRob2RPdmVycmlkZS5cbiAgICAgICAgICAhKGlzUmVhY3RDbGFzc01ldGhvZCAmJiAoc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5ERUZJTkVfTUFOWV9NRVJHRUQgfHwgc3BlY1BvbGljeSA9PT0gU3BlY1BvbGljeS5ERUZJTkVfTUFOWSkpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0Q2xhc3M6IFVuZXhwZWN0ZWQgc3BlYyBwb2xpY3kgJXMgZm9yIGtleSAlcyAnICsgJ3doZW4gbWl4aW5nIGluIGNvbXBvbmVudCBzcGVjcy4nLCBzcGVjUG9saWN5LCBuYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAvLyBGb3IgbWV0aG9kcyB3aGljaCBhcmUgZGVmaW5lZCBtb3JlIHRoYW4gb25jZSwgY2FsbCB0aGUgZXhpc3RpbmdcbiAgICAgICAgICAvLyBtZXRob2RzIGJlZm9yZSBjYWxsaW5nIHRoZSBuZXcgcHJvcGVydHksIG1lcmdpbmcgaWYgYXBwcm9wcmlhdGUuXG4gICAgICAgICAgaWYgKHNwZWNQb2xpY3kgPT09IFNwZWNQb2xpY3kuREVGSU5FX01BTllfTUVSR0VEKSB7XG4gICAgICAgICAgICBwcm90b1tuYW1lXSA9IGNyZWF0ZU1lcmdlZFJlc3VsdEZ1bmN0aW9uKHByb3RvW25hbWVdLCBwcm9wZXJ0eSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChzcGVjUG9saWN5ID09PSBTcGVjUG9saWN5LkRFRklORV9NQU5ZKSB7XG4gICAgICAgICAgICBwcm90b1tuYW1lXSA9IGNyZWF0ZUNoYWluZWRGdW5jdGlvbihwcm90b1tuYW1lXSwgcHJvcGVydHkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwcm90b1tuYW1lXSA9IHByb3BlcnR5O1xuICAgICAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAvLyBBZGQgdmVyYm9zZSBkaXNwbGF5TmFtZSB0byB0aGUgZnVuY3Rpb24sIHdoaWNoIGhlbHBzIHdoZW4gbG9va2luZ1xuICAgICAgICAgICAgLy8gYXQgcHJvZmlsaW5nIHRvb2xzLlxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwcm9wZXJ0eSA9PT0gJ2Z1bmN0aW9uJyAmJiBzcGVjLmRpc3BsYXlOYW1lKSB7XG4gICAgICAgICAgICAgIHByb3RvW25hbWVdLmRpc3BsYXlOYW1lID0gc3BlYy5kaXNwbGF5TmFtZSArICdfJyArIG5hbWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIG1peFN0YXRpY1NwZWNJbnRvQ29tcG9uZW50KENvbnN0cnVjdG9yLCBzdGF0aWNzKSB7XG4gIGlmICghc3RhdGljcykge1xuICAgIHJldHVybjtcbiAgfVxuICBmb3IgKHZhciBuYW1lIGluIHN0YXRpY3MpIHtcbiAgICB2YXIgcHJvcGVydHkgPSBzdGF0aWNzW25hbWVdO1xuICAgIGlmICghc3RhdGljcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgdmFyIGlzUmVzZXJ2ZWQgPSAobmFtZSBpbiBSRVNFUlZFRF9TUEVDX0tFWVMpO1xuICAgICEhaXNSZXNlcnZlZCA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENsYXNzOiBZb3UgYXJlIGF0dGVtcHRpbmcgdG8gZGVmaW5lIGEgcmVzZXJ2ZWQgJyArICdwcm9wZXJ0eSwgYCVzYCwgdGhhdCBzaG91bGRuXFwndCBiZSBvbiB0aGUgXCJzdGF0aWNzXCIga2V5LiBEZWZpbmUgaXQgJyArICdhcyBhbiBpbnN0YW5jZSBwcm9wZXJ0eSBpbnN0ZWFkOyBpdCB3aWxsIHN0aWxsIGJlIGFjY2Vzc2libGUgb24gdGhlICcgKyAnY29uc3RydWN0b3IuJywgbmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgdmFyIGlzSW5oZXJpdGVkID0gKG5hbWUgaW4gQ29uc3RydWN0b3IpO1xuICAgICEhaXNJbmhlcml0ZWQgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RDbGFzczogWW91IGFyZSBhdHRlbXB0aW5nIHRvIGRlZmluZSAnICsgJ2Alc2Agb24geW91ciBjb21wb25lbnQgbW9yZSB0aGFuIG9uY2UuIFRoaXMgY29uZmxpY3QgbWF5IGJlICcgKyAnZHVlIHRvIGEgbWl4aW4uJywgbmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIENvbnN0cnVjdG9yW25hbWVdID0gcHJvcGVydHk7XG4gIH1cbn1cblxuLyoqXG4gKiBNZXJnZSB0d28gb2JqZWN0cywgYnV0IHRocm93IGlmIGJvdGggY29udGFpbiB0aGUgc2FtZSBrZXkuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG9uZSBUaGUgZmlyc3Qgb2JqZWN0LCB3aGljaCBpcyBtdXRhdGVkLlxuICogQHBhcmFtIHtvYmplY3R9IHR3byBUaGUgc2Vjb25kIG9iamVjdFxuICogQHJldHVybiB7b2JqZWN0fSBvbmUgYWZ0ZXIgaXQgaGFzIGJlZW4gbXV0YXRlZCB0byBjb250YWluIGV2ZXJ5dGhpbmcgaW4gdHdvLlxuICovXG5mdW5jdGlvbiBtZXJnZUludG9XaXRoTm9EdXBsaWNhdGVLZXlzKG9uZSwgdHdvKSB7XG4gICEob25lICYmIHR3byAmJiB0eXBlb2Ygb25lID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdHdvID09PSAnb2JqZWN0JykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnbWVyZ2VJbnRvV2l0aE5vRHVwbGljYXRlS2V5cygpOiBDYW5ub3QgbWVyZ2Ugbm9uLW9iamVjdHMuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gIGZvciAodmFyIGtleSBpbiB0d28pIHtcbiAgICBpZiAodHdvLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICEob25lW2tleV0gPT09IHVuZGVmaW5lZCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnbWVyZ2VJbnRvV2l0aE5vRHVwbGljYXRlS2V5cygpOiAnICsgJ1RyaWVkIHRvIG1lcmdlIHR3byBvYmplY3RzIHdpdGggdGhlIHNhbWUga2V5OiBgJXNgLiBUaGlzIGNvbmZsaWN0ICcgKyAnbWF5IGJlIGR1ZSB0byBhIG1peGluOyBpbiBwYXJ0aWN1bGFyLCB0aGlzIG1heSBiZSBjYXVzZWQgYnkgdHdvICcgKyAnZ2V0SW5pdGlhbFN0YXRlKCkgb3IgZ2V0RGVmYXVsdFByb3BzKCkgbWV0aG9kcyByZXR1cm5pbmcgb2JqZWN0cyAnICsgJ3dpdGggY2xhc2hpbmcga2V5cy4nLCBrZXkpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIG9uZVtrZXldID0gdHdvW2tleV07XG4gICAgfVxuICB9XG4gIHJldHVybiBvbmU7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyB0d28gZnVuY3Rpb25zIGFuZCBtZXJnZXMgdGhlaXIgcmV0dXJuIHZhbHVlcy5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBvbmUgRnVuY3Rpb24gdG8gaW52b2tlIGZpcnN0LlxuICogQHBhcmFtIHtmdW5jdGlvbn0gdHdvIEZ1bmN0aW9uIHRvIGludm9rZSBzZWNvbmQuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn0gRnVuY3Rpb24gdGhhdCBpbnZva2VzIHRoZSB0d28gYXJndW1lbnQgZnVuY3Rpb25zLlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlTWVyZ2VkUmVzdWx0RnVuY3Rpb24ob25lLCB0d28pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZFJlc3VsdCgpIHtcbiAgICB2YXIgYSA9IG9uZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHZhciBiID0gdHdvLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKGEgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGI7XG4gICAgfSBlbHNlIGlmIChiID09IG51bGwpIHtcbiAgICAgIHJldHVybiBhO1xuICAgIH1cbiAgICB2YXIgYyA9IHt9O1xuICAgIG1lcmdlSW50b1dpdGhOb0R1cGxpY2F0ZUtleXMoYywgYSk7XG4gICAgbWVyZ2VJbnRvV2l0aE5vRHVwbGljYXRlS2V5cyhjLCBiKTtcbiAgICByZXR1cm4gYztcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIHR3byBmdW5jdGlvbnMgYW5kIGlnbm9yZXMgdGhlaXIgcmV0dXJuIHZhbGVzLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IG9uZSBGdW5jdGlvbiB0byBpbnZva2UgZmlyc3QuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSB0d28gRnVuY3Rpb24gdG8gaW52b2tlIHNlY29uZC5cbiAqIEByZXR1cm4ge2Z1bmN0aW9ufSBGdW5jdGlvbiB0aGF0IGludm9rZXMgdGhlIHR3byBhcmd1bWVudCBmdW5jdGlvbnMuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVDaGFpbmVkRnVuY3Rpb24ob25lLCB0d28pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGNoYWluZWRGdW5jdGlvbigpIHtcbiAgICBvbmUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB0d28uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBCaW5kcyBhIG1ldGhvZCB0byB0aGUgY29tcG9uZW50LlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fSBjb21wb25lbnQgQ29tcG9uZW50IHdob3NlIG1ldGhvZCBpcyBnb2luZyB0byBiZSBib3VuZC5cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IG1ldGhvZCBNZXRob2QgdG8gYmUgYm91bmQuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn0gVGhlIGJvdW5kIG1ldGhvZC5cbiAqL1xuZnVuY3Rpb24gYmluZEF1dG9CaW5kTWV0aG9kKGNvbXBvbmVudCwgbWV0aG9kKSB7XG4gIHZhciBib3VuZE1ldGhvZCA9IG1ldGhvZC5iaW5kKGNvbXBvbmVudCk7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgYm91bmRNZXRob2QuX19yZWFjdEJvdW5kQ29udGV4dCA9IGNvbXBvbmVudDtcbiAgICBib3VuZE1ldGhvZC5fX3JlYWN0Qm91bmRNZXRob2QgPSBtZXRob2Q7XG4gICAgYm91bmRNZXRob2QuX19yZWFjdEJvdW5kQXJndW1lbnRzID0gbnVsbDtcbiAgICB2YXIgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5jb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZTtcbiAgICB2YXIgX2JpbmQgPSBib3VuZE1ldGhvZC5iaW5kO1xuICAgIC8qIGVzbGludC1kaXNhYmxlIGJsb2NrLXNjb3BlZC12YXIsIG5vLXVuZGVmICovXG4gICAgYm91bmRNZXRob2QuYmluZCA9IGZ1bmN0aW9uIChuZXdUaGlzKSB7XG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAxID8gX2xlbiAtIDEgOiAwKSwgX2tleSA9IDE7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgICB9XG5cbiAgICAgIC8vIFVzZXIgaXMgdHJ5aW5nIHRvIGJpbmQoKSBhbiBhdXRvYm91bmQgbWV0aG9kOyB3ZSBlZmZlY3RpdmVseSB3aWxsXG4gICAgICAvLyBpZ25vcmUgdGhlIHZhbHVlIG9mIFwidGhpc1wiIHRoYXQgdGhlIHVzZXIgaXMgdHJ5aW5nIHRvIHVzZSwgc29cbiAgICAgIC8vIGxldCdzIHdhcm4uXG4gICAgICBpZiAobmV3VGhpcyAhPT0gY29tcG9uZW50ICYmIG5ld1RoaXMgIT09IG51bGwpIHtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdiaW5kKCk6IFJlYWN0IGNvbXBvbmVudCBtZXRob2RzIG1heSBvbmx5IGJlIGJvdW5kIHRvIHRoZSAnICsgJ2NvbXBvbmVudCBpbnN0YW5jZS4gU2VlICVzJywgY29tcG9uZW50TmFtZSkgOiB1bmRlZmluZWQ7XG4gICAgICB9IGVsc2UgaWYgKCFhcmdzLmxlbmd0aCkge1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ2JpbmQoKTogWW91IGFyZSBiaW5kaW5nIGEgY29tcG9uZW50IG1ldGhvZCB0byB0aGUgY29tcG9uZW50LiAnICsgJ1JlYWN0IGRvZXMgdGhpcyBmb3IgeW91IGF1dG9tYXRpY2FsbHkgaW4gYSBoaWdoLXBlcmZvcm1hbmNlICcgKyAnd2F5LCBzbyB5b3UgY2FuIHNhZmVseSByZW1vdmUgdGhpcyBjYWxsLiBTZWUgJXMnLCBjb21wb25lbnROYW1lKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIGJvdW5kTWV0aG9kO1xuICAgICAgfVxuICAgICAgdmFyIHJlYm91bmRNZXRob2QgPSBfYmluZC5hcHBseShib3VuZE1ldGhvZCwgYXJndW1lbnRzKTtcbiAgICAgIHJlYm91bmRNZXRob2QuX19yZWFjdEJvdW5kQ29udGV4dCA9IGNvbXBvbmVudDtcbiAgICAgIHJlYm91bmRNZXRob2QuX19yZWFjdEJvdW5kTWV0aG9kID0gbWV0aG9kO1xuICAgICAgcmVib3VuZE1ldGhvZC5fX3JlYWN0Qm91bmRBcmd1bWVudHMgPSBhcmdzO1xuICAgICAgcmV0dXJuIHJlYm91bmRNZXRob2Q7XG4gICAgICAvKiBlc2xpbnQtZW5hYmxlICovXG4gICAgfTtcbiAgfVxuICByZXR1cm4gYm91bmRNZXRob2Q7XG59XG5cbi8qKlxuICogQmluZHMgYWxsIGF1dG8tYm91bmQgbWV0aG9kcyBpbiBhIGNvbXBvbmVudC5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gY29tcG9uZW50IENvbXBvbmVudCB3aG9zZSBtZXRob2QgaXMgZ29pbmcgdG8gYmUgYm91bmQuXG4gKi9cbmZ1bmN0aW9uIGJpbmRBdXRvQmluZE1ldGhvZHMoY29tcG9uZW50KSB7XG4gIGZvciAodmFyIGF1dG9CaW5kS2V5IGluIGNvbXBvbmVudC5fX3JlYWN0QXV0b0JpbmRNYXApIHtcbiAgICBpZiAoY29tcG9uZW50Ll9fcmVhY3RBdXRvQmluZE1hcC5oYXNPd25Qcm9wZXJ0eShhdXRvQmluZEtleSkpIHtcbiAgICAgIHZhciBtZXRob2QgPSBjb21wb25lbnQuX19yZWFjdEF1dG9CaW5kTWFwW2F1dG9CaW5kS2V5XTtcbiAgICAgIGNvbXBvbmVudFthdXRvQmluZEtleV0gPSBiaW5kQXV0b0JpbmRNZXRob2QoY29tcG9uZW50LCBtZXRob2QpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEFkZCBtb3JlIHRvIHRoZSBSZWFjdENsYXNzIGJhc2UgY2xhc3MuIFRoZXNlIGFyZSBhbGwgbGVnYWN5IGZlYXR1cmVzIGFuZFxuICogdGhlcmVmb3JlIG5vdCBhbHJlYWR5IHBhcnQgb2YgdGhlIG1vZGVybiBSZWFjdENvbXBvbmVudC5cbiAqL1xudmFyIFJlYWN0Q2xhc3NNaXhpbiA9IHtcblxuICAvKipcbiAgICogVE9ETzogVGhpcyB3aWxsIGJlIGRlcHJlY2F0ZWQgYmVjYXVzZSBzdGF0ZSBzaG91bGQgYWx3YXlzIGtlZXAgYSBjb25zaXN0ZW50XG4gICAqIHR5cGUgc2lnbmF0dXJlIGFuZCB0aGUgb25seSB1c2UgY2FzZSBmb3IgdGhpcywgaXMgdG8gYXZvaWQgdGhhdC5cbiAgICovXG4gIHJlcGxhY2VTdGF0ZTogZnVuY3Rpb24gKG5ld1N0YXRlLCBjYWxsYmFjaykge1xuICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlUmVwbGFjZVN0YXRlKHRoaXMsIG5ld1N0YXRlKTtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlQ2FsbGJhY2sodGhpcywgY2FsbGJhY2spO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgb3Igbm90IHRoaXMgY29tcG9zaXRlIGNvbXBvbmVudCBpcyBtb3VudGVkLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIG1vdW50ZWQsIGZhbHNlIG90aGVyd2lzZS5cbiAgICogQHByb3RlY3RlZFxuICAgKiBAZmluYWxcbiAgICovXG4gIGlzTW91bnRlZDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLnVwZGF0ZXIuaXNNb3VudGVkKHRoaXMpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIGEgc3Vic2V0IG9mIHRoZSBwcm9wcy5cbiAgICpcbiAgICogQHBhcmFtIHtvYmplY3R9IHBhcnRpYWxQcm9wcyBTdWJzZXQgb2YgdGhlIG5leHQgcHJvcHMuXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsZWQgYWZ0ZXIgcHJvcHMgYXJlIHVwZGF0ZWQuXG4gICAqIEBmaW5hbFxuICAgKiBAcHVibGljXG4gICAqIEBkZXByZWNhdGVkXG4gICAqL1xuICBzZXRQcm9wczogZnVuY3Rpb24gKHBhcnRpYWxQcm9wcywgY2FsbGJhY2spIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FyblNldFByb3BzKCk7XG4gICAgfVxuICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlU2V0UHJvcHModGhpcywgcGFydGlhbFByb3BzKTtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIHRoaXMudXBkYXRlci5lbnF1ZXVlQ2FsbGJhY2sodGhpcywgY2FsbGJhY2spO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVwbGFjZSBhbGwgdGhlIHByb3BzLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmV3UHJvcHMgU3Vic2V0IG9mIHRoZSBuZXh0IHByb3BzLlxuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHByb3BzIGFyZSB1cGRhdGVkLlxuICAgKiBAZmluYWxcbiAgICogQHB1YmxpY1xuICAgKiBAZGVwcmVjYXRlZFxuICAgKi9cbiAgcmVwbGFjZVByb3BzOiBmdW5jdGlvbiAobmV3UHJvcHMsIGNhbGxiYWNrKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHdhcm5TZXRQcm9wcygpO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZVJlcGxhY2VQcm9wcyh0aGlzLCBuZXdQcm9wcyk7XG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZUNhbGxiYWNrKHRoaXMsIGNhbGxiYWNrKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBSZWFjdENsYXNzQ29tcG9uZW50ID0gZnVuY3Rpb24gKCkge307XG5hc3NpZ24oUmVhY3RDbGFzc0NvbXBvbmVudC5wcm90b3R5cGUsIFJlYWN0Q29tcG9uZW50LnByb3RvdHlwZSwgUmVhY3RDbGFzc01peGluKTtcblxuLyoqXG4gKiBNb2R1bGUgZm9yIGNyZWF0aW5nIGNvbXBvc2l0ZSBjb21wb25lbnRzLlxuICpcbiAqIEBjbGFzcyBSZWFjdENsYXNzXG4gKi9cbnZhciBSZWFjdENsYXNzID0ge1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgY29tcG9zaXRlIGNvbXBvbmVudCBjbGFzcyBnaXZlbiBhIGNsYXNzIHNwZWNpZmljYXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBzcGVjIENsYXNzIHNwZWNpZmljYXRpb24gKHdoaWNoIG11c3QgZGVmaW5lIGByZW5kZXJgKS5cbiAgICogQHJldHVybiB7ZnVuY3Rpb259IENvbXBvbmVudCBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgY3JlYXRlQ2xhc3M6IGZ1bmN0aW9uIChzcGVjKSB7XG4gICAgdmFyIENvbnN0cnVjdG9yID0gZnVuY3Rpb24gKHByb3BzLCBjb250ZXh0LCB1cGRhdGVyKSB7XG4gICAgICAvLyBUaGlzIGNvbnN0cnVjdG9yIGlzIG92ZXJyaWRkZW4gYnkgbW9ja3MuIFRoZSBhcmd1bWVudCBpcyB1c2VkXG4gICAgICAvLyBieSBtb2NrcyB0byBhc3NlcnQgb24gd2hhdCBnZXRzIG1vdW50ZWQuXG5cbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHRoaXMgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvciwgJ1NvbWV0aGluZyBpcyBjYWxsaW5nIGEgUmVhY3QgY29tcG9uZW50IGRpcmVjdGx5LiBVc2UgYSBmYWN0b3J5IG9yICcgKyAnSlNYIGluc3RlYWQuIFNlZTogaHR0cHM6Ly9mYi5tZS9yZWFjdC1sZWdhY3lmYWN0b3J5JykgOiB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIC8vIFdpcmUgdXAgYXV0by1iaW5kaW5nXG4gICAgICBpZiAodGhpcy5fX3JlYWN0QXV0b0JpbmRNYXApIHtcbiAgICAgICAgYmluZEF1dG9CaW5kTWV0aG9kcyh0aGlzKTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICAgICAgdGhpcy5jb250ZXh0ID0gY29udGV4dDtcbiAgICAgIHRoaXMucmVmcyA9IGVtcHR5T2JqZWN0O1xuICAgICAgdGhpcy51cGRhdGVyID0gdXBkYXRlciB8fCBSZWFjdE5vb3BVcGRhdGVRdWV1ZTtcblxuICAgICAgdGhpcy5zdGF0ZSA9IG51bGw7XG5cbiAgICAgIC8vIFJlYWN0Q2xhc3NlcyBkb2Vzbid0IGhhdmUgY29uc3RydWN0b3JzLiBJbnN0ZWFkLCB0aGV5IHVzZSB0aGVcbiAgICAgIC8vIGdldEluaXRpYWxTdGF0ZSBhbmQgY29tcG9uZW50V2lsbE1vdW50IG1ldGhvZHMgZm9yIGluaXRpYWxpemF0aW9uLlxuXG4gICAgICB2YXIgaW5pdGlhbFN0YXRlID0gdGhpcy5nZXRJbml0aWFsU3RhdGUgPyB0aGlzLmdldEluaXRpYWxTdGF0ZSgpIDogbnVsbDtcbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIC8vIFdlIGFsbG93IGF1dG8tbW9ja3MgdG8gcHJvY2VlZCBhcyBpZiB0aGV5J3JlIHJldHVybmluZyBudWxsLlxuICAgICAgICBpZiAodHlwZW9mIGluaXRpYWxTdGF0ZSA9PT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5nZXRJbml0aWFsU3RhdGUuX2lzTW9ja0Z1bmN0aW9uKSB7XG4gICAgICAgICAgLy8gVGhpcyBpcyBwcm9iYWJseSBiYWQgcHJhY3RpY2UuIENvbnNpZGVyIHdhcm5pbmcgaGVyZSBhbmRcbiAgICAgICAgICAvLyBkZXByZWNhdGluZyB0aGlzIGNvbnZlbmllbmNlLlxuICAgICAgICAgIGluaXRpYWxTdGF0ZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgICEodHlwZW9mIGluaXRpYWxTdGF0ZSA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkoaW5pdGlhbFN0YXRlKSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnJXMuZ2V0SW5pdGlhbFN0YXRlKCk6IG11c3QgcmV0dXJuIGFuIG9iamVjdCBvciBudWxsJywgQ29uc3RydWN0b3IuZGlzcGxheU5hbWUgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgICB0aGlzLnN0YXRlID0gaW5pdGlhbFN0YXRlO1xuICAgIH07XG4gICAgQ29uc3RydWN0b3IucHJvdG90eXBlID0gbmV3IFJlYWN0Q2xhc3NDb21wb25lbnQoKTtcbiAgICBDb25zdHJ1Y3Rvci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDb25zdHJ1Y3RvcjtcblxuICAgIGluamVjdGVkTWl4aW5zLmZvckVhY2gobWl4U3BlY0ludG9Db21wb25lbnQuYmluZChudWxsLCBDb25zdHJ1Y3RvcikpO1xuXG4gICAgbWl4U3BlY0ludG9Db21wb25lbnQoQ29uc3RydWN0b3IsIHNwZWMpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgZGVmYXVsdFByb3BzIHByb3BlcnR5IGFmdGVyIGFsbCBtaXhpbnMgaGF2ZSBiZWVuIG1lcmdlZC5cbiAgICBpZiAoQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzKSB7XG4gICAgICBDb25zdHJ1Y3Rvci5kZWZhdWx0UHJvcHMgPSBDb25zdHJ1Y3Rvci5nZXREZWZhdWx0UHJvcHMoKTtcbiAgICB9XG5cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gVGhpcyBpcyBhIHRhZyB0byBpbmRpY2F0ZSB0aGF0IHRoZSB1c2Ugb2YgdGhlc2UgbWV0aG9kIG5hbWVzIGlzIG9rLFxuICAgICAgLy8gc2luY2UgaXQncyB1c2VkIHdpdGggY3JlYXRlQ2xhc3MuIElmIGl0J3Mgbm90LCB0aGVuIGl0J3MgbGlrZWx5IGFcbiAgICAgIC8vIG1pc3Rha2Ugc28gd2UnbGwgd2FybiB5b3UgdG8gdXNlIHRoZSBzdGF0aWMgcHJvcGVydHksIHByb3BlcnR5XG4gICAgICAvLyBpbml0aWFsaXplciBvciBjb25zdHJ1Y3RvciByZXNwZWN0aXZlbHkuXG4gICAgICBpZiAoQ29uc3RydWN0b3IuZ2V0RGVmYXVsdFByb3BzKSB7XG4gICAgICAgIENvbnN0cnVjdG9yLmdldERlZmF1bHRQcm9wcy5pc1JlYWN0Q2xhc3NBcHByb3ZlZCA9IHt9O1xuICAgICAgfVxuICAgICAgaWYgKENvbnN0cnVjdG9yLnByb3RvdHlwZS5nZXRJbml0aWFsU3RhdGUpIHtcbiAgICAgICAgQ29uc3RydWN0b3IucHJvdG90eXBlLmdldEluaXRpYWxTdGF0ZS5pc1JlYWN0Q2xhc3NBcHByb3ZlZCA9IHt9O1xuICAgICAgfVxuICAgIH1cblxuICAgICFDb25zdHJ1Y3Rvci5wcm90b3R5cGUucmVuZGVyID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2NyZWF0ZUNsYXNzKC4uLik6IENsYXNzIHNwZWNpZmljYXRpb24gbXVzdCBpbXBsZW1lbnQgYSBgcmVuZGVyYCBtZXRob2QuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFDb25zdHJ1Y3Rvci5wcm90b3R5cGUuY29tcG9uZW50U2hvdWxkVXBkYXRlLCAnJXMgaGFzIGEgbWV0aG9kIGNhbGxlZCAnICsgJ2NvbXBvbmVudFNob3VsZFVwZGF0ZSgpLiBEaWQgeW91IG1lYW4gc2hvdWxkQ29tcG9uZW50VXBkYXRlKCk/ICcgKyAnVGhlIG5hbWUgaXMgcGhyYXNlZCBhcyBhIHF1ZXN0aW9uIGJlY2F1c2UgdGhlIGZ1bmN0aW9uIGlzICcgKyAnZXhwZWN0ZWQgdG8gcmV0dXJuIGEgdmFsdWUuJywgc3BlYy5kaXNwbGF5TmFtZSB8fCAnQSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFDb25zdHJ1Y3Rvci5wcm90b3R5cGUuY29tcG9uZW50V2lsbFJlY2lldmVQcm9wcywgJyVzIGhhcyBhIG1ldGhvZCBjYWxsZWQgJyArICdjb21wb25lbnRXaWxsUmVjaWV2ZVByb3BzKCkuIERpZCB5b3UgbWVhbiBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKCk/Jywgc3BlYy5kaXNwbGF5TmFtZSB8fCAnQSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBSZWR1Y2UgdGltZSBzcGVudCBkb2luZyBsb29rdXBzIGJ5IHNldHRpbmcgdGhlc2Ugb24gdGhlIHByb3RvdHlwZS5cbiAgICBmb3IgKHZhciBtZXRob2ROYW1lIGluIFJlYWN0Q2xhc3NJbnRlcmZhY2UpIHtcbiAgICAgIGlmICghQ29uc3RydWN0b3IucHJvdG90eXBlW21ldGhvZE5hbWVdKSB7XG4gICAgICAgIENvbnN0cnVjdG9yLnByb3RvdHlwZVttZXRob2ROYW1lXSA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIENvbnN0cnVjdG9yO1xuICB9LFxuXG4gIGluamVjdGlvbjoge1xuICAgIGluamVjdE1peGluOiBmdW5jdGlvbiAobWl4aW4pIHtcbiAgICAgIGluamVjdGVkTWl4aW5zLnB1c2gobWl4aW4pO1xuICAgIH1cbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0Q2xhc3M7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0Q29tcG9uZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3ROb29wVXBkYXRlUXVldWUgPSByZXF1aXJlKCcuL1JlYWN0Tm9vcFVwZGF0ZVF1ZXVlJyk7XG5cbnZhciBjYW5EZWZpbmVQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vY2FuRGVmaW5lUHJvcGVydHknKTtcbnZhciBlbXB0eU9iamVjdCA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5T2JqZWN0Jyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuLyoqXG4gKiBCYXNlIGNsYXNzIGhlbHBlcnMgZm9yIHRoZSB1cGRhdGluZyBzdGF0ZSBvZiBhIGNvbXBvbmVudC5cbiAqL1xuZnVuY3Rpb24gUmVhY3RDb21wb25lbnQocHJvcHMsIGNvbnRleHQsIHVwZGF0ZXIpIHtcbiAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xuICB0aGlzLnJlZnMgPSBlbXB0eU9iamVjdDtcbiAgLy8gV2UgaW5pdGlhbGl6ZSB0aGUgZGVmYXVsdCB1cGRhdGVyIGJ1dCB0aGUgcmVhbCBvbmUgZ2V0cyBpbmplY3RlZCBieSB0aGVcbiAgLy8gcmVuZGVyZXIuXG4gIHRoaXMudXBkYXRlciA9IHVwZGF0ZXIgfHwgUmVhY3ROb29wVXBkYXRlUXVldWU7XG59XG5cblJlYWN0Q29tcG9uZW50LnByb3RvdHlwZS5pc1JlYWN0Q29tcG9uZW50ID0ge307XG5cbi8qKlxuICogU2V0cyBhIHN1YnNldCBvZiB0aGUgc3RhdGUuIEFsd2F5cyB1c2UgdGhpcyB0byBtdXRhdGVcbiAqIHN0YXRlLiBZb3Ugc2hvdWxkIHRyZWF0IGB0aGlzLnN0YXRlYCBhcyBpbW11dGFibGUuXG4gKlxuICogVGhlcmUgaXMgbm8gZ3VhcmFudGVlIHRoYXQgYHRoaXMuc3RhdGVgIHdpbGwgYmUgaW1tZWRpYXRlbHkgdXBkYXRlZCwgc29cbiAqIGFjY2Vzc2luZyBgdGhpcy5zdGF0ZWAgYWZ0ZXIgY2FsbGluZyB0aGlzIG1ldGhvZCBtYXkgcmV0dXJuIHRoZSBvbGQgdmFsdWUuXG4gKlxuICogVGhlcmUgaXMgbm8gZ3VhcmFudGVlIHRoYXQgY2FsbHMgdG8gYHNldFN0YXRlYCB3aWxsIHJ1biBzeW5jaHJvbm91c2x5LFxuICogYXMgdGhleSBtYXkgZXZlbnR1YWxseSBiZSBiYXRjaGVkIHRvZ2V0aGVyLiAgWW91IGNhbiBwcm92aWRlIGFuIG9wdGlvbmFsXG4gKiBjYWxsYmFjayB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgd2hlbiB0aGUgY2FsbCB0byBzZXRTdGF0ZSBpcyBhY3R1YWxseVxuICogY29tcGxldGVkLlxuICpcbiAqIFdoZW4gYSBmdW5jdGlvbiBpcyBwcm92aWRlZCB0byBzZXRTdGF0ZSwgaXQgd2lsbCBiZSBjYWxsZWQgYXQgc29tZSBwb2ludCBpblxuICogdGhlIGZ1dHVyZSAobm90IHN5bmNocm9ub3VzbHkpLiBJdCB3aWxsIGJlIGNhbGxlZCB3aXRoIHRoZSB1cCB0byBkYXRlXG4gKiBjb21wb25lbnQgYXJndW1lbnRzIChzdGF0ZSwgcHJvcHMsIGNvbnRleHQpLiBUaGVzZSB2YWx1ZXMgY2FuIGJlIGRpZmZlcmVudFxuICogZnJvbSB0aGlzLiogYmVjYXVzZSB5b3VyIGZ1bmN0aW9uIG1heSBiZSBjYWxsZWQgYWZ0ZXIgcmVjZWl2ZVByb3BzIGJ1dCBiZWZvcmVcbiAqIHNob3VsZENvbXBvbmVudFVwZGF0ZSwgYW5kIHRoaXMgbmV3IHN0YXRlLCBwcm9wcywgYW5kIGNvbnRleHQgd2lsbCBub3QgeWV0IGJlXG4gKiBhc3NpZ25lZCB0byB0aGlzLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fGZ1bmN0aW9ufSBwYXJ0aWFsU3RhdGUgTmV4dCBwYXJ0aWFsIHN0YXRlIG9yIGZ1bmN0aW9uIHRvXG4gKiAgICAgICAgcHJvZHVjZSBuZXh0IHBhcnRpYWwgc3RhdGUgdG8gYmUgbWVyZ2VkIHdpdGggY3VycmVudCBzdGF0ZS5cbiAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsZWQgYWZ0ZXIgc3RhdGUgaXMgdXBkYXRlZC5cbiAqIEBmaW5hbFxuICogQHByb3RlY3RlZFxuICovXG5SZWFjdENvbXBvbmVudC5wcm90b3R5cGUuc2V0U3RhdGUgPSBmdW5jdGlvbiAocGFydGlhbFN0YXRlLCBjYWxsYmFjaykge1xuICAhKHR5cGVvZiBwYXJ0aWFsU3RhdGUgPT09ICdvYmplY3QnIHx8IHR5cGVvZiBwYXJ0aWFsU3RhdGUgPT09ICdmdW5jdGlvbicgfHwgcGFydGlhbFN0YXRlID09IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3NldFN0YXRlKC4uLik6IHRha2VzIGFuIG9iamVjdCBvZiBzdGF0ZSB2YXJpYWJsZXMgdG8gdXBkYXRlIG9yIGEgJyArICdmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFuIG9iamVjdCBvZiBzdGF0ZSB2YXJpYWJsZXMuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHBhcnRpYWxTdGF0ZSAhPSBudWxsLCAnc2V0U3RhdGUoLi4uKTogWW91IHBhc3NlZCBhbiB1bmRlZmluZWQgb3IgbnVsbCBzdGF0ZSBvYmplY3Q7ICcgKyAnaW5zdGVhZCwgdXNlIGZvcmNlVXBkYXRlKCkuJykgOiB1bmRlZmluZWQ7XG4gIH1cbiAgdGhpcy51cGRhdGVyLmVucXVldWVTZXRTdGF0ZSh0aGlzLCBwYXJ0aWFsU3RhdGUpO1xuICBpZiAoY2FsbGJhY2spIHtcbiAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZUNhbGxiYWNrKHRoaXMsIGNhbGxiYWNrKTtcbiAgfVxufTtcblxuLyoqXG4gKiBGb3JjZXMgYW4gdXBkYXRlLiBUaGlzIHNob3VsZCBvbmx5IGJlIGludm9rZWQgd2hlbiBpdCBpcyBrbm93biB3aXRoXG4gKiBjZXJ0YWludHkgdGhhdCB3ZSBhcmUgKipub3QqKiBpbiBhIERPTSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBZb3UgbWF5IHdhbnQgdG8gY2FsbCB0aGlzIHdoZW4geW91IGtub3cgdGhhdCBzb21lIGRlZXBlciBhc3BlY3Qgb2YgdGhlXG4gKiBjb21wb25lbnQncyBzdGF0ZSBoYXMgY2hhbmdlZCBidXQgYHNldFN0YXRlYCB3YXMgbm90IGNhbGxlZC5cbiAqXG4gKiBUaGlzIHdpbGwgbm90IGludm9rZSBgc2hvdWxkQ29tcG9uZW50VXBkYXRlYCwgYnV0IGl0IHdpbGwgaW52b2tlXG4gKiBgY29tcG9uZW50V2lsbFVwZGF0ZWAgYW5kIGBjb21wb25lbnREaWRVcGRhdGVgLlxuICpcbiAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsZWQgYWZ0ZXIgdXBkYXRlIGlzIGNvbXBsZXRlLlxuICogQGZpbmFsXG4gKiBAcHJvdGVjdGVkXG4gKi9cblJlYWN0Q29tcG9uZW50LnByb3RvdHlwZS5mb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZUZvcmNlVXBkYXRlKHRoaXMpO1xuICBpZiAoY2FsbGJhY2spIHtcbiAgICB0aGlzLnVwZGF0ZXIuZW5xdWV1ZUNhbGxiYWNrKHRoaXMsIGNhbGxiYWNrKTtcbiAgfVxufTtcblxuLyoqXG4gKiBEZXByZWNhdGVkIEFQSXMuIFRoZXNlIEFQSXMgdXNlZCB0byBleGlzdCBvbiBjbGFzc2ljIFJlYWN0IGNsYXNzZXMgYnV0IHNpbmNlXG4gKiB3ZSB3b3VsZCBsaWtlIHRvIGRlcHJlY2F0ZSB0aGVtLCB3ZSdyZSBub3QgZ29pbmcgdG8gbW92ZSB0aGVtIG92ZXIgdG8gdGhpc1xuICogbW9kZXJuIGJhc2UgY2xhc3MuIEluc3RlYWQsIHdlIGRlZmluZSBhIGdldHRlciB0aGF0IHdhcm5zIGlmIGl0J3MgYWNjZXNzZWQuXG4gKi9cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZhciBkZXByZWNhdGVkQVBJcyA9IHtcbiAgICBnZXRET01Ob2RlOiBbJ2dldERPTU5vZGUnLCAnVXNlIFJlYWN0RE9NLmZpbmRET01Ob2RlKGNvbXBvbmVudCkgaW5zdGVhZC4nXSxcbiAgICBpc01vdW50ZWQ6IFsnaXNNb3VudGVkJywgJ0luc3RlYWQsIG1ha2Ugc3VyZSB0byBjbGVhbiB1cCBzdWJzY3JpcHRpb25zIGFuZCBwZW5kaW5nIHJlcXVlc3RzIGluICcgKyAnY29tcG9uZW50V2lsbFVubW91bnQgdG8gcHJldmVudCBtZW1vcnkgbGVha3MuJ10sXG4gICAgcmVwbGFjZVByb3BzOiBbJ3JlcGxhY2VQcm9wcycsICdJbnN0ZWFkLCBjYWxsIHJlbmRlciBhZ2FpbiBhdCB0aGUgdG9wIGxldmVsLiddLFxuICAgIHJlcGxhY2VTdGF0ZTogWydyZXBsYWNlU3RhdGUnLCAnUmVmYWN0b3IgeW91ciBjb2RlIHRvIHVzZSBzZXRTdGF0ZSBpbnN0ZWFkIChzZWUgJyArICdodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzMyMzYpLiddLFxuICAgIHNldFByb3BzOiBbJ3NldFByb3BzJywgJ0luc3RlYWQsIGNhbGwgcmVuZGVyIGFnYWluIGF0IHRoZSB0b3AgbGV2ZWwuJ11cbiAgfTtcbiAgdmFyIGRlZmluZURlcHJlY2F0aW9uV2FybmluZyA9IGZ1bmN0aW9uIChtZXRob2ROYW1lLCBpbmZvKSB7XG4gICAgaWYgKGNhbkRlZmluZVByb3BlcnR5KSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVhY3RDb21wb25lbnQucHJvdG90eXBlLCBtZXRob2ROYW1lLCB7XG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnJXMoLi4uKSBpcyBkZXByZWNhdGVkIGluIHBsYWluIEphdmFTY3JpcHQgUmVhY3QgY2xhc3Nlcy4gJXMnLCBpbmZvWzBdLCBpbmZvWzFdKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH07XG4gIGZvciAodmFyIGZuTmFtZSBpbiBkZXByZWNhdGVkQVBJcykge1xuICAgIGlmIChkZXByZWNhdGVkQVBJcy5oYXNPd25Qcm9wZXJ0eShmbk5hbWUpKSB7XG4gICAgICBkZWZpbmVEZXByZWNhdGlvbldhcm5pbmcoZm5OYW1lLCBkZXByZWNhdGVkQVBJc1tmbk5hbWVdKTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdENvbXBvbmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdERPTUlET3BlcmF0aW9ucyA9IHJlcXVpcmUoJy4vUmVhY3RET01JRE9wZXJhdGlvbnMnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG5cbi8qKlxuICogQWJzdHJhY3RzIGF3YXkgYWxsIGZ1bmN0aW9uYWxpdHkgb2YgdGhlIHJlY29uY2lsZXIgdGhhdCByZXF1aXJlcyBrbm93bGVkZ2Ugb2ZcbiAqIHRoZSBicm93c2VyIGNvbnRleHQuIFRPRE86IFRoZXNlIGNhbGxlcnMgc2hvdWxkIGJlIHJlZmFjdG9yZWQgdG8gYXZvaWQgdGhlXG4gKiBuZWVkIGZvciB0aGlzIGluamVjdGlvbi5cbiAqL1xudmFyIFJlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50ID0ge1xuXG4gIHByb2Nlc3NDaGlsZHJlblVwZGF0ZXM6IFJlYWN0RE9NSURPcGVyYXRpb25zLmRhbmdlcm91c2x5UHJvY2Vzc0NoaWxkcmVuVXBkYXRlcyxcblxuICByZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEOiBSZWFjdERPTUlET3BlcmF0aW9ucy5kYW5nZXJvdXNseVJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQsXG5cbiAgLyoqXG4gICAqIElmIGEgcGFydGljdWxhciBlbnZpcm9ubWVudCByZXF1aXJlcyB0aGF0IHNvbWUgcmVzb3VyY2VzIGJlIGNsZWFuZWQgdXAsXG4gICAqIHNwZWNpZnkgdGhpcyBpbiB0aGUgaW5qZWN0ZWQgTWl4aW4uIEluIHRoZSBET00sIHdlIHdvdWxkIGxpa2VseSB3YW50IHRvXG4gICAqIHB1cmdlIGFueSBjYWNoZWQgbm9kZSBJRCBsb29rdXBzLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdW5tb3VudElERnJvbUVudmlyb25tZW50OiBmdW5jdGlvbiAocm9vdE5vZGVJRCkge1xuICAgIFJlYWN0TW91bnQucHVyZ2VJRChyb290Tm9kZUlEKTtcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdENvbXBvbmVudEVudmlyb25tZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbnZhciBpbmplY3RlZCA9IGZhbHNlO1xuXG52YXIgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudCA9IHtcblxuICAvKipcbiAgICogT3B0aW9uYWxseSBpbmplY3RhYmxlIGVudmlyb25tZW50IGRlcGVuZGVudCBjbGVhbnVwIGhvb2suIChzZXJ2ZXIgdnMuXG4gICAqIGJyb3dzZXIgZXRjKS4gRXhhbXBsZTogQSBicm93c2VyIHN5c3RlbSBjYWNoZXMgRE9NIG5vZGVzIGJhc2VkIG9uIGNvbXBvbmVudFxuICAgKiBJRCBhbmQgbXVzdCByZW1vdmUgdGhhdCBjYWNoZSBlbnRyeSB3aGVuIHRoaXMgaW5zdGFuY2UgaXMgdW5tb3VudGVkLlxuICAgKi9cbiAgdW5tb3VudElERnJvbUVudmlyb25tZW50OiBudWxsLFxuXG4gIC8qKlxuICAgKiBPcHRpb25hbGx5IGluamVjdGFibGUgaG9vayBmb3Igc3dhcHBpbmcgb3V0IG1vdW50IGltYWdlcyBpbiB0aGUgbWlkZGxlIG9mXG4gICAqIHRoZSB0cmVlLlxuICAgKi9cbiAgcmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRDogbnVsbCxcblxuICAvKipcbiAgICogT3B0aW9uYWxseSBpbmplY3RhYmxlIGhvb2sgZm9yIHByb2Nlc3NpbmcgYSBxdWV1ZSBvZiBjaGlsZCB1cGRhdGVzLiBXaWxsXG4gICAqIGxhdGVyIG1vdmUgaW50byBNdWx0aUNoaWxkQ29tcG9uZW50cy5cbiAgICovXG4gIHByb2Nlc3NDaGlsZHJlblVwZGF0ZXM6IG51bGwsXG5cbiAgaW5qZWN0aW9uOiB7XG4gICAgaW5qZWN0RW52aXJvbm1lbnQ6IGZ1bmN0aW9uIChlbnZpcm9ubWVudCkge1xuICAgICAgISFpbmplY3RlZCA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudDogaW5qZWN0RW52aXJvbm1lbnQoKSBjYW4gb25seSBiZSBjYWxsZWQgb25jZS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICBSZWFjdENvbXBvbmVudEVudmlyb25tZW50LnVubW91bnRJREZyb21FbnZpcm9ubWVudCA9IGVudmlyb25tZW50LnVubW91bnRJREZyb21FbnZpcm9ubWVudDtcbiAgICAgIFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQucmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRCA9IGVudmlyb25tZW50LnJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQ7XG4gICAgICBSZWFjdENvbXBvbmVudEVudmlyb25tZW50LnByb2Nlc3NDaGlsZHJlblVwZGF0ZXMgPSBlbnZpcm9ubWVudC5wcm9jZXNzQ2hpbGRyZW5VcGRhdGVzO1xuICAgICAgaW5qZWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0Q29tcG9uZW50RW52aXJvbm1lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudCcpO1xudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RJbnN0YW5jZU1hcCA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZU1hcCcpO1xudmFyIFJlYWN0UGVyZiA9IHJlcXVpcmUoJy4vUmVhY3RQZXJmJyk7XG52YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9ucycpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcycpO1xudmFyIFJlYWN0UmVjb25jaWxlciA9IHJlcXVpcmUoJy4vUmVhY3RSZWNvbmNpbGVyJyk7XG52YXIgUmVhY3RVcGRhdGVRdWV1ZSA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVRdWV1ZScpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZW1wdHlPYmplY3QgPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eU9iamVjdCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9zaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbmZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpIHtcbiAgdmFyIG93bmVyID0gY29tcG9uZW50Ll9jdXJyZW50RWxlbWVudC5fb3duZXIgfHwgbnVsbDtcbiAgaWYgKG93bmVyKSB7XG4gICAgdmFyIG5hbWUgPSBvd25lci5nZXROYW1lKCk7XG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIHJldHVybiAnIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mIGAnICsgbmFtZSArICdgLic7XG4gICAgfVxuICB9XG4gIHJldHVybiAnJztcbn1cblxuZnVuY3Rpb24gU3RhdGVsZXNzQ29tcG9uZW50KENvbXBvbmVudCkge31cblN0YXRlbGVzc0NvbXBvbmVudC5wcm90b3R5cGUucmVuZGVyID0gZnVuY3Rpb24gKCkge1xuICB2YXIgQ29tcG9uZW50ID0gUmVhY3RJbnN0YW5jZU1hcC5nZXQodGhpcykuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG4gIHJldHVybiBDb21wb25lbnQodGhpcy5wcm9wcywgdGhpcy5jb250ZXh0LCB0aGlzLnVwZGF0ZXIpO1xufTtcblxuLyoqXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0gVGhlIExpZmUtQ3ljbGUgb2YgYSBDb21wb3NpdGUgQ29tcG9uZW50IC0tLS0tLS0tLS0tLS0tLS0tLVxuICpcbiAqIC0gY29uc3RydWN0b3I6IEluaXRpYWxpemF0aW9uIG9mIHN0YXRlLiBUaGUgaW5zdGFuY2UgaXMgbm93IHJldGFpbmVkLlxuICogICAtIGNvbXBvbmVudFdpbGxNb3VudFxuICogICAtIHJlbmRlclxuICogICAtIFtjaGlsZHJlbidzIGNvbnN0cnVjdG9yc11cbiAqICAgICAtIFtjaGlsZHJlbidzIGNvbXBvbmVudFdpbGxNb3VudCBhbmQgcmVuZGVyXVxuICogICAgIC0gW2NoaWxkcmVuJ3MgY29tcG9uZW50RGlkTW91bnRdXG4gKiAgICAgLSBjb21wb25lbnREaWRNb3VudFxuICpcbiAqICAgICAgIFVwZGF0ZSBQaGFzZXM6XG4gKiAgICAgICAtIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgKG9ubHkgY2FsbGVkIGlmIHBhcmVudCB1cGRhdGVkKVxuICogICAgICAgLSBzaG91bGRDb21wb25lbnRVcGRhdGVcbiAqICAgICAgICAgLSBjb21wb25lbnRXaWxsVXBkYXRlXG4gKiAgICAgICAgICAgLSByZW5kZXJcbiAqICAgICAgICAgICAtIFtjaGlsZHJlbidzIGNvbnN0cnVjdG9ycyBvciByZWNlaXZlIHByb3BzIHBoYXNlc11cbiAqICAgICAgICAgLSBjb21wb25lbnREaWRVcGRhdGVcbiAqXG4gKiAgICAgLSBjb21wb25lbnRXaWxsVW5tb3VudFxuICogICAgIC0gW2NoaWxkcmVuJ3MgY29tcG9uZW50V2lsbFVubW91bnRdXG4gKiAgIC0gW2NoaWxkcmVuIGRlc3Ryb3llZF1cbiAqIC0gKGRlc3Ryb3llZCk6IFRoZSBpbnN0YW5jZSBpcyBub3cgYmxhbmssIHJlbGVhc2VkIGJ5IFJlYWN0IGFuZCByZWFkeSBmb3IgR0MuXG4gKlxuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqL1xuXG4vKipcbiAqIEFuIGluY3JlbWVudGluZyBJRCBhc3NpZ25lZCB0byBlYWNoIGNvbXBvbmVudCB3aGVuIGl0IGlzIG1vdW50ZWQuIFRoaXMgaXNcbiAqIHVzZWQgdG8gZW5mb3JjZSB0aGUgb3JkZXIgaW4gd2hpY2ggYFJlYWN0VXBkYXRlc2AgdXBkYXRlcyBkaXJ0eSBjb21wb25lbnRzLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbnZhciBuZXh0TW91bnRJRCA9IDE7XG5cbi8qKlxuICogQGxlbmRzIHtSZWFjdENvbXBvc2l0ZUNvbXBvbmVudC5wcm90b3R5cGV9XG4gKi9cbnZhciBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudE1peGluID0ge1xuXG4gIC8qKlxuICAgKiBCYXNlIGNvbnN0cnVjdG9yIGZvciBhbGwgY29tcG9zaXRlIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnRcbiAgICogQGZpbmFsXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgY29uc3RydWN0OiBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcbiAgICB0aGlzLl9pbnN0YW5jZSA9IG51bGw7XG5cbiAgICAvLyBTZWUgUmVhY3RVcGRhdGVRdWV1ZVxuICAgIHRoaXMuX3BlbmRpbmdFbGVtZW50ID0gbnVsbDtcbiAgICB0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZSA9IG51bGw7XG4gICAgdGhpcy5fcGVuZGluZ1JlcGxhY2VTdGF0ZSA9IGZhbHNlO1xuICAgIHRoaXMuX3BlbmRpbmdGb3JjZVVwZGF0ZSA9IGZhbHNlO1xuXG4gICAgdGhpcy5fcmVuZGVyZWRDb21wb25lbnQgPSBudWxsO1xuXG4gICAgdGhpcy5fY29udGV4dCA9IG51bGw7XG4gICAgdGhpcy5fbW91bnRPcmRlciA9IDA7XG4gICAgdGhpcy5fdG9wTGV2ZWxXcmFwcGVyID0gbnVsbDtcblxuICAgIC8vIFNlZSBSZWFjdFVwZGF0ZXMgYW5kIFJlYWN0VXBkYXRlUXVldWUuXG4gICAgdGhpcy5fcGVuZGluZ0NhbGxiYWNrcyA9IG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBjb21wb25lbnQsIHJlbmRlcnMgbWFya3VwLCBhbmQgcmVnaXN0ZXJzIGV2ZW50IGxpc3RlbmVycy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJvb3RJRCBET00gSUQgb2YgdGhlIHJvb3Qgbm9kZS5cbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEByZXR1cm4gez9zdHJpbmd9IFJlbmRlcmVkIG1hcmt1cCB0byBiZSBpbnNlcnRlZCBpbnRvIHRoZSBET00uXG4gICAqIEBmaW5hbFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIG1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAocm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIHRoaXMuX2NvbnRleHQgPSBjb250ZXh0O1xuICAgIHRoaXMuX21vdW50T3JkZXIgPSBuZXh0TW91bnRJRCsrO1xuICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSByb290SUQ7XG5cbiAgICB2YXIgcHVibGljUHJvcHMgPSB0aGlzLl9wcm9jZXNzUHJvcHModGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHMpO1xuICAgIHZhciBwdWJsaWNDb250ZXh0ID0gdGhpcy5fcHJvY2Vzc0NvbnRleHQoY29udGV4dCk7XG5cbiAgICB2YXIgQ29tcG9uZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQudHlwZTtcblxuICAgIC8vIEluaXRpYWxpemUgdGhlIHB1YmxpYyBjbGFzc1xuICAgIHZhciBpbnN0O1xuICAgIHZhciByZW5kZXJlZEVsZW1lbnQ7XG5cbiAgICAvLyBUaGlzIGlzIGEgd2F5IHRvIGRldGVjdCBpZiBDb21wb25lbnQgaXMgYSBzdGF0ZWxlc3MgYXJyb3cgZnVuY3Rpb25cbiAgICAvLyBjb21wb25lbnQsIHdoaWNoIGlzIG5vdCBuZXdhYmxlLiBJdCBtaWdodCBub3QgYmUgMTAwJSByZWxpYWJsZSBidXQgaXNcbiAgICAvLyBzb21ldGhpbmcgd2UgY2FuIGRvIHVudGlsIHdlIHN0YXJ0IGRldGVjdGluZyB0aGF0IENvbXBvbmVudCBleHRlbmRzXG4gICAgLy8gUmVhY3QuQ29tcG9uZW50LiBXZSBhbHJlYWR5IGFzc3VtZSB0aGF0IHR5cGVvZiBDb21wb25lbnQgPT09ICdmdW5jdGlvbicuXG4gICAgdmFyIGNhbkluc3RhbnRpYXRlID0gKCdwcm90b3R5cGUnIGluIENvbXBvbmVudCk7XG5cbiAgICBpZiAoY2FuSW5zdGFudGlhdGUpIHtcbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSB0aGlzO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGluc3QgPSBuZXcgQ29tcG9uZW50KHB1YmxpY1Byb3BzLCBwdWJsaWNDb250ZXh0LCBSZWFjdFVwZGF0ZVF1ZXVlKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5zdCA9IG5ldyBDb21wb25lbnQocHVibGljUHJvcHMsIHB1YmxpY0NvbnRleHQsIFJlYWN0VXBkYXRlUXVldWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghY2FuSW5zdGFudGlhdGUgfHwgaW5zdCA9PT0gbnVsbCB8fCBpbnN0ID09PSBmYWxzZSB8fCBSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQoaW5zdCkpIHtcbiAgICAgIHJlbmRlcmVkRWxlbWVudCA9IGluc3Q7XG4gICAgICBpbnN0ID0gbmV3IFN0YXRlbGVzc0NvbXBvbmVudChDb21wb25lbnQpO1xuICAgIH1cblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgbGF0ZXIgaW4gX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCwgYnV0IGFkZCBhbiBlYXJseVxuICAgICAgLy8gd2FybmluZyBub3cgdG8gaGVscCBkZWJ1Z2dpbmdcbiAgICAgIGlmIChpbnN0LnJlbmRlciA9PSBudWxsKSB7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnJXMoLi4uKTogTm8gYHJlbmRlcmAgbWV0aG9kIGZvdW5kIG9uIHRoZSByZXR1cm5lZCBjb21wb25lbnQgJyArICdpbnN0YW5jZTogeW91IG1heSBoYXZlIGZvcmdvdHRlbiB0byBkZWZpbmUgYHJlbmRlcmAsIHJldHVybmVkICcgKyAnbnVsbC9mYWxzZSBmcm9tIGEgc3RhdGVsZXNzIGNvbXBvbmVudCwgb3IgdHJpZWQgdG8gcmVuZGVyIGFuICcgKyAnZWxlbWVudCB3aG9zZSB0eXBlIGlzIGEgZnVuY3Rpb24gdGhhdCBpc25cXCd0IGEgUmVhY3QgY29tcG9uZW50LicsIENvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCBDb21wb25lbnQubmFtZSB8fCAnQ29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBXZSBzdXBwb3J0IEVTNiBpbmhlcml0aW5nIGZyb20gUmVhY3QuQ29tcG9uZW50LCB0aGUgbW9kdWxlIHBhdHRlcm4sXG4gICAgICAgIC8vIGFuZCBzdGF0ZWxlc3MgY29tcG9uZW50cywgYnV0IG5vdCBFUzYgY2xhc3NlcyB0aGF0IGRvbid0IGV4dGVuZFxuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhDb21wb25lbnQucHJvdG90eXBlICYmIENvbXBvbmVudC5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudCB8fCAhY2FuSW5zdGFudGlhdGUgfHwgIShpbnN0IGluc3RhbmNlb2YgQ29tcG9uZW50KSwgJyVzKC4uLik6IFJlYWN0IGNvbXBvbmVudCBjbGFzc2VzIG11c3QgZXh0ZW5kIFJlYWN0LkNvbXBvbmVudC4nLCBDb21wb25lbnQuZGlzcGxheU5hbWUgfHwgQ29tcG9uZW50Lm5hbWUgfHwgJ0NvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRoZXNlIHNob3VsZCBiZSBzZXQgdXAgaW4gdGhlIGNvbnN0cnVjdG9yLCBidXQgYXMgYSBjb252ZW5pZW5jZSBmb3JcbiAgICAvLyBzaW1wbGVyIGNsYXNzIGFic3RyYWN0aW9ucywgd2Ugc2V0IHRoZW0gdXAgYWZ0ZXIgdGhlIGZhY3QuXG4gICAgaW5zdC5wcm9wcyA9IHB1YmxpY1Byb3BzO1xuICAgIGluc3QuY29udGV4dCA9IHB1YmxpY0NvbnRleHQ7XG4gICAgaW5zdC5yZWZzID0gZW1wdHlPYmplY3Q7XG4gICAgaW5zdC51cGRhdGVyID0gUmVhY3RVcGRhdGVRdWV1ZTtcblxuICAgIHRoaXMuX2luc3RhbmNlID0gaW5zdDtcblxuICAgIC8vIFN0b3JlIGEgcmVmZXJlbmNlIGZyb20gdGhlIGluc3RhbmNlIGJhY2sgdG8gdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uXG4gICAgUmVhY3RJbnN0YW5jZU1hcC5zZXQoaW5zdCwgdGhpcyk7XG5cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gU2luY2UgcGxhaW4gSlMgY2xhc3NlcyBhcmUgZGVmaW5lZCB3aXRob3V0IGFueSBzcGVjaWFsIGluaXRpYWxpemF0aW9uXG4gICAgICAvLyBsb2dpYywgd2UgY2FuIG5vdCBjYXRjaCBjb21tb24gZXJyb3JzIGVhcmx5LiBUaGVyZWZvcmUsIHdlIGhhdmUgdG9cbiAgICAgIC8vIGNhdGNoIHRoZW0gaGVyZSwgYXQgaW5pdGlhbGl6YXRpb24gdGltZSwgaW5zdGVhZC5cbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFpbnN0LmdldEluaXRpYWxTdGF0ZSB8fCBpbnN0LmdldEluaXRpYWxTdGF0ZS5pc1JlYWN0Q2xhc3NBcHByb3ZlZCwgJ2dldEluaXRpYWxTdGF0ZSB3YXMgZGVmaW5lZCBvbiAlcywgYSBwbGFpbiBKYXZhU2NyaXB0IGNsYXNzLiAnICsgJ1RoaXMgaXMgb25seSBzdXBwb3J0ZWQgZm9yIGNsYXNzZXMgY3JlYXRlZCB1c2luZyBSZWFjdC5jcmVhdGVDbGFzcy4gJyArICdEaWQgeW91IG1lYW4gdG8gZGVmaW5lIGEgc3RhdGUgcHJvcGVydHkgaW5zdGVhZD8nLCB0aGlzLmdldE5hbWUoKSB8fCAnYSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFpbnN0LmdldERlZmF1bHRQcm9wcyB8fCBpbnN0LmdldERlZmF1bHRQcm9wcy5pc1JlYWN0Q2xhc3NBcHByb3ZlZCwgJ2dldERlZmF1bHRQcm9wcyB3YXMgZGVmaW5lZCBvbiAlcywgYSBwbGFpbiBKYXZhU2NyaXB0IGNsYXNzLiAnICsgJ1RoaXMgaXMgb25seSBzdXBwb3J0ZWQgZm9yIGNsYXNzZXMgY3JlYXRlZCB1c2luZyBSZWFjdC5jcmVhdGVDbGFzcy4gJyArICdVc2UgYSBzdGF0aWMgcHJvcGVydHkgdG8gZGVmaW5lIGRlZmF1bHRQcm9wcyBpbnN0ZWFkLicsIHRoaXMuZ2V0TmFtZSgpIHx8ICdhIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWluc3QucHJvcFR5cGVzLCAncHJvcFR5cGVzIHdhcyBkZWZpbmVkIGFzIGFuIGluc3RhbmNlIHByb3BlcnR5IG9uICVzLiBVc2UgYSBzdGF0aWMgJyArICdwcm9wZXJ0eSB0byBkZWZpbmUgcHJvcFR5cGVzIGluc3RlYWQuJywgdGhpcy5nZXROYW1lKCkgfHwgJ2EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghaW5zdC5jb250ZXh0VHlwZXMsICdjb250ZXh0VHlwZXMgd2FzIGRlZmluZWQgYXMgYW4gaW5zdGFuY2UgcHJvcGVydHkgb24gJXMuIFVzZSBhICcgKyAnc3RhdGljIHByb3BlcnR5IHRvIGRlZmluZSBjb250ZXh0VHlwZXMgaW5zdGVhZC4nLCB0aGlzLmdldE5hbWUoKSB8fCAnYSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHR5cGVvZiBpbnN0LmNvbXBvbmVudFNob3VsZFVwZGF0ZSAhPT0gJ2Z1bmN0aW9uJywgJyVzIGhhcyBhIG1ldGhvZCBjYWxsZWQgJyArICdjb21wb25lbnRTaG91bGRVcGRhdGUoKS4gRGlkIHlvdSBtZWFuIHNob3VsZENvbXBvbmVudFVwZGF0ZSgpPyAnICsgJ1RoZSBuYW1lIGlzIHBocmFzZWQgYXMgYSBxdWVzdGlvbiBiZWNhdXNlIHRoZSBmdW5jdGlvbiBpcyAnICsgJ2V4cGVjdGVkIHRvIHJldHVybiBhIHZhbHVlLicsIHRoaXMuZ2V0TmFtZSgpIHx8ICdBIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodHlwZW9mIGluc3QuY29tcG9uZW50RGlkVW5tb3VudCAhPT0gJ2Z1bmN0aW9uJywgJyVzIGhhcyBhIG1ldGhvZCBjYWxsZWQgJyArICdjb21wb25lbnREaWRVbm1vdW50KCkuIEJ1dCB0aGVyZSBpcyBubyBzdWNoIGxpZmVjeWNsZSBtZXRob2QuICcgKyAnRGlkIHlvdSBtZWFuIGNvbXBvbmVudFdpbGxVbm1vdW50KCk/JywgdGhpcy5nZXROYW1lKCkgfHwgJ0EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh0eXBlb2YgaW5zdC5jb21wb25lbnRXaWxsUmVjaWV2ZVByb3BzICE9PSAnZnVuY3Rpb24nLCAnJXMgaGFzIGEgbWV0aG9kIGNhbGxlZCAnICsgJ2NvbXBvbmVudFdpbGxSZWNpZXZlUHJvcHMoKS4gRGlkIHlvdSBtZWFuIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMoKT8nLCB0aGlzLmdldE5hbWUoKSB8fCAnQSBjb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICB2YXIgaW5pdGlhbFN0YXRlID0gaW5zdC5zdGF0ZTtcbiAgICBpZiAoaW5pdGlhbFN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGluc3Quc3RhdGUgPSBpbml0aWFsU3RhdGUgPSBudWxsO1xuICAgIH1cbiAgICAhKHR5cGVvZiBpbml0aWFsU3RhdGUgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KGluaXRpYWxTdGF0ZSkpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJyVzLnN0YXRlOiBtdXN0IGJlIHNldCB0byBhbiBvYmplY3Qgb3IgbnVsbCcsIHRoaXMuZ2V0TmFtZSgpIHx8ICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIHRoaXMuX3BlbmRpbmdTdGF0ZVF1ZXVlID0gbnVsbDtcbiAgICB0aGlzLl9wZW5kaW5nUmVwbGFjZVN0YXRlID0gZmFsc2U7XG4gICAgdGhpcy5fcGVuZGluZ0ZvcmNlVXBkYXRlID0gZmFsc2U7XG5cbiAgICBpZiAoaW5zdC5jb21wb25lbnRXaWxsTW91bnQpIHtcbiAgICAgIGluc3QuY29tcG9uZW50V2lsbE1vdW50KCk7XG4gICAgICAvLyBXaGVuIG1vdW50aW5nLCBjYWxscyB0byBgc2V0U3RhdGVgIGJ5IGBjb21wb25lbnRXaWxsTW91bnRgIHdpbGwgc2V0XG4gICAgICAvLyBgdGhpcy5fcGVuZGluZ1N0YXRlUXVldWVgIHdpdGhvdXQgdHJpZ2dlcmluZyBhIHJlLXJlbmRlci5cbiAgICAgIGlmICh0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZSkge1xuICAgICAgICBpbnN0LnN0YXRlID0gdGhpcy5fcHJvY2Vzc1BlbmRpbmdTdGF0ZShpbnN0LnByb3BzLCBpbnN0LmNvbnRleHQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIG5vdCBhIHN0YXRlbGVzcyBjb21wb25lbnQsIHdlIG5vdyByZW5kZXJcbiAgICBpZiAocmVuZGVyZWRFbGVtZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJlbmRlcmVkRWxlbWVudCA9IHRoaXMuX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCgpO1xuICAgIH1cblxuICAgIHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50ID0gdGhpcy5faW5zdGFudGlhdGVSZWFjdENvbXBvbmVudChyZW5kZXJlZEVsZW1lbnQpO1xuXG4gICAgdmFyIG1hcmt1cCA9IFJlYWN0UmVjb25jaWxlci5tb3VudENvbXBvbmVudCh0aGlzLl9yZW5kZXJlZENvbXBvbmVudCwgcm9vdElELCB0cmFuc2FjdGlvbiwgdGhpcy5fcHJvY2Vzc0NoaWxkQ29udGV4dChjb250ZXh0KSk7XG4gICAgaWYgKGluc3QuY29tcG9uZW50RGlkTW91bnQpIHtcbiAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUoaW5zdC5jb21wb25lbnREaWRNb3VudCwgaW5zdCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hcmt1cDtcbiAgfSxcblxuICAvKipcbiAgICogUmVsZWFzZXMgYW55IHJlc291cmNlcyBhbGxvY2F0ZWQgYnkgYG1vdW50Q29tcG9uZW50YC5cbiAgICpcbiAgICogQGZpbmFsXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdW5tb3VudENvbXBvbmVudDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBpbnN0ID0gdGhpcy5faW5zdGFuY2U7XG5cbiAgICBpZiAoaW5zdC5jb21wb25lbnRXaWxsVW5tb3VudCkge1xuICAgICAgaW5zdC5jb21wb25lbnRXaWxsVW5tb3VudCgpO1xuICAgIH1cblxuICAgIFJlYWN0UmVjb25jaWxlci51bm1vdW50Q29tcG9uZW50KHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50KTtcbiAgICB0aGlzLl9yZW5kZXJlZENvbXBvbmVudCA9IG51bGw7XG4gICAgdGhpcy5faW5zdGFuY2UgPSBudWxsO1xuXG4gICAgLy8gUmVzZXQgcGVuZGluZyBmaWVsZHNcbiAgICAvLyBFdmVuIGlmIHRoaXMgY29tcG9uZW50IGlzIHNjaGVkdWxlZCBmb3IgYW5vdGhlciB1cGRhdGUgaW4gUmVhY3RVcGRhdGVzLFxuICAgIC8vIGl0IHdvdWxkIHN0aWxsIGJlIGlnbm9yZWQgYmVjYXVzZSB0aGVzZSBmaWVsZHMgYXJlIHJlc2V0LlxuICAgIHRoaXMuX3BlbmRpbmdTdGF0ZVF1ZXVlID0gbnVsbDtcbiAgICB0aGlzLl9wZW5kaW5nUmVwbGFjZVN0YXRlID0gZmFsc2U7XG4gICAgdGhpcy5fcGVuZGluZ0ZvcmNlVXBkYXRlID0gZmFsc2U7XG4gICAgdGhpcy5fcGVuZGluZ0NhbGxiYWNrcyA9IG51bGw7XG4gICAgdGhpcy5fcGVuZGluZ0VsZW1lbnQgPSBudWxsO1xuXG4gICAgLy8gVGhlc2UgZmllbGRzIGRvIG5vdCByZWFsbHkgbmVlZCB0byBiZSByZXNldCBzaW5jZSB0aGlzIG9iamVjdCBpcyBub1xuICAgIC8vIGxvbmdlciBhY2Nlc3NpYmxlLlxuICAgIHRoaXMuX2NvbnRleHQgPSBudWxsO1xuICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSBudWxsO1xuICAgIHRoaXMuX3RvcExldmVsV3JhcHBlciA9IG51bGw7XG5cbiAgICAvLyBEZWxldGUgdGhlIHJlZmVyZW5jZSBmcm9tIHRoZSBpbnN0YW5jZSB0byB0aGlzIGludGVybmFsIHJlcHJlc2VudGF0aW9uXG4gICAgLy8gd2hpY2ggYWxsb3cgdGhlIGludGVybmFscyB0byBiZSBwcm9wZXJseSBjbGVhbmVkIHVwIGV2ZW4gaWYgdGhlIHVzZXJcbiAgICAvLyBsZWFrcyBhIHJlZmVyZW5jZSB0byB0aGUgcHVibGljIGluc3RhbmNlLlxuICAgIFJlYWN0SW5zdGFuY2VNYXAucmVtb3ZlKGluc3QpO1xuXG4gICAgLy8gU29tZSBleGlzdGluZyBjb21wb25lbnRzIHJlbHkgb24gaW5zdC5wcm9wcyBldmVuIGFmdGVyIHRoZXkndmUgYmVlblxuICAgIC8vIGRlc3Ryb3llZCAoaW4gZXZlbnQgaGFuZGxlcnMpLlxuICAgIC8vIFRPRE86IGluc3QucHJvcHMgPSBudWxsO1xuICAgIC8vIFRPRE86IGluc3Quc3RhdGUgPSBudWxsO1xuICAgIC8vIFRPRE86IGluc3QuY29udGV4dCA9IG51bGw7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbHRlcnMgdGhlIGNvbnRleHQgb2JqZWN0IHRvIG9ubHkgY29udGFpbiBrZXlzIHNwZWNpZmllZCBpblxuICAgKiBgY29udGV4dFR5cGVzYFxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGV4dFxuICAgKiBAcmV0dXJuIHs/b2JqZWN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX21hc2tDb250ZXh0OiBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgIHZhciBtYXNrZWRDb250ZXh0ID0gbnVsbDtcbiAgICB2YXIgQ29tcG9uZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQudHlwZTtcbiAgICB2YXIgY29udGV4dFR5cGVzID0gQ29tcG9uZW50LmNvbnRleHRUeXBlcztcbiAgICBpZiAoIWNvbnRleHRUeXBlcykge1xuICAgICAgcmV0dXJuIGVtcHR5T2JqZWN0O1xuICAgIH1cbiAgICBtYXNrZWRDb250ZXh0ID0ge307XG4gICAgZm9yICh2YXIgY29udGV4dE5hbWUgaW4gY29udGV4dFR5cGVzKSB7XG4gICAgICBtYXNrZWRDb250ZXh0W2NvbnRleHROYW1lXSA9IGNvbnRleHRbY29udGV4dE5hbWVdO1xuICAgIH1cbiAgICByZXR1cm4gbWFza2VkQ29udGV4dDtcbiAgfSxcblxuICAvKipcbiAgICogRmlsdGVycyB0aGUgY29udGV4dCBvYmplY3QgdG8gb25seSBjb250YWluIGtleXMgc3BlY2lmaWVkIGluXG4gICAqIGBjb250ZXh0VHlwZXNgLCBhbmQgYXNzZXJ0cyB0aGF0IHRoZXkgYXJlIHZhbGlkLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGV4dFxuICAgKiBAcmV0dXJuIHs/b2JqZWN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Byb2Nlc3NDb250ZXh0OiBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgIHZhciBtYXNrZWRDb250ZXh0ID0gdGhpcy5fbWFza0NvbnRleHQoY29udGV4dCk7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciBDb21wb25lbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlO1xuICAgICAgaWYgKENvbXBvbmVudC5jb250ZXh0VHlwZXMpIHtcbiAgICAgICAgdGhpcy5fY2hlY2tQcm9wVHlwZXMoQ29tcG9uZW50LmNvbnRleHRUeXBlcywgbWFza2VkQ29udGV4dCwgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5jb250ZXh0KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1hc2tlZENvbnRleHQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjdXJyZW50Q29udGV4dFxuICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcHJvY2Vzc0NoaWxkQ29udGV4dDogZnVuY3Rpb24gKGN1cnJlbnRDb250ZXh0KSB7XG4gICAgdmFyIENvbXBvbmVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG4gICAgdmFyIGluc3QgPSB0aGlzLl9pbnN0YW5jZTtcbiAgICB2YXIgY2hpbGRDb250ZXh0ID0gaW5zdC5nZXRDaGlsZENvbnRleHQgJiYgaW5zdC5nZXRDaGlsZENvbnRleHQoKTtcbiAgICBpZiAoY2hpbGRDb250ZXh0KSB7XG4gICAgICAhKHR5cGVvZiBDb21wb25lbnQuY2hpbGRDb250ZXh0VHlwZXMgPT09ICdvYmplY3QnKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclcy5nZXRDaGlsZENvbnRleHQoKTogY2hpbGRDb250ZXh0VHlwZXMgbXVzdCBiZSBkZWZpbmVkIGluIG9yZGVyIHRvICcgKyAndXNlIGdldENoaWxkQ29udGV4dCgpLicsIHRoaXMuZ2V0TmFtZSgpIHx8ICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHRoaXMuX2NoZWNrUHJvcFR5cGVzKENvbXBvbmVudC5jaGlsZENvbnRleHRUeXBlcywgY2hpbGRDb250ZXh0LCBSZWFjdFByb3BUeXBlTG9jYXRpb25zLmNoaWxkQ29udGV4dCk7XG4gICAgICB9XG4gICAgICBmb3IgKHZhciBuYW1lIGluIGNoaWxkQ29udGV4dCkge1xuICAgICAgICAhKG5hbWUgaW4gQ29tcG9uZW50LmNoaWxkQ29udGV4dFR5cGVzKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclcy5nZXRDaGlsZENvbnRleHQoKToga2V5IFwiJXNcIiBpcyBub3QgZGVmaW5lZCBpbiBjaGlsZENvbnRleHRUeXBlcy4nLCB0aGlzLmdldE5hbWUoKSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnLCBuYW1lKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgICByZXR1cm4gYXNzaWduKHt9LCBjdXJyZW50Q29udGV4dCwgY2hpbGRDb250ZXh0KTtcbiAgICB9XG4gICAgcmV0dXJuIGN1cnJlbnRDb250ZXh0O1xuICB9LFxuXG4gIC8qKlxuICAgKiBQcm9jZXNzZXMgcHJvcHMgYnkgc2V0dGluZyBkZWZhdWx0IHZhbHVlcyBmb3IgdW5zcGVjaWZpZWQgcHJvcHMgYW5kXG4gICAqIGFzc2VydGluZyB0aGF0IHRoZSBwcm9wcyBhcmUgdmFsaWQuIERvZXMgbm90IG11dGF0ZSBpdHMgYXJndW1lbnQ7IHJldHVybnNcbiAgICogYSBuZXcgcHJvcHMgb2JqZWN0IHdpdGggZGVmYXVsdHMgbWVyZ2VkIGluLlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmV3UHJvcHNcbiAgICogQHJldHVybiB7b2JqZWN0fVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Byb2Nlc3NQcm9wczogZnVuY3Rpb24gKG5ld1Byb3BzKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciBDb21wb25lbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudC50eXBlO1xuICAgICAgaWYgKENvbXBvbmVudC5wcm9wVHlwZXMpIHtcbiAgICAgICAgdGhpcy5fY2hlY2tQcm9wVHlwZXMoQ29tcG9uZW50LnByb3BUeXBlcywgbmV3UHJvcHMsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbnMucHJvcCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXdQcm9wcztcbiAgfSxcblxuICAvKipcbiAgICogQXNzZXJ0IHRoYXQgdGhlIHByb3BzIGFyZSB2YWxpZFxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcFR5cGVzIE1hcCBvZiBwcm9wIG5hbWUgdG8gYSBSZWFjdFByb3BUeXBlXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wc1xuICAgKiBAcGFyYW0ge3N0cmluZ30gbG9jYXRpb24gZS5nLiBcInByb3BcIiwgXCJjb250ZXh0XCIsIFwiY2hpbGQgY29udGV4dFwiXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfY2hlY2tQcm9wVHlwZXM6IGZ1bmN0aW9uIChwcm9wVHlwZXMsIHByb3BzLCBsb2NhdGlvbikge1xuICAgIC8vIFRPRE86IFN0b3AgdmFsaWRhdGluZyBwcm9wIHR5cGVzIGhlcmUgYW5kIG9ubHkgdXNlIHRoZSBlbGVtZW50XG4gICAgLy8gdmFsaWRhdGlvbi5cbiAgICB2YXIgY29tcG9uZW50TmFtZSA9IHRoaXMuZ2V0TmFtZSgpO1xuICAgIGZvciAodmFyIHByb3BOYW1lIGluIHByb3BUeXBlcykge1xuICAgICAgaWYgKHByb3BUeXBlcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgdmFyIGVycm9yO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgaXMgaW50ZW50aW9uYWxseSBhbiBpbnZhcmlhbnQgdGhhdCBnZXRzIGNhdWdodC4gSXQncyB0aGUgc2FtZVxuICAgICAgICAgIC8vIGJlaGF2aW9yIGFzIHdpdGhvdXQgdGhpcyBzdGF0ZW1lbnQgZXhjZXB0IHdpdGggYSBiZXR0ZXIgbWVzc2FnZS5cbiAgICAgICAgICAhKHR5cGVvZiBwcm9wVHlwZXNbcHJvcE5hbWVdID09PSAnZnVuY3Rpb24nKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclczogJXMgdHlwZSBgJXNgIGlzIGludmFsaWQ7IGl0IG11c3QgYmUgYSBmdW5jdGlvbiwgdXN1YWxseSAnICsgJ2Zyb20gUmVhY3QuUHJvcFR5cGVzLicsIGNvbXBvbmVudE5hbWUgfHwgJ1JlYWN0IGNsYXNzJywgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dLCBwcm9wTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgICAgIGVycm9yID0gcHJvcFR5cGVzW3Byb3BOYW1lXShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uKTtcbiAgICAgICAgfSBjYXRjaCAoZXgpIHtcbiAgICAgICAgICBlcnJvciA9IGV4O1xuICAgICAgICB9XG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgICAgLy8gV2UgbWF5IHdhbnQgdG8gZXh0ZW5kIHRoaXMgbG9naWMgZm9yIHNpbWlsYXIgZXJyb3JzIGluXG4gICAgICAgICAgLy8gdG9wLWxldmVsIHJlbmRlciBjYWxscywgc28gSSdtIGFic3RyYWN0aW5nIGl0IGF3YXkgaW50b1xuICAgICAgICAgIC8vIGEgZnVuY3Rpb24gdG8gbWluaW1pemUgcmVmYWN0b3JpbmcgaW4gdGhlIGZ1dHVyZVxuICAgICAgICAgIHZhciBhZGRlbmR1bSA9IGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bSh0aGlzKTtcblxuICAgICAgICAgIGlmIChsb2NhdGlvbiA9PT0gUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5wcm9wKSB7XG4gICAgICAgICAgICAvLyBQcmVmYWNlIGdpdmVzIHVzIHNvbWV0aGluZyB0byBibGFja2xpc3QgaW4gd2FybmluZyBtb2R1bGVcbiAgICAgICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnRmFpbGVkIENvbXBvc2l0ZSBwcm9wVHlwZTogJXMlcycsIGVycm9yLm1lc3NhZ2UsIGFkZGVuZHVtKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdGYWlsZWQgQ29udGV4dCBUeXBlczogJXMlcycsIGVycm9yLm1lc3NhZ2UsIGFkZGVuZHVtKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgcmVjZWl2ZUNvbXBvbmVudDogZnVuY3Rpb24gKG5leHRFbGVtZW50LCB0cmFuc2FjdGlvbiwgbmV4dENvbnRleHQpIHtcbiAgICB2YXIgcHJldkVsZW1lbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudDtcbiAgICB2YXIgcHJldkNvbnRleHQgPSB0aGlzLl9jb250ZXh0O1xuXG4gICAgdGhpcy5fcGVuZGluZ0VsZW1lbnQgPSBudWxsO1xuXG4gICAgdGhpcy51cGRhdGVDb21wb25lbnQodHJhbnNhY3Rpb24sIHByZXZFbGVtZW50LCBuZXh0RWxlbWVudCwgcHJldkNvbnRleHQsIG5leHRDb250ZXh0KTtcbiAgfSxcblxuICAvKipcbiAgICogSWYgYW55IG9mIGBfcGVuZGluZ0VsZW1lbnRgLCBgX3BlbmRpbmdTdGF0ZVF1ZXVlYCwgb3IgYF9wZW5kaW5nRm9yY2VVcGRhdGVgXG4gICAqIGlzIHNldCwgdXBkYXRlIHRoZSBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQGludGVybmFsXG4gICAqL1xuICBwZXJmb3JtVXBkYXRlSWZOZWNlc3Nhcnk6IGZ1bmN0aW9uICh0cmFuc2FjdGlvbikge1xuICAgIGlmICh0aGlzLl9wZW5kaW5nRWxlbWVudCAhPSBudWxsKSB7XG4gICAgICBSZWFjdFJlY29uY2lsZXIucmVjZWl2ZUNvbXBvbmVudCh0aGlzLCB0aGlzLl9wZW5kaW5nRWxlbWVudCB8fCB0aGlzLl9jdXJyZW50RWxlbWVudCwgdHJhbnNhY3Rpb24sIHRoaXMuX2NvbnRleHQpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9wZW5kaW5nU3RhdGVRdWV1ZSAhPT0gbnVsbCB8fCB0aGlzLl9wZW5kaW5nRm9yY2VVcGRhdGUpIHtcbiAgICAgIHRoaXMudXBkYXRlQ29tcG9uZW50KHRyYW5zYWN0aW9uLCB0aGlzLl9jdXJyZW50RWxlbWVudCwgdGhpcy5fY3VycmVudEVsZW1lbnQsIHRoaXMuX2NvbnRleHQsIHRoaXMuX2NvbnRleHQpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUGVyZm9ybSBhbiB1cGRhdGUgdG8gYSBtb3VudGVkIGNvbXBvbmVudC4gVGhlIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgYW5kXG4gICAqIHNob3VsZENvbXBvbmVudFVwZGF0ZSBtZXRob2RzIGFyZSBjYWxsZWQsIHRoZW4gKGFzc3VtaW5nIHRoZSB1cGRhdGUgaXNuJ3RcbiAgICogc2tpcHBlZCkgdGhlIHJlbWFpbmluZyB1cGRhdGUgbGlmZWN5Y2xlIG1ldGhvZHMgYXJlIGNhbGxlZCBhbmQgdGhlIERPTVxuICAgKiByZXByZXNlbnRhdGlvbiBpcyB1cGRhdGVkLlxuICAgKlxuICAgKiBCeSBkZWZhdWx0LCB0aGlzIGltcGxlbWVudHMgUmVhY3QncyByZW5kZXJpbmcgYW5kIHJlY29uY2lsaWF0aW9uIGFsZ29yaXRobS5cbiAgICogU29waGlzdGljYXRlZCBjbGllbnRzIG1heSB3aXNoIHRvIG92ZXJyaWRlIHRoaXMuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IHByZXZQYXJlbnRFbGVtZW50XG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0UGFyZW50RWxlbWVudFxuICAgKiBAaW50ZXJuYWxcbiAgICogQG92ZXJyaWRhYmxlXG4gICAqL1xuICB1cGRhdGVDb21wb25lbnQ6IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcHJldlBhcmVudEVsZW1lbnQsIG5leHRQYXJlbnRFbGVtZW50LCBwcmV2VW5tYXNrZWRDb250ZXh0LCBuZXh0VW5tYXNrZWRDb250ZXh0KSB7XG4gICAgdmFyIGluc3QgPSB0aGlzLl9pbnN0YW5jZTtcblxuICAgIHZhciBuZXh0Q29udGV4dCA9IHRoaXMuX2NvbnRleHQgPT09IG5leHRVbm1hc2tlZENvbnRleHQgPyBpbnN0LmNvbnRleHQgOiB0aGlzLl9wcm9jZXNzQ29udGV4dChuZXh0VW5tYXNrZWRDb250ZXh0KTtcbiAgICB2YXIgbmV4dFByb3BzO1xuXG4gICAgLy8gRGlzdGluZ3Vpc2ggYmV0d2VlbiBhIHByb3BzIHVwZGF0ZSB2ZXJzdXMgYSBzaW1wbGUgc3RhdGUgdXBkYXRlXG4gICAgaWYgKHByZXZQYXJlbnRFbGVtZW50ID09PSBuZXh0UGFyZW50RWxlbWVudCkge1xuICAgICAgLy8gU2tpcCBjaGVja2luZyBwcm9wIHR5cGVzIGFnYWluIC0tIHdlIGRvbid0IHJlYWQgaW5zdC5wcm9wcyB0byBhdm9pZFxuICAgICAgLy8gd2FybmluZyBmb3IgRE9NIGNvbXBvbmVudCBwcm9wcyBpbiB0aGlzIHVwZ3JhZGVcbiAgICAgIG5leHRQcm9wcyA9IG5leHRQYXJlbnRFbGVtZW50LnByb3BzO1xuICAgIH0gZWxzZSB7XG4gICAgICBuZXh0UHJvcHMgPSB0aGlzLl9wcm9jZXNzUHJvcHMobmV4dFBhcmVudEVsZW1lbnQucHJvcHMpO1xuICAgICAgLy8gQW4gdXBkYXRlIGhlcmUgd2lsbCBzY2hlZHVsZSBhbiB1cGRhdGUgYnV0IGltbWVkaWF0ZWx5IHNldFxuICAgICAgLy8gX3BlbmRpbmdTdGF0ZVF1ZXVlIHdoaWNoIHdpbGwgZW5zdXJlIHRoYXQgYW55IHN0YXRlIHVwZGF0ZXMgZ2V0c1xuICAgICAgLy8gaW1tZWRpYXRlbHkgcmVjb25jaWxlZCBpbnN0ZWFkIG9mIHdhaXRpbmcgZm9yIHRoZSBuZXh0IGJhdGNoLlxuXG4gICAgICBpZiAoaW5zdC5jb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKSB7XG4gICAgICAgIGluc3QuY29tcG9uZW50V2lsbFJlY2VpdmVQcm9wcyhuZXh0UHJvcHMsIG5leHRDb250ZXh0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbmV4dFN0YXRlID0gdGhpcy5fcHJvY2Vzc1BlbmRpbmdTdGF0ZShuZXh0UHJvcHMsIG5leHRDb250ZXh0KTtcblxuICAgIHZhciBzaG91bGRVcGRhdGUgPSB0aGlzLl9wZW5kaW5nRm9yY2VVcGRhdGUgfHwgIWluc3Quc2hvdWxkQ29tcG9uZW50VXBkYXRlIHx8IGluc3Quc2hvdWxkQ29tcG9uZW50VXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlLCBuZXh0Q29udGV4dCk7XG5cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcodHlwZW9mIHNob3VsZFVwZGF0ZSAhPT0gJ3VuZGVmaW5lZCcsICclcy5zaG91bGRDb21wb25lbnRVcGRhdGUoKTogUmV0dXJuZWQgdW5kZWZpbmVkIGluc3RlYWQgb2YgYSAnICsgJ2Jvb2xlYW4gdmFsdWUuIE1ha2Ugc3VyZSB0byByZXR1cm4gdHJ1ZSBvciBmYWxzZS4nLCB0aGlzLmdldE5hbWUoKSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICBpZiAoc2hvdWxkVXBkYXRlKSB7XG4gICAgICB0aGlzLl9wZW5kaW5nRm9yY2VVcGRhdGUgPSBmYWxzZTtcbiAgICAgIC8vIFdpbGwgc2V0IGB0aGlzLnByb3BzYCwgYHRoaXMuc3RhdGVgIGFuZCBgdGhpcy5jb250ZXh0YC5cbiAgICAgIHRoaXMuX3BlcmZvcm1Db21wb25lbnRVcGRhdGUobmV4dFBhcmVudEVsZW1lbnQsIG5leHRQcm9wcywgbmV4dFN0YXRlLCBuZXh0Q29udGV4dCwgdHJhbnNhY3Rpb24sIG5leHRVbm1hc2tlZENvbnRleHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiBpdCdzIGRldGVybWluZWQgdGhhdCBhIGNvbXBvbmVudCBzaG91bGQgbm90IHVwZGF0ZSwgd2Ugc3RpbGwgd2FudFxuICAgICAgLy8gdG8gc2V0IHByb3BzIGFuZCBzdGF0ZSBidXQgd2Ugc2hvcnRjdXQgdGhlIHJlc3Qgb2YgdGhlIHVwZGF0ZS5cbiAgICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gbmV4dFBhcmVudEVsZW1lbnQ7XG4gICAgICB0aGlzLl9jb250ZXh0ID0gbmV4dFVubWFza2VkQ29udGV4dDtcbiAgICAgIGluc3QucHJvcHMgPSBuZXh0UHJvcHM7XG4gICAgICBpbnN0LnN0YXRlID0gbmV4dFN0YXRlO1xuICAgICAgaW5zdC5jb250ZXh0ID0gbmV4dENvbnRleHQ7XG4gICAgfVxuICB9LFxuXG4gIF9wcm9jZXNzUGVuZGluZ1N0YXRlOiBmdW5jdGlvbiAocHJvcHMsIGNvbnRleHQpIHtcbiAgICB2YXIgaW5zdCA9IHRoaXMuX2luc3RhbmNlO1xuICAgIHZhciBxdWV1ZSA9IHRoaXMuX3BlbmRpbmdTdGF0ZVF1ZXVlO1xuICAgIHZhciByZXBsYWNlID0gdGhpcy5fcGVuZGluZ1JlcGxhY2VTdGF0ZTtcbiAgICB0aGlzLl9wZW5kaW5nUmVwbGFjZVN0YXRlID0gZmFsc2U7XG4gICAgdGhpcy5fcGVuZGluZ1N0YXRlUXVldWUgPSBudWxsO1xuXG4gICAgaWYgKCFxdWV1ZSkge1xuICAgICAgcmV0dXJuIGluc3Quc3RhdGU7XG4gICAgfVxuXG4gICAgaWYgKHJlcGxhY2UgJiYgcXVldWUubGVuZ3RoID09PSAxKSB7XG4gICAgICByZXR1cm4gcXVldWVbMF07XG4gICAgfVxuXG4gICAgdmFyIG5leHRTdGF0ZSA9IGFzc2lnbih7fSwgcmVwbGFjZSA/IHF1ZXVlWzBdIDogaW5zdC5zdGF0ZSk7XG4gICAgZm9yICh2YXIgaSA9IHJlcGxhY2UgPyAxIDogMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgcGFydGlhbCA9IHF1ZXVlW2ldO1xuICAgICAgYXNzaWduKG5leHRTdGF0ZSwgdHlwZW9mIHBhcnRpYWwgPT09ICdmdW5jdGlvbicgPyBwYXJ0aWFsLmNhbGwoaW5zdCwgbmV4dFN0YXRlLCBwcm9wcywgY29udGV4dCkgOiBwYXJ0aWFsKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV4dFN0YXRlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBNZXJnZXMgbmV3IHByb3BzIGFuZCBzdGF0ZSwgbm90aWZpZXMgZGVsZWdhdGUgbWV0aG9kcyBvZiB1cGRhdGUgYW5kXG4gICAqIHBlcmZvcm1zIHVwZGF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IG5leHRFbGVtZW50IE5leHQgZWxlbWVudFxuICAgKiBAcGFyYW0ge29iamVjdH0gbmV4dFByb3BzIE5leHQgcHVibGljIG9iamVjdCB0byBzZXQgYXMgcHJvcGVydGllcy5cbiAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0U3RhdGUgTmV4dCBvYmplY3QgdG8gc2V0IGFzIHN0YXRlLlxuICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHRDb250ZXh0IE5leHQgcHVibGljIG9iamVjdCB0byBzZXQgYXMgY29udGV4dC5cbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0gez9vYmplY3R9IHVubWFza2VkQ29udGV4dFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3BlcmZvcm1Db21wb25lbnRVcGRhdGU6IGZ1bmN0aW9uIChuZXh0RWxlbWVudCwgbmV4dFByb3BzLCBuZXh0U3RhdGUsIG5leHRDb250ZXh0LCB0cmFuc2FjdGlvbiwgdW5tYXNrZWRDb250ZXh0KSB7XG4gICAgdmFyIGluc3QgPSB0aGlzLl9pbnN0YW5jZTtcblxuICAgIHZhciBoYXNDb21wb25lbnREaWRVcGRhdGUgPSBCb29sZWFuKGluc3QuY29tcG9uZW50RGlkVXBkYXRlKTtcbiAgICB2YXIgcHJldlByb3BzO1xuICAgIHZhciBwcmV2U3RhdGU7XG4gICAgdmFyIHByZXZDb250ZXh0O1xuICAgIGlmIChoYXNDb21wb25lbnREaWRVcGRhdGUpIHtcbiAgICAgIHByZXZQcm9wcyA9IGluc3QucHJvcHM7XG4gICAgICBwcmV2U3RhdGUgPSBpbnN0LnN0YXRlO1xuICAgICAgcHJldkNvbnRleHQgPSBpbnN0LmNvbnRleHQ7XG4gICAgfVxuXG4gICAgaWYgKGluc3QuY29tcG9uZW50V2lsbFVwZGF0ZSkge1xuICAgICAgaW5zdC5jb21wb25lbnRXaWxsVXBkYXRlKG5leHRQcm9wcywgbmV4dFN0YXRlLCBuZXh0Q29udGV4dCk7XG4gICAgfVxuXG4gICAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBuZXh0RWxlbWVudDtcbiAgICB0aGlzLl9jb250ZXh0ID0gdW5tYXNrZWRDb250ZXh0O1xuICAgIGluc3QucHJvcHMgPSBuZXh0UHJvcHM7XG4gICAgaW5zdC5zdGF0ZSA9IG5leHRTdGF0ZTtcbiAgICBpbnN0LmNvbnRleHQgPSBuZXh0Q29udGV4dDtcblxuICAgIHRoaXMuX3VwZGF0ZVJlbmRlcmVkQ29tcG9uZW50KHRyYW5zYWN0aW9uLCB1bm1hc2tlZENvbnRleHQpO1xuXG4gICAgaWYgKGhhc0NvbXBvbmVudERpZFVwZGF0ZSkge1xuICAgICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShpbnN0LmNvbXBvbmVudERpZFVwZGF0ZS5iaW5kKGluc3QsIHByZXZQcm9wcywgcHJldlN0YXRlLCBwcmV2Q29udGV4dCksIGluc3QpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQ2FsbCB0aGUgY29tcG9uZW50J3MgYHJlbmRlcmAgbWV0aG9kIGFuZCB1cGRhdGUgdGhlIERPTSBhY2NvcmRpbmdseS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIF91cGRhdGVSZW5kZXJlZENvbXBvbmVudDogZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgdmFyIHByZXZDb21wb25lbnRJbnN0YW5jZSA9IHRoaXMuX3JlbmRlcmVkQ29tcG9uZW50O1xuICAgIHZhciBwcmV2UmVuZGVyZWRFbGVtZW50ID0gcHJldkNvbXBvbmVudEluc3RhbmNlLl9jdXJyZW50RWxlbWVudDtcbiAgICB2YXIgbmV4dFJlbmRlcmVkRWxlbWVudCA9IHRoaXMuX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCgpO1xuICAgIGlmIChzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudChwcmV2UmVuZGVyZWRFbGVtZW50LCBuZXh0UmVuZGVyZWRFbGVtZW50KSkge1xuICAgICAgUmVhY3RSZWNvbmNpbGVyLnJlY2VpdmVDb21wb25lbnQocHJldkNvbXBvbmVudEluc3RhbmNlLCBuZXh0UmVuZGVyZWRFbGVtZW50LCB0cmFuc2FjdGlvbiwgdGhpcy5fcHJvY2Vzc0NoaWxkQ29udGV4dChjb250ZXh0KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRoZXNlIHR3byBJRHMgYXJlIGFjdHVhbGx5IHRoZSBzYW1lISBCdXQgbm90aGluZyBzaG91bGQgcmVseSBvbiB0aGF0LlxuICAgICAgdmFyIHRoaXNJRCA9IHRoaXMuX3Jvb3ROb2RlSUQ7XG4gICAgICB2YXIgcHJldkNvbXBvbmVudElEID0gcHJldkNvbXBvbmVudEluc3RhbmNlLl9yb290Tm9kZUlEO1xuICAgICAgUmVhY3RSZWNvbmNpbGVyLnVubW91bnRDb21wb25lbnQocHJldkNvbXBvbmVudEluc3RhbmNlKTtcblxuICAgICAgdGhpcy5fcmVuZGVyZWRDb21wb25lbnQgPSB0aGlzLl9pbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50KG5leHRSZW5kZXJlZEVsZW1lbnQpO1xuICAgICAgdmFyIG5leHRNYXJrdXAgPSBSZWFjdFJlY29uY2lsZXIubW91bnRDb21wb25lbnQodGhpcy5fcmVuZGVyZWRDb21wb25lbnQsIHRoaXNJRCwgdHJhbnNhY3Rpb24sIHRoaXMuX3Byb2Nlc3NDaGlsZENvbnRleHQoY29udGV4dCkpO1xuICAgICAgdGhpcy5fcmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRChwcmV2Q29tcG9uZW50SUQsIG5leHRNYXJrdXApO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgX3JlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQ6IGZ1bmN0aW9uIChwcmV2Q29tcG9uZW50SUQsIG5leHRNYXJrdXApIHtcbiAgICBSZWFjdENvbXBvbmVudEVudmlyb25tZW50LnJlcGxhY2VOb2RlV2l0aE1hcmt1cEJ5SUQocHJldkNvbXBvbmVudElELCBuZXh0TWFya3VwKTtcbiAgfSxcblxuICAvKipcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudFdpdGhvdXRPd25lck9yQ29udGV4dDogZnVuY3Rpb24gKCkge1xuICAgIHZhciBpbnN0ID0gdGhpcy5faW5zdGFuY2U7XG4gICAgdmFyIHJlbmRlcmVkQ29tcG9uZW50ID0gaW5zdC5yZW5kZXIoKTtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gV2UgYWxsb3cgYXV0by1tb2NrcyB0byBwcm9jZWVkIGFzIGlmIHRoZXkncmUgcmV0dXJuaW5nIG51bGwuXG4gICAgICBpZiAodHlwZW9mIHJlbmRlcmVkQ29tcG9uZW50ID09PSAndW5kZWZpbmVkJyAmJiBpbnN0LnJlbmRlci5faXNNb2NrRnVuY3Rpb24pIHtcbiAgICAgICAgLy8gVGhpcyBpcyBwcm9iYWJseSBiYWQgcHJhY3RpY2UuIENvbnNpZGVyIHdhcm5pbmcgaGVyZSBhbmRcbiAgICAgICAgLy8gZGVwcmVjYXRpbmcgdGhpcyBjb252ZW5pZW5jZS5cbiAgICAgICAgcmVuZGVyZWRDb21wb25lbnQgPSBudWxsO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZW5kZXJlZENvbXBvbmVudDtcbiAgfSxcblxuICAvKipcbiAgICogQHByaXZhdGVcbiAgICovXG4gIF9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVuZGVyZWRDb21wb25lbnQ7XG4gICAgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9IHRoaXM7XG4gICAgdHJ5IHtcbiAgICAgIHJlbmRlcmVkQ29tcG9uZW50ID0gdGhpcy5fcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50V2l0aG91dE93bmVyT3JDb250ZXh0KCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSBudWxsO1xuICAgIH1cbiAgICAhKFxuICAgIC8vIFRPRE86IEFuIGBpc1ZhbGlkTm9kZWAgZnVuY3Rpb24gd291bGQgcHJvYmFibHkgYmUgbW9yZSBhcHByb3ByaWF0ZVxuICAgIHJlbmRlcmVkQ29tcG9uZW50ID09PSBudWxsIHx8IHJlbmRlcmVkQ29tcG9uZW50ID09PSBmYWxzZSB8fCBSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQocmVuZGVyZWRDb21wb25lbnQpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclcy5yZW5kZXIoKTogQSB2YWxpZCBSZWFjdENvbXBvbmVudCBtdXN0IGJlIHJldHVybmVkLiBZb3UgbWF5IGhhdmUgJyArICdyZXR1cm5lZCB1bmRlZmluZWQsIGFuIGFycmF5IG9yIHNvbWUgb3RoZXIgaW52YWxpZCBvYmplY3QuJywgdGhpcy5nZXROYW1lKCkgfHwgJ1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50JykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHJldHVybiByZW5kZXJlZENvbXBvbmVudDtcbiAgfSxcblxuICAvKipcbiAgICogTGF6aWx5IGFsbG9jYXRlcyB0aGUgcmVmcyBvYmplY3QgYW5kIHN0b3JlcyBgY29tcG9uZW50YCBhcyBgcmVmYC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJlZiBSZWZlcmVuY2UgbmFtZS5cbiAgICogQHBhcmFtIHtjb21wb25lbnR9IGNvbXBvbmVudCBDb21wb25lbnQgdG8gc3RvcmUgYXMgYHJlZmAuXG4gICAqIEBmaW5hbFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgYXR0YWNoUmVmOiBmdW5jdGlvbiAocmVmLCBjb21wb25lbnQpIHtcbiAgICB2YXIgaW5zdCA9IHRoaXMuZ2V0UHVibGljSW5zdGFuY2UoKTtcbiAgICAhKGluc3QgIT0gbnVsbCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnU3RhdGVsZXNzIGZ1bmN0aW9uIGNvbXBvbmVudHMgY2Fubm90IGhhdmUgcmVmcy4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgdmFyIHB1YmxpY0NvbXBvbmVudEluc3RhbmNlID0gY29tcG9uZW50LmdldFB1YmxpY0luc3RhbmNlKCk7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciBjb21wb25lbnROYW1lID0gY29tcG9uZW50ICYmIGNvbXBvbmVudC5nZXROYW1lID8gY29tcG9uZW50LmdldE5hbWUoKSA6ICdhIGNvbXBvbmVudCc7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhwdWJsaWNDb21wb25lbnRJbnN0YW5jZSAhPSBudWxsLCAnU3RhdGVsZXNzIGZ1bmN0aW9uIGNvbXBvbmVudHMgY2Fubm90IGJlIGdpdmVuIHJlZnMgJyArICcoU2VlIHJlZiBcIiVzXCIgaW4gJXMgY3JlYXRlZCBieSAlcykuICcgKyAnQXR0ZW1wdHMgdG8gYWNjZXNzIHRoaXMgcmVmIHdpbGwgZmFpbC4nLCByZWYsIGNvbXBvbmVudE5hbWUsIHRoaXMuZ2V0TmFtZSgpKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gICAgdmFyIHJlZnMgPSBpbnN0LnJlZnMgPT09IGVtcHR5T2JqZWN0ID8gaW5zdC5yZWZzID0ge30gOiBpbnN0LnJlZnM7XG4gICAgcmVmc1tyZWZdID0gcHVibGljQ29tcG9uZW50SW5zdGFuY2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERldGFjaGVzIGEgcmVmZXJlbmNlIG5hbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWYgTmFtZSB0byBkZXJlZmVyZW5jZS5cbiAgICogQGZpbmFsXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBkZXRhY2hSZWY6IGZ1bmN0aW9uIChyZWYpIHtcbiAgICB2YXIgcmVmcyA9IHRoaXMuZ2V0UHVibGljSW5zdGFuY2UoKS5yZWZzO1xuICAgIGRlbGV0ZSByZWZzW3JlZl07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBhIHRleHQgZGVzY3JpcHRpb24gb2YgdGhlIGNvbXBvbmVudCB0aGF0IGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IGl0XG4gICAqIGluIGVycm9yIG1lc3NhZ2VzLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBuYW1lIG9yIG51bGwuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZ2V0TmFtZTogZnVuY3Rpb24gKCkge1xuICAgIHZhciB0eXBlID0gdGhpcy5fY3VycmVudEVsZW1lbnQudHlwZTtcbiAgICB2YXIgY29uc3RydWN0b3IgPSB0aGlzLl9pbnN0YW5jZSAmJiB0aGlzLl9pbnN0YW5jZS5jb25zdHJ1Y3RvcjtcbiAgICByZXR1cm4gdHlwZS5kaXNwbGF5TmFtZSB8fCBjb25zdHJ1Y3RvciAmJiBjb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSB8fCB0eXBlLm5hbWUgfHwgY29uc3RydWN0b3IgJiYgY29uc3RydWN0b3IubmFtZSB8fCBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHB1YmxpY2x5IGFjY2Vzc2libGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBjb21wb25lbnQgLSBpLmUuIHdoYXRcbiAgICogaXMgZXhwb3NlZCBieSByZWZzIGFuZCByZXR1cm5lZCBieSByZW5kZXIuIENhbiBiZSBudWxsIGZvciBzdGF0ZWxlc3NcbiAgICogY29tcG9uZW50cy5cbiAgICpcbiAgICogQHJldHVybiB7UmVhY3RDb21wb25lbnR9IHRoZSBwdWJsaWMgY29tcG9uZW50IGluc3RhbmNlLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGdldFB1YmxpY0luc3RhbmNlOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGluc3QgPSB0aGlzLl9pbnN0YW5jZTtcbiAgICBpZiAoaW5zdCBpbnN0YW5jZW9mIFN0YXRlbGVzc0NvbXBvbmVudCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBpbnN0O1xuICB9LFxuXG4gIC8vIFN0dWJcbiAgX2luc3RhbnRpYXRlUmVhY3RDb21wb25lbnQ6IG51bGxcblxufTtcblxuUmVhY3RQZXJmLm1lYXN1cmVNZXRob2RzKFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50TWl4aW4sICdSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCcsIHtcbiAgbW91bnRDb21wb25lbnQ6ICdtb3VudENvbXBvbmVudCcsXG4gIHVwZGF0ZUNvbXBvbmVudDogJ3VwZGF0ZUNvbXBvbmVudCcsXG4gIF9yZW5kZXJWYWxpZGF0ZWRDb21wb25lbnQ6ICdfcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50J1xufSk7XG5cbnZhciBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCA9IHtcblxuICBNaXhpbjogUmVhY3RDb21wb3NpdGVDb21wb25lbnRNaXhpblxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEN1cnJlbnRPd25lclxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBLZWVwcyB0cmFjayBvZiB0aGUgY3VycmVudCBvd25lci5cbiAqXG4gKiBUaGUgY3VycmVudCBvd25lciBpcyB0aGUgY29tcG9uZW50IHdobyBzaG91bGQgb3duIGFueSBjb21wb25lbnRzIHRoYXQgYXJlXG4gKiBjdXJyZW50bHkgYmVpbmcgY29uc3RydWN0ZWQuXG4gKi9cbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHtcblxuICAvKipcbiAgICogQGludGVybmFsXG4gICAqIEB0eXBlIHtSZWFjdENvbXBvbmVudH1cbiAgICovXG4gIGN1cnJlbnQ6IG51bGxcblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEN1cnJlbnRPd25lcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01cbiAqL1xuXG4vKiBnbG9iYWxzIF9fUkVBQ1RfREVWVE9PTFNfR0xPQkFMX0hPT0tfXyovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0RE9NVGV4dENvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3RET01UZXh0Q29tcG9uZW50Jyk7XG52YXIgUmVhY3REZWZhdWx0SW5qZWN0aW9uID0gcmVxdWlyZSgnLi9SZWFjdERlZmF1bHRJbmplY3Rpb24nKTtcbnZhciBSZWFjdEluc3RhbmNlSGFuZGxlcyA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZUhhbmRsZXMnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcbnZhciBSZWFjdFJlY29uY2lsZXIgPSByZXF1aXJlKCcuL1JlYWN0UmVjb25jaWxlcicpO1xudmFyIFJlYWN0VXBkYXRlcyA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVzJyk7XG52YXIgUmVhY3RWZXJzaW9uID0gcmVxdWlyZSgnLi9SZWFjdFZlcnNpb24nKTtcblxudmFyIGZpbmRET01Ob2RlID0gcmVxdWlyZSgnLi9maW5kRE9NTm9kZScpO1xudmFyIHJlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyID0gcmVxdWlyZSgnLi9yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cblJlYWN0RGVmYXVsdEluamVjdGlvbi5pbmplY3QoKTtcblxudmFyIHJlbmRlciA9IFJlYWN0UGVyZi5tZWFzdXJlKCdSZWFjdCcsICdyZW5kZXInLCBSZWFjdE1vdW50LnJlbmRlcik7XG5cbnZhciBSZWFjdCA9IHtcbiAgZmluZERPTU5vZGU6IGZpbmRET01Ob2RlLFxuICByZW5kZXI6IHJlbmRlcixcbiAgdW5tb3VudENvbXBvbmVudEF0Tm9kZTogUmVhY3RNb3VudC51bm1vdW50Q29tcG9uZW50QXROb2RlLFxuICB2ZXJzaW9uOiBSZWFjdFZlcnNpb24sXG5cbiAgLyogZXNsaW50LWRpc2FibGUgY2FtZWxjYXNlICovXG4gIHVuc3RhYmxlX2JhdGNoZWRVcGRhdGVzOiBSZWFjdFVwZGF0ZXMuYmF0Y2hlZFVwZGF0ZXMsXG4gIHVuc3RhYmxlX3JlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyOiByZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lclxufTtcblxuLy8gSW5qZWN0IHRoZSBydW50aW1lIGludG8gYSBkZXZ0b29scyBnbG9iYWwgaG9vayByZWdhcmRsZXNzIG9mIGJyb3dzZXIuXG4vLyBBbGxvd3MgZm9yIGRlYnVnZ2luZyB3aGVuIHRoZSBob29rIGlzIGluamVjdGVkIG9uIHRoZSBwYWdlLlxuLyogZXNsaW50LWVuYWJsZSBjYW1lbGNhc2UgKi9cbmlmICh0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fLmluamVjdCA9PT0gJ2Z1bmN0aW9uJykge1xuICBfX1JFQUNUX0RFVlRPT0xTX0dMT0JBTF9IT09LX18uaW5qZWN0KHtcbiAgICBDdXJyZW50T3duZXI6IFJlYWN0Q3VycmVudE93bmVyLFxuICAgIEluc3RhbmNlSGFuZGxlczogUmVhY3RJbnN0YW5jZUhhbmRsZXMsXG4gICAgTW91bnQ6IFJlYWN0TW91bnQsXG4gICAgUmVjb25jaWxlcjogUmVhY3RSZWNvbmNpbGVyLFxuICAgIFRleHRDb21wb25lbnQ6IFJlYWN0RE9NVGV4dENvbXBvbmVudFxuICB9KTtcbn1cblxuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgdmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcbiAgaWYgKEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiB3aW5kb3cudG9wID09PSB3aW5kb3cuc2VsZikge1xuXG4gICAgLy8gRmlyc3QgY2hlY2sgaWYgZGV2dG9vbHMgaXMgbm90IGluc3RhbGxlZFxuICAgIGlmICh0eXBlb2YgX19SRUFDVF9ERVZUT09MU19HTE9CQUxfSE9PS19fID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gSWYgd2UncmUgaW4gQ2hyb21lIG9yIEZpcmVmb3gsIHByb3ZpZGUgYSBkb3dubG9hZCBsaW5rIGlmIG5vdCBpbnN0YWxsZWQuXG4gICAgICBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdDaHJvbWUnKSA+IC0xICYmIG5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZignRWRnZScpID09PSAtMSB8fCBuYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoJ0ZpcmVmb3gnKSA+IC0xKSB7XG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ0Rvd25sb2FkIHRoZSBSZWFjdCBEZXZUb29scyBmb3IgYSBiZXR0ZXIgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZTogJyArICdodHRwczovL2ZiLm1lL3JlYWN0LWRldnRvb2xzJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgd2UncmUgaW4gSUU4LCBjaGVjayB0byBzZWUgaWYgd2UgYXJlIGluIGNvbXBhdGliaWxpdHkgbW9kZSBhbmQgcHJvdmlkZVxuICAgIC8vIGluZm9ybWF0aW9uIG9uIHByZXZlbnRpbmcgY29tcGF0aWJpbGl0eSBtb2RlXG4gICAgdmFyIGllQ29tcGF0aWJpbGl0eU1vZGUgPSBkb2N1bWVudC5kb2N1bWVudE1vZGUgJiYgZG9jdW1lbnQuZG9jdW1lbnRNb2RlIDwgODtcblxuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFpZUNvbXBhdGliaWxpdHlNb2RlLCAnSW50ZXJuZXQgRXhwbG9yZXIgaXMgcnVubmluZyBpbiBjb21wYXRpYmlsaXR5IG1vZGU7IHBsZWFzZSBhZGQgdGhlICcgKyAnZm9sbG93aW5nIHRhZyB0byB5b3VyIEhUTUwgdG8gcHJldmVudCB0aGlzIGZyb20gaGFwcGVuaW5nOiAnICsgJzxtZXRhIGh0dHAtZXF1aXY9XCJYLVVBLUNvbXBhdGlibGVcIiBjb250ZW50PVwiSUU9ZWRnZVwiIC8+JykgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgZXhwZWN0ZWRGZWF0dXJlcyA9IFtcbiAgICAvLyBzaGltc1xuICAgIEFycmF5LmlzQXJyYXksIEFycmF5LnByb3RvdHlwZS5ldmVyeSwgQXJyYXkucHJvdG90eXBlLmZvckVhY2gsIEFycmF5LnByb3RvdHlwZS5pbmRleE9mLCBBcnJheS5wcm90b3R5cGUubWFwLCBEYXRlLm5vdywgRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQsIE9iamVjdC5rZXlzLCBTdHJpbmcucHJvdG90eXBlLnNwbGl0LCBTdHJpbmcucHJvdG90eXBlLnRyaW0sXG5cbiAgICAvLyBzaGFtc1xuICAgIE9iamVjdC5jcmVhdGUsIE9iamVjdC5mcmVlemVdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBleHBlY3RlZEZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIWV4cGVjdGVkRmVhdHVyZXNbaV0pIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignT25lIG9yIG1vcmUgRVM1IHNoaW0vc2hhbXMgZXhwZWN0ZWQgYnkgUmVhY3QgYXJlIG5vdCBhdmFpbGFibGU6ICcgKyAnaHR0cHM6Ly9mYi5tZS9yZWFjdC13YXJuaW5nLXBvbHlmaWxscycpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01CdXR0b25cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBtb3VzZUxpc3RlbmVyTmFtZXMgPSB7XG4gIG9uQ2xpY2s6IHRydWUsXG4gIG9uRG91YmxlQ2xpY2s6IHRydWUsXG4gIG9uTW91c2VEb3duOiB0cnVlLFxuICBvbk1vdXNlTW92ZTogdHJ1ZSxcbiAgb25Nb3VzZVVwOiB0cnVlLFxuXG4gIG9uQ2xpY2tDYXB0dXJlOiB0cnVlLFxuICBvbkRvdWJsZUNsaWNrQ2FwdHVyZTogdHJ1ZSxcbiAgb25Nb3VzZURvd25DYXB0dXJlOiB0cnVlLFxuICBvbk1vdXNlTW92ZUNhcHR1cmU6IHRydWUsXG4gIG9uTW91c2VVcENhcHR1cmU6IHRydWVcbn07XG5cbi8qKlxuICogSW1wbGVtZW50cyBhIDxidXR0b24+IG5hdGl2ZSBjb21wb25lbnQgdGhhdCBkb2VzIG5vdCByZWNlaXZlIG1vdXNlIGV2ZW50c1xuICogd2hlbiBgZGlzYWJsZWRgIGlzIHNldC5cbiAqL1xudmFyIFJlYWN0RE9NQnV0dG9uID0ge1xuICBnZXROYXRpdmVQcm9wczogZnVuY3Rpb24gKGluc3QsIHByb3BzLCBjb250ZXh0KSB7XG4gICAgaWYgKCFwcm9wcy5kaXNhYmxlZCkge1xuICAgICAgcmV0dXJuIHByb3BzO1xuICAgIH1cblxuICAgIC8vIENvcHkgdGhlIHByb3BzLCBleGNlcHQgdGhlIG1vdXNlIGxpc3RlbmVyc1xuICAgIHZhciBuYXRpdmVQcm9wcyA9IHt9O1xuICAgIGZvciAodmFyIGtleSBpbiBwcm9wcykge1xuICAgICAgaWYgKHByb3BzLmhhc093blByb3BlcnR5KGtleSkgJiYgIW1vdXNlTGlzdGVuZXJOYW1lc1trZXldKSB7XG4gICAgICAgIG5hdGl2ZVByb3BzW2tleV0gPSBwcm9wc1trZXldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuYXRpdmVQcm9wcztcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTUJ1dHRvbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01Db21wb25lbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuLyogZ2xvYmFsIGhhc093blByb3BlcnR5OnRydWUgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQXV0b0ZvY3VzVXRpbHMgPSByZXF1aXJlKCcuL0F1dG9Gb2N1c1V0aWxzJyk7XG52YXIgQ1NTUHJvcGVydHlPcGVyYXRpb25zID0gcmVxdWlyZSgnLi9DU1NQcm9wZXJ0eU9wZXJhdGlvbnMnKTtcbnZhciBET01Qcm9wZXJ0eSA9IHJlcXVpcmUoJy4vRE9NUHJvcGVydHknKTtcbnZhciBET01Qcm9wZXJ0eU9wZXJhdGlvbnMgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5T3BlcmF0aW9ucycpO1xudmFyIEV2ZW50Q29uc3RhbnRzID0gcmVxdWlyZSgnLi9FdmVudENvbnN0YW50cycpO1xudmFyIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJy4vUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyJyk7XG52YXIgUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50Jyk7XG52YXIgUmVhY3RET01CdXR0b24gPSByZXF1aXJlKCcuL1JlYWN0RE9NQnV0dG9uJyk7XG52YXIgUmVhY3RET01JbnB1dCA9IHJlcXVpcmUoJy4vUmVhY3RET01JbnB1dCcpO1xudmFyIFJlYWN0RE9NT3B0aW9uID0gcmVxdWlyZSgnLi9SZWFjdERPTU9wdGlvbicpO1xudmFyIFJlYWN0RE9NU2VsZWN0ID0gcmVxdWlyZSgnLi9SZWFjdERPTVNlbGVjdCcpO1xudmFyIFJlYWN0RE9NVGV4dGFyZWEgPSByZXF1aXJlKCcuL1JlYWN0RE9NVGV4dGFyZWEnKTtcbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG52YXIgUmVhY3RNdWx0aUNoaWxkID0gcmVxdWlyZSgnLi9SZWFjdE11bHRpQ2hpbGQnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xudmFyIFJlYWN0VXBkYXRlUXVldWUgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlUXVldWUnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGNhbkRlZmluZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9jYW5EZWZpbmVQcm9wZXJ0eScpO1xudmFyIGVzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlciA9IHJlcXVpcmUoJy4vZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgaXNFdmVudFN1cHBvcnRlZCA9IHJlcXVpcmUoJy4vaXNFdmVudFN1cHBvcnRlZCcpO1xudmFyIGtleU9mID0gcmVxdWlyZSgnZmJqcy9saWIva2V5T2YnKTtcbnZhciBzZXRJbm5lckhUTUwgPSByZXF1aXJlKCcuL3NldElubmVySFRNTCcpO1xudmFyIHNldFRleHRDb250ZW50ID0gcmVxdWlyZSgnLi9zZXRUZXh0Q29udGVudCcpO1xudmFyIHNoYWxsb3dFcXVhbCA9IHJlcXVpcmUoJ2ZianMvbGliL3NoYWxsb3dFcXVhbCcpO1xudmFyIHZhbGlkYXRlRE9NTmVzdGluZyA9IHJlcXVpcmUoJy4vdmFsaWRhdGVET01OZXN0aW5nJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIGRlbGV0ZUxpc3RlbmVyID0gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmRlbGV0ZUxpc3RlbmVyO1xudmFyIGxpc3RlblRvID0gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmxpc3RlblRvO1xudmFyIHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzID0gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzO1xuXG4vLyBGb3IgcXVpY2tseSBtYXRjaGluZyBjaGlsZHJlbiB0eXBlLCB0byB0ZXN0IGlmIGNhbiBiZSB0cmVhdGVkIGFzIGNvbnRlbnQuXG52YXIgQ09OVEVOVF9UWVBFUyA9IHsgJ3N0cmluZyc6IHRydWUsICdudW1iZXInOiB0cnVlIH07XG5cbnZhciBDSElMRFJFTiA9IGtleU9mKHsgY2hpbGRyZW46IG51bGwgfSk7XG52YXIgU1RZTEUgPSBrZXlPZih7IHN0eWxlOiBudWxsIH0pO1xudmFyIEhUTUwgPSBrZXlPZih7IF9faHRtbDogbnVsbCB9KTtcblxudmFyIEVMRU1FTlRfTk9ERV9UWVBFID0gMTtcblxuZnVuY3Rpb24gZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKGludGVybmFsSW5zdGFuY2UpIHtcbiAgaWYgKGludGVybmFsSW5zdGFuY2UpIHtcbiAgICB2YXIgb3duZXIgPSBpbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudC5fb3duZXIgfHwgbnVsbDtcbiAgICBpZiAob3duZXIpIHtcbiAgICAgIHZhciBuYW1lID0gb3duZXIuZ2V0TmFtZSgpO1xuICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuICcgVGhpcyBET00gbm9kZSB3YXMgcmVuZGVyZWQgYnkgYCcgKyBuYW1lICsgJ2AuJztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG52YXIgbGVnYWN5UHJvcHNEZXNjcmlwdG9yO1xuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgbGVnYWN5UHJvcHNEZXNjcmlwdG9yID0ge1xuICAgIHByb3BzOiB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY29tcG9uZW50ID0gdGhpcy5fcmVhY3RJbnRlcm5hbENvbXBvbmVudDtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdSZWFjdERPTUNvbXBvbmVudDogRG8gbm90IGFjY2VzcyAucHJvcHMgb2YgYSBET00gbm9kZTsgaW5zdGVhZCwgJyArICdyZWNyZWF0ZSB0aGUgcHJvcHMgYXMgYHJlbmRlcmAgZGlkIG9yaWdpbmFsbHkgb3IgcmVhZCB0aGUgRE9NICcgKyAncHJvcGVydGllcy9hdHRyaWJ1dGVzIGRpcmVjdGx5IGZyb20gdGhpcyBub2RlIChlLmcuLCAnICsgJ3RoaXMucmVmcy5ib3guY2xhc3NOYW1lKS4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgcmV0dXJuIGNvbXBvbmVudC5fY3VycmVudEVsZW1lbnQucHJvcHM7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5mdW5jdGlvbiBsZWdhY3lHZXRET01Ob2RlKCkge1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHZhciBjb21wb25lbnQgPSB0aGlzLl9yZWFjdEludGVybmFsQ29tcG9uZW50O1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3RET01Db21wb25lbnQ6IERvIG5vdCBhY2Nlc3MgLmdldERPTU5vZGUoKSBvZiBhIERPTSBub2RlOyAnICsgJ2luc3RlYWQsIHVzZSB0aGUgbm9kZSBkaXJlY3RseS4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gdGhpcztcbn1cblxuZnVuY3Rpb24gbGVnYWN5SXNNb3VudGVkKCkge1xuICB2YXIgY29tcG9uZW50ID0gdGhpcy5fcmVhY3RJbnRlcm5hbENvbXBvbmVudDtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0RE9NQ29tcG9uZW50OiBEbyBub3QgYWNjZXNzIC5pc01vdW50ZWQoKSBvZiBhIERPTSBub2RlLiVzJywgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKGNvbXBvbmVudCkpIDogdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiAhIWNvbXBvbmVudDtcbn1cblxuZnVuY3Rpb24gbGVnYWN5U2V0U3RhdGVFdGMoKSB7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgdmFyIGNvbXBvbmVudCA9IHRoaXMuX3JlYWN0SW50ZXJuYWxDb21wb25lbnQ7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdSZWFjdERPTUNvbXBvbmVudDogRG8gbm90IGFjY2VzcyAuc2V0U3RhdGUoKSwgLnJlcGxhY2VTdGF0ZSgpLCBvciAnICsgJy5mb3JjZVVwZGF0ZSgpIG9mIGEgRE9NIG5vZGUuIFRoaXMgaXMgYSBuby1vcC4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IHVuZGVmaW5lZDtcbiAgfVxufVxuXG5mdW5jdGlvbiBsZWdhY3lTZXRQcm9wcyhwYXJ0aWFsUHJvcHMsIGNhbGxiYWNrKSB7XG4gIHZhciBjb21wb25lbnQgPSB0aGlzLl9yZWFjdEludGVybmFsQ29tcG9uZW50O1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3RET01Db21wb25lbnQ6IERvIG5vdCBhY2Nlc3MgLnNldFByb3BzKCkgb2YgYSBET00gbm9kZS4gJyArICdJbnN0ZWFkLCBjYWxsIFJlYWN0RE9NLnJlbmRlciBhZ2FpbiBhdCB0aGUgdG9wIGxldmVsLiVzJywgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKGNvbXBvbmVudCkpIDogdW5kZWZpbmVkO1xuICB9XG4gIGlmICghY29tcG9uZW50KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIFJlYWN0VXBkYXRlUXVldWUuZW5xdWV1ZVNldFByb3BzSW50ZXJuYWwoY29tcG9uZW50LCBwYXJ0aWFsUHJvcHMpO1xuICBpZiAoY2FsbGJhY2spIHtcbiAgICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVDYWxsYmFja0ludGVybmFsKGNvbXBvbmVudCwgY2FsbGJhY2spO1xuICB9XG59XG5cbmZ1bmN0aW9uIGxlZ2FjeVJlcGxhY2VQcm9wcyhwYXJ0aWFsUHJvcHMsIGNhbGxiYWNrKSB7XG4gIHZhciBjb21wb25lbnQgPSB0aGlzLl9yZWFjdEludGVybmFsQ29tcG9uZW50O1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3RET01Db21wb25lbnQ6IERvIG5vdCBhY2Nlc3MgLnJlcGxhY2VQcm9wcygpIG9mIGEgRE9NIG5vZGUuICcgKyAnSW5zdGVhZCwgY2FsbCBSZWFjdERPTS5yZW5kZXIgYWdhaW4gYXQgdGhlIHRvcCBsZXZlbC4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShjb21wb25lbnQpKSA6IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoIWNvbXBvbmVudCkge1xuICAgIHJldHVybjtcbiAgfVxuICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVSZXBsYWNlUHJvcHNJbnRlcm5hbChjb21wb25lbnQsIHBhcnRpYWxQcm9wcyk7XG4gIGlmIChjYWxsYmFjaykge1xuICAgIFJlYWN0VXBkYXRlUXVldWUuZW5xdWV1ZUNhbGxiYWNrSW50ZXJuYWwoY29tcG9uZW50LCBjYWxsYmFjayk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZnJpZW5kbHlTdHJpbmdpZnkob2JqKSB7XG4gIGlmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgIGlmIChBcnJheS5pc0FycmF5KG9iaikpIHtcbiAgICAgIHJldHVybiAnWycgKyBvYmoubWFwKGZyaWVuZGx5U3RyaW5naWZ5KS5qb2luKCcsICcpICsgJ10nO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgcGFpcnMgPSBbXTtcbiAgICAgIGZvciAodmFyIGtleSBpbiBvYmopIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSkpIHtcbiAgICAgICAgICB2YXIga2V5RXNjYXBlZCA9IC9eW2EteiRfXVtcXHckX10qJC9pLnRlc3Qoa2V5KSA/IGtleSA6IEpTT04uc3RyaW5naWZ5KGtleSk7XG4gICAgICAgICAgcGFpcnMucHVzaChrZXlFc2NhcGVkICsgJzogJyArIGZyaWVuZGx5U3RyaW5naWZ5KG9ialtrZXldKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiAneycgKyBwYWlycy5qb2luKCcsICcpICsgJ30nO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShvYmopO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gJ1tmdW5jdGlvbiBvYmplY3RdJztcbiAgfVxuICAvLyBEaWZmZXJzIGZyb20gSlNPTi5zdHJpbmdpZnkgaW4gdGhhdCB1bmRlZmluZWQgYmVjYXVzZXMgdW5kZWZpbmVkIGFuZCB0aGF0XG4gIC8vIGluZiBhbmQgbmFuIGRvbid0IGJlY29tZSBudWxsXG4gIHJldHVybiBTdHJpbmcob2JqKTtcbn1cblxudmFyIHN0eWxlTXV0YXRpb25XYXJuaW5nID0ge307XG5cbmZ1bmN0aW9uIGNoZWNrQW5kV2FybkZvck11dGF0ZWRTdHlsZShzdHlsZTEsIHN0eWxlMiwgY29tcG9uZW50KSB7XG4gIGlmIChzdHlsZTEgPT0gbnVsbCB8fCBzdHlsZTIgPT0gbnVsbCkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoc2hhbGxvd0VxdWFsKHN0eWxlMSwgc3R5bGUyKSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBjb21wb25lbnROYW1lID0gY29tcG9uZW50Ll90YWc7XG4gIHZhciBvd25lciA9IGNvbXBvbmVudC5fY3VycmVudEVsZW1lbnQuX293bmVyO1xuICB2YXIgb3duZXJOYW1lO1xuICBpZiAob3duZXIpIHtcbiAgICBvd25lck5hbWUgPSBvd25lci5nZXROYW1lKCk7XG4gIH1cblxuICB2YXIgaGFzaCA9IG93bmVyTmFtZSArICd8JyArIGNvbXBvbmVudE5hbWU7XG5cbiAgaWYgKHN0eWxlTXV0YXRpb25XYXJuaW5nLmhhc093blByb3BlcnR5KGhhc2gpKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgc3R5bGVNdXRhdGlvbldhcm5pbmdbaGFzaF0gPSB0cnVlO1xuXG4gIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnYCVzYCB3YXMgcGFzc2VkIGEgc3R5bGUgb2JqZWN0IHRoYXQgaGFzIHByZXZpb3VzbHkgYmVlbiBtdXRhdGVkLiAnICsgJ011dGF0aW5nIGBzdHlsZWAgaXMgZGVwcmVjYXRlZC4gQ29uc2lkZXIgY2xvbmluZyBpdCBiZWZvcmVoYW5kLiBDaGVjayAnICsgJ3RoZSBgcmVuZGVyYCAlcy4gUHJldmlvdXMgc3R5bGU6ICVzLiBNdXRhdGVkIHN0eWxlOiAlcy4nLCBjb21wb25lbnROYW1lLCBvd25lciA/ICdvZiBgJyArIG93bmVyTmFtZSArICdgJyA6ICd1c2luZyA8JyArIGNvbXBvbmVudE5hbWUgKyAnPicsIGZyaWVuZGx5U3RyaW5naWZ5KHN0eWxlMSksIGZyaWVuZGx5U3RyaW5naWZ5KHN0eWxlMikpIDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBjb21wb25lbnRcbiAqIEBwYXJhbSB7P29iamVjdH0gcHJvcHNcbiAqL1xuZnVuY3Rpb24gYXNzZXJ0VmFsaWRQcm9wcyhjb21wb25lbnQsIHByb3BzKSB7XG4gIGlmICghcHJvcHMpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gTm90ZSB0aGUgdXNlIG9mIGA9PWAgd2hpY2ggY2hlY2tzIGZvciBudWxsIG9yIHVuZGVmaW5lZC5cbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAodm9pZEVsZW1lbnRUYWdzW2NvbXBvbmVudC5fdGFnXSkge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcocHJvcHMuY2hpbGRyZW4gPT0gbnVsbCAmJiBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCA9PSBudWxsLCAnJXMgaXMgYSB2b2lkIGVsZW1lbnQgdGFnIGFuZCBtdXN0IG5vdCBoYXZlIGBjaGlsZHJlbmAgb3IgJyArICd1c2UgYHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYC4lcycsIGNvbXBvbmVudC5fdGFnLCBjb21wb25lbnQuX2N1cnJlbnRFbGVtZW50Ll9vd25lciA/ICcgQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgJyArIGNvbXBvbmVudC5fY3VycmVudEVsZW1lbnQuX293bmVyLmdldE5hbWUoKSArICcuJyA6ICcnKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbiAgaWYgKHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MICE9IG51bGwpIHtcbiAgICAhKHByb3BzLmNoaWxkcmVuID09IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0NhbiBvbmx5IHNldCBvbmUgb2YgYGNoaWxkcmVuYCBvciBgcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUxgLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAhKHR5cGVvZiBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCA9PT0gJ29iamVjdCcgJiYgSFRNTCBpbiBwcm9wcy5kYW5nZXJvdXNseVNldElubmVySFRNTCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnYHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYCBtdXN0IGJlIGluIHRoZSBmb3JtIGB7X19odG1sOiAuLi59YC4gJyArICdQbGVhc2UgdmlzaXQgaHR0cHM6Ly9mYi5tZS9yZWFjdC1pbnZhcmlhbnQtZGFuZ2Vyb3VzbHktc2V0LWlubmVyLWh0bWwgJyArICdmb3IgbW9yZSBpbmZvcm1hdGlvbi4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhwcm9wcy5pbm5lckhUTUwgPT0gbnVsbCwgJ0RpcmVjdGx5IHNldHRpbmcgcHJvcGVydHkgYGlubmVySFRNTGAgaXMgbm90IHBlcm1pdHRlZC4gJyArICdGb3IgbW9yZSBpbmZvcm1hdGlvbiwgbG9va3VwIGRvY3VtZW50YXRpb24gb24gYGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYC4nKSA6IHVuZGVmaW5lZDtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghcHJvcHMuY29udGVudEVkaXRhYmxlIHx8IHByb3BzLmNoaWxkcmVuID09IG51bGwsICdBIGNvbXBvbmVudCBpcyBgY29udGVudEVkaXRhYmxlYCBhbmQgY29udGFpbnMgYGNoaWxkcmVuYCBtYW5hZ2VkIGJ5ICcgKyAnUmVhY3QuIEl0IGlzIG5vdyB5b3VyIHJlc3BvbnNpYmlsaXR5IHRvIGd1YXJhbnRlZSB0aGF0IG5vbmUgb2YgJyArICd0aG9zZSBub2RlcyBhcmUgdW5leHBlY3RlZGx5IG1vZGlmaWVkIG9yIGR1cGxpY2F0ZWQuIFRoaXMgaXMgJyArICdwcm9iYWJseSBub3QgaW50ZW50aW9uYWwuJykgOiB1bmRlZmluZWQ7XG4gIH1cbiAgIShwcm9wcy5zdHlsZSA9PSBudWxsIHx8IHR5cGVvZiBwcm9wcy5zdHlsZSA9PT0gJ29iamVjdCcpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1RoZSBgc3R5bGVgIHByb3AgZXhwZWN0cyBhIG1hcHBpbmcgZnJvbSBzdHlsZSBwcm9wZXJ0aWVzIHRvIHZhbHVlcywgJyArICdub3QgYSBzdHJpbmcuIEZvciBleGFtcGxlLCBzdHlsZT17e21hcmdpblJpZ2h0OiBzcGFjaW5nICsgXFwnZW1cXCd9fSB3aGVuICcgKyAndXNpbmcgSlNYLiVzJywgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKGNvbXBvbmVudCkpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbn1cblxuZnVuY3Rpb24gZW5xdWV1ZVB1dExpc3RlbmVyKGlkLCByZWdpc3RyYXRpb25OYW1lLCBsaXN0ZW5lciwgdHJhbnNhY3Rpb24pIHtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAvLyBJRTggaGFzIG5vIEFQSSBmb3IgZXZlbnQgY2FwdHVyaW5nIGFuZCB0aGUgYG9uU2Nyb2xsYCBldmVudCBkb2Vzbid0XG4gICAgLy8gYnViYmxlLlxuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHJlZ2lzdHJhdGlvbk5hbWUgIT09ICdvblNjcm9sbCcgfHwgaXNFdmVudFN1cHBvcnRlZCgnc2Nyb2xsJywgdHJ1ZSksICdUaGlzIGJyb3dzZXIgZG9lc25cXCd0IHN1cHBvcnQgdGhlIGBvblNjcm9sbGAgZXZlbnQnKSA6IHVuZGVmaW5lZDtcbiAgfVxuICB2YXIgY29udGFpbmVyID0gUmVhY3RNb3VudC5maW5kUmVhY3RDb250YWluZXJGb3JJRChpZCk7XG4gIGlmIChjb250YWluZXIpIHtcbiAgICB2YXIgZG9jID0gY29udGFpbmVyLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREVfVFlQRSA/IGNvbnRhaW5lci5vd25lckRvY3VtZW50IDogY29udGFpbmVyO1xuICAgIGxpc3RlblRvKHJlZ2lzdHJhdGlvbk5hbWUsIGRvYyk7XG4gIH1cbiAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShwdXRMaXN0ZW5lciwge1xuICAgIGlkOiBpZCxcbiAgICByZWdpc3RyYXRpb25OYW1lOiByZWdpc3RyYXRpb25OYW1lLFxuICAgIGxpc3RlbmVyOiBsaXN0ZW5lclxuICB9KTtcbn1cblxuZnVuY3Rpb24gcHV0TGlzdGVuZXIoKSB7XG4gIHZhciBsaXN0ZW5lclRvUHV0ID0gdGhpcztcbiAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnB1dExpc3RlbmVyKGxpc3RlbmVyVG9QdXQuaWQsIGxpc3RlbmVyVG9QdXQucmVnaXN0cmF0aW9uTmFtZSwgbGlzdGVuZXJUb1B1dC5saXN0ZW5lcik7XG59XG5cbi8vIFRoZXJlIGFyZSBzbyBtYW55IG1lZGlhIGV2ZW50cywgaXQgbWFrZXMgc2Vuc2UgdG8ganVzdFxuLy8gbWFpbnRhaW4gYSBsaXN0IHJhdGhlciB0aGFuIGNyZWF0ZSBhIGB0cmFwQnViYmxlZEV2ZW50YCBmb3IgZWFjaFxudmFyIG1lZGlhRXZlbnRzID0ge1xuICB0b3BBYm9ydDogJ2Fib3J0JyxcbiAgdG9wQ2FuUGxheTogJ2NhbnBsYXknLFxuICB0b3BDYW5QbGF5VGhyb3VnaDogJ2NhbnBsYXl0aHJvdWdoJyxcbiAgdG9wRHVyYXRpb25DaGFuZ2U6ICdkdXJhdGlvbmNoYW5nZScsXG4gIHRvcEVtcHRpZWQ6ICdlbXB0aWVkJyxcbiAgdG9wRW5jcnlwdGVkOiAnZW5jcnlwdGVkJyxcbiAgdG9wRW5kZWQ6ICdlbmRlZCcsXG4gIHRvcEVycm9yOiAnZXJyb3InLFxuICB0b3BMb2FkZWREYXRhOiAnbG9hZGVkZGF0YScsXG4gIHRvcExvYWRlZE1ldGFkYXRhOiAnbG9hZGVkbWV0YWRhdGEnLFxuICB0b3BMb2FkU3RhcnQ6ICdsb2Fkc3RhcnQnLFxuICB0b3BQYXVzZTogJ3BhdXNlJyxcbiAgdG9wUGxheTogJ3BsYXknLFxuICB0b3BQbGF5aW5nOiAncGxheWluZycsXG4gIHRvcFByb2dyZXNzOiAncHJvZ3Jlc3MnLFxuICB0b3BSYXRlQ2hhbmdlOiAncmF0ZWNoYW5nZScsXG4gIHRvcFNlZWtlZDogJ3NlZWtlZCcsXG4gIHRvcFNlZWtpbmc6ICdzZWVraW5nJyxcbiAgdG9wU3RhbGxlZDogJ3N0YWxsZWQnLFxuICB0b3BTdXNwZW5kOiAnc3VzcGVuZCcsXG4gIHRvcFRpbWVVcGRhdGU6ICd0aW1ldXBkYXRlJyxcbiAgdG9wVm9sdW1lQ2hhbmdlOiAndm9sdW1lY2hhbmdlJyxcbiAgdG9wV2FpdGluZzogJ3dhaXRpbmcnXG59O1xuXG5mdW5jdGlvbiB0cmFwQnViYmxlZEV2ZW50c0xvY2FsKCkge1xuICB2YXIgaW5zdCA9IHRoaXM7XG4gIC8vIElmIGEgY29tcG9uZW50IHJlbmRlcnMgdG8gbnVsbCBvciBpZiBhbm90aGVyIGNvbXBvbmVudCBmYXRhbHMgYW5kIGNhdXNlc1xuICAvLyB0aGUgc3RhdGUgb2YgdGhlIHRyZWUgdG8gYmUgY29ycnVwdGVkLCBgbm9kZWAgaGVyZSBjYW4gYmUgbnVsbC5cbiAgIWluc3QuX3Jvb3ROb2RlSUQgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnTXVzdCBiZSBtb3VudGVkIHRvIHRyYXAgZXZlbnRzJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB2YXIgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZShpbnN0Ll9yb290Tm9kZUlEKTtcbiAgIW5vZGUgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndHJhcEJ1YmJsZWRFdmVudCguLi4pOiBSZXF1aXJlcyBub2RlIHRvIGJlIHJlbmRlcmVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICBzd2l0Y2ggKGluc3QuX3RhZykge1xuICAgIGNhc2UgJ2lmcmFtZSc6XG4gICAgICBpbnN0Ll93cmFwcGVyU3RhdGUubGlzdGVuZXJzID0gW1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlci50cmFwQnViYmxlZEV2ZW50KEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXMudG9wTG9hZCwgJ2xvYWQnLCBub2RlKV07XG4gICAgICBicmVhaztcbiAgICBjYXNlICd2aWRlbyc6XG4gICAgY2FzZSAnYXVkaW8nOlxuXG4gICAgICBpbnN0Ll93cmFwcGVyU3RhdGUubGlzdGVuZXJzID0gW107XG4gICAgICAvLyBjcmVhdGUgbGlzdGVuZXIgZm9yIGVhY2ggbWVkaWEgZXZlbnRcbiAgICAgIGZvciAodmFyIGV2ZW50IGluIG1lZGlhRXZlbnRzKSB7XG4gICAgICAgIGlmIChtZWRpYUV2ZW50cy5oYXNPd25Qcm9wZXJ0eShldmVudCkpIHtcbiAgICAgICAgICBpbnN0Ll93cmFwcGVyU3RhdGUubGlzdGVuZXJzLnB1c2goUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnRyYXBCdWJibGVkRXZlbnQoRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlc1tldmVudF0sIG1lZGlhRXZlbnRzW2V2ZW50XSwgbm9kZSkpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ2ltZyc6XG4gICAgICBpbnN0Ll93cmFwcGVyU3RhdGUubGlzdGVuZXJzID0gW1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlci50cmFwQnViYmxlZEV2ZW50KEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXMudG9wRXJyb3IsICdlcnJvcicsIG5vZGUpLCBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIudHJhcEJ1YmJsZWRFdmVudChFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzLnRvcExvYWQsICdsb2FkJywgbm9kZSldO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnZm9ybSc6XG4gICAgICBpbnN0Ll93cmFwcGVyU3RhdGUubGlzdGVuZXJzID0gW1JlYWN0QnJvd3NlckV2ZW50RW1pdHRlci50cmFwQnViYmxlZEV2ZW50KEV2ZW50Q29uc3RhbnRzLnRvcExldmVsVHlwZXMudG9wUmVzZXQsICdyZXNldCcsIG5vZGUpLCBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIudHJhcEJ1YmJsZWRFdmVudChFdmVudENvbnN0YW50cy50b3BMZXZlbFR5cGVzLnRvcFN1Ym1pdCwgJ3N1Ym1pdCcsIG5vZGUpXTtcbiAgICAgIGJyZWFrO1xuICB9XG59XG5cbmZ1bmN0aW9uIG1vdW50UmVhZHlJbnB1dFdyYXBwZXIoKSB7XG4gIFJlYWN0RE9NSW5wdXQubW91bnRSZWFkeVdyYXBwZXIodGhpcyk7XG59XG5cbmZ1bmN0aW9uIHBvc3RVcGRhdGVTZWxlY3RXcmFwcGVyKCkge1xuICBSZWFjdERPTVNlbGVjdC5wb3N0VXBkYXRlV3JhcHBlcih0aGlzKTtcbn1cblxuLy8gRm9yIEhUTUwsIGNlcnRhaW4gdGFncyBzaG91bGQgb21pdCB0aGVpciBjbG9zZSB0YWcuIFdlIGtlZXAgYSB3aGl0ZWxpc3QgZm9yXG4vLyB0aG9zZSBzcGVjaWFsIGNhc2VkIHRhZ3MuXG5cbnZhciBvbWl0dGVkQ2xvc2VUYWdzID0ge1xuICAnYXJlYSc6IHRydWUsXG4gICdiYXNlJzogdHJ1ZSxcbiAgJ2JyJzogdHJ1ZSxcbiAgJ2NvbCc6IHRydWUsXG4gICdlbWJlZCc6IHRydWUsXG4gICdocic6IHRydWUsXG4gICdpbWcnOiB0cnVlLFxuICAnaW5wdXQnOiB0cnVlLFxuICAna2V5Z2VuJzogdHJ1ZSxcbiAgJ2xpbmsnOiB0cnVlLFxuICAnbWV0YSc6IHRydWUsXG4gICdwYXJhbSc6IHRydWUsXG4gICdzb3VyY2UnOiB0cnVlLFxuICAndHJhY2snOiB0cnVlLFxuICAnd2JyJzogdHJ1ZVxufTtcblxuLy8gTk9URTogbWVudWl0ZW0ncyBjbG9zZSB0YWcgc2hvdWxkIGJlIG9taXR0ZWQsIGJ1dCB0aGF0IGNhdXNlcyBwcm9ibGVtcy5cbnZhciBuZXdsaW5lRWF0aW5nVGFncyA9IHtcbiAgJ2xpc3RpbmcnOiB0cnVlLFxuICAncHJlJzogdHJ1ZSxcbiAgJ3RleHRhcmVhJzogdHJ1ZVxufTtcblxuLy8gRm9yIEhUTUwsIGNlcnRhaW4gdGFncyBjYW5ub3QgaGF2ZSBjaGlsZHJlbi4gVGhpcyBoYXMgdGhlIHNhbWUgcHVycG9zZSBhc1xuLy8gYG9taXR0ZWRDbG9zZVRhZ3NgIGV4Y2VwdCB0aGF0IGBtZW51aXRlbWAgc2hvdWxkIHN0aWxsIGhhdmUgaXRzIGNsb3NpbmcgdGFnLlxuXG52YXIgdm9pZEVsZW1lbnRUYWdzID0gYXNzaWduKHtcbiAgJ21lbnVpdGVtJzogdHJ1ZVxufSwgb21pdHRlZENsb3NlVGFncyk7XG5cbi8vIFdlIGFjY2VwdCBhbnkgdGFnIHRvIGJlIHJlbmRlcmVkIGJ1dCBzaW5jZSB0aGlzIGdldHMgaW5qZWN0ZWQgaW50byBhcmJpdHJhcnlcbi8vIEhUTUwsIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHRoYXQgaXQncyBhIHNhZmUgdGFnLlxuLy8gaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLXhtbC8jTlQtTmFtZVxuXG52YXIgVkFMSURfVEFHX1JFR0VYID0gL15bYS16QS1aXVthLXpBLVo6X1xcLlxcLVxcZF0qJC87IC8vIFNpbXBsaWZpZWQgc3Vic2V0XG52YXIgdmFsaWRhdGVkVGFnQ2FjaGUgPSB7fTtcbnZhciBoYXNPd25Qcm9wZXJ0eSA9ICh7fSkuaGFzT3duUHJvcGVydHk7XG5cbmZ1bmN0aW9uIHZhbGlkYXRlRGFuZ2Vyb3VzVGFnKHRhZykge1xuICBpZiAoIWhhc093blByb3BlcnR5LmNhbGwodmFsaWRhdGVkVGFnQ2FjaGUsIHRhZykpIHtcbiAgICAhVkFMSURfVEFHX1JFR0VYLnRlc3QodGFnKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdJbnZhbGlkIHRhZzogJXMnLCB0YWcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICB2YWxpZGF0ZWRUYWdDYWNoZVt0YWddID0gdHJ1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBwcm9jZXNzQ2hpbGRDb250ZXh0RGV2KGNvbnRleHQsIGluc3QpIHtcbiAgLy8gUGFzcyBkb3duIG91ciB0YWcgbmFtZSB0byBjaGlsZCBjb21wb25lbnRzIGZvciB2YWxpZGF0aW9uIHB1cnBvc2VzXG4gIGNvbnRleHQgPSBhc3NpZ24oe30sIGNvbnRleHQpO1xuICB2YXIgaW5mbyA9IGNvbnRleHRbdmFsaWRhdGVET01OZXN0aW5nLmFuY2VzdG9ySW5mb0NvbnRleHRLZXldO1xuICBjb250ZXh0W3ZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5XSA9IHZhbGlkYXRlRE9NTmVzdGluZy51cGRhdGVkQW5jZXN0b3JJbmZvKGluZm8sIGluc3QuX3RhZywgaW5zdCk7XG4gIHJldHVybiBjb250ZXh0O1xufVxuXG5mdW5jdGlvbiBpc0N1c3RvbUNvbXBvbmVudCh0YWdOYW1lLCBwcm9wcykge1xuICByZXR1cm4gdGFnTmFtZS5pbmRleE9mKCctJykgPj0gMCB8fCBwcm9wcy5pcyAhPSBudWxsO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgUmVhY3QgY2xhc3MgdGhhdCBpcyBpZGVtcG90ZW50IGFuZCBjYXBhYmxlIG9mIGNvbnRhaW5pbmcgb3RoZXJcbiAqIFJlYWN0IGNvbXBvbmVudHMuIEl0IGFjY2VwdHMgZXZlbnQgbGlzdGVuZXJzIGFuZCBET00gcHJvcGVydGllcyB0aGF0IGFyZVxuICogdmFsaWQgYWNjb3JkaW5nIHRvIGBET01Qcm9wZXJ0eWAuXG4gKlxuICogIC0gRXZlbnQgbGlzdGVuZXJzOiBgb25DbGlja2AsIGBvbk1vdXNlRG93bmAsIGV0Yy5cbiAqICAtIERPTSBwcm9wZXJ0aWVzOiBgY2xhc3NOYW1lYCwgYG5hbWVgLCBgdGl0bGVgLCBldGMuXG4gKlxuICogVGhlIGBzdHlsZWAgcHJvcGVydHkgZnVuY3Rpb25zIGRpZmZlcmVudGx5IGZyb20gdGhlIERPTSBBUEkuIEl0IGFjY2VwdHMgYW5cbiAqIG9iamVjdCBtYXBwaW5nIG9mIHN0eWxlIHByb3BlcnRpZXMgdG8gdmFsdWVzLlxuICpcbiAqIEBjb25zdHJ1Y3RvciBSZWFjdERPTUNvbXBvbmVudFxuICogQGV4dGVuZHMgUmVhY3RNdWx0aUNoaWxkXG4gKi9cbmZ1bmN0aW9uIFJlYWN0RE9NQ29tcG9uZW50KHRhZykge1xuICB2YWxpZGF0ZURhbmdlcm91c1RhZyh0YWcpO1xuICB0aGlzLl90YWcgPSB0YWcudG9Mb3dlckNhc2UoKTtcbiAgdGhpcy5fcmVuZGVyZWRDaGlsZHJlbiA9IG51bGw7XG4gIHRoaXMuX3ByZXZpb3VzU3R5bGUgPSBudWxsO1xuICB0aGlzLl9wcmV2aW91c1N0eWxlQ29weSA9IG51bGw7XG4gIHRoaXMuX3Jvb3ROb2RlSUQgPSBudWxsO1xuICB0aGlzLl93cmFwcGVyU3RhdGUgPSBudWxsO1xuICB0aGlzLl90b3BMZXZlbFdyYXBwZXIgPSBudWxsO1xuICB0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMgPSBudWxsO1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHRoaXMuX3VucHJvY2Vzc2VkQ29udGV4dERldiA9IG51bGw7XG4gICAgdGhpcy5fcHJvY2Vzc2VkQ29udGV4dERldiA9IG51bGw7XG4gIH1cbn1cblxuUmVhY3RET01Db21wb25lbnQuZGlzcGxheU5hbWUgPSAnUmVhY3RET01Db21wb25lbnQnO1xuXG5SZWFjdERPTUNvbXBvbmVudC5NaXhpbiA9IHtcblxuICBjb25zdHJ1Y3Q6IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBlbGVtZW50O1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgcm9vdCB0YWcgbWFya3VwIHRoZW4gcmVjdXJzZXMuIFRoaXMgbWV0aG9kIGhhcyBzaWRlIGVmZmVjdHMgYW5kXG4gICAqIGlzIG5vdCBpZGVtcG90ZW50LlxuICAgKlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJvb3RJRCBUaGUgcm9vdCBET00gSUQgZm9yIHRoaXMgbm9kZS5cbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIGNvbXB1dGVkIG1hcmt1cC5cbiAgICovXG4gIG1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAocm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSByb290SUQ7XG5cbiAgICB2YXIgcHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcblxuICAgIHN3aXRjaCAodGhpcy5fdGFnKSB7XG4gICAgICBjYXNlICdpZnJhbWUnOlxuICAgICAgY2FzZSAnaW1nJzpcbiAgICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgY2FzZSAndmlkZW8nOlxuICAgICAgY2FzZSAnYXVkaW8nOlxuICAgICAgICB0aGlzLl93cmFwcGVyU3RhdGUgPSB7XG4gICAgICAgICAgbGlzdGVuZXJzOiBudWxsXG4gICAgICAgIH07XG4gICAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUodHJhcEJ1YmJsZWRFdmVudHNMb2NhbCwgdGhpcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnYnV0dG9uJzpcbiAgICAgICAgcHJvcHMgPSBSZWFjdERPTUJ1dHRvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaW5wdXQnOlxuICAgICAgICBSZWFjdERPTUlucHV0Lm1vdW50V3JhcHBlcih0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIHByb3BzID0gUmVhY3RET01JbnB1dC5nZXROYXRpdmVQcm9wcyh0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnb3B0aW9uJzpcbiAgICAgICAgUmVhY3RET01PcHRpb24ubW91bnRXcmFwcGVyKHRoaXMsIHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgcHJvcHMgPSBSZWFjdERPTU9wdGlvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnc2VsZWN0JzpcbiAgICAgICAgUmVhY3RET01TZWxlY3QubW91bnRXcmFwcGVyKHRoaXMsIHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgcHJvcHMgPSBSZWFjdERPTVNlbGVjdC5nZXROYXRpdmVQcm9wcyh0aGlzLCBwcm9wcywgY29udGV4dCk7XG4gICAgICAgIGNvbnRleHQgPSBSZWFjdERPTVNlbGVjdC5wcm9jZXNzQ2hpbGRDb250ZXh0KHRoaXMsIHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd0ZXh0YXJlYSc6XG4gICAgICAgIFJlYWN0RE9NVGV4dGFyZWEubW91bnRXcmFwcGVyKHRoaXMsIHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgcHJvcHMgPSBSZWFjdERPTVRleHRhcmVhLmdldE5hdGl2ZVByb3BzKHRoaXMsIHByb3BzLCBjb250ZXh0KTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgYXNzZXJ0VmFsaWRQcm9wcyh0aGlzLCBwcm9wcyk7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGlmIChjb250ZXh0W3ZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5XSkge1xuICAgICAgICB2YWxpZGF0ZURPTU5lc3RpbmcodGhpcy5fdGFnLCB0aGlzLCBjb250ZXh0W3ZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5XSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHRoaXMuX3VucHJvY2Vzc2VkQ29udGV4dERldiA9IGNvbnRleHQ7XG4gICAgICB0aGlzLl9wcm9jZXNzZWRDb250ZXh0RGV2ID0gcHJvY2Vzc0NoaWxkQ29udGV4dERldihjb250ZXh0LCB0aGlzKTtcbiAgICAgIGNvbnRleHQgPSB0aGlzLl9wcm9jZXNzZWRDb250ZXh0RGV2O1xuICAgIH1cblxuICAgIHZhciBtb3VudEltYWdlO1xuICAgIGlmICh0cmFuc2FjdGlvbi51c2VDcmVhdGVFbGVtZW50KSB7XG4gICAgICB2YXIgb3duZXJEb2N1bWVudCA9IGNvbnRleHRbUmVhY3RNb3VudC5vd25lckRvY3VtZW50Q29udGV4dEtleV07XG4gICAgICB2YXIgZWwgPSBvd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGhpcy5fY3VycmVudEVsZW1lbnQudHlwZSk7XG4gICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuc2V0QXR0cmlidXRlRm9ySUQoZWwsIHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgICAgLy8gUG9wdWxhdGUgbm9kZSBjYWNoZVxuICAgICAgUmVhY3RNb3VudC5nZXRJRChlbCk7XG4gICAgICB0aGlzLl91cGRhdGVET01Qcm9wZXJ0aWVzKHt9LCBwcm9wcywgdHJhbnNhY3Rpb24sIGVsKTtcbiAgICAgIHRoaXMuX2NyZWF0ZUluaXRpYWxDaGlsZHJlbih0cmFuc2FjdGlvbiwgcHJvcHMsIGNvbnRleHQsIGVsKTtcbiAgICAgIG1vdW50SW1hZ2UgPSBlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHRhZ09wZW4gPSB0aGlzLl9jcmVhdGVPcGVuVGFnTWFya3VwQW5kUHV0TGlzdGVuZXJzKHRyYW5zYWN0aW9uLCBwcm9wcyk7XG4gICAgICB2YXIgdGFnQ29udGVudCA9IHRoaXMuX2NyZWF0ZUNvbnRlbnRNYXJrdXAodHJhbnNhY3Rpb24sIHByb3BzLCBjb250ZXh0KTtcbiAgICAgIGlmICghdGFnQ29udGVudCAmJiBvbWl0dGVkQ2xvc2VUYWdzW3RoaXMuX3RhZ10pIHtcbiAgICAgICAgbW91bnRJbWFnZSA9IHRhZ09wZW4gKyAnLz4nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbW91bnRJbWFnZSA9IHRhZ09wZW4gKyAnPicgKyB0YWdDb250ZW50ICsgJzwvJyArIHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGUgKyAnPic7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc3dpdGNoICh0aGlzLl90YWcpIHtcbiAgICAgIGNhc2UgJ2lucHV0JzpcbiAgICAgICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShtb3VudFJlYWR5SW5wdXRXcmFwcGVyLCB0aGlzKTtcbiAgICAgIC8vIGZhbGxzIHRocm91Z2hcbiAgICAgIGNhc2UgJ2J1dHRvbic6XG4gICAgICBjYXNlICdzZWxlY3QnOlxuICAgICAgY2FzZSAndGV4dGFyZWEnOlxuICAgICAgICBpZiAocHJvcHMuYXV0b0ZvY3VzKSB7XG4gICAgICAgICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShBdXRvRm9jdXNVdGlscy5mb2N1c0RPTUNvbXBvbmVudCwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1vdW50SW1hZ2U7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgbWFya3VwIGZvciB0aGUgb3BlbiB0YWcgYW5kIGFsbCBhdHRyaWJ1dGVzLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBoYXMgc2lkZSBlZmZlY3RzIGJlY2F1c2UgZXZlbnRzIGdldCByZWdpc3RlcmVkLlxuICAgKlxuICAgKiBJdGVyYXRpbmcgb3ZlciBvYmplY3QgcHJvcGVydGllcyBpcyBmYXN0ZXIgdGhhbiBpdGVyYXRpbmcgb3ZlciBhcnJheXMuXG4gICAqIEBzZWUgaHR0cDovL2pzcGVyZi5jb20vb2JqLXZzLWFyci1pdGVyYXRpb25cbiAgICpcbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wc1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9IE1hcmt1cCBvZiBvcGVuaW5nIHRhZy5cbiAgICovXG4gIF9jcmVhdGVPcGVuVGFnTWFya3VwQW5kUHV0TGlzdGVuZXJzOiBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHByb3BzKSB7XG4gICAgdmFyIHJldCA9ICc8JyArIHRoaXMuX2N1cnJlbnRFbGVtZW50LnR5cGU7XG5cbiAgICBmb3IgKHZhciBwcm9wS2V5IGluIHByb3BzKSB7XG4gICAgICBpZiAoIXByb3BzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BLZXldO1xuICAgICAgaWYgKHByb3BWYWx1ZSA9PSBudWxsKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7XG4gICAgICAgIGlmIChwcm9wVmFsdWUpIHtcbiAgICAgICAgICBlbnF1ZXVlUHV0TGlzdGVuZXIodGhpcy5fcm9vdE5vZGVJRCwgcHJvcEtleSwgcHJvcFZhbHVlLCB0cmFuc2FjdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChwcm9wS2V5ID09PSBTVFlMRSkge1xuICAgICAgICAgIGlmIChwcm9wVmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgICAgIC8vIFNlZSBgX3VwZGF0ZURPTVByb3BlcnRpZXNgLiBzdHlsZSBibG9ja1xuICAgICAgICAgICAgICB0aGlzLl9wcmV2aW91c1N0eWxlID0gcHJvcFZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJvcFZhbHVlID0gdGhpcy5fcHJldmlvdXNTdHlsZUNvcHkgPSBhc3NpZ24oe30sIHByb3BzLnN0eWxlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcHJvcFZhbHVlID0gQ1NTUHJvcGVydHlPcGVyYXRpb25zLmNyZWF0ZU1hcmt1cEZvclN0eWxlcyhwcm9wVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBtYXJrdXAgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5fdGFnICE9IG51bGwgJiYgaXNDdXN0b21Db21wb25lbnQodGhpcy5fdGFnLCBwcm9wcykpIHtcbiAgICAgICAgICBpZiAocHJvcEtleSAhPT0gQ0hJTERSRU4pIHtcbiAgICAgICAgICAgIG1hcmt1cCA9IERPTVByb3BlcnR5T3BlcmF0aW9ucy5jcmVhdGVNYXJrdXBGb3JDdXN0b21BdHRyaWJ1dGUocHJvcEtleSwgcHJvcFZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbWFya3VwID0gRE9NUHJvcGVydHlPcGVyYXRpb25zLmNyZWF0ZU1hcmt1cEZvclByb3BlcnR5KHByb3BLZXksIHByb3BWYWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1hcmt1cCkge1xuICAgICAgICAgIHJldCArPSAnICcgKyBtYXJrdXA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGb3Igc3RhdGljIHBhZ2VzLCBubyBuZWVkIHRvIHB1dCBSZWFjdCBJRCBhbmQgY2hlY2tzdW0uIFNhdmVzIGxvdHMgb2ZcbiAgICAvLyBieXRlcy5cbiAgICBpZiAodHJhbnNhY3Rpb24ucmVuZGVyVG9TdGF0aWNNYXJrdXApIHtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgdmFyIG1hcmt1cEZvcklEID0gRE9NUHJvcGVydHlPcGVyYXRpb25zLmNyZWF0ZU1hcmt1cEZvcklEKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgIHJldHVybiByZXQgKyAnICcgKyBtYXJrdXBGb3JJRDtcbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlcyBtYXJrdXAgZm9yIHRoZSBjb250ZW50IGJldHdlZW4gdGhlIHRhZ3MuXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcHNcbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRleHRcbiAgICogQHJldHVybiB7c3RyaW5nfSBDb250ZW50IG1hcmt1cC5cbiAgICovXG4gIF9jcmVhdGVDb250ZW50TWFya3VwOiBmdW5jdGlvbiAodHJhbnNhY3Rpb24sIHByb3BzLCBjb250ZXh0KSB7XG4gICAgdmFyIHJldCA9ICcnO1xuXG4gICAgLy8gSW50ZW50aW9uYWwgdXNlIG9mICE9IHRvIGF2b2lkIGNhdGNoaW5nIHplcm8vZmFsc2UuXG4gICAgdmFyIGlubmVySFRNTCA9IHByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MO1xuICAgIGlmIChpbm5lckhUTUwgIT0gbnVsbCkge1xuICAgICAgaWYgKGlubmVySFRNTC5fX2h0bWwgIT0gbnVsbCkge1xuICAgICAgICByZXQgPSBpbm5lckhUTUwuX19odG1sO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgY29udGVudFRvVXNlID0gQ09OVEVOVF9UWVBFU1t0eXBlb2YgcHJvcHMuY2hpbGRyZW5dID8gcHJvcHMuY2hpbGRyZW4gOiBudWxsO1xuICAgICAgdmFyIGNoaWxkcmVuVG9Vc2UgPSBjb250ZW50VG9Vc2UgIT0gbnVsbCA/IG51bGwgOiBwcm9wcy5jaGlsZHJlbjtcbiAgICAgIGlmIChjb250ZW50VG9Vc2UgIT0gbnVsbCkge1xuICAgICAgICAvLyBUT0RPOiBWYWxpZGF0ZSB0aGF0IHRleHQgaXMgYWxsb3dlZCBhcyBhIGNoaWxkIG9mIHRoaXMgbm9kZVxuICAgICAgICByZXQgPSBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIoY29udGVudFRvVXNlKTtcbiAgICAgIH0gZWxzZSBpZiAoY2hpbGRyZW5Ub1VzZSAhPSBudWxsKSB7XG4gICAgICAgIHZhciBtb3VudEltYWdlcyA9IHRoaXMubW91bnRDaGlsZHJlbihjaGlsZHJlblRvVXNlLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICAgIHJldCA9IG1vdW50SW1hZ2VzLmpvaW4oJycpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAobmV3bGluZUVhdGluZ1RhZ3NbdGhpcy5fdGFnXSAmJiByZXQuY2hhckF0KDApID09PSAnXFxuJykge1xuICAgICAgLy8gdGV4dC9odG1sIGlnbm9yZXMgdGhlIGZpcnN0IGNoYXJhY3RlciBpbiB0aGVzZSB0YWdzIGlmIGl0J3MgYSBuZXdsaW5lXG4gICAgICAvLyBQcmVmZXIgdG8gYnJlYWsgYXBwbGljYXRpb24veG1sIG92ZXIgdGV4dC9odG1sIChmb3Igbm93KSBieSBhZGRpbmdcbiAgICAgIC8vIGEgbmV3bGluZSBzcGVjaWZpY2FsbHkgdG8gZ2V0IGVhdGVuIGJ5IHRoZSBwYXJzZXIuIChBbHRlcm5hdGVseSBmb3JcbiAgICAgIC8vIHRleHRhcmVhcywgcmVwbGFjaW5nIFwiXlxcblwiIHdpdGggXCJcXHJcXG5cIiBkb2Vzbid0IGdldCBlYXRlbiwgYW5kIHRoZSBmaXJzdFxuICAgICAgLy8gXFxyIGlzIG5vcm1hbGl6ZWQgb3V0IGJ5IEhUTUxUZXh0QXJlYUVsZW1lbnQjdmFsdWUuKVxuICAgICAgLy8gU2VlOiA8aHR0cDovL3d3dy53My5vcmcvVFIvaHRtbC1wb2x5Z2xvdC8jbmV3bGluZXMtaW4tdGV4dGFyZWEtYW5kLXByZT5cbiAgICAgIC8vIFNlZTogPGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw1L3N5bnRheC5odG1sI2VsZW1lbnQtcmVzdHJpY3Rpb25zPlxuICAgICAgLy8gU2VlOiA8aHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvc3ludGF4Lmh0bWwjbmV3bGluZXM+XG4gICAgICAvLyBTZWU6IFBhcnNpbmcgb2YgXCJ0ZXh0YXJlYVwiIFwibGlzdGluZ1wiIGFuZCBcInByZVwiIGVsZW1lbnRzXG4gICAgICAvLyAgZnJvbSA8aHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDUvc3ludGF4Lmh0bWwjcGFyc2luZy1tYWluLWluYm9keT5cbiAgICAgIHJldHVybiAnXFxuJyArIHJldDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG4gIH0sXG5cbiAgX2NyZWF0ZUluaXRpYWxDaGlsZHJlbjogZnVuY3Rpb24gKHRyYW5zYWN0aW9uLCBwcm9wcywgY29udGV4dCwgZWwpIHtcbiAgICAvLyBJbnRlbnRpb25hbCB1c2Ugb2YgIT0gdG8gYXZvaWQgY2F0Y2hpbmcgemVyby9mYWxzZS5cbiAgICB2YXIgaW5uZXJIVE1MID0gcHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw7XG4gICAgaWYgKGlubmVySFRNTCAhPSBudWxsKSB7XG4gICAgICBpZiAoaW5uZXJIVE1MLl9faHRtbCAhPSBudWxsKSB7XG4gICAgICAgIHNldElubmVySFRNTChlbCwgaW5uZXJIVE1MLl9faHRtbCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBjb250ZW50VG9Vc2UgPSBDT05URU5UX1RZUEVTW3R5cGVvZiBwcm9wcy5jaGlsZHJlbl0gPyBwcm9wcy5jaGlsZHJlbiA6IG51bGw7XG4gICAgICB2YXIgY2hpbGRyZW5Ub1VzZSA9IGNvbnRlbnRUb1VzZSAhPSBudWxsID8gbnVsbCA6IHByb3BzLmNoaWxkcmVuO1xuICAgICAgaWYgKGNvbnRlbnRUb1VzZSAhPSBudWxsKSB7XG4gICAgICAgIC8vIFRPRE86IFZhbGlkYXRlIHRoYXQgdGV4dCBpcyBhbGxvd2VkIGFzIGEgY2hpbGQgb2YgdGhpcyBub2RlXG4gICAgICAgIHNldFRleHRDb250ZW50KGVsLCBjb250ZW50VG9Vc2UpO1xuICAgICAgfSBlbHNlIGlmIChjaGlsZHJlblRvVXNlICE9IG51bGwpIHtcbiAgICAgICAgdmFyIG1vdW50SW1hZ2VzID0gdGhpcy5tb3VudENoaWxkcmVuKGNoaWxkcmVuVG9Vc2UsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtb3VudEltYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGVsLmFwcGVuZENoaWxkKG1vdW50SW1hZ2VzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVjZWl2ZXMgYSBuZXh0IGVsZW1lbnQgYW5kIHVwZGF0ZXMgdGhlIGNvbXBvbmVudC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudFxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb258UmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbnRleHRcbiAgICovXG4gIHJlY2VpdmVDb21wb25lbnQ6IGZ1bmN0aW9uIChuZXh0RWxlbWVudCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICB2YXIgcHJldkVsZW1lbnQgPSB0aGlzLl9jdXJyZW50RWxlbWVudDtcbiAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IG5leHRFbGVtZW50O1xuICAgIHRoaXMudXBkYXRlQ29tcG9uZW50KHRyYW5zYWN0aW9uLCBwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQsIGNvbnRleHQpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVcGRhdGVzIGEgbmF0aXZlIERPTSBjb21wb25lbnQgYWZ0ZXIgaXQgaGFzIGFscmVhZHkgYmVlbiBhbGxvY2F0ZWQgYW5kXG4gICAqIGF0dGFjaGVkIHRvIHRoZSBET00uIFJlY29uY2lsZXMgdGhlIHJvb3QgRE9NIG5vZGUsIHRoZW4gcmVjdXJzZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IHByZXZFbGVtZW50XG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudFxuICAgKiBAaW50ZXJuYWxcbiAgICogQG92ZXJyaWRhYmxlXG4gICAqL1xuICB1cGRhdGVDb21wb25lbnQ6IGZ1bmN0aW9uICh0cmFuc2FjdGlvbiwgcHJldkVsZW1lbnQsIG5leHRFbGVtZW50LCBjb250ZXh0KSB7XG4gICAgdmFyIGxhc3RQcm9wcyA9IHByZXZFbGVtZW50LnByb3BzO1xuICAgIHZhciBuZXh0UHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcblxuICAgIHN3aXRjaCAodGhpcy5fdGFnKSB7XG4gICAgICBjYXNlICdidXR0b24nOlxuICAgICAgICBsYXN0UHJvcHMgPSBSZWFjdERPTUJ1dHRvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBsYXN0UHJvcHMpO1xuICAgICAgICBuZXh0UHJvcHMgPSBSZWFjdERPTUJ1dHRvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBuZXh0UHJvcHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2lucHV0JzpcbiAgICAgICAgUmVhY3RET01JbnB1dC51cGRhdGVXcmFwcGVyKHRoaXMpO1xuICAgICAgICBsYXN0UHJvcHMgPSBSZWFjdERPTUlucHV0LmdldE5hdGl2ZVByb3BzKHRoaXMsIGxhc3RQcm9wcyk7XG4gICAgICAgIG5leHRQcm9wcyA9IFJlYWN0RE9NSW5wdXQuZ2V0TmF0aXZlUHJvcHModGhpcywgbmV4dFByb3BzKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdvcHRpb24nOlxuICAgICAgICBsYXN0UHJvcHMgPSBSZWFjdERPTU9wdGlvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBsYXN0UHJvcHMpO1xuICAgICAgICBuZXh0UHJvcHMgPSBSZWFjdERPTU9wdGlvbi5nZXROYXRpdmVQcm9wcyh0aGlzLCBuZXh0UHJvcHMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NlbGVjdCc6XG4gICAgICAgIGxhc3RQcm9wcyA9IFJlYWN0RE9NU2VsZWN0LmdldE5hdGl2ZVByb3BzKHRoaXMsIGxhc3RQcm9wcyk7XG4gICAgICAgIG5leHRQcm9wcyA9IFJlYWN0RE9NU2VsZWN0LmdldE5hdGl2ZVByb3BzKHRoaXMsIG5leHRQcm9wcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndGV4dGFyZWEnOlxuICAgICAgICBSZWFjdERPTVRleHRhcmVhLnVwZGF0ZVdyYXBwZXIodGhpcyk7XG4gICAgICAgIGxhc3RQcm9wcyA9IFJlYWN0RE9NVGV4dGFyZWEuZ2V0TmF0aXZlUHJvcHModGhpcywgbGFzdFByb3BzKTtcbiAgICAgICAgbmV4dFByb3BzID0gUmVhY3RET01UZXh0YXJlYS5nZXROYXRpdmVQcm9wcyh0aGlzLCBuZXh0UHJvcHMpO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gSWYgdGhlIGNvbnRleHQgaXMgcmVmZXJlbmNlLWVxdWFsIHRvIHRoZSBvbGQgb25lLCBwYXNzIGRvd24gdGhlIHNhbWVcbiAgICAgIC8vIHByb2Nlc3NlZCBvYmplY3Qgc28gdGhlIHVwZGF0ZSBiYWlsb3V0IGluIFJlYWN0UmVjb25jaWxlciBiZWhhdmVzXG4gICAgICAvLyBjb3JyZWN0bHkgKGFuZCBpZGVudGljYWxseSBpbiBkZXYgYW5kIHByb2QpLiBTZWUgIzUwMDUuXG4gICAgICBpZiAodGhpcy5fdW5wcm9jZXNzZWRDb250ZXh0RGV2ICE9PSBjb250ZXh0KSB7XG4gICAgICAgIHRoaXMuX3VucHJvY2Vzc2VkQ29udGV4dERldiA9IGNvbnRleHQ7XG4gICAgICAgIHRoaXMuX3Byb2Nlc3NlZENvbnRleHREZXYgPSBwcm9jZXNzQ2hpbGRDb250ZXh0RGV2KGNvbnRleHQsIHRoaXMpO1xuICAgICAgfVxuICAgICAgY29udGV4dCA9IHRoaXMuX3Byb2Nlc3NlZENvbnRleHREZXY7XG4gICAgfVxuXG4gICAgYXNzZXJ0VmFsaWRQcm9wcyh0aGlzLCBuZXh0UHJvcHMpO1xuICAgIHRoaXMuX3VwZGF0ZURPTVByb3BlcnRpZXMobGFzdFByb3BzLCBuZXh0UHJvcHMsIHRyYW5zYWN0aW9uLCBudWxsKTtcbiAgICB0aGlzLl91cGRhdGVET01DaGlsZHJlbihsYXN0UHJvcHMsIG5leHRQcm9wcywgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuXG4gICAgaWYgKCFjYW5EZWZpbmVQcm9wZXJ0eSAmJiB0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMpIHtcbiAgICAgIHRoaXMuX25vZGVXaXRoTGVnYWN5UHJvcGVydGllcy5wcm9wcyA9IG5leHRQcm9wcztcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fdGFnID09PSAnc2VsZWN0Jykge1xuICAgICAgLy8gPHNlbGVjdD4gdmFsdWUgdXBkYXRlIG5lZWRzIHRvIG9jY3VyIGFmdGVyIDxvcHRpb24+IGNoaWxkcmVuXG4gICAgICAvLyByZWNvbmNpbGlhdGlvblxuICAgICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShwb3N0VXBkYXRlU2VsZWN0V3JhcHBlciwgdGhpcyk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZWNvbmNpbGVzIHRoZSBwcm9wZXJ0aWVzIGJ5IGRldGVjdGluZyBkaWZmZXJlbmNlcyBpbiBwcm9wZXJ0eSB2YWx1ZXMgYW5kXG4gICAqIHVwZGF0aW5nIHRoZSBET00gYXMgbmVjZXNzYXJ5LiBUaGlzIGZ1bmN0aW9uIGlzIHByb2JhYmx5IHRoZSBzaW5nbGUgbW9zdFxuICAgKiBjcml0aWNhbCBwYXRoIGZvciBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24uXG4gICAqXG4gICAqIFRPRE86IEJlbmNobWFyayB3aGV0aGVyIGNoZWNraW5nIGZvciBjaGFuZ2VkIHZhbHVlcyBpbiBtZW1vcnkgYWN0dWFsbHlcbiAgICogICAgICAgaW1wcm92ZXMgcGVyZm9ybWFuY2UgKGVzcGVjaWFsbHkgc3RhdGljYWxseSBwb3NpdGlvbmVkIGVsZW1lbnRzKS5cbiAgICogVE9ETzogQmVuY2htYXJrIHRoZSBlZmZlY3RzIG9mIHB1dHRpbmcgdGhpcyBhdCB0aGUgdG9wIHNpbmNlIDk5JSBvZiBwcm9wc1xuICAgKiAgICAgICBkbyBub3QgY2hhbmdlIGZvciBhIGdpdmVuIHJlY29uY2lsaWF0aW9uLlxuICAgKiBUT0RPOiBCZW5jaG1hcmsgYXJlYXMgdGhhdCBjYW4gYmUgaW1wcm92ZWQgd2l0aCBjYWNoaW5nLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAcGFyYW0ge29iamVjdH0gbGFzdFByb3BzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHNcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0gez9ET01FbGVtZW50fSBub2RlXG4gICAqL1xuICBfdXBkYXRlRE9NUHJvcGVydGllczogZnVuY3Rpb24gKGxhc3RQcm9wcywgbmV4dFByb3BzLCB0cmFuc2FjdGlvbiwgbm9kZSkge1xuICAgIHZhciBwcm9wS2V5O1xuICAgIHZhciBzdHlsZU5hbWU7XG4gICAgdmFyIHN0eWxlVXBkYXRlcztcbiAgICBmb3IgKHByb3BLZXkgaW4gbGFzdFByb3BzKSB7XG4gICAgICBpZiAobmV4dFByb3BzLmhhc093blByb3BlcnR5KHByb3BLZXkpIHx8ICFsYXN0UHJvcHMuaGFzT3duUHJvcGVydHkocHJvcEtleSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAocHJvcEtleSA9PT0gU1RZTEUpIHtcbiAgICAgICAgdmFyIGxhc3RTdHlsZSA9IHRoaXMuX3ByZXZpb3VzU3R5bGVDb3B5O1xuICAgICAgICBmb3IgKHN0eWxlTmFtZSBpbiBsYXN0U3R5bGUpIHtcbiAgICAgICAgICBpZiAobGFzdFN0eWxlLmhhc093blByb3BlcnR5KHN0eWxlTmFtZSkpIHtcbiAgICAgICAgICAgIHN0eWxlVXBkYXRlcyA9IHN0eWxlVXBkYXRlcyB8fCB7fTtcbiAgICAgICAgICAgIHN0eWxlVXBkYXRlc1tzdHlsZU5hbWVdID0gJyc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3ByZXZpb3VzU3R5bGVDb3B5ID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAocmVnaXN0cmF0aW9uTmFtZU1vZHVsZXMuaGFzT3duUHJvcGVydHkocHJvcEtleSkpIHtcbiAgICAgICAgaWYgKGxhc3RQcm9wc1twcm9wS2V5XSkge1xuICAgICAgICAgIC8vIE9ubHkgY2FsbCBkZWxldGVMaXN0ZW5lciBpZiB0aGVyZSB3YXMgYSBsaXN0ZW5lciBwcmV2aW91c2x5IG9yXG4gICAgICAgICAgLy8gZWxzZSB3aWxsRGVsZXRlTGlzdGVuZXIgZ2V0cyBjYWxsZWQgd2hlbiB0aGVyZSB3YXNuJ3QgYWN0dWFsbHkgYVxuICAgICAgICAgIC8vIGxpc3RlbmVyIChlLmcuLCBvbkNsaWNrPXtudWxsfSlcbiAgICAgICAgICBkZWxldGVMaXN0ZW5lcih0aGlzLl9yb290Tm9kZUlELCBwcm9wS2V5KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChET01Qcm9wZXJ0eS5wcm9wZXJ0aWVzW3Byb3BLZXldIHx8IERPTVByb3BlcnR5LmlzQ3VzdG9tQXR0cmlidXRlKHByb3BLZXkpKSB7XG4gICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgICAgIH1cbiAgICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLmRlbGV0ZVZhbHVlRm9yUHJvcGVydHkobm9kZSwgcHJvcEtleSk7XG4gICAgICB9XG4gICAgfVxuICAgIGZvciAocHJvcEtleSBpbiBuZXh0UHJvcHMpIHtcbiAgICAgIHZhciBuZXh0UHJvcCA9IG5leHRQcm9wc1twcm9wS2V5XTtcbiAgICAgIHZhciBsYXN0UHJvcCA9IHByb3BLZXkgPT09IFNUWUxFID8gdGhpcy5fcHJldmlvdXNTdHlsZUNvcHkgOiBsYXN0UHJvcHNbcHJvcEtleV07XG4gICAgICBpZiAoIW5leHRQcm9wcy5oYXNPd25Qcm9wZXJ0eShwcm9wS2V5KSB8fCBuZXh0UHJvcCA9PT0gbGFzdFByb3ApIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAocHJvcEtleSA9PT0gU1RZTEUpIHtcbiAgICAgICAgaWYgKG5leHRQcm9wKSB7XG4gICAgICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAgIGNoZWNrQW5kV2FybkZvck11dGF0ZWRTdHlsZSh0aGlzLl9wcmV2aW91c1N0eWxlQ29weSwgdGhpcy5fcHJldmlvdXNTdHlsZSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLl9wcmV2aW91c1N0eWxlID0gbmV4dFByb3A7XG4gICAgICAgICAgfVxuICAgICAgICAgIG5leHRQcm9wID0gdGhpcy5fcHJldmlvdXNTdHlsZUNvcHkgPSBhc3NpZ24oe30sIG5leHRQcm9wKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9wcmV2aW91c1N0eWxlQ29weSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxhc3RQcm9wKSB7XG4gICAgICAgICAgLy8gVW5zZXQgc3R5bGVzIG9uIGBsYXN0UHJvcGAgYnV0IG5vdCBvbiBgbmV4dFByb3BgLlxuICAgICAgICAgIGZvciAoc3R5bGVOYW1lIGluIGxhc3RQcm9wKSB7XG4gICAgICAgICAgICBpZiAobGFzdFByb3AuaGFzT3duUHJvcGVydHkoc3R5bGVOYW1lKSAmJiAoIW5leHRQcm9wIHx8ICFuZXh0UHJvcC5oYXNPd25Qcm9wZXJ0eShzdHlsZU5hbWUpKSkge1xuICAgICAgICAgICAgICBzdHlsZVVwZGF0ZXMgPSBzdHlsZVVwZGF0ZXMgfHwge307XG4gICAgICAgICAgICAgIHN0eWxlVXBkYXRlc1tzdHlsZU5hbWVdID0gJyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFVwZGF0ZSBzdHlsZXMgdGhhdCBjaGFuZ2VkIHNpbmNlIGBsYXN0UHJvcGAuXG4gICAgICAgICAgZm9yIChzdHlsZU5hbWUgaW4gbmV4dFByb3ApIHtcbiAgICAgICAgICAgIGlmIChuZXh0UHJvcC5oYXNPd25Qcm9wZXJ0eShzdHlsZU5hbWUpICYmIGxhc3RQcm9wW3N0eWxlTmFtZV0gIT09IG5leHRQcm9wW3N0eWxlTmFtZV0pIHtcbiAgICAgICAgICAgICAgc3R5bGVVcGRhdGVzID0gc3R5bGVVcGRhdGVzIHx8IHt9O1xuICAgICAgICAgICAgICBzdHlsZVVwZGF0ZXNbc3R5bGVOYW1lXSA9IG5leHRQcm9wW3N0eWxlTmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFJlbGllcyBvbiBgdXBkYXRlU3R5bGVzQnlJRGAgbm90IG11dGF0aW5nIGBzdHlsZVVwZGF0ZXNgLlxuICAgICAgICAgIHN0eWxlVXBkYXRlcyA9IG5leHRQcm9wO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHJlZ2lzdHJhdGlvbk5hbWVNb2R1bGVzLmhhc093blByb3BlcnR5KHByb3BLZXkpKSB7XG4gICAgICAgIGlmIChuZXh0UHJvcCkge1xuICAgICAgICAgIGVucXVldWVQdXRMaXN0ZW5lcih0aGlzLl9yb290Tm9kZUlELCBwcm9wS2V5LCBuZXh0UHJvcCwgdHJhbnNhY3Rpb24pO1xuICAgICAgICB9IGVsc2UgaWYgKGxhc3RQcm9wKSB7XG4gICAgICAgICAgZGVsZXRlTGlzdGVuZXIodGhpcy5fcm9vdE5vZGVJRCwgcHJvcEtleSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaXNDdXN0b21Db21wb25lbnQodGhpcy5fdGFnLCBuZXh0UHJvcHMpKSB7XG4gICAgICAgIGlmICghbm9kZSkge1xuICAgICAgICAgIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BLZXkgPT09IENISUxEUkVOKSB7XG4gICAgICAgICAgbmV4dFByb3AgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIERPTVByb3BlcnR5T3BlcmF0aW9ucy5zZXRWYWx1ZUZvckF0dHJpYnV0ZShub2RlLCBwcm9wS2V5LCBuZXh0UHJvcCk7XG4gICAgICB9IGVsc2UgaWYgKERPTVByb3BlcnR5LnByb3BlcnRpZXNbcHJvcEtleV0gfHwgRE9NUHJvcGVydHkuaXNDdXN0b21BdHRyaWJ1dGUocHJvcEtleSkpIHtcbiAgICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgICAgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZSh0aGlzLl9yb290Tm9kZUlEKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJZiB3ZSdyZSB1cGRhdGluZyB0byBudWxsIG9yIHVuZGVmaW5lZCwgd2Ugc2hvdWxkIHJlbW92ZSB0aGUgcHJvcGVydHlcbiAgICAgICAgLy8gZnJvbSB0aGUgRE9NIG5vZGUgaW5zdGVhZCBvZiBpbmFkdmVydGFudGx5IHNldHRpbmcgdG8gYSBzdHJpbmcuIFRoaXNcbiAgICAgICAgLy8gYnJpbmdzIHVzIGluIGxpbmUgd2l0aCB0aGUgc2FtZSBiZWhhdmlvciB3ZSBoYXZlIG9uIGluaXRpYWwgcmVuZGVyLlxuICAgICAgICBpZiAobmV4dFByb3AgIT0gbnVsbCkge1xuICAgICAgICAgIERPTVByb3BlcnR5T3BlcmF0aW9ucy5zZXRWYWx1ZUZvclByb3BlcnR5KG5vZGUsIHByb3BLZXksIG5leHRQcm9wKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuZGVsZXRlVmFsdWVGb3JQcm9wZXJ0eShub2RlLCBwcm9wS2V5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBpZiAoc3R5bGVVcGRhdGVzKSB7XG4gICAgICBpZiAoIW5vZGUpIHtcbiAgICAgICAgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZSh0aGlzLl9yb290Tm9kZUlEKTtcbiAgICAgIH1cbiAgICAgIENTU1Byb3BlcnR5T3BlcmF0aW9ucy5zZXRWYWx1ZUZvclN0eWxlcyhub2RlLCBzdHlsZVVwZGF0ZXMpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVjb25jaWxlcyB0aGUgY2hpbGRyZW4gd2l0aCB0aGUgdmFyaW91cyBwcm9wZXJ0aWVzIHRoYXQgYWZmZWN0IHRoZVxuICAgKiBjaGlsZHJlbiBjb250ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge29iamVjdH0gbGFzdFByb3BzXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuZXh0UHJvcHNcbiAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcGFyYW0ge29iamVjdH0gY29udGV4dFxuICAgKi9cbiAgX3VwZGF0ZURPTUNoaWxkcmVuOiBmdW5jdGlvbiAobGFzdFByb3BzLCBuZXh0UHJvcHMsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgdmFyIGxhc3RDb250ZW50ID0gQ09OVEVOVF9UWVBFU1t0eXBlb2YgbGFzdFByb3BzLmNoaWxkcmVuXSA/IGxhc3RQcm9wcy5jaGlsZHJlbiA6IG51bGw7XG4gICAgdmFyIG5leHRDb250ZW50ID0gQ09OVEVOVF9UWVBFU1t0eXBlb2YgbmV4dFByb3BzLmNoaWxkcmVuXSA/IG5leHRQcm9wcy5jaGlsZHJlbiA6IG51bGw7XG5cbiAgICB2YXIgbGFzdEh0bWwgPSBsYXN0UHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgJiYgbGFzdFByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MLl9faHRtbDtcbiAgICB2YXIgbmV4dEh0bWwgPSBuZXh0UHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgJiYgbmV4dFByb3BzLmRhbmdlcm91c2x5U2V0SW5uZXJIVE1MLl9faHRtbDtcblxuICAgIC8vIE5vdGUgdGhlIHVzZSBvZiBgIT1gIHdoaWNoIGNoZWNrcyBmb3IgbnVsbCBvciB1bmRlZmluZWQuXG4gICAgdmFyIGxhc3RDaGlsZHJlbiA9IGxhc3RDb250ZW50ICE9IG51bGwgPyBudWxsIDogbGFzdFByb3BzLmNoaWxkcmVuO1xuICAgIHZhciBuZXh0Q2hpbGRyZW4gPSBuZXh0Q29udGVudCAhPSBudWxsID8gbnVsbCA6IG5leHRQcm9wcy5jaGlsZHJlbjtcblxuICAgIC8vIElmIHdlJ3JlIHN3aXRjaGluZyBmcm9tIGNoaWxkcmVuIHRvIGNvbnRlbnQvaHRtbCBvciB2aWNlIHZlcnNhLCByZW1vdmVcbiAgICAvLyB0aGUgb2xkIGNvbnRlbnRcbiAgICB2YXIgbGFzdEhhc0NvbnRlbnRPckh0bWwgPSBsYXN0Q29udGVudCAhPSBudWxsIHx8IGxhc3RIdG1sICE9IG51bGw7XG4gICAgdmFyIG5leHRIYXNDb250ZW50T3JIdG1sID0gbmV4dENvbnRlbnQgIT0gbnVsbCB8fCBuZXh0SHRtbCAhPSBudWxsO1xuICAgIGlmIChsYXN0Q2hpbGRyZW4gIT0gbnVsbCAmJiBuZXh0Q2hpbGRyZW4gPT0gbnVsbCkge1xuICAgICAgdGhpcy51cGRhdGVDaGlsZHJlbihudWxsLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgfSBlbHNlIGlmIChsYXN0SGFzQ29udGVudE9ySHRtbCAmJiAhbmV4dEhhc0NvbnRlbnRPckh0bWwpIHtcbiAgICAgIHRoaXMudXBkYXRlVGV4dENvbnRlbnQoJycpO1xuICAgIH1cblxuICAgIGlmIChuZXh0Q29udGVudCAhPSBudWxsKSB7XG4gICAgICBpZiAobGFzdENvbnRlbnQgIT09IG5leHRDb250ZW50KSB7XG4gICAgICAgIHRoaXMudXBkYXRlVGV4dENvbnRlbnQoJycgKyBuZXh0Q29udGVudCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChuZXh0SHRtbCAhPSBudWxsKSB7XG4gICAgICBpZiAobGFzdEh0bWwgIT09IG5leHRIdG1sKSB7XG4gICAgICAgIHRoaXMudXBkYXRlTWFya3VwKCcnICsgbmV4dEh0bWwpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAobmV4dENoaWxkcmVuICE9IG51bGwpIHtcbiAgICAgIHRoaXMudXBkYXRlQ2hpbGRyZW4obmV4dENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBEZXN0cm95cyBhbGwgZXZlbnQgcmVnaXN0cmF0aW9ucyBmb3IgdGhpcyBpbnN0YW5jZS4gRG9lcyBub3QgcmVtb3ZlIGZyb21cbiAgICogdGhlIERPTS4gVGhhdCBtdXN0IGJlIGRvbmUgYnkgdGhlIHBhcmVudC5cbiAgICpcbiAgICogQGludGVybmFsXG4gICAqL1xuICB1bm1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgc3dpdGNoICh0aGlzLl90YWcpIHtcbiAgICAgIGNhc2UgJ2lmcmFtZSc6XG4gICAgICBjYXNlICdpbWcnOlxuICAgICAgY2FzZSAnZm9ybSc6XG4gICAgICBjYXNlICd2aWRlbyc6XG4gICAgICBjYXNlICdhdWRpbyc6XG4gICAgICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl93cmFwcGVyU3RhdGUubGlzdGVuZXJzO1xuICAgICAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0ZW5lcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGxpc3RlbmVyc1tpXS5yZW1vdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdpbnB1dCc6XG4gICAgICAgIFJlYWN0RE9NSW5wdXQudW5tb3VudFdyYXBwZXIodGhpcyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnaHRtbCc6XG4gICAgICBjYXNlICdoZWFkJzpcbiAgICAgIGNhc2UgJ2JvZHknOlxuICAgICAgICAvKipcbiAgICAgICAgICogQ29tcG9uZW50cyBsaWtlIDxodG1sPiA8aGVhZD4gYW5kIDxib2R5PiBjYW4ndCBiZSByZW1vdmVkIG9yIGFkZGVkXG4gICAgICAgICAqIGVhc2lseSBpbiBhIGNyb3NzLWJyb3dzZXIgd2F5LCBob3dldmVyIGl0J3MgdmFsdWFibGUgdG8gYmUgYWJsZSB0b1xuICAgICAgICAgKiB0YWtlIGFkdmFudGFnZSBvZiBSZWFjdCdzIHJlY29uY2lsaWF0aW9uIGZvciBzdHlsaW5nIGFuZCA8dGl0bGU+XG4gICAgICAgICAqIG1hbmFnZW1lbnQuIFNvIHdlIGp1c3QgZG9jdW1lbnQgaXQgYW5kIHRocm93IGluIGRhbmdlcm91cyBjYXNlcy5cbiAgICAgICAgICovXG4gICAgICAgICFmYWxzZSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICc8JXM+IHRyaWVkIHRvIHVubW91bnQuIEJlY2F1c2Ugb2YgY3Jvc3MtYnJvd3NlciBxdWlya3MgaXQgaXMgJyArICdpbXBvc3NpYmxlIHRvIHVubW91bnQgc29tZSB0b3AtbGV2ZWwgY29tcG9uZW50cyAoZWcgPGh0bWw+LCAnICsgJzxoZWFkPiwgYW5kIDxib2R5PikgcmVsaWFibHkgYW5kIGVmZmljaWVudGx5LiBUbyBmaXggdGhpcywgaGF2ZSBhICcgKyAnc2luZ2xlIHRvcC1sZXZlbCBjb21wb25lbnQgdGhhdCBuZXZlciB1bm1vdW50cyByZW5kZXIgdGhlc2UgJyArICdlbGVtZW50cy4nLCB0aGlzLl90YWcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgdGhpcy51bm1vdW50Q2hpbGRyZW4oKTtcbiAgICBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXIuZGVsZXRlQWxsTGlzdGVuZXJzKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgIFJlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50LnVubW91bnRJREZyb21FbnZpcm9ubWVudCh0aGlzLl9yb290Tm9kZUlEKTtcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gbnVsbDtcbiAgICB0aGlzLl93cmFwcGVyU3RhdGUgPSBudWxsO1xuICAgIGlmICh0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMpIHtcbiAgICAgIHZhciBub2RlID0gdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzO1xuICAgICAgbm9kZS5fcmVhY3RJbnRlcm5hbENvbXBvbmVudCA9IG51bGw7XG4gICAgICB0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMgPSBudWxsO1xuICAgIH1cbiAgfSxcblxuICBnZXRQdWJsaWNJbnN0YW5jZTogZnVuY3Rpb24gKCkge1xuICAgIGlmICghdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzKSB7XG4gICAgICB2YXIgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZSh0aGlzLl9yb290Tm9kZUlEKTtcblxuICAgICAgbm9kZS5fcmVhY3RJbnRlcm5hbENvbXBvbmVudCA9IHRoaXM7XG4gICAgICBub2RlLmdldERPTU5vZGUgPSBsZWdhY3lHZXRET01Ob2RlO1xuICAgICAgbm9kZS5pc01vdW50ZWQgPSBsZWdhY3lJc01vdW50ZWQ7XG4gICAgICBub2RlLnNldFN0YXRlID0gbGVnYWN5U2V0U3RhdGVFdGM7XG4gICAgICBub2RlLnJlcGxhY2VTdGF0ZSA9IGxlZ2FjeVNldFN0YXRlRXRjO1xuICAgICAgbm9kZS5mb3JjZVVwZGF0ZSA9IGxlZ2FjeVNldFN0YXRlRXRjO1xuICAgICAgbm9kZS5zZXRQcm9wcyA9IGxlZ2FjeVNldFByb3BzO1xuICAgICAgbm9kZS5yZXBsYWNlUHJvcHMgPSBsZWdhY3lSZXBsYWNlUHJvcHM7XG5cbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmIChjYW5EZWZpbmVQcm9wZXJ0eSkge1xuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG5vZGUsIGxlZ2FjeVByb3BzRGVzY3JpcHRvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gdXBkYXRlQ29tcG9uZW50IHdpbGwgdXBkYXRlIHRoaXMgcHJvcGVydHkgb24gc3Vic2VxdWVudCByZW5kZXJzXG4gICAgICAgICAgbm9kZS5wcm9wcyA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyB1cGRhdGVDb21wb25lbnQgd2lsbCB1cGRhdGUgdGhpcyBwcm9wZXJ0eSBvbiBzdWJzZXF1ZW50IHJlbmRlcnNcbiAgICAgICAgbm9kZS5wcm9wcyA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9ub2RlV2l0aExlZ2FjeVByb3BlcnRpZXMgPSBub2RlO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fbm9kZVdpdGhMZWdhY3lQcm9wZXJ0aWVzO1xuICB9XG5cbn07XG5cblJlYWN0UGVyZi5tZWFzdXJlTWV0aG9kcyhSZWFjdERPTUNvbXBvbmVudCwgJ1JlYWN0RE9NQ29tcG9uZW50Jywge1xuICBtb3VudENvbXBvbmVudDogJ21vdW50Q29tcG9uZW50JyxcbiAgdXBkYXRlQ29tcG9uZW50OiAndXBkYXRlQ29tcG9uZW50J1xufSk7XG5cbmFzc2lnbihSZWFjdERPTUNvbXBvbmVudC5wcm90b3R5cGUsIFJlYWN0RE9NQ29tcG9uZW50Lk1peGluLCBSZWFjdE11bHRpQ2hpbGQuTWl4aW4pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NQ29tcG9uZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTUZhY3Rvcmllc1xuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xudmFyIFJlYWN0RWxlbWVudFZhbGlkYXRvciA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50VmFsaWRhdG9yJyk7XG5cbnZhciBtYXBPYmplY3QgPSByZXF1aXJlKCdmYmpzL2xpYi9tYXBPYmplY3QnKTtcblxuLyoqXG4gKiBDcmVhdGUgYSBmYWN0b3J5IHRoYXQgY3JlYXRlcyBIVE1MIHRhZyBlbGVtZW50cy5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdGFnIFRhZyBuYW1lIChlLmcuIGBkaXZgKS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZURPTUZhY3RvcnkodGFnKSB7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgcmV0dXJuIFJlYWN0RWxlbWVudFZhbGlkYXRvci5jcmVhdGVGYWN0b3J5KHRhZyk7XG4gIH1cbiAgcmV0dXJuIFJlYWN0RWxlbWVudC5jcmVhdGVGYWN0b3J5KHRhZyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG1hcHBpbmcgZnJvbSBzdXBwb3J0ZWQgSFRNTCB0YWdzIHRvIGBSZWFjdERPTUNvbXBvbmVudGAgY2xhc3Nlcy5cbiAqIFRoaXMgaXMgYWxzbyBhY2Nlc3NpYmxlIHZpYSBgUmVhY3QuRE9NYC5cbiAqXG4gKiBAcHVibGljXG4gKi9cbnZhciBSZWFjdERPTUZhY3RvcmllcyA9IG1hcE9iamVjdCh7XG4gIGE6ICdhJyxcbiAgYWJicjogJ2FiYnInLFxuICBhZGRyZXNzOiAnYWRkcmVzcycsXG4gIGFyZWE6ICdhcmVhJyxcbiAgYXJ0aWNsZTogJ2FydGljbGUnLFxuICBhc2lkZTogJ2FzaWRlJyxcbiAgYXVkaW86ICdhdWRpbycsXG4gIGI6ICdiJyxcbiAgYmFzZTogJ2Jhc2UnLFxuICBiZGk6ICdiZGknLFxuICBiZG86ICdiZG8nLFxuICBiaWc6ICdiaWcnLFxuICBibG9ja3F1b3RlOiAnYmxvY2txdW90ZScsXG4gIGJvZHk6ICdib2R5JyxcbiAgYnI6ICdicicsXG4gIGJ1dHRvbjogJ2J1dHRvbicsXG4gIGNhbnZhczogJ2NhbnZhcycsXG4gIGNhcHRpb246ICdjYXB0aW9uJyxcbiAgY2l0ZTogJ2NpdGUnLFxuICBjb2RlOiAnY29kZScsXG4gIGNvbDogJ2NvbCcsXG4gIGNvbGdyb3VwOiAnY29sZ3JvdXAnLFxuICBkYXRhOiAnZGF0YScsXG4gIGRhdGFsaXN0OiAnZGF0YWxpc3QnLFxuICBkZDogJ2RkJyxcbiAgZGVsOiAnZGVsJyxcbiAgZGV0YWlsczogJ2RldGFpbHMnLFxuICBkZm46ICdkZm4nLFxuICBkaWFsb2c6ICdkaWFsb2cnLFxuICBkaXY6ICdkaXYnLFxuICBkbDogJ2RsJyxcbiAgZHQ6ICdkdCcsXG4gIGVtOiAnZW0nLFxuICBlbWJlZDogJ2VtYmVkJyxcbiAgZmllbGRzZXQ6ICdmaWVsZHNldCcsXG4gIGZpZ2NhcHRpb246ICdmaWdjYXB0aW9uJyxcbiAgZmlndXJlOiAnZmlndXJlJyxcbiAgZm9vdGVyOiAnZm9vdGVyJyxcbiAgZm9ybTogJ2Zvcm0nLFxuICBoMTogJ2gxJyxcbiAgaDI6ICdoMicsXG4gIGgzOiAnaDMnLFxuICBoNDogJ2g0JyxcbiAgaDU6ICdoNScsXG4gIGg2OiAnaDYnLFxuICBoZWFkOiAnaGVhZCcsXG4gIGhlYWRlcjogJ2hlYWRlcicsXG4gIGhncm91cDogJ2hncm91cCcsXG4gIGhyOiAnaHInLFxuICBodG1sOiAnaHRtbCcsXG4gIGk6ICdpJyxcbiAgaWZyYW1lOiAnaWZyYW1lJyxcbiAgaW1nOiAnaW1nJyxcbiAgaW5wdXQ6ICdpbnB1dCcsXG4gIGluczogJ2lucycsXG4gIGtiZDogJ2tiZCcsXG4gIGtleWdlbjogJ2tleWdlbicsXG4gIGxhYmVsOiAnbGFiZWwnLFxuICBsZWdlbmQ6ICdsZWdlbmQnLFxuICBsaTogJ2xpJyxcbiAgbGluazogJ2xpbmsnLFxuICBtYWluOiAnbWFpbicsXG4gIG1hcDogJ21hcCcsXG4gIG1hcms6ICdtYXJrJyxcbiAgbWVudTogJ21lbnUnLFxuICBtZW51aXRlbTogJ21lbnVpdGVtJyxcbiAgbWV0YTogJ21ldGEnLFxuICBtZXRlcjogJ21ldGVyJyxcbiAgbmF2OiAnbmF2JyxcbiAgbm9zY3JpcHQ6ICdub3NjcmlwdCcsXG4gIG9iamVjdDogJ29iamVjdCcsXG4gIG9sOiAnb2wnLFxuICBvcHRncm91cDogJ29wdGdyb3VwJyxcbiAgb3B0aW9uOiAnb3B0aW9uJyxcbiAgb3V0cHV0OiAnb3V0cHV0JyxcbiAgcDogJ3AnLFxuICBwYXJhbTogJ3BhcmFtJyxcbiAgcGljdHVyZTogJ3BpY3R1cmUnLFxuICBwcmU6ICdwcmUnLFxuICBwcm9ncmVzczogJ3Byb2dyZXNzJyxcbiAgcTogJ3EnLFxuICBycDogJ3JwJyxcbiAgcnQ6ICdydCcsXG4gIHJ1Ynk6ICdydWJ5JyxcbiAgczogJ3MnLFxuICBzYW1wOiAnc2FtcCcsXG4gIHNjcmlwdDogJ3NjcmlwdCcsXG4gIHNlY3Rpb246ICdzZWN0aW9uJyxcbiAgc2VsZWN0OiAnc2VsZWN0JyxcbiAgc21hbGw6ICdzbWFsbCcsXG4gIHNvdXJjZTogJ3NvdXJjZScsXG4gIHNwYW46ICdzcGFuJyxcbiAgc3Ryb25nOiAnc3Ryb25nJyxcbiAgc3R5bGU6ICdzdHlsZScsXG4gIHN1YjogJ3N1YicsXG4gIHN1bW1hcnk6ICdzdW1tYXJ5JyxcbiAgc3VwOiAnc3VwJyxcbiAgdGFibGU6ICd0YWJsZScsXG4gIHRib2R5OiAndGJvZHknLFxuICB0ZDogJ3RkJyxcbiAgdGV4dGFyZWE6ICd0ZXh0YXJlYScsXG4gIHRmb290OiAndGZvb3QnLFxuICB0aDogJ3RoJyxcbiAgdGhlYWQ6ICd0aGVhZCcsXG4gIHRpbWU6ICd0aW1lJyxcbiAgdGl0bGU6ICd0aXRsZScsXG4gIHRyOiAndHInLFxuICB0cmFjazogJ3RyYWNrJyxcbiAgdTogJ3UnLFxuICB1bDogJ3VsJyxcbiAgJ3Zhcic6ICd2YXInLFxuICB2aWRlbzogJ3ZpZGVvJyxcbiAgd2JyOiAnd2JyJyxcblxuICAvLyBTVkdcbiAgY2lyY2xlOiAnY2lyY2xlJyxcbiAgY2xpcFBhdGg6ICdjbGlwUGF0aCcsXG4gIGRlZnM6ICdkZWZzJyxcbiAgZWxsaXBzZTogJ2VsbGlwc2UnLFxuICBnOiAnZycsXG4gIGltYWdlOiAnaW1hZ2UnLFxuICBsaW5lOiAnbGluZScsXG4gIGxpbmVhckdyYWRpZW50OiAnbGluZWFyR3JhZGllbnQnLFxuICBtYXNrOiAnbWFzaycsXG4gIHBhdGg6ICdwYXRoJyxcbiAgcGF0dGVybjogJ3BhdHRlcm4nLFxuICBwb2x5Z29uOiAncG9seWdvbicsXG4gIHBvbHlsaW5lOiAncG9seWxpbmUnLFxuICByYWRpYWxHcmFkaWVudDogJ3JhZGlhbEdyYWRpZW50JyxcbiAgcmVjdDogJ3JlY3QnLFxuICBzdG9wOiAnc3RvcCcsXG4gIHN2ZzogJ3N2ZycsXG4gIHRleHQ6ICd0ZXh0JyxcbiAgdHNwYW46ICd0c3BhbidcblxufSwgY3JlYXRlRE9NRmFjdG9yeSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01GYWN0b3JpZXM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NRmVhdHVyZUZsYWdzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RET01GZWF0dXJlRmxhZ3MgPSB7XG4gIHVzZUNyZWF0ZUVsZW1lbnQ6IGZhbHNlXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NRmVhdHVyZUZsYWdzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTUlET3BlcmF0aW9uc1xuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBET01DaGlsZHJlbk9wZXJhdGlvbnMgPSByZXF1aXJlKCcuL0RPTUNoaWxkcmVuT3BlcmF0aW9ucycpO1xudmFyIERPTVByb3BlcnR5T3BlcmF0aW9ucyA9IHJlcXVpcmUoJy4vRE9NUHJvcGVydHlPcGVyYXRpb25zJyk7XG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xudmFyIFJlYWN0UGVyZiA9IHJlcXVpcmUoJy4vUmVhY3RQZXJmJyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcblxuLyoqXG4gKiBFcnJvcnMgZm9yIHByb3BlcnRpZXMgdGhhdCBzaG91bGQgbm90IGJlIHVwZGF0ZWQgd2l0aCBgdXBkYXRlUHJvcGVydHlCeUlEKClgLlxuICpcbiAqIEB0eXBlIHtvYmplY3R9XG4gKiBAcHJpdmF0ZVxuICovXG52YXIgSU5WQUxJRF9QUk9QRVJUWV9FUlJPUlMgPSB7XG4gIGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOiAnYGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYCBtdXN0IGJlIHNldCB1c2luZyBgdXBkYXRlSW5uZXJIVE1MQnlJRCgpYC4nLFxuICBzdHlsZTogJ2BzdHlsZWAgbXVzdCBiZSBzZXQgdXNpbmcgYHVwZGF0ZVN0eWxlc0J5SUQoKWAuJ1xufTtcblxuLyoqXG4gKiBPcGVyYXRpb25zIHVzZWQgdG8gcHJvY2VzcyB1cGRhdGVzIHRvIERPTSBub2Rlcy5cbiAqL1xudmFyIFJlYWN0RE9NSURPcGVyYXRpb25zID0ge1xuXG4gIC8qKlxuICAgKiBVcGRhdGVzIGEgRE9NIG5vZGUgd2l0aCBuZXcgcHJvcGVydHkgdmFsdWVzLiBUaGlzIHNob3VsZCBvbmx5IGJlIHVzZWQgdG9cbiAgICogdXBkYXRlIERPTSBwcm9wZXJ0aWVzIGluIGBET01Qcm9wZXJ0eWAuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBJRCBvZiB0aGUgbm9kZSB0byB1cGRhdGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEEgdmFsaWQgcHJvcGVydHkgbmFtZSwgc2VlIGBET01Qcm9wZXJ0eWAuXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWUgTmV3IHZhbHVlIG9mIHRoZSBwcm9wZXJ0eS5cbiAgICogQGludGVybmFsXG4gICAqL1xuICB1cGRhdGVQcm9wZXJ0eUJ5SUQ6IGZ1bmN0aW9uIChpZCwgbmFtZSwgdmFsdWUpIHtcbiAgICB2YXIgbm9kZSA9IFJlYWN0TW91bnQuZ2V0Tm9kZShpZCk7XG4gICAgISFJTlZBTElEX1BST1BFUlRZX0VSUk9SUy5oYXNPd25Qcm9wZXJ0eShuYW1lKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd1cGRhdGVQcm9wZXJ0eUJ5SUQoLi4uKTogJXMnLCBJTlZBTElEX1BST1BFUlRZX0VSUk9SU1tuYW1lXSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgLy8gSWYgd2UncmUgdXBkYXRpbmcgdG8gbnVsbCBvciB1bmRlZmluZWQsIHdlIHNob3VsZCByZW1vdmUgdGhlIHByb3BlcnR5XG4gICAgLy8gZnJvbSB0aGUgRE9NIG5vZGUgaW5zdGVhZCBvZiBpbmFkdmVydGFudGx5IHNldHRpbmcgdG8gYSBzdHJpbmcuIFRoaXNcbiAgICAvLyBicmluZ3MgdXMgaW4gbGluZSB3aXRoIHRoZSBzYW1lIGJlaGF2aW9yIHdlIGhhdmUgb24gaW5pdGlhbCByZW5kZXIuXG4gICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgIERPTVByb3BlcnR5T3BlcmF0aW9ucy5zZXRWYWx1ZUZvclByb3BlcnR5KG5vZGUsIG5hbWUsIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgRE9NUHJvcGVydHlPcGVyYXRpb25zLmRlbGV0ZVZhbHVlRm9yUHJvcGVydHkobm9kZSwgbmFtZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyBhIERPTSBub2RlIHRoYXQgZXhpc3RzIGluIHRoZSBkb2N1bWVudCB3aXRoIG1hcmt1cC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIGNoaWxkIHRvIGJlIHJlcGxhY2VkLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIERhbmdlcm91cyBtYXJrdXAgdG8gaW5qZWN0IGluIHBsYWNlIG9mIGNoaWxkLlxuICAgKiBAaW50ZXJuYWxcbiAgICogQHNlZSB7RGFuZ2VyLmRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwfVxuICAgKi9cbiAgZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXBCeUlEOiBmdW5jdGlvbiAoaWQsIG1hcmt1cCkge1xuICAgIHZhciBub2RlID0gUmVhY3RNb3VudC5nZXROb2RlKGlkKTtcbiAgICBET01DaGlsZHJlbk9wZXJhdGlvbnMuZGFuZ2Vyb3VzbHlSZXBsYWNlTm9kZVdpdGhNYXJrdXAobm9kZSwgbWFya3VwKTtcbiAgfSxcblxuICAvKipcbiAgICogVXBkYXRlcyBhIGNvbXBvbmVudCdzIGNoaWxkcmVuIGJ5IHByb2Nlc3NpbmcgYSBzZXJpZXMgb2YgdXBkYXRlcy5cbiAgICpcbiAgICogQHBhcmFtIHthcnJheTxvYmplY3Q+fSB1cGRhdGVzIExpc3Qgb2YgdXBkYXRlIGNvbmZpZ3VyYXRpb25zLlxuICAgKiBAcGFyYW0ge2FycmF5PHN0cmluZz59IG1hcmt1cCBMaXN0IG9mIG1hcmt1cCBzdHJpbmdzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGRhbmdlcm91c2x5UHJvY2Vzc0NoaWxkcmVuVXBkYXRlczogZnVuY3Rpb24gKHVwZGF0ZXMsIG1hcmt1cCkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdXBkYXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdXBkYXRlc1tpXS5wYXJlbnROb2RlID0gUmVhY3RNb3VudC5nZXROb2RlKHVwZGF0ZXNbaV0ucGFyZW50SUQpO1xuICAgIH1cbiAgICBET01DaGlsZHJlbk9wZXJhdGlvbnMucHJvY2Vzc1VwZGF0ZXModXBkYXRlcywgbWFya3VwKTtcbiAgfVxufTtcblxuUmVhY3RQZXJmLm1lYXN1cmVNZXRob2RzKFJlYWN0RE9NSURPcGVyYXRpb25zLCAnUmVhY3RET01JRE9wZXJhdGlvbnMnLCB7XG4gIGRhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRDogJ2Rhbmdlcm91c2x5UmVwbGFjZU5vZGVXaXRoTWFya3VwQnlJRCcsXG4gIGRhbmdlcm91c2x5UHJvY2Vzc0NoaWxkcmVuVXBkYXRlczogJ2Rhbmdlcm91c2x5UHJvY2Vzc0NoaWxkcmVuVXBkYXRlcydcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NSURPcGVyYXRpb25zOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTUlucHV0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RET01JRE9wZXJhdGlvbnMgPSByZXF1aXJlKCcuL1JlYWN0RE9NSURPcGVyYXRpb25zJyk7XG52YXIgTGlua2VkVmFsdWVVdGlscyA9IHJlcXVpcmUoJy4vTGlua2VkVmFsdWVVdGlscycpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbnZhciBpbnN0YW5jZXNCeVJlYWN0SUQgPSB7fTtcblxuZnVuY3Rpb24gZm9yY2VVcGRhdGVJZk1vdW50ZWQoKSB7XG4gIGlmICh0aGlzLl9yb290Tm9kZUlEKSB7XG4gICAgLy8gRE9NIGNvbXBvbmVudCBpcyBzdGlsbCBtb3VudGVkOyB1cGRhdGVcbiAgICBSZWFjdERPTUlucHV0LnVwZGF0ZVdyYXBwZXIodGhpcyk7XG4gIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIGFuIDxpbnB1dD4gbmF0aXZlIGNvbXBvbmVudCB0aGF0IGFsbG93cyBzZXR0aW5nIHRoZXNlIG9wdGlvbmFsXG4gKiBwcm9wczogYGNoZWNrZWRgLCBgdmFsdWVgLCBgZGVmYXVsdENoZWNrZWRgLCBhbmQgYGRlZmF1bHRWYWx1ZWAuXG4gKlxuICogSWYgYGNoZWNrZWRgIG9yIGB2YWx1ZWAgYXJlIG5vdCBzdXBwbGllZCAob3IgbnVsbC91bmRlZmluZWQpLCB1c2VyIGFjdGlvbnNcbiAqIHRoYXQgYWZmZWN0IHRoZSBjaGVja2VkIHN0YXRlIG9yIHZhbHVlIHdpbGwgdHJpZ2dlciB1cGRhdGVzIHRvIHRoZSBlbGVtZW50LlxuICpcbiAqIElmIHRoZXkgYXJlIHN1cHBsaWVkIChhbmQgbm90IG51bGwvdW5kZWZpbmVkKSwgdGhlIHJlbmRlcmVkIGVsZW1lbnQgd2lsbCBub3RcbiAqIHRyaWdnZXIgdXBkYXRlcyB0byB0aGUgZWxlbWVudC4gSW5zdGVhZCwgdGhlIHByb3BzIG11c3QgY2hhbmdlIGluIG9yZGVyIGZvclxuICogdGhlIHJlbmRlcmVkIGVsZW1lbnQgdG8gYmUgdXBkYXRlZC5cbiAqXG4gKiBUaGUgcmVuZGVyZWQgZWxlbWVudCB3aWxsIGJlIGluaXRpYWxpemVkIGFzIHVuY2hlY2tlZCAob3IgYGRlZmF1bHRDaGVja2VkYClcbiAqIHdpdGggYW4gZW1wdHkgdmFsdWUgKG9yIGBkZWZhdWx0VmFsdWVgKS5cbiAqXG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTIvV0QtaHRtbDUtMjAxMjEwMjUvdGhlLWlucHV0LWVsZW1lbnQuaHRtbFxuICovXG52YXIgUmVhY3RET01JbnB1dCA9IHtcbiAgZ2V0TmF0aXZlUHJvcHM6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuICAgIHZhciB2YWx1ZSA9IExpbmtlZFZhbHVlVXRpbHMuZ2V0VmFsdWUocHJvcHMpO1xuICAgIHZhciBjaGVja2VkID0gTGlua2VkVmFsdWVVdGlscy5nZXRDaGVja2VkKHByb3BzKTtcblxuICAgIHZhciBuYXRpdmVQcm9wcyA9IGFzc2lnbih7fSwgcHJvcHMsIHtcbiAgICAgIGRlZmF1bHRDaGVja2VkOiB1bmRlZmluZWQsXG4gICAgICBkZWZhdWx0VmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgIHZhbHVlOiB2YWx1ZSAhPSBudWxsID8gdmFsdWUgOiBpbnN0Ll93cmFwcGVyU3RhdGUuaW5pdGlhbFZhbHVlLFxuICAgICAgY2hlY2tlZDogY2hlY2tlZCAhPSBudWxsID8gY2hlY2tlZCA6IGluc3QuX3dyYXBwZXJTdGF0ZS5pbml0aWFsQ2hlY2tlZCxcbiAgICAgIG9uQ2hhbmdlOiBpbnN0Ll93cmFwcGVyU3RhdGUub25DaGFuZ2VcbiAgICB9KTtcblxuICAgIHJldHVybiBuYXRpdmVQcm9wcztcbiAgfSxcblxuICBtb3VudFdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBMaW5rZWRWYWx1ZVV0aWxzLmNoZWNrUHJvcFR5cGVzKCdpbnB1dCcsIHByb3BzLCBpbnN0Ll9jdXJyZW50RWxlbWVudC5fb3duZXIpO1xuICAgIH1cblxuICAgIHZhciBkZWZhdWx0VmFsdWUgPSBwcm9wcy5kZWZhdWx0VmFsdWU7XG4gICAgaW5zdC5fd3JhcHBlclN0YXRlID0ge1xuICAgICAgaW5pdGlhbENoZWNrZWQ6IHByb3BzLmRlZmF1bHRDaGVja2VkIHx8IGZhbHNlLFxuICAgICAgaW5pdGlhbFZhbHVlOiBkZWZhdWx0VmFsdWUgIT0gbnVsbCA/IGRlZmF1bHRWYWx1ZSA6IG51bGwsXG4gICAgICBvbkNoYW5nZTogX2hhbmRsZUNoYW5nZS5iaW5kKGluc3QpXG4gICAgfTtcbiAgfSxcblxuICBtb3VudFJlYWR5V3JhcHBlcjogZnVuY3Rpb24gKGluc3QpIHtcbiAgICAvLyBDYW4ndCBiZSBpbiBtb3VudFdyYXBwZXIgb3IgZWxzZSBzZXJ2ZXIgcmVuZGVyaW5nIGxlYWtzLlxuICAgIGluc3RhbmNlc0J5UmVhY3RJRFtpbnN0Ll9yb290Tm9kZUlEXSA9IGluc3Q7XG4gIH0sXG5cbiAgdW5tb3VudFdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0KSB7XG4gICAgZGVsZXRlIGluc3RhbmNlc0J5UmVhY3RJRFtpbnN0Ll9yb290Tm9kZUlEXTtcbiAgfSxcblxuICB1cGRhdGVXcmFwcGVyOiBmdW5jdGlvbiAoaW5zdCkge1xuICAgIHZhciBwcm9wcyA9IGluc3QuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuXG4gICAgLy8gVE9ETzogU2hvdWxkbid0IHRoaXMgYmUgZ2V0Q2hlY2tlZChwcm9wcyk/XG4gICAgdmFyIGNoZWNrZWQgPSBwcm9wcy5jaGVja2VkO1xuICAgIGlmIChjaGVja2VkICE9IG51bGwpIHtcbiAgICAgIFJlYWN0RE9NSURPcGVyYXRpb25zLnVwZGF0ZVByb3BlcnR5QnlJRChpbnN0Ll9yb290Tm9kZUlELCAnY2hlY2tlZCcsIGNoZWNrZWQgfHwgZmFsc2UpO1xuICAgIH1cblxuICAgIHZhciB2YWx1ZSA9IExpbmtlZFZhbHVlVXRpbHMuZ2V0VmFsdWUocHJvcHMpO1xuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAvLyBDYXN0IGB2YWx1ZWAgdG8gYSBzdHJpbmcgdG8gZW5zdXJlIHRoZSB2YWx1ZSBpcyBzZXQgY29ycmVjdGx5LiBXaGlsZVxuICAgICAgLy8gYnJvd3NlcnMgdHlwaWNhbGx5IGRvIHRoaXMgYXMgbmVjZXNzYXJ5LCBqc2RvbSBkb2Vzbid0LlxuICAgICAgUmVhY3RET01JRE9wZXJhdGlvbnMudXBkYXRlUHJvcGVydHlCeUlEKGluc3QuX3Jvb3ROb2RlSUQsICd2YWx1ZScsICcnICsgdmFsdWUpO1xuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gX2hhbmRsZUNoYW5nZShldmVudCkge1xuICB2YXIgcHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcblxuICB2YXIgcmV0dXJuVmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmV4ZWN1dGVPbkNoYW5nZShwcm9wcywgZXZlbnQpO1xuXG4gIC8vIEhlcmUgd2UgdXNlIGFzYXAgdG8gd2FpdCB1bnRpbCBhbGwgdXBkYXRlcyBoYXZlIHByb3BhZ2F0ZWQsIHdoaWNoXG4gIC8vIGlzIGltcG9ydGFudCB3aGVuIHVzaW5nIGNvbnRyb2xsZWQgY29tcG9uZW50cyB3aXRoaW4gbGF5ZXJzOlxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvaXNzdWVzLzE2OThcbiAgUmVhY3RVcGRhdGVzLmFzYXAoZm9yY2VVcGRhdGVJZk1vdW50ZWQsIHRoaXMpO1xuXG4gIHZhciBuYW1lID0gcHJvcHMubmFtZTtcbiAgaWYgKHByb3BzLnR5cGUgPT09ICdyYWRpbycgJiYgbmFtZSAhPSBudWxsKSB7XG4gICAgdmFyIHJvb3ROb2RlID0gUmVhY3RNb3VudC5nZXROb2RlKHRoaXMuX3Jvb3ROb2RlSUQpO1xuICAgIHZhciBxdWVyeVJvb3QgPSByb290Tm9kZTtcblxuICAgIHdoaWxlIChxdWVyeVJvb3QucGFyZW50Tm9kZSkge1xuICAgICAgcXVlcnlSb290ID0gcXVlcnlSb290LnBhcmVudE5vZGU7XG4gICAgfVxuXG4gICAgLy8gSWYgYHJvb3ROb2RlLmZvcm1gIHdhcyBub24tbnVsbCwgdGhlbiB3ZSBjb3VsZCB0cnkgYGZvcm0uZWxlbWVudHNgLFxuICAgIC8vIGJ1dCB0aGF0IHNvbWV0aW1lcyBiZWhhdmVzIHN0cmFuZ2VseSBpbiBJRTguIFdlIGNvdWxkIGFsc28gdHJ5IHVzaW5nXG4gICAgLy8gYGZvcm0uZ2V0RWxlbWVudHNCeU5hbWVgLCBidXQgdGhhdCB3aWxsIG9ubHkgcmV0dXJuIGRpcmVjdCBjaGlsZHJlblxuICAgIC8vIGFuZCB3b24ndCBpbmNsdWRlIGlucHV0cyB0aGF0IHVzZSB0aGUgSFRNTDUgYGZvcm09YCBhdHRyaWJ1dGUuIFNpbmNlXG4gICAgLy8gdGhlIGlucHV0IG1pZ2h0IG5vdCBldmVuIGJlIGluIGEgZm9ybSwgbGV0J3MganVzdCB1c2UgdGhlIGdsb2JhbFxuICAgIC8vIGBxdWVyeVNlbGVjdG9yQWxsYCB0byBlbnN1cmUgd2UgZG9uJ3QgbWlzcyBhbnl0aGluZy5cbiAgICB2YXIgZ3JvdXAgPSBxdWVyeVJvb3QucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbbmFtZT0nICsgSlNPTi5zdHJpbmdpZnkoJycgKyBuYW1lKSArICddW3R5cGU9XCJyYWRpb1wiXScpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBncm91cC5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIG90aGVyTm9kZSA9IGdyb3VwW2ldO1xuICAgICAgaWYgKG90aGVyTm9kZSA9PT0gcm9vdE5vZGUgfHwgb3RoZXJOb2RlLmZvcm0gIT09IHJvb3ROb2RlLmZvcm0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICAvLyBUaGlzIHdpbGwgdGhyb3cgaWYgcmFkaW8gYnV0dG9ucyByZW5kZXJlZCBieSBkaWZmZXJlbnQgY29waWVzIG9mIFJlYWN0XG4gICAgICAvLyBhbmQgdGhlIHNhbWUgbmFtZSBhcmUgcmVuZGVyZWQgaW50byB0aGUgc2FtZSBmb3JtIChzYW1lIGFzICMxOTM5KS5cbiAgICAgIC8vIFRoYXQncyBwcm9iYWJseSBva2F5OyB3ZSBkb24ndCBzdXBwb3J0IGl0IGp1c3QgYXMgd2UgZG9uJ3Qgc3VwcG9ydFxuICAgICAgLy8gbWl4aW5nIFJlYWN0IHdpdGggbm9uLVJlYWN0LlxuICAgICAgdmFyIG90aGVySUQgPSBSZWFjdE1vdW50LmdldElEKG90aGVyTm9kZSk7XG4gICAgICAhb3RoZXJJRCA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdERPTUlucHV0OiBNaXhpbmcgUmVhY3QgYW5kIG5vbi1SZWFjdCByYWRpbyBpbnB1dHMgd2l0aCB0aGUgJyArICdzYW1lIGBuYW1lYCBpcyBub3Qgc3VwcG9ydGVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIHZhciBvdGhlckluc3RhbmNlID0gaW5zdGFuY2VzQnlSZWFjdElEW290aGVySURdO1xuICAgICAgIW90aGVySW5zdGFuY2UgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RET01JbnB1dDogVW5rbm93biByYWRpbyBidXR0b24gSUQgJXMuJywgb3RoZXJJRCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgLy8gSWYgdGhpcyBpcyBhIGNvbnRyb2xsZWQgcmFkaW8gYnV0dG9uIGdyb3VwLCBmb3JjaW5nIHRoZSBpbnB1dCB0aGF0XG4gICAgICAvLyB3YXMgcHJldmlvdXNseSBjaGVja2VkIHRvIHVwZGF0ZSB3aWxsIGNhdXNlIGl0IHRvIGJlIGNvbWUgcmUtY2hlY2tlZFxuICAgICAgLy8gYXMgYXBwcm9wcmlhdGUuXG4gICAgICBSZWFjdFVwZGF0ZXMuYXNhcChmb3JjZVVwZGF0ZUlmTW91bnRlZCwgb3RoZXJJbnN0YW5jZSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJldHVyblZhbHVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NSW5wdXQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NT3B0aW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RDaGlsZHJlbiA9IHJlcXVpcmUoJy4vUmVhY3RDaGlsZHJlbicpO1xudmFyIFJlYWN0RE9NU2VsZWN0ID0gcmVxdWlyZSgnLi9SZWFjdERPTVNlbGVjdCcpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIHZhbHVlQ29udGV4dEtleSA9IFJlYWN0RE9NU2VsZWN0LnZhbHVlQ29udGV4dEtleTtcblxuLyoqXG4gKiBJbXBsZW1lbnRzIGFuIDxvcHRpb24+IG5hdGl2ZSBjb21wb25lbnQgdGhhdCB3YXJucyB3aGVuIGBzZWxlY3RlZGAgaXMgc2V0LlxuICovXG52YXIgUmVhY3RET01PcHRpb24gPSB7XG4gIG1vdW50V3JhcHBlcjogZnVuY3Rpb24gKGluc3QsIHByb3BzLCBjb250ZXh0KSB7XG4gICAgLy8gVE9ETyAoeXVuZ3N0ZXJzKTogUmVtb3ZlIHN1cHBvcnQgZm9yIGBzZWxlY3RlZGAgaW4gPG9wdGlvbj4uXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHByb3BzLnNlbGVjdGVkID09IG51bGwsICdVc2UgdGhlIGBkZWZhdWx0VmFsdWVgIG9yIGB2YWx1ZWAgcHJvcHMgb24gPHNlbGVjdD4gaW5zdGVhZCBvZiAnICsgJ3NldHRpbmcgYHNlbGVjdGVkYCBvbiA8b3B0aW9uPi4nKSA6IHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBMb29rIHVwIHdoZXRoZXIgdGhpcyBvcHRpb24gaXMgJ3NlbGVjdGVkJyB2aWEgY29udGV4dFxuICAgIHZhciBzZWxlY3RWYWx1ZSA9IGNvbnRleHRbdmFsdWVDb250ZXh0S2V5XTtcblxuICAgIC8vIElmIGNvbnRleHQga2V5IGlzIG51bGwgKGUuZy4sIG5vIHNwZWNpZmllZCB2YWx1ZSBvciBhZnRlciBpbml0aWFsIG1vdW50KVxuICAgIC8vIG9yIG1pc3NpbmcgKGUuZy4sIGZvciA8ZGF0YWxpc3Q+KSwgd2UgZG9uJ3QgY2hhbmdlIHByb3BzLnNlbGVjdGVkXG4gICAgdmFyIHNlbGVjdGVkID0gbnVsbDtcbiAgICBpZiAoc2VsZWN0VmFsdWUgIT0gbnVsbCkge1xuICAgICAgc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHNlbGVjdFZhbHVlKSkge1xuICAgICAgICAvLyBtdWx0aXBsZVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlbGVjdFZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaWYgKCcnICsgc2VsZWN0VmFsdWVbaV0gPT09ICcnICsgcHJvcHMudmFsdWUpIHtcbiAgICAgICAgICAgIHNlbGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2VsZWN0ZWQgPSAnJyArIHNlbGVjdFZhbHVlID09PSAnJyArIHByb3BzLnZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGluc3QuX3dyYXBwZXJTdGF0ZSA9IHsgc2VsZWN0ZWQ6IHNlbGVjdGVkIH07XG4gIH0sXG5cbiAgZ2V0TmF0aXZlUHJvcHM6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuICAgIHZhciBuYXRpdmVQcm9wcyA9IGFzc2lnbih7IHNlbGVjdGVkOiB1bmRlZmluZWQsIGNoaWxkcmVuOiB1bmRlZmluZWQgfSwgcHJvcHMpO1xuXG4gICAgLy8gUmVhZCBzdGF0ZSBvbmx5IGZyb20gaW5pdGlhbCBtb3VudCBiZWNhdXNlIDxzZWxlY3Q+IHVwZGF0ZXMgdmFsdWVcbiAgICAvLyBtYW51YWxseTsgd2UgbmVlZCB0aGUgaW5pdGlhbCBzdGF0ZSBvbmx5IGZvciBzZXJ2ZXIgcmVuZGVyaW5nXG4gICAgaWYgKGluc3QuX3dyYXBwZXJTdGF0ZS5zZWxlY3RlZCAhPSBudWxsKSB7XG4gICAgICBuYXRpdmVQcm9wcy5zZWxlY3RlZCA9IGluc3QuX3dyYXBwZXJTdGF0ZS5zZWxlY3RlZDtcbiAgICB9XG5cbiAgICB2YXIgY29udGVudCA9ICcnO1xuXG4gICAgLy8gRmxhdHRlbiBjaGlsZHJlbiBhbmQgd2FybiBpZiB0aGV5IGFyZW4ndCBzdHJpbmdzIG9yIG51bWJlcnM7XG4gICAgLy8gaW52YWxpZCB0eXBlcyBhcmUgaWdub3JlZC5cbiAgICBSZWFjdENoaWxkcmVuLmZvckVhY2gocHJvcHMuY2hpbGRyZW4sIGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgaWYgKGNoaWxkID09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBjaGlsZCA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIGNoaWxkID09PSAnbnVtYmVyJykge1xuICAgICAgICBjb250ZW50ICs9IGNoaWxkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdPbmx5IHN0cmluZ3MgYW5kIG51bWJlcnMgYXJlIHN1cHBvcnRlZCBhcyA8b3B0aW9uPiBjaGlsZHJlbi4nKSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmIChjb250ZW50KSB7XG4gICAgICBuYXRpdmVQcm9wcy5jaGlsZHJlbiA9IGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5hdGl2ZVByb3BzO1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01PcHRpb247IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RE9NU2VsZWN0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgTGlua2VkVmFsdWVVdGlscyA9IHJlcXVpcmUoJy4vTGlua2VkVmFsdWVVdGlscycpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIHZhbHVlQ29udGV4dEtleSA9ICdfX1JlYWN0RE9NU2VsZWN0X3ZhbHVlJCcgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zbGljZSgyKTtcblxuZnVuY3Rpb24gdXBkYXRlT3B0aW9uc0lmUGVuZGluZ1VwZGF0ZUFuZE1vdW50ZWQoKSB7XG4gIGlmICh0aGlzLl9yb290Tm9kZUlEICYmIHRoaXMuX3dyYXBwZXJTdGF0ZS5wZW5kaW5nVXBkYXRlKSB7XG4gICAgdGhpcy5fd3JhcHBlclN0YXRlLnBlbmRpbmdVcGRhdGUgPSBmYWxzZTtcblxuICAgIHZhciBwcm9wcyA9IHRoaXMuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuICAgIHZhciB2YWx1ZSA9IExpbmtlZFZhbHVlVXRpbHMuZ2V0VmFsdWUocHJvcHMpO1xuXG4gICAgaWYgKHZhbHVlICE9IG51bGwpIHtcbiAgICAgIHVwZGF0ZU9wdGlvbnModGhpcywgQm9vbGVhbihwcm9wcy5tdWx0aXBsZSksIHZhbHVlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKG93bmVyKSB7XG4gIGlmIChvd25lcikge1xuICAgIHZhciBuYW1lID0gb3duZXIuZ2V0TmFtZSgpO1xuICAgIGlmIChuYW1lKSB7XG4gICAgICByZXR1cm4gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuICAgIH1cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbnZhciB2YWx1ZVByb3BOYW1lcyA9IFsndmFsdWUnLCAnZGVmYXVsdFZhbHVlJ107XG5cbi8qKlxuICogVmFsaWRhdGlvbiBmdW5jdGlvbiBmb3IgYHZhbHVlYCBhbmQgYGRlZmF1bHRWYWx1ZWAuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjaGVja1NlbGVjdFByb3BUeXBlcyhpbnN0LCBwcm9wcykge1xuICB2YXIgb3duZXIgPSBpbnN0Ll9jdXJyZW50RWxlbWVudC5fb3duZXI7XG4gIExpbmtlZFZhbHVlVXRpbHMuY2hlY2tQcm9wVHlwZXMoJ3NlbGVjdCcsIHByb3BzLCBvd25lcik7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZVByb3BOYW1lcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBwcm9wTmFtZSA9IHZhbHVlUHJvcE5hbWVzW2ldO1xuICAgIGlmIChwcm9wc1twcm9wTmFtZV0gPT0gbnVsbCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChwcm9wcy5tdWx0aXBsZSkge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoQXJyYXkuaXNBcnJheShwcm9wc1twcm9wTmFtZV0pLCAnVGhlIGAlc2AgcHJvcCBzdXBwbGllZCB0byA8c2VsZWN0PiBtdXN0IGJlIGFuIGFycmF5IGlmICcgKyAnYG11bHRpcGxlYCBpcyB0cnVlLiVzJywgcHJvcE5hbWUsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bShvd25lcikpIDogdW5kZWZpbmVkO1xuICAgIH0gZWxzZSB7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghQXJyYXkuaXNBcnJheShwcm9wc1twcm9wTmFtZV0pLCAnVGhlIGAlc2AgcHJvcCBzdXBwbGllZCB0byA8c2VsZWN0PiBtdXN0IGJlIGEgc2NhbGFyICcgKyAndmFsdWUgaWYgYG11bHRpcGxlYCBpcyBmYWxzZS4lcycsIHByb3BOYW1lLCBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0ob3duZXIpKSA6IHVuZGVmaW5lZDtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge1JlYWN0RE9NQ29tcG9uZW50fSBpbnN0XG4gKiBAcGFyYW0ge2Jvb2xlYW59IG11bHRpcGxlXG4gKiBAcGFyYW0geyp9IHByb3BWYWx1ZSBBIHN0cmluZ2FibGUgKHdpdGggYG11bHRpcGxlYCwgYSBsaXN0IG9mIHN0cmluZ2FibGVzKS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHVwZGF0ZU9wdGlvbnMoaW5zdCwgbXVsdGlwbGUsIHByb3BWYWx1ZSkge1xuICB2YXIgc2VsZWN0ZWRWYWx1ZSwgaTtcbiAgdmFyIG9wdGlvbnMgPSBSZWFjdE1vdW50LmdldE5vZGUoaW5zdC5fcm9vdE5vZGVJRCkub3B0aW9ucztcblxuICBpZiAobXVsdGlwbGUpIHtcbiAgICBzZWxlY3RlZFZhbHVlID0ge307XG4gICAgZm9yIChpID0gMDsgaSA8IHByb3BWYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgc2VsZWN0ZWRWYWx1ZVsnJyArIHByb3BWYWx1ZVtpXV0gPSB0cnVlO1xuICAgIH1cbiAgICBmb3IgKGkgPSAwOyBpIDwgb3B0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHNlbGVjdGVkID0gc2VsZWN0ZWRWYWx1ZS5oYXNPd25Qcm9wZXJ0eShvcHRpb25zW2ldLnZhbHVlKTtcbiAgICAgIGlmIChvcHRpb25zW2ldLnNlbGVjdGVkICE9PSBzZWxlY3RlZCkge1xuICAgICAgICBvcHRpb25zW2ldLnNlbGVjdGVkID0gc2VsZWN0ZWQ7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIERvIG5vdCBzZXQgYHNlbGVjdC52YWx1ZWAgYXMgZXhhY3QgYmVoYXZpb3IgaXNuJ3QgY29uc2lzdGVudCBhY3Jvc3MgYWxsXG4gICAgLy8gYnJvd3NlcnMgZm9yIGFsbCBjYXNlcy5cbiAgICBzZWxlY3RlZFZhbHVlID0gJycgKyBwcm9wVmFsdWU7XG4gICAgZm9yIChpID0gMDsgaSA8IG9wdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChvcHRpb25zW2ldLnZhbHVlID09PSBzZWxlY3RlZFZhbHVlKSB7XG4gICAgICAgIG9wdGlvbnNbaV0uc2VsZWN0ZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmxlbmd0aCkge1xuICAgICAgb3B0aW9uc1swXS5zZWxlY3RlZCA9IHRydWU7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyBhIDxzZWxlY3Q+IG5hdGl2ZSBjb21wb25lbnQgdGhhdCBhbGxvd3Mgb3B0aW9uYWxseSBzZXR0aW5nIHRoZVxuICogcHJvcHMgYHZhbHVlYCBhbmQgYGRlZmF1bHRWYWx1ZWAuIElmIGBtdWx0aXBsZWAgaXMgZmFsc2UsIHRoZSBwcm9wIG11c3QgYmUgYVxuICogc3RyaW5nYWJsZS4gSWYgYG11bHRpcGxlYCBpcyB0cnVlLCB0aGUgcHJvcCBtdXN0IGJlIGFuIGFycmF5IG9mIHN0cmluZ2FibGVzLlxuICpcbiAqIElmIGB2YWx1ZWAgaXMgbm90IHN1cHBsaWVkIChvciBudWxsL3VuZGVmaW5lZCksIHVzZXIgYWN0aW9ucyB0aGF0IGNoYW5nZSB0aGVcbiAqIHNlbGVjdGVkIG9wdGlvbiB3aWxsIHRyaWdnZXIgdXBkYXRlcyB0byB0aGUgcmVuZGVyZWQgb3B0aW9ucy5cbiAqXG4gKiBJZiBpdCBpcyBzdXBwbGllZCAoYW5kIG5vdCBudWxsL3VuZGVmaW5lZCksIHRoZSByZW5kZXJlZCBvcHRpb25zIHdpbGwgbm90XG4gKiB1cGRhdGUgaW4gcmVzcG9uc2UgdG8gdXNlciBhY3Rpb25zLiBJbnN0ZWFkLCB0aGUgYHZhbHVlYCBwcm9wIG11c3QgY2hhbmdlIGluXG4gKiBvcmRlciBmb3IgdGhlIHJlbmRlcmVkIG9wdGlvbnMgdG8gdXBkYXRlLlxuICpcbiAqIElmIGBkZWZhdWx0VmFsdWVgIGlzIHByb3ZpZGVkLCBhbnkgb3B0aW9ucyB3aXRoIHRoZSBzdXBwbGllZCB2YWx1ZXMgd2lsbCBiZVxuICogc2VsZWN0ZWQuXG4gKi9cbnZhciBSZWFjdERPTVNlbGVjdCA9IHtcbiAgdmFsdWVDb250ZXh0S2V5OiB2YWx1ZUNvbnRleHRLZXksXG5cbiAgZ2V0TmF0aXZlUHJvcHM6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuICAgIHJldHVybiBhc3NpZ24oe30sIHByb3BzLCB7XG4gICAgICBvbkNoYW5nZTogaW5zdC5fd3JhcHBlclN0YXRlLm9uQ2hhbmdlLFxuICAgICAgdmFsdWU6IHVuZGVmaW5lZFxuICAgIH0pO1xuICB9LFxuXG4gIG1vdW50V3JhcHBlcjogZnVuY3Rpb24gKGluc3QsIHByb3BzKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGNoZWNrU2VsZWN0UHJvcFR5cGVzKGluc3QsIHByb3BzKTtcbiAgICB9XG5cbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcbiAgICBpbnN0Ll93cmFwcGVyU3RhdGUgPSB7XG4gICAgICBwZW5kaW5nVXBkYXRlOiBmYWxzZSxcbiAgICAgIGluaXRpYWxWYWx1ZTogdmFsdWUgIT0gbnVsbCA/IHZhbHVlIDogcHJvcHMuZGVmYXVsdFZhbHVlLFxuICAgICAgb25DaGFuZ2U6IF9oYW5kbGVDaGFuZ2UuYmluZChpbnN0KSxcbiAgICAgIHdhc011bHRpcGxlOiBCb29sZWFuKHByb3BzLm11bHRpcGxlKVxuICAgIH07XG4gIH0sXG5cbiAgcHJvY2Vzc0NoaWxkQ29udGV4dDogZnVuY3Rpb24gKGluc3QsIHByb3BzLCBjb250ZXh0KSB7XG4gICAgLy8gUGFzcyBkb3duIGluaXRpYWwgdmFsdWUgc28gaW5pdGlhbCBnZW5lcmF0ZWQgbWFya3VwIGhhcyBjb3JyZWN0XG4gICAgLy8gYHNlbGVjdGVkYCBhdHRyaWJ1dGVzXG4gICAgdmFyIGNoaWxkQ29udGV4dCA9IGFzc2lnbih7fSwgY29udGV4dCk7XG4gICAgY2hpbGRDb250ZXh0W3ZhbHVlQ29udGV4dEtleV0gPSBpbnN0Ll93cmFwcGVyU3RhdGUuaW5pdGlhbFZhbHVlO1xuICAgIHJldHVybiBjaGlsZENvbnRleHQ7XG4gIH0sXG5cbiAgcG9zdFVwZGF0ZVdyYXBwZXI6IGZ1bmN0aW9uIChpbnN0KSB7XG4gICAgdmFyIHByb3BzID0gaW5zdC5fY3VycmVudEVsZW1lbnQucHJvcHM7XG5cbiAgICAvLyBBZnRlciB0aGUgaW5pdGlhbCBtb3VudCwgd2UgY29udHJvbCBzZWxlY3RlZC1uZXNzIG1hbnVhbGx5IHNvIGRvbid0IHBhc3NcbiAgICAvLyB0aGUgY29udGV4dCB2YWx1ZSBkb3duXG4gICAgaW5zdC5fd3JhcHBlclN0YXRlLmluaXRpYWxWYWx1ZSA9IHVuZGVmaW5lZDtcblxuICAgIHZhciB3YXNNdWx0aXBsZSA9IGluc3QuX3dyYXBwZXJTdGF0ZS53YXNNdWx0aXBsZTtcbiAgICBpbnN0Ll93cmFwcGVyU3RhdGUud2FzTXVsdGlwbGUgPSBCb29sZWFuKHByb3BzLm11bHRpcGxlKTtcblxuICAgIHZhciB2YWx1ZSA9IExpbmtlZFZhbHVlVXRpbHMuZ2V0VmFsdWUocHJvcHMpO1xuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICBpbnN0Ll93cmFwcGVyU3RhdGUucGVuZGluZ1VwZGF0ZSA9IGZhbHNlO1xuICAgICAgdXBkYXRlT3B0aW9ucyhpbnN0LCBCb29sZWFuKHByb3BzLm11bHRpcGxlKSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAod2FzTXVsdGlwbGUgIT09IEJvb2xlYW4ocHJvcHMubXVsdGlwbGUpKSB7XG4gICAgICAvLyBGb3Igc2ltcGxpY2l0eSwgcmVhcHBseSBgZGVmYXVsdFZhbHVlYCBpZiBgbXVsdGlwbGVgIGlzIHRvZ2dsZWQuXG4gICAgICBpZiAocHJvcHMuZGVmYXVsdFZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgdXBkYXRlT3B0aW9ucyhpbnN0LCBCb29sZWFuKHByb3BzLm11bHRpcGxlKSwgcHJvcHMuZGVmYXVsdFZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJldmVydCB0aGUgc2VsZWN0IGJhY2sgdG8gaXRzIGRlZmF1bHQgdW5zZWxlY3RlZCBzdGF0ZS5cbiAgICAgICAgdXBkYXRlT3B0aW9ucyhpbnN0LCBCb29sZWFuKHByb3BzLm11bHRpcGxlKSwgcHJvcHMubXVsdGlwbGUgPyBbXSA6ICcnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbmZ1bmN0aW9uIF9oYW5kbGVDaGFuZ2UoZXZlbnQpIHtcbiAgdmFyIHByb3BzID0gdGhpcy5fY3VycmVudEVsZW1lbnQucHJvcHM7XG4gIHZhciByZXR1cm5WYWx1ZSA9IExpbmtlZFZhbHVlVXRpbHMuZXhlY3V0ZU9uQ2hhbmdlKHByb3BzLCBldmVudCk7XG5cbiAgdGhpcy5fd3JhcHBlclN0YXRlLnBlbmRpbmdVcGRhdGUgPSB0cnVlO1xuICBSZWFjdFVwZGF0ZXMuYXNhcCh1cGRhdGVPcHRpb25zSWZQZW5kaW5nVXBkYXRlQW5kTW91bnRlZCwgdGhpcyk7XG4gIHJldHVybiByZXR1cm5WYWx1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTVNlbGVjdDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01TZWxlY3Rpb25cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG5cbnZhciBnZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0ID0gcmVxdWlyZSgnLi9nZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0Jyk7XG52YXIgZ2V0VGV4dENvbnRlbnRBY2Nlc3NvciA9IHJlcXVpcmUoJy4vZ2V0VGV4dENvbnRlbnRBY2Nlc3NvcicpO1xuXG4vKipcbiAqIFdoaWxlIGBpc0NvbGxhcHNlZGAgaXMgYXZhaWxhYmxlIG9uIHRoZSBTZWxlY3Rpb24gb2JqZWN0IGFuZCBgY29sbGFwc2VkYFxuICogaXMgYXZhaWxhYmxlIG9uIHRoZSBSYW5nZSBvYmplY3QsIElFMTEgc29tZXRpbWVzIGdldHMgdGhlbSB3cm9uZy5cbiAqIElmIHRoZSBhbmNob3IvZm9jdXMgbm9kZXMgYW5kIG9mZnNldHMgYXJlIHRoZSBzYW1lLCB0aGUgcmFuZ2UgaXMgY29sbGFwc2VkLlxuICovXG5mdW5jdGlvbiBpc0NvbGxhcHNlZChhbmNob3JOb2RlLCBhbmNob3JPZmZzZXQsIGZvY3VzTm9kZSwgZm9jdXNPZmZzZXQpIHtcbiAgcmV0dXJuIGFuY2hvck5vZGUgPT09IGZvY3VzTm9kZSAmJiBhbmNob3JPZmZzZXQgPT09IGZvY3VzT2Zmc2V0O1xufVxuXG4vKipcbiAqIEdldCB0aGUgYXBwcm9wcmlhdGUgYW5jaG9yIGFuZCBmb2N1cyBub2RlL29mZnNldCBwYWlycyBmb3IgSUUuXG4gKlxuICogVGhlIGNhdGNoIGhlcmUgaXMgdGhhdCBJRSdzIHNlbGVjdGlvbiBBUEkgZG9lc24ndCBwcm92aWRlIGluZm9ybWF0aW9uXG4gKiBhYm91dCB3aGV0aGVyIHRoZSBzZWxlY3Rpb24gaXMgZm9yd2FyZCBvciBiYWNrd2FyZCwgc28gd2UgaGF2ZSB0b1xuICogYmVoYXZlIGFzIHRob3VnaCBpdCdzIGFsd2F5cyBmb3J3YXJkLlxuICpcbiAqIElFIHRleHQgZGlmZmVycyBmcm9tIG1vZGVybiBzZWxlY3Rpb24gaW4gdGhhdCBpdCBiZWhhdmVzIGFzIHRob3VnaFxuICogYmxvY2sgZWxlbWVudHMgZW5kIHdpdGggYSBuZXcgbGluZS4gVGhpcyBtZWFucyBjaGFyYWN0ZXIgb2Zmc2V0cyB3aWxsXG4gKiBkaWZmZXIgYmV0d2VlbiB0aGUgdHdvIEFQSXMuXG4gKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlXG4gKiBAcmV0dXJuIHtvYmplY3R9XG4gKi9cbmZ1bmN0aW9uIGdldElFT2Zmc2V0cyhub2RlKSB7XG4gIHZhciBzZWxlY3Rpb24gPSBkb2N1bWVudC5zZWxlY3Rpb247XG4gIHZhciBzZWxlY3RlZFJhbmdlID0gc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7XG4gIHZhciBzZWxlY3RlZExlbmd0aCA9IHNlbGVjdGVkUmFuZ2UudGV4dC5sZW5ndGg7XG5cbiAgLy8gRHVwbGljYXRlIHNlbGVjdGlvbiBzbyB3ZSBjYW4gbW92ZSByYW5nZSB3aXRob3V0IGJyZWFraW5nIHVzZXIgc2VsZWN0aW9uLlxuICB2YXIgZnJvbVN0YXJ0ID0gc2VsZWN0ZWRSYW5nZS5kdXBsaWNhdGUoKTtcbiAgZnJvbVN0YXJ0Lm1vdmVUb0VsZW1lbnRUZXh0KG5vZGUpO1xuICBmcm9tU3RhcnQuc2V0RW5kUG9pbnQoJ0VuZFRvU3RhcnQnLCBzZWxlY3RlZFJhbmdlKTtcblxuICB2YXIgc3RhcnRPZmZzZXQgPSBmcm9tU3RhcnQudGV4dC5sZW5ndGg7XG4gIHZhciBlbmRPZmZzZXQgPSBzdGFydE9mZnNldCArIHNlbGVjdGVkTGVuZ3RoO1xuXG4gIHJldHVybiB7XG4gICAgc3RhcnQ6IHN0YXJ0T2Zmc2V0LFxuICAgIGVuZDogZW5kT2Zmc2V0XG4gIH07XG59XG5cbi8qKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlXG4gKiBAcmV0dXJuIHs/b2JqZWN0fVxuICovXG5mdW5jdGlvbiBnZXRNb2Rlcm5PZmZzZXRzKG5vZGUpIHtcbiAgdmFyIHNlbGVjdGlvbiA9IHdpbmRvdy5nZXRTZWxlY3Rpb24gJiYgd2luZG93LmdldFNlbGVjdGlvbigpO1xuXG4gIGlmICghc2VsZWN0aW9uIHx8IHNlbGVjdGlvbi5yYW5nZUNvdW50ID09PSAwKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICB2YXIgYW5jaG9yTm9kZSA9IHNlbGVjdGlvbi5hbmNob3JOb2RlO1xuICB2YXIgYW5jaG9yT2Zmc2V0ID0gc2VsZWN0aW9uLmFuY2hvck9mZnNldDtcbiAgdmFyIGZvY3VzTm9kZSA9IHNlbGVjdGlvbi5mb2N1c05vZGU7XG4gIHZhciBmb2N1c09mZnNldCA9IHNlbGVjdGlvbi5mb2N1c09mZnNldDtcblxuICB2YXIgY3VycmVudFJhbmdlID0gc2VsZWN0aW9uLmdldFJhbmdlQXQoMCk7XG5cbiAgLy8gSW4gRmlyZWZveCwgcmFuZ2Uuc3RhcnRDb250YWluZXIgYW5kIHJhbmdlLmVuZENvbnRhaW5lciBjYW4gYmUgXCJhbm9ueW1vdXNcbiAgLy8gZGl2c1wiLCBlLmcuIHRoZSB1cC9kb3duIGJ1dHRvbnMgb24gYW4gPGlucHV0IHR5cGU9XCJudW1iZXJcIj4uIEFub255bW91c1xuICAvLyBkaXZzIGRvIG5vdCBzZWVtIHRvIGV4cG9zZSBwcm9wZXJ0aWVzLCB0cmlnZ2VyaW5nIGEgXCJQZXJtaXNzaW9uIGRlbmllZFxuICAvLyBlcnJvclwiIGlmIGFueSBvZiBpdHMgcHJvcGVydGllcyBhcmUgYWNjZXNzZWQuIFRoZSBvbmx5IHNlZW1pbmdseSBwb3NzaWJsZVxuICAvLyB3YXkgdG8gYXZvaWQgZXJyb3JpbmcgaXMgdG8gYWNjZXNzIGEgcHJvcGVydHkgdGhhdCB0eXBpY2FsbHkgd29ya3MgZm9yXG4gIC8vIG5vbi1hbm9ueW1vdXMgZGl2cyBhbmQgY2F0Y2ggYW55IGVycm9yIHRoYXQgbWF5IG90aGVyd2lzZSBhcmlzZS4gU2VlXG4gIC8vIGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTIwODQyN1xuICB0cnkge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC1leHByZXNzaW9ucyAqL1xuICAgIGN1cnJlbnRSYW5nZS5zdGFydENvbnRhaW5lci5ub2RlVHlwZTtcbiAgICBjdXJyZW50UmFuZ2UuZW5kQ29udGFpbmVyLm5vZGVUeXBlO1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tdW51c2VkLWV4cHJlc3Npb25zICovXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIElmIHRoZSBub2RlIGFuZCBvZmZzZXQgdmFsdWVzIGFyZSB0aGUgc2FtZSwgdGhlIHNlbGVjdGlvbiBpcyBjb2xsYXBzZWQuXG4gIC8vIGBTZWxlY3Rpb24uaXNDb2xsYXBzZWRgIGlzIGF2YWlsYWJsZSBuYXRpdmVseSwgYnV0IElFIHNvbWV0aW1lcyBnZXRzXG4gIC8vIHRoaXMgdmFsdWUgd3JvbmcuXG4gIHZhciBpc1NlbGVjdGlvbkNvbGxhcHNlZCA9IGlzQ29sbGFwc2VkKHNlbGVjdGlvbi5hbmNob3JOb2RlLCBzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0LCBzZWxlY3Rpb24uZm9jdXNOb2RlLCBzZWxlY3Rpb24uZm9jdXNPZmZzZXQpO1xuXG4gIHZhciByYW5nZUxlbmd0aCA9IGlzU2VsZWN0aW9uQ29sbGFwc2VkID8gMCA6IGN1cnJlbnRSYW5nZS50b1N0cmluZygpLmxlbmd0aDtcblxuICB2YXIgdGVtcFJhbmdlID0gY3VycmVudFJhbmdlLmNsb25lUmFuZ2UoKTtcbiAgdGVtcFJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhub2RlKTtcbiAgdGVtcFJhbmdlLnNldEVuZChjdXJyZW50UmFuZ2Uuc3RhcnRDb250YWluZXIsIGN1cnJlbnRSYW5nZS5zdGFydE9mZnNldCk7XG5cbiAgdmFyIGlzVGVtcFJhbmdlQ29sbGFwc2VkID0gaXNDb2xsYXBzZWQodGVtcFJhbmdlLnN0YXJ0Q29udGFpbmVyLCB0ZW1wUmFuZ2Uuc3RhcnRPZmZzZXQsIHRlbXBSYW5nZS5lbmRDb250YWluZXIsIHRlbXBSYW5nZS5lbmRPZmZzZXQpO1xuXG4gIHZhciBzdGFydCA9IGlzVGVtcFJhbmdlQ29sbGFwc2VkID8gMCA6IHRlbXBSYW5nZS50b1N0cmluZygpLmxlbmd0aDtcbiAgdmFyIGVuZCA9IHN0YXJ0ICsgcmFuZ2VMZW5ndGg7XG5cbiAgLy8gRGV0ZWN0IHdoZXRoZXIgdGhlIHNlbGVjdGlvbiBpcyBiYWNrd2FyZC5cbiAgdmFyIGRldGVjdGlvblJhbmdlID0gZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKTtcbiAgZGV0ZWN0aW9uUmFuZ2Uuc2V0U3RhcnQoYW5jaG9yTm9kZSwgYW5jaG9yT2Zmc2V0KTtcbiAgZGV0ZWN0aW9uUmFuZ2Uuc2V0RW5kKGZvY3VzTm9kZSwgZm9jdXNPZmZzZXQpO1xuICB2YXIgaXNCYWNrd2FyZCA9IGRldGVjdGlvblJhbmdlLmNvbGxhcHNlZDtcblxuICByZXR1cm4ge1xuICAgIHN0YXJ0OiBpc0JhY2t3YXJkID8gZW5kIDogc3RhcnQsXG4gICAgZW5kOiBpc0JhY2t3YXJkID8gc3RhcnQgOiBlbmRcbiAgfTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR8RE9NVGV4dE5vZGV9IG5vZGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBvZmZzZXRzXG4gKi9cbmZ1bmN0aW9uIHNldElFT2Zmc2V0cyhub2RlLCBvZmZzZXRzKSB7XG4gIHZhciByYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpLmR1cGxpY2F0ZSgpO1xuICB2YXIgc3RhcnQsIGVuZDtcblxuICBpZiAodHlwZW9mIG9mZnNldHMuZW5kID09PSAndW5kZWZpbmVkJykge1xuICAgIHN0YXJ0ID0gb2Zmc2V0cy5zdGFydDtcbiAgICBlbmQgPSBzdGFydDtcbiAgfSBlbHNlIGlmIChvZmZzZXRzLnN0YXJ0ID4gb2Zmc2V0cy5lbmQpIHtcbiAgICBzdGFydCA9IG9mZnNldHMuZW5kO1xuICAgIGVuZCA9IG9mZnNldHMuc3RhcnQ7XG4gIH0gZWxzZSB7XG4gICAgc3RhcnQgPSBvZmZzZXRzLnN0YXJ0O1xuICAgIGVuZCA9IG9mZnNldHMuZW5kO1xuICB9XG5cbiAgcmFuZ2UubW92ZVRvRWxlbWVudFRleHQobm9kZSk7XG4gIHJhbmdlLm1vdmVTdGFydCgnY2hhcmFjdGVyJywgc3RhcnQpO1xuICByYW5nZS5zZXRFbmRQb2ludCgnRW5kVG9TdGFydCcsIHJhbmdlKTtcbiAgcmFuZ2UubW92ZUVuZCgnY2hhcmFjdGVyJywgZW5kIC0gc3RhcnQpO1xuICByYW5nZS5zZWxlY3QoKTtcbn1cblxuLyoqXG4gKiBJbiBtb2Rlcm4gbm9uLUlFIGJyb3dzZXJzLCB3ZSBjYW4gc3VwcG9ydCBib3RoIGZvcndhcmQgYW5kIGJhY2t3YXJkXG4gKiBzZWxlY3Rpb25zLlxuICpcbiAqIE5vdGU6IElFMTArIHN1cHBvcnRzIHRoZSBTZWxlY3Rpb24gb2JqZWN0LCBidXQgaXQgZG9lcyBub3Qgc3VwcG9ydFxuICogdGhlIGBleHRlbmRgIG1ldGhvZCwgd2hpY2ggbWVhbnMgdGhhdCBldmVuIGluIG1vZGVybiBJRSwgaXQncyBub3QgcG9zc2libGVcbiAqIHRvIHByb2dyYW1hdGljYWxseSBjcmVhdGUgYSBiYWNrd2FyZCBzZWxlY3Rpb24uIFRodXMsIGZvciBhbGwgSUVcbiAqIHZlcnNpb25zLCB3ZSB1c2UgdGhlIG9sZCBJRSBBUEkgdG8gY3JlYXRlIG91ciBzZWxlY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtvYmplY3R9IG9mZnNldHNcbiAqL1xuZnVuY3Rpb24gc2V0TW9kZXJuT2Zmc2V0cyhub2RlLCBvZmZzZXRzKSB7XG4gIGlmICghd2luZG93LmdldFNlbGVjdGlvbikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHZhciBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gIHZhciBsZW5ndGggPSBub2RlW2dldFRleHRDb250ZW50QWNjZXNzb3IoKV0ubGVuZ3RoO1xuICB2YXIgc3RhcnQgPSBNYXRoLm1pbihvZmZzZXRzLnN0YXJ0LCBsZW5ndGgpO1xuICB2YXIgZW5kID0gdHlwZW9mIG9mZnNldHMuZW5kID09PSAndW5kZWZpbmVkJyA/IHN0YXJ0IDogTWF0aC5taW4ob2Zmc2V0cy5lbmQsIGxlbmd0aCk7XG5cbiAgLy8gSUUgMTEgdXNlcyBtb2Rlcm4gc2VsZWN0aW9uLCBidXQgZG9lc24ndCBzdXBwb3J0IHRoZSBleHRlbmQgbWV0aG9kLlxuICAvLyBGbGlwIGJhY2t3YXJkIHNlbGVjdGlvbnMsIHNvIHdlIGNhbiBzZXQgd2l0aCBhIHNpbmdsZSByYW5nZS5cbiAgaWYgKCFzZWxlY3Rpb24uZXh0ZW5kICYmIHN0YXJ0ID4gZW5kKSB7XG4gICAgdmFyIHRlbXAgPSBlbmQ7XG4gICAgZW5kID0gc3RhcnQ7XG4gICAgc3RhcnQgPSB0ZW1wO1xuICB9XG5cbiAgdmFyIHN0YXJ0TWFya2VyID0gZ2V0Tm9kZUZvckNoYXJhY3Rlck9mZnNldChub2RlLCBzdGFydCk7XG4gIHZhciBlbmRNYXJrZXIgPSBnZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0KG5vZGUsIGVuZCk7XG5cbiAgaWYgKHN0YXJ0TWFya2VyICYmIGVuZE1hcmtlcikge1xuICAgIHZhciByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgcmFuZ2Uuc2V0U3RhcnQoc3RhcnRNYXJrZXIubm9kZSwgc3RhcnRNYXJrZXIub2Zmc2V0KTtcbiAgICBzZWxlY3Rpb24ucmVtb3ZlQWxsUmFuZ2VzKCk7XG5cbiAgICBpZiAoc3RhcnQgPiBlbmQpIHtcbiAgICAgIHNlbGVjdGlvbi5hZGRSYW5nZShyYW5nZSk7XG4gICAgICBzZWxlY3Rpb24uZXh0ZW5kKGVuZE1hcmtlci5ub2RlLCBlbmRNYXJrZXIub2Zmc2V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmFuZ2Uuc2V0RW5kKGVuZE1hcmtlci5ub2RlLCBlbmRNYXJrZXIub2Zmc2V0KTtcbiAgICAgIHNlbGVjdGlvbi5hZGRSYW5nZShyYW5nZSk7XG4gICAgfVxuICB9XG59XG5cbnZhciB1c2VJRU9mZnNldHMgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gJiYgJ3NlbGVjdGlvbicgaW4gZG9jdW1lbnQgJiYgISgnZ2V0U2VsZWN0aW9uJyBpbiB3aW5kb3cpO1xuXG52YXIgUmVhY3RET01TZWxlY3Rpb24gPSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAgICovXG4gIGdldE9mZnNldHM6IHVzZUlFT2Zmc2V0cyA/IGdldElFT2Zmc2V0cyA6IGdldE1vZGVybk9mZnNldHMsXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX0gbm9kZVxuICAgKiBAcGFyYW0ge29iamVjdH0gb2Zmc2V0c1xuICAgKi9cbiAgc2V0T2Zmc2V0czogdXNlSUVPZmZzZXRzID8gc2V0SUVPZmZzZXRzIDogc2V0TW9kZXJuT2Zmc2V0c1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERPTVNlbGVjdGlvbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RET01TZXJ2ZXJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdERlZmF1bHRJbmplY3Rpb24gPSByZXF1aXJlKCcuL1JlYWN0RGVmYXVsdEluamVjdGlvbicpO1xudmFyIFJlYWN0U2VydmVyUmVuZGVyaW5nID0gcmVxdWlyZSgnLi9SZWFjdFNlcnZlclJlbmRlcmluZycpO1xudmFyIFJlYWN0VmVyc2lvbiA9IHJlcXVpcmUoJy4vUmVhY3RWZXJzaW9uJyk7XG5cblJlYWN0RGVmYXVsdEluamVjdGlvbi5pbmplY3QoKTtcblxudmFyIFJlYWN0RE9NU2VydmVyID0ge1xuICByZW5kZXJUb1N0cmluZzogUmVhY3RTZXJ2ZXJSZW5kZXJpbmcucmVuZGVyVG9TdHJpbmcsXG4gIHJlbmRlclRvU3RhdGljTWFya3VwOiBSZWFjdFNlcnZlclJlbmRlcmluZy5yZW5kZXJUb1N0YXRpY01hcmt1cCxcbiAgdmVyc2lvbjogUmVhY3RWZXJzaW9uXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NU2VydmVyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTVRleHRDb21wb25lbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRE9NQ2hpbGRyZW5PcGVyYXRpb25zID0gcmVxdWlyZSgnLi9ET01DaGlsZHJlbk9wZXJhdGlvbnMnKTtcbnZhciBET01Qcm9wZXJ0eU9wZXJhdGlvbnMgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5T3BlcmF0aW9ucycpO1xudmFyIFJlYWN0Q29tcG9uZW50QnJvd3NlckVudmlyb25tZW50ID0gcmVxdWlyZSgnLi9SZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudCcpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGVzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlciA9IHJlcXVpcmUoJy4vZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyJyk7XG52YXIgc2V0VGV4dENvbnRlbnQgPSByZXF1aXJlKCcuL3NldFRleHRDb250ZW50Jyk7XG52YXIgdmFsaWRhdGVET01OZXN0aW5nID0gcmVxdWlyZSgnLi92YWxpZGF0ZURPTU5lc3RpbmcnKTtcblxuLyoqXG4gKiBUZXh0IG5vZGVzIHZpb2xhdGUgYSBjb3VwbGUgYXNzdW1wdGlvbnMgdGhhdCBSZWFjdCBtYWtlcyBhYm91dCBjb21wb25lbnRzOlxuICpcbiAqICAtIFdoZW4gbW91bnRpbmcgdGV4dCBpbnRvIHRoZSBET00sIGFkamFjZW50IHRleHQgbm9kZXMgYXJlIG1lcmdlZC5cbiAqICAtIFRleHQgbm9kZXMgY2Fubm90IGJlIGFzc2lnbmVkIGEgUmVhY3Qgcm9vdCBJRC5cbiAqXG4gKiBUaGlzIGNvbXBvbmVudCBpcyB1c2VkIHRvIHdyYXAgc3RyaW5ncyBpbiBlbGVtZW50cyBzbyB0aGF0IHRoZXkgY2FuIHVuZGVyZ29cbiAqIHRoZSBzYW1lIHJlY29uY2lsaWF0aW9uIHRoYXQgaXMgYXBwbGllZCB0byBlbGVtZW50cy5cbiAqXG4gKiBUT0RPOiBJbnZlc3RpZ2F0ZSByZXByZXNlbnRpbmcgUmVhY3QgY29tcG9uZW50cyBpbiB0aGUgRE9NIHdpdGggdGV4dCBub2Rlcy5cbiAqXG4gKiBAY2xhc3MgUmVhY3RET01UZXh0Q29tcG9uZW50XG4gKiBAZXh0ZW5kcyBSZWFjdENvbXBvbmVudFxuICogQGludGVybmFsXG4gKi9cbnZhciBSZWFjdERPTVRleHRDb21wb25lbnQgPSBmdW5jdGlvbiAocHJvcHMpIHtcbiAgLy8gVGhpcyBjb25zdHJ1Y3RvciBhbmQgaXRzIGFyZ3VtZW50IGlzIGN1cnJlbnRseSB1c2VkIGJ5IG1vY2tzLlxufTtcblxuYXNzaWduKFJlYWN0RE9NVGV4dENvbXBvbmVudC5wcm90b3R5cGUsIHtcblxuICAvKipcbiAgICogQHBhcmFtIHtSZWFjdFRleHR9IHRleHRcbiAgICogQGludGVybmFsXG4gICAqL1xuICBjb25zdHJ1Y3Q6IGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgLy8gVE9ETzogVGhpcyBpcyByZWFsbHkgYSBSZWFjdFRleHQgKFJlYWN0Tm9kZSksIG5vdCBhIFJlYWN0RWxlbWVudFxuICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gdGV4dDtcbiAgICB0aGlzLl9zdHJpbmdUZXh0ID0gJycgKyB0ZXh0O1xuXG4gICAgLy8gUHJvcGVydGllc1xuICAgIHRoaXMuX3Jvb3ROb2RlSUQgPSBudWxsO1xuICAgIHRoaXMuX21vdW50SW5kZXggPSAwO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIHRoZSBtYXJrdXAgZm9yIHRoaXMgdGV4dCBub2RlLiBUaGlzIG5vZGUgaXMgbm90IGludGVuZGVkIHRvIGhhdmVcbiAgICogYW55IGZlYXR1cmVzIGJlc2lkZXMgY29udGFpbmluZyB0ZXh0IGNvbnRlbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByb290SUQgRE9NIElEIG9mIHRoZSByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IE1hcmt1cCBmb3IgdGhpcyB0ZXh0IG5vZGUuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChyb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGlmIChjb250ZXh0W3ZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5XSkge1xuICAgICAgICB2YWxpZGF0ZURPTU5lc3RpbmcoJ3NwYW4nLCBudWxsLCBjb250ZXh0W3ZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5XSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5fcm9vdE5vZGVJRCA9IHJvb3RJRDtcbiAgICBpZiAodHJhbnNhY3Rpb24udXNlQ3JlYXRlRWxlbWVudCkge1xuICAgICAgdmFyIG93bmVyRG9jdW1lbnQgPSBjb250ZXh0W1JlYWN0TW91bnQub3duZXJEb2N1bWVudENvbnRleHRLZXldO1xuICAgICAgdmFyIGVsID0gb3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuc2V0QXR0cmlidXRlRm9ySUQoZWwsIHJvb3RJRCk7XG4gICAgICAvLyBQb3B1bGF0ZSBub2RlIGNhY2hlXG4gICAgICBSZWFjdE1vdW50LmdldElEKGVsKTtcbiAgICAgIHNldFRleHRDb250ZW50KGVsLCB0aGlzLl9zdHJpbmdUZXh0KTtcbiAgICAgIHJldHVybiBlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGVzY2FwZWRUZXh0ID0gZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyKHRoaXMuX3N0cmluZ1RleHQpO1xuXG4gICAgICBpZiAodHJhbnNhY3Rpb24ucmVuZGVyVG9TdGF0aWNNYXJrdXApIHtcbiAgICAgICAgLy8gTm9ybWFsbHkgd2UnZCB3cmFwIHRoaXMgaW4gYSBgc3BhbmAgZm9yIHRoZSByZWFzb25zIHN0YXRlZCBhYm92ZSwgYnV0XG4gICAgICAgIC8vIHNpbmNlIHRoaXMgaXMgYSBzaXR1YXRpb24gd2hlcmUgUmVhY3Qgd29uJ3QgdGFrZSBvdmVyIChzdGF0aWMgcGFnZXMpLFxuICAgICAgICAvLyB3ZSBjYW4gc2ltcGx5IHJldHVybiB0aGUgdGV4dCBhcyBpdCBpcy5cbiAgICAgICAgcmV0dXJuIGVzY2FwZWRUZXh0O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gJzxzcGFuICcgKyBET01Qcm9wZXJ0eU9wZXJhdGlvbnMuY3JlYXRlTWFya3VwRm9ySUQocm9vdElEKSArICc+JyArIGVzY2FwZWRUZXh0ICsgJzwvc3Bhbj4nO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVXBkYXRlcyB0aGlzIGNvbXBvbmVudCBieSB1cGRhdGluZyB0aGUgdGV4dCBjb250ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0VGV4dH0gbmV4dFRleHQgVGhlIG5leHQgdGV4dCBjb250ZW50XG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQGludGVybmFsXG4gICAqL1xuICByZWNlaXZlQ29tcG9uZW50OiBmdW5jdGlvbiAobmV4dFRleHQsIHRyYW5zYWN0aW9uKSB7XG4gICAgaWYgKG5leHRUZXh0ICE9PSB0aGlzLl9jdXJyZW50RWxlbWVudCkge1xuICAgICAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBuZXh0VGV4dDtcbiAgICAgIHZhciBuZXh0U3RyaW5nVGV4dCA9ICcnICsgbmV4dFRleHQ7XG4gICAgICBpZiAobmV4dFN0cmluZ1RleHQgIT09IHRoaXMuX3N0cmluZ1RleHQpIHtcbiAgICAgICAgLy8gVE9ETzogU2F2ZSB0aGlzIGFzIHBlbmRpbmcgcHJvcHMgYW5kIHVzZSBwZXJmb3JtVXBkYXRlSWZOZWNlc3NhcnlcbiAgICAgICAgLy8gYW5kL29yIHVwZGF0ZUNvbXBvbmVudCB0byBkbyB0aGUgYWN0dWFsIHVwZGF0ZSBmb3IgY29uc2lzdGVuY3kgd2l0aFxuICAgICAgICAvLyBvdGhlciBjb21wb25lbnQgdHlwZXM/XG4gICAgICAgIHRoaXMuX3N0cmluZ1RleHQgPSBuZXh0U3RyaW5nVGV4dDtcbiAgICAgICAgdmFyIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgICAgIERPTUNoaWxkcmVuT3BlcmF0aW9ucy51cGRhdGVUZXh0Q29udGVudChub2RlLCBuZXh0U3RyaW5nVGV4dCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHVubW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudC51bm1vdW50SURGcm9tRW52aXJvbm1lbnQodGhpcy5fcm9vdE5vZGVJRCk7XG4gIH1cblxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01UZXh0Q29tcG9uZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERPTVRleHRhcmVhXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgTGlua2VkVmFsdWVVdGlscyA9IHJlcXVpcmUoJy4vTGlua2VkVmFsdWVVdGlscycpO1xudmFyIFJlYWN0RE9NSURPcGVyYXRpb25zID0gcmVxdWlyZSgnLi9SZWFjdERPTUlET3BlcmF0aW9ucycpO1xudmFyIFJlYWN0VXBkYXRlcyA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVzJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG5mdW5jdGlvbiBmb3JjZVVwZGF0ZUlmTW91bnRlZCgpIHtcbiAgaWYgKHRoaXMuX3Jvb3ROb2RlSUQpIHtcbiAgICAvLyBET00gY29tcG9uZW50IGlzIHN0aWxsIG1vdW50ZWQ7IHVwZGF0ZVxuICAgIFJlYWN0RE9NVGV4dGFyZWEudXBkYXRlV3JhcHBlcih0aGlzKTtcbiAgfVxufVxuXG4vKipcbiAqIEltcGxlbWVudHMgYSA8dGV4dGFyZWE+IG5hdGl2ZSBjb21wb25lbnQgdGhhdCBhbGxvd3Mgc2V0dGluZyBgdmFsdWVgLCBhbmRcbiAqIGBkZWZhdWx0VmFsdWVgLiBUaGlzIGRpZmZlcnMgZnJvbSB0aGUgdHJhZGl0aW9uYWwgRE9NIEFQSSBiZWNhdXNlIHZhbHVlIGlzXG4gKiB1c3VhbGx5IHNldCBhcyBQQ0RBVEEgY2hpbGRyZW4uXG4gKlxuICogSWYgYHZhbHVlYCBpcyBub3Qgc3VwcGxpZWQgKG9yIG51bGwvdW5kZWZpbmVkKSwgdXNlciBhY3Rpb25zIHRoYXQgYWZmZWN0IHRoZVxuICogdmFsdWUgd2lsbCB0cmlnZ2VyIHVwZGF0ZXMgdG8gdGhlIGVsZW1lbnQuXG4gKlxuICogSWYgYHZhbHVlYCBpcyBzdXBwbGllZCAoYW5kIG5vdCBudWxsL3VuZGVmaW5lZCksIHRoZSByZW5kZXJlZCBlbGVtZW50IHdpbGxcbiAqIG5vdCB0cmlnZ2VyIHVwZGF0ZXMgdG8gdGhlIGVsZW1lbnQuIEluc3RlYWQsIHRoZSBgdmFsdWVgIHByb3AgbXVzdCBjaGFuZ2UgaW5cbiAqIG9yZGVyIGZvciB0aGUgcmVuZGVyZWQgZWxlbWVudCB0byBiZSB1cGRhdGVkLlxuICpcbiAqIFRoZSByZW5kZXJlZCBlbGVtZW50IHdpbGwgYmUgaW5pdGlhbGl6ZWQgd2l0aCBhbiBlbXB0eSB2YWx1ZSwgdGhlIHByb3BcbiAqIGBkZWZhdWx0VmFsdWVgIGlmIHNwZWNpZmllZCwgb3IgdGhlIGNoaWxkcmVuIGNvbnRlbnQgKGRlcHJlY2F0ZWQpLlxuICovXG52YXIgUmVhY3RET01UZXh0YXJlYSA9IHtcbiAgZ2V0TmF0aXZlUHJvcHM6IGZ1bmN0aW9uIChpbnN0LCBwcm9wcywgY29udGV4dCkge1xuICAgICEocHJvcHMuZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUwgPT0gbnVsbCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnYGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MYCBkb2VzIG5vdCBtYWtlIHNlbnNlIG9uIDx0ZXh0YXJlYT4uJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgLy8gQWx3YXlzIHNldCBjaGlsZHJlbiB0byB0aGUgc2FtZSB0aGluZy4gSW4gSUU5LCB0aGUgc2VsZWN0aW9uIHJhbmdlIHdpbGxcbiAgICAvLyBnZXQgcmVzZXQgaWYgYHRleHRDb250ZW50YCBpcyBtdXRhdGVkLlxuICAgIHZhciBuYXRpdmVQcm9wcyA9IGFzc2lnbih7fSwgcHJvcHMsIHtcbiAgICAgIGRlZmF1bHRWYWx1ZTogdW5kZWZpbmVkLFxuICAgICAgdmFsdWU6IHVuZGVmaW5lZCxcbiAgICAgIGNoaWxkcmVuOiBpbnN0Ll93cmFwcGVyU3RhdGUuaW5pdGlhbFZhbHVlLFxuICAgICAgb25DaGFuZ2U6IGluc3QuX3dyYXBwZXJTdGF0ZS5vbkNoYW5nZVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG5hdGl2ZVByb3BzO1xuICB9LFxuXG4gIG1vdW50V3JhcHBlcjogZnVuY3Rpb24gKGluc3QsIHByb3BzKSB7XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIExpbmtlZFZhbHVlVXRpbHMuY2hlY2tQcm9wVHlwZXMoJ3RleHRhcmVhJywgcHJvcHMsIGluc3QuX2N1cnJlbnRFbGVtZW50Ll9vd25lcik7XG4gICAgfVxuXG4gICAgdmFyIGRlZmF1bHRWYWx1ZSA9IHByb3BzLmRlZmF1bHRWYWx1ZTtcbiAgICAvLyBUT0RPICh5dW5nc3RlcnMpOiBSZW1vdmUgc3VwcG9ydCBmb3IgY2hpbGRyZW4gY29udGVudCBpbiA8dGV4dGFyZWE+LlxuICAgIHZhciBjaGlsZHJlbiA9IHByb3BzLmNoaWxkcmVuO1xuICAgIGlmIChjaGlsZHJlbiAhPSBudWxsKSB7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1VzZSB0aGUgYGRlZmF1bHRWYWx1ZWAgb3IgYHZhbHVlYCBwcm9wcyBpbnN0ZWFkIG9mIHNldHRpbmcgJyArICdjaGlsZHJlbiBvbiA8dGV4dGFyZWE+LicpIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgICAgIShkZWZhdWx0VmFsdWUgPT0gbnVsbCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnSWYgeW91IHN1cHBseSBgZGVmYXVsdFZhbHVlYCBvbiBhIDx0ZXh0YXJlYT4sIGRvIG5vdCBwYXNzIGNoaWxkcmVuLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KGNoaWxkcmVuKSkge1xuICAgICAgICAhKGNoaWxkcmVuLmxlbmd0aCA8PSAxKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICc8dGV4dGFyZWE+IGNhbiBvbmx5IGhhdmUgYXQgbW9zdCBvbmUgY2hpbGQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgICBjaGlsZHJlbiA9IGNoaWxkcmVuWzBdO1xuICAgICAgfVxuXG4gICAgICBkZWZhdWx0VmFsdWUgPSAnJyArIGNoaWxkcmVuO1xuICAgIH1cbiAgICBpZiAoZGVmYXVsdFZhbHVlID09IG51bGwpIHtcbiAgICAgIGRlZmF1bHRWYWx1ZSA9ICcnO1xuICAgIH1cbiAgICB2YXIgdmFsdWUgPSBMaW5rZWRWYWx1ZVV0aWxzLmdldFZhbHVlKHByb3BzKTtcblxuICAgIGluc3QuX3dyYXBwZXJTdGF0ZSA9IHtcbiAgICAgIC8vIFdlIHNhdmUgdGhlIGluaXRpYWwgdmFsdWUgc28gdGhhdCBgUmVhY3RET01Db21wb25lbnRgIGRvZXNuJ3QgdXBkYXRlXG4gICAgICAvLyBgdGV4dENvbnRlbnRgICh1bm5lY2Vzc2FyeSBzaW5jZSB3ZSB1cGRhdGUgdmFsdWUpLlxuICAgICAgLy8gVGhlIGluaXRpYWwgdmFsdWUgY2FuIGJlIGEgYm9vbGVhbiBvciBvYmplY3Qgc28gdGhhdCdzIHdoeSBpdCdzXG4gICAgICAvLyBmb3JjZWQgdG8gYmUgYSBzdHJpbmcuXG4gICAgICBpbml0aWFsVmFsdWU6ICcnICsgKHZhbHVlICE9IG51bGwgPyB2YWx1ZSA6IGRlZmF1bHRWYWx1ZSksXG4gICAgICBvbkNoYW5nZTogX2hhbmRsZUNoYW5nZS5iaW5kKGluc3QpXG4gICAgfTtcbiAgfSxcblxuICB1cGRhdGVXcmFwcGVyOiBmdW5jdGlvbiAoaW5zdCkge1xuICAgIHZhciBwcm9wcyA9IGluc3QuX2N1cnJlbnRFbGVtZW50LnByb3BzO1xuICAgIHZhciB2YWx1ZSA9IExpbmtlZFZhbHVlVXRpbHMuZ2V0VmFsdWUocHJvcHMpO1xuICAgIGlmICh2YWx1ZSAhPSBudWxsKSB7XG4gICAgICAvLyBDYXN0IGB2YWx1ZWAgdG8gYSBzdHJpbmcgdG8gZW5zdXJlIHRoZSB2YWx1ZSBpcyBzZXQgY29ycmVjdGx5LiBXaGlsZVxuICAgICAgLy8gYnJvd3NlcnMgdHlwaWNhbGx5IGRvIHRoaXMgYXMgbmVjZXNzYXJ5LCBqc2RvbSBkb2Vzbid0LlxuICAgICAgUmVhY3RET01JRE9wZXJhdGlvbnMudXBkYXRlUHJvcGVydHlCeUlEKGluc3QuX3Jvb3ROb2RlSUQsICd2YWx1ZScsICcnICsgdmFsdWUpO1xuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gX2hhbmRsZUNoYW5nZShldmVudCkge1xuICB2YXIgcHJvcHMgPSB0aGlzLl9jdXJyZW50RWxlbWVudC5wcm9wcztcbiAgdmFyIHJldHVyblZhbHVlID0gTGlua2VkVmFsdWVVdGlscy5leGVjdXRlT25DaGFuZ2UocHJvcHMsIGV2ZW50KTtcbiAgUmVhY3RVcGRhdGVzLmFzYXAoZm9yY2VVcGRhdGVJZk1vdW50ZWQsIHRoaXMpO1xuICByZXR1cm4gcmV0dXJuVmFsdWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RET01UZXh0YXJlYTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0VXBkYXRlcyA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVzJyk7XG52YXIgVHJhbnNhY3Rpb24gPSByZXF1aXJlKCcuL1RyYW5zYWN0aW9uJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlGdW5jdGlvbicpO1xuXG52YXIgUkVTRVRfQkFUQ0hFRF9VUERBVEVTID0ge1xuICBpbml0aWFsaXplOiBlbXB0eUZ1bmN0aW9uLFxuICBjbG9zZTogZnVuY3Rpb24gKCkge1xuICAgIFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kuaXNCYXRjaGluZ1VwZGF0ZXMgPSBmYWxzZTtcbiAgfVxufTtcblxudmFyIEZMVVNIX0JBVENIRURfVVBEQVRFUyA9IHtcbiAgaW5pdGlhbGl6ZTogZW1wdHlGdW5jdGlvbixcbiAgY2xvc2U6IFJlYWN0VXBkYXRlcy5mbHVzaEJhdGNoZWRVcGRhdGVzLmJpbmQoUmVhY3RVcGRhdGVzKVxufTtcblxudmFyIFRSQU5TQUNUSU9OX1dSQVBQRVJTID0gW0ZMVVNIX0JBVENIRURfVVBEQVRFUywgUkVTRVRfQkFUQ0hFRF9VUERBVEVTXTtcblxuZnVuY3Rpb24gUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneVRyYW5zYWN0aW9uKCkge1xuICB0aGlzLnJlaW5pdGlhbGl6ZVRyYW5zYWN0aW9uKCk7XG59XG5cbmFzc2lnbihSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5VHJhbnNhY3Rpb24ucHJvdG90eXBlLCBUcmFuc2FjdGlvbi5NaXhpbiwge1xuICBnZXRUcmFuc2FjdGlvbldyYXBwZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFRSQU5TQUNUSU9OX1dSQVBQRVJTO1xuICB9XG59KTtcblxudmFyIHRyYW5zYWN0aW9uID0gbmV3IFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3lUcmFuc2FjdGlvbigpO1xuXG52YXIgUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneSA9IHtcbiAgaXNCYXRjaGluZ1VwZGF0ZXM6IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBDYWxsIHRoZSBwcm92aWRlZCBmdW5jdGlvbiBpbiBhIGNvbnRleHQgd2l0aGluIHdoaWNoIGNhbGxzIHRvIGBzZXRTdGF0ZWBcbiAgICogYW5kIGZyaWVuZHMgYXJlIGJhdGNoZWQgc3VjaCB0aGF0IGNvbXBvbmVudHMgYXJlbid0IHVwZGF0ZWQgdW5uZWNlc3NhcmlseS5cbiAgICovXG4gIGJhdGNoZWRVcGRhdGVzOiBmdW5jdGlvbiAoY2FsbGJhY2ssIGEsIGIsIGMsIGQsIGUpIHtcbiAgICB2YXIgYWxyZWFkeUJhdGNoaW5nVXBkYXRlcyA9IFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kuaXNCYXRjaGluZ1VwZGF0ZXM7XG5cbiAgICBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5LmlzQmF0Y2hpbmdVcGRhdGVzID0gdHJ1ZTtcblxuICAgIC8vIFRoZSBjb2RlIGlzIHdyaXR0ZW4gdGhpcyB3YXkgdG8gYXZvaWQgZXh0cmEgYWxsb2NhdGlvbnNcbiAgICBpZiAoYWxyZWFkeUJhdGNoaW5nVXBkYXRlcykge1xuICAgICAgY2FsbGJhY2soYSwgYiwgYywgZCwgZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyYW5zYWN0aW9uLnBlcmZvcm0oY2FsbGJhY2ssIG51bGwsIGEsIGIsIGMsIGQsIGUpO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdERlZmF1bHRJbmplY3Rpb25cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBCZWZvcmVJbnB1dEV2ZW50UGx1Z2luID0gcmVxdWlyZSgnLi9CZWZvcmVJbnB1dEV2ZW50UGx1Z2luJyk7XG52YXIgQ2hhbmdlRXZlbnRQbHVnaW4gPSByZXF1aXJlKCcuL0NoYW5nZUV2ZW50UGx1Z2luJyk7XG52YXIgQ2xpZW50UmVhY3RSb290SW5kZXggPSByZXF1aXJlKCcuL0NsaWVudFJlYWN0Um9vdEluZGV4Jyk7XG52YXIgRGVmYXVsdEV2ZW50UGx1Z2luT3JkZXIgPSByZXF1aXJlKCcuL0RlZmF1bHRFdmVudFBsdWdpbk9yZGVyJyk7XG52YXIgRW50ZXJMZWF2ZUV2ZW50UGx1Z2luID0gcmVxdWlyZSgnLi9FbnRlckxlYXZlRXZlbnRQbHVnaW4nKTtcbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG52YXIgSFRNTERPTVByb3BlcnR5Q29uZmlnID0gcmVxdWlyZSgnLi9IVE1MRE9NUHJvcGVydHlDb25maWcnKTtcbnZhciBSZWFjdEJyb3dzZXJDb21wb25lbnRNaXhpbiA9IHJlcXVpcmUoJy4vUmVhY3RCcm93c2VyQ29tcG9uZW50TWl4aW4nKTtcbnZhciBSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vUmVhY3RDb21wb25lbnRCcm93c2VyRW52aXJvbm1lbnQnKTtcbnZhciBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5ID0gcmVxdWlyZSgnLi9SZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5Jyk7XG52YXIgUmVhY3RET01Db21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0RE9NQ29tcG9uZW50Jyk7XG52YXIgUmVhY3RET01UZXh0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9SZWFjdERPTVRleHRDb21wb25lbnQnKTtcbnZhciBSZWFjdEV2ZW50TGlzdGVuZXIgPSByZXF1aXJlKCcuL1JlYWN0RXZlbnRMaXN0ZW5lcicpO1xudmFyIFJlYWN0SW5qZWN0aW9uID0gcmVxdWlyZSgnLi9SZWFjdEluamVjdGlvbicpO1xudmFyIFJlYWN0SW5zdGFuY2VIYW5kbGVzID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlSGFuZGxlcycpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcbnZhciBSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uJyk7XG52YXIgU2VsZWN0RXZlbnRQbHVnaW4gPSByZXF1aXJlKCcuL1NlbGVjdEV2ZW50UGx1Z2luJyk7XG52YXIgU2VydmVyUmVhY3RSb290SW5kZXggPSByZXF1aXJlKCcuL1NlcnZlclJlYWN0Um9vdEluZGV4Jyk7XG52YXIgU2ltcGxlRXZlbnRQbHVnaW4gPSByZXF1aXJlKCcuL1NpbXBsZUV2ZW50UGx1Z2luJyk7XG52YXIgU1ZHRE9NUHJvcGVydHlDb25maWcgPSByZXF1aXJlKCcuL1NWR0RPTVByb3BlcnR5Q29uZmlnJyk7XG5cbnZhciBhbHJlYWR5SW5qZWN0ZWQgPSBmYWxzZTtcblxuZnVuY3Rpb24gaW5qZWN0KCkge1xuICBpZiAoYWxyZWFkeUluamVjdGVkKSB7XG4gICAgLy8gVE9ETzogVGhpcyBpcyBjdXJyZW50bHkgdHJ1ZSBiZWNhdXNlIHRoZXNlIGluamVjdGlvbnMgYXJlIHNoYXJlZCBiZXR3ZWVuXG4gICAgLy8gdGhlIGNsaWVudCBhbmQgdGhlIHNlcnZlciBwYWNrYWdlLiBUaGV5IHNob3VsZCBiZSBidWlsdCBpbmRlcGVuZGVudGx5XG4gICAgLy8gYW5kIG5vdCBzaGFyZSBhbnkgaW5qZWN0aW9uIHN0YXRlLiBUaGVuIHRoaXMgcHJvYmxlbSB3aWxsIGJlIHNvbHZlZC5cbiAgICByZXR1cm47XG4gIH1cbiAgYWxyZWFkeUluamVjdGVkID0gdHJ1ZTtcblxuICBSZWFjdEluamVjdGlvbi5FdmVudEVtaXR0ZXIuaW5qZWN0UmVhY3RFdmVudExpc3RlbmVyKFJlYWN0RXZlbnRMaXN0ZW5lcik7XG5cbiAgLyoqXG4gICAqIEluamVjdCBtb2R1bGVzIGZvciByZXNvbHZpbmcgRE9NIGhpZXJhcmNoeSBhbmQgcGx1Z2luIG9yZGVyaW5nLlxuICAgKi9cbiAgUmVhY3RJbmplY3Rpb24uRXZlbnRQbHVnaW5IdWIuaW5qZWN0RXZlbnRQbHVnaW5PcmRlcihEZWZhdWx0RXZlbnRQbHVnaW5PcmRlcik7XG4gIFJlYWN0SW5qZWN0aW9uLkV2ZW50UGx1Z2luSHViLmluamVjdEluc3RhbmNlSGFuZGxlKFJlYWN0SW5zdGFuY2VIYW5kbGVzKTtcbiAgUmVhY3RJbmplY3Rpb24uRXZlbnRQbHVnaW5IdWIuaW5qZWN0TW91bnQoUmVhY3RNb3VudCk7XG5cbiAgLyoqXG4gICAqIFNvbWUgaW1wb3J0YW50IGV2ZW50IHBsdWdpbnMgaW5jbHVkZWQgYnkgZGVmYXVsdCAod2l0aG91dCBoYXZpbmcgdG8gcmVxdWlyZVxuICAgKiB0aGVtKS5cbiAgICovXG4gIFJlYWN0SW5qZWN0aW9uLkV2ZW50UGx1Z2luSHViLmluamVjdEV2ZW50UGx1Z2luc0J5TmFtZSh7XG4gICAgU2ltcGxlRXZlbnRQbHVnaW46IFNpbXBsZUV2ZW50UGx1Z2luLFxuICAgIEVudGVyTGVhdmVFdmVudFBsdWdpbjogRW50ZXJMZWF2ZUV2ZW50UGx1Z2luLFxuICAgIENoYW5nZUV2ZW50UGx1Z2luOiBDaGFuZ2VFdmVudFBsdWdpbixcbiAgICBTZWxlY3RFdmVudFBsdWdpbjogU2VsZWN0RXZlbnRQbHVnaW4sXG4gICAgQmVmb3JlSW5wdXRFdmVudFBsdWdpbjogQmVmb3JlSW5wdXRFdmVudFBsdWdpblxuICB9KTtcblxuICBSZWFjdEluamVjdGlvbi5OYXRpdmVDb21wb25lbnQuaW5qZWN0R2VuZXJpY0NvbXBvbmVudENsYXNzKFJlYWN0RE9NQ29tcG9uZW50KTtcblxuICBSZWFjdEluamVjdGlvbi5OYXRpdmVDb21wb25lbnQuaW5qZWN0VGV4dENvbXBvbmVudENsYXNzKFJlYWN0RE9NVGV4dENvbXBvbmVudCk7XG5cbiAgUmVhY3RJbmplY3Rpb24uQ2xhc3MuaW5qZWN0TWl4aW4oUmVhY3RCcm93c2VyQ29tcG9uZW50TWl4aW4pO1xuXG4gIFJlYWN0SW5qZWN0aW9uLkRPTVByb3BlcnR5LmluamVjdERPTVByb3BlcnR5Q29uZmlnKEhUTUxET01Qcm9wZXJ0eUNvbmZpZyk7XG4gIFJlYWN0SW5qZWN0aW9uLkRPTVByb3BlcnR5LmluamVjdERPTVByb3BlcnR5Q29uZmlnKFNWR0RPTVByb3BlcnR5Q29uZmlnKTtcblxuICBSZWFjdEluamVjdGlvbi5FbXB0eUNvbXBvbmVudC5pbmplY3RFbXB0eUNvbXBvbmVudCgnbm9zY3JpcHQnKTtcblxuICBSZWFjdEluamVjdGlvbi5VcGRhdGVzLmluamVjdFJlY29uY2lsZVRyYW5zYWN0aW9uKFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24pO1xuICBSZWFjdEluamVjdGlvbi5VcGRhdGVzLmluamVjdEJhdGNoaW5nU3RyYXRlZ3koUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneSk7XG5cbiAgUmVhY3RJbmplY3Rpb24uUm9vdEluZGV4LmluamVjdENyZWF0ZVJlYWN0Um9vdEluZGV4KEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSA/IENsaWVudFJlYWN0Um9vdEluZGV4LmNyZWF0ZVJlYWN0Um9vdEluZGV4IDogU2VydmVyUmVhY3RSb290SW5kZXguY3JlYXRlUmVhY3RSb290SW5kZXgpO1xuXG4gIFJlYWN0SW5qZWN0aW9uLkNvbXBvbmVudC5pbmplY3RFbnZpcm9ubWVudChSZWFjdENvbXBvbmVudEJyb3dzZXJFbnZpcm9ubWVudCk7XG5cbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB2YXIgdXJsID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NICYmIHdpbmRvdy5sb2NhdGlvbi5ocmVmIHx8ICcnO1xuICAgIGlmICgvWz8mXXJlYWN0X3BlcmZcXGIvLnRlc3QodXJsKSkge1xuICAgICAgdmFyIFJlYWN0RGVmYXVsdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0RGVmYXVsdFBlcmYnKTtcbiAgICAgIFJlYWN0RGVmYXVsdFBlcmYuc3RhcnQoKTtcbiAgICB9XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGluamVjdDogaW5qZWN0XG59OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEVsZW1lbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEN1cnJlbnRPd25lciA9IHJlcXVpcmUoJy4vUmVhY3RDdXJyZW50T3duZXInKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGNhbkRlZmluZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9jYW5EZWZpbmVQcm9wZXJ0eScpO1xuXG4vLyBUaGUgU3ltYm9sIHVzZWQgdG8gdGFnIHRoZSBSZWFjdEVsZW1lbnQgdHlwZS4gSWYgdGhlcmUgaXMgbm8gbmF0aXZlIFN5bWJvbFxuLy8gbm9yIHBvbHlmaWxsLCB0aGVuIGEgcGxhaW4gbnVtYmVyIGlzIHVzZWQgZm9yIHBlcmZvcm1hbmNlLlxudmFyIFJFQUNUX0VMRU1FTlRfVFlQRSA9IHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicgJiYgU3ltYm9sWydmb3InXSAmJiBTeW1ib2xbJ2ZvciddKCdyZWFjdC5lbGVtZW50JykgfHwgMHhlYWM3O1xuXG52YXIgUkVTRVJWRURfUFJPUFMgPSB7XG4gIGtleTogdHJ1ZSxcbiAgcmVmOiB0cnVlLFxuICBfX3NlbGY6IHRydWUsXG4gIF9fc291cmNlOiB0cnVlXG59O1xuXG4vKipcbiAqIEJhc2UgY29uc3RydWN0b3IgZm9yIGFsbCBSZWFjdCBlbGVtZW50cy4gVGhpcyBpcyBvbmx5IHVzZWQgdG8gbWFrZSB0aGlzXG4gKiB3b3JrIHdpdGggYSBkeW5hbWljIGluc3RhbmNlb2YgY2hlY2suIE5vdGhpbmcgc2hvdWxkIGxpdmUgb24gdGhpcyBwcm90b3R5cGUuXG4gKlxuICogQHBhcmFtIHsqfSB0eXBlXG4gKiBAcGFyYW0geyp9IGtleVxuICogQHBhcmFtIHtzdHJpbmd8b2JqZWN0fSByZWZcbiAqIEBwYXJhbSB7Kn0gc2VsZiBBICp0ZW1wb3JhcnkqIGhlbHBlciB0byBkZXRlY3QgcGxhY2VzIHdoZXJlIGB0aGlzYCBpc1xuICogZGlmZmVyZW50IGZyb20gdGhlIGBvd25lcmAgd2hlbiBSZWFjdC5jcmVhdGVFbGVtZW50IGlzIGNhbGxlZCwgc28gdGhhdCB3ZVxuICogY2FuIHdhcm4uIFdlIHdhbnQgdG8gZ2V0IHJpZCBvZiBvd25lciBhbmQgcmVwbGFjZSBzdHJpbmcgYHJlZmBzIHdpdGggYXJyb3dcbiAqIGZ1bmN0aW9ucywgYW5kIGFzIGxvbmcgYXMgYHRoaXNgIGFuZCBvd25lciBhcmUgdGhlIHNhbWUsIHRoZXJlIHdpbGwgYmUgbm9cbiAqIGNoYW5nZSBpbiBiZWhhdmlvci5cbiAqIEBwYXJhbSB7Kn0gc291cmNlIEFuIGFubm90YXRpb24gb2JqZWN0IChhZGRlZCBieSBhIHRyYW5zcGlsZXIgb3Igb3RoZXJ3aXNlKVxuICogaW5kaWNhdGluZyBmaWxlbmFtZSwgbGluZSBudW1iZXIsIGFuZC9vciBvdGhlciBpbmZvcm1hdGlvbi5cbiAqIEBwYXJhbSB7Kn0gb3duZXJcbiAqIEBwYXJhbSB7Kn0gcHJvcHNcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgUmVhY3RFbGVtZW50ID0gZnVuY3Rpb24gKHR5cGUsIGtleSwgcmVmLCBzZWxmLCBzb3VyY2UsIG93bmVyLCBwcm9wcykge1xuICB2YXIgZWxlbWVudCA9IHtcbiAgICAvLyBUaGlzIHRhZyBhbGxvdyB1cyB0byB1bmlxdWVseSBpZGVudGlmeSB0aGlzIGFzIGEgUmVhY3QgRWxlbWVudFxuICAgICQkdHlwZW9mOiBSRUFDVF9FTEVNRU5UX1RZUEUsXG5cbiAgICAvLyBCdWlsdC1pbiBwcm9wZXJ0aWVzIHRoYXQgYmVsb25nIG9uIHRoZSBlbGVtZW50XG4gICAgdHlwZTogdHlwZSxcbiAgICBrZXk6IGtleSxcbiAgICByZWY6IHJlZixcbiAgICBwcm9wczogcHJvcHMsXG5cbiAgICAvLyBSZWNvcmQgdGhlIGNvbXBvbmVudCByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhpcyBlbGVtZW50LlxuICAgIF9vd25lcjogb3duZXJcbiAgfTtcblxuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIC8vIFRoZSB2YWxpZGF0aW9uIGZsYWcgaXMgY3VycmVudGx5IG11dGF0aXZlLiBXZSBwdXQgaXQgb25cbiAgICAvLyBhbiBleHRlcm5hbCBiYWNraW5nIHN0b3JlIHNvIHRoYXQgd2UgY2FuIGZyZWV6ZSB0aGUgd2hvbGUgb2JqZWN0LlxuICAgIC8vIFRoaXMgY2FuIGJlIHJlcGxhY2VkIHdpdGggYSBXZWFrTWFwIG9uY2UgdGhleSBhcmUgaW1wbGVtZW50ZWQgaW5cbiAgICAvLyBjb21tb25seSB1c2VkIGRldmVsb3BtZW50IGVudmlyb25tZW50cy5cbiAgICBlbGVtZW50Ll9zdG9yZSA9IHt9O1xuXG4gICAgLy8gVG8gbWFrZSBjb21wYXJpbmcgUmVhY3RFbGVtZW50cyBlYXNpZXIgZm9yIHRlc3RpbmcgcHVycG9zZXMsIHdlIG1ha2VcbiAgICAvLyB0aGUgdmFsaWRhdGlvbiBmbGFnIG5vbi1lbnVtZXJhYmxlICh3aGVyZSBwb3NzaWJsZSwgd2hpY2ggc2hvdWxkXG4gICAgLy8gaW5jbHVkZSBldmVyeSBlbnZpcm9ubWVudCB3ZSBydW4gdGVzdHMgaW4pLCBzbyB0aGUgdGVzdCBmcmFtZXdvcmtcbiAgICAvLyBpZ25vcmVzIGl0LlxuICAgIGlmIChjYW5EZWZpbmVQcm9wZXJ0eSkge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGVsZW1lbnQuX3N0b3JlLCAndmFsaWRhdGVkJywge1xuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIHZhbHVlOiBmYWxzZVxuICAgICAgfSk7XG4gICAgICAvLyBzZWxmIGFuZCBzb3VyY2UgYXJlIERFViBvbmx5IHByb3BlcnRpZXMuXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWxlbWVudCwgJ19zZWxmJywge1xuICAgICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICB2YWx1ZTogc2VsZlxuICAgICAgfSk7XG4gICAgICAvLyBUd28gZWxlbWVudHMgY3JlYXRlZCBpbiB0d28gZGlmZmVyZW50IHBsYWNlcyBzaG91bGQgYmUgY29uc2lkZXJlZFxuICAgICAgLy8gZXF1YWwgZm9yIHRlc3RpbmcgcHVycG9zZXMgYW5kIHRoZXJlZm9yZSB3ZSBoaWRlIGl0IGZyb20gZW51bWVyYXRpb24uXG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZWxlbWVudCwgJ19zb3VyY2UnLCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICAgIHZhbHVlOiBzb3VyY2VcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50Ll9zdG9yZS52YWxpZGF0ZWQgPSBmYWxzZTtcbiAgICAgIGVsZW1lbnQuX3NlbGYgPSBzZWxmO1xuICAgICAgZWxlbWVudC5fc291cmNlID0gc291cmNlO1xuICAgIH1cbiAgICBPYmplY3QuZnJlZXplKGVsZW1lbnQucHJvcHMpO1xuICAgIE9iamVjdC5mcmVlemUoZWxlbWVudCk7XG4gIH1cblxuICByZXR1cm4gZWxlbWVudDtcbn07XG5cblJlYWN0RWxlbWVudC5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24gKHR5cGUsIGNvbmZpZywgY2hpbGRyZW4pIHtcbiAgdmFyIHByb3BOYW1lO1xuXG4gIC8vIFJlc2VydmVkIG5hbWVzIGFyZSBleHRyYWN0ZWRcbiAgdmFyIHByb3BzID0ge307XG5cbiAgdmFyIGtleSA9IG51bGw7XG4gIHZhciByZWYgPSBudWxsO1xuICB2YXIgc2VsZiA9IG51bGw7XG4gIHZhciBzb3VyY2UgPSBudWxsO1xuXG4gIGlmIChjb25maWcgIT0gbnVsbCkge1xuICAgIHJlZiA9IGNvbmZpZy5yZWYgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBjb25maWcucmVmO1xuICAgIGtleSA9IGNvbmZpZy5rZXkgPT09IHVuZGVmaW5lZCA/IG51bGwgOiAnJyArIGNvbmZpZy5rZXk7XG4gICAgc2VsZiA9IGNvbmZpZy5fX3NlbGYgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBjb25maWcuX19zZWxmO1xuICAgIHNvdXJjZSA9IGNvbmZpZy5fX3NvdXJjZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IGNvbmZpZy5fX3NvdXJjZTtcbiAgICAvLyBSZW1haW5pbmcgcHJvcGVydGllcyBhcmUgYWRkZWQgdG8gYSBuZXcgcHJvcHMgb2JqZWN0XG4gICAgZm9yIChwcm9wTmFtZSBpbiBjb25maWcpIHtcbiAgICAgIGlmIChjb25maWcuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpICYmICFSRVNFUlZFRF9QUk9QUy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgcHJvcHNbcHJvcE5hbWVdID0gY29uZmlnW3Byb3BOYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBDaGlsZHJlbiBjYW4gYmUgbW9yZSB0aGFuIG9uZSBhcmd1bWVudCwgYW5kIHRob3NlIGFyZSB0cmFuc2ZlcnJlZCBvbnRvXG4gIC8vIHRoZSBuZXdseSBhbGxvY2F0ZWQgcHJvcHMgb2JqZWN0LlxuICB2YXIgY2hpbGRyZW5MZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoIC0gMjtcbiAgaWYgKGNoaWxkcmVuTGVuZ3RoID09PSAxKSB7XG4gICAgcHJvcHMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgfSBlbHNlIGlmIChjaGlsZHJlbkxlbmd0aCA+IDEpIHtcbiAgICB2YXIgY2hpbGRBcnJheSA9IEFycmF5KGNoaWxkcmVuTGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuTGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoaWxkQXJyYXlbaV0gPSBhcmd1bWVudHNbaSArIDJdO1xuICAgIH1cbiAgICBwcm9wcy5jaGlsZHJlbiA9IGNoaWxkQXJyYXk7XG4gIH1cblxuICAvLyBSZXNvbHZlIGRlZmF1bHQgcHJvcHNcbiAgaWYgKHR5cGUgJiYgdHlwZS5kZWZhdWx0UHJvcHMpIHtcbiAgICB2YXIgZGVmYXVsdFByb3BzID0gdHlwZS5kZWZhdWx0UHJvcHM7XG4gICAgZm9yIChwcm9wTmFtZSBpbiBkZWZhdWx0UHJvcHMpIHtcbiAgICAgIGlmICh0eXBlb2YgcHJvcHNbcHJvcE5hbWVdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICBwcm9wc1twcm9wTmFtZV0gPSBkZWZhdWx0UHJvcHNbcHJvcE5hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBSZWFjdEVsZW1lbnQodHlwZSwga2V5LCByZWYsIHNlbGYsIHNvdXJjZSwgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCwgcHJvcHMpO1xufTtcblxuUmVhY3RFbGVtZW50LmNyZWF0ZUZhY3RvcnkgPSBmdW5jdGlvbiAodHlwZSkge1xuICB2YXIgZmFjdG9yeSA9IFJlYWN0RWxlbWVudC5jcmVhdGVFbGVtZW50LmJpbmQobnVsbCwgdHlwZSk7XG4gIC8vIEV4cG9zZSB0aGUgdHlwZSBvbiB0aGUgZmFjdG9yeSBhbmQgdGhlIHByb3RvdHlwZSBzbyB0aGF0IGl0IGNhbiBiZVxuICAvLyBlYXNpbHkgYWNjZXNzZWQgb24gZWxlbWVudHMuIEUuZy4gYDxGb28gLz4udHlwZSA9PT0gRm9vYC5cbiAgLy8gVGhpcyBzaG91bGQgbm90IGJlIG5hbWVkIGBjb25zdHJ1Y3RvcmAgc2luY2UgdGhpcyBtYXkgbm90IGJlIHRoZSBmdW5jdGlvblxuICAvLyB0aGF0IGNyZWF0ZWQgdGhlIGVsZW1lbnQsIGFuZCBpdCBtYXkgbm90IGV2ZW4gYmUgYSBjb25zdHJ1Y3Rvci5cbiAgLy8gTGVnYWN5IGhvb2sgVE9ETzogV2FybiBpZiB0aGlzIGlzIGFjY2Vzc2VkXG4gIGZhY3RvcnkudHlwZSA9IHR5cGU7XG4gIHJldHVybiBmYWN0b3J5O1xufTtcblxuUmVhY3RFbGVtZW50LmNsb25lQW5kUmVwbGFjZUtleSA9IGZ1bmN0aW9uIChvbGRFbGVtZW50LCBuZXdLZXkpIHtcbiAgdmFyIG5ld0VsZW1lbnQgPSBSZWFjdEVsZW1lbnQob2xkRWxlbWVudC50eXBlLCBuZXdLZXksIG9sZEVsZW1lbnQucmVmLCBvbGRFbGVtZW50Ll9zZWxmLCBvbGRFbGVtZW50Ll9zb3VyY2UsIG9sZEVsZW1lbnQuX293bmVyLCBvbGRFbGVtZW50LnByb3BzKTtcblxuICByZXR1cm4gbmV3RWxlbWVudDtcbn07XG5cblJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VQcm9wcyA9IGZ1bmN0aW9uIChvbGRFbGVtZW50LCBuZXdQcm9wcykge1xuICB2YXIgbmV3RWxlbWVudCA9IFJlYWN0RWxlbWVudChvbGRFbGVtZW50LnR5cGUsIG9sZEVsZW1lbnQua2V5LCBvbGRFbGVtZW50LnJlZiwgb2xkRWxlbWVudC5fc2VsZiwgb2xkRWxlbWVudC5fc291cmNlLCBvbGRFbGVtZW50Ll9vd25lciwgbmV3UHJvcHMpO1xuXG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgLy8gSWYgdGhlIGtleSBvbiB0aGUgb3JpZ2luYWwgaXMgdmFsaWQsIHRoZW4gdGhlIGNsb25lIGlzIHZhbGlkXG4gICAgbmV3RWxlbWVudC5fc3RvcmUudmFsaWRhdGVkID0gb2xkRWxlbWVudC5fc3RvcmUudmFsaWRhdGVkO1xuICB9XG5cbiAgcmV0dXJuIG5ld0VsZW1lbnQ7XG59O1xuXG5SZWFjdEVsZW1lbnQuY2xvbmVFbGVtZW50ID0gZnVuY3Rpb24gKGVsZW1lbnQsIGNvbmZpZywgY2hpbGRyZW4pIHtcbiAgdmFyIHByb3BOYW1lO1xuXG4gIC8vIE9yaWdpbmFsIHByb3BzIGFyZSBjb3BpZWRcbiAgdmFyIHByb3BzID0gYXNzaWduKHt9LCBlbGVtZW50LnByb3BzKTtcblxuICAvLyBSZXNlcnZlZCBuYW1lcyBhcmUgZXh0cmFjdGVkXG4gIHZhciBrZXkgPSBlbGVtZW50LmtleTtcbiAgdmFyIHJlZiA9IGVsZW1lbnQucmVmO1xuICAvLyBTZWxmIGlzIHByZXNlcnZlZCBzaW5jZSB0aGUgb3duZXIgaXMgcHJlc2VydmVkLlxuICB2YXIgc2VsZiA9IGVsZW1lbnQuX3NlbGY7XG4gIC8vIFNvdXJjZSBpcyBwcmVzZXJ2ZWQgc2luY2UgY2xvbmVFbGVtZW50IGlzIHVubGlrZWx5IHRvIGJlIHRhcmdldGVkIGJ5IGFcbiAgLy8gdHJhbnNwaWxlciwgYW5kIHRoZSBvcmlnaW5hbCBzb3VyY2UgaXMgcHJvYmFibHkgYSBiZXR0ZXIgaW5kaWNhdG9yIG9mIHRoZVxuICAvLyB0cnVlIG93bmVyLlxuICB2YXIgc291cmNlID0gZWxlbWVudC5fc291cmNlO1xuXG4gIC8vIE93bmVyIHdpbGwgYmUgcHJlc2VydmVkLCB1bmxlc3MgcmVmIGlzIG92ZXJyaWRkZW5cbiAgdmFyIG93bmVyID0gZWxlbWVudC5fb3duZXI7XG5cbiAgaWYgKGNvbmZpZyAhPSBudWxsKSB7XG4gICAgaWYgKGNvbmZpZy5yZWYgIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gU2lsZW50bHkgc3RlYWwgdGhlIHJlZiBmcm9tIHRoZSBwYXJlbnQuXG4gICAgICByZWYgPSBjb25maWcucmVmO1xuICAgICAgb3duZXIgPSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50O1xuICAgIH1cbiAgICBpZiAoY29uZmlnLmtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBrZXkgPSAnJyArIGNvbmZpZy5rZXk7XG4gICAgfVxuICAgIC8vIFJlbWFpbmluZyBwcm9wZXJ0aWVzIG92ZXJyaWRlIGV4aXN0aW5nIHByb3BzXG4gICAgZm9yIChwcm9wTmFtZSBpbiBjb25maWcpIHtcbiAgICAgIGlmIChjb25maWcuaGFzT3duUHJvcGVydHkocHJvcE5hbWUpICYmICFSRVNFUlZFRF9QUk9QUy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgICAgcHJvcHNbcHJvcE5hbWVdID0gY29uZmlnW3Byb3BOYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBDaGlsZHJlbiBjYW4gYmUgbW9yZSB0aGFuIG9uZSBhcmd1bWVudCwgYW5kIHRob3NlIGFyZSB0cmFuc2ZlcnJlZCBvbnRvXG4gIC8vIHRoZSBuZXdseSBhbGxvY2F0ZWQgcHJvcHMgb2JqZWN0LlxuICB2YXIgY2hpbGRyZW5MZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoIC0gMjtcbiAgaWYgKGNoaWxkcmVuTGVuZ3RoID09PSAxKSB7XG4gICAgcHJvcHMuY2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgfSBlbHNlIGlmIChjaGlsZHJlbkxlbmd0aCA+IDEpIHtcbiAgICB2YXIgY2hpbGRBcnJheSA9IEFycmF5KGNoaWxkcmVuTGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuTGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoaWxkQXJyYXlbaV0gPSBhcmd1bWVudHNbaSArIDJdO1xuICAgIH1cbiAgICBwcm9wcy5jaGlsZHJlbiA9IGNoaWxkQXJyYXk7XG4gIH1cblxuICByZXR1cm4gUmVhY3RFbGVtZW50KGVsZW1lbnQudHlwZSwga2V5LCByZWYsIHNlbGYsIHNvdXJjZSwgb3duZXIsIHByb3BzKTtcbn07XG5cbi8qKlxuICogQHBhcmFtIHs/b2JqZWN0fSBvYmplY3RcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgYG9iamVjdGAgaXMgYSB2YWxpZCBjb21wb25lbnQuXG4gKiBAZmluYWxcbiAqL1xuUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50ID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICByZXR1cm4gdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0ICE9PSBudWxsICYmIG9iamVjdC4kJHR5cGVvZiA9PT0gUkVBQ1RfRUxFTUVOVF9UWVBFO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEVsZW1lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RWxlbWVudFZhbGlkYXRvclxuICovXG5cbi8qKlxuICogUmVhY3RFbGVtZW50VmFsaWRhdG9yIHByb3ZpZGVzIGEgd3JhcHBlciBhcm91bmQgYSBlbGVtZW50IGZhY3RvcnlcbiAqIHdoaWNoIHZhbGlkYXRlcyB0aGUgcHJvcHMgcGFzc2VkIHRvIHRoZSBlbGVtZW50LiBUaGlzIGlzIGludGVuZGVkIHRvIGJlXG4gKiB1c2VkIG9ubHkgaW4gREVWIGFuZCBjb3VsZCBiZSByZXBsYWNlZCBieSBhIHN0YXRpYyB0eXBlIGNoZWNrZXIgZm9yIGxhbmd1YWdlc1xuICogdGhhdCBzdXBwb3J0IGl0LlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucyA9IHJlcXVpcmUoJy4vUmVhY3RQcm9wVHlwZUxvY2F0aW9ucycpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcycpO1xudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xuXG52YXIgY2FuRGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKCcuL2NhbkRlZmluZVByb3BlcnR5Jyk7XG52YXIgZ2V0SXRlcmF0b3JGbiA9IHJlcXVpcmUoJy4vZ2V0SXRlcmF0b3JGbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbmZ1bmN0aW9uIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bSgpIHtcbiAgaWYgKFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQpIHtcbiAgICB2YXIgbmFtZSA9IFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQuZ2V0TmFtZSgpO1xuICAgIGlmIChuYW1lKSB7XG4gICAgICByZXR1cm4gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuICAgIH1cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogV2FybiBpZiB0aGVyZSdzIG5vIGtleSBleHBsaWNpdGx5IHNldCBvbiBkeW5hbWljIGFycmF5cyBvZiBjaGlsZHJlbiBvclxuICogb2JqZWN0IGtleXMgYXJlIG5vdCB2YWxpZC4gVGhpcyBhbGxvd3MgdXMgdG8ga2VlcCB0cmFjayBvZiBjaGlsZHJlbiBiZXR3ZWVuXG4gKiB1cGRhdGVzLlxuICovXG52YXIgb3duZXJIYXNLZXlVc2VXYXJuaW5nID0ge307XG5cbnZhciBsb2dnZWRUeXBlRmFpbHVyZXMgPSB7fTtcblxuLyoqXG4gKiBXYXJuIGlmIHRoZSBlbGVtZW50IGRvZXNuJ3QgaGF2ZSBhbiBleHBsaWNpdCBrZXkgYXNzaWduZWQgdG8gaXQuXG4gKiBUaGlzIGVsZW1lbnQgaXMgaW4gYW4gYXJyYXkuIFRoZSBhcnJheSBjb3VsZCBncm93IGFuZCBzaHJpbmsgb3IgYmVcbiAqIHJlb3JkZXJlZC4gQWxsIGNoaWxkcmVuIHRoYXQgaGF2ZW4ndCBhbHJlYWR5IGJlZW4gdmFsaWRhdGVkIGFyZSByZXF1aXJlZCB0b1xuICogaGF2ZSBhIFwia2V5XCIgcHJvcGVydHkgYXNzaWduZWQgdG8gaXQuXG4gKlxuICogQGludGVybmFsXG4gKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gZWxlbWVudCBFbGVtZW50IHRoYXQgcmVxdWlyZXMgYSBrZXkuXG4gKiBAcGFyYW0geyp9IHBhcmVudFR5cGUgZWxlbWVudCdzIHBhcmVudCdzIHR5cGUuXG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlRXhwbGljaXRLZXkoZWxlbWVudCwgcGFyZW50VHlwZSkge1xuICBpZiAoIWVsZW1lbnQuX3N0b3JlIHx8IGVsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZCB8fCBlbGVtZW50LmtleSAhPSBudWxsKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGVsZW1lbnQuX3N0b3JlLnZhbGlkYXRlZCA9IHRydWU7XG5cbiAgdmFyIGFkZGVuZGEgPSBnZXRBZGRlbmRhRm9yS2V5VXNlKCd1bmlxdWVLZXknLCBlbGVtZW50LCBwYXJlbnRUeXBlKTtcbiAgaWYgKGFkZGVuZGEgPT09IG51bGwpIHtcbiAgICAvLyB3ZSBhbHJlYWR5IHNob3dlZCB0aGUgd2FybmluZ1xuICAgIHJldHVybjtcbiAgfVxuICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ0VhY2ggY2hpbGQgaW4gYW4gYXJyYXkgb3IgaXRlcmF0b3Igc2hvdWxkIGhhdmUgYSB1bmlxdWUgXCJrZXlcIiBwcm9wLicgKyAnJXMlcyVzJywgYWRkZW5kYS5wYXJlbnRPck93bmVyIHx8ICcnLCBhZGRlbmRhLmNoaWxkT3duZXIgfHwgJycsIGFkZGVuZGEudXJsIHx8ICcnKSA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBTaGFyZWQgd2FybmluZyBhbmQgbW9uaXRvcmluZyBjb2RlIGZvciB0aGUga2V5IHdhcm5pbmdzLlxuICpcbiAqIEBpbnRlcm5hbFxuICogQHBhcmFtIHtzdHJpbmd9IG1lc3NhZ2VUeXBlIEEga2V5IHVzZWQgZm9yIGRlLWR1cGluZyB3YXJuaW5ncy5cbiAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50IENvbXBvbmVudCB0aGF0IHJlcXVpcmVzIGEga2V5LlxuICogQHBhcmFtIHsqfSBwYXJlbnRUeXBlIGVsZW1lbnQncyBwYXJlbnQncyB0eXBlLlxuICogQHJldHVybnMgez9vYmplY3R9IEEgc2V0IG9mIGFkZGVuZGEgdG8gdXNlIGluIHRoZSB3YXJuaW5nIG1lc3NhZ2UsIG9yIG51bGxcbiAqIGlmIHRoZSB3YXJuaW5nIGhhcyBhbHJlYWR5IGJlZW4gc2hvd24gYmVmb3JlIChhbmQgc2hvdWxkbid0IGJlIHNob3duIGFnYWluKS5cbiAqL1xuZnVuY3Rpb24gZ2V0QWRkZW5kYUZvcktleVVzZShtZXNzYWdlVHlwZSwgZWxlbWVudCwgcGFyZW50VHlwZSkge1xuICB2YXIgYWRkZW5kdW0gPSBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oKTtcbiAgaWYgKCFhZGRlbmR1bSkge1xuICAgIHZhciBwYXJlbnROYW1lID0gdHlwZW9mIHBhcmVudFR5cGUgPT09ICdzdHJpbmcnID8gcGFyZW50VHlwZSA6IHBhcmVudFR5cGUuZGlzcGxheU5hbWUgfHwgcGFyZW50VHlwZS5uYW1lO1xuICAgIGlmIChwYXJlbnROYW1lKSB7XG4gICAgICBhZGRlbmR1bSA9ICcgQ2hlY2sgdGhlIHRvcC1sZXZlbCByZW5kZXIgY2FsbCB1c2luZyA8JyArIHBhcmVudE5hbWUgKyAnPi4nO1xuICAgIH1cbiAgfVxuXG4gIHZhciBtZW1vaXplciA9IG93bmVySGFzS2V5VXNlV2FybmluZ1ttZXNzYWdlVHlwZV0gfHwgKG93bmVySGFzS2V5VXNlV2FybmluZ1ttZXNzYWdlVHlwZV0gPSB7fSk7XG4gIGlmIChtZW1vaXplclthZGRlbmR1bV0pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBtZW1vaXplclthZGRlbmR1bV0gPSB0cnVlO1xuXG4gIHZhciBhZGRlbmRhID0ge1xuICAgIHBhcmVudE9yT3duZXI6IGFkZGVuZHVtLFxuICAgIHVybDogJyBTZWUgaHR0cHM6Ly9mYi5tZS9yZWFjdC13YXJuaW5nLWtleXMgZm9yIG1vcmUgaW5mb3JtYXRpb24uJyxcbiAgICBjaGlsZE93bmVyOiBudWxsXG4gIH07XG5cbiAgLy8gVXN1YWxseSB0aGUgY3VycmVudCBvd25lciBpcyB0aGUgb2ZmZW5kZXIsIGJ1dCBpZiBpdCBhY2NlcHRzIGNoaWxkcmVuIGFzIGFcbiAgLy8gcHJvcGVydHksIGl0IG1heSBiZSB0aGUgY3JlYXRvciBvZiB0aGUgY2hpbGQgdGhhdCdzIHJlc3BvbnNpYmxlIGZvclxuICAvLyBhc3NpZ25pbmcgaXQgYSBrZXkuXG4gIGlmIChlbGVtZW50ICYmIGVsZW1lbnQuX293bmVyICYmIGVsZW1lbnQuX293bmVyICE9PSBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50KSB7XG4gICAgLy8gR2l2ZSB0aGUgY29tcG9uZW50IHRoYXQgb3JpZ2luYWxseSBjcmVhdGVkIHRoaXMgY2hpbGQuXG4gICAgYWRkZW5kYS5jaGlsZE93bmVyID0gJyBJdCB3YXMgcGFzc2VkIGEgY2hpbGQgZnJvbSAnICsgZWxlbWVudC5fb3duZXIuZ2V0TmFtZSgpICsgJy4nO1xuICB9XG5cbiAgcmV0dXJuIGFkZGVuZGE7XG59XG5cbi8qKlxuICogRW5zdXJlIHRoYXQgZXZlcnkgZWxlbWVudCBlaXRoZXIgaXMgcGFzc2VkIGluIGEgc3RhdGljIGxvY2F0aW9uLCBpbiBhblxuICogYXJyYXkgd2l0aCBhbiBleHBsaWNpdCBrZXlzIHByb3BlcnR5IGRlZmluZWQsIG9yIGluIGFuIG9iamVjdCBsaXRlcmFsXG4gKiB3aXRoIHZhbGlkIGtleSBwcm9wZXJ0eS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqIEBwYXJhbSB7UmVhY3ROb2RlfSBub2RlIFN0YXRpY2FsbHkgcGFzc2VkIGNoaWxkIG9mIGFueSB0eXBlLlxuICogQHBhcmFtIHsqfSBwYXJlbnRUeXBlIG5vZGUncyBwYXJlbnQncyB0eXBlLlxuICovXG5mdW5jdGlvbiB2YWxpZGF0ZUNoaWxkS2V5cyhub2RlLCBwYXJlbnRUeXBlKSB7XG4gIGlmICh0eXBlb2Ygbm9kZSAhPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKEFycmF5LmlzQXJyYXkobm9kZSkpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGUubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjaGlsZCA9IG5vZGVbaV07XG4gICAgICBpZiAoUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KGNoaWxkKSkge1xuICAgICAgICB2YWxpZGF0ZUV4cGxpY2l0S2V5KGNoaWxkLCBwYXJlbnRUeXBlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KG5vZGUpKSB7XG4gICAgLy8gVGhpcyBlbGVtZW50IHdhcyBwYXNzZWQgaW4gYSB2YWxpZCBsb2NhdGlvbi5cbiAgICBpZiAobm9kZS5fc3RvcmUpIHtcbiAgICAgIG5vZGUuX3N0b3JlLnZhbGlkYXRlZCA9IHRydWU7XG4gICAgfVxuICB9IGVsc2UgaWYgKG5vZGUpIHtcbiAgICB2YXIgaXRlcmF0b3JGbiA9IGdldEl0ZXJhdG9yRm4obm9kZSk7XG4gICAgLy8gRW50cnkgaXRlcmF0b3JzIHByb3ZpZGUgaW1wbGljaXQga2V5cy5cbiAgICBpZiAoaXRlcmF0b3JGbikge1xuICAgICAgaWYgKGl0ZXJhdG9yRm4gIT09IG5vZGUuZW50cmllcykge1xuICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvckZuLmNhbGwobm9kZSk7XG4gICAgICAgIHZhciBzdGVwO1xuICAgICAgICB3aGlsZSAoIShzdGVwID0gaXRlcmF0b3IubmV4dCgpKS5kb25lKSB7XG4gICAgICAgICAgaWYgKFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChzdGVwLnZhbHVlKSkge1xuICAgICAgICAgICAgdmFsaWRhdGVFeHBsaWNpdEtleShzdGVwLnZhbHVlLCBwYXJlbnRUeXBlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBc3NlcnQgdGhhdCB0aGUgcHJvcHMgYXJlIHZhbGlkXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGNvbXBvbmVudE5hbWUgTmFtZSBvZiB0aGUgY29tcG9uZW50IGZvciBlcnJvciBtZXNzYWdlcy5cbiAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wVHlwZXMgTWFwIG9mIHByb3AgbmFtZSB0byBhIFJlYWN0UHJvcFR5cGVcbiAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wc1xuICogQHBhcmFtIHtzdHJpbmd9IGxvY2F0aW9uIGUuZy4gXCJwcm9wXCIsIFwiY29udGV4dFwiLCBcImNoaWxkIGNvbnRleHRcIlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY2hlY2tQcm9wVHlwZXMoY29tcG9uZW50TmFtZSwgcHJvcFR5cGVzLCBwcm9wcywgbG9jYXRpb24pIHtcbiAgZm9yICh2YXIgcHJvcE5hbWUgaW4gcHJvcFR5cGVzKSB7XG4gICAgaWYgKHByb3BUeXBlcy5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgIHZhciBlcnJvcjtcbiAgICAgIC8vIFByb3AgdHlwZSB2YWxpZGF0aW9uIG1heSB0aHJvdy4gSW4gY2FzZSB0aGV5IGRvLCB3ZSBkb24ndCB3YW50IHRvXG4gICAgICAvLyBmYWlsIHRoZSByZW5kZXIgcGhhc2Ugd2hlcmUgaXQgZGlkbid0IGZhaWwgYmVmb3JlLiBTbyB3ZSBsb2cgaXQuXG4gICAgICAvLyBBZnRlciB0aGVzZSBoYXZlIGJlZW4gY2xlYW5lZCB1cCwgd2UnbGwgbGV0IHRoZW0gdGhyb3cuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBUaGlzIGlzIGludGVudGlvbmFsbHkgYW4gaW52YXJpYW50IHRoYXQgZ2V0cyBjYXVnaHQuIEl0J3MgdGhlIHNhbWVcbiAgICAgICAgLy8gYmVoYXZpb3IgYXMgd2l0aG91dCB0aGlzIHN0YXRlbWVudCBleGNlcHQgd2l0aCBhIGJldHRlciBtZXNzYWdlLlxuICAgICAgICAhKHR5cGVvZiBwcm9wVHlwZXNbcHJvcE5hbWVdID09PSAnZnVuY3Rpb24nKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICclczogJXMgdHlwZSBgJXNgIGlzIGludmFsaWQ7IGl0IG11c3QgYmUgYSBmdW5jdGlvbiwgdXN1YWxseSBmcm9tICcgKyAnUmVhY3QuUHJvcFR5cGVzLicsIGNvbXBvbmVudE5hbWUgfHwgJ1JlYWN0IGNsYXNzJywgUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dLCBwcm9wTmFtZSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICAgICBlcnJvciA9IHByb3BUeXBlc1twcm9wTmFtZV0ocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbik7XG4gICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICBlcnJvciA9IGV4O1xuICAgICAgfVxuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWVycm9yIHx8IGVycm9yIGluc3RhbmNlb2YgRXJyb3IsICclczogdHlwZSBzcGVjaWZpY2F0aW9uIG9mICVzIGAlc2AgaXMgaW52YWxpZDsgdGhlIHR5cGUgY2hlY2tlciAnICsgJ2Z1bmN0aW9uIG11c3QgcmV0dXJuIGBudWxsYCBvciBhbiBgRXJyb3JgIGJ1dCByZXR1cm5lZCBhICVzLiAnICsgJ1lvdSBtYXkgaGF2ZSBmb3Jnb3R0ZW4gdG8gcGFzcyBhbiBhcmd1bWVudCB0byB0aGUgdHlwZSBjaGVja2VyICcgKyAnY3JlYXRvciAoYXJyYXlPZiwgaW5zdGFuY2VPZiwgb2JqZWN0T2YsIG9uZU9mLCBvbmVPZlR5cGUsIGFuZCAnICsgJ3NoYXBlIGFsbCByZXF1aXJlIGFuIGFyZ3VtZW50KS4nLCBjb21wb25lbnROYW1lIHx8ICdSZWFjdCBjbGFzcycsIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXSwgcHJvcE5hbWUsIHR5cGVvZiBlcnJvcikgOiB1bmRlZmluZWQ7XG4gICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiAhKGVycm9yLm1lc3NhZ2UgaW4gbG9nZ2VkVHlwZUZhaWx1cmVzKSkge1xuICAgICAgICAvLyBPbmx5IG1vbml0b3IgdGhpcyBmYWlsdXJlIG9uY2UgYmVjYXVzZSB0aGVyZSB0ZW5kcyB0byBiZSBhIGxvdCBvZiB0aGVcbiAgICAgICAgLy8gc2FtZSBlcnJvci5cbiAgICAgICAgbG9nZ2VkVHlwZUZhaWx1cmVzW2Vycm9yLm1lc3NhZ2VdID0gdHJ1ZTtcblxuICAgICAgICB2YXIgYWRkZW5kdW0gPSBnZXREZWNsYXJhdGlvbkVycm9yQWRkZW5kdW0oKTtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdGYWlsZWQgcHJvcFR5cGU6ICVzJXMnLCBlcnJvci5tZXNzYWdlLCBhZGRlbmR1bSkgOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogR2l2ZW4gYW4gZWxlbWVudCwgdmFsaWRhdGUgdGhhdCBpdHMgcHJvcHMgZm9sbG93IHRoZSBwcm9wVHlwZXMgZGVmaW5pdGlvbixcbiAqIHByb3ZpZGVkIGJ5IHRoZSB0eXBlLlxuICpcbiAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBlbGVtZW50XG4gKi9cbmZ1bmN0aW9uIHZhbGlkYXRlUHJvcFR5cGVzKGVsZW1lbnQpIHtcbiAgdmFyIGNvbXBvbmVudENsYXNzID0gZWxlbWVudC50eXBlO1xuICBpZiAodHlwZW9mIGNvbXBvbmVudENsYXNzICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBuYW1lID0gY29tcG9uZW50Q2xhc3MuZGlzcGxheU5hbWUgfHwgY29tcG9uZW50Q2xhc3MubmFtZTtcbiAgaWYgKGNvbXBvbmVudENsYXNzLnByb3BUeXBlcykge1xuICAgIGNoZWNrUHJvcFR5cGVzKG5hbWUsIGNvbXBvbmVudENsYXNzLnByb3BUeXBlcywgZWxlbWVudC5wcm9wcywgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucy5wcm9wKTtcbiAgfVxuICBpZiAodHlwZW9mIGNvbXBvbmVudENsYXNzLmdldERlZmF1bHRQcm9wcyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGNvbXBvbmVudENsYXNzLmdldERlZmF1bHRQcm9wcy5pc1JlYWN0Q2xhc3NBcHByb3ZlZCwgJ2dldERlZmF1bHRQcm9wcyBpcyBvbmx5IHVzZWQgb24gY2xhc3NpYyBSZWFjdC5jcmVhdGVDbGFzcyAnICsgJ2RlZmluaXRpb25zLiBVc2UgYSBzdGF0aWMgcHJvcGVydHkgbmFtZWQgYGRlZmF1bHRQcm9wc2AgaW5zdGVhZC4nKSA6IHVuZGVmaW5lZDtcbiAgfVxufVxuXG52YXIgUmVhY3RFbGVtZW50VmFsaWRhdG9yID0ge1xuXG4gIGNyZWF0ZUVsZW1lbnQ6IGZ1bmN0aW9uICh0eXBlLCBwcm9wcywgY2hpbGRyZW4pIHtcbiAgICB2YXIgdmFsaWRUeXBlID0gdHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nO1xuICAgIC8vIFdlIHdhcm4gaW4gdGhpcyBjYXNlIGJ1dCBkb24ndCB0aHJvdy4gV2UgZXhwZWN0IHRoZSBlbGVtZW50IGNyZWF0aW9uIHRvXG4gICAgLy8gc3VjY2VlZCBhbmQgdGhlcmUgd2lsbCBsaWtlbHkgYmUgZXJyb3JzIGluIHJlbmRlci5cbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyh2YWxpZFR5cGUsICdSZWFjdC5jcmVhdGVFbGVtZW50OiB0eXBlIHNob3VsZCBub3QgYmUgbnVsbCwgdW5kZWZpbmVkLCBib29sZWFuLCBvciAnICsgJ251bWJlci4gSXQgc2hvdWxkIGJlIGEgc3RyaW5nIChmb3IgRE9NIGVsZW1lbnRzKSBvciBhIFJlYWN0Q2xhc3MgJyArICcoZm9yIGNvbXBvc2l0ZSBjb21wb25lbnRzKS4lcycsIGdldERlY2xhcmF0aW9uRXJyb3JBZGRlbmR1bSgpKSA6IHVuZGVmaW5lZDtcblxuICAgIHZhciBlbGVtZW50ID0gUmVhY3RFbGVtZW50LmNyZWF0ZUVsZW1lbnQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIC8vIFRoZSByZXN1bHQgY2FuIGJlIG51bGxpc2ggaWYgYSBtb2NrIG9yIGEgY3VzdG9tIGZ1bmN0aW9uIGlzIHVzZWQuXG4gICAgLy8gVE9ETzogRHJvcCB0aGlzIHdoZW4gdGhlc2UgYXJlIG5vIGxvbmdlciBhbGxvd2VkIGFzIHRoZSB0eXBlIGFyZ3VtZW50LlxuICAgIGlmIChlbGVtZW50ID09IG51bGwpIHtcbiAgICAgIHJldHVybiBlbGVtZW50O1xuICAgIH1cblxuICAgIC8vIFNraXAga2V5IHdhcm5pbmcgaWYgdGhlIHR5cGUgaXNuJ3QgdmFsaWQgc2luY2Ugb3VyIGtleSB2YWxpZGF0aW9uIGxvZ2ljXG4gICAgLy8gZG9lc24ndCBleHBlY3QgYSBub24tc3RyaW5nL2Z1bmN0aW9uIHR5cGUgYW5kIGNhbiB0aHJvdyBjb25mdXNpbmcgZXJyb3JzLlxuICAgIC8vIFdlIGRvbid0IHdhbnQgZXhjZXB0aW9uIGJlaGF2aW9yIHRvIGRpZmZlciBiZXR3ZWVuIGRldiBhbmQgcHJvZC5cbiAgICAvLyAoUmVuZGVyaW5nIHdpbGwgdGhyb3cgd2l0aCBhIGhlbHBmdWwgbWVzc2FnZSBhbmQgYXMgc29vbiBhcyB0aGUgdHlwZSBpc1xuICAgIC8vIGZpeGVkLCB0aGUga2V5IHdhcm5pbmdzIHdpbGwgYXBwZWFyLilcbiAgICBpZiAodmFsaWRUeXBlKSB7XG4gICAgICBmb3IgKHZhciBpID0gMjsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YWxpZGF0ZUNoaWxkS2V5cyhhcmd1bWVudHNbaV0sIHR5cGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhbGlkYXRlUHJvcFR5cGVzKGVsZW1lbnQpO1xuXG4gICAgcmV0dXJuIGVsZW1lbnQ7XG4gIH0sXG5cbiAgY3JlYXRlRmFjdG9yeTogZnVuY3Rpb24gKHR5cGUpIHtcbiAgICB2YXIgdmFsaWRhdGVkRmFjdG9yeSA9IFJlYWN0RWxlbWVudFZhbGlkYXRvci5jcmVhdGVFbGVtZW50LmJpbmQobnVsbCwgdHlwZSk7XG4gICAgLy8gTGVnYWN5IGhvb2sgVE9ETzogV2FybiBpZiB0aGlzIGlzIGFjY2Vzc2VkXG4gICAgdmFsaWRhdGVkRmFjdG9yeS50eXBlID0gdHlwZTtcblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoY2FuRGVmaW5lUHJvcGVydHkpIHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHZhbGlkYXRlZEZhY3RvcnksICd0eXBlJywge1xuICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICdGYWN0b3J5LnR5cGUgaXMgZGVwcmVjYXRlZC4gQWNjZXNzIHRoZSBjbGFzcyBkaXJlY3RseSAnICsgJ2JlZm9yZSBwYXNzaW5nIGl0IHRvIGNyZWF0ZUZhY3RvcnkuJykgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3R5cGUnLCB7XG4gICAgICAgICAgICAgIHZhbHVlOiB0eXBlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB0eXBlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbGlkYXRlZEZhY3Rvcnk7XG4gIH0sXG5cbiAgY2xvbmVFbGVtZW50OiBmdW5jdGlvbiAoZWxlbWVudCwgcHJvcHMsIGNoaWxkcmVuKSB7XG4gICAgdmFyIG5ld0VsZW1lbnQgPSBSZWFjdEVsZW1lbnQuY2xvbmVFbGVtZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgZm9yICh2YXIgaSA9IDI7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhbGlkYXRlQ2hpbGRLZXlzKGFyZ3VtZW50c1tpXSwgbmV3RWxlbWVudC50eXBlKTtcbiAgICB9XG4gICAgdmFsaWRhdGVQcm9wVHlwZXMobmV3RWxlbWVudCk7XG4gICAgcmV0dXJuIG5ld0VsZW1lbnQ7XG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEVsZW1lbnRWYWxpZGF0b3I7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RW1wdHlDb21wb25lbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xudmFyIFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeSA9IHJlcXVpcmUoJy4vUmVhY3RFbXB0eUNvbXBvbmVudFJlZ2lzdHJ5Jyk7XG52YXIgUmVhY3RSZWNvbmNpbGVyID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZXInKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xuXG52YXIgcGxhY2Vob2xkZXJFbGVtZW50O1xuXG52YXIgUmVhY3RFbXB0eUNvbXBvbmVudEluamVjdGlvbiA9IHtcbiAgaW5qZWN0RW1wdHlDb21wb25lbnQ6IGZ1bmN0aW9uIChjb21wb25lbnQpIHtcbiAgICBwbGFjZWhvbGRlckVsZW1lbnQgPSBSZWFjdEVsZW1lbnQuY3JlYXRlRWxlbWVudChjb21wb25lbnQpO1xuICB9XG59O1xuXG5mdW5jdGlvbiByZWdpc3Rlck51bGxDb21wb25lbnRJRCgpIHtcbiAgUmVhY3RFbXB0eUNvbXBvbmVudFJlZ2lzdHJ5LnJlZ2lzdGVyTnVsbENvbXBvbmVudElEKHRoaXMuX3Jvb3ROb2RlSUQpO1xufVxuXG52YXIgUmVhY3RFbXB0eUNvbXBvbmVudCA9IGZ1bmN0aW9uIChpbnN0YW50aWF0ZSkge1xuICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IG51bGw7XG4gIHRoaXMuX3Jvb3ROb2RlSUQgPSBudWxsO1xuICB0aGlzLl9yZW5kZXJlZENvbXBvbmVudCA9IGluc3RhbnRpYXRlKHBsYWNlaG9sZGVyRWxlbWVudCk7XG59O1xuYXNzaWduKFJlYWN0RW1wdHlDb21wb25lbnQucHJvdG90eXBlLCB7XG4gIGNvbnN0cnVjdDogZnVuY3Rpb24gKGVsZW1lbnQpIHt9LFxuICBtb3VudENvbXBvbmVudDogZnVuY3Rpb24gKHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICB0cmFuc2FjdGlvbi5nZXRSZWFjdE1vdW50UmVhZHkoKS5lbnF1ZXVlKHJlZ2lzdGVyTnVsbENvbXBvbmVudElELCB0aGlzKTtcbiAgICB0aGlzLl9yb290Tm9kZUlEID0gcm9vdElEO1xuICAgIHJldHVybiBSZWFjdFJlY29uY2lsZXIubW91bnRDb21wb25lbnQodGhpcy5fcmVuZGVyZWRDb21wb25lbnQsIHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICB9LFxuICByZWNlaXZlQ29tcG9uZW50OiBmdW5jdGlvbiAoKSB7fSxcbiAgdW5tb3VudENvbXBvbmVudDogZnVuY3Rpb24gKHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICBSZWFjdFJlY29uY2lsZXIudW5tb3VudENvbXBvbmVudCh0aGlzLl9yZW5kZXJlZENvbXBvbmVudCk7XG4gICAgUmVhY3RFbXB0eUNvbXBvbmVudFJlZ2lzdHJ5LmRlcmVnaXN0ZXJOdWxsQ29tcG9uZW50SUQodGhpcy5fcm9vdE5vZGVJRCk7XG4gICAgdGhpcy5fcm9vdE5vZGVJRCA9IG51bGw7XG4gICAgdGhpcy5fcmVuZGVyZWRDb21wb25lbnQgPSBudWxsO1xuICB9XG59KTtcblxuUmVhY3RFbXB0eUNvbXBvbmVudC5pbmplY3Rpb24gPSBSZWFjdEVtcHR5Q29tcG9uZW50SW5qZWN0aW9uO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RW1wdHlDb21wb25lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNC0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLy8gVGhpcyByZWdpc3RyeSBrZWVwcyB0cmFjayBvZiB0aGUgUmVhY3QgSURzIG9mIHRoZSBjb21wb25lbnRzIHRoYXQgcmVuZGVyZWQgdG9cbi8vIGBudWxsYCAoaW4gcmVhbGl0eSBhIHBsYWNlaG9sZGVyIHN1Y2ggYXMgYG5vc2NyaXB0YClcbnZhciBudWxsQ29tcG9uZW50SURzUmVnaXN0cnkgPSB7fTtcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgQ29tcG9uZW50J3MgYF9yb290Tm9kZUlEYC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGNvbXBvbmVudCBpcyByZW5kZXJlZCB0byBudWxsLlxuICovXG5mdW5jdGlvbiBpc051bGxDb21wb25lbnRJRChpZCkge1xuICByZXR1cm4gISFudWxsQ29tcG9uZW50SURzUmVnaXN0cnlbaWRdO1xufVxuXG4vKipcbiAqIE1hcmsgdGhlIGNvbXBvbmVudCBhcyBoYXZpbmcgcmVuZGVyZWQgdG8gbnVsbC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBDb21wb25lbnQncyBgX3Jvb3ROb2RlSURgLlxuICovXG5mdW5jdGlvbiByZWdpc3Rlck51bGxDb21wb25lbnRJRChpZCkge1xuICBudWxsQ29tcG9uZW50SURzUmVnaXN0cnlbaWRdID0gdHJ1ZTtcbn1cblxuLyoqXG4gKiBVbm1hcmsgdGhlIGNvbXBvbmVudCBhcyBoYXZpbmcgcmVuZGVyZWQgdG8gbnVsbDogaXQgcmVuZGVycyB0byBzb21ldGhpbmcgbm93LlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIENvbXBvbmVudCdzIGBfcm9vdE5vZGVJRGAuXG4gKi9cbmZ1bmN0aW9uIGRlcmVnaXN0ZXJOdWxsQ29tcG9uZW50SUQoaWQpIHtcbiAgZGVsZXRlIG51bGxDb21wb25lbnRJRHNSZWdpc3RyeVtpZF07XG59XG5cbnZhciBSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnkgPSB7XG4gIGlzTnVsbENvbXBvbmVudElEOiBpc051bGxDb21wb25lbnRJRCxcbiAgcmVnaXN0ZXJOdWxsQ29tcG9uZW50SUQ6IHJlZ2lzdGVyTnVsbENvbXBvbmVudElELFxuICBkZXJlZ2lzdGVyTnVsbENvbXBvbmVudElEOiBkZXJlZ2lzdGVyTnVsbENvbXBvbmVudElEXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RFcnJvclV0aWxzXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGNhdWdodEVycm9yID0gbnVsbDtcblxuLyoqXG4gKiBDYWxsIGEgZnVuY3Rpb24gd2hpbGUgZ3VhcmRpbmcgYWdhaW5zdCBlcnJvcnMgdGhhdCBoYXBwZW5zIHdpdGhpbiBpdC5cbiAqXG4gKiBAcGFyYW0gez9TdHJpbmd9IG5hbWUgb2YgdGhlIGd1YXJkIHRvIHVzZSBmb3IgbG9nZ2luZyBvciBkZWJ1Z2dpbmdcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGludm9rZVxuICogQHBhcmFtIHsqfSBhIEZpcnN0IGFyZ3VtZW50XG4gKiBAcGFyYW0geyp9IGIgU2Vjb25kIGFyZ3VtZW50XG4gKi9cbmZ1bmN0aW9uIGludm9rZUd1YXJkZWRDYWxsYmFjayhuYW1lLCBmdW5jLCBhLCBiKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGZ1bmMoYSwgYik7XG4gIH0gY2F0Y2ggKHgpIHtcbiAgICBpZiAoY2F1Z2h0RXJyb3IgPT09IG51bGwpIHtcbiAgICAgIGNhdWdodEVycm9yID0geDtcbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufVxuXG52YXIgUmVhY3RFcnJvclV0aWxzID0ge1xuICBpbnZva2VHdWFyZGVkQ2FsbGJhY2s6IGludm9rZUd1YXJkZWRDYWxsYmFjayxcblxuICAvKipcbiAgICogSW52b2tlZCBieSBSZWFjdFRlc3RVdGlscy5TaW11bGF0ZSBzbyB0aGF0IGFueSBlcnJvcnMgdGhyb3duIGJ5IHRoZSBldmVudFxuICAgKiBoYW5kbGVyIGFyZSBzdXJlIHRvIGJlIHJldGhyb3duIGJ5IHJldGhyb3dDYXVnaHRFcnJvci5cbiAgICovXG4gIGludm9rZUd1YXJkZWRDYWxsYmFja1dpdGhDYXRjaDogaW52b2tlR3VhcmRlZENhbGxiYWNrLFxuXG4gIC8qKlxuICAgKiBEdXJpbmcgZXhlY3V0aW9uIG9mIGd1YXJkZWQgZnVuY3Rpb25zIHdlIHdpbGwgY2FwdHVyZSB0aGUgZmlyc3QgZXJyb3Igd2hpY2hcbiAgICogd2Ugd2lsbCByZXRocm93IHRvIGJlIGhhbmRsZWQgYnkgdGhlIHRvcCBsZXZlbCBlcnJvciBoYW5kbGVyLlxuICAgKi9cbiAgcmV0aHJvd0NhdWdodEVycm9yOiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGNhdWdodEVycm9yKSB7XG4gICAgICB2YXIgZXJyb3IgPSBjYXVnaHRFcnJvcjtcbiAgICAgIGNhdWdodEVycm9yID0gbnVsbDtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufTtcblxuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgLyoqXG4gICAqIFRvIGhlbHAgZGV2ZWxvcG1lbnQgd2UgY2FuIGdldCBiZXR0ZXIgZGV2dG9vbHMgaW50ZWdyYXRpb24gYnkgc2ltdWxhdGluZyBhXG4gICAqIHJlYWwgYnJvd3NlciBldmVudC5cbiAgICovXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2Ygd2luZG93LmRpc3BhdGNoRXZlbnQgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRXZlbnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgZmFrZU5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdyZWFjdCcpO1xuICAgIFJlYWN0RXJyb3JVdGlscy5pbnZva2VHdWFyZGVkQ2FsbGJhY2sgPSBmdW5jdGlvbiAobmFtZSwgZnVuYywgYSwgYikge1xuICAgICAgdmFyIGJvdW5kRnVuYyA9IGZ1bmMuYmluZChudWxsLCBhLCBiKTtcbiAgICAgIHZhciBldnRUeXBlID0gJ3JlYWN0LScgKyBuYW1lO1xuICAgICAgZmFrZU5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldnRUeXBlLCBib3VuZEZ1bmMsIGZhbHNlKTtcbiAgICAgIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnRXZlbnQnKTtcbiAgICAgIGV2dC5pbml0RXZlbnQoZXZ0VHlwZSwgZmFsc2UsIGZhbHNlKTtcbiAgICAgIGZha2VOb2RlLmRpc3BhdGNoRXZlbnQoZXZ0KTtcbiAgICAgIGZha2VOb2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZ0VHlwZSwgYm91bmRGdW5jLCBmYWxzZSk7XG4gICAgfTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0RXJyb3JVdGlsczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RFdmVudEVtaXR0ZXJNaXhpblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV2ZW50UGx1Z2luSHViID0gcmVxdWlyZSgnLi9FdmVudFBsdWdpbkh1YicpO1xuXG5mdW5jdGlvbiBydW5FdmVudFF1ZXVlSW5CYXRjaChldmVudHMpIHtcbiAgRXZlbnRQbHVnaW5IdWIuZW5xdWV1ZUV2ZW50cyhldmVudHMpO1xuICBFdmVudFBsdWdpbkh1Yi5wcm9jZXNzRXZlbnRRdWV1ZShmYWxzZSk7XG59XG5cbnZhciBSZWFjdEV2ZW50RW1pdHRlck1peGluID0ge1xuXG4gIC8qKlxuICAgKiBTdHJlYW1zIGEgZmlyZWQgdG9wLWxldmVsIGV2ZW50IHRvIGBFdmVudFBsdWdpbkh1YmAgd2hlcmUgcGx1Z2lucyBoYXZlIHRoZVxuICAgKiBvcHBvcnR1bml0eSB0byBjcmVhdGUgYFJlYWN0RXZlbnRgcyB0byBiZSBkaXNwYXRjaGVkLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUeXBlIFJlY29yZCBmcm9tIGBFdmVudENvbnN0YW50c2AuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSB0b3BMZXZlbFRhcmdldCBUaGUgbGlzdGVuaW5nIGNvbXBvbmVudCByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgZW52aXJvbm1lbnQgZXZlbnQuXG4gICAqL1xuICBoYW5kbGVUb3BMZXZlbDogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICAgIHZhciBldmVudHMgPSBFdmVudFBsdWdpbkh1Yi5leHRyYWN0RXZlbnRzKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG4gICAgcnVuRXZlbnRRdWV1ZUluQmF0Y2goZXZlbnRzKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEV2ZW50RW1pdHRlck1peGluOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEV2ZW50TGlzdGVuZXJcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRMaXN0ZW5lciA9IHJlcXVpcmUoJ2ZianMvbGliL0V2ZW50TGlzdGVuZXInKTtcbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG52YXIgUG9vbGVkQ2xhc3MgPSByZXF1aXJlKCcuL1Bvb2xlZENsYXNzJyk7XG52YXIgUmVhY3RJbnN0YW5jZUhhbmRsZXMgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VIYW5kbGVzJyk7XG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xudmFyIFJlYWN0VXBkYXRlcyA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVzJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBnZXRFdmVudFRhcmdldCA9IHJlcXVpcmUoJy4vZ2V0RXZlbnRUYXJnZXQnKTtcbnZhciBnZXRVbmJvdW5kZWRTY3JvbGxQb3NpdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2dldFVuYm91bmRlZFNjcm9sbFBvc2l0aW9uJyk7XG5cbnZhciBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUgPSAxMTtcblxuLyoqXG4gKiBGaW5kcyB0aGUgcGFyZW50IFJlYWN0IGNvbXBvbmVudCBvZiBgbm9kZWAuXG4gKlxuICogQHBhcmFtIHsqfSBub2RlXG4gKiBAcmV0dXJuIHs/RE9NRXZlbnRUYXJnZXR9IFBhcmVudCBjb250YWluZXIsIG9yIGBudWxsYCBpZiB0aGUgc3BlY2lmaWVkIG5vZGVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgaXMgbm90IG5lc3RlZC5cbiAqL1xuZnVuY3Rpb24gZmluZFBhcmVudChub2RlKSB7XG4gIC8vIFRPRE86IEl0IG1heSBiZSBhIGdvb2QgaWRlYSB0byBjYWNoZSB0aGlzIHRvIHByZXZlbnQgdW5uZWNlc3NhcnkgRE9NXG4gIC8vIHRyYXZlcnNhbCwgYnV0IGNhY2hpbmcgaXMgZGlmZmljdWx0IHRvIGRvIGNvcnJlY3RseSB3aXRob3V0IHVzaW5nIGFcbiAgLy8gbXV0YXRpb24gb2JzZXJ2ZXIgdG8gbGlzdGVuIGZvciBhbGwgRE9NIGNoYW5nZXMuXG4gIHZhciBub2RlSUQgPSBSZWFjdE1vdW50LmdldElEKG5vZGUpO1xuICB2YXIgcm9vdElEID0gUmVhY3RJbnN0YW5jZUhhbmRsZXMuZ2V0UmVhY3RSb290SURGcm9tTm9kZUlEKG5vZGVJRCk7XG4gIHZhciBjb250YWluZXIgPSBSZWFjdE1vdW50LmZpbmRSZWFjdENvbnRhaW5lckZvcklEKHJvb3RJRCk7XG4gIHZhciBwYXJlbnQgPSBSZWFjdE1vdW50LmdldEZpcnN0UmVhY3RET00oY29udGFpbmVyKTtcbiAgcmV0dXJuIHBhcmVudDtcbn1cblxuLy8gVXNlZCB0byBzdG9yZSBhbmNlc3RvciBoaWVyYXJjaHkgaW4gdG9wIGxldmVsIGNhbGxiYWNrXG5mdW5jdGlvbiBUb3BMZXZlbENhbGxiYWNrQm9va0tlZXBpbmcodG9wTGV2ZWxUeXBlLCBuYXRpdmVFdmVudCkge1xuICB0aGlzLnRvcExldmVsVHlwZSA9IHRvcExldmVsVHlwZTtcbiAgdGhpcy5uYXRpdmVFdmVudCA9IG5hdGl2ZUV2ZW50O1xuICB0aGlzLmFuY2VzdG9ycyA9IFtdO1xufVxuYXNzaWduKFRvcExldmVsQ2FsbGJhY2tCb29rS2VlcGluZy5wcm90b3R5cGUsIHtcbiAgZGVzdHJ1Y3RvcjogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMudG9wTGV2ZWxUeXBlID0gbnVsbDtcbiAgICB0aGlzLm5hdGl2ZUV2ZW50ID0gbnVsbDtcbiAgICB0aGlzLmFuY2VzdG9ycy5sZW5ndGggPSAwO1xuICB9XG59KTtcblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhUb3BMZXZlbENhbGxiYWNrQm9va0tlZXBpbmcsIFBvb2xlZENsYXNzLnR3b0FyZ3VtZW50UG9vbGVyKTtcblxuZnVuY3Rpb24gaGFuZGxlVG9wTGV2ZWxJbXBsKGJvb2tLZWVwaW5nKSB7XG4gIC8vIFRPRE86IFJlLWVuYWJsZSBldmVudC5wYXRoIGhhbmRsaW5nXG4gIC8vXG4gIC8vIGlmIChib29rS2VlcGluZy5uYXRpdmVFdmVudC5wYXRoICYmIGJvb2tLZWVwaW5nLm5hdGl2ZUV2ZW50LnBhdGgubGVuZ3RoID4gMSkge1xuICAvLyAgIC8vIE5ldyBicm93c2VycyBoYXZlIGEgcGF0aCBhdHRyaWJ1dGUgb24gbmF0aXZlIGV2ZW50c1xuICAvLyAgIGhhbmRsZVRvcExldmVsV2l0aFBhdGgoYm9va0tlZXBpbmcpO1xuICAvLyB9IGVsc2Uge1xuICAvLyAgIC8vIExlZ2FjeSBicm93c2VycyBkb24ndCBoYXZlIGEgcGF0aCBhdHRyaWJ1dGUgb24gbmF0aXZlIGV2ZW50c1xuICAvLyAgIGhhbmRsZVRvcExldmVsV2l0aG91dFBhdGgoYm9va0tlZXBpbmcpO1xuICAvLyB9XG5cbiAgdm9pZCBoYW5kbGVUb3BMZXZlbFdpdGhQYXRoOyAvLyB0ZW1wb3JhcmlseSB1bnVzZWRcbiAgaGFuZGxlVG9wTGV2ZWxXaXRob3V0UGF0aChib29rS2VlcGluZyk7XG59XG5cbi8vIExlZ2FjeSBicm93c2VycyBkb24ndCBoYXZlIGEgcGF0aCBhdHRyaWJ1dGUgb24gbmF0aXZlIGV2ZW50c1xuZnVuY3Rpb24gaGFuZGxlVG9wTGV2ZWxXaXRob3V0UGF0aChib29rS2VlcGluZykge1xuICB2YXIgdG9wTGV2ZWxUYXJnZXQgPSBSZWFjdE1vdW50LmdldEZpcnN0UmVhY3RET00oZ2V0RXZlbnRUYXJnZXQoYm9va0tlZXBpbmcubmF0aXZlRXZlbnQpKSB8fCB3aW5kb3c7XG5cbiAgLy8gTG9vcCB0aHJvdWdoIHRoZSBoaWVyYXJjaHksIGluIGNhc2UgdGhlcmUncyBhbnkgbmVzdGVkIGNvbXBvbmVudHMuXG4gIC8vIEl0J3MgaW1wb3J0YW50IHRoYXQgd2UgYnVpbGQgdGhlIGFycmF5IG9mIGFuY2VzdG9ycyBiZWZvcmUgY2FsbGluZyBhbnlcbiAgLy8gZXZlbnQgaGFuZGxlcnMsIGJlY2F1c2UgZXZlbnQgaGFuZGxlcnMgY2FuIG1vZGlmeSB0aGUgRE9NLCBsZWFkaW5nIHRvXG4gIC8vIGluY29uc2lzdGVuY2llcyB3aXRoIFJlYWN0TW91bnQncyBub2RlIGNhY2hlLiBTZWUgIzExMDUuXG4gIHZhciBhbmNlc3RvciA9IHRvcExldmVsVGFyZ2V0O1xuICB3aGlsZSAoYW5jZXN0b3IpIHtcbiAgICBib29rS2VlcGluZy5hbmNlc3RvcnMucHVzaChhbmNlc3Rvcik7XG4gICAgYW5jZXN0b3IgPSBmaW5kUGFyZW50KGFuY2VzdG9yKTtcbiAgfVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYm9va0tlZXBpbmcuYW5jZXN0b3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgdG9wTGV2ZWxUYXJnZXQgPSBib29rS2VlcGluZy5hbmNlc3RvcnNbaV07XG4gICAgdmFyIHRvcExldmVsVGFyZ2V0SUQgPSBSZWFjdE1vdW50LmdldElEKHRvcExldmVsVGFyZ2V0KSB8fCAnJztcbiAgICBSZWFjdEV2ZW50TGlzdGVuZXIuX2hhbmRsZVRvcExldmVsKGJvb2tLZWVwaW5nLnRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIGJvb2tLZWVwaW5nLm5hdGl2ZUV2ZW50LCBnZXRFdmVudFRhcmdldChib29rS2VlcGluZy5uYXRpdmVFdmVudCkpO1xuICB9XG59XG5cbi8vIE5ldyBicm93c2VycyBoYXZlIGEgcGF0aCBhdHRyaWJ1dGUgb24gbmF0aXZlIGV2ZW50c1xuZnVuY3Rpb24gaGFuZGxlVG9wTGV2ZWxXaXRoUGF0aChib29rS2VlcGluZykge1xuICB2YXIgcGF0aCA9IGJvb2tLZWVwaW5nLm5hdGl2ZUV2ZW50LnBhdGg7XG4gIHZhciBjdXJyZW50TmF0aXZlVGFyZ2V0ID0gcGF0aFswXTtcbiAgdmFyIGV2ZW50c0ZpcmVkID0gMDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGN1cnJlbnRQYXRoRWxlbWVudCA9IHBhdGhbaV07XG4gICAgaWYgKGN1cnJlbnRQYXRoRWxlbWVudC5ub2RlVHlwZSA9PT0gRE9DVU1FTlRfRlJBR01FTlRfTk9ERV9UWVBFKSB7XG4gICAgICBjdXJyZW50TmF0aXZlVGFyZ2V0ID0gcGF0aFtpICsgMV07XG4gICAgfVxuICAgIC8vIFRPRE86IHNsb3dcbiAgICB2YXIgcmVhY3RQYXJlbnQgPSBSZWFjdE1vdW50LmdldEZpcnN0UmVhY3RET00oY3VycmVudFBhdGhFbGVtZW50KTtcbiAgICBpZiAocmVhY3RQYXJlbnQgPT09IGN1cnJlbnRQYXRoRWxlbWVudCkge1xuICAgICAgdmFyIGN1cnJlbnRQYXRoRWxlbWVudElEID0gUmVhY3RNb3VudC5nZXRJRChjdXJyZW50UGF0aEVsZW1lbnQpO1xuICAgICAgdmFyIG5ld1Jvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChjdXJyZW50UGF0aEVsZW1lbnRJRCk7XG4gICAgICBib29rS2VlcGluZy5hbmNlc3RvcnMucHVzaChjdXJyZW50UGF0aEVsZW1lbnQpO1xuXG4gICAgICB2YXIgdG9wTGV2ZWxUYXJnZXRJRCA9IFJlYWN0TW91bnQuZ2V0SUQoY3VycmVudFBhdGhFbGVtZW50KSB8fCAnJztcbiAgICAgIGV2ZW50c0ZpcmVkKys7XG4gICAgICBSZWFjdEV2ZW50TGlzdGVuZXIuX2hhbmRsZVRvcExldmVsKGJvb2tLZWVwaW5nLnRvcExldmVsVHlwZSwgY3VycmVudFBhdGhFbGVtZW50LCB0b3BMZXZlbFRhcmdldElELCBib29rS2VlcGluZy5uYXRpdmVFdmVudCwgY3VycmVudE5hdGl2ZVRhcmdldCk7XG5cbiAgICAgIC8vIEp1bXAgdG8gdGhlIHJvb3Qgb2YgdGhpcyBSZWFjdCByZW5kZXIgdHJlZVxuICAgICAgd2hpbGUgKGN1cnJlbnRQYXRoRWxlbWVudElEICE9PSBuZXdSb290SUQpIHtcbiAgICAgICAgaSsrO1xuICAgICAgICBjdXJyZW50UGF0aEVsZW1lbnQgPSBwYXRoW2ldO1xuICAgICAgICBjdXJyZW50UGF0aEVsZW1lbnRJRCA9IFJlYWN0TW91bnQuZ2V0SUQoY3VycmVudFBhdGhFbGVtZW50KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKGV2ZW50c0ZpcmVkID09PSAwKSB7XG4gICAgUmVhY3RFdmVudExpc3RlbmVyLl9oYW5kbGVUb3BMZXZlbChib29rS2VlcGluZy50b3BMZXZlbFR5cGUsIHdpbmRvdywgJycsIGJvb2tLZWVwaW5nLm5hdGl2ZUV2ZW50LCBnZXRFdmVudFRhcmdldChib29rS2VlcGluZy5uYXRpdmVFdmVudCkpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNjcm9sbFZhbHVlTW9uaXRvcihjYikge1xuICB2YXIgc2Nyb2xsUG9zaXRpb24gPSBnZXRVbmJvdW5kZWRTY3JvbGxQb3NpdGlvbih3aW5kb3cpO1xuICBjYihzY3JvbGxQb3NpdGlvbik7XG59XG5cbnZhciBSZWFjdEV2ZW50TGlzdGVuZXIgPSB7XG4gIF9lbmFibGVkOiB0cnVlLFxuICBfaGFuZGxlVG9wTGV2ZWw6IG51bGwsXG5cbiAgV0lORE9XX0hBTkRMRTogRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NID8gd2luZG93IDogbnVsbCxcblxuICBzZXRIYW5kbGVUb3BMZXZlbDogZnVuY3Rpb24gKGhhbmRsZVRvcExldmVsKSB7XG4gICAgUmVhY3RFdmVudExpc3RlbmVyLl9oYW5kbGVUb3BMZXZlbCA9IGhhbmRsZVRvcExldmVsO1xuICB9LFxuXG4gIHNldEVuYWJsZWQ6IGZ1bmN0aW9uIChlbmFibGVkKSB7XG4gICAgUmVhY3RFdmVudExpc3RlbmVyLl9lbmFibGVkID0gISFlbmFibGVkO1xuICB9LFxuXG4gIGlzRW5hYmxlZDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBSZWFjdEV2ZW50TGlzdGVuZXIuX2VuYWJsZWQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRyYXBzIHRvcC1sZXZlbCBldmVudHMgYnkgdXNpbmcgZXZlbnQgYnViYmxpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGhhbmRsZXJCYXNlTmFtZSBFdmVudCBuYW1lIChlLmcuIFwiY2xpY2tcIikuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBoYW5kbGUgRWxlbWVudCBvbiB3aGljaCB0byBhdHRhY2ggbGlzdGVuZXIuXG4gICAqIEByZXR1cm4gez9vYmplY3R9IEFuIG9iamVjdCB3aXRoIGEgcmVtb3ZlIGZ1bmN0aW9uIHdoaWNoIHdpbGwgZm9yY2VmdWxseVxuICAgKiAgICAgICAgICAgICAgICAgIHJlbW92ZSB0aGUgbGlzdGVuZXIuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdHJhcEJ1YmJsZWRFdmVudDogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgaGFuZGxlckJhc2VOYW1lLCBoYW5kbGUpIHtcbiAgICB2YXIgZWxlbWVudCA9IGhhbmRsZTtcbiAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gRXZlbnRMaXN0ZW5lci5saXN0ZW4oZWxlbWVudCwgaGFuZGxlckJhc2VOYW1lLCBSZWFjdEV2ZW50TGlzdGVuZXIuZGlzcGF0Y2hFdmVudC5iaW5kKG51bGwsIHRvcExldmVsVHlwZSkpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUcmFwcyBhIHRvcC1sZXZlbCBldmVudCBieSB1c2luZyBldmVudCBjYXB0dXJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IGhhbmRsZXJCYXNlTmFtZSBFdmVudCBuYW1lIChlLmcuIFwiY2xpY2tcIikuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBoYW5kbGUgRWxlbWVudCBvbiB3aGljaCB0byBhdHRhY2ggbGlzdGVuZXIuXG4gICAqIEByZXR1cm4gez9vYmplY3R9IEFuIG9iamVjdCB3aXRoIGEgcmVtb3ZlIGZ1bmN0aW9uIHdoaWNoIHdpbGwgZm9yY2VmdWxseVxuICAgKiAgICAgICAgICAgICAgICAgIHJlbW92ZSB0aGUgbGlzdGVuZXIuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdHJhcENhcHR1cmVkRXZlbnQ6IGZ1bmN0aW9uICh0b3BMZXZlbFR5cGUsIGhhbmRsZXJCYXNlTmFtZSwgaGFuZGxlKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBoYW5kbGU7XG4gICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIEV2ZW50TGlzdGVuZXIuY2FwdHVyZShlbGVtZW50LCBoYW5kbGVyQmFzZU5hbWUsIFJlYWN0RXZlbnRMaXN0ZW5lci5kaXNwYXRjaEV2ZW50LmJpbmQobnVsbCwgdG9wTGV2ZWxUeXBlKSk7XG4gIH0sXG5cbiAgbW9uaXRvclNjcm9sbFZhbHVlOiBmdW5jdGlvbiAocmVmcmVzaCkge1xuICAgIHZhciBjYWxsYmFjayA9IHNjcm9sbFZhbHVlTW9uaXRvci5iaW5kKG51bGwsIHJlZnJlc2gpO1xuICAgIEV2ZW50TGlzdGVuZXIubGlzdGVuKHdpbmRvdywgJ3Njcm9sbCcsIGNhbGxiYWNrKTtcbiAgfSxcblxuICBkaXNwYXRjaEV2ZW50OiBmdW5jdGlvbiAodG9wTGV2ZWxUeXBlLCBuYXRpdmVFdmVudCkge1xuICAgIGlmICghUmVhY3RFdmVudExpc3RlbmVyLl9lbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGJvb2tLZWVwaW5nID0gVG9wTGV2ZWxDYWxsYmFja0Jvb2tLZWVwaW5nLmdldFBvb2xlZCh0b3BMZXZlbFR5cGUsIG5hdGl2ZUV2ZW50KTtcbiAgICB0cnkge1xuICAgICAgLy8gRXZlbnQgcXVldWUgYmVpbmcgcHJvY2Vzc2VkIGluIHRoZSBzYW1lIGN5Y2xlIGFsbG93c1xuICAgICAgLy8gYHByZXZlbnREZWZhdWx0YC5cbiAgICAgIFJlYWN0VXBkYXRlcy5iYXRjaGVkVXBkYXRlcyhoYW5kbGVUb3BMZXZlbEltcGwsIGJvb2tLZWVwaW5nKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgVG9wTGV2ZWxDYWxsYmFja0Jvb2tLZWVwaW5nLnJlbGVhc2UoYm9va0tlZXBpbmcpO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdEV2ZW50TGlzdGVuZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0SW5qZWN0aW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRE9NUHJvcGVydHkgPSByZXF1aXJlKCcuL0RPTVByb3BlcnR5Jyk7XG52YXIgRXZlbnRQbHVnaW5IdWIgPSByZXF1aXJlKCcuL0V2ZW50UGx1Z2luSHViJyk7XG52YXIgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudCcpO1xudmFyIFJlYWN0Q2xhc3MgPSByZXF1aXJlKCcuL1JlYWN0Q2xhc3MnKTtcbnZhciBSZWFjdEVtcHR5Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVtcHR5Q29tcG9uZW50Jyk7XG52YXIgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyID0gcmVxdWlyZSgnLi9SZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXInKTtcbnZhciBSZWFjdE5hdGl2ZUNvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3ROYXRpdmVDb21wb25lbnQnKTtcbnZhciBSZWFjdFBlcmYgPSByZXF1aXJlKCcuL1JlYWN0UGVyZicpO1xudmFyIFJlYWN0Um9vdEluZGV4ID0gcmVxdWlyZSgnLi9SZWFjdFJvb3RJbmRleCcpO1xudmFyIFJlYWN0VXBkYXRlcyA9IHJlcXVpcmUoJy4vUmVhY3RVcGRhdGVzJyk7XG5cbnZhciBSZWFjdEluamVjdGlvbiA9IHtcbiAgQ29tcG9uZW50OiBSZWFjdENvbXBvbmVudEVudmlyb25tZW50LmluamVjdGlvbixcbiAgQ2xhc3M6IFJlYWN0Q2xhc3MuaW5qZWN0aW9uLFxuICBET01Qcm9wZXJ0eTogRE9NUHJvcGVydHkuaW5qZWN0aW9uLFxuICBFbXB0eUNvbXBvbmVudDogUmVhY3RFbXB0eUNvbXBvbmVudC5pbmplY3Rpb24sXG4gIEV2ZW50UGx1Z2luSHViOiBFdmVudFBsdWdpbkh1Yi5pbmplY3Rpb24sXG4gIEV2ZW50RW1pdHRlcjogUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmluamVjdGlvbixcbiAgTmF0aXZlQ29tcG9uZW50OiBSZWFjdE5hdGl2ZUNvbXBvbmVudC5pbmplY3Rpb24sXG4gIFBlcmY6IFJlYWN0UGVyZi5pbmplY3Rpb24sXG4gIFJvb3RJbmRleDogUmVhY3RSb290SW5kZXguaW5qZWN0aW9uLFxuICBVcGRhdGVzOiBSZWFjdFVwZGF0ZXMuaW5qZWN0aW9uXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0SW5qZWN0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdElucHV0U2VsZWN0aW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RET01TZWxlY3Rpb24gPSByZXF1aXJlKCcuL1JlYWN0RE9NU2VsZWN0aW9uJyk7XG5cbnZhciBjb250YWluc05vZGUgPSByZXF1aXJlKCdmYmpzL2xpYi9jb250YWluc05vZGUnKTtcbnZhciBmb2N1c05vZGUgPSByZXF1aXJlKCdmYmpzL2xpYi9mb2N1c05vZGUnKTtcbnZhciBnZXRBY3RpdmVFbGVtZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvZ2V0QWN0aXZlRWxlbWVudCcpO1xuXG5mdW5jdGlvbiBpc0luRG9jdW1lbnQobm9kZSkge1xuICByZXR1cm4gY29udGFpbnNOb2RlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgbm9kZSk7XG59XG5cbi8qKlxuICogQFJlYWN0SW5wdXRTZWxlY3Rpb246IFJlYWN0IGlucHV0IHNlbGVjdGlvbiBtb2R1bGUuIEJhc2VkIG9uIFNlbGVjdGlvbi5qcyxcbiAqIGJ1dCBtb2RpZmllZCB0byBiZSBzdWl0YWJsZSBmb3IgcmVhY3QgYW5kIGhhcyBhIGNvdXBsZSBvZiBidWcgZml4ZXMgKGRvZXNuJ3RcbiAqIGFzc3VtZSBidXR0b25zIGhhdmUgcmFuZ2Ugc2VsZWN0aW9ucyBhbGxvd2VkKS5cbiAqIElucHV0IHNlbGVjdGlvbiBtb2R1bGUgZm9yIFJlYWN0LlxuICovXG52YXIgUmVhY3RJbnB1dFNlbGVjdGlvbiA9IHtcblxuICBoYXNTZWxlY3Rpb25DYXBhYmlsaXRpZXM6IGZ1bmN0aW9uIChlbGVtKSB7XG4gICAgdmFyIG5vZGVOYW1lID0gZWxlbSAmJiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICByZXR1cm4gbm9kZU5hbWUgJiYgKG5vZGVOYW1lID09PSAnaW5wdXQnICYmIGVsZW0udHlwZSA9PT0gJ3RleHQnIHx8IG5vZGVOYW1lID09PSAndGV4dGFyZWEnIHx8IGVsZW0uY29udGVudEVkaXRhYmxlID09PSAndHJ1ZScpO1xuICB9LFxuXG4gIGdldFNlbGVjdGlvbkluZm9ybWF0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGZvY3VzZWRFbGVtID0gZ2V0QWN0aXZlRWxlbWVudCgpO1xuICAgIHJldHVybiB7XG4gICAgICBmb2N1c2VkRWxlbTogZm9jdXNlZEVsZW0sXG4gICAgICBzZWxlY3Rpb25SYW5nZTogUmVhY3RJbnB1dFNlbGVjdGlvbi5oYXNTZWxlY3Rpb25DYXBhYmlsaXRpZXMoZm9jdXNlZEVsZW0pID8gUmVhY3RJbnB1dFNlbGVjdGlvbi5nZXRTZWxlY3Rpb24oZm9jdXNlZEVsZW0pIDogbnVsbFxuICAgIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEByZXN0b3JlU2VsZWN0aW9uOiBJZiBhbnkgc2VsZWN0aW9uIGluZm9ybWF0aW9uIHdhcyBwb3RlbnRpYWxseSBsb3N0LFxuICAgKiByZXN0b3JlIGl0LiBUaGlzIGlzIHVzZWZ1bCB3aGVuIHBlcmZvcm1pbmcgb3BlcmF0aW9ucyB0aGF0IGNvdWxkIHJlbW92ZSBkb21cbiAgICogbm9kZXMgYW5kIHBsYWNlIHRoZW0gYmFjayBpbiwgcmVzdWx0aW5nIGluIGZvY3VzIGJlaW5nIGxvc3QuXG4gICAqL1xuICByZXN0b3JlU2VsZWN0aW9uOiBmdW5jdGlvbiAocHJpb3JTZWxlY3Rpb25JbmZvcm1hdGlvbikge1xuICAgIHZhciBjdXJGb2N1c2VkRWxlbSA9IGdldEFjdGl2ZUVsZW1lbnQoKTtcbiAgICB2YXIgcHJpb3JGb2N1c2VkRWxlbSA9IHByaW9yU2VsZWN0aW9uSW5mb3JtYXRpb24uZm9jdXNlZEVsZW07XG4gICAgdmFyIHByaW9yU2VsZWN0aW9uUmFuZ2UgPSBwcmlvclNlbGVjdGlvbkluZm9ybWF0aW9uLnNlbGVjdGlvblJhbmdlO1xuICAgIGlmIChjdXJGb2N1c2VkRWxlbSAhPT0gcHJpb3JGb2N1c2VkRWxlbSAmJiBpc0luRG9jdW1lbnQocHJpb3JGb2N1c2VkRWxlbSkpIHtcbiAgICAgIGlmIChSZWFjdElucHV0U2VsZWN0aW9uLmhhc1NlbGVjdGlvbkNhcGFiaWxpdGllcyhwcmlvckZvY3VzZWRFbGVtKSkge1xuICAgICAgICBSZWFjdElucHV0U2VsZWN0aW9uLnNldFNlbGVjdGlvbihwcmlvckZvY3VzZWRFbGVtLCBwcmlvclNlbGVjdGlvblJhbmdlKTtcbiAgICAgIH1cbiAgICAgIGZvY3VzTm9kZShwcmlvckZvY3VzZWRFbGVtKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBnZXRTZWxlY3Rpb246IEdldHMgdGhlIHNlbGVjdGlvbiBib3VuZHMgb2YgYSBmb2N1c2VkIHRleHRhcmVhLCBpbnB1dCBvclxuICAgKiBjb250ZW50RWRpdGFibGUgbm9kZS5cbiAgICogLUBpbnB1dDogTG9vayB1cCBzZWxlY3Rpb24gYm91bmRzIG9mIHRoaXMgaW5wdXRcbiAgICogLUByZXR1cm4ge3N0YXJ0OiBzZWxlY3Rpb25TdGFydCwgZW5kOiBzZWxlY3Rpb25FbmR9XG4gICAqL1xuICBnZXRTZWxlY3Rpb246IGZ1bmN0aW9uIChpbnB1dCkge1xuICAgIHZhciBzZWxlY3Rpb247XG5cbiAgICBpZiAoJ3NlbGVjdGlvblN0YXJ0JyBpbiBpbnB1dCkge1xuICAgICAgLy8gTW9kZXJuIGJyb3dzZXIgd2l0aCBpbnB1dCBvciB0ZXh0YXJlYS5cbiAgICAgIHNlbGVjdGlvbiA9IHtcbiAgICAgICAgc3RhcnQ6IGlucHV0LnNlbGVjdGlvblN0YXJ0LFxuICAgICAgICBlbmQ6IGlucHV0LnNlbGVjdGlvbkVuZFxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKGRvY3VtZW50LnNlbGVjdGlvbiAmJiAoaW5wdXQubm9kZU5hbWUgJiYgaW5wdXQubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0JykpIHtcbiAgICAgIC8vIElFOCBpbnB1dC5cbiAgICAgIHZhciByYW5nZSA9IGRvY3VtZW50LnNlbGVjdGlvbi5jcmVhdGVSYW5nZSgpO1xuICAgICAgLy8gVGhlcmUgY2FuIG9ubHkgYmUgb25lIHNlbGVjdGlvbiBwZXIgZG9jdW1lbnQgaW4gSUUsIHNvIGl0IG11c3RcbiAgICAgIC8vIGJlIGluIG91ciBlbGVtZW50LlxuICAgICAgaWYgKHJhbmdlLnBhcmVudEVsZW1lbnQoKSA9PT0gaW5wdXQpIHtcbiAgICAgICAgc2VsZWN0aW9uID0ge1xuICAgICAgICAgIHN0YXJ0OiAtcmFuZ2UubW92ZVN0YXJ0KCdjaGFyYWN0ZXInLCAtaW5wdXQudmFsdWUubGVuZ3RoKSxcbiAgICAgICAgICBlbmQ6IC1yYW5nZS5tb3ZlRW5kKCdjaGFyYWN0ZXInLCAtaW5wdXQudmFsdWUubGVuZ3RoKVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDb250ZW50IGVkaXRhYmxlIG9yIG9sZCBJRSB0ZXh0YXJlYS5cbiAgICAgIHNlbGVjdGlvbiA9IFJlYWN0RE9NU2VsZWN0aW9uLmdldE9mZnNldHMoaW5wdXQpO1xuICAgIH1cblxuICAgIHJldHVybiBzZWxlY3Rpb24gfHwgeyBzdGFydDogMCwgZW5kOiAwIH07XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBzZXRTZWxlY3Rpb246IFNldHMgdGhlIHNlbGVjdGlvbiBib3VuZHMgb2YgYSB0ZXh0YXJlYSBvciBpbnB1dCBhbmQgZm9jdXNlc1xuICAgKiB0aGUgaW5wdXQuXG4gICAqIC1AaW5wdXQgICAgIFNldCBzZWxlY3Rpb24gYm91bmRzIG9mIHRoaXMgaW5wdXQgb3IgdGV4dGFyZWFcbiAgICogLUBvZmZzZXRzICAgT2JqZWN0IG9mIHNhbWUgZm9ybSB0aGF0IGlzIHJldHVybmVkIGZyb20gZ2V0KlxuICAgKi9cbiAgc2V0U2VsZWN0aW9uOiBmdW5jdGlvbiAoaW5wdXQsIG9mZnNldHMpIHtcbiAgICB2YXIgc3RhcnQgPSBvZmZzZXRzLnN0YXJ0O1xuICAgIHZhciBlbmQgPSBvZmZzZXRzLmVuZDtcbiAgICBpZiAodHlwZW9mIGVuZCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGVuZCA9IHN0YXJ0O1xuICAgIH1cblxuICAgIGlmICgnc2VsZWN0aW9uU3RhcnQnIGluIGlucHV0KSB7XG4gICAgICBpbnB1dC5zZWxlY3Rpb25TdGFydCA9IHN0YXJ0O1xuICAgICAgaW5wdXQuc2VsZWN0aW9uRW5kID0gTWF0aC5taW4oZW5kLCBpbnB1dC52YWx1ZS5sZW5ndGgpO1xuICAgIH0gZWxzZSBpZiAoZG9jdW1lbnQuc2VsZWN0aW9uICYmIChpbnB1dC5ub2RlTmFtZSAmJiBpbnB1dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnKSkge1xuICAgICAgdmFyIHJhbmdlID0gaW5wdXQuY3JlYXRlVGV4dFJhbmdlKCk7XG4gICAgICByYW5nZS5jb2xsYXBzZSh0cnVlKTtcbiAgICAgIHJhbmdlLm1vdmVTdGFydCgnY2hhcmFjdGVyJywgc3RhcnQpO1xuICAgICAgcmFuZ2UubW92ZUVuZCgnY2hhcmFjdGVyJywgZW5kIC0gc3RhcnQpO1xuICAgICAgcmFuZ2Uuc2VsZWN0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIFJlYWN0RE9NU2VsZWN0aW9uLnNldE9mZnNldHMoaW5wdXQsIG9mZnNldHMpO1xuICAgIH1cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdElucHV0U2VsZWN0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdEluc3RhbmNlSGFuZGxlc1xuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdFJvb3RJbmRleCA9IHJlcXVpcmUoJy4vUmVhY3RSb290SW5kZXgnKTtcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG52YXIgU0VQQVJBVE9SID0gJy4nO1xudmFyIFNFUEFSQVRPUl9MRU5HVEggPSBTRVBBUkFUT1IubGVuZ3RoO1xuXG4vKipcbiAqIE1heGltdW0gZGVwdGggb2YgdHJhdmVyc2FscyBiZWZvcmUgd2UgY29uc2lkZXIgdGhlIHBvc3NpYmlsaXR5IG9mIGEgYmFkIElELlxuICovXG52YXIgTUFYX1RSRUVfREVQVEggPSAxMDAwMDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgRE9NIElEIHByZWZpeCB0byB1c2Ugd2hlbiBtb3VudGluZyBSZWFjdCBjb21wb25lbnRzLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBBIHVuaXF1ZSBpbnRlZ2VyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IFJlYWN0IHJvb3QgSUQuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gZ2V0UmVhY3RSb290SURTdHJpbmcoaW5kZXgpIHtcbiAgcmV0dXJuIFNFUEFSQVRPUiArIGluZGV4LnRvU3RyaW5nKDM2KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYSBjaGFyYWN0ZXIgaW4gdGhlIHN1cHBsaWVkIElEIGlzIGEgc2VwYXJhdG9yIG9yIHRoZSBlbmQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIEEgUmVhY3QgRE9NIElELlxuICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4IG9mIHRoZSBjaGFyYWN0ZXIgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBjaGFyYWN0ZXIgaXMgYSBzZXBhcmF0b3Igb3IgZW5kIG9mIHRoZSBJRC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGlzQm91bmRhcnkoaWQsIGluZGV4KSB7XG4gIHJldHVybiBpZC5jaGFyQXQoaW5kZXgpID09PSBTRVBBUkFUT1IgfHwgaW5kZXggPT09IGlkLmxlbmd0aDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgdGhlIHN1cHBsaWVkIHN0cmluZyBpcyBhIHZhbGlkIFJlYWN0IERPTSBJRC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gaWQgQSBSZWFjdCBET00gSUQsIG1heWJlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgc3RyaW5nIGlzIGEgdmFsaWQgUmVhY3QgRE9NIElELlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gaXNWYWxpZElEKGlkKSB7XG4gIHJldHVybiBpZCA9PT0gJycgfHwgaWQuY2hhckF0KDApID09PSBTRVBBUkFUT1IgJiYgaWQuY2hhckF0KGlkLmxlbmd0aCAtIDEpICE9PSBTRVBBUkFUT1I7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSBmaXJzdCBJRCBpcyBhbiBhbmNlc3RvciBvZiBvciBlcXVhbCB0byB0aGUgc2Vjb25kIElELlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBhbmNlc3RvcklEXG4gKiBAcGFyYW0ge3N0cmluZ30gZGVzY2VuZGFudElEXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGBhbmNlc3RvcklEYCBpcyBhbiBhbmNlc3RvciBvZiBgZGVzY2VuZGFudElEYC5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBpc0FuY2VzdG9ySURPZihhbmNlc3RvcklELCBkZXNjZW5kYW50SUQpIHtcbiAgcmV0dXJuIGRlc2NlbmRhbnRJRC5pbmRleE9mKGFuY2VzdG9ySUQpID09PSAwICYmIGlzQm91bmRhcnkoZGVzY2VuZGFudElELCBhbmNlc3RvcklELmxlbmd0aCk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgcGFyZW50IElEIG9mIHRoZSBzdXBwbGllZCBSZWFjdCBET00gSUQsIGBpZGAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIGEgY29tcG9uZW50LlxuICogQHJldHVybiB7c3RyaW5nfSBJRCBvZiB0aGUgcGFyZW50LCBvciBhbiBlbXB0eSBzdHJpbmcuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnZXRQYXJlbnRJRChpZCkge1xuICByZXR1cm4gaWQgPyBpZC5zdWJzdHIoMCwgaWQubGFzdEluZGV4T2YoU0VQQVJBVE9SKSkgOiAnJztcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBuZXh0IERPTSBJRCBvbiB0aGUgdHJlZSBwYXRoIGZyb20gdGhlIHN1cHBsaWVkIGBhbmNlc3RvcklEYCB0byB0aGVcbiAqIHN1cHBsaWVkIGBkZXN0aW5hdGlvbklEYC4gSWYgdGhleSBhcmUgZXF1YWwsIHRoZSBJRCBpcyByZXR1cm5lZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYW5jZXN0b3JJRCBJRCBvZiBhbiBhbmNlc3RvciBub2RlIG9mIGBkZXN0aW5hdGlvbklEYC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkZXN0aW5hdGlvbklEIElEIG9mIHRoZSBkZXN0aW5hdGlvbiBub2RlLlxuICogQHJldHVybiB7c3RyaW5nfSBOZXh0IElEIG9uIHRoZSBwYXRoIGZyb20gYGFuY2VzdG9ySURgIHRvIGBkZXN0aW5hdGlvbklEYC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGdldE5leHREZXNjZW5kYW50SUQoYW5jZXN0b3JJRCwgZGVzdGluYXRpb25JRCkge1xuICAhKGlzVmFsaWRJRChhbmNlc3RvcklEKSAmJiBpc1ZhbGlkSUQoZGVzdGluYXRpb25JRCkpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2dldE5leHREZXNjZW5kYW50SUQoJXMsICVzKTogUmVjZWl2ZWQgYW4gaW52YWxpZCBSZWFjdCBET00gSUQuJywgYW5jZXN0b3JJRCwgZGVzdGluYXRpb25JRCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAhaXNBbmNlc3RvcklET2YoYW5jZXN0b3JJRCwgZGVzdGluYXRpb25JRCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZ2V0TmV4dERlc2NlbmRhbnRJRCguLi4pOiBSZWFjdCBoYXMgbWFkZSBhbiBpbnZhbGlkIGFzc3VtcHRpb24gYWJvdXQgJyArICd0aGUgRE9NIGhpZXJhcmNoeS4gRXhwZWN0ZWQgYCVzYCB0byBiZSBhbiBhbmNlc3RvciBvZiBgJXNgLicsIGFuY2VzdG9ySUQsIGRlc3RpbmF0aW9uSUQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgaWYgKGFuY2VzdG9ySUQgPT09IGRlc3RpbmF0aW9uSUQpIHtcbiAgICByZXR1cm4gYW5jZXN0b3JJRDtcbiAgfVxuICAvLyBTa2lwIG92ZXIgdGhlIGFuY2VzdG9yIGFuZCB0aGUgaW1tZWRpYXRlIHNlcGFyYXRvci4gVHJhdmVyc2UgdW50aWwgd2UgaGl0XG4gIC8vIGFub3RoZXIgc2VwYXJhdG9yIG9yIHdlIHJlYWNoIHRoZSBlbmQgb2YgYGRlc3RpbmF0aW9uSURgLlxuICB2YXIgc3RhcnQgPSBhbmNlc3RvcklELmxlbmd0aCArIFNFUEFSQVRPUl9MRU5HVEg7XG4gIHZhciBpO1xuICBmb3IgKGkgPSBzdGFydDsgaSA8IGRlc3RpbmF0aW9uSUQubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoaXNCb3VuZGFyeShkZXN0aW5hdGlvbklELCBpKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHJldHVybiBkZXN0aW5hdGlvbklELnN1YnN0cigwLCBpKTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBuZWFyZXN0IGNvbW1vbiBhbmNlc3RvciBJRCBvZiB0d28gSURzLlxuICpcbiAqIFVzaW5nIHRoaXMgSUQgc2NoZW1lLCB0aGUgbmVhcmVzdCBjb21tb24gYW5jZXN0b3IgSUQgaXMgdGhlIGxvbmdlc3QgY29tbW9uXG4gKiBwcmVmaXggb2YgdGhlIHR3byBJRHMgdGhhdCBpbW1lZGlhdGVseSBwcmVjZWRlZCBhIFwibWFya2VyXCIgaW4gYm90aCBzdHJpbmdzLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBvbmVJRFxuICogQHBhcmFtIHtzdHJpbmd9IHR3b0lEXG4gKiBAcmV0dXJuIHtzdHJpbmd9IE5lYXJlc3QgY29tbW9uIGFuY2VzdG9yIElELCBvciB0aGUgZW1wdHkgc3RyaW5nIGlmIG5vbmUuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnZXRGaXJzdENvbW1vbkFuY2VzdG9ySUQob25lSUQsIHR3b0lEKSB7XG4gIHZhciBtaW5MZW5ndGggPSBNYXRoLm1pbihvbmVJRC5sZW5ndGgsIHR3b0lELmxlbmd0aCk7XG4gIGlmIChtaW5MZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgdmFyIGxhc3RDb21tb25NYXJrZXJJbmRleCA9IDA7XG4gIC8vIFVzZSBgPD1gIHRvIHRyYXZlcnNlIHVudGlsIHRoZSBcIkVPTFwiIG9mIHRoZSBzaG9ydGVyIHN0cmluZy5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPD0gbWluTGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoaXNCb3VuZGFyeShvbmVJRCwgaSkgJiYgaXNCb3VuZGFyeSh0d29JRCwgaSkpIHtcbiAgICAgIGxhc3RDb21tb25NYXJrZXJJbmRleCA9IGk7XG4gICAgfSBlbHNlIGlmIChvbmVJRC5jaGFyQXQoaSkgIT09IHR3b0lELmNoYXJBdChpKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHZhciBsb25nZXN0Q29tbW9uSUQgPSBvbmVJRC5zdWJzdHIoMCwgbGFzdENvbW1vbk1hcmtlckluZGV4KTtcbiAgIWlzVmFsaWRJRChsb25nZXN0Q29tbW9uSUQpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2dldEZpcnN0Q29tbW9uQW5jZXN0b3JJRCglcywgJXMpOiBFeHBlY3RlZCBhIHZhbGlkIFJlYWN0IERPTSBJRDogJXMnLCBvbmVJRCwgdHdvSUQsIGxvbmdlc3RDb21tb25JRCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICByZXR1cm4gbG9uZ2VzdENvbW1vbklEO1xufVxuXG4vKipcbiAqIFRyYXZlcnNlcyB0aGUgcGFyZW50IHBhdGggYmV0d2VlbiB0d28gSURzIChlaXRoZXIgdXAgb3IgZG93bikuIFRoZSBJRHMgbXVzdFxuICogbm90IGJlIHRoZSBzYW1lLCBhbmQgdGhlcmUgbXVzdCBleGlzdCBhIHBhcmVudCBwYXRoIGJldHdlZW4gdGhlbS4gSWYgdGhlXG4gKiBjYWxsYmFjayByZXR1cm5zIGBmYWxzZWAsIHRyYXZlcnNhbCBpcyBzdG9wcGVkLlxuICpcbiAqIEBwYXJhbSB7P3N0cmluZ30gc3RhcnQgSUQgYXQgd2hpY2ggdG8gc3RhcnQgdHJhdmVyc2FsLlxuICogQHBhcmFtIHs/c3RyaW5nfSBzdG9wIElEIGF0IHdoaWNoIHRvIGVuZCB0cmF2ZXJzYWwuXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYiBDYWxsYmFjayB0byBpbnZva2UgZWFjaCBJRCB3aXRoLlxuICogQHBhcmFtIHsqfSBhcmcgQXJndW1lbnQgdG8gaW52b2tlIHRoZSBjYWxsYmFjayB3aXRoLlxuICogQHBhcmFtIHs/Ym9vbGVhbn0gc2tpcEZpcnN0IFdoZXRoZXIgb3Igbm90IHRvIHNraXAgdGhlIGZpcnN0IG5vZGUuXG4gKiBAcGFyYW0gez9ib29sZWFufSBza2lwTGFzdCBXaGV0aGVyIG9yIG5vdCB0byBza2lwIHRoZSBsYXN0IG5vZGUuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiB0cmF2ZXJzZVBhcmVudFBhdGgoc3RhcnQsIHN0b3AsIGNiLCBhcmcsIHNraXBGaXJzdCwgc2tpcExhc3QpIHtcbiAgc3RhcnQgPSBzdGFydCB8fCAnJztcbiAgc3RvcCA9IHN0b3AgfHwgJyc7XG4gICEoc3RhcnQgIT09IHN0b3ApID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3RyYXZlcnNlUGFyZW50UGF0aCguLi4pOiBDYW5ub3QgdHJhdmVyc2UgZnJvbSBhbmQgdG8gdGhlIHNhbWUgSUQsIGAlc2AuJywgc3RhcnQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgdmFyIHRyYXZlcnNlVXAgPSBpc0FuY2VzdG9ySURPZihzdG9wLCBzdGFydCk7XG4gICEodHJhdmVyc2VVcCB8fCBpc0FuY2VzdG9ySURPZihzdGFydCwgc3RvcCkpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3RyYXZlcnNlUGFyZW50UGF0aCglcywgJXMsIC4uLik6IENhbm5vdCB0cmF2ZXJzZSBmcm9tIHR3byBJRHMgdGhhdCBkbyAnICsgJ25vdCBoYXZlIGEgcGFyZW50IHBhdGguJywgc3RhcnQsIHN0b3ApIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgLy8gVHJhdmVyc2UgZnJvbSBgc3RhcnRgIHRvIGBzdG9wYCBvbmUgZGVwdGggYXQgYSB0aW1lLlxuICB2YXIgZGVwdGggPSAwO1xuICB2YXIgdHJhdmVyc2UgPSB0cmF2ZXJzZVVwID8gZ2V0UGFyZW50SUQgOiBnZXROZXh0RGVzY2VuZGFudElEO1xuICBmb3IgKHZhciBpZCA9IHN0YXJ0OzsgLyogdW50aWwgYnJlYWsgKi9pZCA9IHRyYXZlcnNlKGlkLCBzdG9wKSkge1xuICAgIHZhciByZXQ7XG4gICAgaWYgKCghc2tpcEZpcnN0IHx8IGlkICE9PSBzdGFydCkgJiYgKCFza2lwTGFzdCB8fCBpZCAhPT0gc3RvcCkpIHtcbiAgICAgIHJldCA9IGNiKGlkLCB0cmF2ZXJzZVVwLCBhcmcpO1xuICAgIH1cbiAgICBpZiAocmV0ID09PSBmYWxzZSB8fCBpZCA9PT0gc3RvcCkge1xuICAgICAgLy8gT25seSBicmVhayAvL2FmdGVyLy8gdmlzaXRpbmcgYHN0b3BgLlxuICAgICAgYnJlYWs7XG4gICAgfVxuICAgICEoZGVwdGgrKyA8IE1BWF9UUkVFX0RFUFRIKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd0cmF2ZXJzZVBhcmVudFBhdGgoJXMsICVzLCAuLi4pOiBEZXRlY3RlZCBhbiBpbmZpbml0ZSBsb29wIHdoaWxlICcgKyAndHJhdmVyc2luZyB0aGUgUmVhY3QgRE9NIElEIHRyZWUuIFRoaXMgbWF5IGJlIGR1ZSB0byBtYWxmb3JtZWQgSURzOiAlcycsIHN0YXJ0LCBzdG9wLCBpZCkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICB9XG59XG5cbi8qKlxuICogTWFuYWdlcyB0aGUgSURzIGFzc2lnbmVkIHRvIERPTSByZXByZXNlbnRhdGlvbnMgb2YgUmVhY3QgY29tcG9uZW50cy4gVGhpc1xuICogdXNlcyBhIHNwZWNpZmljIHNjaGVtZSBpbiBvcmRlciB0byB0cmF2ZXJzZSB0aGUgRE9NIGVmZmljaWVudGx5IChlLmcuIGluXG4gKiBvcmRlciB0byBzaW11bGF0ZSBldmVudHMpLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG52YXIgUmVhY3RJbnN0YW5jZUhhbmRsZXMgPSB7XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBSZWFjdCByb290IElEXG4gICAqIEByZXR1cm4ge3N0cmluZ30gQSBSZWFjdCByb290IElELlxuICAgKi9cbiAgY3JlYXRlUmVhY3RSb290SUQ6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gZ2V0UmVhY3RSb290SURTdHJpbmcoUmVhY3RSb290SW5kZXguY3JlYXRlUmVhY3RSb290SW5kZXgoKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBSZWFjdCBJRCBieSBqb2luaW5nIGEgcm9vdCBJRCB3aXRoIGEgbmFtZS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHJvb3RJRCBSb290IElEIG9mIGEgcGFyZW50IGNvbXBvbmVudC5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgQSBjb21wb25lbnQncyBuYW1lIChhcyBmbGF0dGVuZWQgY2hpbGRyZW4pLlxuICAgKiBAcmV0dXJuIHtzdHJpbmd9IEEgUmVhY3QgSUQuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgY3JlYXRlUmVhY3RJRDogZnVuY3Rpb24gKHJvb3RJRCwgbmFtZSkge1xuICAgIHJldHVybiByb290SUQgKyBuYW1lO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBET00gSUQgb2YgdGhlIFJlYWN0IGNvbXBvbmVudCB0aGF0IGlzIHRoZSByb290IG9mIHRoZSB0cmVlIHRoYXRcbiAgICogY29udGFpbnMgdGhlIFJlYWN0IGNvbXBvbmVudCB3aXRoIHRoZSBzdXBwbGllZCBET00gSUQuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBET00gSUQgb2YgYSBSZWFjdCBjb21wb25lbnQuXG4gICAqIEByZXR1cm4gez9zdHJpbmd9IERPTSBJRCBvZiB0aGUgUmVhY3QgY29tcG9uZW50IHRoYXQgaXMgdGhlIHJvb3QuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZ2V0UmVhY3RSb290SURGcm9tTm9kZUlEOiBmdW5jdGlvbiAoaWQpIHtcbiAgICBpZiAoaWQgJiYgaWQuY2hhckF0KDApID09PSBTRVBBUkFUT1IgJiYgaWQubGVuZ3RoID4gMSkge1xuICAgICAgdmFyIGluZGV4ID0gaWQuaW5kZXhPZihTRVBBUkFUT1IsIDEpO1xuICAgICAgcmV0dXJuIGluZGV4ID4gLTEgPyBpZC5zdWJzdHIoMCwgaW5kZXgpIDogaWQ7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUcmF2ZXJzZXMgdGhlIElEIGhpZXJhcmNoeSBhbmQgaW52b2tlcyB0aGUgc3VwcGxpZWQgYGNiYCBvbiBhbnkgSURzIHRoYXRcbiAgICogc2hvdWxkIHdvdWxkIHJlY2VpdmUgYSBgbW91c2VFbnRlcmAgb3IgYG1vdXNlTGVhdmVgIGV2ZW50LlxuICAgKlxuICAgKiBOT1RFOiBEb2VzIG5vdCBpbnZva2UgdGhlIGNhbGxiYWNrIG9uIHRoZSBuZWFyZXN0IGNvbW1vbiBhbmNlc3RvciBiZWNhdXNlXG4gICAqIG5vdGhpbmcgXCJlbnRlcmVkXCIgb3IgXCJsZWZ0XCIgdGhhdCBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbGVhdmVJRCBJRCBiZWluZyBsZWZ0LlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZW50ZXJJRCBJRCBiZWluZyBlbnRlcmVkLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYiBDYWxsYmFjayB0byBpbnZva2Ugb24gZWFjaCBlbnRlcmVkL2xlZnQgSUQuXG4gICAqIEBwYXJhbSB7Kn0gdXBBcmcgQXJndW1lbnQgdG8gaW52b2tlIHRoZSBjYWxsYmFjayB3aXRoIG9uIGxlZnQgSURzLlxuICAgKiBAcGFyYW0geyp9IGRvd25BcmcgQXJndW1lbnQgdG8gaW52b2tlIHRoZSBjYWxsYmFjayB3aXRoIG9uIGVudGVyZWQgSURzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHRyYXZlcnNlRW50ZXJMZWF2ZTogZnVuY3Rpb24gKGxlYXZlSUQsIGVudGVySUQsIGNiLCB1cEFyZywgZG93bkFyZykge1xuICAgIHZhciBhbmNlc3RvcklEID0gZ2V0Rmlyc3RDb21tb25BbmNlc3RvcklEKGxlYXZlSUQsIGVudGVySUQpO1xuICAgIGlmIChhbmNlc3RvcklEICE9PSBsZWF2ZUlEKSB7XG4gICAgICB0cmF2ZXJzZVBhcmVudFBhdGgobGVhdmVJRCwgYW5jZXN0b3JJRCwgY2IsIHVwQXJnLCBmYWxzZSwgdHJ1ZSk7XG4gICAgfVxuICAgIGlmIChhbmNlc3RvcklEICE9PSBlbnRlcklEKSB7XG4gICAgICB0cmF2ZXJzZVBhcmVudFBhdGgoYW5jZXN0b3JJRCwgZW50ZXJJRCwgY2IsIGRvd25BcmcsIHRydWUsIGZhbHNlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNpbXVsYXRlcyB0aGUgdHJhdmVyc2FsIG9mIGEgdHdvLXBoYXNlLCBjYXB0dXJlL2J1YmJsZSBldmVudCBkaXNwYXRjaC5cbiAgICpcbiAgICogTk9URTogVGhpcyB0cmF2ZXJzYWwgaGFwcGVucyBvbiBJRHMgd2l0aG91dCB0b3VjaGluZyB0aGUgRE9NLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGFyZ2V0SUQgSUQgb2YgdGhlIHRhcmdldCBub2RlLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYiBDYWxsYmFjayB0byBpbnZva2UuXG4gICAqIEBwYXJhbSB7Kn0gYXJnIEFyZ3VtZW50IHRvIGludm9rZSB0aGUgY2FsbGJhY2sgd2l0aC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICB0cmF2ZXJzZVR3b1BoYXNlOiBmdW5jdGlvbiAodGFyZ2V0SUQsIGNiLCBhcmcpIHtcbiAgICBpZiAodGFyZ2V0SUQpIHtcbiAgICAgIHRyYXZlcnNlUGFyZW50UGF0aCgnJywgdGFyZ2V0SUQsIGNiLCBhcmcsIHRydWUsIGZhbHNlKTtcbiAgICAgIHRyYXZlcnNlUGFyZW50UGF0aCh0YXJnZXRJRCwgJycsIGNiLCBhcmcsIGZhbHNlLCB0cnVlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFNhbWUgYXMgYHRyYXZlcnNlVHdvUGhhc2VgIGJ1dCBza2lwcyB0aGUgYHRhcmdldElEYC5cbiAgICovXG4gIHRyYXZlcnNlVHdvUGhhc2VTa2lwVGFyZ2V0OiBmdW5jdGlvbiAodGFyZ2V0SUQsIGNiLCBhcmcpIHtcbiAgICBpZiAodGFyZ2V0SUQpIHtcbiAgICAgIHRyYXZlcnNlUGFyZW50UGF0aCgnJywgdGFyZ2V0SUQsIGNiLCBhcmcsIHRydWUsIHRydWUpO1xuICAgICAgdHJhdmVyc2VQYXJlbnRQYXRoKHRhcmdldElELCAnJywgY2IsIGFyZywgdHJ1ZSwgdHJ1ZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBUcmF2ZXJzZSBhIG5vZGUgSUQsIGNhbGxpbmcgdGhlIHN1cHBsaWVkIGBjYmAgZm9yIGVhY2ggYW5jZXN0b3IgSUQuIEZvclxuICAgKiBleGFtcGxlLCBwYXNzaW5nIGAuMC4kcm93LTAuMWAgd291bGQgcmVzdWx0IGluIGBjYmAgZ2V0dGluZyBjYWxsZWRcbiAgICogd2l0aCBgLjBgLCBgLjAuJHJvdy0wYCwgYW5kIGAuMC4kcm93LTAuMWAuXG4gICAqXG4gICAqIE5PVEU6IFRoaXMgdHJhdmVyc2FsIGhhcHBlbnMgb24gSURzIHdpdGhvdXQgdG91Y2hpbmcgdGhlIERPTS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldElEIElEIG9mIHRoZSB0YXJnZXQgbm9kZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2IgQ2FsbGJhY2sgdG8gaW52b2tlLlxuICAgKiBAcGFyYW0geyp9IGFyZyBBcmd1bWVudCB0byBpbnZva2UgdGhlIGNhbGxiYWNrIHdpdGguXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgdHJhdmVyc2VBbmNlc3RvcnM6IGZ1bmN0aW9uICh0YXJnZXRJRCwgY2IsIGFyZykge1xuICAgIHRyYXZlcnNlUGFyZW50UGF0aCgnJywgdGFyZ2V0SUQsIGNiLCBhcmcsIHRydWUsIGZhbHNlKTtcbiAgfSxcblxuICBnZXRGaXJzdENvbW1vbkFuY2VzdG9ySUQ6IGdldEZpcnN0Q29tbW9uQW5jZXN0b3JJRCxcblxuICAvKipcbiAgICogRXhwb3NlZCBmb3IgdW5pdCB0ZXN0aW5nLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2dldE5leHREZXNjZW5kYW50SUQ6IGdldE5leHREZXNjZW5kYW50SUQsXG5cbiAgaXNBbmNlc3RvcklET2Y6IGlzQW5jZXN0b3JJRE9mLFxuXG4gIFNFUEFSQVRPUjogU0VQQVJBVE9SXG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RJbnN0YW5jZUhhbmRsZXM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0SW5zdGFuY2VNYXBcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogYFJlYWN0SW5zdGFuY2VNYXBgIG1haW50YWlucyBhIG1hcHBpbmcgZnJvbSBhIHB1YmxpYyBmYWNpbmcgc3RhdGVmdWxcbiAqIGluc3RhbmNlIChrZXkpIGFuZCB0aGUgaW50ZXJuYWwgcmVwcmVzZW50YXRpb24gKHZhbHVlKS4gVGhpcyBhbGxvd3MgcHVibGljXG4gKiBtZXRob2RzIHRvIGFjY2VwdCB0aGUgdXNlciBmYWNpbmcgaW5zdGFuY2UgYXMgYW4gYXJndW1lbnQgYW5kIG1hcCB0aGVtIGJhY2tcbiAqIHRvIGludGVybmFsIG1ldGhvZHMuXG4gKi9cblxuLy8gVE9ETzogUmVwbGFjZSB0aGlzIHdpdGggRVM2OiB2YXIgUmVhY3RJbnN0YW5jZU1hcCA9IG5ldyBNYXAoKTtcbnZhciBSZWFjdEluc3RhbmNlTWFwID0ge1xuXG4gIC8qKlxuICAgKiBUaGlzIEFQSSBzaG91bGQgYmUgY2FsbGVkIGBkZWxldGVgIGJ1dCB3ZSdkIGhhdmUgdG8gbWFrZSBzdXJlIHRvIGFsd2F5c1xuICAgKiB0cmFuc2Zvcm0gdGhlc2UgdG8gc3RyaW5ncyBmb3IgSUUgc3VwcG9ydC4gV2hlbiB0aGlzIHRyYW5zZm9ybSBpcyBmdWxseVxuICAgKiBzdXBwb3J0ZWQgd2UgY2FuIHJlbmFtZSBpdC5cbiAgICovXG4gIHJlbW92ZTogZnVuY3Rpb24gKGtleSkge1xuICAgIGtleS5fcmVhY3RJbnRlcm5hbEluc3RhbmNlID0gdW5kZWZpbmVkO1xuICB9LFxuXG4gIGdldDogZnVuY3Rpb24gKGtleSkge1xuICAgIHJldHVybiBrZXkuX3JlYWN0SW50ZXJuYWxJbnN0YW5jZTtcbiAgfSxcblxuICBoYXM6IGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4ga2V5Ll9yZWFjdEludGVybmFsSW5zdGFuY2UgIT09IHVuZGVmaW5lZDtcbiAgfSxcblxuICBzZXQ6IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gICAga2V5Ll9yZWFjdEludGVybmFsSW5zdGFuY2UgPSB2YWx1ZTtcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0SW5zdGFuY2VNYXA7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0SXNvbW9ycGhpY1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q2hpbGRyZW4gPSByZXF1aXJlKCcuL1JlYWN0Q2hpbGRyZW4nKTtcbnZhciBSZWFjdENvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3RDb21wb25lbnQnKTtcbnZhciBSZWFjdENsYXNzID0gcmVxdWlyZSgnLi9SZWFjdENsYXNzJyk7XG52YXIgUmVhY3RET01GYWN0b3JpZXMgPSByZXF1aXJlKCcuL1JlYWN0RE9NRmFjdG9yaWVzJyk7XG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdEVsZW1lbnRWYWxpZGF0b3IgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudFZhbGlkYXRvcicpO1xudmFyIFJlYWN0UHJvcFR5cGVzID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlcycpO1xudmFyIFJlYWN0VmVyc2lvbiA9IHJlcXVpcmUoJy4vUmVhY3RWZXJzaW9uJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBvbmx5Q2hpbGQgPSByZXF1aXJlKCcuL29ubHlDaGlsZCcpO1xuXG52YXIgY3JlYXRlRWxlbWVudCA9IFJlYWN0RWxlbWVudC5jcmVhdGVFbGVtZW50O1xudmFyIGNyZWF0ZUZhY3RvcnkgPSBSZWFjdEVsZW1lbnQuY3JlYXRlRmFjdG9yeTtcbnZhciBjbG9uZUVsZW1lbnQgPSBSZWFjdEVsZW1lbnQuY2xvbmVFbGVtZW50O1xuXG5pZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICBjcmVhdGVFbGVtZW50ID0gUmVhY3RFbGVtZW50VmFsaWRhdG9yLmNyZWF0ZUVsZW1lbnQ7XG4gIGNyZWF0ZUZhY3RvcnkgPSBSZWFjdEVsZW1lbnRWYWxpZGF0b3IuY3JlYXRlRmFjdG9yeTtcbiAgY2xvbmVFbGVtZW50ID0gUmVhY3RFbGVtZW50VmFsaWRhdG9yLmNsb25lRWxlbWVudDtcbn1cblxudmFyIFJlYWN0ID0ge1xuXG4gIC8vIE1vZGVyblxuXG4gIENoaWxkcmVuOiB7XG4gICAgbWFwOiBSZWFjdENoaWxkcmVuLm1hcCxcbiAgICBmb3JFYWNoOiBSZWFjdENoaWxkcmVuLmZvckVhY2gsXG4gICAgY291bnQ6IFJlYWN0Q2hpbGRyZW4uY291bnQsXG4gICAgdG9BcnJheTogUmVhY3RDaGlsZHJlbi50b0FycmF5LFxuICAgIG9ubHk6IG9ubHlDaGlsZFxuICB9LFxuXG4gIENvbXBvbmVudDogUmVhY3RDb21wb25lbnQsXG5cbiAgY3JlYXRlRWxlbWVudDogY3JlYXRlRWxlbWVudCxcbiAgY2xvbmVFbGVtZW50OiBjbG9uZUVsZW1lbnQsXG4gIGlzVmFsaWRFbGVtZW50OiBSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQsXG5cbiAgLy8gQ2xhc3NpY1xuXG4gIFByb3BUeXBlczogUmVhY3RQcm9wVHlwZXMsXG4gIGNyZWF0ZUNsYXNzOiBSZWFjdENsYXNzLmNyZWF0ZUNsYXNzLFxuICBjcmVhdGVGYWN0b3J5OiBjcmVhdGVGYWN0b3J5LFxuICBjcmVhdGVNaXhpbjogZnVuY3Rpb24gKG1peGluKSB7XG4gICAgLy8gQ3VycmVudGx5IGEgbm9vcC4gV2lsbCBiZSB1c2VkIHRvIHZhbGlkYXRlIGFuZCB0cmFjZSBtaXhpbnMuXG4gICAgcmV0dXJuIG1peGluO1xuICB9LFxuXG4gIC8vIFRoaXMgbG9va3MgRE9NIHNwZWNpZmljIGJ1dCB0aGVzZSBhcmUgYWN0dWFsbHkgaXNvbW9ycGhpYyBoZWxwZXJzXG4gIC8vIHNpbmNlIHRoZXkgYXJlIGp1c3QgZ2VuZXJhdGluZyBET00gc3RyaW5ncy5cbiAgRE9NOiBSZWFjdERPTUZhY3RvcmllcyxcblxuICB2ZXJzaW9uOiBSZWFjdFZlcnNpb24sXG5cbiAgLy8gSG9vayBmb3IgSlNYIHNwcmVhZCwgZG9uJ3QgdXNlIHRoaXMgZm9yIGFueXRoaW5nIGVsc2UuXG4gIF9fc3ByZWFkOiBhc3NpZ25cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0TWFya3VwQ2hlY2tzdW1cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBhZGxlcjMyID0gcmVxdWlyZSgnLi9hZGxlcjMyJyk7XG5cbnZhciBUQUdfRU5EID0gL1xcLz8+LztcblxudmFyIFJlYWN0TWFya3VwQ2hlY2tzdW0gPSB7XG4gIENIRUNLU1VNX0FUVFJfTkFNRTogJ2RhdGEtcmVhY3QtY2hlY2tzdW0nLFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIE1hcmt1cCBzdHJpbmdcbiAgICogQHJldHVybiB7c3RyaW5nfSBNYXJrdXAgc3RyaW5nIHdpdGggY2hlY2tzdW0gYXR0cmlidXRlIGF0dGFjaGVkXG4gICAqL1xuICBhZGRDaGVja3N1bVRvTWFya3VwOiBmdW5jdGlvbiAobWFya3VwKSB7XG4gICAgdmFyIGNoZWNrc3VtID0gYWRsZXIzMihtYXJrdXApO1xuXG4gICAgLy8gQWRkIGNoZWNrc3VtIChoYW5kbGUgYm90aCBwYXJlbnQgdGFncyBhbmQgc2VsZi1jbG9zaW5nIHRhZ3MpXG4gICAgcmV0dXJuIG1hcmt1cC5yZXBsYWNlKFRBR19FTkQsICcgJyArIFJlYWN0TWFya3VwQ2hlY2tzdW0uQ0hFQ0tTVU1fQVRUUl9OQU1FICsgJz1cIicgKyBjaGVja3N1bSArICdcIiQmJyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtYXJrdXAgdG8gdXNlXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gZWxlbWVudCByb290IFJlYWN0IGVsZW1lbnRcbiAgICogQHJldHVybnMge2Jvb2xlYW59IHdoZXRoZXIgb3Igbm90IHRoZSBtYXJrdXAgaXMgdGhlIHNhbWVcbiAgICovXG4gIGNhblJldXNlTWFya3VwOiBmdW5jdGlvbiAobWFya3VwLCBlbGVtZW50KSB7XG4gICAgdmFyIGV4aXN0aW5nQ2hlY2tzdW0gPSBlbGVtZW50LmdldEF0dHJpYnV0ZShSZWFjdE1hcmt1cENoZWNrc3VtLkNIRUNLU1VNX0FUVFJfTkFNRSk7XG4gICAgZXhpc3RpbmdDaGVja3N1bSA9IGV4aXN0aW5nQ2hlY2tzdW0gJiYgcGFyc2VJbnQoZXhpc3RpbmdDaGVja3N1bSwgMTApO1xuICAgIHZhciBtYXJrdXBDaGVja3N1bSA9IGFkbGVyMzIobWFya3VwKTtcbiAgICByZXR1cm4gbWFya3VwQ2hlY2tzdW0gPT09IGV4aXN0aW5nQ2hlY2tzdW07XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RNYXJrdXBDaGVja3N1bTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RNb3VudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERPTVByb3BlcnR5ID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eScpO1xudmFyIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJy4vUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyJyk7XG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSByZXF1aXJlKCcuL1JlYWN0Q3VycmVudE93bmVyJyk7XG52YXIgUmVhY3RET01GZWF0dXJlRmxhZ3MgPSByZXF1aXJlKCcuL1JlYWN0RE9NRmVhdHVyZUZsYWdzJyk7XG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdEVtcHR5Q29tcG9uZW50UmVnaXN0cnkgPSByZXF1aXJlKCcuL1JlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeScpO1xudmFyIFJlYWN0SW5zdGFuY2VIYW5kbGVzID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlSGFuZGxlcycpO1xudmFyIFJlYWN0SW5zdGFuY2VNYXAgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VNYXAnKTtcbnZhciBSZWFjdE1hcmt1cENoZWNrc3VtID0gcmVxdWlyZSgnLi9SZWFjdE1hcmt1cENoZWNrc3VtJyk7XG52YXIgUmVhY3RQZXJmID0gcmVxdWlyZSgnLi9SZWFjdFBlcmYnKTtcbnZhciBSZWFjdFJlY29uY2lsZXIgPSByZXF1aXJlKCcuL1JlYWN0UmVjb25jaWxlcicpO1xudmFyIFJlYWN0VXBkYXRlUXVldWUgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlUXVldWUnKTtcbnZhciBSZWFjdFVwZGF0ZXMgPSByZXF1aXJlKCcuL1JlYWN0VXBkYXRlcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZW1wdHlPYmplY3QgPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eU9iamVjdCcpO1xudmFyIGNvbnRhaW5zTm9kZSA9IHJlcXVpcmUoJ2ZianMvbGliL2NvbnRhaW5zTm9kZScpO1xudmFyIGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQgPSByZXF1aXJlKCcuL2luc3RhbnRpYXRlUmVhY3RDb21wb25lbnQnKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciBzZXRJbm5lckhUTUwgPSByZXF1aXJlKCcuL3NldElubmVySFRNTCcpO1xudmFyIHNob3VsZFVwZGF0ZVJlYWN0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9zaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudCcpO1xudmFyIHZhbGlkYXRlRE9NTmVzdGluZyA9IHJlcXVpcmUoJy4vdmFsaWRhdGVET01OZXN0aW5nJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIEFUVFJfTkFNRSA9IERPTVByb3BlcnR5LklEX0FUVFJJQlVURV9OQU1FO1xudmFyIG5vZGVDYWNoZSA9IHt9O1xuXG52YXIgRUxFTUVOVF9OT0RFX1RZUEUgPSAxO1xudmFyIERPQ19OT0RFX1RZUEUgPSA5O1xudmFyIERPQ1VNRU5UX0ZSQUdNRU5UX05PREVfVFlQRSA9IDExO1xuXG52YXIgb3duZXJEb2N1bWVudENvbnRleHRLZXkgPSAnX19SZWFjdE1vdW50X293bmVyRG9jdW1lbnQkJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpO1xuXG4vKiogTWFwcGluZyBmcm9tIHJlYWN0Um9vdElEIHRvIFJlYWN0IGNvbXBvbmVudCBpbnN0YW5jZS4gKi9cbnZhciBpbnN0YW5jZXNCeVJlYWN0Um9vdElEID0ge307XG5cbi8qKiBNYXBwaW5nIGZyb20gcmVhY3RSb290SUQgdG8gYGNvbnRhaW5lcmAgbm9kZXMuICovXG52YXIgY29udGFpbmVyc0J5UmVhY3RSb290SUQgPSB7fTtcblxuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgLyoqIF9fREVWX18tb25seSBtYXBwaW5nIGZyb20gcmVhY3RSb290SUQgdG8gcm9vdCBlbGVtZW50cy4gKi9cbiAgdmFyIHJvb3RFbGVtZW50c0J5UmVhY3RSb290SUQgPSB7fTtcbn1cblxuLy8gVXNlZCB0byBzdG9yZSBicmVhZHRoLWZpcnN0IHNlYXJjaCBzdGF0ZSBpbiBmaW5kQ29tcG9uZW50Um9vdC5cbnZhciBmaW5kQ29tcG9uZW50Um9vdFJldXNhYmxlQXJyYXkgPSBbXTtcblxuLyoqXG4gKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGNoYXJhY3RlclxuICogdGhhdCdzIG5vdCBjb21tb24gYmV0d2VlbiB0aGUgdHdvIGdpdmVuIHN0cmluZ3MuXG4gKlxuICogQHJldHVybiB7bnVtYmVyfSB0aGUgaW5kZXggb2YgdGhlIGNoYXJhY3RlciB3aGVyZSB0aGUgc3RyaW5ncyBkaXZlcmdlXG4gKi9cbmZ1bmN0aW9uIGZpcnN0RGlmZmVyZW5jZUluZGV4KHN0cmluZzEsIHN0cmluZzIpIHtcbiAgdmFyIG1pbkxlbiA9IE1hdGgubWluKHN0cmluZzEubGVuZ3RoLCBzdHJpbmcyLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbWluTGVuOyBpKyspIHtcbiAgICBpZiAoc3RyaW5nMS5jaGFyQXQoaSkgIT09IHN0cmluZzIuY2hhckF0KGkpKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHN0cmluZzEubGVuZ3RoID09PSBzdHJpbmcyLmxlbmd0aCA/IC0xIDogbWluTGVuO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01Eb2N1bWVudH0gY29udGFpbmVyIERPTSBlbGVtZW50IHRoYXQgbWF5IGNvbnRhaW5cbiAqIGEgUmVhY3QgY29tcG9uZW50XG4gKiBAcmV0dXJuIHs/Kn0gRE9NIGVsZW1lbnQgdGhhdCBtYXkgaGF2ZSB0aGUgcmVhY3RSb290IElELCBvciBudWxsLlxuICovXG5mdW5jdGlvbiBnZXRSZWFjdFJvb3RFbGVtZW50SW5Db250YWluZXIoY29udGFpbmVyKSB7XG4gIGlmICghY29udGFpbmVyKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NfTk9ERV9UWVBFKSB7XG4gICAgcmV0dXJuIGNvbnRhaW5lci5kb2N1bWVudEVsZW1lbnQ7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGNvbnRhaW5lci5maXJzdENoaWxkO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdGhhdCBtYXkgY29udGFpbiBhIFJlYWN0IGNvbXBvbmVudC5cbiAqIEByZXR1cm4gez9zdHJpbmd9IEEgXCJyZWFjdFJvb3RcIiBJRCwgaWYgYSBSZWFjdCBjb21wb25lbnQgaXMgcmVuZGVyZWQuXG4gKi9cbmZ1bmN0aW9uIGdldFJlYWN0Um9vdElEKGNvbnRhaW5lcikge1xuICB2YXIgcm9vdEVsZW1lbnQgPSBnZXRSZWFjdFJvb3RFbGVtZW50SW5Db250YWluZXIoY29udGFpbmVyKTtcbiAgcmV0dXJuIHJvb3RFbGVtZW50ICYmIFJlYWN0TW91bnQuZ2V0SUQocm9vdEVsZW1lbnQpO1xufVxuXG4vKipcbiAqIEFjY2Vzc2luZyBub2RlW0FUVFJfTkFNRV0gb3IgY2FsbGluZyBnZXRBdHRyaWJ1dGUoQVRUUl9OQU1FKSBvbiBhIGZvcm1cbiAqIGVsZW1lbnQgY2FuIHJldHVybiBpdHMgY29udHJvbCB3aG9zZSBuYW1lIG9yIElEIGVxdWFscyBBVFRSX05BTUUuIEFsbFxuICogRE9NIG5vZGVzIHN1cHBvcnQgYGdldEF0dHJpYnV0ZU5vZGVgIGJ1dCB0aGlzIGNhbiBhbHNvIGdldCBjYWxsZWQgb25cbiAqIG90aGVyIG9iamVjdHMgc28ganVzdCByZXR1cm4gJycgaWYgd2UncmUgZ2l2ZW4gc29tZXRoaW5nIG90aGVyIHRoYW4gYVxuICogRE9NIG5vZGUgKHN1Y2ggYXMgd2luZG93KS5cbiAqXG4gKiBAcGFyYW0gez9ET01FbGVtZW50fERPTVdpbmRvd3xET01Eb2N1bWVudHxET01UZXh0Tm9kZX0gbm9kZSBET00gbm9kZS5cbiAqIEByZXR1cm4ge3N0cmluZ30gSUQgb2YgdGhlIHN1cHBsaWVkIGBkb21Ob2RlYC5cbiAqL1xuZnVuY3Rpb24gZ2V0SUQobm9kZSkge1xuICB2YXIgaWQgPSBpbnRlcm5hbEdldElEKG5vZGUpO1xuICBpZiAoaWQpIHtcbiAgICBpZiAobm9kZUNhY2hlLmhhc093blByb3BlcnR5KGlkKSkge1xuICAgICAgdmFyIGNhY2hlZCA9IG5vZGVDYWNoZVtpZF07XG4gICAgICBpZiAoY2FjaGVkICE9PSBub2RlKSB7XG4gICAgICAgICEhaXNWYWxpZChjYWNoZWQsIGlkKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdSZWFjdE1vdW50OiBUd28gdmFsaWQgYnV0IHVuZXF1YWwgbm9kZXMgd2l0aCB0aGUgc2FtZSBgJXNgOiAlcycsIEFUVFJfTkFNRSwgaWQpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgICAgICBub2RlQ2FjaGVbaWRdID0gbm9kZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbm9kZUNhY2hlW2lkXSA9IG5vZGU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGlkO1xufVxuXG5mdW5jdGlvbiBpbnRlcm5hbEdldElEKG5vZGUpIHtcbiAgLy8gSWYgbm9kZSBpcyBzb21ldGhpbmcgbGlrZSBhIHdpbmRvdywgZG9jdW1lbnQsIG9yIHRleHQgbm9kZSwgbm9uZSBvZlxuICAvLyB3aGljaCBzdXBwb3J0IGF0dHJpYnV0ZXMgb3IgYSAuZ2V0QXR0cmlidXRlIG1ldGhvZCwgZ3JhY2VmdWxseSByZXR1cm5cbiAgLy8gdGhlIGVtcHR5IHN0cmluZywgYXMgaWYgdGhlIGF0dHJpYnV0ZSB3ZXJlIG1pc3NpbmcuXG4gIHJldHVybiBub2RlICYmIG5vZGUuZ2V0QXR0cmlidXRlICYmIG5vZGUuZ2V0QXR0cmlidXRlKEFUVFJfTkFNRSkgfHwgJyc7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgUmVhY3Qtc3BlY2lmaWMgSUQgb2YgdGhlIGdpdmVuIG5vZGUuXG4gKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlIFRoZSBET00gbm9kZSB3aG9zZSBJRCB3aWxsIGJlIHNldC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBUaGUgdmFsdWUgb2YgdGhlIElEIGF0dHJpYnV0ZS5cbiAqL1xuZnVuY3Rpb24gc2V0SUQobm9kZSwgaWQpIHtcbiAgdmFyIG9sZElEID0gaW50ZXJuYWxHZXRJRChub2RlKTtcbiAgaWYgKG9sZElEICE9PSBpZCkge1xuICAgIGRlbGV0ZSBub2RlQ2FjaGVbb2xkSURdO1xuICB9XG4gIG5vZGUuc2V0QXR0cmlidXRlKEFUVFJfTkFNRSwgaWQpO1xuICBub2RlQ2FjaGVbaWRdID0gbm9kZTtcbn1cblxuLyoqXG4gKiBGaW5kcyB0aGUgbm9kZSB3aXRoIHRoZSBzdXBwbGllZCBSZWFjdC1nZW5lcmF0ZWQgRE9NIElELlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBBIFJlYWN0LWdlbmVyYXRlZCBET00gSUQuXG4gKiBAcmV0dXJuIHtET01FbGVtZW50fSBET00gbm9kZSB3aXRoIHRoZSBzdXBwbGVkIGBpZGAuXG4gKiBAaW50ZXJuYWxcbiAqL1xuZnVuY3Rpb24gZ2V0Tm9kZShpZCkge1xuICBpZiAoIW5vZGVDYWNoZS5oYXNPd25Qcm9wZXJ0eShpZCkgfHwgIWlzVmFsaWQobm9kZUNhY2hlW2lkXSwgaWQpKSB7XG4gICAgbm9kZUNhY2hlW2lkXSA9IFJlYWN0TW91bnQuZmluZFJlYWN0Tm9kZUJ5SUQoaWQpO1xuICB9XG4gIHJldHVybiBub2RlQ2FjaGVbaWRdO1xufVxuXG4vKipcbiAqIEZpbmRzIHRoZSBub2RlIHdpdGggdGhlIHN1cHBsaWVkIHB1YmxpYyBSZWFjdCBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0geyp9IGluc3RhbmNlIEEgcHVibGljIFJlYWN0IGluc3RhbmNlLlxuICogQHJldHVybiB7P0RPTUVsZW1lbnR9IERPTSBub2RlIHdpdGggdGhlIHN1cHBsZWQgYGlkYC5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBnZXROb2RlRnJvbUluc3RhbmNlKGluc3RhbmNlKSB7XG4gIHZhciBpZCA9IFJlYWN0SW5zdGFuY2VNYXAuZ2V0KGluc3RhbmNlKS5fcm9vdE5vZGVJRDtcbiAgaWYgKFJlYWN0RW1wdHlDb21wb25lbnRSZWdpc3RyeS5pc051bGxDb21wb25lbnRJRChpZCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBpZiAoIW5vZGVDYWNoZS5oYXNPd25Qcm9wZXJ0eShpZCkgfHwgIWlzVmFsaWQobm9kZUNhY2hlW2lkXSwgaWQpKSB7XG4gICAgbm9kZUNhY2hlW2lkXSA9IFJlYWN0TW91bnQuZmluZFJlYWN0Tm9kZUJ5SUQoaWQpO1xuICB9XG4gIHJldHVybiBub2RlQ2FjaGVbaWRdO1xufVxuXG4vKipcbiAqIEEgbm9kZSBpcyBcInZhbGlkXCIgaWYgaXQgaXMgY29udGFpbmVkIGJ5IGEgY3VycmVudGx5IG1vdW50ZWQgY29udGFpbmVyLlxuICpcbiAqIFRoaXMgbWVhbnMgdGhhdCB0aGUgbm9kZSBkb2VzIG5vdCBoYXZlIHRvIGJlIGNvbnRhaW5lZCBieSBhIGRvY3VtZW50IGluXG4gKiBvcmRlciB0byBiZSBjb25zaWRlcmVkIHZhbGlkLlxuICpcbiAqIEBwYXJhbSB7P0RPTUVsZW1lbnR9IG5vZGUgVGhlIGNhbmRpZGF0ZSBET00gbm9kZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBUaGUgZXhwZWN0ZWQgSUQgb2YgdGhlIG5vZGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBub2RlIGlzIGNvbnRhaW5lZCBieSBhIG1vdW50ZWQgY29udGFpbmVyLlxuICovXG5mdW5jdGlvbiBpc1ZhbGlkKG5vZGUsIGlkKSB7XG4gIGlmIChub2RlKSB7XG4gICAgIShpbnRlcm5hbEdldElEKG5vZGUpID09PSBpZCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RNb3VudDogVW5leHBlY3RlZCBtb2RpZmljYXRpb24gb2YgYCVzYCcsIEFUVFJfTkFNRSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgdmFyIGNvbnRhaW5lciA9IFJlYWN0TW91bnQuZmluZFJlYWN0Q29udGFpbmVyRm9ySUQoaWQpO1xuICAgIGlmIChjb250YWluZXIgJiYgY29udGFpbnNOb2RlKGNvbnRhaW5lciwgbm9kZSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBDYXVzZXMgdGhlIGNhY2hlIHRvIGZvcmdldCBhYm91dCBvbmUgUmVhY3Qtc3BlY2lmaWMgSUQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIFRoZSBJRCB0byBmb3JnZXQuXG4gKi9cbmZ1bmN0aW9uIHB1cmdlSUQoaWQpIHtcbiAgZGVsZXRlIG5vZGVDYWNoZVtpZF07XG59XG5cbnZhciBkZWVwZXN0Tm9kZVNvRmFyID0gbnVsbDtcbmZ1bmN0aW9uIGZpbmREZWVwZXN0Q2FjaGVkQW5jZXN0b3JJbXBsKGFuY2VzdG9ySUQpIHtcbiAgdmFyIGFuY2VzdG9yID0gbm9kZUNhY2hlW2FuY2VzdG9ySURdO1xuICBpZiAoYW5jZXN0b3IgJiYgaXNWYWxpZChhbmNlc3RvciwgYW5jZXN0b3JJRCkpIHtcbiAgICBkZWVwZXN0Tm9kZVNvRmFyID0gYW5jZXN0b3I7XG4gIH0gZWxzZSB7XG4gICAgLy8gVGhpcyBub2RlIGlzbid0IHBvcHVsYXRlZCBpbiB0aGUgY2FjaGUsIHNvIHByZXN1bWFibHkgbm9uZSBvZiBpdHNcbiAgICAvLyBkZXNjZW5kYW50cyBhcmUuIEJyZWFrIG91dCBvZiB0aGUgbG9vcC5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXR1cm4gdGhlIGRlZXBlc3QgY2FjaGVkIG5vZGUgd2hvc2UgSUQgaXMgYSBwcmVmaXggb2YgYHRhcmdldElEYC5cbiAqL1xuZnVuY3Rpb24gZmluZERlZXBlc3RDYWNoZWRBbmNlc3Rvcih0YXJnZXRJRCkge1xuICBkZWVwZXN0Tm9kZVNvRmFyID0gbnVsbDtcbiAgUmVhY3RJbnN0YW5jZUhhbmRsZXMudHJhdmVyc2VBbmNlc3RvcnModGFyZ2V0SUQsIGZpbmREZWVwZXN0Q2FjaGVkQW5jZXN0b3JJbXBsKTtcblxuICB2YXIgZm91bmROb2RlID0gZGVlcGVzdE5vZGVTb0ZhcjtcbiAgZGVlcGVzdE5vZGVTb0ZhciA9IG51bGw7XG4gIHJldHVybiBmb3VuZE5vZGU7XG59XG5cbi8qKlxuICogTW91bnRzIHRoaXMgY29tcG9uZW50IGFuZCBpbnNlcnRzIGl0IGludG8gdGhlIERPTS5cbiAqXG4gKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjb21wb25lbnRJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdG8gbW91bnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gcm9vdElEIERPTSBJRCBvZiB0aGUgcm9vdCBub2RlLlxuICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdG8gbW91bnQgaW50by5cbiAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gc2hvdWxkUmV1c2VNYXJrdXAgSWYgdHJ1ZSwgZG8gbm90IGluc2VydCBtYXJrdXBcbiAqL1xuZnVuY3Rpb24gbW91bnRDb21wb25lbnRJbnRvTm9kZShjb21wb25lbnRJbnN0YW5jZSwgcm9vdElELCBjb250YWluZXIsIHRyYW5zYWN0aW9uLCBzaG91bGRSZXVzZU1hcmt1cCwgY29udGV4dCkge1xuICBpZiAoUmVhY3RET01GZWF0dXJlRmxhZ3MudXNlQ3JlYXRlRWxlbWVudCkge1xuICAgIGNvbnRleHQgPSBhc3NpZ24oe30sIGNvbnRleHQpO1xuICAgIGlmIChjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUpIHtcbiAgICAgIGNvbnRleHRbb3duZXJEb2N1bWVudENvbnRleHRLZXldID0gY29udGFpbmVyO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZXh0W293bmVyRG9jdW1lbnRDb250ZXh0S2V5XSA9IGNvbnRhaW5lci5vd25lckRvY3VtZW50O1xuICAgIH1cbiAgfVxuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChjb250ZXh0ID09PSBlbXB0eU9iamVjdCkge1xuICAgICAgY29udGV4dCA9IHt9O1xuICAgIH1cbiAgICB2YXIgdGFnID0gY29udGFpbmVyLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgY29udGV4dFt2YWxpZGF0ZURPTU5lc3RpbmcuYW5jZXN0b3JJbmZvQ29udGV4dEtleV0gPSB2YWxpZGF0ZURPTU5lc3RpbmcudXBkYXRlZEFuY2VzdG9ySW5mbyhudWxsLCB0YWcsIG51bGwpO1xuICB9XG4gIHZhciBtYXJrdXAgPSBSZWFjdFJlY29uY2lsZXIubW91bnRDb21wb25lbnQoY29tcG9uZW50SW5zdGFuY2UsIHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICBjb21wb25lbnRJbnN0YW5jZS5fcmVuZGVyZWRDb21wb25lbnQuX3RvcExldmVsV3JhcHBlciA9IGNvbXBvbmVudEluc3RhbmNlO1xuICBSZWFjdE1vdW50Ll9tb3VudEltYWdlSW50b05vZGUobWFya3VwLCBjb250YWluZXIsIHNob3VsZFJldXNlTWFya3VwLCB0cmFuc2FjdGlvbik7XG59XG5cbi8qKlxuICogQmF0Y2hlZCBtb3VudC5cbiAqXG4gKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjb21wb25lbnRJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdG8gbW91bnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gcm9vdElEIERPTSBJRCBvZiB0aGUgcm9vdCBub2RlLlxuICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdG8gbW91bnQgaW50by5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gc2hvdWxkUmV1c2VNYXJrdXAgSWYgdHJ1ZSwgZG8gbm90IGluc2VydCBtYXJrdXBcbiAqL1xuZnVuY3Rpb24gYmF0Y2hlZE1vdW50Q29tcG9uZW50SW50b05vZGUoY29tcG9uZW50SW5zdGFuY2UsIHJvb3RJRCwgY29udGFpbmVyLCBzaG91bGRSZXVzZU1hcmt1cCwgY29udGV4dCkge1xuICB2YXIgdHJhbnNhY3Rpb24gPSBSZWFjdFVwZGF0ZXMuUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5nZXRQb29sZWQoXG4gIC8qIGZvcmNlSFRNTCAqL3Nob3VsZFJldXNlTWFya3VwKTtcbiAgdHJhbnNhY3Rpb24ucGVyZm9ybShtb3VudENvbXBvbmVudEludG9Ob2RlLCBudWxsLCBjb21wb25lbnRJbnN0YW5jZSwgcm9vdElELCBjb250YWluZXIsIHRyYW5zYWN0aW9uLCBzaG91bGRSZXVzZU1hcmt1cCwgY29udGV4dCk7XG4gIFJlYWN0VXBkYXRlcy5SZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uLnJlbGVhc2UodHJhbnNhY3Rpb24pO1xufVxuXG4vKipcbiAqIFVubW91bnRzIGEgY29tcG9uZW50IGFuZCByZW1vdmVzIGl0IGZyb20gdGhlIERPTS5cbiAqXG4gKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBpbnN0YW5jZSBSZWFjdCBjb21wb25lbnQgaW5zdGFuY2UuXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciBET00gZWxlbWVudCB0byB1bm1vdW50IGZyb20uXG4gKiBAZmluYWxcbiAqIEBpbnRlcm5hbFxuICogQHNlZSB7UmVhY3RNb3VudC51bm1vdW50Q29tcG9uZW50QXROb2RlfVxuICovXG5mdW5jdGlvbiB1bm1vdW50Q29tcG9uZW50RnJvbU5vZGUoaW5zdGFuY2UsIGNvbnRhaW5lcikge1xuICBSZWFjdFJlY29uY2lsZXIudW5tb3VudENvbXBvbmVudChpbnN0YW5jZSk7XG5cbiAgaWYgKGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRE9DX05PREVfVFlQRSkge1xuICAgIGNvbnRhaW5lciA9IGNvbnRhaW5lci5kb2N1bWVudEVsZW1lbnQ7XG4gIH1cblxuICAvLyBodHRwOi8vanNwZXJmLmNvbS9lbXB0eWluZy1hLW5vZGVcbiAgd2hpbGUgKGNvbnRhaW5lci5sYXN0Q2hpbGQpIHtcbiAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoY29udGFpbmVyLmxhc3RDaGlsZCk7XG4gIH1cbn1cblxuLyoqXG4gKiBUcnVlIGlmIHRoZSBzdXBwbGllZCBET00gbm9kZSBoYXMgYSBkaXJlY3QgUmVhY3QtcmVuZGVyZWQgY2hpbGQgdGhhdCBpc1xuICogbm90IGEgUmVhY3Qgcm9vdCBlbGVtZW50LiBVc2VmdWwgZm9yIHdhcm5pbmcgaW4gYHJlbmRlcmAsXG4gKiBgdW5tb3VudENvbXBvbmVudEF0Tm9kZWAsIGV0Yy5cbiAqXG4gKiBAcGFyYW0gez9ET01FbGVtZW50fSBub2RlIFRoZSBjYW5kaWRhdGUgRE9NIG5vZGUuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBET00gZWxlbWVudCBjb250YWlucyBhIGRpcmVjdCBjaGlsZCB0aGF0IHdhc1xuICogcmVuZGVyZWQgYnkgUmVhY3QgYnV0IGlzIG5vdCBhIHJvb3QgZWxlbWVudC5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBoYXNOb25Sb290UmVhY3RDaGlsZChub2RlKSB7XG4gIHZhciByZWFjdFJvb3RJRCA9IGdldFJlYWN0Um9vdElEKG5vZGUpO1xuICByZXR1cm4gcmVhY3RSb290SUQgPyByZWFjdFJvb3RJRCAhPT0gUmVhY3RJbnN0YW5jZUhhbmRsZXMuZ2V0UmVhY3RSb290SURGcm9tTm9kZUlEKHJlYWN0Um9vdElEKSA6IGZhbHNlO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGZpcnN0IChkZWVwZXN0KSBhbmNlc3RvciBvZiBhIG5vZGUgd2hpY2ggaXMgcmVuZGVyZWQgYnkgdGhpcyBjb3B5XG4gKiBvZiBSZWFjdC5cbiAqL1xuZnVuY3Rpb24gZmluZEZpcnN0UmVhY3RET01JbXBsKG5vZGUpIHtcbiAgLy8gVGhpcyBub2RlIG1pZ2h0IGJlIGZyb20gYW5vdGhlciBSZWFjdCBpbnN0YW5jZSwgc28gd2UgbWFrZSBzdXJlIG5vdCB0b1xuICAvLyBleGFtaW5lIHRoZSBub2RlIGNhY2hlIGhlcmVcbiAgZm9yICg7IG5vZGUgJiYgbm9kZS5wYXJlbnROb2RlICE9PSBub2RlOyBub2RlID0gbm9kZS5wYXJlbnROb2RlKSB7XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgIT09IDEpIHtcbiAgICAgIC8vIE5vdCBhIERPTUVsZW1lbnQsIHRoZXJlZm9yZSBub3QgYSBSZWFjdCBjb21wb25lbnRcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB2YXIgbm9kZUlEID0gaW50ZXJuYWxHZXRJRChub2RlKTtcbiAgICBpZiAoIW5vZGVJRCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIHZhciByZWFjdFJvb3RJRCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChub2RlSUQpO1xuXG4gICAgLy8gSWYgY29udGFpbmVyc0J5UmVhY3RSb290SUQgY29udGFpbnMgdGhlIGNvbnRhaW5lciB3ZSBmaW5kIGJ5IGNyYXdsaW5nIHVwXG4gICAgLy8gdGhlIHRyZWUsIHdlIGtub3cgdGhhdCB0aGlzIGluc3RhbmNlIG9mIFJlYWN0IHJlbmRlcmVkIHRoZSBub2RlLlxuICAgIC8vIG5iLiBpc1ZhbGlkJ3Mgc3RyYXRlZ3kgKHdpdGggY29udGFpbnNOb2RlKSBkb2VzIG5vdCB3b3JrIGJlY2F1c2UgcmVuZGVyXG4gICAgLy8gdHJlZXMgbWF5IGJlIG5lc3RlZCBhbmQgd2UgZG9uJ3Qgd2FudCBhIGZhbHNlIHBvc2l0aXZlIGluIHRoYXQgY2FzZS5cbiAgICB2YXIgY3VycmVudCA9IG5vZGU7XG4gICAgdmFyIGxhc3RJRDtcbiAgICBkbyB7XG4gICAgICBsYXN0SUQgPSBpbnRlcm5hbEdldElEKGN1cnJlbnQpO1xuICAgICAgY3VycmVudCA9IGN1cnJlbnQucGFyZW50Tm9kZTtcbiAgICAgIGlmIChjdXJyZW50ID09IG51bGwpIHtcbiAgICAgICAgLy8gVGhlIHBhc3NlZC1pbiBub2RlIGhhcyBiZWVuIGRldGFjaGVkIGZyb20gdGhlIGNvbnRhaW5lciBpdCB3YXNcbiAgICAgICAgLy8gb3JpZ2luYWxseSByZW5kZXJlZCBpbnRvLlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9IHdoaWxlIChsYXN0SUQgIT09IHJlYWN0Um9vdElEKTtcblxuICAgIGlmIChjdXJyZW50ID09PSBjb250YWluZXJzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF0pIHtcbiAgICAgIHJldHVybiBub2RlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBUZW1wb3JhcnkgKD8pIGhhY2sgc28gdGhhdCB3ZSBjYW4gc3RvcmUgYWxsIHRvcC1sZXZlbCBwZW5kaW5nIHVwZGF0ZXMgb25cbiAqIGNvbXBvc2l0ZXMgaW5zdGVhZCBvZiBoYXZpbmcgdG8gd29ycnkgYWJvdXQgZGlmZmVyZW50IHR5cGVzIG9mIGNvbXBvbmVudHNcbiAqIGhlcmUuXG4gKi9cbnZhciBUb3BMZXZlbFdyYXBwZXIgPSBmdW5jdGlvbiAoKSB7fTtcblRvcExldmVsV3JhcHBlci5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudCA9IHt9O1xuaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgVG9wTGV2ZWxXcmFwcGVyLmRpc3BsYXlOYW1lID0gJ1RvcExldmVsV3JhcHBlcic7XG59XG5Ub3BMZXZlbFdyYXBwZXIucHJvdG90eXBlLnJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gdGhpcy5wcm9wcyBpcyBhY3R1YWxseSBhIFJlYWN0RWxlbWVudFxuICByZXR1cm4gdGhpcy5wcm9wcztcbn07XG5cbi8qKlxuICogTW91bnRpbmcgaXMgdGhlIHByb2Nlc3Mgb2YgaW5pdGlhbGl6aW5nIGEgUmVhY3QgY29tcG9uZW50IGJ5IGNyZWF0aW5nIGl0c1xuICogcmVwcmVzZW50YXRpdmUgRE9NIGVsZW1lbnRzIGFuZCBpbnNlcnRpbmcgdGhlbSBpbnRvIGEgc3VwcGxpZWQgYGNvbnRhaW5lcmAuXG4gKiBBbnkgcHJpb3IgY29udGVudCBpbnNpZGUgYGNvbnRhaW5lcmAgaXMgZGVzdHJveWVkIGluIHRoZSBwcm9jZXNzLlxuICpcbiAqICAgUmVhY3RNb3VudC5yZW5kZXIoXG4gKiAgICAgY29tcG9uZW50LFxuICogICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250YWluZXInKVxuICogICApO1xuICpcbiAqICAgPGRpdiBpZD1cImNvbnRhaW5lclwiPiAgICAgICAgICAgICAgICAgICA8LS0gU3VwcGxpZWQgYGNvbnRhaW5lcmAuXG4gKiAgICAgPGRpdiBkYXRhLXJlYWN0aWQ9XCIuM1wiPiAgICAgICAgICAgICAgPC0tIFJlbmRlcmVkIHJlYWN0Um9vdCBvZiBSZWFjdFxuICogICAgICAgLy8gLi4uICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9uZW50LlxuICogICAgIDwvZGl2PlxuICogICA8L2Rpdj5cbiAqXG4gKiBJbnNpZGUgb2YgYGNvbnRhaW5lcmAsIHRoZSBmaXJzdCBlbGVtZW50IHJlbmRlcmVkIGlzIHRoZSBcInJlYWN0Um9vdFwiLlxuICovXG52YXIgUmVhY3RNb3VudCA9IHtcblxuICBUb3BMZXZlbFdyYXBwZXI6IFRvcExldmVsV3JhcHBlcixcblxuICAvKiogRXhwb3NlZCBmb3IgZGVidWdnaW5nIHB1cnBvc2VzICoqL1xuICBfaW5zdGFuY2VzQnlSZWFjdFJvb3RJRDogaW5zdGFuY2VzQnlSZWFjdFJvb3RJRCxcblxuICAvKipcbiAgICogVGhpcyBpcyBhIGhvb2sgcHJvdmlkZWQgdG8gc3VwcG9ydCByZW5kZXJpbmcgUmVhY3QgY29tcG9uZW50cyB3aGlsZVxuICAgKiBlbnN1cmluZyB0aGF0IHRoZSBhcHBhcmVudCBzY3JvbGwgcG9zaXRpb24gb2YgaXRzIGBjb250YWluZXJgIGRvZXMgbm90XG4gICAqIGNoYW5nZS5cbiAgICpcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgVGhlIGBjb250YWluZXJgIGJlaW5nIHJlbmRlcmVkIGludG8uXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IHJlbmRlckNhbGxiYWNrIFRoaXMgbXVzdCBiZSBjYWxsZWQgb25jZSB0byBkbyB0aGUgcmVuZGVyLlxuICAgKi9cbiAgc2Nyb2xsTW9uaXRvcjogZnVuY3Rpb24gKGNvbnRhaW5lciwgcmVuZGVyQ2FsbGJhY2spIHtcbiAgICByZW5kZXJDYWxsYmFjaygpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUYWtlIGEgY29tcG9uZW50IHRoYXQncyBhbHJlYWR5IG1vdW50ZWQgaW50byB0aGUgRE9NIGFuZCByZXBsYWNlIGl0cyBwcm9wc1xuICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBwcmV2Q29tcG9uZW50IGNvbXBvbmVudCBpbnN0YW5jZSBhbHJlYWR5IGluIHRoZSBET01cbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IG5leHRFbGVtZW50IGNvbXBvbmVudCBpbnN0YW5jZSB0byByZW5kZXJcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgY29udGFpbmVyIHRvIHJlbmRlciBpbnRvXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbiB0cmlnZ2VyZWQgb24gY29tcGxldGlvblxuICAgKi9cbiAgX3VwZGF0ZVJvb3RDb21wb25lbnQ6IGZ1bmN0aW9uIChwcmV2Q29tcG9uZW50LCBuZXh0RWxlbWVudCwgY29udGFpbmVyLCBjYWxsYmFjaykge1xuICAgIFJlYWN0TW91bnQuc2Nyb2xsTW9uaXRvcihjb250YWluZXIsIGZ1bmN0aW9uICgpIHtcbiAgICAgIFJlYWN0VXBkYXRlUXVldWUuZW5xdWV1ZUVsZW1lbnRJbnRlcm5hbChwcmV2Q29tcG9uZW50LCBuZXh0RWxlbWVudCk7XG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgUmVhY3RVcGRhdGVRdWV1ZS5lbnF1ZXVlQ2FsbGJhY2tJbnRlcm5hbChwcmV2Q29tcG9uZW50LCBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gUmVjb3JkIHRoZSByb290IGVsZW1lbnQgaW4gY2FzZSBpdCBsYXRlciBnZXRzIHRyYW5zcGxhbnRlZC5cbiAgICAgIHJvb3RFbGVtZW50c0J5UmVhY3RSb290SURbZ2V0UmVhY3RSb290SUQoY29udGFpbmVyKV0gPSBnZXRSZWFjdFJvb3RFbGVtZW50SW5Db250YWluZXIoY29udGFpbmVyKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJldkNvbXBvbmVudDtcbiAgfSxcblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBjb21wb25lbnQgaW50byB0aGUgaW5zdGFuY2UgbWFwIGFuZCBzdGFydHMgc2Nyb2xsIHZhbHVlXG4gICAqIG1vbml0b3JpbmdcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gbmV4dENvbXBvbmVudCBjb21wb25lbnQgaW5zdGFuY2UgdG8gcmVuZGVyXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIGNvbnRhaW5lciB0byByZW5kZXIgaW50b1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9IHJlYWN0Um9vdCBJRCBwcmVmaXhcbiAgICovXG4gIF9yZWdpc3RlckNvbXBvbmVudDogZnVuY3Rpb24gKG5leHRDb21wb25lbnQsIGNvbnRhaW5lcikge1xuICAgICEoY29udGFpbmVyICYmIChjb250YWluZXIubm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERV9UWVBFIHx8IGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRE9DX05PREVfVFlQRSB8fCBjb250YWluZXIubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREVfVFlQRSkpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ19yZWdpc3RlckNvbXBvbmVudCguLi4pOiBUYXJnZXQgY29udGFpbmVyIGlzIG5vdCBhIERPTSBlbGVtZW50LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5lbnN1cmVTY3JvbGxWYWx1ZU1vbml0b3JpbmcoKTtcblxuICAgIHZhciByZWFjdFJvb3RJRCA9IFJlYWN0TW91bnQucmVnaXN0ZXJDb250YWluZXIoY29udGFpbmVyKTtcbiAgICBpbnN0YW5jZXNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXSA9IG5leHRDb21wb25lbnQ7XG4gICAgcmV0dXJuIHJlYWN0Um9vdElEO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZW5kZXIgYSBuZXcgY29tcG9uZW50IGludG8gdGhlIERPTS5cbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IG5leHRFbGVtZW50IGVsZW1lbnQgdG8gcmVuZGVyXG4gICAqIEBwYXJhbSB7RE9NRWxlbWVudH0gY29udGFpbmVyIGNvbnRhaW5lciB0byByZW5kZXIgaW50b1xuICAgKiBAcGFyYW0ge2Jvb2xlYW59IHNob3VsZFJldXNlTWFya3VwIGlmIHdlIHNob3VsZCBza2lwIHRoZSBtYXJrdXAgaW5zZXJ0aW9uXG4gICAqIEByZXR1cm4ge1JlYWN0Q29tcG9uZW50fSBuZXh0Q29tcG9uZW50XG4gICAqL1xuICBfcmVuZGVyTmV3Um9vdENvbXBvbmVudDogZnVuY3Rpb24gKG5leHRFbGVtZW50LCBjb250YWluZXIsIHNob3VsZFJldXNlTWFya3VwLCBjb250ZXh0KSB7XG4gICAgLy8gVmFyaW91cyBwYXJ0cyBvZiBvdXIgY29kZSAoc3VjaCBhcyBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCdzXG4gICAgLy8gX3JlbmRlclZhbGlkYXRlZENvbXBvbmVudCkgYXNzdW1lIHRoYXQgY2FsbHMgdG8gcmVuZGVyIGFyZW4ndCBuZXN0ZWQ7XG4gICAgLy8gdmVyaWZ5IHRoYXQgdGhhdCdzIHRoZSBjYXNlLlxuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPT0gbnVsbCwgJ19yZW5kZXJOZXdSb290Q29tcG9uZW50KCk6IFJlbmRlciBtZXRob2RzIHNob3VsZCBiZSBhIHB1cmUgZnVuY3Rpb24gJyArICdvZiBwcm9wcyBhbmQgc3RhdGU7IHRyaWdnZXJpbmcgbmVzdGVkIGNvbXBvbmVudCB1cGRhdGVzIGZyb20gJyArICdyZW5kZXIgaXMgbm90IGFsbG93ZWQuIElmIG5lY2Vzc2FyeSwgdHJpZ2dlciBuZXN0ZWQgdXBkYXRlcyBpbiAnICsgJ2NvbXBvbmVudERpZFVwZGF0ZS4gQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgJXMuJywgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCAmJiBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LmdldE5hbWUoKSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcblxuICAgIHZhciBjb21wb25lbnRJbnN0YW5jZSA9IGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQobmV4dEVsZW1lbnQsIG51bGwpO1xuICAgIHZhciByZWFjdFJvb3RJRCA9IFJlYWN0TW91bnQuX3JlZ2lzdGVyQ29tcG9uZW50KGNvbXBvbmVudEluc3RhbmNlLCBjb250YWluZXIpO1xuXG4gICAgLy8gVGhlIGluaXRpYWwgcmVuZGVyIGlzIHN5bmNocm9ub3VzIGJ1dCBhbnkgdXBkYXRlcyB0aGF0IGhhcHBlbiBkdXJpbmdcbiAgICAvLyByZW5kZXJpbmcsIGluIGNvbXBvbmVudFdpbGxNb3VudCBvciBjb21wb25lbnREaWRNb3VudCwgd2lsbCBiZSBiYXRjaGVkXG4gICAgLy8gYWNjb3JkaW5nIHRvIHRoZSBjdXJyZW50IGJhdGNoaW5nIHN0cmF0ZWd5LlxuXG4gICAgUmVhY3RVcGRhdGVzLmJhdGNoZWRVcGRhdGVzKGJhdGNoZWRNb3VudENvbXBvbmVudEludG9Ob2RlLCBjb21wb25lbnRJbnN0YW5jZSwgcmVhY3RSb290SUQsIGNvbnRhaW5lciwgc2hvdWxkUmV1c2VNYXJrdXAsIGNvbnRleHQpO1xuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFJlY29yZCB0aGUgcm9vdCBlbGVtZW50IGluIGNhc2UgaXQgbGF0ZXIgZ2V0cyB0cmFuc3BsYW50ZWQuXG4gICAgICByb290RWxlbWVudHNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXSA9IGdldFJlYWN0Um9vdEVsZW1lbnRJbkNvbnRhaW5lcihjb250YWluZXIpO1xuICAgIH1cblxuICAgIHJldHVybiBjb21wb25lbnRJbnN0YW5jZTtcbiAgfSxcblxuICAvKipcbiAgICogUmVuZGVycyBhIFJlYWN0IGNvbXBvbmVudCBpbnRvIHRoZSBET00gaW4gdGhlIHN1cHBsaWVkIGBjb250YWluZXJgLlxuICAgKlxuICAgKiBJZiB0aGUgUmVhY3QgY29tcG9uZW50IHdhcyBwcmV2aW91c2x5IHJlbmRlcmVkIGludG8gYGNvbnRhaW5lcmAsIHRoaXMgd2lsbFxuICAgKiBwZXJmb3JtIGFuIHVwZGF0ZSBvbiBpdCBhbmQgb25seSBtdXRhdGUgdGhlIERPTSBhcyBuZWNlc3NhcnkgdG8gcmVmbGVjdCB0aGVcbiAgICogbGF0ZXN0IFJlYWN0IGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gcGFyZW50Q29tcG9uZW50IFRoZSBjb25jZXB0dWFsIHBhcmVudCBvZiB0aGlzIHJlbmRlciB0cmVlLlxuICAgKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gbmV4dEVsZW1lbnQgQ29tcG9uZW50IGVsZW1lbnQgdG8gcmVuZGVyLlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciBET00gZWxlbWVudCB0byByZW5kZXIgaW50by5cbiAgICogQHBhcmFtIHs/ZnVuY3Rpb259IGNhbGxiYWNrIGZ1bmN0aW9uIHRyaWdnZXJlZCBvbiBjb21wbGV0aW9uXG4gICAqIEByZXR1cm4ge1JlYWN0Q29tcG9uZW50fSBDb21wb25lbnQgaW5zdGFuY2UgcmVuZGVyZWQgaW4gYGNvbnRhaW5lcmAuXG4gICAqL1xuICByZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcjogZnVuY3Rpb24gKHBhcmVudENvbXBvbmVudCwgbmV4dEVsZW1lbnQsIGNvbnRhaW5lciwgY2FsbGJhY2spIHtcbiAgICAhKHBhcmVudENvbXBvbmVudCAhPSBudWxsICYmIHBhcmVudENvbXBvbmVudC5fcmVhY3RJbnRlcm5hbEluc3RhbmNlICE9IG51bGwpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3BhcmVudENvbXBvbmVudCBtdXN0IGJlIGEgdmFsaWQgUmVhY3QgQ29tcG9uZW50JykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHJldHVybiBSZWFjdE1vdW50Ll9yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcihwYXJlbnRDb21wb25lbnQsIG5leHRFbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKTtcbiAgfSxcblxuICBfcmVuZGVyU3VidHJlZUludG9Db250YWluZXI6IGZ1bmN0aW9uIChwYXJlbnRDb21wb25lbnQsIG5leHRFbGVtZW50LCBjb250YWluZXIsIGNhbGxiYWNrKSB7XG4gICAgIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChuZXh0RWxlbWVudCkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RET00ucmVuZGVyKCk6IEludmFsaWQgY29tcG9uZW50IGVsZW1lbnQuJXMnLCB0eXBlb2YgbmV4dEVsZW1lbnQgPT09ICdzdHJpbmcnID8gJyBJbnN0ZWFkIG9mIHBhc3NpbmcgYW4gZWxlbWVudCBzdHJpbmcsIG1ha2Ugc3VyZSB0byBpbnN0YW50aWF0ZSAnICsgJ2l0IGJ5IHBhc3NpbmcgaXQgdG8gUmVhY3QuY3JlYXRlRWxlbWVudC4nIDogdHlwZW9mIG5leHRFbGVtZW50ID09PSAnZnVuY3Rpb24nID8gJyBJbnN0ZWFkIG9mIHBhc3NpbmcgYSBjb21wb25lbnQgY2xhc3MsIG1ha2Ugc3VyZSB0byBpbnN0YW50aWF0ZSAnICsgJ2l0IGJ5IHBhc3NpbmcgaXQgdG8gUmVhY3QuY3JlYXRlRWxlbWVudC4nIDpcbiAgICAvLyBDaGVjayBpZiBpdCBxdWFja3MgbGlrZSBhbiBlbGVtZW50XG4gICAgbmV4dEVsZW1lbnQgIT0gbnVsbCAmJiBuZXh0RWxlbWVudC5wcm9wcyAhPT0gdW5kZWZpbmVkID8gJyBUaGlzIG1heSBiZSBjYXVzZWQgYnkgdW5pbnRlbnRpb25hbGx5IGxvYWRpbmcgdHdvIGluZGVwZW5kZW50ICcgKyAnY29waWVzIG9mIFJlYWN0LicgOiAnJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWNvbnRhaW5lciB8fCAhY29udGFpbmVyLnRhZ05hbWUgfHwgY29udGFpbmVyLnRhZ05hbWUudG9VcHBlckNhc2UoKSAhPT0gJ0JPRFknLCAncmVuZGVyKCk6IFJlbmRlcmluZyBjb21wb25lbnRzIGRpcmVjdGx5IGludG8gZG9jdW1lbnQuYm9keSBpcyAnICsgJ2Rpc2NvdXJhZ2VkLCBzaW5jZSBpdHMgY2hpbGRyZW4gYXJlIG9mdGVuIG1hbmlwdWxhdGVkIGJ5IHRoaXJkLXBhcnR5ICcgKyAnc2NyaXB0cyBhbmQgYnJvd3NlciBleHRlbnNpb25zLiBUaGlzIG1heSBsZWFkIHRvIHN1YnRsZSAnICsgJ3JlY29uY2lsaWF0aW9uIGlzc3Vlcy4gVHJ5IHJlbmRlcmluZyBpbnRvIGEgY29udGFpbmVyIGVsZW1lbnQgY3JlYXRlZCAnICsgJ2ZvciB5b3VyIGFwcC4nKSA6IHVuZGVmaW5lZDtcblxuICAgIHZhciBuZXh0V3JhcHBlZEVsZW1lbnQgPSBuZXcgUmVhY3RFbGVtZW50KFRvcExldmVsV3JhcHBlciwgbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgbmV4dEVsZW1lbnQpO1xuXG4gICAgdmFyIHByZXZDb21wb25lbnQgPSBpbnN0YW5jZXNCeVJlYWN0Um9vdElEW2dldFJlYWN0Um9vdElEKGNvbnRhaW5lcildO1xuXG4gICAgaWYgKHByZXZDb21wb25lbnQpIHtcbiAgICAgIHZhciBwcmV2V3JhcHBlZEVsZW1lbnQgPSBwcmV2Q29tcG9uZW50Ll9jdXJyZW50RWxlbWVudDtcbiAgICAgIHZhciBwcmV2RWxlbWVudCA9IHByZXZXcmFwcGVkRWxlbWVudC5wcm9wcztcbiAgICAgIGlmIChzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudChwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQpKSB7XG4gICAgICAgIHZhciBwdWJsaWNJbnN0ID0gcHJldkNvbXBvbmVudC5fcmVuZGVyZWRDb21wb25lbnQuZ2V0UHVibGljSW5zdGFuY2UoKTtcbiAgICAgICAgdmFyIHVwZGF0ZWRDYWxsYmFjayA9IGNhbGxiYWNrICYmIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBjYWxsYmFjay5jYWxsKHB1YmxpY0luc3QpO1xuICAgICAgICB9O1xuICAgICAgICBSZWFjdE1vdW50Ll91cGRhdGVSb290Q29tcG9uZW50KHByZXZDb21wb25lbnQsIG5leHRXcmFwcGVkRWxlbWVudCwgY29udGFpbmVyLCB1cGRhdGVkQ2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gcHVibGljSW5zdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFJlYWN0TW91bnQudW5tb3VudENvbXBvbmVudEF0Tm9kZShjb250YWluZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciByZWFjdFJvb3RFbGVtZW50ID0gZ2V0UmVhY3RSb290RWxlbWVudEluQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gICAgdmFyIGNvbnRhaW5lckhhc1JlYWN0TWFya3VwID0gcmVhY3RSb290RWxlbWVudCAmJiAhIWludGVybmFsR2V0SUQocmVhY3RSb290RWxlbWVudCk7XG4gICAgdmFyIGNvbnRhaW5lckhhc05vblJvb3RSZWFjdENoaWxkID0gaGFzTm9uUm9vdFJlYWN0Q2hpbGQoY29udGFpbmVyKTtcblxuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyghY29udGFpbmVySGFzTm9uUm9vdFJlYWN0Q2hpbGQsICdyZW5kZXIoLi4uKTogUmVwbGFjaW5nIFJlYWN0LXJlbmRlcmVkIGNoaWxkcmVuIHdpdGggYSBuZXcgcm9vdCAnICsgJ2NvbXBvbmVudC4gSWYgeW91IGludGVuZGVkIHRvIHVwZGF0ZSB0aGUgY2hpbGRyZW4gb2YgdGhpcyBub2RlLCAnICsgJ3lvdSBzaG91bGQgaW5zdGVhZCBoYXZlIHRoZSBleGlzdGluZyBjaGlsZHJlbiB1cGRhdGUgdGhlaXIgc3RhdGUgJyArICdhbmQgcmVuZGVyIHRoZSBuZXcgY29tcG9uZW50cyBpbnN0ZWFkIG9mIGNhbGxpbmcgUmVhY3RET00ucmVuZGVyLicpIDogdW5kZWZpbmVkO1xuXG4gICAgICBpZiAoIWNvbnRhaW5lckhhc1JlYWN0TWFya3VwIHx8IHJlYWN0Um9vdEVsZW1lbnQubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgdmFyIHJvb3RFbGVtZW50U2libGluZyA9IHJlYWN0Um9vdEVsZW1lbnQ7XG4gICAgICAgIHdoaWxlIChyb290RWxlbWVudFNpYmxpbmcpIHtcbiAgICAgICAgICBpZiAoaW50ZXJuYWxHZXRJRChyb290RWxlbWVudFNpYmxpbmcpKSB7XG4gICAgICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ3JlbmRlcigpOiBUYXJnZXQgbm9kZSBoYXMgbWFya3VwIHJlbmRlcmVkIGJ5IFJlYWN0LCBidXQgdGhlcmUgJyArICdhcmUgdW5yZWxhdGVkIG5vZGVzIGFzIHdlbGwuIFRoaXMgaXMgbW9zdCBjb21tb25seSBjYXVzZWQgYnkgJyArICd3aGl0ZS1zcGFjZSBpbnNlcnRlZCBhcm91bmQgc2VydmVyLXJlbmRlcmVkIG1hcmt1cC4nKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICByb290RWxlbWVudFNpYmxpbmcgPSByb290RWxlbWVudFNpYmxpbmcubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgc2hvdWxkUmV1c2VNYXJrdXAgPSBjb250YWluZXJIYXNSZWFjdE1hcmt1cCAmJiAhcHJldkNvbXBvbmVudCAmJiAhY29udGFpbmVySGFzTm9uUm9vdFJlYWN0Q2hpbGQ7XG4gICAgdmFyIGNvbXBvbmVudCA9IFJlYWN0TW91bnQuX3JlbmRlck5ld1Jvb3RDb21wb25lbnQobmV4dFdyYXBwZWRFbGVtZW50LCBjb250YWluZXIsIHNob3VsZFJldXNlTWFya3VwLCBwYXJlbnRDb21wb25lbnQgIT0gbnVsbCA/IHBhcmVudENvbXBvbmVudC5fcmVhY3RJbnRlcm5hbEluc3RhbmNlLl9wcm9jZXNzQ2hpbGRDb250ZXh0KHBhcmVudENvbXBvbmVudC5fcmVhY3RJbnRlcm5hbEluc3RhbmNlLl9jb250ZXh0KSA6IGVtcHR5T2JqZWN0KS5fcmVuZGVyZWRDb21wb25lbnQuZ2V0UHVibGljSW5zdGFuY2UoKTtcbiAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgIGNhbGxiYWNrLmNhbGwoY29tcG9uZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIGNvbXBvbmVudDtcbiAgfSxcblxuICAvKipcbiAgICogUmVuZGVycyBhIFJlYWN0IGNvbXBvbmVudCBpbnRvIHRoZSBET00gaW4gdGhlIHN1cHBsaWVkIGBjb250YWluZXJgLlxuICAgKlxuICAgKiBJZiB0aGUgUmVhY3QgY29tcG9uZW50IHdhcyBwcmV2aW91c2x5IHJlbmRlcmVkIGludG8gYGNvbnRhaW5lcmAsIHRoaXMgd2lsbFxuICAgKiBwZXJmb3JtIGFuIHVwZGF0ZSBvbiBpdCBhbmQgb25seSBtdXRhdGUgdGhlIERPTSBhcyBuZWNlc3NhcnkgdG8gcmVmbGVjdCB0aGVcbiAgICogbGF0ZXN0IFJlYWN0IGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IG5leHRFbGVtZW50IENvbXBvbmVudCBlbGVtZW50IHRvIHJlbmRlci5cbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdG8gcmVuZGVyIGludG8uXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBmdW5jdGlvbiB0cmlnZ2VyZWQgb24gY29tcGxldGlvblxuICAgKiBAcmV0dXJuIHtSZWFjdENvbXBvbmVudH0gQ29tcG9uZW50IGluc3RhbmNlIHJlbmRlcmVkIGluIGBjb250YWluZXJgLlxuICAgKi9cbiAgcmVuZGVyOiBmdW5jdGlvbiAobmV4dEVsZW1lbnQsIGNvbnRhaW5lciwgY2FsbGJhY2spIHtcbiAgICByZXR1cm4gUmVhY3RNb3VudC5fcmVuZGVyU3VidHJlZUludG9Db250YWluZXIobnVsbCwgbmV4dEVsZW1lbnQsIGNvbnRhaW5lciwgY2FsbGJhY2spO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBjb250YWluZXIgbm9kZSBpbnRvIHdoaWNoIFJlYWN0IGNvbXBvbmVudHMgd2lsbCBiZSByZW5kZXJlZC5cbiAgICogVGhpcyBhbHNvIGNyZWF0ZXMgdGhlIFwicmVhY3RSb290XCIgSUQgdGhhdCB3aWxsIGJlIGFzc2lnbmVkIHRvIHRoZSBlbGVtZW50XG4gICAqIHJlbmRlcmVkIHdpdGhpbi5cbiAgICpcbiAgICogQHBhcmFtIHtET01FbGVtZW50fSBjb250YWluZXIgRE9NIGVsZW1lbnQgdG8gcmVnaXN0ZXIgYXMgYSBjb250YWluZXIuXG4gICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIFwicmVhY3RSb290XCIgSUQgb2YgZWxlbWVudHMgcmVuZGVyZWQgd2l0aGluLlxuICAgKi9cbiAgcmVnaXN0ZXJDb250YWluZXI6IGZ1bmN0aW9uIChjb250YWluZXIpIHtcbiAgICB2YXIgcmVhY3RSb290SUQgPSBnZXRSZWFjdFJvb3RJRChjb250YWluZXIpO1xuICAgIGlmIChyZWFjdFJvb3RJRCkge1xuICAgICAgLy8gSWYgb25lIGV4aXN0cywgbWFrZSBzdXJlIGl0IGlzIGEgdmFsaWQgXCJyZWFjdFJvb3RcIiBJRC5cbiAgICAgIHJlYWN0Um9vdElEID0gUmVhY3RJbnN0YW5jZUhhbmRsZXMuZ2V0UmVhY3RSb290SURGcm9tTm9kZUlEKHJlYWN0Um9vdElEKTtcbiAgICB9XG4gICAgaWYgKCFyZWFjdFJvb3RJRCkge1xuICAgICAgLy8gTm8gdmFsaWQgXCJyZWFjdFJvb3RcIiBJRCBmb3VuZCwgY3JlYXRlIG9uZS5cbiAgICAgIHJlYWN0Um9vdElEID0gUmVhY3RJbnN0YW5jZUhhbmRsZXMuY3JlYXRlUmVhY3RSb290SUQoKTtcbiAgICB9XG4gICAgY29udGFpbmVyc0J5UmVhY3RSb290SURbcmVhY3RSb290SURdID0gY29udGFpbmVyO1xuICAgIHJldHVybiByZWFjdFJvb3RJRDtcbiAgfSxcblxuICAvKipcbiAgICogVW5tb3VudHMgYW5kIGRlc3Ryb3lzIHRoZSBSZWFjdCBjb21wb25lbnQgcmVuZGVyZWQgaW4gdGhlIGBjb250YWluZXJgLlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUVsZW1lbnR9IGNvbnRhaW5lciBET00gZWxlbWVudCBjb250YWluaW5nIGEgUmVhY3QgY29tcG9uZW50LlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGEgY29tcG9uZW50IHdhcyBmb3VuZCBpbiBhbmQgdW5tb3VudGVkIGZyb21cbiAgICogICAgICAgICAgICAgICAgICAgYGNvbnRhaW5lcmBcbiAgICovXG4gIHVubW91bnRDb21wb25lbnRBdE5vZGU6IGZ1bmN0aW9uIChjb250YWluZXIpIHtcbiAgICAvLyBWYXJpb3VzIHBhcnRzIG9mIG91ciBjb2RlIChzdWNoIGFzIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50J3NcbiAgICAvLyBfcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50KSBhc3N1bWUgdGhhdCBjYWxscyB0byByZW5kZXIgYXJlbid0IG5lc3RlZDtcbiAgICAvLyB2ZXJpZnkgdGhhdCB0aGF0J3MgdGhlIGNhc2UuIChTdHJpY3RseSBzcGVha2luZywgdW5tb3VudGluZyB3b24ndCBjYXVzZSBhXG4gICAgLy8gcmVuZGVyIGJ1dCB3ZSBzdGlsbCBkb24ndCBleHBlY3QgdG8gYmUgaW4gYSByZW5kZXIgY2FsbCBoZXJlLilcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID09IG51bGwsICd1bm1vdW50Q29tcG9uZW50QXROb2RlKCk6IFJlbmRlciBtZXRob2RzIHNob3VsZCBiZSBhIHB1cmUgZnVuY3Rpb24gJyArICdvZiBwcm9wcyBhbmQgc3RhdGU7IHRyaWdnZXJpbmcgbmVzdGVkIGNvbXBvbmVudCB1cGRhdGVzIGZyb20gcmVuZGVyICcgKyAnaXMgbm90IGFsbG93ZWQuIElmIG5lY2Vzc2FyeSwgdHJpZ2dlciBuZXN0ZWQgdXBkYXRlcyBpbiAnICsgJ2NvbXBvbmVudERpZFVwZGF0ZS4gQ2hlY2sgdGhlIHJlbmRlciBtZXRob2Qgb2YgJXMuJywgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCAmJiBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50LmdldE5hbWUoKSB8fCAnUmVhY3RDb21wb3NpdGVDb21wb25lbnQnKSA6IHVuZGVmaW5lZDtcblxuICAgICEoY29udGFpbmVyICYmIChjb250YWluZXIubm9kZVR5cGUgPT09IEVMRU1FTlRfTk9ERV9UWVBFIHx8IGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRE9DX05PREVfVFlQRSB8fCBjb250YWluZXIubm9kZVR5cGUgPT09IERPQ1VNRU5UX0ZSQUdNRU5UX05PREVfVFlQRSkpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3VubW91bnRDb21wb25lbnRBdE5vZGUoLi4uKTogVGFyZ2V0IGNvbnRhaW5lciBpcyBub3QgYSBET00gZWxlbWVudC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgICB2YXIgcmVhY3RSb290SUQgPSBnZXRSZWFjdFJvb3RJRChjb250YWluZXIpO1xuICAgIHZhciBjb21wb25lbnQgPSBpbnN0YW5jZXNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXTtcbiAgICBpZiAoIWNvbXBvbmVudCkge1xuICAgICAgLy8gQ2hlY2sgaWYgdGhlIG5vZGUgYmVpbmcgdW5tb3VudGVkIHdhcyByZW5kZXJlZCBieSBSZWFjdCwgYnV0IGlzbid0IGFcbiAgICAgIC8vIHJvb3Qgbm9kZS5cbiAgICAgIHZhciBjb250YWluZXJIYXNOb25Sb290UmVhY3RDaGlsZCA9IGhhc05vblJvb3RSZWFjdENoaWxkKGNvbnRhaW5lcik7XG5cbiAgICAgIC8vIENoZWNrIGlmIHRoZSBjb250YWluZXIgaXRzZWxmIGlzIGEgUmVhY3Qgcm9vdCBub2RlLlxuICAgICAgdmFyIGNvbnRhaW5lcklEID0gaW50ZXJuYWxHZXRJRChjb250YWluZXIpO1xuICAgICAgdmFyIGlzQ29udGFpbmVyUmVhY3RSb290ID0gY29udGFpbmVySUQgJiYgY29udGFpbmVySUQgPT09IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmdldFJlYWN0Um9vdElERnJvbU5vZGVJRChjb250YWluZXJJRCk7XG5cbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKCFjb250YWluZXJIYXNOb25Sb290UmVhY3RDaGlsZCwgJ3VubW91bnRDb21wb25lbnRBdE5vZGUoKTogVGhlIG5vZGUgeW91XFwncmUgYXR0ZW1wdGluZyB0byB1bm1vdW50ICcgKyAnd2FzIHJlbmRlcmVkIGJ5IFJlYWN0IGFuZCBpcyBub3QgYSB0b3AtbGV2ZWwgY29udGFpbmVyLiAlcycsIGlzQ29udGFpbmVyUmVhY3RSb290ID8gJ1lvdSBtYXkgaGF2ZSBhY2NpZGVudGFsbHkgcGFzc2VkIGluIGEgUmVhY3Qgcm9vdCBub2RlIGluc3RlYWQgJyArICdvZiBpdHMgY29udGFpbmVyLicgOiAnSW5zdGVhZCwgaGF2ZSB0aGUgcGFyZW50IGNvbXBvbmVudCB1cGRhdGUgaXRzIHN0YXRlIGFuZCAnICsgJ3JlcmVuZGVyIGluIG9yZGVyIHRvIHJlbW92ZSB0aGlzIGNvbXBvbmVudC4nKSA6IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBSZWFjdFVwZGF0ZXMuYmF0Y2hlZFVwZGF0ZXModW5tb3VudENvbXBvbmVudEZyb21Ob2RlLCBjb21wb25lbnQsIGNvbnRhaW5lcik7XG4gICAgZGVsZXRlIGluc3RhbmNlc0J5UmVhY3RSb290SURbcmVhY3RSb290SURdO1xuICAgIGRlbGV0ZSBjb250YWluZXJzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF07XG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGRlbGV0ZSByb290RWxlbWVudHNCeVJlYWN0Um9vdElEW3JlYWN0Um9vdElEXTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZpbmRzIHRoZSBjb250YWluZXIgRE9NIGVsZW1lbnQgdGhhdCBjb250YWlucyBSZWFjdCBjb21wb25lbnQgdG8gd2hpY2ggdGhlXG4gICAqIHN1cHBsaWVkIERPTSBgaWRgIGJlbG9uZ3MuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpZCBUaGUgSUQgb2YgYW4gZWxlbWVudCByZW5kZXJlZCBieSBhIFJlYWN0IGNvbXBvbmVudC5cbiAgICogQHJldHVybiB7P0RPTUVsZW1lbnR9IERPTSBlbGVtZW50IHRoYXQgY29udGFpbnMgdGhlIGBpZGAuXG4gICAqL1xuICBmaW5kUmVhY3RDb250YWluZXJGb3JJRDogZnVuY3Rpb24gKGlkKSB7XG4gICAgdmFyIHJlYWN0Um9vdElEID0gUmVhY3RJbnN0YW5jZUhhbmRsZXMuZ2V0UmVhY3RSb290SURGcm9tTm9kZUlEKGlkKTtcbiAgICB2YXIgY29udGFpbmVyID0gY29udGFpbmVyc0J5UmVhY3RSb290SURbcmVhY3RSb290SURdO1xuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciByb290RWxlbWVudCA9IHJvb3RFbGVtZW50c0J5UmVhY3RSb290SURbcmVhY3RSb290SURdO1xuICAgICAgaWYgKHJvb3RFbGVtZW50ICYmIHJvb3RFbGVtZW50LnBhcmVudE5vZGUgIT09IGNvbnRhaW5lcikge1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhcbiAgICAgICAgLy8gQ2FsbCBpbnRlcm5hbEdldElEIGhlcmUgYmVjYXVzZSBnZXRJRCBjYWxscyBpc1ZhbGlkIHdoaWNoIGNhbGxzXG4gICAgICAgIC8vIGZpbmRSZWFjdENvbnRhaW5lckZvcklEICh0aGlzIGZ1bmN0aW9uKS5cbiAgICAgICAgaW50ZXJuYWxHZXRJRChyb290RWxlbWVudCkgPT09IHJlYWN0Um9vdElELCAnUmVhY3RNb3VudDogUm9vdCBlbGVtZW50IElEIGRpZmZlcmVkIGZyb20gcmVhY3RSb290SUQuJykgOiB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBjb250YWluZXJDaGlsZCA9IGNvbnRhaW5lci5maXJzdENoaWxkO1xuICAgICAgICBpZiAoY29udGFpbmVyQ2hpbGQgJiYgcmVhY3RSb290SUQgPT09IGludGVybmFsR2V0SUQoY29udGFpbmVyQ2hpbGQpKSB7XG4gICAgICAgICAgLy8gSWYgdGhlIGNvbnRhaW5lciBoYXMgYSBuZXcgY2hpbGQgd2l0aCB0aGUgc2FtZSBJRCBhcyB0aGUgb2xkXG4gICAgICAgICAgLy8gcm9vdCBlbGVtZW50LCB0aGVuIHJvb3RFbGVtZW50c0J5UmVhY3RSb290SURbcmVhY3RSb290SURdIGlzXG4gICAgICAgICAgLy8ganVzdCBzdGFsZSBhbmQgbmVlZHMgdG8gYmUgdXBkYXRlZC4gVGhlIGNhc2UgdGhhdCBkZXNlcnZlcyBhXG4gICAgICAgICAgLy8gd2FybmluZyBpcyB3aGVuIHRoZSBjb250YWluZXIgaXMgZW1wdHkuXG4gICAgICAgICAgcm9vdEVsZW1lbnRzQnlSZWFjdFJvb3RJRFtyZWFjdFJvb3RJRF0gPSBjb250YWluZXJDaGlsZDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJ1JlYWN0TW91bnQ6IFJvb3QgZWxlbWVudCBoYXMgYmVlbiByZW1vdmVkIGZyb20gaXRzIG9yaWdpbmFsICcgKyAnY29udGFpbmVyLiBOZXcgY29udGFpbmVyOiAlcycsIHJvb3RFbGVtZW50LnBhcmVudE5vZGUpIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgfSxcblxuICAvKipcbiAgICogRmluZHMgYW4gZWxlbWVudCByZW5kZXJlZCBieSBSZWFjdCB3aXRoIHRoZSBzdXBwbGllZCBJRC5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIElEIG9mIGEgRE9NIG5vZGUgaW4gdGhlIFJlYWN0IGNvbXBvbmVudC5cbiAgICogQHJldHVybiB7RE9NRWxlbWVudH0gUm9vdCBET00gbm9kZSBvZiB0aGUgUmVhY3QgY29tcG9uZW50LlxuICAgKi9cbiAgZmluZFJlYWN0Tm9kZUJ5SUQ6IGZ1bmN0aW9uIChpZCkge1xuICAgIHZhciByZWFjdFJvb3QgPSBSZWFjdE1vdW50LmZpbmRSZWFjdENvbnRhaW5lckZvcklEKGlkKTtcbiAgICByZXR1cm4gUmVhY3RNb3VudC5maW5kQ29tcG9uZW50Um9vdChyZWFjdFJvb3QsIGlkKTtcbiAgfSxcblxuICAvKipcbiAgICogVHJhdmVyc2VzIHVwIHRoZSBhbmNlc3RvcnMgb2YgdGhlIHN1cHBsaWVkIG5vZGUgdG8gZmluZCBhIG5vZGUgdGhhdCBpcyBhXG4gICAqIERPTSByZXByZXNlbnRhdGlvbiBvZiBhIFJlYWN0IGNvbXBvbmVudCByZW5kZXJlZCBieSB0aGlzIGNvcHkgb2YgUmVhY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gbm9kZVxuICAgKiBAcmV0dXJuIHs/RE9NRXZlbnRUYXJnZXR9XG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZ2V0Rmlyc3RSZWFjdERPTTogZnVuY3Rpb24gKG5vZGUpIHtcbiAgICByZXR1cm4gZmluZEZpcnN0UmVhY3RET01JbXBsKG5vZGUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBGaW5kcyBhIG5vZGUgd2l0aCB0aGUgc3VwcGxpZWQgYHRhcmdldElEYCBpbnNpZGUgb2YgdGhlIHN1cHBsaWVkXG4gICAqIGBhbmNlc3Rvck5vZGVgLiAgRXhwbG9pdHMgdGhlIElEIG5hbWluZyBzY2hlbWUgdG8gcGVyZm9ybSB0aGUgc2VhcmNoXG4gICAqIHF1aWNrbHkuXG4gICAqXG4gICAqIEBwYXJhbSB7RE9NRXZlbnRUYXJnZXR9IGFuY2VzdG9yTm9kZSBTZWFyY2ggZnJvbSB0aGlzIHJvb3QuXG4gICAqIEBwYXJhcm0ge3N0cmluZ30gdGFyZ2V0SUQgSUQgb2YgdGhlIERPTSByZXByZXNlbnRhdGlvbiBvZiB0aGUgY29tcG9uZW50LlxuICAgKiBAcmV0dXJuIHtET01FdmVudFRhcmdldH0gRE9NIG5vZGUgd2l0aCB0aGUgc3VwcGxpZWQgYHRhcmdldElEYC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBmaW5kQ29tcG9uZW50Um9vdDogZnVuY3Rpb24gKGFuY2VzdG9yTm9kZSwgdGFyZ2V0SUQpIHtcbiAgICB2YXIgZmlyc3RDaGlsZHJlbiA9IGZpbmRDb21wb25lbnRSb290UmV1c2FibGVBcnJheTtcbiAgICB2YXIgY2hpbGRJbmRleCA9IDA7XG5cbiAgICB2YXIgZGVlcGVzdEFuY2VzdG9yID0gZmluZERlZXBlc3RDYWNoZWRBbmNlc3Rvcih0YXJnZXRJRCkgfHwgYW5jZXN0b3JOb2RlO1xuXG4gICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBvbiB0aGUgbmV4dCBsaW5lOyBnaXZlIGFuIGVhcmx5IHdhcm5pbmdcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGRlZXBlc3RBbmNlc3RvciAhPSBudWxsLCAnUmVhY3QgY2FuXFwndCBmaW5kIHRoZSByb290IGNvbXBvbmVudCBub2RlIGZvciBkYXRhLXJlYWN0aWQgdmFsdWUgJyArICdgJXNgLiBJZiB5b3VcXCdyZSBzZWVpbmcgdGhpcyBtZXNzYWdlLCBpdCBwcm9iYWJseSBtZWFucyB0aGF0ICcgKyAneW91XFwndmUgbG9hZGVkIHR3byBjb3BpZXMgb2YgUmVhY3Qgb24gdGhlIHBhZ2UuIEF0IHRoaXMgdGltZSwgb25seSAnICsgJ2Egc2luZ2xlIGNvcHkgb2YgUmVhY3QgY2FuIGJlIGxvYWRlZCBhdCBhIHRpbWUuJywgdGFyZ2V0SUQpIDogdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIGZpcnN0Q2hpbGRyZW5bMF0gPSBkZWVwZXN0QW5jZXN0b3IuZmlyc3RDaGlsZDtcbiAgICBmaXJzdENoaWxkcmVuLmxlbmd0aCA9IDE7XG5cbiAgICB3aGlsZSAoY2hpbGRJbmRleCA8IGZpcnN0Q2hpbGRyZW4ubGVuZ3RoKSB7XG4gICAgICB2YXIgY2hpbGQgPSBmaXJzdENoaWxkcmVuW2NoaWxkSW5kZXgrK107XG4gICAgICB2YXIgdGFyZ2V0Q2hpbGQ7XG5cbiAgICAgIHdoaWxlIChjaGlsZCkge1xuICAgICAgICB2YXIgY2hpbGRJRCA9IFJlYWN0TW91bnQuZ2V0SUQoY2hpbGQpO1xuICAgICAgICBpZiAoY2hpbGRJRCkge1xuICAgICAgICAgIC8vIEV2ZW4gaWYgd2UgZmluZCB0aGUgbm9kZSB3ZSdyZSBsb29raW5nIGZvciwgd2UgZmluaXNoIGxvb3BpbmdcbiAgICAgICAgICAvLyB0aHJvdWdoIGl0cyBzaWJsaW5ncyB0byBlbnN1cmUgdGhleSdyZSBjYWNoZWQgc28gdGhhdCB3ZSBkb24ndCBoYXZlXG4gICAgICAgICAgLy8gdG8gcmV2aXNpdCB0aGlzIG5vZGUgYWdhaW4uIE90aGVyd2lzZSwgd2UgbWFrZSBuXjIgY2FsbHMgdG8gZ2V0SURcbiAgICAgICAgICAvLyB3aGVuIHZpc2l0aW5nIHRoZSBtYW55IGNoaWxkcmVuIG9mIGEgc2luZ2xlIG5vZGUgaW4gb3JkZXIuXG5cbiAgICAgICAgICBpZiAodGFyZ2V0SUQgPT09IGNoaWxkSUQpIHtcbiAgICAgICAgICAgIHRhcmdldENoaWxkID0gY2hpbGQ7XG4gICAgICAgICAgfSBlbHNlIGlmIChSZWFjdEluc3RhbmNlSGFuZGxlcy5pc0FuY2VzdG9ySURPZihjaGlsZElELCB0YXJnZXRJRCkpIHtcbiAgICAgICAgICAgIC8vIElmIHdlIGZpbmQgYSBjaGlsZCB3aG9zZSBJRCBpcyBhbiBhbmNlc3RvciBvZiB0aGUgZ2l2ZW4gSUQsXG4gICAgICAgICAgICAvLyB0aGVuIHdlIGNhbiBiZSBzdXJlIHRoYXQgd2Ugb25seSB3YW50IHRvIHNlYXJjaCB0aGUgc3VidHJlZVxuICAgICAgICAgICAgLy8gcm9vdGVkIGF0IHRoaXMgY2hpbGQsIHNvIHdlIGNhbiB0aHJvdyBvdXQgdGhlIHJlc3Qgb2YgdGhlXG4gICAgICAgICAgICAvLyBzZWFyY2ggc3RhdGUuXG4gICAgICAgICAgICBmaXJzdENoaWxkcmVuLmxlbmd0aCA9IGNoaWxkSW5kZXggPSAwO1xuICAgICAgICAgICAgZmlyc3RDaGlsZHJlbi5wdXNoKGNoaWxkLmZpcnN0Q2hpbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiB0aGlzIGNoaWxkIGhhZCBubyBJRCwgdGhlbiB0aGVyZSdzIGEgY2hhbmNlIHRoYXQgaXQgd2FzXG4gICAgICAgICAgLy8gaW5qZWN0ZWQgYXV0b21hdGljYWxseSBieSB0aGUgYnJvd3NlciwgYXMgd2hlbiBhIGA8dGFibGU+YFxuICAgICAgICAgIC8vIGVsZW1lbnQgc3Byb3V0cyBhbiBleHRyYSBgPHRib2R5PmAgY2hpbGQgYXMgYSBzaWRlIGVmZmVjdCBvZlxuICAgICAgICAgIC8vIGAuaW5uZXJIVE1MYCBwYXJzaW5nLiBPcHRpbWlzdGljYWxseSBjb250aW51ZSBkb3duIHRoaXNcbiAgICAgICAgICAvLyBicmFuY2gsIGJ1dCBub3QgYmVmb3JlIGV4YW1pbmluZyB0aGUgb3RoZXIgc2libGluZ3MuXG4gICAgICAgICAgZmlyc3RDaGlsZHJlbi5wdXNoKGNoaWxkLmZpcnN0Q2hpbGQpO1xuICAgICAgICB9XG5cbiAgICAgICAgY2hpbGQgPSBjaGlsZC5uZXh0U2libGluZztcbiAgICAgIH1cblxuICAgICAgaWYgKHRhcmdldENoaWxkKSB7XG4gICAgICAgIC8vIEVtcHR5aW5nIGZpcnN0Q2hpbGRyZW4vZmluZENvbXBvbmVudFJvb3RSZXVzYWJsZUFycmF5IGlzXG4gICAgICAgIC8vIG5vdCBuZWNlc3NhcnkgZm9yIGNvcnJlY3RuZXNzLCBidXQgaXQgaGVscHMgdGhlIEdDIHJlY2xhaW1cbiAgICAgICAgLy8gYW55IG5vZGVzIHRoYXQgd2VyZSBsZWZ0IGF0IHRoZSBlbmQgb2YgdGhlIHNlYXJjaC5cbiAgICAgICAgZmlyc3RDaGlsZHJlbi5sZW5ndGggPSAwO1xuXG4gICAgICAgIHJldHVybiB0YXJnZXRDaGlsZDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmaXJzdENoaWxkcmVuLmxlbmd0aCA9IDA7XG5cbiAgICAhZmFsc2UgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZmluZENvbXBvbmVudFJvb3QoLi4uLCAlcyk6IFVuYWJsZSB0byBmaW5kIGVsZW1lbnQuIFRoaXMgcHJvYmFibHkgJyArICdtZWFucyB0aGUgRE9NIHdhcyB1bmV4cGVjdGVkbHkgbXV0YXRlZCAoZS5nLiwgYnkgdGhlIGJyb3dzZXIpLCAnICsgJ3VzdWFsbHkgZHVlIHRvIGZvcmdldHRpbmcgYSA8dGJvZHk+IHdoZW4gdXNpbmcgdGFibGVzLCBuZXN0aW5nIHRhZ3MgJyArICdsaWtlIDxmb3JtPiwgPHA+LCBvciA8YT4sIG9yIHVzaW5nIG5vbi1TVkcgZWxlbWVudHMgaW4gYW4gPHN2Zz4gJyArICdwYXJlbnQuICcgKyAnVHJ5IGluc3BlY3RpbmcgdGhlIGNoaWxkIG5vZGVzIG9mIHRoZSBlbGVtZW50IHdpdGggUmVhY3QgSUQgYCVzYC4nLCB0YXJnZXRJRCwgUmVhY3RNb3VudC5nZXRJRChhbmNlc3Rvck5vZGUpKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIH0sXG5cbiAgX21vdW50SW1hZ2VJbnRvTm9kZTogZnVuY3Rpb24gKG1hcmt1cCwgY29udGFpbmVyLCBzaG91bGRSZXVzZU1hcmt1cCwgdHJhbnNhY3Rpb24pIHtcbiAgICAhKGNvbnRhaW5lciAmJiAoY29udGFpbmVyLm5vZGVUeXBlID09PSBFTEVNRU5UX05PREVfVFlQRSB8fCBjb250YWluZXIubm9kZVR5cGUgPT09IERPQ19OT0RFX1RZUEUgfHwgY29udGFpbmVyLm5vZGVUeXBlID09PSBET0NVTUVOVF9GUkFHTUVOVF9OT0RFX1RZUEUpKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdtb3VudENvbXBvbmVudEludG9Ob2RlKC4uLik6IFRhcmdldCBjb250YWluZXIgaXMgbm90IHZhbGlkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIGlmIChzaG91bGRSZXVzZU1hcmt1cCkge1xuICAgICAgdmFyIHJvb3RFbGVtZW50ID0gZ2V0UmVhY3RSb290RWxlbWVudEluQ29udGFpbmVyKGNvbnRhaW5lcik7XG4gICAgICBpZiAoUmVhY3RNYXJrdXBDaGVja3N1bS5jYW5SZXVzZU1hcmt1cChtYXJrdXAsIHJvb3RFbGVtZW50KSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgY2hlY2tzdW0gPSByb290RWxlbWVudC5nZXRBdHRyaWJ1dGUoUmVhY3RNYXJrdXBDaGVja3N1bS5DSEVDS1NVTV9BVFRSX05BTUUpO1xuICAgICAgICByb290RWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoUmVhY3RNYXJrdXBDaGVja3N1bS5DSEVDS1NVTV9BVFRSX05BTUUpO1xuXG4gICAgICAgIHZhciByb290TWFya3VwID0gcm9vdEVsZW1lbnQub3V0ZXJIVE1MO1xuICAgICAgICByb290RWxlbWVudC5zZXRBdHRyaWJ1dGUoUmVhY3RNYXJrdXBDaGVja3N1bS5DSEVDS1NVTV9BVFRSX05BTUUsIGNoZWNrc3VtKTtcblxuICAgICAgICB2YXIgbm9ybWFsaXplZE1hcmt1cCA9IG1hcmt1cDtcbiAgICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICAvLyBiZWNhdXNlIHJvb3RNYXJrdXAgaXMgcmV0cmlldmVkIGZyb20gdGhlIERPTSwgdmFyaW91cyBub3JtYWxpemF0aW9uc1xuICAgICAgICAgIC8vIHdpbGwgaGF2ZSBvY2N1cnJlZCB3aGljaCB3aWxsIG5vdCBiZSBwcmVzZW50IGluIGBtYXJrdXBgLiBIZXJlLFxuICAgICAgICAgIC8vIGluc2VydCBtYXJrdXAgaW50byBhIDxkaXY+IG9yIDxpZnJhbWU+IGRlcGVuZGluZyBvbiB0aGUgY29udGFpbmVyXG4gICAgICAgICAgLy8gdHlwZSB0byBwZXJmb3JtIHRoZSBzYW1lIG5vcm1hbGl6YXRpb25zIGJlZm9yZSBjb21wYXJpbmcuXG4gICAgICAgICAgdmFyIG5vcm1hbGl6ZXI7XG4gICAgICAgICAgaWYgKGNvbnRhaW5lci5ub2RlVHlwZSA9PT0gRUxFTUVOVF9OT0RFX1RZUEUpIHtcbiAgICAgICAgICAgIG5vcm1hbGl6ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgIG5vcm1hbGl6ZXIuaW5uZXJIVE1MID0gbWFya3VwO1xuICAgICAgICAgICAgbm9ybWFsaXplZE1hcmt1cCA9IG5vcm1hbGl6ZXIuaW5uZXJIVE1MO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBub3JtYWxpemVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaWZyYW1lJyk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG5vcm1hbGl6ZXIpO1xuICAgICAgICAgICAgbm9ybWFsaXplci5jb250ZW50RG9jdW1lbnQud3JpdGUobWFya3VwKTtcbiAgICAgICAgICAgIG5vcm1hbGl6ZWRNYXJrdXAgPSBub3JtYWxpemVyLmNvbnRlbnREb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub3V0ZXJIVE1MO1xuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChub3JtYWxpemVyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGlmZkluZGV4ID0gZmlyc3REaWZmZXJlbmNlSW5kZXgobm9ybWFsaXplZE1hcmt1cCwgcm9vdE1hcmt1cCk7XG4gICAgICAgIHZhciBkaWZmZXJlbmNlID0gJyAoY2xpZW50KSAnICsgbm9ybWFsaXplZE1hcmt1cC5zdWJzdHJpbmcoZGlmZkluZGV4IC0gMjAsIGRpZmZJbmRleCArIDIwKSArICdcXG4gKHNlcnZlcikgJyArIHJvb3RNYXJrdXAuc3Vic3RyaW5nKGRpZmZJbmRleCAtIDIwLCBkaWZmSW5kZXggKyAyMCk7XG5cbiAgICAgICAgIShjb250YWluZXIubm9kZVR5cGUgIT09IERPQ19OT0RFX1RZUEUpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1lvdVxcJ3JlIHRyeWluZyB0byByZW5kZXIgYSBjb21wb25lbnQgdG8gdGhlIGRvY3VtZW50IHVzaW5nICcgKyAnc2VydmVyIHJlbmRlcmluZyBidXQgdGhlIGNoZWNrc3VtIHdhcyBpbnZhbGlkLiBUaGlzIHVzdWFsbHkgJyArICdtZWFucyB5b3UgcmVuZGVyZWQgYSBkaWZmZXJlbnQgY29tcG9uZW50IHR5cGUgb3IgcHJvcHMgb24gJyArICd0aGUgY2xpZW50IGZyb20gdGhlIG9uZSBvbiB0aGUgc2VydmVyLCBvciB5b3VyIHJlbmRlcigpICcgKyAnbWV0aG9kcyBhcmUgaW1wdXJlLiBSZWFjdCBjYW5ub3QgaGFuZGxlIHRoaXMgY2FzZSBkdWUgdG8gJyArICdjcm9zcy1icm93c2VyIHF1aXJrcyBieSByZW5kZXJpbmcgYXQgdGhlIGRvY3VtZW50IHJvb3QuIFlvdSAnICsgJ3Nob3VsZCBsb29rIGZvciBlbnZpcm9ubWVudCBkZXBlbmRlbnQgY29kZSBpbiB5b3VyIGNvbXBvbmVudHMgJyArICdhbmQgZW5zdXJlIHRoZSBwcm9wcyBhcmUgdGhlIHNhbWUgY2xpZW50IGFuZCBzZXJ2ZXIgc2lkZTpcXG4lcycsIGRpZmZlcmVuY2UpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAnUmVhY3QgYXR0ZW1wdGVkIHRvIHJldXNlIG1hcmt1cCBpbiBhIGNvbnRhaW5lciBidXQgdGhlICcgKyAnY2hlY2tzdW0gd2FzIGludmFsaWQuIFRoaXMgZ2VuZXJhbGx5IG1lYW5zIHRoYXQgeW91IGFyZSAnICsgJ3VzaW5nIHNlcnZlciByZW5kZXJpbmcgYW5kIHRoZSBtYXJrdXAgZ2VuZXJhdGVkIG9uIHRoZSAnICsgJ3NlcnZlciB3YXMgbm90IHdoYXQgdGhlIGNsaWVudCB3YXMgZXhwZWN0aW5nLiBSZWFjdCBpbmplY3RlZCAnICsgJ25ldyBtYXJrdXAgdG8gY29tcGVuc2F0ZSB3aGljaCB3b3JrcyBidXQgeW91IGhhdmUgbG9zdCBtYW55ICcgKyAnb2YgdGhlIGJlbmVmaXRzIG9mIHNlcnZlciByZW5kZXJpbmcuIEluc3RlYWQsIGZpZ3VyZSBvdXQgJyArICd3aHkgdGhlIG1hcmt1cCBiZWluZyBnZW5lcmF0ZWQgaXMgZGlmZmVyZW50IG9uIHRoZSBjbGllbnQgJyArICdvciBzZXJ2ZXI6XFxuJXMnLCBkaWZmZXJlbmNlKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgICEoY29udGFpbmVyLm5vZGVUeXBlICE9PSBET0NfTk9ERV9UWVBFKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdZb3VcXCdyZSB0cnlpbmcgdG8gcmVuZGVyIGEgY29tcG9uZW50IHRvIHRoZSBkb2N1bWVudCBidXQgJyArICd5b3UgZGlkblxcJ3QgdXNlIHNlcnZlciByZW5kZXJpbmcuIFdlIGNhblxcJ3QgZG8gdGhpcyAnICsgJ3dpdGhvdXQgdXNpbmcgc2VydmVyIHJlbmRlcmluZyBkdWUgdG8gY3Jvc3MtYnJvd3NlciBxdWlya3MuICcgKyAnU2VlIFJlYWN0RE9NU2VydmVyLnJlbmRlclRvU3RyaW5nKCkgZm9yIHNlcnZlciByZW5kZXJpbmcuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgaWYgKHRyYW5zYWN0aW9uLnVzZUNyZWF0ZUVsZW1lbnQpIHtcbiAgICAgIHdoaWxlIChjb250YWluZXIubGFzdENoaWxkKSB7XG4gICAgICAgIGNvbnRhaW5lci5yZW1vdmVDaGlsZChjb250YWluZXIubGFzdENoaWxkKTtcbiAgICAgIH1cbiAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChtYXJrdXApO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRJbm5lckhUTUwoY29udGFpbmVyLCBtYXJrdXApO1xuICAgIH1cbiAgfSxcblxuICBvd25lckRvY3VtZW50Q29udGV4dEtleTogb3duZXJEb2N1bWVudENvbnRleHRLZXksXG5cbiAgLyoqXG4gICAqIFJlYWN0IElEIHV0aWxpdGllcy5cbiAgICovXG5cbiAgZ2V0UmVhY3RSb290SUQ6IGdldFJlYWN0Um9vdElELFxuXG4gIGdldElEOiBnZXRJRCxcblxuICBzZXRJRDogc2V0SUQsXG5cbiAgZ2V0Tm9kZTogZ2V0Tm9kZSxcblxuICBnZXROb2RlRnJvbUluc3RhbmNlOiBnZXROb2RlRnJvbUluc3RhbmNlLFxuXG4gIGlzVmFsaWQ6IGlzVmFsaWQsXG5cbiAgcHVyZ2VJRDogcHVyZ2VJRFxufTtcblxuUmVhY3RQZXJmLm1lYXN1cmVNZXRob2RzKFJlYWN0TW91bnQsICdSZWFjdE1vdW50Jywge1xuICBfcmVuZGVyTmV3Um9vdENvbXBvbmVudDogJ19yZW5kZXJOZXdSb290Q29tcG9uZW50JyxcbiAgX21vdW50SW1hZ2VJbnRvTm9kZTogJ19tb3VudEltYWdlSW50b05vZGUnXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdE1vdW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdE11bHRpQ2hpbGRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudCA9IHJlcXVpcmUoJy4vUmVhY3RDb21wb25lbnRFbnZpcm9ubWVudCcpO1xudmFyIFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzID0gcmVxdWlyZSgnLi9SZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcycpO1xuXG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSByZXF1aXJlKCcuL1JlYWN0Q3VycmVudE93bmVyJyk7XG52YXIgUmVhY3RSZWNvbmNpbGVyID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZXInKTtcbnZhciBSZWFjdENoaWxkUmVjb25jaWxlciA9IHJlcXVpcmUoJy4vUmVhY3RDaGlsZFJlY29uY2lsZXInKTtcblxudmFyIGZsYXR0ZW5DaGlsZHJlbiA9IHJlcXVpcmUoJy4vZmxhdHRlbkNoaWxkcmVuJyk7XG5cbi8qKlxuICogVXBkYXRpbmcgY2hpbGRyZW4gb2YgYSBjb21wb25lbnQgbWF5IHRyaWdnZXIgcmVjdXJzaXZlIHVwZGF0ZXMuIFRoZSBkZXB0aCBpc1xuICogdXNlZCB0byBiYXRjaCByZWN1cnNpdmUgdXBkYXRlcyB0byByZW5kZXIgbWFya3VwIG1vcmUgZWZmaWNpZW50bHkuXG4gKlxuICogQHR5cGUge251bWJlcn1cbiAqIEBwcml2YXRlXG4gKi9cbnZhciB1cGRhdGVEZXB0aCA9IDA7XG5cbi8qKlxuICogUXVldWUgb2YgdXBkYXRlIGNvbmZpZ3VyYXRpb24gb2JqZWN0cy5cbiAqXG4gKiBFYWNoIG9iamVjdCBoYXMgYSBgdHlwZWAgcHJvcGVydHkgdGhhdCBpcyBpbiBgUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXNgLlxuICpcbiAqIEB0eXBlIHthcnJheTxvYmplY3Q+fVxuICogQHByaXZhdGVcbiAqL1xudmFyIHVwZGF0ZVF1ZXVlID0gW107XG5cbi8qKlxuICogUXVldWUgb2YgbWFya3VwIHRvIGJlIHJlbmRlcmVkLlxuICpcbiAqIEB0eXBlIHthcnJheTxzdHJpbmc+fVxuICogQHByaXZhdGVcbiAqL1xudmFyIG1hcmt1cFF1ZXVlID0gW107XG5cbi8qKlxuICogRW5xdWV1ZXMgbWFya3VwIHRvIGJlIHJlbmRlcmVkIGFuZCBpbnNlcnRlZCBhdCBhIHN1cHBsaWVkIGluZGV4LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJlbnRJRCBJRCBvZiB0aGUgcGFyZW50IGNvbXBvbmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBtYXJrdXAgTWFya3VwIHRoYXQgcmVuZGVycyBpbnRvIGFuIGVsZW1lbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gdG9JbmRleCBEZXN0aW5hdGlvbiBpbmRleC5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGVucXVldWVJbnNlcnRNYXJrdXAocGFyZW50SUQsIG1hcmt1cCwgdG9JbmRleCkge1xuICAvLyBOT1RFOiBOdWxsIHZhbHVlcyByZWR1Y2UgaGlkZGVuIGNsYXNzZXMuXG4gIHVwZGF0ZVF1ZXVlLnB1c2goe1xuICAgIHBhcmVudElEOiBwYXJlbnRJRCxcbiAgICBwYXJlbnROb2RlOiBudWxsLFxuICAgIHR5cGU6IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLklOU0VSVF9NQVJLVVAsXG4gICAgbWFya3VwSW5kZXg6IG1hcmt1cFF1ZXVlLnB1c2gobWFya3VwKSAtIDEsXG4gICAgY29udGVudDogbnVsbCxcbiAgICBmcm9tSW5kZXg6IG51bGwsXG4gICAgdG9JbmRleDogdG9JbmRleFxuICB9KTtcbn1cblxuLyoqXG4gKiBFbnF1ZXVlcyBtb3ZpbmcgYW4gZXhpc3RpbmcgZWxlbWVudCB0byBhbm90aGVyIGluZGV4LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJlbnRJRCBJRCBvZiB0aGUgcGFyZW50IGNvbXBvbmVudC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmcm9tSW5kZXggU291cmNlIGluZGV4IG9mIHRoZSBleGlzdGluZyBlbGVtZW50LlxuICogQHBhcmFtIHtudW1iZXJ9IHRvSW5kZXggRGVzdGluYXRpb24gaW5kZXggb2YgdGhlIGVsZW1lbnQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBlbnF1ZXVlTW92ZShwYXJlbnRJRCwgZnJvbUluZGV4LCB0b0luZGV4KSB7XG4gIC8vIE5PVEU6IE51bGwgdmFsdWVzIHJlZHVjZSBoaWRkZW4gY2xhc3Nlcy5cbiAgdXBkYXRlUXVldWUucHVzaCh7XG4gICAgcGFyZW50SUQ6IHBhcmVudElELFxuICAgIHBhcmVudE5vZGU6IG51bGwsXG4gICAgdHlwZTogUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuTU9WRV9FWElTVElORyxcbiAgICBtYXJrdXBJbmRleDogbnVsbCxcbiAgICBjb250ZW50OiBudWxsLFxuICAgIGZyb21JbmRleDogZnJvbUluZGV4LFxuICAgIHRvSW5kZXg6IHRvSW5kZXhcbiAgfSk7XG59XG5cbi8qKlxuICogRW5xdWV1ZXMgcmVtb3ZpbmcgYW4gZWxlbWVudCBhdCBhbiBpbmRleC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFyZW50SUQgSUQgb2YgdGhlIHBhcmVudCBjb21wb25lbnQuXG4gKiBAcGFyYW0ge251bWJlcn0gZnJvbUluZGV4IEluZGV4IG9mIHRoZSBlbGVtZW50IHRvIHJlbW92ZS5cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGVucXVldWVSZW1vdmUocGFyZW50SUQsIGZyb21JbmRleCkge1xuICAvLyBOT1RFOiBOdWxsIHZhbHVlcyByZWR1Y2UgaGlkZGVuIGNsYXNzZXMuXG4gIHVwZGF0ZVF1ZXVlLnB1c2goe1xuICAgIHBhcmVudElEOiBwYXJlbnRJRCxcbiAgICBwYXJlbnROb2RlOiBudWxsLFxuICAgIHR5cGU6IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzLlJFTU9WRV9OT0RFLFxuICAgIG1hcmt1cEluZGV4OiBudWxsLFxuICAgIGNvbnRlbnQ6IG51bGwsXG4gICAgZnJvbUluZGV4OiBmcm9tSW5kZXgsXG4gICAgdG9JbmRleDogbnVsbFxuICB9KTtcbn1cblxuLyoqXG4gKiBFbnF1ZXVlcyBzZXR0aW5nIHRoZSBtYXJrdXAgb2YgYSBub2RlLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXJlbnRJRCBJRCBvZiB0aGUgcGFyZW50IGNvbXBvbmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBtYXJrdXAgTWFya3VwIHRoYXQgcmVuZGVycyBpbnRvIGFuIGVsZW1lbnQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBlbnF1ZXVlU2V0TWFya3VwKHBhcmVudElELCBtYXJrdXApIHtcbiAgLy8gTk9URTogTnVsbCB2YWx1ZXMgcmVkdWNlIGhpZGRlbiBjbGFzc2VzLlxuICB1cGRhdGVRdWV1ZS5wdXNoKHtcbiAgICBwYXJlbnRJRDogcGFyZW50SUQsXG4gICAgcGFyZW50Tm9kZTogbnVsbCxcbiAgICB0eXBlOiBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcy5TRVRfTUFSS1VQLFxuICAgIG1hcmt1cEluZGV4OiBudWxsLFxuICAgIGNvbnRlbnQ6IG1hcmt1cCxcbiAgICBmcm9tSW5kZXg6IG51bGwsXG4gICAgdG9JbmRleDogbnVsbFxuICB9KTtcbn1cblxuLyoqXG4gKiBFbnF1ZXVlcyBzZXR0aW5nIHRoZSB0ZXh0IGNvbnRlbnQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHBhcmVudElEIElEIG9mIHRoZSBwYXJlbnQgY29tcG9uZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHRDb250ZW50IFRleHQgY29udGVudCB0byBzZXQuXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBlbnF1ZXVlVGV4dENvbnRlbnQocGFyZW50SUQsIHRleHRDb250ZW50KSB7XG4gIC8vIE5PVEU6IE51bGwgdmFsdWVzIHJlZHVjZSBoaWRkZW4gY2xhc3Nlcy5cbiAgdXBkYXRlUXVldWUucHVzaCh7XG4gICAgcGFyZW50SUQ6IHBhcmVudElELFxuICAgIHBhcmVudE5vZGU6IG51bGwsXG4gICAgdHlwZTogUmVhY3RNdWx0aUNoaWxkVXBkYXRlVHlwZXMuVEVYVF9DT05URU5ULFxuICAgIG1hcmt1cEluZGV4OiBudWxsLFxuICAgIGNvbnRlbnQ6IHRleHRDb250ZW50LFxuICAgIGZyb21JbmRleDogbnVsbCxcbiAgICB0b0luZGV4OiBudWxsXG4gIH0pO1xufVxuXG4vKipcbiAqIFByb2Nlc3NlcyBhbnkgZW5xdWV1ZWQgdXBkYXRlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBwcm9jZXNzUXVldWUoKSB7XG4gIGlmICh1cGRhdGVRdWV1ZS5sZW5ndGgpIHtcbiAgICBSZWFjdENvbXBvbmVudEVudmlyb25tZW50LnByb2Nlc3NDaGlsZHJlblVwZGF0ZXModXBkYXRlUXVldWUsIG1hcmt1cFF1ZXVlKTtcbiAgICBjbGVhclF1ZXVlKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBDbGVhcnMgYW55IGVucXVldWVkIHVwZGF0ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY2xlYXJRdWV1ZSgpIHtcbiAgdXBkYXRlUXVldWUubGVuZ3RoID0gMDtcbiAgbWFya3VwUXVldWUubGVuZ3RoID0gMDtcbn1cblxuLyoqXG4gKiBSZWFjdE11bHRpQ2hpbGQgYXJlIGNhcGFibGUgb2YgcmVjb25jaWxpbmcgbXVsdGlwbGUgY2hpbGRyZW4uXG4gKlxuICogQGNsYXNzIFJlYWN0TXVsdGlDaGlsZFxuICogQGludGVybmFsXG4gKi9cbnZhciBSZWFjdE11bHRpQ2hpbGQgPSB7XG5cbiAgLyoqXG4gICAqIFByb3ZpZGVzIGNvbW1vbiBmdW5jdGlvbmFsaXR5IGZvciBjb21wb25lbnRzIHRoYXQgbXVzdCByZWNvbmNpbGUgbXVsdGlwbGVcbiAgICogY2hpbGRyZW4uIFRoaXMgaXMgdXNlZCBieSBgUmVhY3RET01Db21wb25lbnRgIHRvIG1vdW50LCB1cGRhdGUsIGFuZFxuICAgKiB1bm1vdW50IGNoaWxkIGNvbXBvbmVudHMuXG4gICAqXG4gICAqIEBsZW5kcyB7UmVhY3RNdWx0aUNoaWxkLnByb3RvdHlwZX1cbiAgICovXG4gIE1peGluOiB7XG5cbiAgICBfcmVjb25jaWxlckluc3RhbnRpYXRlQ2hpbGRyZW46IGZ1bmN0aW9uIChuZXN0ZWRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmICh0aGlzLl9jdXJyZW50RWxlbWVudCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBSZWFjdEN1cnJlbnRPd25lci5jdXJyZW50ID0gdGhpcy5fY3VycmVudEVsZW1lbnQuX293bmVyO1xuICAgICAgICAgICAgcmV0dXJuIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLmluc3RhbnRpYXRlQ2hpbGRyZW4obmVzdGVkQ2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgICAgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9IG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gUmVhY3RDaGlsZFJlY29uY2lsZXIuaW5zdGFudGlhdGVDaGlsZHJlbihuZXN0ZWRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgIH0sXG5cbiAgICBfcmVjb25jaWxlclVwZGF0ZUNoaWxkcmVuOiBmdW5jdGlvbiAocHJldkNoaWxkcmVuLCBuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cywgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgIHZhciBuZXh0Q2hpbGRyZW47XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBpZiAodGhpcy5fY3VycmVudEVsZW1lbnQpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9IHRoaXMuX2N1cnJlbnRFbGVtZW50Ll9vd25lcjtcbiAgICAgICAgICAgIG5leHRDaGlsZHJlbiA9IGZsYXR0ZW5DaGlsZHJlbihuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cyk7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQgPSBudWxsO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gUmVhY3RDaGlsZFJlY29uY2lsZXIudXBkYXRlQ2hpbGRyZW4ocHJldkNoaWxkcmVuLCBuZXh0Q2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbmV4dENoaWxkcmVuID0gZmxhdHRlbkNoaWxkcmVuKG5leHROZXN0ZWRDaGlsZHJlbkVsZW1lbnRzKTtcbiAgICAgIHJldHVybiBSZWFjdENoaWxkUmVjb25jaWxlci51cGRhdGVDaGlsZHJlbihwcmV2Q2hpbGRyZW4sIG5leHRDaGlsZHJlbiwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZXMgYSBcIm1vdW50IGltYWdlXCIgZm9yIGVhY2ggb2YgdGhlIHN1cHBsaWVkIGNoaWxkcmVuLiBJbiB0aGUgY2FzZVxuICAgICAqIG9mIGBSZWFjdERPTUNvbXBvbmVudGAsIGEgbW91bnQgaW1hZ2UgaXMgYSBzdHJpbmcgb2YgbWFya3VwLlxuICAgICAqXG4gICAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXN0ZWRDaGlsZHJlbiBOZXN0ZWQgY2hpbGQgbWFwcy5cbiAgICAgKiBAcmV0dXJuIHthcnJheX0gQW4gYXJyYXkgb2YgbW91bnRlZCByZXByZXNlbnRhdGlvbnMuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgbW91bnRDaGlsZHJlbjogZnVuY3Rpb24gKG5lc3RlZENoaWxkcmVuLCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgICAgdmFyIGNoaWxkcmVuID0gdGhpcy5fcmVjb25jaWxlckluc3RhbnRpYXRlQ2hpbGRyZW4obmVzdGVkQ2hpbGRyZW4sIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgIHRoaXMuX3JlbmRlcmVkQ2hpbGRyZW4gPSBjaGlsZHJlbjtcbiAgICAgIHZhciBtb3VudEltYWdlcyA9IFtdO1xuICAgICAgdmFyIGluZGV4ID0gMDtcbiAgICAgIGZvciAodmFyIG5hbWUgaW4gY2hpbGRyZW4pIHtcbiAgICAgICAgaWYgKGNoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5bbmFtZV07XG4gICAgICAgICAgLy8gSW5saW5lZCBmb3IgcGVyZm9ybWFuY2UsIHNlZSBgUmVhY3RJbnN0YW5jZUhhbmRsZXMuY3JlYXRlUmVhY3RJRGAuXG4gICAgICAgICAgdmFyIHJvb3RJRCA9IHRoaXMuX3Jvb3ROb2RlSUQgKyBuYW1lO1xuICAgICAgICAgIHZhciBtb3VudEltYWdlID0gUmVhY3RSZWNvbmNpbGVyLm1vdW50Q29tcG9uZW50KGNoaWxkLCByb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICAgICAgICBjaGlsZC5fbW91bnRJbmRleCA9IGluZGV4Kys7XG4gICAgICAgICAgbW91bnRJbWFnZXMucHVzaChtb3VudEltYWdlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG1vdW50SW1hZ2VzO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlcyBhbnkgcmVuZGVyZWQgY2hpbGRyZW4gd2l0aCBhIHRleHQgY29udGVudCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmV4dENvbnRlbnQgU3RyaW5nIG9mIGNvbnRlbnQuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgdXBkYXRlVGV4dENvbnRlbnQ6IGZ1bmN0aW9uIChuZXh0Q29udGVudCkge1xuICAgICAgdXBkYXRlRGVwdGgrKztcbiAgICAgIHZhciBlcnJvclRocm93biA9IHRydWU7XG4gICAgICB0cnkge1xuICAgICAgICB2YXIgcHJldkNoaWxkcmVuID0gdGhpcy5fcmVuZGVyZWRDaGlsZHJlbjtcbiAgICAgICAgLy8gUmVtb3ZlIGFueSByZW5kZXJlZCBjaGlsZHJlbi5cbiAgICAgICAgUmVhY3RDaGlsZFJlY29uY2lsZXIudW5tb3VudENoaWxkcmVuKHByZXZDaGlsZHJlbik7XG4gICAgICAgIC8vIFRPRE86IFRoZSBzZXRUZXh0Q29udGVudCBvcGVyYXRpb24gc2hvdWxkIGJlIGVub3VnaFxuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHByZXZDaGlsZHJlbikge1xuICAgICAgICAgIGlmIChwcmV2Q2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX3VubW91bnRDaGlsZChwcmV2Q2hpbGRyZW5bbmFtZV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBTZXQgbmV3IHRleHQgY29udGVudC5cbiAgICAgICAgdGhpcy5zZXRUZXh0Q29udGVudChuZXh0Q29udGVudCk7XG4gICAgICAgIGVycm9yVGhyb3duID0gZmFsc2U7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICB1cGRhdGVEZXB0aC0tO1xuICAgICAgICBpZiAoIXVwZGF0ZURlcHRoKSB7XG4gICAgICAgICAgaWYgKGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgICBjbGVhclF1ZXVlKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb2Nlc3NRdWV1ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBSZXBsYWNlcyBhbnkgcmVuZGVyZWQgY2hpbGRyZW4gd2l0aCBhIG1hcmt1cCBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmV4dE1hcmt1cCBTdHJpbmcgb2YgbWFya3VwLlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHVwZGF0ZU1hcmt1cDogZnVuY3Rpb24gKG5leHRNYXJrdXApIHtcbiAgICAgIHVwZGF0ZURlcHRoKys7XG4gICAgICB2YXIgZXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHByZXZDaGlsZHJlbiA9IHRoaXMuX3JlbmRlcmVkQ2hpbGRyZW47XG4gICAgICAgIC8vIFJlbW92ZSBhbnkgcmVuZGVyZWQgY2hpbGRyZW4uXG4gICAgICAgIFJlYWN0Q2hpbGRSZWNvbmNpbGVyLnVubW91bnRDaGlsZHJlbihwcmV2Q2hpbGRyZW4pO1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIHByZXZDaGlsZHJlbikge1xuICAgICAgICAgIGlmIChwcmV2Q2hpbGRyZW4uaGFzT3duUHJvcGVydHkobmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX3VubW91bnRDaGlsZEJ5TmFtZShwcmV2Q2hpbGRyZW5bbmFtZV0sIG5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldE1hcmt1cChuZXh0TWFya3VwKTtcbiAgICAgICAgZXJyb3JUaHJvd24gPSBmYWxzZTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHVwZGF0ZURlcHRoLS07XG4gICAgICAgIGlmICghdXBkYXRlRGVwdGgpIHtcbiAgICAgICAgICBpZiAoZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAgIGNsZWFyUXVldWUoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcHJvY2Vzc1F1ZXVlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIHJlbmRlcmVkIGNoaWxkcmVuIHdpdGggbmV3IGNoaWxkcmVuLlxuICAgICAqXG4gICAgICogQHBhcmFtIHs/b2JqZWN0fSBuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cyBOZXN0ZWQgY2hpbGQgZWxlbWVudCBtYXBzLlxuICAgICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICB1cGRhdGVDaGlsZHJlbjogZnVuY3Rpb24gKG5leHROZXN0ZWRDaGlsZHJlbkVsZW1lbnRzLCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgICAgdXBkYXRlRGVwdGgrKztcbiAgICAgIHZhciBlcnJvclRocm93biA9IHRydWU7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLl91cGRhdGVDaGlsZHJlbihuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cywgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgICBlcnJvclRocm93biA9IGZhbHNlO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgdXBkYXRlRGVwdGgtLTtcbiAgICAgICAgaWYgKCF1cGRhdGVEZXB0aCkge1xuICAgICAgICAgIGlmIChlcnJvclRocm93bikge1xuICAgICAgICAgICAgY2xlYXJRdWV1ZSgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9jZXNzUXVldWUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSW1wcm92ZSBwZXJmb3JtYW5jZSBieSBpc29sYXRpbmcgdGhpcyBob3QgY29kZSBwYXRoIGZyb20gdGhlIHRyeS9jYXRjaFxuICAgICAqIGJsb2NrIGluIGB1cGRhdGVDaGlsZHJlbmAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gez9vYmplY3R9IG5leHROZXN0ZWRDaGlsZHJlbkVsZW1lbnRzIE5lc3RlZCBjaGlsZCBlbGVtZW50IG1hcHMuXG4gICAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgICAqIEBmaW5hbFxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBfdXBkYXRlQ2hpbGRyZW46IGZ1bmN0aW9uIChuZXh0TmVzdGVkQ2hpbGRyZW5FbGVtZW50cywgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICAgIHZhciBwcmV2Q2hpbGRyZW4gPSB0aGlzLl9yZW5kZXJlZENoaWxkcmVuO1xuICAgICAgdmFyIG5leHRDaGlsZHJlbiA9IHRoaXMuX3JlY29uY2lsZXJVcGRhdGVDaGlsZHJlbihwcmV2Q2hpbGRyZW4sIG5leHROZXN0ZWRDaGlsZHJlbkVsZW1lbnRzLCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICB0aGlzLl9yZW5kZXJlZENoaWxkcmVuID0gbmV4dENoaWxkcmVuO1xuICAgICAgaWYgKCFuZXh0Q2hpbGRyZW4gJiYgIXByZXZDaGlsZHJlbikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YXIgbmFtZTtcbiAgICAgIC8vIGBuZXh0SW5kZXhgIHdpbGwgaW5jcmVtZW50IGZvciBlYWNoIGNoaWxkIGluIGBuZXh0Q2hpbGRyZW5gLCBidXRcbiAgICAgIC8vIGBsYXN0SW5kZXhgIHdpbGwgYmUgdGhlIGxhc3QgaW5kZXggdmlzaXRlZCBpbiBgcHJldkNoaWxkcmVuYC5cbiAgICAgIHZhciBsYXN0SW5kZXggPSAwO1xuICAgICAgdmFyIG5leHRJbmRleCA9IDA7XG4gICAgICBmb3IgKG5hbWUgaW4gbmV4dENoaWxkcmVuKSB7XG4gICAgICAgIGlmICghbmV4dENoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHByZXZDaGlsZCA9IHByZXZDaGlsZHJlbiAmJiBwcmV2Q2hpbGRyZW5bbmFtZV07XG4gICAgICAgIHZhciBuZXh0Q2hpbGQgPSBuZXh0Q2hpbGRyZW5bbmFtZV07XG4gICAgICAgIGlmIChwcmV2Q2hpbGQgPT09IG5leHRDaGlsZCkge1xuICAgICAgICAgIHRoaXMubW92ZUNoaWxkKHByZXZDaGlsZCwgbmV4dEluZGV4LCBsYXN0SW5kZXgpO1xuICAgICAgICAgIGxhc3RJbmRleCA9IE1hdGgubWF4KHByZXZDaGlsZC5fbW91bnRJbmRleCwgbGFzdEluZGV4KTtcbiAgICAgICAgICBwcmV2Q2hpbGQuX21vdW50SW5kZXggPSBuZXh0SW5kZXg7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHByZXZDaGlsZCkge1xuICAgICAgICAgICAgLy8gVXBkYXRlIGBsYXN0SW5kZXhgIGJlZm9yZSBgX21vdW50SW5kZXhgIGdldHMgdW5zZXQgYnkgdW5tb3VudGluZy5cbiAgICAgICAgICAgIGxhc3RJbmRleCA9IE1hdGgubWF4KHByZXZDaGlsZC5fbW91bnRJbmRleCwgbGFzdEluZGV4KTtcbiAgICAgICAgICAgIHRoaXMuX3VubW91bnRDaGlsZChwcmV2Q2hpbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBUaGUgY2hpbGQgbXVzdCBiZSBpbnN0YW50aWF0ZWQgYmVmb3JlIGl0J3MgbW91bnRlZC5cbiAgICAgICAgICB0aGlzLl9tb3VudENoaWxkQnlOYW1lQXRJbmRleChuZXh0Q2hpbGQsIG5hbWUsIG5leHRJbmRleCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpO1xuICAgICAgICB9XG4gICAgICAgIG5leHRJbmRleCsrO1xuICAgICAgfVxuICAgICAgLy8gUmVtb3ZlIGNoaWxkcmVuIHRoYXQgYXJlIG5vIGxvbmdlciBwcmVzZW50LlxuICAgICAgZm9yIChuYW1lIGluIHByZXZDaGlsZHJlbikge1xuICAgICAgICBpZiAocHJldkNoaWxkcmVuLmhhc093blByb3BlcnR5KG5hbWUpICYmICEobmV4dENoaWxkcmVuICYmIG5leHRDaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eShuYW1lKSkpIHtcbiAgICAgICAgICB0aGlzLl91bm1vdW50Q2hpbGQocHJldkNoaWxkcmVuW25hbWVdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBVbm1vdW50cyBhbGwgcmVuZGVyZWQgY2hpbGRyZW4uIFRoaXMgc2hvdWxkIGJlIHVzZWQgdG8gY2xlYW4gdXAgY2hpbGRyZW5cbiAgICAgKiB3aGVuIHRoaXMgY29tcG9uZW50IGlzIHVubW91bnRlZC5cbiAgICAgKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIHVubW91bnRDaGlsZHJlbjogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHJlbmRlcmVkQ2hpbGRyZW4gPSB0aGlzLl9yZW5kZXJlZENoaWxkcmVuO1xuICAgICAgUmVhY3RDaGlsZFJlY29uY2lsZXIudW5tb3VudENoaWxkcmVuKHJlbmRlcmVkQ2hpbGRyZW4pO1xuICAgICAgdGhpcy5fcmVuZGVyZWRDaGlsZHJlbiA9IG51bGw7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE1vdmVzIGEgY2hpbGQgY29tcG9uZW50IHRvIHRoZSBzdXBwbGllZCBpbmRleC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGNoaWxkIENvbXBvbmVudCB0byBtb3ZlLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b0luZGV4IERlc3RpbmF0aW9uIGluZGV4IG9mIHRoZSBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsYXN0SW5kZXggTGFzdCBpbmRleCB2aXNpdGVkIG9mIHRoZSBzaWJsaW5ncyBvZiBgY2hpbGRgLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBtb3ZlQ2hpbGQ6IGZ1bmN0aW9uIChjaGlsZCwgdG9JbmRleCwgbGFzdEluZGV4KSB7XG4gICAgICAvLyBJZiB0aGUgaW5kZXggb2YgYGNoaWxkYCBpcyBsZXNzIHRoYW4gYGxhc3RJbmRleGAsIHRoZW4gaXQgbmVlZHMgdG9cbiAgICAgIC8vIGJlIG1vdmVkLiBPdGhlcndpc2UsIHdlIGRvIG5vdCBuZWVkIHRvIG1vdmUgaXQgYmVjYXVzZSBhIGNoaWxkIHdpbGwgYmVcbiAgICAgIC8vIGluc2VydGVkIG9yIG1vdmVkIGJlZm9yZSBgY2hpbGRgLlxuICAgICAgaWYgKGNoaWxkLl9tb3VudEluZGV4IDwgbGFzdEluZGV4KSB7XG4gICAgICAgIGVucXVldWVNb3ZlKHRoaXMuX3Jvb3ROb2RlSUQsIGNoaWxkLl9tb3VudEluZGV4LCB0b0luZGV4KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGNoaWxkIGNvbXBvbmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGNoaWxkIENvbXBvbmVudCB0byBjcmVhdGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1vdW50SW1hZ2UgTWFya3VwIHRvIGluc2VydC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgY3JlYXRlQ2hpbGQ6IGZ1bmN0aW9uIChjaGlsZCwgbW91bnRJbWFnZSkge1xuICAgICAgZW5xdWV1ZUluc2VydE1hcmt1cCh0aGlzLl9yb290Tm9kZUlELCBtb3VudEltYWdlLCBjaGlsZC5fbW91bnRJbmRleCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBjaGlsZCBjb21wb25lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjaGlsZCBDaGlsZCB0byByZW1vdmUuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIHJlbW92ZUNoaWxkOiBmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgIGVucXVldWVSZW1vdmUodGhpcy5fcm9vdE5vZGVJRCwgY2hpbGQuX21vdW50SW5kZXgpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoaXMgdGV4dCBjb250ZW50IHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0Q29udGVudCBUZXh0IGNvbnRlbnQgdG8gc2V0LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBzZXRUZXh0Q29udGVudDogZnVuY3Rpb24gKHRleHRDb250ZW50KSB7XG4gICAgICBlbnF1ZXVlVGV4dENvbnRlbnQodGhpcy5fcm9vdE5vZGVJRCwgdGV4dENvbnRlbnQpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoaXMgbWFya3VwIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtYXJrdXAgTWFya3VwIHRvIHNldC5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgc2V0TWFya3VwOiBmdW5jdGlvbiAobWFya3VwKSB7XG4gICAgICBlbnF1ZXVlU2V0TWFya3VwKHRoaXMuX3Jvb3ROb2RlSUQsIG1hcmt1cCk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIE1vdW50cyBhIGNoaWxkIHdpdGggdGhlIHN1cHBsaWVkIG5hbWUuXG4gICAgICpcbiAgICAgKiBOT1RFOiBUaGlzIGlzIHBhcnQgb2YgYHVwZGF0ZUNoaWxkcmVuYCBhbmQgaXMgaGVyZSBmb3IgcmVhZGFiaWxpdHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjaGlsZCBDb21wb25lbnQgdG8gbW91bnQuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgTmFtZSBvZiB0aGUgY2hpbGQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGluZGV4IEluZGV4IGF0IHdoaWNoIHRvIGluc2VydCB0aGUgY2hpbGQuXG4gICAgICogQHBhcmFtIHtSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgX21vdW50Q2hpbGRCeU5hbWVBdEluZGV4OiBmdW5jdGlvbiAoY2hpbGQsIG5hbWUsIGluZGV4LCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgICAgLy8gSW5saW5lZCBmb3IgcGVyZm9ybWFuY2UsIHNlZSBgUmVhY3RJbnN0YW5jZUhhbmRsZXMuY3JlYXRlUmVhY3RJRGAuXG4gICAgICB2YXIgcm9vdElEID0gdGhpcy5fcm9vdE5vZGVJRCArIG5hbWU7XG4gICAgICB2YXIgbW91bnRJbWFnZSA9IFJlYWN0UmVjb25jaWxlci5tb3VudENvbXBvbmVudChjaGlsZCwgcm9vdElELCB0cmFuc2FjdGlvbiwgY29udGV4dCk7XG4gICAgICBjaGlsZC5fbW91bnRJbmRleCA9IGluZGV4O1xuICAgICAgdGhpcy5jcmVhdGVDaGlsZChjaGlsZCwgbW91bnRJbWFnZSk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIFVubW91bnRzIGEgcmVuZGVyZWQgY2hpbGQuXG4gICAgICpcbiAgICAgKiBOT1RFOiBUaGlzIGlzIHBhcnQgb2YgYHVwZGF0ZUNoaWxkcmVuYCBhbmQgaXMgaGVyZSBmb3IgcmVhZGFiaWxpdHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjaGlsZCBDb21wb25lbnQgdG8gdW5tb3VudC5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIF91bm1vdW50Q2hpbGQ6IGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgdGhpcy5yZW1vdmVDaGlsZChjaGlsZCk7XG4gICAgICBjaGlsZC5fbW91bnRJbmRleCA9IG51bGw7XG4gICAgfVxuXG4gIH1cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdE11bHRpQ2hpbGQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIga2V5TWlycm9yID0gcmVxdWlyZSgnZmJqcy9saWIva2V5TWlycm9yJyk7XG5cbi8qKlxuICogV2hlbiBhIGNvbXBvbmVudCdzIGNoaWxkcmVuIGFyZSB1cGRhdGVkLCBhIHNlcmllcyBvZiB1cGRhdGUgY29uZmlndXJhdGlvblxuICogb2JqZWN0cyBhcmUgY3JlYXRlZCBpbiBvcmRlciB0byBiYXRjaCBhbmQgc2VyaWFsaXplIHRoZSByZXF1aXJlZCBjaGFuZ2VzLlxuICpcbiAqIEVudW1lcmF0ZXMgYWxsIHRoZSBwb3NzaWJsZSB0eXBlcyBvZiB1cGRhdGUgY29uZmlndXJhdGlvbnMuXG4gKlxuICogQGludGVybmFsXG4gKi9cbnZhciBSZWFjdE11bHRpQ2hpbGRVcGRhdGVUeXBlcyA9IGtleU1pcnJvcih7XG4gIElOU0VSVF9NQVJLVVA6IG51bGwsXG4gIE1PVkVfRVhJU1RJTkc6IG51bGwsXG4gIFJFTU9WRV9OT0RFOiBudWxsLFxuICBTRVRfTUFSS1VQOiBudWxsLFxuICBURVhUX0NPTlRFTlQ6IG51bGxcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0TXVsdGlDaGlsZFVwZGF0ZVR5cGVzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdE5hdGl2ZUNvbXBvbmVudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG52YXIgYXV0b0dlbmVyYXRlV3JhcHBlckNsYXNzID0gbnVsbDtcbnZhciBnZW5lcmljQ29tcG9uZW50Q2xhc3MgPSBudWxsO1xuLy8gVGhpcyByZWdpc3RyeSBrZWVwcyB0cmFjayBvZiB3cmFwcGVyIGNsYXNzZXMgYXJvdW5kIG5hdGl2ZSB0YWdzLlxudmFyIHRhZ1RvQ29tcG9uZW50Q2xhc3MgPSB7fTtcbnZhciB0ZXh0Q29tcG9uZW50Q2xhc3MgPSBudWxsO1xuXG52YXIgUmVhY3ROYXRpdmVDb21wb25lbnRJbmplY3Rpb24gPSB7XG4gIC8vIFRoaXMgYWNjZXB0cyBhIGNsYXNzIHRoYXQgcmVjZWl2ZXMgdGhlIHRhZyBzdHJpbmcuIFRoaXMgaXMgYSBjYXRjaCBhbGxcbiAgLy8gdGhhdCBjYW4gcmVuZGVyIGFueSBraW5kIG9mIHRhZy5cbiAgaW5qZWN0R2VuZXJpY0NvbXBvbmVudENsYXNzOiBmdW5jdGlvbiAoY29tcG9uZW50Q2xhc3MpIHtcbiAgICBnZW5lcmljQ29tcG9uZW50Q2xhc3MgPSBjb21wb25lbnRDbGFzcztcbiAgfSxcbiAgLy8gVGhpcyBhY2NlcHRzIGEgdGV4dCBjb21wb25lbnQgY2xhc3MgdGhhdCB0YWtlcyB0aGUgdGV4dCBzdHJpbmcgdG8gYmVcbiAgLy8gcmVuZGVyZWQgYXMgcHJvcHMuXG4gIGluamVjdFRleHRDb21wb25lbnRDbGFzczogZnVuY3Rpb24gKGNvbXBvbmVudENsYXNzKSB7XG4gICAgdGV4dENvbXBvbmVudENsYXNzID0gY29tcG9uZW50Q2xhc3M7XG4gIH0sXG4gIC8vIFRoaXMgYWNjZXB0cyBhIGtleWVkIG9iamVjdCB3aXRoIGNsYXNzZXMgYXMgdmFsdWVzLiBFYWNoIGtleSByZXByZXNlbnRzIGFcbiAgLy8gdGFnLiBUaGF0IHBhcnRpY3VsYXIgdGFnIHdpbGwgdXNlIHRoaXMgY2xhc3MgaW5zdGVhZCBvZiB0aGUgZ2VuZXJpYyBvbmUuXG4gIGluamVjdENvbXBvbmVudENsYXNzZXM6IGZ1bmN0aW9uIChjb21wb25lbnRDbGFzc2VzKSB7XG4gICAgYXNzaWduKHRhZ1RvQ29tcG9uZW50Q2xhc3MsIGNvbXBvbmVudENsYXNzZXMpO1xuICB9XG59O1xuXG4vKipcbiAqIEdldCBhIGNvbXBvc2l0ZSBjb21wb25lbnQgd3JhcHBlciBjbGFzcyBmb3IgYSBzcGVjaWZpYyB0YWcuXG4gKlxuICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnQgVGhlIHRhZyBmb3Igd2hpY2ggdG8gZ2V0IHRoZSBjbGFzcy5cbiAqIEByZXR1cm4ge2Z1bmN0aW9ufSBUaGUgUmVhY3QgY2xhc3MgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGdldENvbXBvbmVudENsYXNzRm9yRWxlbWVudChlbGVtZW50KSB7XG4gIGlmICh0eXBlb2YgZWxlbWVudC50eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGVsZW1lbnQudHlwZTtcbiAgfVxuICB2YXIgdGFnID0gZWxlbWVudC50eXBlO1xuICB2YXIgY29tcG9uZW50Q2xhc3MgPSB0YWdUb0NvbXBvbmVudENsYXNzW3RhZ107XG4gIGlmIChjb21wb25lbnRDbGFzcyA9PSBudWxsKSB7XG4gICAgdGFnVG9Db21wb25lbnRDbGFzc1t0YWddID0gY29tcG9uZW50Q2xhc3MgPSBhdXRvR2VuZXJhdGVXcmFwcGVyQ2xhc3ModGFnKTtcbiAgfVxuICByZXR1cm4gY29tcG9uZW50Q2xhc3M7XG59XG5cbi8qKlxuICogR2V0IGEgbmF0aXZlIGludGVybmFsIGNvbXBvbmVudCBjbGFzcyBmb3IgYSBzcGVjaWZpYyB0YWcuXG4gKlxuICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnQgVGhlIGVsZW1lbnQgdG8gY3JlYXRlLlxuICogQHJldHVybiB7ZnVuY3Rpb259IFRoZSBpbnRlcm5hbCBjbGFzcyBjb25zdHJ1Y3RvciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gY3JlYXRlSW50ZXJuYWxDb21wb25lbnQoZWxlbWVudCkge1xuICAhZ2VuZXJpY0NvbXBvbmVudENsYXNzID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1RoZXJlIGlzIG5vIHJlZ2lzdGVyZWQgY29tcG9uZW50IGZvciB0aGUgdGFnICVzJywgZWxlbWVudC50eXBlKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIHJldHVybiBuZXcgZ2VuZXJpY0NvbXBvbmVudENsYXNzKGVsZW1lbnQudHlwZSwgZWxlbWVudC5wcm9wcyk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtSZWFjdFRleHR9IHRleHRcbiAqIEByZXR1cm4ge1JlYWN0Q29tcG9uZW50fVxuICovXG5mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZUZvclRleHQodGV4dCkge1xuICByZXR1cm4gbmV3IHRleHRDb21wb25lbnRDbGFzcyh0ZXh0KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBjb21wb25lbnRcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGlzVGV4dENvbXBvbmVudChjb21wb25lbnQpIHtcbiAgcmV0dXJuIGNvbXBvbmVudCBpbnN0YW5jZW9mIHRleHRDb21wb25lbnRDbGFzcztcbn1cblxudmFyIFJlYWN0TmF0aXZlQ29tcG9uZW50ID0ge1xuICBnZXRDb21wb25lbnRDbGFzc0ZvckVsZW1lbnQ6IGdldENvbXBvbmVudENsYXNzRm9yRWxlbWVudCxcbiAgY3JlYXRlSW50ZXJuYWxDb21wb25lbnQ6IGNyZWF0ZUludGVybmFsQ29tcG9uZW50LFxuICBjcmVhdGVJbnN0YW5jZUZvclRleHQ6IGNyZWF0ZUluc3RhbmNlRm9yVGV4dCxcbiAgaXNUZXh0Q29tcG9uZW50OiBpc1RleHRDb21wb25lbnQsXG4gIGluamVjdGlvbjogUmVhY3ROYXRpdmVDb21wb25lbnRJbmplY3Rpb25cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3ROYXRpdmVDb21wb25lbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdE5vb3BVcGRhdGVRdWV1ZVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbmZ1bmN0aW9uIHdhcm5URFoocHVibGljSW5zdGFuY2UsIGNhbGxlck5hbWUpIHtcbiAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhmYWxzZSwgJyVzKC4uLik6IENhbiBvbmx5IHVwZGF0ZSBhIG1vdW50ZWQgb3IgbW91bnRpbmcgY29tcG9uZW50LiAnICsgJ1RoaXMgdXN1YWxseSBtZWFucyB5b3UgY2FsbGVkICVzKCkgb24gYW4gdW5tb3VudGVkIGNvbXBvbmVudC4gJyArICdUaGlzIGlzIGEgbm8tb3AuIFBsZWFzZSBjaGVjayB0aGUgY29kZSBmb3IgdGhlICVzIGNvbXBvbmVudC4nLCBjYWxsZXJOYW1lLCBjYWxsZXJOYW1lLCBwdWJsaWNJbnN0YW5jZS5jb25zdHJ1Y3RvciAmJiBwdWJsaWNJbnN0YW5jZS5jb25zdHJ1Y3Rvci5kaXNwbGF5TmFtZSB8fCAnJykgOiB1bmRlZmluZWQ7XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIGlzIHRoZSBhYnN0cmFjdCBBUEkgZm9yIGFuIHVwZGF0ZSBxdWV1ZS5cbiAqL1xudmFyIFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlID0ge1xuXG4gIC8qKlxuICAgKiBDaGVja3Mgd2hldGhlciBvciBub3QgdGhpcyBjb21wb3NpdGUgY29tcG9uZW50IGlzIG1vdW50ZWQuXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHdlIHdhbnQgdG8gdGVzdC5cbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBtb3VudGVkLCBmYWxzZSBvdGhlcndpc2UuXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQGZpbmFsXG4gICAqL1xuICBpc01vdW50ZWQ6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcblxuICAvKipcbiAgICogRW5xdWV1ZSBhIGNhbGxiYWNrIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBhZnRlciBhbGwgdGhlIHBlbmRpbmcgdXBkYXRlc1xuICAgKiBoYXZlIHByb2Nlc3NlZC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdG8gdXNlIGFzIGB0aGlzYCBjb250ZXh0LlxuICAgKiBAcGFyYW0gez9mdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGVkIGFmdGVyIHN0YXRlIGlzIHVwZGF0ZWQuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZUNhbGxiYWNrOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIGNhbGxiYWNrKSB7fSxcblxuICAvKipcbiAgICogRm9yY2VzIGFuIHVwZGF0ZS4gVGhpcyBzaG91bGQgb25seSBiZSBpbnZva2VkIHdoZW4gaXQgaXMga25vd24gd2l0aFxuICAgKiBjZXJ0YWludHkgdGhhdCB3ZSBhcmUgKipub3QqKiBpbiBhIERPTSB0cmFuc2FjdGlvbi5cbiAgICpcbiAgICogWW91IG1heSB3YW50IHRvIGNhbGwgdGhpcyB3aGVuIHlvdSBrbm93IHRoYXQgc29tZSBkZWVwZXIgYXNwZWN0IG9mIHRoZVxuICAgKiBjb21wb25lbnQncyBzdGF0ZSBoYXMgY2hhbmdlZCBidXQgYHNldFN0YXRlYCB3YXMgbm90IGNhbGxlZC5cbiAgICpcbiAgICogVGhpcyB3aWxsIG5vdCBpbnZva2UgYHNob3VsZENvbXBvbmVudFVwZGF0ZWAsIGJ1dCBpdCB3aWxsIGludm9rZVxuICAgKiBgY29tcG9uZW50V2lsbFVwZGF0ZWAgYW5kIGBjb21wb25lbnREaWRVcGRhdGVgLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlRm9yY2VVcGRhdGU6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSkge1xuICAgIHdhcm5URFoocHVibGljSW5zdGFuY2UsICdmb3JjZVVwZGF0ZScpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXBsYWNlcyBhbGwgb2YgdGhlIHN0YXRlLiBBbHdheXMgdXNlIHRoaXMgb3IgYHNldFN0YXRlYCB0byBtdXRhdGUgc3RhdGUuXG4gICAqIFlvdSBzaG91bGQgdHJlYXQgYHRoaXMuc3RhdGVgIGFzIGltbXV0YWJsZS5cbiAgICpcbiAgICogVGhlcmUgaXMgbm8gZ3VhcmFudGVlIHRoYXQgYHRoaXMuc3RhdGVgIHdpbGwgYmUgaW1tZWRpYXRlbHkgdXBkYXRlZCwgc29cbiAgICogYWNjZXNzaW5nIGB0aGlzLnN0YXRlYCBhZnRlciBjYWxsaW5nIHRoaXMgbWV0aG9kIG1heSByZXR1cm4gdGhlIG9sZCB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb21wbGV0ZVN0YXRlIE5leHQgc3RhdGUuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZVJlcGxhY2VTdGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBjb21wbGV0ZVN0YXRlKSB7XG4gICAgd2FyblREWihwdWJsaWNJbnN0YW5jZSwgJ3JlcGxhY2VTdGF0ZScpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIGEgc3Vic2V0IG9mIHRoZSBzdGF0ZS4gVGhpcyBvbmx5IGV4aXN0cyBiZWNhdXNlIF9wZW5kaW5nU3RhdGUgaXNcbiAgICogaW50ZXJuYWwuIFRoaXMgcHJvdmlkZXMgYSBtZXJnaW5nIHN0cmF0ZWd5IHRoYXQgaXMgbm90IGF2YWlsYWJsZSB0byBkZWVwXG4gICAqIHByb3BlcnRpZXMgd2hpY2ggaXMgY29uZnVzaW5nLiBUT0RPOiBFeHBvc2UgcGVuZGluZ1N0YXRlIG9yIGRvbid0IHVzZSBpdFxuICAgKiBkdXJpbmcgdGhlIG1lcmdlLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IHBhcnRpYWxTdGF0ZSBOZXh0IHBhcnRpYWwgc3RhdGUgdG8gYmUgbWVyZ2VkIHdpdGggc3RhdGUuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZVNldFN0YXRlOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIHBhcnRpYWxTdGF0ZSkge1xuICAgIHdhcm5URFoocHVibGljSW5zdGFuY2UsICdzZXRTdGF0ZScpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIGEgc3Vic2V0IG9mIHRoZSBwcm9wcy5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJ0aWFsUHJvcHMgU3Vic2V0IG9mIHRoZSBuZXh0IHByb3BzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVTZXRQcm9wczogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBwYXJ0aWFsUHJvcHMpIHtcbiAgICB3YXJuVERaKHB1YmxpY0luc3RhbmNlLCAnc2V0UHJvcHMnKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVwbGFjZXMgYWxsIG9mIHRoZSBwcm9wcy5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwcm9wcyBOZXcgcHJvcHMuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZVJlcGxhY2VQcm9wczogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBwcm9wcykge1xuICAgIHdhcm5URFoocHVibGljSW5zdGFuY2UsICdyZXBsYWNlUHJvcHMnKTtcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0Tm9vcFVwZGF0ZVF1ZXVlOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdE93bmVyXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogUmVhY3RPd25lcnMgYXJlIGNhcGFibGUgb2Ygc3RvcmluZyByZWZlcmVuY2VzIHRvIG93bmVkIGNvbXBvbmVudHMuXG4gKlxuICogQWxsIGNvbXBvbmVudHMgYXJlIGNhcGFibGUgb2YgLy9iZWluZy8vIHJlZmVyZW5jZWQgYnkgb3duZXIgY29tcG9uZW50cywgYnV0XG4gKiBvbmx5IFJlYWN0T3duZXIgY29tcG9uZW50cyBhcmUgY2FwYWJsZSBvZiAvL3JlZmVyZW5jaW5nLy8gb3duZWQgY29tcG9uZW50cy5cbiAqIFRoZSBuYW1lZCByZWZlcmVuY2UgaXMga25vd24gYXMgYSBcInJlZlwiLlxuICpcbiAqIFJlZnMgYXJlIGF2YWlsYWJsZSB3aGVuIG1vdW50ZWQgYW5kIHVwZGF0ZWQgZHVyaW5nIHJlY29uY2lsaWF0aW9uLlxuICpcbiAqICAgdmFyIE15Q29tcG9uZW50ID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICogICAgIHJlbmRlcjogZnVuY3Rpb24oKSB7XG4gKiAgICAgICByZXR1cm4gKFxuICogICAgICAgICA8ZGl2IG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2t9PlxuICogICAgICAgICAgIDxDdXN0b21Db21wb25lbnQgcmVmPVwiY3VzdG9tXCIgLz5cbiAqICAgICAgICAgPC9kaXY+XG4gKiAgICAgICApO1xuICogICAgIH0sXG4gKiAgICAgaGFuZGxlQ2xpY2s6IGZ1bmN0aW9uKCkge1xuICogICAgICAgdGhpcy5yZWZzLmN1c3RvbS5oYW5kbGVDbGljaygpO1xuICogICAgIH0sXG4gKiAgICAgY29tcG9uZW50RGlkTW91bnQ6IGZ1bmN0aW9uKCkge1xuICogICAgICAgdGhpcy5yZWZzLmN1c3RvbS5pbml0aWFsaXplKCk7XG4gKiAgICAgfVxuICogICB9KTtcbiAqXG4gKiBSZWZzIHNob3VsZCByYXJlbHkgYmUgdXNlZC4gV2hlbiByZWZzIGFyZSB1c2VkLCB0aGV5IHNob3VsZCBvbmx5IGJlIGRvbmUgdG9cbiAqIGNvbnRyb2wgZGF0YSB0aGF0IGlzIG5vdCBoYW5kbGVkIGJ5IFJlYWN0J3MgZGF0YSBmbG93LlxuICpcbiAqIEBjbGFzcyBSZWFjdE93bmVyXG4gKi9cbnZhciBSZWFjdE93bmVyID0ge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gez9vYmplY3R9IG9iamVjdFxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGBvYmplY3RgIGlzIGEgdmFsaWQgb3duZXIuXG4gICAqIEBmaW5hbFxuICAgKi9cbiAgaXNWYWxpZE93bmVyOiBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgcmV0dXJuICEhKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0LmF0dGFjaFJlZiA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2Ygb2JqZWN0LmRldGFjaFJlZiA9PT0gJ2Z1bmN0aW9uJyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFkZHMgYSBjb21wb25lbnQgYnkgcmVmIHRvIGFuIG93bmVyIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gY29tcG9uZW50IENvbXBvbmVudCB0byByZWZlcmVuY2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWYgTmFtZSBieSB3aGljaCB0byByZWZlciB0byB0aGUgY29tcG9uZW50LlxuICAgKiBAcGFyYW0ge1JlYWN0T3duZXJ9IG93bmVyIENvbXBvbmVudCBvbiB3aGljaCB0byByZWNvcmQgdGhlIHJlZi5cbiAgICogQGZpbmFsXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgYWRkQ29tcG9uZW50QXNSZWZUbzogZnVuY3Rpb24gKGNvbXBvbmVudCwgcmVmLCBvd25lcikge1xuICAgICFSZWFjdE93bmVyLmlzVmFsaWRPd25lcihvd25lcikgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnYWRkQ29tcG9uZW50QXNSZWZUbyguLi4pOiBPbmx5IGEgUmVhY3RPd25lciBjYW4gaGF2ZSByZWZzLiBZb3UgbWlnaHQgJyArICdiZSBhZGRpbmcgYSByZWYgdG8gYSBjb21wb25lbnQgdGhhdCB3YXMgbm90IGNyZWF0ZWQgaW5zaWRlIGEgY29tcG9uZW50XFwncyAnICsgJ2ByZW5kZXJgIG1ldGhvZCwgb3IgeW91IGhhdmUgbXVsdGlwbGUgY29waWVzIG9mIFJlYWN0IGxvYWRlZCAnICsgJyhkZXRhaWxzOiBodHRwczovL2ZiLm1lL3JlYWN0LXJlZnMtbXVzdC1oYXZlLW93bmVyKS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgb3duZXIuYXR0YWNoUmVmKHJlZiwgY29tcG9uZW50KTtcbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlcyBhIGNvbXBvbmVudCBieSByZWYgZnJvbSBhbiBvd25lciBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGNvbXBvbmVudCBDb21wb25lbnQgdG8gZGVyZWZlcmVuY2UuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByZWYgTmFtZSBvZiB0aGUgcmVmIHRvIHJlbW92ZS5cbiAgICogQHBhcmFtIHtSZWFjdE93bmVyfSBvd25lciBDb21wb25lbnQgb24gd2hpY2ggdGhlIHJlZiBpcyByZWNvcmRlZC5cbiAgICogQGZpbmFsXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcmVtb3ZlQ29tcG9uZW50QXNSZWZGcm9tOiBmdW5jdGlvbiAoY29tcG9uZW50LCByZWYsIG93bmVyKSB7XG4gICAgIVJlYWN0T3duZXIuaXNWYWxpZE93bmVyKG93bmVyKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdyZW1vdmVDb21wb25lbnRBc1JlZkZyb20oLi4uKTogT25seSBhIFJlYWN0T3duZXIgY2FuIGhhdmUgcmVmcy4gWW91IG1pZ2h0ICcgKyAnYmUgcmVtb3ZpbmcgYSByZWYgdG8gYSBjb21wb25lbnQgdGhhdCB3YXMgbm90IGNyZWF0ZWQgaW5zaWRlIGEgY29tcG9uZW50XFwncyAnICsgJ2ByZW5kZXJgIG1ldGhvZCwgb3IgeW91IGhhdmUgbXVsdGlwbGUgY29waWVzIG9mIFJlYWN0IGxvYWRlZCAnICsgJyhkZXRhaWxzOiBodHRwczovL2ZiLm1lL3JlYWN0LXJlZnMtbXVzdC1oYXZlLW93bmVyKS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgLy8gQ2hlY2sgdGhhdCBgY29tcG9uZW50YCBpcyBzdGlsbCB0aGUgY3VycmVudCByZWYgYmVjYXVzZSB3ZSBkbyBub3Qgd2FudCB0b1xuICAgIC8vIGRldGFjaCB0aGUgcmVmIGlmIGFub3RoZXIgY29tcG9uZW50IHN0b2xlIGl0LlxuICAgIGlmIChvd25lci5nZXRQdWJsaWNJbnN0YW5jZSgpLnJlZnNbcmVmXSA9PT0gY29tcG9uZW50LmdldFB1YmxpY0luc3RhbmNlKCkpIHtcbiAgICAgIG93bmVyLmRldGFjaFJlZihyZWYpO1xuICAgIH1cbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0T3duZXI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UGVyZlxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogUmVhY3RQZXJmIGlzIGEgZ2VuZXJhbCBBT1Agc3lzdGVtIGRlc2lnbmVkIHRvIG1lYXN1cmUgcGVyZm9ybWFuY2UuIFRoaXNcbiAqIG1vZHVsZSBvbmx5IGhhcyB0aGUgaG9va3M6IHNlZSBSZWFjdERlZmF1bHRQZXJmIGZvciB0aGUgYW5hbHlzaXMgdG9vbC5cbiAqL1xudmFyIFJlYWN0UGVyZiA9IHtcbiAgLyoqXG4gICAqIEJvb2xlYW4gdG8gZW5hYmxlL2Rpc2FibGUgbWVhc3VyZW1lbnQuIFNldCB0byBmYWxzZSBieSBkZWZhdWx0IHRvIHByZXZlbnRcbiAgICogYWNjaWRlbnRhbCBsb2dnaW5nIGFuZCBwZXJmIGxvc3MuXG4gICAqL1xuICBlbmFibGVNZWFzdXJlOiBmYWxzZSxcblxuICAvKipcbiAgICogSG9sZHMgb250byB0aGUgbWVhc3VyZSBmdW5jdGlvbiBpbiB1c2UuIEJ5IGRlZmF1bHQsIGRvbid0IG1lYXN1cmVcbiAgICogYW55dGhpbmcsIGJ1dCB3ZSdsbCBvdmVycmlkZSB0aGlzIGlmIHdlIGluamVjdCBhIG1lYXN1cmUgZnVuY3Rpb24uXG4gICAqL1xuICBzdG9yZWRNZWFzdXJlOiBfbm9NZWFzdXJlLFxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge29iamVjdH0gb2JqZWN0XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBvYmplY3ROYW1lXG4gICAqIEBwYXJhbSB7b2JqZWN0PHN0cmluZz59IG1ldGhvZE5hbWVzXG4gICAqL1xuICBtZWFzdXJlTWV0aG9kczogZnVuY3Rpb24gKG9iamVjdCwgb2JqZWN0TmFtZSwgbWV0aG9kTmFtZXMpIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgZm9yICh2YXIga2V5IGluIG1ldGhvZE5hbWVzKSB7XG4gICAgICAgIGlmICghbWV0aG9kTmFtZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIG9iamVjdFtrZXldID0gUmVhY3RQZXJmLm1lYXN1cmUob2JqZWN0TmFtZSwgbWV0aG9kTmFtZXNba2V5XSwgb2JqZWN0W2tleV0pO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVXNlIHRoaXMgdG8gd3JhcCBtZXRob2RzIHlvdSB3YW50IHRvIG1lYXN1cmUuIFplcm8gb3ZlcmhlYWQgaW4gcHJvZHVjdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IG9iak5hbWVcbiAgICogQHBhcmFtIHtzdHJpbmd9IGZuTmFtZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jXG4gICAqIEByZXR1cm4ge2Z1bmN0aW9ufVxuICAgKi9cbiAgbWVhc3VyZTogZnVuY3Rpb24gKG9iak5hbWUsIGZuTmFtZSwgZnVuYykge1xuICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgbWVhc3VyZWRGdW5jID0gbnVsbDtcbiAgICAgIHZhciB3cmFwcGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoUmVhY3RQZXJmLmVuYWJsZU1lYXN1cmUpIHtcbiAgICAgICAgICBpZiAoIW1lYXN1cmVkRnVuYykge1xuICAgICAgICAgICAgbWVhc3VyZWRGdW5jID0gUmVhY3RQZXJmLnN0b3JlZE1lYXN1cmUob2JqTmFtZSwgZm5OYW1lLCBmdW5jKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG1lYXN1cmVkRnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9O1xuICAgICAgd3JhcHBlci5kaXNwbGF5TmFtZSA9IG9iak5hbWUgKyAnXycgKyBmbk5hbWU7XG4gICAgICByZXR1cm4gd3JhcHBlcjtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmM7XG4gIH0sXG5cbiAgaW5qZWN0aW9uOiB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbn0gbWVhc3VyZVxuICAgICAqL1xuICAgIGluamVjdE1lYXN1cmU6IGZ1bmN0aW9uIChtZWFzdXJlKSB7XG4gICAgICBSZWFjdFBlcmYuc3RvcmVkTWVhc3VyZSA9IG1lYXN1cmU7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIFNpbXBseSBwYXNzZXMgdGhyb3VnaCB0aGUgbWVhc3VyZWQgZnVuY3Rpb24sIHdpdGhvdXQgbWVhc3VyaW5nIGl0LlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBvYmpOYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gZm5OYW1lXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gX25vTWVhc3VyZShvYmpOYW1lLCBmbk5hbWUsIGZ1bmMpIHtcbiAgcmV0dXJuIGZ1bmM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RQZXJmOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzID0ge307XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzID0ge1xuICAgIHByb3A6ICdwcm9wJyxcbiAgICBjb250ZXh0OiAnY29udGV4dCcsXG4gICAgY2hpbGRDb250ZXh0OiAnY2hpbGQgY29udGV4dCdcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RQcm9wVHlwZUxvY2F0aW9uc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGtleU1pcnJvciA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU1pcnJvcicpO1xuXG52YXIgUmVhY3RQcm9wVHlwZUxvY2F0aW9ucyA9IGtleU1pcnJvcih7XG4gIHByb3A6IG51bGwsXG4gIGNvbnRleHQ6IG51bGwsXG4gIGNoaWxkQ29udGV4dDogbnVsbFxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RQcm9wVHlwZXNcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdEVsZW1lbnQgPSByZXF1aXJlKCcuL1JlYWN0RWxlbWVudCcpO1xudmFyIFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzID0gcmVxdWlyZSgnLi9SZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lcycpO1xuXG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5RnVuY3Rpb24nKTtcbnZhciBnZXRJdGVyYXRvckZuID0gcmVxdWlyZSgnLi9nZXRJdGVyYXRvckZuJyk7XG5cbi8qKlxuICogQ29sbGVjdGlvbiBvZiBtZXRob2RzIHRoYXQgYWxsb3cgZGVjbGFyYXRpb24gYW5kIHZhbGlkYXRpb24gb2YgcHJvcHMgdGhhdCBhcmVcbiAqIHN1cHBsaWVkIHRvIFJlYWN0IGNvbXBvbmVudHMuIEV4YW1wbGUgdXNhZ2U6XG4gKlxuICogICB2YXIgUHJvcHMgPSByZXF1aXJlKCdSZWFjdFByb3BUeXBlcycpO1xuICogICB2YXIgTXlBcnRpY2xlID0gUmVhY3QuY3JlYXRlQ2xhc3Moe1xuICogICAgIHByb3BUeXBlczoge1xuICogICAgICAgLy8gQW4gb3B0aW9uYWwgc3RyaW5nIHByb3AgbmFtZWQgXCJkZXNjcmlwdGlvblwiLlxuICogICAgICAgZGVzY3JpcHRpb246IFByb3BzLnN0cmluZyxcbiAqXG4gKiAgICAgICAvLyBBIHJlcXVpcmVkIGVudW0gcHJvcCBuYW1lZCBcImNhdGVnb3J5XCIuXG4gKiAgICAgICBjYXRlZ29yeTogUHJvcHMub25lT2YoWydOZXdzJywnUGhvdG9zJ10pLmlzUmVxdWlyZWQsXG4gKlxuICogICAgICAgLy8gQSBwcm9wIG5hbWVkIFwiZGlhbG9nXCIgdGhhdCByZXF1aXJlcyBhbiBpbnN0YW5jZSBvZiBEaWFsb2cuXG4gKiAgICAgICBkaWFsb2c6IFByb3BzLmluc3RhbmNlT2YoRGlhbG9nKS5pc1JlcXVpcmVkXG4gKiAgICAgfSxcbiAqICAgICByZW5kZXI6IGZ1bmN0aW9uKCkgeyAuLi4gfVxuICogICB9KTtcbiAqXG4gKiBBIG1vcmUgZm9ybWFsIHNwZWNpZmljYXRpb24gb2YgaG93IHRoZXNlIG1ldGhvZHMgYXJlIHVzZWQ6XG4gKlxuICogICB0eXBlIDo9IGFycmF5fGJvb2x8ZnVuY3xvYmplY3R8bnVtYmVyfHN0cmluZ3xvbmVPZihbLi4uXSl8aW5zdGFuY2VPZiguLi4pXG4gKiAgIGRlY2wgOj0gUmVhY3RQcm9wVHlwZXMue3R5cGV9KC5pc1JlcXVpcmVkKT9cbiAqXG4gKiBFYWNoIGFuZCBldmVyeSBkZWNsYXJhdGlvbiBwcm9kdWNlcyBhIGZ1bmN0aW9uIHdpdGggdGhlIHNhbWUgc2lnbmF0dXJlLiBUaGlzXG4gKiBhbGxvd3MgdGhlIGNyZWF0aW9uIG9mIGN1c3RvbSB2YWxpZGF0aW9uIGZ1bmN0aW9ucy4gRm9yIGV4YW1wbGU6XG4gKlxuICogIHZhciBNeUxpbmsgPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gKiAgICBwcm9wVHlwZXM6IHtcbiAqICAgICAgLy8gQW4gb3B0aW9uYWwgc3RyaW5nIG9yIFVSSSBwcm9wIG5hbWVkIFwiaHJlZlwiLlxuICogICAgICBocmVmOiBmdW5jdGlvbihwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUpIHtcbiAqICAgICAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICogICAgICAgIGlmIChwcm9wVmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgcHJvcFZhbHVlICE9PSAnc3RyaW5nJyAmJlxuICogICAgICAgICAgICAhKHByb3BWYWx1ZSBpbnN0YW5jZW9mIFVSSSkpIHtcbiAqICAgICAgICAgIHJldHVybiBuZXcgRXJyb3IoXG4gKiAgICAgICAgICAgICdFeHBlY3RlZCBhIHN0cmluZyBvciBhbiBVUkkgZm9yICcgKyBwcm9wTmFtZSArICcgaW4gJyArXG4gKiAgICAgICAgICAgIGNvbXBvbmVudE5hbWVcbiAqICAgICAgICAgICk7XG4gKiAgICAgICAgfVxuICogICAgICB9XG4gKiAgICB9LFxuICogICAgcmVuZGVyOiBmdW5jdGlvbigpIHsuLi59XG4gKiAgfSk7XG4gKlxuICogQGludGVybmFsXG4gKi9cblxudmFyIEFOT05ZTU9VUyA9ICc8PGFub255bW91cz4+JztcblxudmFyIFJlYWN0UHJvcFR5cGVzID0ge1xuICBhcnJheTogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ2FycmF5JyksXG4gIGJvb2w6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdib29sZWFuJyksXG4gIGZ1bmM6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdmdW5jdGlvbicpLFxuICBudW1iZXI6IGNyZWF0ZVByaW1pdGl2ZVR5cGVDaGVja2VyKCdudW1iZXInKSxcbiAgb2JqZWN0OiBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcignb2JqZWN0JyksXG4gIHN0cmluZzogY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoJ3N0cmluZycpLFxuXG4gIGFueTogY3JlYXRlQW55VHlwZUNoZWNrZXIoKSxcbiAgYXJyYXlPZjogY3JlYXRlQXJyYXlPZlR5cGVDaGVja2VyLFxuICBlbGVtZW50OiBjcmVhdGVFbGVtZW50VHlwZUNoZWNrZXIoKSxcbiAgaW5zdGFuY2VPZjogY3JlYXRlSW5zdGFuY2VUeXBlQ2hlY2tlcixcbiAgbm9kZTogY3JlYXRlTm9kZUNoZWNrZXIoKSxcbiAgb2JqZWN0T2Y6IGNyZWF0ZU9iamVjdE9mVHlwZUNoZWNrZXIsXG4gIG9uZU9mOiBjcmVhdGVFbnVtVHlwZUNoZWNrZXIsXG4gIG9uZU9mVHlwZTogY3JlYXRlVW5pb25UeXBlQ2hlY2tlcixcbiAgc2hhcGU6IGNyZWF0ZVNoYXBlVHlwZUNoZWNrZXJcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKSB7XG4gIGZ1bmN0aW9uIGNoZWNrVHlwZShpc1JlcXVpcmVkLCBwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICBjb21wb25lbnROYW1lID0gY29tcG9uZW50TmFtZSB8fCBBTk9OWU1PVVM7XG4gICAgcHJvcEZ1bGxOYW1lID0gcHJvcEZ1bGxOYW1lIHx8IHByb3BOYW1lO1xuICAgIGlmIChwcm9wc1twcm9wTmFtZV0gPT0gbnVsbCkge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIGlmIChpc1JlcXVpcmVkKSB7XG4gICAgICAgIHJldHVybiBuZXcgRXJyb3IoJ1JlcXVpcmVkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agd2FzIG5vdCBzcGVjaWZpZWQgaW4gJyArICgnYCcgKyBjb21wb25lbnROYW1lICsgJ2AuJykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBjaGFpbmVkQ2hlY2tUeXBlID0gY2hlY2tUeXBlLmJpbmQobnVsbCwgZmFsc2UpO1xuICBjaGFpbmVkQ2hlY2tUeXBlLmlzUmVxdWlyZWQgPSBjaGVja1R5cGUuYmluZChudWxsLCB0cnVlKTtcblxuICByZXR1cm4gY2hhaW5lZENoZWNrVHlwZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlUHJpbWl0aXZlVHlwZUNoZWNrZXIoZXhwZWN0ZWRUeXBlKSB7XG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG4gICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTtcbiAgICBpZiAocHJvcFR5cGUgIT09IGV4cGVjdGVkVHlwZSkge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIC8vIGBwcm9wVmFsdWVgIGJlaW5nIGluc3RhbmNlIG9mLCBzYXksIGRhdGUvcmVnZXhwLCBwYXNzIHRoZSAnb2JqZWN0J1xuICAgICAgLy8gY2hlY2ssIGJ1dCB3ZSBjYW4gb2ZmZXIgYSBtb3JlIHByZWNpc2UgZXJyb3IgbWVzc2FnZSBoZXJlIHJhdGhlciB0aGFuXG4gICAgICAvLyAnb2YgdHlwZSBgb2JqZWN0YCcuXG4gICAgICB2YXIgcHJlY2lzZVR5cGUgPSBnZXRQcmVjaXNlVHlwZShwcm9wVmFsdWUpO1xuXG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agb2YgdHlwZSAnICsgKCdgJyArIHByZWNpc2VUeXBlICsgJ2Agc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkICcpICsgKCdgJyArIGV4cGVjdGVkVHlwZSArICdgLicpKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQW55VHlwZUNoZWNrZXIoKSB7XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcihlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zKG51bGwpKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlQXJyYXlPZlR5cGVDaGVja2VyKHR5cGVDaGVja2VyKSB7XG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpIHtcbiAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG4gICAgICB2YXIgcHJvcFR5cGUgPSBnZXRQcm9wVHlwZShwcm9wVmFsdWUpO1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBwcm9wVHlwZSArICdgIHN1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBhbiBhcnJheS4nKSk7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcFZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZXJyb3IgPSB0eXBlQ2hlY2tlcihwcm9wVmFsdWUsIGksIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUgKyAnWycgKyBpICsgJ10nKTtcbiAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRWxlbWVudFR5cGVDaGVja2VyKCkge1xuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICBpZiAoIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChwcm9wc1twcm9wTmFtZV0pKSB7XG4gICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIHN1cHBsaWVkIHRvICcgKyAoJ2AnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBhIHNpbmdsZSBSZWFjdEVsZW1lbnQuJykpO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gY3JlYXRlQ2hhaW5hYmxlVHlwZUNoZWNrZXIodmFsaWRhdGUpO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVJbnN0YW5jZVR5cGVDaGVja2VyKGV4cGVjdGVkQ2xhc3MpIHtcbiAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgaWYgKCEocHJvcHNbcHJvcE5hbWVdIGluc3RhbmNlb2YgZXhwZWN0ZWRDbGFzcykpIHtcbiAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG4gICAgICB2YXIgZXhwZWN0ZWRDbGFzc05hbWUgPSBleHBlY3RlZENsYXNzLm5hbWUgfHwgQU5PTllNT1VTO1xuICAgICAgdmFyIGFjdHVhbENsYXNzTmFtZSA9IGdldENsYXNzTmFtZShwcm9wc1twcm9wTmFtZV0pO1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgJyArICgnYCcgKyBhY3R1YWxDbGFzc05hbWUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgJykgKyAoJ2luc3RhbmNlIG9mIGAnICsgZXhwZWN0ZWRDbGFzc05hbWUgKyAnYC4nKSk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcih2YWxpZGF0ZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUVudW1UeXBlQ2hlY2tlcihleHBlY3RlZFZhbHVlcykge1xuICBpZiAoIUFycmF5LmlzQXJyYXkoZXhwZWN0ZWRWYWx1ZXMpKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgYXJndW1lbnQgc3VwcGxpZWQgdG8gb25lT2YsIGV4cGVjdGVkIGFuIGluc3RhbmNlIG9mIGFycmF5LicpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdmFsaWRhdGUocHJvcHMsIHByb3BOYW1lLCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lKSB7XG4gICAgdmFyIHByb3BWYWx1ZSA9IHByb3BzW3Byb3BOYW1lXTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV4cGVjdGVkVmFsdWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAocHJvcFZhbHVlID09PSBleHBlY3RlZFZhbHVlc1tpXSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgIHZhciB2YWx1ZXNTdHJpbmcgPSBKU09OLnN0cmluZ2lmeShleHBlY3RlZFZhbHVlcyk7XG4gICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHZhbHVlIGAnICsgcHJvcFZhbHVlICsgJ2AgJyArICgnc3VwcGxpZWQgdG8gYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIG9uZSBvZiAnICsgdmFsdWVzU3RyaW5nICsgJy4nKSk7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlT2JqZWN0T2ZUeXBlQ2hlY2tlcih0eXBlQ2hlY2tlcikge1xuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbcHJvcE5hbWVdO1xuICAgIHZhciBwcm9wVHlwZSA9IGdldFByb3BUeXBlKHByb3BWYWx1ZSk7XG4gICAgaWYgKHByb3BUeXBlICE9PSAnb2JqZWN0Jykge1xuICAgICAgdmFyIGxvY2F0aW9uTmFtZSA9IFJlYWN0UHJvcFR5cGVMb2NhdGlvbk5hbWVzW2xvY2F0aW9uXTtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBvZiB0eXBlICcgKyAoJ2AnICsgcHJvcFR5cGUgKyAnYCBzdXBwbGllZCB0byBgJyArIGNvbXBvbmVudE5hbWUgKyAnYCwgZXhwZWN0ZWQgYW4gb2JqZWN0LicpKTtcbiAgICB9XG4gICAgZm9yICh2YXIga2V5IGluIHByb3BWYWx1ZSkge1xuICAgICAgaWYgKHByb3BWYWx1ZS5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgIHZhciBlcnJvciA9IHR5cGVDaGVja2VyKHByb3BWYWx1ZSwga2V5LCBjb21wb25lbnROYW1lLCBsb2NhdGlvbiwgcHJvcEZ1bGxOYW1lICsgJy4nICsga2V5KTtcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4gZXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlVW5pb25UeXBlQ2hlY2tlcihhcnJheU9mVHlwZUNoZWNrZXJzKSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShhcnJheU9mVHlwZUNoZWNrZXJzKSkge1xuICAgIHJldHVybiBjcmVhdGVDaGFpbmFibGVUeXBlQ2hlY2tlcihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkIGFyZ3VtZW50IHN1cHBsaWVkIHRvIG9uZU9mVHlwZSwgZXhwZWN0ZWQgYW4gaW5zdGFuY2Ugb2YgYXJyYXkuJyk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiB2YWxpZGF0ZShwcm9wcywgcHJvcE5hbWUsIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5T2ZUeXBlQ2hlY2tlcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBjaGVja2VyID0gYXJyYXlPZlR5cGVDaGVja2Vyc1tpXTtcbiAgICAgIGlmIChjaGVja2VyKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkgPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgIHJldHVybiBuZXcgRXJyb3IoJ0ludmFsaWQgJyArIGxvY2F0aW9uTmFtZSArICcgYCcgKyBwcm9wRnVsbE5hbWUgKyAnYCBzdXBwbGllZCB0byAnICsgKCdgJyArIGNvbXBvbmVudE5hbWUgKyAnYC4nKSk7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTm9kZUNoZWNrZXIoKSB7XG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIGlmICghaXNOb2RlKHByb3BzW3Byb3BOYW1lXSkpIHtcbiAgICAgIHZhciBsb2NhdGlvbk5hbWUgPSBSZWFjdFByb3BUeXBlTG9jYXRpb25OYW1lc1tsb2NhdGlvbl07XG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdJbnZhbGlkICcgKyBsb2NhdGlvbk5hbWUgKyAnIGAnICsgcHJvcEZ1bGxOYW1lICsgJ2Agc3VwcGxpZWQgdG8gJyArICgnYCcgKyBjb21wb25lbnROYW1lICsgJ2AsIGV4cGVjdGVkIGEgUmVhY3ROb2RlLicpKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlU2hhcGVUeXBlQ2hlY2tlcihzaGFwZVR5cGVzKSB7XG4gIGZ1bmN0aW9uIHZhbGlkYXRlKHByb3BzLCBwcm9wTmFtZSwgY29tcG9uZW50TmFtZSwgbG9jYXRpb24sIHByb3BGdWxsTmFtZSkge1xuICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1twcm9wTmFtZV07XG4gICAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTtcbiAgICBpZiAocHJvcFR5cGUgIT09ICdvYmplY3QnKSB7XG4gICAgICB2YXIgbG9jYXRpb25OYW1lID0gUmVhY3RQcm9wVHlwZUxvY2F0aW9uTmFtZXNbbG9jYXRpb25dO1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcignSW52YWxpZCAnICsgbG9jYXRpb25OYW1lICsgJyBgJyArIHByb3BGdWxsTmFtZSArICdgIG9mIHR5cGUgYCcgKyBwcm9wVHlwZSArICdgICcgKyAoJ3N1cHBsaWVkIHRvIGAnICsgY29tcG9uZW50TmFtZSArICdgLCBleHBlY3RlZCBgb2JqZWN0YC4nKSk7XG4gICAgfVxuICAgIGZvciAodmFyIGtleSBpbiBzaGFwZVR5cGVzKSB7XG4gICAgICB2YXIgY2hlY2tlciA9IHNoYXBlVHlwZXNba2V5XTtcbiAgICAgIGlmICghY2hlY2tlcikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHZhciBlcnJvciA9IGNoZWNrZXIocHJvcFZhbHVlLCBrZXksIGNvbXBvbmVudE5hbWUsIGxvY2F0aW9uLCBwcm9wRnVsbE5hbWUgKyAnLicgKyBrZXkpO1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHJldHVybiBlcnJvcjtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUNoYWluYWJsZVR5cGVDaGVja2VyKHZhbGlkYXRlKTtcbn1cblxuZnVuY3Rpb24gaXNOb2RlKHByb3BWYWx1ZSkge1xuICBzd2l0Y2ggKHR5cGVvZiBwcm9wVmFsdWUpIHtcbiAgICBjYXNlICdudW1iZXInOlxuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgY2FzZSAndW5kZWZpbmVkJzpcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgcmV0dXJuICFwcm9wVmFsdWU7XG4gICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHByb3BWYWx1ZSkpIHtcbiAgICAgICAgcmV0dXJuIHByb3BWYWx1ZS5ldmVyeShpc05vZGUpO1xuICAgICAgfVxuICAgICAgaWYgKHByb3BWYWx1ZSA9PT0gbnVsbCB8fCBSZWFjdEVsZW1lbnQuaXNWYWxpZEVsZW1lbnQocHJvcFZhbHVlKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgdmFyIGl0ZXJhdG9yRm4gPSBnZXRJdGVyYXRvckZuKHByb3BWYWx1ZSk7XG4gICAgICBpZiAoaXRlcmF0b3JGbikge1xuICAgICAgICB2YXIgaXRlcmF0b3IgPSBpdGVyYXRvckZuLmNhbGwocHJvcFZhbHVlKTtcbiAgICAgICAgdmFyIHN0ZXA7XG4gICAgICAgIGlmIChpdGVyYXRvckZuICE9PSBwcm9wVmFsdWUuZW50cmllcykge1xuICAgICAgICAgIHdoaWxlICghKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICAgIGlmICghaXNOb2RlKHN0ZXAudmFsdWUpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gSXRlcmF0b3Igd2lsbCBwcm92aWRlIGVudHJ5IFtrLHZdIHR1cGxlcyByYXRoZXIgdGhhbiB2YWx1ZXMuXG4gICAgICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgICAgdmFyIGVudHJ5ID0gc3RlcC52YWx1ZTtcbiAgICAgICAgICAgIGlmIChlbnRyeSkge1xuICAgICAgICAgICAgICBpZiAoIWlzTm9kZShlbnRyeVsxXSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG4vLyBFcXVpdmFsZW50IG9mIGB0eXBlb2ZgIGJ1dCB3aXRoIHNwZWNpYWwgaGFuZGxpbmcgZm9yIGFycmF5IGFuZCByZWdleHAuXG5mdW5jdGlvbiBnZXRQcm9wVHlwZShwcm9wVmFsdWUpIHtcbiAgdmFyIHByb3BUeXBlID0gdHlwZW9mIHByb3BWYWx1ZTtcbiAgaWYgKEFycmF5LmlzQXJyYXkocHJvcFZhbHVlKSkge1xuICAgIHJldHVybiAnYXJyYXknO1xuICB9XG4gIGlmIChwcm9wVmFsdWUgaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAvLyBPbGQgd2Via2l0cyAoYXQgbGVhc3QgdW50aWwgQW5kcm9pZCA0LjApIHJldHVybiAnZnVuY3Rpb24nIHJhdGhlciB0aGFuXG4gICAgLy8gJ29iamVjdCcgZm9yIHR5cGVvZiBhIFJlZ0V4cC4gV2UnbGwgbm9ybWFsaXplIHRoaXMgaGVyZSBzbyB0aGF0IC9ibGEvXG4gICAgLy8gcGFzc2VzIFByb3BUeXBlcy5vYmplY3QuXG4gICAgcmV0dXJuICdvYmplY3QnO1xuICB9XG4gIHJldHVybiBwcm9wVHlwZTtcbn1cblxuLy8gVGhpcyBoYW5kbGVzIG1vcmUgdHlwZXMgdGhhbiBgZ2V0UHJvcFR5cGVgLiBPbmx5IHVzZWQgZm9yIGVycm9yIG1lc3NhZ2VzLlxuLy8gU2VlIGBjcmVhdGVQcmltaXRpdmVUeXBlQ2hlY2tlcmAuXG5mdW5jdGlvbiBnZXRQcmVjaXNlVHlwZShwcm9wVmFsdWUpIHtcbiAgdmFyIHByb3BUeXBlID0gZ2V0UHJvcFR5cGUocHJvcFZhbHVlKTtcbiAgaWYgKHByb3BUeXBlID09PSAnb2JqZWN0Jykge1xuICAgIGlmIChwcm9wVmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICByZXR1cm4gJ2RhdGUnO1xuICAgIH0gZWxzZSBpZiAocHJvcFZhbHVlIGluc3RhbmNlb2YgUmVnRXhwKSB7XG4gICAgICByZXR1cm4gJ3JlZ2V4cCc7XG4gICAgfVxuICB9XG4gIHJldHVybiBwcm9wVHlwZTtcbn1cblxuLy8gUmV0dXJucyBjbGFzcyBuYW1lIG9mIHRoZSBvYmplY3QsIGlmIGFueS5cbmZ1bmN0aW9uIGdldENsYXNzTmFtZShwcm9wVmFsdWUpIHtcbiAgaWYgKCFwcm9wVmFsdWUuY29uc3RydWN0b3IgfHwgIXByb3BWYWx1ZS5jb25zdHJ1Y3Rvci5uYW1lKSB7XG4gICAgcmV0dXJuICc8PGFub255bW91cz4+JztcbiAgfVxuICByZXR1cm4gcHJvcFZhbHVlLmNvbnN0cnVjdG9yLm5hbWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RQcm9wVHlwZXM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb25cbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQ2FsbGJhY2tRdWV1ZSA9IHJlcXVpcmUoJy4vQ2FsbGJhY2tRdWV1ZScpO1xudmFyIFBvb2xlZENsYXNzID0gcmVxdWlyZSgnLi9Qb29sZWRDbGFzcycpO1xudmFyIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlciA9IHJlcXVpcmUoJy4vUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyJyk7XG52YXIgUmVhY3RET01GZWF0dXJlRmxhZ3MgPSByZXF1aXJlKCcuL1JlYWN0RE9NRmVhdHVyZUZsYWdzJyk7XG52YXIgUmVhY3RJbnB1dFNlbGVjdGlvbiA9IHJlcXVpcmUoJy4vUmVhY3RJbnB1dFNlbGVjdGlvbicpO1xudmFyIFRyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi9UcmFuc2FjdGlvbicpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG5cbi8qKlxuICogRW5zdXJlcyB0aGF0LCB3aGVuIHBvc3NpYmxlLCB0aGUgc2VsZWN0aW9uIHJhbmdlIChjdXJyZW50bHkgc2VsZWN0ZWQgdGV4dFxuICogaW5wdXQpIGlzIG5vdCBkaXN0dXJiZWQgYnkgcGVyZm9ybWluZyB0aGUgdHJhbnNhY3Rpb24uXG4gKi9cbnZhciBTRUxFQ1RJT05fUkVTVE9SQVRJT04gPSB7XG4gIC8qKlxuICAgKiBAcmV0dXJuIHtTZWxlY3Rpb259IFNlbGVjdGlvbiBpbmZvcm1hdGlvbi5cbiAgICovXG4gIGluaXRpYWxpemU6IFJlYWN0SW5wdXRTZWxlY3Rpb24uZ2V0U2VsZWN0aW9uSW5mb3JtYXRpb24sXG4gIC8qKlxuICAgKiBAcGFyYW0ge1NlbGVjdGlvbn0gc2VsIFNlbGVjdGlvbiBpbmZvcm1hdGlvbiByZXR1cm5lZCBmcm9tIGBpbml0aWFsaXplYC5cbiAgICovXG4gIGNsb3NlOiBSZWFjdElucHV0U2VsZWN0aW9uLnJlc3RvcmVTZWxlY3Rpb25cbn07XG5cbi8qKlxuICogU3VwcHJlc3NlcyBldmVudHMgKGJsdXIvZm9jdXMpIHRoYXQgY291bGQgYmUgaW5hZHZlcnRlbnRseSBkaXNwYXRjaGVkIGR1ZSB0b1xuICogaGlnaCBsZXZlbCBET00gbWFuaXB1bGF0aW9ucyAobGlrZSB0ZW1wb3JhcmlseSByZW1vdmluZyBhIHRleHQgaW5wdXQgZnJvbSB0aGVcbiAqIERPTSkuXG4gKi9cbnZhciBFVkVOVF9TVVBQUkVTU0lPTiA9IHtcbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRoZSBlbmFibGVkIHN0YXR1cyBvZiBgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyYCBiZWZvcmVcbiAgICogdGhlIHJlY29uY2lsaWF0aW9uLlxuICAgKi9cbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xuICAgIHZhciBjdXJyZW50bHlFbmFibGVkID0gUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLmlzRW5hYmxlZCgpO1xuICAgIFJlYWN0QnJvd3NlckV2ZW50RW1pdHRlci5zZXRFbmFibGVkKGZhbHNlKTtcbiAgICByZXR1cm4gY3VycmVudGx5RW5hYmxlZDtcbiAgfSxcblxuICAvKipcbiAgICogQHBhcmFtIHtib29sZWFufSBwcmV2aW91c2x5RW5hYmxlZCBFbmFibGVkIHN0YXR1cyBvZlxuICAgKiAgIGBSZWFjdEJyb3dzZXJFdmVudEVtaXR0ZXJgIGJlZm9yZSB0aGUgcmVjb25jaWxpYXRpb24gb2NjdXJyZWQuIGBjbG9zZWBcbiAgICogICByZXN0b3JlcyB0aGUgcHJldmlvdXMgdmFsdWUuXG4gICAqL1xuICBjbG9zZTogZnVuY3Rpb24gKHByZXZpb3VzbHlFbmFibGVkKSB7XG4gICAgUmVhY3RCcm93c2VyRXZlbnRFbWl0dGVyLnNldEVuYWJsZWQocHJldmlvdXNseUVuYWJsZWQpO1xuICB9XG59O1xuXG4vKipcbiAqIFByb3ZpZGVzIGEgcXVldWUgZm9yIGNvbGxlY3RpbmcgYGNvbXBvbmVudERpZE1vdW50YCBhbmRcbiAqIGBjb21wb25lbnREaWRVcGRhdGVgIGNhbGxiYWNrcyBkdXJpbmcgdGhlIHRoZSB0cmFuc2FjdGlvbi5cbiAqL1xudmFyIE9OX0RPTV9SRUFEWV9RVUVVRUlORyA9IHtcbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIHRoZSBpbnRlcm5hbCBgb25ET01SZWFkeWAgcXVldWUuXG4gICAqL1xuICBpbml0aWFsaXplOiBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5yZWFjdE1vdW50UmVhZHkucmVzZXQoKTtcbiAgfSxcblxuICAvKipcbiAgICogQWZ0ZXIgRE9NIGlzIGZsdXNoZWQsIGludm9rZSBhbGwgcmVnaXN0ZXJlZCBgb25ET01SZWFkeWAgY2FsbGJhY2tzLlxuICAgKi9cbiAgY2xvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnJlYWN0TW91bnRSZWFkeS5ub3RpZnlBbGwoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBFeGVjdXRlZCB3aXRoaW4gdGhlIHNjb3BlIG9mIHRoZSBgVHJhbnNhY3Rpb25gIGluc3RhbmNlLiBDb25zaWRlciB0aGVzZSBhc1xuICogYmVpbmcgbWVtYmVyIG1ldGhvZHMsIGJ1dCB3aXRoIGFuIGltcGxpZWQgb3JkZXJpbmcgd2hpbGUgYmVpbmcgaXNvbGF0ZWQgZnJvbVxuICogZWFjaCBvdGhlci5cbiAqL1xudmFyIFRSQU5TQUNUSU9OX1dSQVBQRVJTID0gW1NFTEVDVElPTl9SRVNUT1JBVElPTiwgRVZFTlRfU1VQUFJFU1NJT04sIE9OX0RPTV9SRUFEWV9RVUVVRUlOR107XG5cbi8qKlxuICogQ3VycmVudGx5OlxuICogLSBUaGUgb3JkZXIgdGhhdCB0aGVzZSBhcmUgbGlzdGVkIGluIHRoZSB0cmFuc2FjdGlvbiBpcyBjcml0aWNhbDpcbiAqIC0gU3VwcHJlc3NlcyBldmVudHMuXG4gKiAtIFJlc3RvcmVzIHNlbGVjdGlvbiByYW5nZS5cbiAqXG4gKiBGdXR1cmU6XG4gKiAtIFJlc3RvcmUgZG9jdW1lbnQvb3ZlcmZsb3cgc2Nyb2xsIHBvc2l0aW9ucyB0aGF0IHdlcmUgdW5pbnRlbnRpb25hbGx5XG4gKiAgIG1vZGlmaWVkIHZpYSBET00gaW5zZXJ0aW9ucyBhYm92ZSB0aGUgdG9wIHZpZXdwb3J0IGJvdW5kYXJ5LlxuICogLSBJbXBsZW1lbnQvaW50ZWdyYXRlIHdpdGggY3VzdG9taXplZCBjb25zdHJhaW50IGJhc2VkIGxheW91dCBzeXN0ZW0gYW5kIGtlZXBcbiAqICAgdHJhY2sgb2Ygd2hpY2ggZGltZW5zaW9ucyBtdXN0IGJlIHJlbWVhc3VyZWQuXG4gKlxuICogQGNsYXNzIFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb25cbiAqL1xuZnVuY3Rpb24gUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbihmb3JjZUhUTUwpIHtcbiAgdGhpcy5yZWluaXRpYWxpemVUcmFuc2FjdGlvbigpO1xuICAvLyBPbmx5IHNlcnZlci1zaWRlIHJlbmRlcmluZyByZWFsbHkgbmVlZHMgdGhpcyBvcHRpb24gKHNlZVxuICAvLyBgUmVhY3RTZXJ2ZXJSZW5kZXJpbmdgKSwgYnV0IHNlcnZlci1zaWRlIHVzZXNcbiAgLy8gYFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb25gIGluc3RlYWQuIFRoaXMgb3B0aW9uIGlzIGhlcmUgc28gdGhhdCBpdCdzXG4gIC8vIGFjY2Vzc2libGUgYW5kIGRlZmF1bHRzIHRvIGZhbHNlIHdoZW4gYFJlYWN0RE9NQ29tcG9uZW50YCBhbmRcbiAgLy8gYFJlYWN0VGV4dENvbXBvbmVudGAgY2hlY2tzIGl0IGluIGBtb3VudENvbXBvbmVudGAuYFxuICB0aGlzLnJlbmRlclRvU3RhdGljTWFya3VwID0gZmFsc2U7XG4gIHRoaXMucmVhY3RNb3VudFJlYWR5ID0gQ2FsbGJhY2tRdWV1ZS5nZXRQb29sZWQobnVsbCk7XG4gIHRoaXMudXNlQ3JlYXRlRWxlbWVudCA9ICFmb3JjZUhUTUwgJiYgUmVhY3RET01GZWF0dXJlRmxhZ3MudXNlQ3JlYXRlRWxlbWVudDtcbn1cblxudmFyIE1peGluID0ge1xuICAvKipcbiAgICogQHNlZSBUcmFuc2FjdGlvblxuICAgKiBAYWJzdHJhY3RcbiAgICogQGZpbmFsXG4gICAqIEByZXR1cm4ge2FycmF5PG9iamVjdD59IExpc3Qgb2Ygb3BlcmF0aW9uIHdyYXAgcHJvY2VkdXJlcy5cbiAgICogICBUT0RPOiBjb252ZXJ0IHRvIGFycmF5PFRyYW5zYWN0aW9uV3JhcHBlcj5cbiAgICovXG4gIGdldFRyYW5zYWN0aW9uV3JhcHBlcnM6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gVFJBTlNBQ1RJT05fV1JBUFBFUlM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge29iamVjdH0gVGhlIHF1ZXVlIHRvIGNvbGxlY3QgYG9uRE9NUmVhZHlgIGNhbGxiYWNrcyB3aXRoLlxuICAgKi9cbiAgZ2V0UmVhY3RNb3VudFJlYWR5OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVhY3RNb3VudFJlYWR5O1xuICB9LFxuXG4gIC8qKlxuICAgKiBgUG9vbGVkQ2xhc3NgIGxvb2tzIGZvciB0aGlzLCBhbmQgd2lsbCBpbnZva2UgdGhpcyBiZWZvcmUgYWxsb3dpbmcgdGhpc1xuICAgKiBpbnN0YW5jZSB0byBiZSByZXVzZWQuXG4gICAqL1xuICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG4gICAgQ2FsbGJhY2tRdWV1ZS5yZWxlYXNlKHRoaXMucmVhY3RNb3VudFJlYWR5KTtcbiAgICB0aGlzLnJlYWN0TW91bnRSZWFkeSA9IG51bGw7XG4gIH1cbn07XG5cbmFzc2lnbihSZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uLnByb3RvdHlwZSwgVHJhbnNhY3Rpb24uTWl4aW4sIE1peGluKTtcblxuUG9vbGVkQ2xhc3MuYWRkUG9vbGluZ1RvKFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb247IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0UmVjb25jaWxlclxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0UmVmID0gcmVxdWlyZSgnLi9SZWFjdFJlZicpO1xuXG4vKipcbiAqIEhlbHBlciB0byBjYWxsIFJlYWN0UmVmLmF0dGFjaFJlZnMgd2l0aCB0aGlzIGNvbXBvc2l0ZSBjb21wb25lbnQsIHNwbGl0IG91dFxuICogdG8gYXZvaWQgYWxsb2NhdGlvbnMgaW4gdGhlIHRyYW5zYWN0aW9uIG1vdW50LXJlYWR5IHF1ZXVlLlxuICovXG5mdW5jdGlvbiBhdHRhY2hSZWZzKCkge1xuICBSZWFjdFJlZi5hdHRhY2hSZWZzKHRoaXMsIHRoaXMuX2N1cnJlbnRFbGVtZW50KTtcbn1cblxudmFyIFJlYWN0UmVjb25jaWxlciA9IHtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgdGhlIGNvbXBvbmVudCwgcmVuZGVycyBtYXJrdXAsIGFuZCByZWdpc3RlcnMgZXZlbnQgbGlzdGVuZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBpbnRlcm5hbEluc3RhbmNlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSByb290SUQgRE9NIElEIG9mIHRoZSByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbnxSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9ufSB0cmFuc2FjdGlvblxuICAgKiBAcmV0dXJuIHs/c3RyaW5nfSBSZW5kZXJlZCBtYXJrdXAgdG8gYmUgaW5zZXJ0ZWQgaW50byB0aGUgRE9NLlxuICAgKiBAZmluYWxcbiAgICogQGludGVybmFsXG4gICAqL1xuICBtb3VudENvbXBvbmVudDogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UsIHJvb3RJRCwgdHJhbnNhY3Rpb24sIGNvbnRleHQpIHtcbiAgICB2YXIgbWFya3VwID0gaW50ZXJuYWxJbnN0YW5jZS5tb3VudENvbXBvbmVudChyb290SUQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcbiAgICBpZiAoaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQgJiYgaW50ZXJuYWxJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQucmVmICE9IG51bGwpIHtcbiAgICAgIHRyYW5zYWN0aW9uLmdldFJlYWN0TW91bnRSZWFkeSgpLmVucXVldWUoYXR0YWNoUmVmcywgaW50ZXJuYWxJbnN0YW5jZSk7XG4gICAgfVxuICAgIHJldHVybiBtYXJrdXA7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbGVhc2VzIGFueSByZXNvdXJjZXMgYWxsb2NhdGVkIGJ5IGBtb3VudENvbXBvbmVudGAuXG4gICAqXG4gICAqIEBmaW5hbFxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIHVubW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgUmVhY3RSZWYuZGV0YWNoUmVmcyhpbnRlcm5hbEluc3RhbmNlLCBpbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudCk7XG4gICAgaW50ZXJuYWxJbnN0YW5jZS51bm1vdW50Q29tcG9uZW50KCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBhIGNvbXBvbmVudCB1c2luZyBhIG5ldyBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBpbnRlcm5hbEluc3RhbmNlXG4gICAqIEBwYXJhbSB7UmVhY3RFbGVtZW50fSBuZXh0RWxlbWVudFxuICAgKiBAcGFyYW0ge1JlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb259IHRyYW5zYWN0aW9uXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBjb250ZXh0XG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgcmVjZWl2ZUNvbXBvbmVudDogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UsIG5leHRFbGVtZW50LCB0cmFuc2FjdGlvbiwgY29udGV4dCkge1xuICAgIHZhciBwcmV2RWxlbWVudCA9IGludGVybmFsSW5zdGFuY2UuX2N1cnJlbnRFbGVtZW50O1xuXG4gICAgaWYgKG5leHRFbGVtZW50ID09PSBwcmV2RWxlbWVudCAmJiBjb250ZXh0ID09PSBpbnRlcm5hbEluc3RhbmNlLl9jb250ZXh0KSB7XG4gICAgICAvLyBTaW5jZSBlbGVtZW50cyBhcmUgaW1tdXRhYmxlIGFmdGVyIHRoZSBvd25lciBpcyByZW5kZXJlZCxcbiAgICAgIC8vIHdlIGNhbiBkbyBhIGNoZWFwIGlkZW50aXR5IGNvbXBhcmUgaGVyZSB0byBkZXRlcm1pbmUgaWYgdGhpcyBpcyBhXG4gICAgICAvLyBzdXBlcmZsdW91cyByZWNvbmNpbGUuIEl0J3MgcG9zc2libGUgZm9yIHN0YXRlIHRvIGJlIG11dGFibGUgYnV0IHN1Y2hcbiAgICAgIC8vIGNoYW5nZSBzaG91bGQgdHJpZ2dlciBhbiB1cGRhdGUgb2YgdGhlIG93bmVyIHdoaWNoIHdvdWxkIHJlY3JlYXRlXG4gICAgICAvLyB0aGUgZWxlbWVudC4gV2UgZXhwbGljaXRseSBjaGVjayBmb3IgdGhlIGV4aXN0ZW5jZSBvZiBhbiBvd25lciBzaW5jZVxuICAgICAgLy8gaXQncyBwb3NzaWJsZSBmb3IgYW4gZWxlbWVudCBjcmVhdGVkIG91dHNpZGUgYSBjb21wb3NpdGUgdG8gYmVcbiAgICAgIC8vIGRlZXBseSBtdXRhdGVkIGFuZCByZXVzZWQuXG5cbiAgICAgIC8vIFRPRE86IEJhaWxpbmcgb3V0IGVhcmx5IGlzIGp1c3QgYSBwZXJmIG9wdGltaXphdGlvbiByaWdodD9cbiAgICAgIC8vIFRPRE86IFJlbW92aW5nIHRoZSByZXR1cm4gc3RhdGVtZW50IHNob3VsZCBhZmZlY3QgY29ycmVjdG5lc3M/XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIHJlZnNDaGFuZ2VkID0gUmVhY3RSZWYuc2hvdWxkVXBkYXRlUmVmcyhwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQpO1xuXG4gICAgaWYgKHJlZnNDaGFuZ2VkKSB7XG4gICAgICBSZWFjdFJlZi5kZXRhY2hSZWZzKGludGVybmFsSW5zdGFuY2UsIHByZXZFbGVtZW50KTtcbiAgICB9XG5cbiAgICBpbnRlcm5hbEluc3RhbmNlLnJlY2VpdmVDb21wb25lbnQobmV4dEVsZW1lbnQsIHRyYW5zYWN0aW9uLCBjb250ZXh0KTtcblxuICAgIGlmIChyZWZzQ2hhbmdlZCAmJiBpbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudCAmJiBpbnRlcm5hbEluc3RhbmNlLl9jdXJyZW50RWxlbWVudC5yZWYgIT0gbnVsbCkge1xuICAgICAgdHJhbnNhY3Rpb24uZ2V0UmVhY3RNb3VudFJlYWR5KCkuZW5xdWV1ZShhdHRhY2hSZWZzLCBpbnRlcm5hbEluc3RhbmNlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZsdXNoIGFueSBkaXJ0eSBjaGFuZ2VzIGluIGEgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q29tcG9uZW50fSBpbnRlcm5hbEluc3RhbmNlXG4gICAqIEBwYXJhbSB7UmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbn0gdHJhbnNhY3Rpb25cbiAgICogQGludGVybmFsXG4gICAqL1xuICBwZXJmb3JtVXBkYXRlSWZOZWNlc3Nhcnk6IGZ1bmN0aW9uIChpbnRlcm5hbEluc3RhbmNlLCB0cmFuc2FjdGlvbikge1xuICAgIGludGVybmFsSW5zdGFuY2UucGVyZm9ybVVwZGF0ZUlmTmVjZXNzYXJ5KHRyYW5zYWN0aW9uKTtcbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0UmVjb25jaWxlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RSZWZcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdE93bmVyJyk7XG5cbnZhciBSZWFjdFJlZiA9IHt9O1xuXG5mdW5jdGlvbiBhdHRhY2hSZWYocmVmLCBjb21wb25lbnQsIG93bmVyKSB7XG4gIGlmICh0eXBlb2YgcmVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmVmKGNvbXBvbmVudC5nZXRQdWJsaWNJbnN0YW5jZSgpKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBMZWdhY3kgcmVmXG4gICAgUmVhY3RPd25lci5hZGRDb21wb25lbnRBc1JlZlRvKGNvbXBvbmVudCwgcmVmLCBvd25lcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gZGV0YWNoUmVmKHJlZiwgY29tcG9uZW50LCBvd25lcikge1xuICBpZiAodHlwZW9mIHJlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJlZihudWxsKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBMZWdhY3kgcmVmXG4gICAgUmVhY3RPd25lci5yZW1vdmVDb21wb25lbnRBc1JlZkZyb20oY29tcG9uZW50LCByZWYsIG93bmVyKTtcbiAgfVxufVxuXG5SZWFjdFJlZi5hdHRhY2hSZWZzID0gZnVuY3Rpb24gKGluc3RhbmNlLCBlbGVtZW50KSB7XG4gIGlmIChlbGVtZW50ID09PSBudWxsIHx8IGVsZW1lbnQgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciByZWYgPSBlbGVtZW50LnJlZjtcbiAgaWYgKHJlZiAhPSBudWxsKSB7XG4gICAgYXR0YWNoUmVmKHJlZiwgaW5zdGFuY2UsIGVsZW1lbnQuX293bmVyKTtcbiAgfVxufTtcblxuUmVhY3RSZWYuc2hvdWxkVXBkYXRlUmVmcyA9IGZ1bmN0aW9uIChwcmV2RWxlbWVudCwgbmV4dEVsZW1lbnQpIHtcbiAgLy8gSWYgZWl0aGVyIHRoZSBvd25lciBvciBhIGByZWZgIGhhcyBjaGFuZ2VkLCBtYWtlIHN1cmUgdGhlIG5ld2VzdCBvd25lclxuICAvLyBoYXMgc3RvcmVkIGEgcmVmZXJlbmNlIHRvIGB0aGlzYCwgYW5kIHRoZSBwcmV2aW91cyBvd25lciAoaWYgZGlmZmVyZW50KVxuICAvLyBoYXMgZm9yZ290dGVuIHRoZSByZWZlcmVuY2UgdG8gYHRoaXNgLiBXZSB1c2UgdGhlIGVsZW1lbnQgaW5zdGVhZFxuICAvLyBvZiB0aGUgcHVibGljIHRoaXMucHJvcHMgYmVjYXVzZSB0aGUgcG9zdCBwcm9jZXNzaW5nIGNhbm5vdCBkZXRlcm1pbmVcbiAgLy8gYSByZWYuIFRoZSByZWYgY29uY2VwdHVhbGx5IGxpdmVzIG9uIHRoZSBlbGVtZW50LlxuXG4gIC8vIFRPRE86IFNob3VsZCB0aGlzIGV2ZW4gYmUgcG9zc2libGU/IFRoZSBvd25lciBjYW5ub3QgY2hhbmdlIGJlY2F1c2VcbiAgLy8gaXQncyBmb3JiaWRkZW4gYnkgc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQuIFRoZSByZWYgY2FuIGNoYW5nZVxuICAvLyBpZiB5b3Ugc3dhcCB0aGUga2V5cyBvZiBidXQgbm90IHRoZSByZWZzLiBSZWNvbnNpZGVyIHdoZXJlIHRoaXMgY2hlY2tcbiAgLy8gaXMgbWFkZS4gSXQgcHJvYmFibHkgYmVsb25ncyB3aGVyZSB0aGUga2V5IGNoZWNraW5nIGFuZFxuICAvLyBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50IGlzIGRvbmUuXG5cbiAgdmFyIHByZXZFbXB0eSA9IHByZXZFbGVtZW50ID09PSBudWxsIHx8IHByZXZFbGVtZW50ID09PSBmYWxzZTtcbiAgdmFyIG5leHRFbXB0eSA9IG5leHRFbGVtZW50ID09PSBudWxsIHx8IG5leHRFbGVtZW50ID09PSBmYWxzZTtcblxuICByZXR1cm4oXG4gICAgLy8gVGhpcyBoYXMgYSBmZXcgZmFsc2UgcG9zaXRpdmVzIHcvci90IGVtcHR5IGNvbXBvbmVudHMuXG4gICAgcHJldkVtcHR5IHx8IG5leHRFbXB0eSB8fCBuZXh0RWxlbWVudC5fb3duZXIgIT09IHByZXZFbGVtZW50Ll9vd25lciB8fCBuZXh0RWxlbWVudC5yZWYgIT09IHByZXZFbGVtZW50LnJlZlxuICApO1xufTtcblxuUmVhY3RSZWYuZGV0YWNoUmVmcyA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgZWxlbWVudCkge1xuICBpZiAoZWxlbWVudCA9PT0gbnVsbCB8fCBlbGVtZW50ID09PSBmYWxzZSkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgcmVmID0gZWxlbWVudC5yZWY7XG4gIGlmIChyZWYgIT0gbnVsbCkge1xuICAgIGRldGFjaFJlZihyZWYsIGluc3RhbmNlLCBlbGVtZW50Ll9vd25lcik7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RSZWY7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFJlYWN0Um9vdEluZGV4XG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Um9vdEluZGV4SW5qZWN0aW9uID0ge1xuICAvKipcbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gX2NyZWF0ZVJlYWN0Um9vdEluZGV4XG4gICAqL1xuICBpbmplY3RDcmVhdGVSZWFjdFJvb3RJbmRleDogZnVuY3Rpb24gKF9jcmVhdGVSZWFjdFJvb3RJbmRleCkge1xuICAgIFJlYWN0Um9vdEluZGV4LmNyZWF0ZVJlYWN0Um9vdEluZGV4ID0gX2NyZWF0ZVJlYWN0Um9vdEluZGV4O1xuICB9XG59O1xuXG52YXIgUmVhY3RSb290SW5kZXggPSB7XG4gIGNyZWF0ZVJlYWN0Um9vdEluZGV4OiBudWxsLFxuICBpbmplY3Rpb246IFJlYWN0Um9vdEluZGV4SW5qZWN0aW9uXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0Um9vdEluZGV4OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFNlcnZlckJhdGNoaW5nU3RyYXRlZ3lcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5ID0ge1xuICBpc0JhdGNoaW5nVXBkYXRlczogZmFsc2UsXG4gIGJhdGNoZWRVcGRhdGVzOiBmdW5jdGlvbiAoY2FsbGJhY2spIHtcbiAgICAvLyBEb24ndCBkbyBhbnl0aGluZyBoZXJlLiBEdXJpbmcgdGhlIHNlcnZlciByZW5kZXJpbmcgd2UgZG9uJ3Qgd2FudCB0b1xuICAgIC8vIHNjaGVkdWxlIGFueSB1cGRhdGVzLiBXZSB3aWxsIHNpbXBseSBpZ25vcmUgdGhlbS5cbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBSZWFjdFNlcnZlckJhdGNoaW5nU3RyYXRlZ3k7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFNlcnZlclJlbmRlcmluZ1xuICovXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5ID0gcmVxdWlyZSgnLi9SZWFjdERlZmF1bHRCYXRjaGluZ1N0cmF0ZWd5Jyk7XG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdEluc3RhbmNlSGFuZGxlcyA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZUhhbmRsZXMnKTtcbnZhciBSZWFjdE1hcmt1cENoZWNrc3VtID0gcmVxdWlyZSgnLi9SZWFjdE1hcmt1cENoZWNrc3VtJyk7XG52YXIgUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5ID0gcmVxdWlyZSgnLi9SZWFjdFNlcnZlckJhdGNoaW5nU3RyYXRlZ3knKTtcbnZhciBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uID0gcmVxdWlyZSgnLi9SZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uJyk7XG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcblxudmFyIGVtcHR5T2JqZWN0ID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlPYmplY3QnKTtcbnZhciBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50ID0gcmVxdWlyZSgnLi9pbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50Jyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogQHBhcmFtIHtSZWFjdEVsZW1lbnR9IGVsZW1lbnRcbiAqIEByZXR1cm4ge3N0cmluZ30gdGhlIEhUTUwgbWFya3VwXG4gKi9cbmZ1bmN0aW9uIHJlbmRlclRvU3RyaW5nKGVsZW1lbnQpIHtcbiAgIVJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChlbGVtZW50KSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdyZW5kZXJUb1N0cmluZygpOiBZb3UgbXVzdCBwYXNzIGEgdmFsaWQgUmVhY3RFbGVtZW50LicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICB2YXIgdHJhbnNhY3Rpb247XG4gIHRyeSB7XG4gICAgUmVhY3RVcGRhdGVzLmluamVjdGlvbi5pbmplY3RCYXRjaGluZ1N0cmF0ZWd5KFJlYWN0U2VydmVyQmF0Y2hpbmdTdHJhdGVneSk7XG5cbiAgICB2YXIgaWQgPSBSZWFjdEluc3RhbmNlSGFuZGxlcy5jcmVhdGVSZWFjdFJvb3RJRCgpO1xuICAgIHRyYW5zYWN0aW9uID0gUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbi5nZXRQb29sZWQoZmFsc2UpO1xuXG4gICAgcmV0dXJuIHRyYW5zYWN0aW9uLnBlcmZvcm0oZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGNvbXBvbmVudEluc3RhbmNlID0gaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudChlbGVtZW50LCBudWxsKTtcbiAgICAgIHZhciBtYXJrdXAgPSBjb21wb25lbnRJbnN0YW5jZS5tb3VudENvbXBvbmVudChpZCwgdHJhbnNhY3Rpb24sIGVtcHR5T2JqZWN0KTtcbiAgICAgIHJldHVybiBSZWFjdE1hcmt1cENoZWNrc3VtLmFkZENoZWNrc3VtVG9NYXJrdXAobWFya3VwKTtcbiAgICB9LCBudWxsKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uLnJlbGVhc2UodHJhbnNhY3Rpb24pO1xuICAgIC8vIFJldmVydCB0byB0aGUgRE9NIGJhdGNoaW5nIHN0cmF0ZWd5IHNpbmNlIHRoZXNlIHR3byByZW5kZXJlcnNcbiAgICAvLyBjdXJyZW50bHkgc2hhcmUgdGhlc2Ugc3RhdGVmdWwgbW9kdWxlcy5cbiAgICBSZWFjdFVwZGF0ZXMuaW5qZWN0aW9uLmluamVjdEJhdGNoaW5nU3RyYXRlZ3koUmVhY3REZWZhdWx0QmF0Y2hpbmdTdHJhdGVneSk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0ge1JlYWN0RWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7c3RyaW5nfSB0aGUgSFRNTCBtYXJrdXAsIHdpdGhvdXQgdGhlIGV4dHJhIFJlYWN0IElEIGFuZCBjaGVja3N1bVxuICogKGZvciBnZW5lcmF0aW5nIHN0YXRpYyBwYWdlcylcbiAqL1xuZnVuY3Rpb24gcmVuZGVyVG9TdGF0aWNNYXJrdXAoZWxlbWVudCkge1xuICAhUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KGVsZW1lbnQpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ3JlbmRlclRvU3RhdGljTWFya3VwKCk6IFlvdSBtdXN0IHBhc3MgYSB2YWxpZCBSZWFjdEVsZW1lbnQuJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gIHZhciB0cmFuc2FjdGlvbjtcbiAgdHJ5IHtcbiAgICBSZWFjdFVwZGF0ZXMuaW5qZWN0aW9uLmluamVjdEJhdGNoaW5nU3RyYXRlZ3koUmVhY3RTZXJ2ZXJCYXRjaGluZ1N0cmF0ZWd5KTtcblxuICAgIHZhciBpZCA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLmNyZWF0ZVJlYWN0Um9vdElEKCk7XG4gICAgdHJhbnNhY3Rpb24gPSBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uLmdldFBvb2xlZCh0cnVlKTtcblxuICAgIHJldHVybiB0cmFuc2FjdGlvbi5wZXJmb3JtKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBjb21wb25lbnRJbnN0YW5jZSA9IGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnQoZWxlbWVudCwgbnVsbCk7XG4gICAgICByZXR1cm4gY29tcG9uZW50SW5zdGFuY2UubW91bnRDb21wb25lbnQoaWQsIHRyYW5zYWN0aW9uLCBlbXB0eU9iamVjdCk7XG4gICAgfSwgbnVsbCk7XG4gIH0gZmluYWxseSB7XG4gICAgUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvbi5yZWxlYXNlKHRyYW5zYWN0aW9uKTtcbiAgICAvLyBSZXZlcnQgdG8gdGhlIERPTSBiYXRjaGluZyBzdHJhdGVneSBzaW5jZSB0aGVzZSB0d28gcmVuZGVyZXJzXG4gICAgLy8gY3VycmVudGx5IHNoYXJlIHRoZXNlIHN0YXRlZnVsIG1vZHVsZXMuXG4gICAgUmVhY3RVcGRhdGVzLmluamVjdGlvbi5pbmplY3RCYXRjaGluZ1N0cmF0ZWd5KFJlYWN0RGVmYXVsdEJhdGNoaW5nU3RyYXRlZ3kpO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICByZW5kZXJUb1N0cmluZzogcmVuZGVyVG9TdHJpbmcsXG4gIHJlbmRlclRvU3RhdGljTWFya3VwOiByZW5kZXJUb1N0YXRpY01hcmt1cFxufTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE0LTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RTZXJ2ZXJSZW5kZXJpbmdUcmFuc2FjdGlvblxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBQb29sZWRDbGFzcyA9IHJlcXVpcmUoJy4vUG9vbGVkQ2xhc3MnKTtcbnZhciBDYWxsYmFja1F1ZXVlID0gcmVxdWlyZSgnLi9DYWxsYmFja1F1ZXVlJyk7XG52YXIgVHJhbnNhY3Rpb24gPSByZXF1aXJlKCcuL1RyYW5zYWN0aW9uJyk7XG5cbnZhciBhc3NpZ24gPSByZXF1aXJlKCcuL09iamVjdC5hc3NpZ24nKTtcbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlGdW5jdGlvbicpO1xuXG4vKipcbiAqIFByb3ZpZGVzIGEgYENhbGxiYWNrUXVldWVgIHF1ZXVlIGZvciBjb2xsZWN0aW5nIGBvbkRPTVJlYWR5YCBjYWxsYmFja3NcbiAqIGR1cmluZyB0aGUgcGVyZm9ybWluZyBvZiB0aGUgdHJhbnNhY3Rpb24uXG4gKi9cbnZhciBPTl9ET01fUkVBRFlfUVVFVUVJTkcgPSB7XG4gIC8qKlxuICAgKiBJbml0aWFsaXplcyB0aGUgaW50ZXJuYWwgYG9uRE9NUmVhZHlgIHF1ZXVlLlxuICAgKi9cbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucmVhY3RNb3VudFJlYWR5LnJlc2V0KCk7XG4gIH0sXG5cbiAgY2xvc2U6IGVtcHR5RnVuY3Rpb25cbn07XG5cbi8qKlxuICogRXhlY3V0ZWQgd2l0aGluIHRoZSBzY29wZSBvZiB0aGUgYFRyYW5zYWN0aW9uYCBpbnN0YW5jZS4gQ29uc2lkZXIgdGhlc2UgYXNcbiAqIGJlaW5nIG1lbWJlciBtZXRob2RzLCBidXQgd2l0aCBhbiBpbXBsaWVkIG9yZGVyaW5nIHdoaWxlIGJlaW5nIGlzb2xhdGVkIGZyb21cbiAqIGVhY2ggb3RoZXIuXG4gKi9cbnZhciBUUkFOU0FDVElPTl9XUkFQUEVSUyA9IFtPTl9ET01fUkVBRFlfUVVFVUVJTkddO1xuXG4vKipcbiAqIEBjbGFzcyBSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHJlbmRlclRvU3RhdGljTWFya3VwXG4gKi9cbmZ1bmN0aW9uIFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb24ocmVuZGVyVG9TdGF0aWNNYXJrdXApIHtcbiAgdGhpcy5yZWluaXRpYWxpemVUcmFuc2FjdGlvbigpO1xuICB0aGlzLnJlbmRlclRvU3RhdGljTWFya3VwID0gcmVuZGVyVG9TdGF0aWNNYXJrdXA7XG4gIHRoaXMucmVhY3RNb3VudFJlYWR5ID0gQ2FsbGJhY2tRdWV1ZS5nZXRQb29sZWQobnVsbCk7XG4gIHRoaXMudXNlQ3JlYXRlRWxlbWVudCA9IGZhbHNlO1xufVxuXG52YXIgTWl4aW4gPSB7XG4gIC8qKlxuICAgKiBAc2VlIFRyYW5zYWN0aW9uXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAZmluYWxcbiAgICogQHJldHVybiB7YXJyYXl9IEVtcHR5IGxpc3Qgb2Ygb3BlcmF0aW9uIHdyYXAgcHJvY2VkdXJlcy5cbiAgICovXG4gIGdldFRyYW5zYWN0aW9uV3JhcHBlcnM6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gVFJBTlNBQ1RJT05fV1JBUFBFUlM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge29iamVjdH0gVGhlIHF1ZXVlIHRvIGNvbGxlY3QgYG9uRE9NUmVhZHlgIGNhbGxiYWNrcyB3aXRoLlxuICAgKi9cbiAgZ2V0UmVhY3RNb3VudFJlYWR5OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVhY3RNb3VudFJlYWR5O1xuICB9LFxuXG4gIC8qKlxuICAgKiBgUG9vbGVkQ2xhc3NgIGxvb2tzIGZvciB0aGlzLCBhbmQgd2lsbCBpbnZva2UgdGhpcyBiZWZvcmUgYWxsb3dpbmcgdGhpc1xuICAgKiBpbnN0YW5jZSB0byBiZSByZXVzZWQuXG4gICAqL1xuICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG4gICAgQ2FsbGJhY2tRdWV1ZS5yZWxlYXNlKHRoaXMucmVhY3RNb3VudFJlYWR5KTtcbiAgICB0aGlzLnJlYWN0TW91bnRSZWFkeSA9IG51bGw7XG4gIH1cbn07XG5cbmFzc2lnbihSZWFjdFNlcnZlclJlbmRlcmluZ1RyYW5zYWN0aW9uLnByb3RvdHlwZSwgVHJhbnNhY3Rpb24uTWl4aW4sIE1peGluKTtcblxuUG9vbGVkQ2xhc3MuYWRkUG9vbGluZ1RvKFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb24pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0U2VydmVyUmVuZGVyaW5nVHJhbnNhY3Rpb247IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBSZWFjdFVwZGF0ZVF1ZXVlXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSByZXF1aXJlKCcuL1JlYWN0Q3VycmVudE93bmVyJyk7XG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcbnZhciBSZWFjdEluc3RhbmNlTWFwID0gcmVxdWlyZSgnLi9SZWFjdEluc3RhbmNlTWFwJyk7XG52YXIgUmVhY3RVcGRhdGVzID0gcmVxdWlyZSgnLi9SZWFjdFVwZGF0ZXMnKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbmZ1bmN0aW9uIGVucXVldWVVcGRhdGUoaW50ZXJuYWxJbnN0YW5jZSkge1xuICBSZWFjdFVwZGF0ZXMuZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKTtcbn1cblxuZnVuY3Rpb24gZ2V0SW50ZXJuYWxJbnN0YW5jZVJlYWR5Rm9yVXBkYXRlKHB1YmxpY0luc3RhbmNlLCBjYWxsZXJOYW1lKSB7XG4gIHZhciBpbnRlcm5hbEluc3RhbmNlID0gUmVhY3RJbnN0YW5jZU1hcC5nZXQocHVibGljSW5zdGFuY2UpO1xuICBpZiAoIWludGVybmFsSW5zdGFuY2UpIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gT25seSB3YXJuIHdoZW4gd2UgaGF2ZSBhIGNhbGxlck5hbWUuIE90aGVyd2lzZSB3ZSBzaG91bGQgYmUgc2lsZW50LlxuICAgICAgLy8gV2UncmUgcHJvYmFibHkgY2FsbGluZyBmcm9tIGVucXVldWVDYWxsYmFjay4gV2UgZG9uJ3Qgd2FudCB0byB3YXJuXG4gICAgICAvLyB0aGVyZSBiZWNhdXNlIHdlIGFscmVhZHkgd2FybmVkIGZvciB0aGUgY29ycmVzcG9uZGluZyBsaWZlY3ljbGUgbWV0aG9kLlxuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoIWNhbGxlck5hbWUsICclcyguLi4pOiBDYW4gb25seSB1cGRhdGUgYSBtb3VudGVkIG9yIG1vdW50aW5nIGNvbXBvbmVudC4gJyArICdUaGlzIHVzdWFsbHkgbWVhbnMgeW91IGNhbGxlZCAlcygpIG9uIGFuIHVubW91bnRlZCBjb21wb25lbnQuICcgKyAnVGhpcyBpcyBhIG5vLW9wLiBQbGVhc2UgY2hlY2sgdGhlIGNvZGUgZm9yIHRoZSAlcyBjb21wb25lbnQuJywgY2FsbGVyTmFtZSwgY2FsbGVyTmFtZSwgcHVibGljSW5zdGFuY2UuY29uc3RydWN0b3IuZGlzcGxheU5hbWUpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoUmVhY3RDdXJyZW50T3duZXIuY3VycmVudCA9PSBudWxsLCAnJXMoLi4uKTogQ2Fubm90IHVwZGF0ZSBkdXJpbmcgYW4gZXhpc3Rpbmcgc3RhdGUgdHJhbnNpdGlvbiAnICsgJyhzdWNoIGFzIHdpdGhpbiBgcmVuZGVyYCkuIFJlbmRlciBtZXRob2RzIHNob3VsZCBiZSBhIHB1cmUgZnVuY3Rpb24gJyArICdvZiBwcm9wcyBhbmQgc3RhdGUuJywgY2FsbGVyTmFtZSkgOiB1bmRlZmluZWQ7XG4gIH1cblxuICByZXR1cm4gaW50ZXJuYWxJbnN0YW5jZTtcbn1cblxuLyoqXG4gKiBSZWFjdFVwZGF0ZVF1ZXVlIGFsbG93cyBmb3Igc3RhdGUgdXBkYXRlcyB0byBiZSBzY2hlZHVsZWQgaW50byBhIGxhdGVyXG4gKiByZWNvbmNpbGlhdGlvbiBzdGVwLlxuICovXG52YXIgUmVhY3RVcGRhdGVRdWV1ZSA9IHtcblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgb3Igbm90IHRoaXMgY29tcG9zaXRlIGNvbXBvbmVudCBpcyBtb3VudGVkLlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB3ZSB3YW50IHRvIHRlc3QuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgbW91bnRlZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEBmaW5hbFxuICAgKi9cbiAgaXNNb3VudGVkOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UpIHtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFyIG93bmVyID0gUmVhY3RDdXJyZW50T3duZXIuY3VycmVudDtcbiAgICAgIGlmIChvd25lciAhPT0gbnVsbCkge1xuICAgICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhvd25lci5fd2FybmVkQWJvdXRSZWZzSW5SZW5kZXIsICclcyBpcyBhY2Nlc3NpbmcgaXNNb3VudGVkIGluc2lkZSBpdHMgcmVuZGVyKCkgZnVuY3Rpb24uICcgKyAncmVuZGVyKCkgc2hvdWxkIGJlIGEgcHVyZSBmdW5jdGlvbiBvZiBwcm9wcyBhbmQgc3RhdGUuIEl0IHNob3VsZCAnICsgJ25ldmVyIGFjY2VzcyBzb21ldGhpbmcgdGhhdCByZXF1aXJlcyBzdGFsZSBkYXRhIGZyb20gdGhlIHByZXZpb3VzICcgKyAncmVuZGVyLCBzdWNoIGFzIHJlZnMuIE1vdmUgdGhpcyBsb2dpYyB0byBjb21wb25lbnREaWRNb3VudCBhbmQgJyArICdjb21wb25lbnREaWRVcGRhdGUgaW5zdGVhZC4nLCBvd25lci5nZXROYW1lKCkgfHwgJ0EgY29tcG9uZW50JykgOiB1bmRlZmluZWQ7XG4gICAgICAgIG93bmVyLl93YXJuZWRBYm91dFJlZnNJblJlbmRlciA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBpbnRlcm5hbEluc3RhbmNlID0gUmVhY3RJbnN0YW5jZU1hcC5nZXQocHVibGljSW5zdGFuY2UpO1xuICAgIGlmIChpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgICAvLyBEdXJpbmcgY29tcG9uZW50V2lsbE1vdW50IGFuZCByZW5kZXIgdGhpcyB3aWxsIHN0aWxsIGJlIG51bGwgYnV0IGFmdGVyXG4gICAgICAvLyB0aGF0IHdpbGwgYWx3YXlzIHJlbmRlciB0byBzb21ldGhpbmcuIEF0IGxlYXN0IGZvciBub3cuIFNvIHdlIGNhbiB1c2VcbiAgICAgIC8vIHRoaXMgaGFjay5cbiAgICAgIHJldHVybiAhIWludGVybmFsSW5zdGFuY2UuX3JlbmRlcmVkQ29tcG9uZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBFbnF1ZXVlIGEgY2FsbGJhY2sgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIGFmdGVyIGFsbCB0aGUgcGVuZGluZyB1cGRhdGVzXG4gICAqIGhhdmUgcHJvY2Vzc2VkLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0byB1c2UgYXMgYHRoaXNgIGNvbnRleHQuXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsZWQgYWZ0ZXIgc3RhdGUgaXMgdXBkYXRlZC5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlQ2FsbGJhY2s6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgY2FsbGJhY2spIHtcbiAgICAhKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnZW5xdWV1ZUNhbGxiYWNrKC4uLik6IFlvdSBjYWxsZWQgYHNldFByb3BzYCwgYHJlcGxhY2VQcm9wc2AsICcgKyAnYHNldFN0YXRlYCwgYHJlcGxhY2VTdGF0ZWAsIG9yIGBmb3JjZVVwZGF0ZWAgd2l0aCBhIGNhbGxiYWNrIHRoYXQgJyArICdpc25cXCd0IGNhbGxhYmxlLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IGdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZShwdWJsaWNJbnN0YW5jZSk7XG5cbiAgICAvLyBQcmV2aW91c2x5IHdlIHdvdWxkIHRocm93IGFuIGVycm9yIGlmIHdlIGRpZG4ndCBoYXZlIGFuIGludGVybmFsXG4gICAgLy8gaW5zdGFuY2UuIFNpbmNlIHdlIHdhbnQgdG8gbWFrZSBpdCBhIG5vLW9wIGluc3RlYWQsIHdlIG1pcnJvciB0aGUgc2FtZVxuICAgIC8vIGJlaGF2aW9yIHdlIGhhdmUgaW4gb3RoZXIgZW5xdWV1ZSogbWV0aG9kcy5cbiAgICAvLyBXZSBhbHNvIG5lZWQgdG8gaWdub3JlIGNhbGxiYWNrcyBpbiBjb21wb25lbnRXaWxsTW91bnQuIFNlZVxuICAgIC8vIGVucXVldWVVcGRhdGVzLlxuICAgIGlmICghaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgaWYgKGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdDYWxsYmFja3MpIHtcbiAgICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdDYWxsYmFja3MgPSBbY2FsbGJhY2tdO1xuICAgIH1cbiAgICAvLyBUT0RPOiBUaGUgY2FsbGJhY2sgaGVyZSBpcyBpZ25vcmVkIHdoZW4gc2V0U3RhdGUgaXMgY2FsbGVkIGZyb21cbiAgICAvLyBjb21wb25lbnRXaWxsTW91bnQuIEVpdGhlciBmaXggaXQgb3IgZGlzYWxsb3cgZG9pbmcgc28gY29tcGxldGVseSBpblxuICAgIC8vIGZhdm9yIG9mIGdldEluaXRpYWxTdGF0ZS4gQWx0ZXJuYXRpdmVseSwgd2UgY2FuIGRpc2FsbG93XG4gICAgLy8gY29tcG9uZW50V2lsbE1vdW50IGR1cmluZyBzZXJ2ZXItc2lkZSByZW5kZXJpbmcuXG4gICAgZW5xdWV1ZVVwZGF0ZShpbnRlcm5hbEluc3RhbmNlKTtcbiAgfSxcblxuICBlbnF1ZXVlQ2FsbGJhY2tJbnRlcm5hbDogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UsIGNhbGxiYWNrKSB7XG4gICAgISh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2VucXVldWVDYWxsYmFjayguLi4pOiBZb3UgY2FsbGVkIGBzZXRQcm9wc2AsIGByZXBsYWNlUHJvcHNgLCAnICsgJ2BzZXRTdGF0ZWAsIGByZXBsYWNlU3RhdGVgLCBvciBgZm9yY2VVcGRhdGVgIHdpdGggYSBjYWxsYmFjayB0aGF0ICcgKyAnaXNuXFwndCBjYWxsYWJsZS4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgaWYgKGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdDYWxsYmFja3MpIHtcbiAgICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdDYWxsYmFja3MgPSBbY2FsbGJhY2tdO1xuICAgIH1cbiAgICBlbnF1ZXVlVXBkYXRlKGludGVybmFsSW5zdGFuY2UpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBGb3JjZXMgYW4gdXBkYXRlLiBUaGlzIHNob3VsZCBvbmx5IGJlIGludm9rZWQgd2hlbiBpdCBpcyBrbm93biB3aXRoXG4gICAqIGNlcnRhaW50eSB0aGF0IHdlIGFyZSAqKm5vdCoqIGluIGEgRE9NIHRyYW5zYWN0aW9uLlxuICAgKlxuICAgKiBZb3UgbWF5IHdhbnQgdG8gY2FsbCB0aGlzIHdoZW4geW91IGtub3cgdGhhdCBzb21lIGRlZXBlciBhc3BlY3Qgb2YgdGhlXG4gICAqIGNvbXBvbmVudCdzIHN0YXRlIGhhcyBjaGFuZ2VkIGJ1dCBgc2V0U3RhdGVgIHdhcyBub3QgY2FsbGVkLlxuICAgKlxuICAgKiBUaGlzIHdpbGwgbm90IGludm9rZSBgc2hvdWxkQ29tcG9uZW50VXBkYXRlYCwgYnV0IGl0IHdpbGwgaW52b2tlXG4gICAqIGBjb21wb25lbnRXaWxsVXBkYXRlYCBhbmQgYGNvbXBvbmVudERpZFVwZGF0ZWAuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVGb3JjZVVwZGF0ZTogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlKSB7XG4gICAgdmFyIGludGVybmFsSW5zdGFuY2UgPSBnZXRJbnRlcm5hbEluc3RhbmNlUmVhZHlGb3JVcGRhdGUocHVibGljSW5zdGFuY2UsICdmb3JjZVVwZGF0ZScpO1xuXG4gICAgaWYgKCFpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ0ZvcmNlVXBkYXRlID0gdHJ1ZTtcblxuICAgIGVucXVldWVVcGRhdGUoaW50ZXJuYWxJbnN0YW5jZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlcGxhY2VzIGFsbCBvZiB0aGUgc3RhdGUuIEFsd2F5cyB1c2UgdGhpcyBvciBgc2V0U3RhdGVgIHRvIG11dGF0ZSBzdGF0ZS5cbiAgICogWW91IHNob3VsZCB0cmVhdCBgdGhpcy5zdGF0ZWAgYXMgaW1tdXRhYmxlLlxuICAgKlxuICAgKiBUaGVyZSBpcyBubyBndWFyYW50ZWUgdGhhdCBgdGhpcy5zdGF0ZWAgd2lsbCBiZSBpbW1lZGlhdGVseSB1cGRhdGVkLCBzb1xuICAgKiBhY2Nlc3NpbmcgYHRoaXMuc3RhdGVgIGFmdGVyIGNhbGxpbmcgdGhpcyBtZXRob2QgbWF5IHJldHVybiB0aGUgb2xkIHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IGNvbXBsZXRlU3RhdGUgTmV4dCBzdGF0ZS5cbiAgICogQGludGVybmFsXG4gICAqL1xuICBlbnF1ZXVlUmVwbGFjZVN0YXRlOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIGNvbXBsZXRlU3RhdGUpIHtcbiAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IGdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZShwdWJsaWNJbnN0YW5jZSwgJ3JlcGxhY2VTdGF0ZScpO1xuXG4gICAgaWYgKCFpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ1N0YXRlUXVldWUgPSBbY29tcGxldGVTdGF0ZV07XG4gICAgaW50ZXJuYWxJbnN0YW5jZS5fcGVuZGluZ1JlcGxhY2VTdGF0ZSA9IHRydWU7XG5cbiAgICBlbnF1ZXVlVXBkYXRlKGludGVybmFsSW5zdGFuY2UpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIGEgc3Vic2V0IG9mIHRoZSBzdGF0ZS4gVGhpcyBvbmx5IGV4aXN0cyBiZWNhdXNlIF9wZW5kaW5nU3RhdGUgaXNcbiAgICogaW50ZXJuYWwuIFRoaXMgcHJvdmlkZXMgYSBtZXJnaW5nIHN0cmF0ZWd5IHRoYXQgaXMgbm90IGF2YWlsYWJsZSB0byBkZWVwXG4gICAqIHByb3BlcnRpZXMgd2hpY2ggaXMgY29uZnVzaW5nLiBUT0RPOiBFeHBvc2UgcGVuZGluZ1N0YXRlIG9yIGRvbid0IHVzZSBpdFxuICAgKiBkdXJpbmcgdGhlIG1lcmdlLlxuICAgKlxuICAgKiBAcGFyYW0ge1JlYWN0Q2xhc3N9IHB1YmxpY0luc3RhbmNlIFRoZSBpbnN0YW5jZSB0aGF0IHNob3VsZCByZXJlbmRlci5cbiAgICogQHBhcmFtIHtvYmplY3R9IHBhcnRpYWxTdGF0ZSBOZXh0IHBhcnRpYWwgc3RhdGUgdG8gYmUgbWVyZ2VkIHdpdGggc3RhdGUuXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgZW5xdWV1ZVNldFN0YXRlOiBmdW5jdGlvbiAocHVibGljSW5zdGFuY2UsIHBhcnRpYWxTdGF0ZSkge1xuICAgIHZhciBpbnRlcm5hbEluc3RhbmNlID0gZ2V0SW50ZXJuYWxJbnN0YW5jZVJlYWR5Rm9yVXBkYXRlKHB1YmxpY0luc3RhbmNlLCAnc2V0U3RhdGUnKTtcblxuICAgIGlmICghaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBxdWV1ZSA9IGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdTdGF0ZVF1ZXVlIHx8IChpbnRlcm5hbEluc3RhbmNlLl9wZW5kaW5nU3RhdGVRdWV1ZSA9IFtdKTtcbiAgICBxdWV1ZS5wdXNoKHBhcnRpYWxTdGF0ZSk7XG5cbiAgICBlbnF1ZXVlVXBkYXRlKGludGVybmFsSW5zdGFuY2UpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTZXRzIGEgc3Vic2V0IG9mIHRoZSBwcm9wcy5cbiAgICpcbiAgICogQHBhcmFtIHtSZWFjdENsYXNzfSBwdWJsaWNJbnN0YW5jZSBUaGUgaW5zdGFuY2UgdGhhdCBzaG91bGQgcmVyZW5kZXIuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBwYXJ0aWFsUHJvcHMgU3Vic2V0IG9mIHRoZSBuZXh0IHByb3BzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVTZXRQcm9wczogZnVuY3Rpb24gKHB1YmxpY0luc3RhbmNlLCBwYXJ0aWFsUHJvcHMpIHtcbiAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IGdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZShwdWJsaWNJbnN0YW5jZSwgJ3NldFByb3BzJyk7XG4gICAgaWYgKCFpbnRlcm5hbEluc3RhbmNlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFJlYWN0VXBkYXRlUXVldWUuZW5xdWV1ZVNldFByb3BzSW50ZXJuYWwoaW50ZXJuYWxJbnN0YW5jZSwgcGFydGlhbFByb3BzKTtcbiAgfSxcblxuICBlbnF1ZXVlU2V0UHJvcHNJbnRlcm5hbDogZnVuY3Rpb24gKGludGVybmFsSW5zdGFuY2UsIHBhcnRpYWxQcm9wcykge1xuICAgIHZhciB0b3BMZXZlbFdyYXBwZXIgPSBpbnRlcm5hbEluc3RhbmNlLl90b3BMZXZlbFdyYXBwZXI7XG4gICAgIXRvcExldmVsV3JhcHBlciA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdzZXRQcm9wcyguLi4pOiBZb3UgY2FsbGVkIGBzZXRQcm9wc2Agb24gYSAnICsgJ2NvbXBvbmVudCB3aXRoIGEgcGFyZW50LiBUaGlzIGlzIGFuIGFudGktcGF0dGVybiBzaW5jZSBwcm9wcyB3aWxsICcgKyAnZ2V0IHJlYWN0aXZlbHkgdXBkYXRlZCB3aGVuIHJlbmRlcmVkLiBJbnN0ZWFkLCBjaGFuZ2UgdGhlIG93bmVyXFwncyAnICsgJ2ByZW5kZXJgIG1ldGhvZCB0byBwYXNzIHRoZSBjb3JyZWN0IHZhbHVlIGFzIHByb3BzIHRvIHRoZSBjb21wb25lbnQgJyArICd3aGVyZSBpdCBpcyBjcmVhdGVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIE1lcmdlIHdpdGggdGhlIHBlbmRpbmcgZWxlbWVudCBpZiBpdCBleGlzdHMsIG90aGVyd2lzZSB3aXRoIGV4aXN0aW5nXG4gICAgLy8gZWxlbWVudCBwcm9wcy5cbiAgICB2YXIgd3JhcEVsZW1lbnQgPSB0b3BMZXZlbFdyYXBwZXIuX3BlbmRpbmdFbGVtZW50IHx8IHRvcExldmVsV3JhcHBlci5fY3VycmVudEVsZW1lbnQ7XG4gICAgdmFyIGVsZW1lbnQgPSB3cmFwRWxlbWVudC5wcm9wcztcbiAgICB2YXIgcHJvcHMgPSBhc3NpZ24oe30sIGVsZW1lbnQucHJvcHMsIHBhcnRpYWxQcm9wcyk7XG4gICAgdG9wTGV2ZWxXcmFwcGVyLl9wZW5kaW5nRWxlbWVudCA9IFJlYWN0RWxlbWVudC5jbG9uZUFuZFJlcGxhY2VQcm9wcyh3cmFwRWxlbWVudCwgUmVhY3RFbGVtZW50LmNsb25lQW5kUmVwbGFjZVByb3BzKGVsZW1lbnQsIHByb3BzKSk7XG5cbiAgICBlbnF1ZXVlVXBkYXRlKHRvcExldmVsV3JhcHBlcik7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlcGxhY2VzIGFsbCBvZiB0aGUgcHJvcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7UmVhY3RDbGFzc30gcHVibGljSW5zdGFuY2UgVGhlIGluc3RhbmNlIHRoYXQgc2hvdWxkIHJlcmVuZGVyLlxuICAgKiBAcGFyYW0ge29iamVjdH0gcHJvcHMgTmV3IHByb3BzLlxuICAgKiBAaW50ZXJuYWxcbiAgICovXG4gIGVucXVldWVSZXBsYWNlUHJvcHM6IGZ1bmN0aW9uIChwdWJsaWNJbnN0YW5jZSwgcHJvcHMpIHtcbiAgICB2YXIgaW50ZXJuYWxJbnN0YW5jZSA9IGdldEludGVybmFsSW5zdGFuY2VSZWFkeUZvclVwZGF0ZShwdWJsaWNJbnN0YW5jZSwgJ3JlcGxhY2VQcm9wcycpO1xuICAgIGlmICghaW50ZXJuYWxJbnN0YW5jZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBSZWFjdFVwZGF0ZVF1ZXVlLmVucXVldWVSZXBsYWNlUHJvcHNJbnRlcm5hbChpbnRlcm5hbEluc3RhbmNlLCBwcm9wcyk7XG4gIH0sXG5cbiAgZW5xdWV1ZVJlcGxhY2VQcm9wc0ludGVybmFsOiBmdW5jdGlvbiAoaW50ZXJuYWxJbnN0YW5jZSwgcHJvcHMpIHtcbiAgICB2YXIgdG9wTGV2ZWxXcmFwcGVyID0gaW50ZXJuYWxJbnN0YW5jZS5fdG9wTGV2ZWxXcmFwcGVyO1xuICAgICF0b3BMZXZlbFdyYXBwZXIgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAncmVwbGFjZVByb3BzKC4uLik6IFlvdSBjYWxsZWQgYHJlcGxhY2VQcm9wc2Agb24gYSAnICsgJ2NvbXBvbmVudCB3aXRoIGEgcGFyZW50LiBUaGlzIGlzIGFuIGFudGktcGF0dGVybiBzaW5jZSBwcm9wcyB3aWxsICcgKyAnZ2V0IHJlYWN0aXZlbHkgdXBkYXRlZCB3aGVuIHJlbmRlcmVkLiBJbnN0ZWFkLCBjaGFuZ2UgdGhlIG93bmVyXFwncyAnICsgJ2ByZW5kZXJgIG1ldGhvZCB0byBwYXNzIHRoZSBjb3JyZWN0IHZhbHVlIGFzIHByb3BzIHRvIHRoZSBjb21wb25lbnQgJyArICd3aGVyZSBpdCBpcyBjcmVhdGVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAgIC8vIE1lcmdlIHdpdGggdGhlIHBlbmRpbmcgZWxlbWVudCBpZiBpdCBleGlzdHMsIG90aGVyd2lzZSB3aXRoIGV4aXN0aW5nXG4gICAgLy8gZWxlbWVudCBwcm9wcy5cbiAgICB2YXIgd3JhcEVsZW1lbnQgPSB0b3BMZXZlbFdyYXBwZXIuX3BlbmRpbmdFbGVtZW50IHx8IHRvcExldmVsV3JhcHBlci5fY3VycmVudEVsZW1lbnQ7XG4gICAgdmFyIGVsZW1lbnQgPSB3cmFwRWxlbWVudC5wcm9wcztcbiAgICB0b3BMZXZlbFdyYXBwZXIuX3BlbmRpbmdFbGVtZW50ID0gUmVhY3RFbGVtZW50LmNsb25lQW5kUmVwbGFjZVByb3BzKHdyYXBFbGVtZW50LCBSZWFjdEVsZW1lbnQuY2xvbmVBbmRSZXBsYWNlUHJvcHMoZWxlbWVudCwgcHJvcHMpKTtcblxuICAgIGVucXVldWVVcGRhdGUodG9wTGV2ZWxXcmFwcGVyKTtcbiAgfSxcblxuICBlbnF1ZXVlRWxlbWVudEludGVybmFsOiBmdW5jdGlvbiAoaW50ZXJuYWxJbnN0YW5jZSwgbmV3RWxlbWVudCkge1xuICAgIGludGVybmFsSW5zdGFuY2UuX3BlbmRpbmdFbGVtZW50ID0gbmV3RWxlbWVudDtcbiAgICBlbnF1ZXVlVXBkYXRlKGludGVybmFsSW5zdGFuY2UpO1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RVcGRhdGVRdWV1ZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RVcGRhdGVzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgQ2FsbGJhY2tRdWV1ZSA9IHJlcXVpcmUoJy4vQ2FsbGJhY2tRdWV1ZScpO1xudmFyIFBvb2xlZENsYXNzID0gcmVxdWlyZSgnLi9Qb29sZWRDbGFzcycpO1xudmFyIFJlYWN0UGVyZiA9IHJlcXVpcmUoJy4vUmVhY3RQZXJmJyk7XG52YXIgUmVhY3RSZWNvbmNpbGVyID0gcmVxdWlyZSgnLi9SZWFjdFJlY29uY2lsZXInKTtcbnZhciBUcmFuc2FjdGlvbiA9IHJlcXVpcmUoJy4vVHJhbnNhY3Rpb24nKTtcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG52YXIgZGlydHlDb21wb25lbnRzID0gW107XG52YXIgYXNhcENhbGxiYWNrUXVldWUgPSBDYWxsYmFja1F1ZXVlLmdldFBvb2xlZCgpO1xudmFyIGFzYXBFbnF1ZXVlZCA9IGZhbHNlO1xuXG52YXIgYmF0Y2hpbmdTdHJhdGVneSA9IG51bGw7XG5cbmZ1bmN0aW9uIGVuc3VyZUluamVjdGVkKCkge1xuICAhKFJlYWN0VXBkYXRlcy5SZWFjdFJlY29uY2lsZVRyYW5zYWN0aW9uICYmIGJhdGNoaW5nU3RyYXRlZ3kpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlczogbXVzdCBpbmplY3QgYSByZWNvbmNpbGUgdHJhbnNhY3Rpb24gY2xhc3MgYW5kIGJhdGNoaW5nICcgKyAnc3RyYXRlZ3knKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG59XG5cbnZhciBORVNURURfVVBEQVRFUyA9IHtcbiAgaW5pdGlhbGl6ZTogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZGlydHlDb21wb25lbnRzTGVuZ3RoID0gZGlydHlDb21wb25lbnRzLmxlbmd0aDtcbiAgfSxcbiAgY2xvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAodGhpcy5kaXJ0eUNvbXBvbmVudHNMZW5ndGggIT09IGRpcnR5Q29tcG9uZW50cy5sZW5ndGgpIHtcbiAgICAgIC8vIEFkZGl0aW9uYWwgdXBkYXRlcyB3ZXJlIGVucXVldWVkIGJ5IGNvbXBvbmVudERpZFVwZGF0ZSBoYW5kbGVycyBvclxuICAgICAgLy8gc2ltaWxhcjsgYmVmb3JlIG91ciBvd24gVVBEQVRFX1FVRVVFSU5HIHdyYXBwZXIgY2xvc2VzLCB3ZSB3YW50IHRvIHJ1blxuICAgICAgLy8gdGhlc2UgbmV3IHVwZGF0ZXMgc28gdGhhdCBpZiBBJ3MgY29tcG9uZW50RGlkVXBkYXRlIGNhbGxzIHNldFN0YXRlIG9uXG4gICAgICAvLyBCLCBCIHdpbGwgdXBkYXRlIGJlZm9yZSB0aGUgY2FsbGJhY2sgQSdzIHVwZGF0ZXIgcHJvdmlkZWQgd2hlbiBjYWxsaW5nXG4gICAgICAvLyBzZXRTdGF0ZS5cbiAgICAgIGRpcnR5Q29tcG9uZW50cy5zcGxpY2UoMCwgdGhpcy5kaXJ0eUNvbXBvbmVudHNMZW5ndGgpO1xuICAgICAgZmx1c2hCYXRjaGVkVXBkYXRlcygpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkaXJ0eUNvbXBvbmVudHMubGVuZ3RoID0gMDtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBVUERBVEVfUVVFVUVJTkcgPSB7XG4gIGluaXRpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNhbGxiYWNrUXVldWUucmVzZXQoKTtcbiAgfSxcbiAgY2xvc2U6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmNhbGxiYWNrUXVldWUubm90aWZ5QWxsKCk7XG4gIH1cbn07XG5cbnZhciBUUkFOU0FDVElPTl9XUkFQUEVSUyA9IFtORVNURURfVVBEQVRFUywgVVBEQVRFX1FVRVVFSU5HXTtcblxuZnVuY3Rpb24gUmVhY3RVcGRhdGVzRmx1c2hUcmFuc2FjdGlvbigpIHtcbiAgdGhpcy5yZWluaXRpYWxpemVUcmFuc2FjdGlvbigpO1xuICB0aGlzLmRpcnR5Q29tcG9uZW50c0xlbmd0aCA9IG51bGw7XG4gIHRoaXMuY2FsbGJhY2tRdWV1ZSA9IENhbGxiYWNrUXVldWUuZ2V0UG9vbGVkKCk7XG4gIHRoaXMucmVjb25jaWxlVHJhbnNhY3Rpb24gPSBSZWFjdFVwZGF0ZXMuUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5nZXRQb29sZWQoIC8qIGZvcmNlSFRNTCAqL2ZhbHNlKTtcbn1cblxuYXNzaWduKFJlYWN0VXBkYXRlc0ZsdXNoVHJhbnNhY3Rpb24ucHJvdG90eXBlLCBUcmFuc2FjdGlvbi5NaXhpbiwge1xuICBnZXRUcmFuc2FjdGlvbldyYXBwZXJzOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIFRSQU5TQUNUSU9OX1dSQVBQRVJTO1xuICB9LFxuXG4gIGRlc3RydWN0b3I6IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmRpcnR5Q29tcG9uZW50c0xlbmd0aCA9IG51bGw7XG4gICAgQ2FsbGJhY2tRdWV1ZS5yZWxlYXNlKHRoaXMuY2FsbGJhY2tRdWV1ZSk7XG4gICAgdGhpcy5jYWxsYmFja1F1ZXVlID0gbnVsbDtcbiAgICBSZWFjdFVwZGF0ZXMuUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbi5yZWxlYXNlKHRoaXMucmVjb25jaWxlVHJhbnNhY3Rpb24pO1xuICAgIHRoaXMucmVjb25jaWxlVHJhbnNhY3Rpb24gPSBudWxsO1xuICB9LFxuXG4gIHBlcmZvcm06IGZ1bmN0aW9uIChtZXRob2QsIHNjb3BlLCBhKSB7XG4gICAgLy8gRXNzZW50aWFsbHkgY2FsbHMgYHRoaXMucmVjb25jaWxlVHJhbnNhY3Rpb24ucGVyZm9ybShtZXRob2QsIHNjb3BlLCBhKWBcbiAgICAvLyB3aXRoIHRoaXMgdHJhbnNhY3Rpb24ncyB3cmFwcGVycyBhcm91bmQgaXQuXG4gICAgcmV0dXJuIFRyYW5zYWN0aW9uLk1peGluLnBlcmZvcm0uY2FsbCh0aGlzLCB0aGlzLnJlY29uY2lsZVRyYW5zYWN0aW9uLnBlcmZvcm0sIHRoaXMucmVjb25jaWxlVHJhbnNhY3Rpb24sIG1ldGhvZCwgc2NvcGUsIGEpO1xuICB9XG59KTtcblxuUG9vbGVkQ2xhc3MuYWRkUG9vbGluZ1RvKFJlYWN0VXBkYXRlc0ZsdXNoVHJhbnNhY3Rpb24pO1xuXG5mdW5jdGlvbiBiYXRjaGVkVXBkYXRlcyhjYWxsYmFjaywgYSwgYiwgYywgZCwgZSkge1xuICBlbnN1cmVJbmplY3RlZCgpO1xuICBiYXRjaGluZ1N0cmF0ZWd5LmJhdGNoZWRVcGRhdGVzKGNhbGxiYWNrLCBhLCBiLCBjLCBkLCBlKTtcbn1cblxuLyoqXG4gKiBBcnJheSBjb21wYXJhdG9yIGZvciBSZWFjdENvbXBvbmVudHMgYnkgbW91bnQgb3JkZXJpbmcuXG4gKlxuICogQHBhcmFtIHtSZWFjdENvbXBvbmVudH0gYzEgZmlyc3QgY29tcG9uZW50IHlvdSdyZSBjb21wYXJpbmdcbiAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR9IGMyIHNlY29uZCBjb21wb25lbnQgeW91J3JlIGNvbXBhcmluZ1xuICogQHJldHVybiB7bnVtYmVyfSBSZXR1cm4gdmFsdWUgdXNhYmxlIGJ5IEFycmF5LnByb3RvdHlwZS5zb3J0KCkuXG4gKi9cbmZ1bmN0aW9uIG1vdW50T3JkZXJDb21wYXJhdG9yKGMxLCBjMikge1xuICByZXR1cm4gYzEuX21vdW50T3JkZXIgLSBjMi5fbW91bnRPcmRlcjtcbn1cblxuZnVuY3Rpb24gcnVuQmF0Y2hlZFVwZGF0ZXModHJhbnNhY3Rpb24pIHtcbiAgdmFyIGxlbiA9IHRyYW5zYWN0aW9uLmRpcnR5Q29tcG9uZW50c0xlbmd0aDtcbiAgIShsZW4gPT09IGRpcnR5Q29tcG9uZW50cy5sZW5ndGgpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0V4cGVjdGVkIGZsdXNoIHRyYW5zYWN0aW9uXFwncyBzdG9yZWQgZGlydHktY29tcG9uZW50cyBsZW5ndGggKCVzKSB0byAnICsgJ21hdGNoIGRpcnR5LWNvbXBvbmVudHMgYXJyYXkgbGVuZ3RoICglcykuJywgbGVuLCBkaXJ0eUNvbXBvbmVudHMubGVuZ3RoKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgLy8gU2luY2UgcmVjb25jaWxpbmcgYSBjb21wb25lbnQgaGlnaGVyIGluIHRoZSBvd25lciBoaWVyYXJjaHkgdXN1YWxseSAobm90XG4gIC8vIGFsd2F5cyAtLSBzZWUgc2hvdWxkQ29tcG9uZW50VXBkYXRlKCkpIHdpbGwgcmVjb25jaWxlIGNoaWxkcmVuLCByZWNvbmNpbGVcbiAgLy8gdGhlbSBiZWZvcmUgdGhlaXIgY2hpbGRyZW4gYnkgc29ydGluZyB0aGUgYXJyYXkuXG4gIGRpcnR5Q29tcG9uZW50cy5zb3J0KG1vdW50T3JkZXJDb21wYXJhdG9yKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgLy8gSWYgYSBjb21wb25lbnQgaXMgdW5tb3VudGVkIGJlZm9yZSBwZW5kaW5nIGNoYW5nZXMgYXBwbHksIGl0IHdpbGwgc3RpbGxcbiAgICAvLyBiZSBoZXJlLCBidXQgd2UgYXNzdW1lIHRoYXQgaXQgaGFzIGNsZWFyZWQgaXRzIF9wZW5kaW5nQ2FsbGJhY2tzIGFuZFxuICAgIC8vIHRoYXQgcGVyZm9ybVVwZGF0ZUlmTmVjZXNzYXJ5IGlzIGEgbm9vcC5cbiAgICB2YXIgY29tcG9uZW50ID0gZGlydHlDb21wb25lbnRzW2ldO1xuXG4gICAgLy8gSWYgcGVyZm9ybVVwZGF0ZUlmTmVjZXNzYXJ5IGhhcHBlbnMgdG8gZW5xdWV1ZSBhbnkgbmV3IHVwZGF0ZXMsIHdlXG4gICAgLy8gc2hvdWxkbid0IGV4ZWN1dGUgdGhlIGNhbGxiYWNrcyB1bnRpbCB0aGUgbmV4dCByZW5kZXIgaGFwcGVucywgc29cbiAgICAvLyBzdGFzaCB0aGUgY2FsbGJhY2tzIGZpcnN0XG4gICAgdmFyIGNhbGxiYWNrcyA9IGNvbXBvbmVudC5fcGVuZGluZ0NhbGxiYWNrcztcbiAgICBjb21wb25lbnQuX3BlbmRpbmdDYWxsYmFja3MgPSBudWxsO1xuXG4gICAgUmVhY3RSZWNvbmNpbGVyLnBlcmZvcm1VcGRhdGVJZk5lY2Vzc2FyeShjb21wb25lbnQsIHRyYW5zYWN0aW9uLnJlY29uY2lsZVRyYW5zYWN0aW9uKTtcblxuICAgIGlmIChjYWxsYmFja3MpIHtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgY2FsbGJhY2tzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHRyYW5zYWN0aW9uLmNhbGxiYWNrUXVldWUuZW5xdWV1ZShjYWxsYmFja3Nbal0sIGNvbXBvbmVudC5nZXRQdWJsaWNJbnN0YW5jZSgpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxudmFyIGZsdXNoQmF0Y2hlZFVwZGF0ZXMgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIFJlYWN0VXBkYXRlc0ZsdXNoVHJhbnNhY3Rpb24ncyB3cmFwcGVycyB3aWxsIGNsZWFyIHRoZSBkaXJ0eUNvbXBvbmVudHNcbiAgLy8gYXJyYXkgYW5kIHBlcmZvcm0gYW55IHVwZGF0ZXMgZW5xdWV1ZWQgYnkgbW91bnQtcmVhZHkgaGFuZGxlcnMgKGkuZS4sXG4gIC8vIGNvbXBvbmVudERpZFVwZGF0ZSkgYnV0IHdlIG5lZWQgdG8gY2hlY2sgaGVyZSB0b28gaW4gb3JkZXIgdG8gY2F0Y2hcbiAgLy8gdXBkYXRlcyBlbnF1ZXVlZCBieSBzZXRTdGF0ZSBjYWxsYmFja3MgYW5kIGFzYXAgY2FsbHMuXG4gIHdoaWxlIChkaXJ0eUNvbXBvbmVudHMubGVuZ3RoIHx8IGFzYXBFbnF1ZXVlZCkge1xuICAgIGlmIChkaXJ0eUNvbXBvbmVudHMubGVuZ3RoKSB7XG4gICAgICB2YXIgdHJhbnNhY3Rpb24gPSBSZWFjdFVwZGF0ZXNGbHVzaFRyYW5zYWN0aW9uLmdldFBvb2xlZCgpO1xuICAgICAgdHJhbnNhY3Rpb24ucGVyZm9ybShydW5CYXRjaGVkVXBkYXRlcywgbnVsbCwgdHJhbnNhY3Rpb24pO1xuICAgICAgUmVhY3RVcGRhdGVzRmx1c2hUcmFuc2FjdGlvbi5yZWxlYXNlKHRyYW5zYWN0aW9uKTtcbiAgICB9XG5cbiAgICBpZiAoYXNhcEVucXVldWVkKSB7XG4gICAgICBhc2FwRW5xdWV1ZWQgPSBmYWxzZTtcbiAgICAgIHZhciBxdWV1ZSA9IGFzYXBDYWxsYmFja1F1ZXVlO1xuICAgICAgYXNhcENhbGxiYWNrUXVldWUgPSBDYWxsYmFja1F1ZXVlLmdldFBvb2xlZCgpO1xuICAgICAgcXVldWUubm90aWZ5QWxsKCk7XG4gICAgICBDYWxsYmFja1F1ZXVlLnJlbGVhc2UocXVldWUpO1xuICAgIH1cbiAgfVxufTtcbmZsdXNoQmF0Y2hlZFVwZGF0ZXMgPSBSZWFjdFBlcmYubWVhc3VyZSgnUmVhY3RVcGRhdGVzJywgJ2ZsdXNoQmF0Y2hlZFVwZGF0ZXMnLCBmbHVzaEJhdGNoZWRVcGRhdGVzKTtcblxuLyoqXG4gKiBNYXJrIGEgY29tcG9uZW50IGFzIG5lZWRpbmcgYSByZXJlbmRlciwgYWRkaW5nIGFuIG9wdGlvbmFsIGNhbGxiYWNrIHRvIGFcbiAqIGxpc3Qgb2YgZnVuY3Rpb25zIHdoaWNoIHdpbGwgYmUgZXhlY3V0ZWQgb25jZSB0aGUgcmVyZW5kZXIgb2NjdXJzLlxuICovXG5mdW5jdGlvbiBlbnF1ZXVlVXBkYXRlKGNvbXBvbmVudCkge1xuICBlbnN1cmVJbmplY3RlZCgpO1xuXG4gIC8vIFZhcmlvdXMgcGFydHMgb2Ygb3VyIGNvZGUgKHN1Y2ggYXMgUmVhY3RDb21wb3NpdGVDb21wb25lbnQnc1xuICAvLyBfcmVuZGVyVmFsaWRhdGVkQ29tcG9uZW50KSBhc3N1bWUgdGhhdCBjYWxscyB0byByZW5kZXIgYXJlbid0IG5lc3RlZDtcbiAgLy8gdmVyaWZ5IHRoYXQgdGhhdCdzIHRoZSBjYXNlLiAoVGhpcyBpcyBjYWxsZWQgYnkgZWFjaCB0b3AtbGV2ZWwgdXBkYXRlXG4gIC8vIGZ1bmN0aW9uLCBsaWtlIHNldFByb3BzLCBzZXRTdGF0ZSwgZm9yY2VVcGRhdGUsIGV0Yy47IGNyZWF0aW9uIGFuZFxuICAvLyBkZXN0cnVjdGlvbiBvZiB0b3AtbGV2ZWwgY29tcG9uZW50cyBpcyBndWFyZGVkIGluIFJlYWN0TW91bnQuKVxuXG4gIGlmICghYmF0Y2hpbmdTdHJhdGVneS5pc0JhdGNoaW5nVXBkYXRlcykge1xuICAgIGJhdGNoaW5nU3RyYXRlZ3kuYmF0Y2hlZFVwZGF0ZXMoZW5xdWV1ZVVwZGF0ZSwgY29tcG9uZW50KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBkaXJ0eUNvbXBvbmVudHMucHVzaChjb21wb25lbnQpO1xufVxuXG4vKipcbiAqIEVucXVldWUgYSBjYWxsYmFjayB0byBiZSBydW4gYXQgdGhlIGVuZCBvZiB0aGUgY3VycmVudCBiYXRjaGluZyBjeWNsZS4gVGhyb3dzXG4gKiBpZiBubyB1cGRhdGVzIGFyZSBjdXJyZW50bHkgYmVpbmcgcGVyZm9ybWVkLlxuICovXG5mdW5jdGlvbiBhc2FwKGNhbGxiYWNrLCBjb250ZXh0KSB7XG4gICFiYXRjaGluZ1N0cmF0ZWd5LmlzQmF0Y2hpbmdVcGRhdGVzID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlcy5hc2FwOiBDYW5cXCd0IGVucXVldWUgYW4gYXNhcCBjYWxsYmFjayBpbiBhIGNvbnRleHQgd2hlcmUnICsgJ3VwZGF0ZXMgYXJlIG5vdCBiZWluZyBiYXRjaGVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgYXNhcENhbGxiYWNrUXVldWUuZW5xdWV1ZShjYWxsYmFjaywgY29udGV4dCk7XG4gIGFzYXBFbnF1ZXVlZCA9IHRydWU7XG59XG5cbnZhciBSZWFjdFVwZGF0ZXNJbmplY3Rpb24gPSB7XG4gIGluamVjdFJlY29uY2lsZVRyYW5zYWN0aW9uOiBmdW5jdGlvbiAoUmVjb25jaWxlVHJhbnNhY3Rpb24pIHtcbiAgICAhUmVjb25jaWxlVHJhbnNhY3Rpb24gPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RVcGRhdGVzOiBtdXN0IHByb3ZpZGUgYSByZWNvbmNpbGUgdHJhbnNhY3Rpb24gY2xhc3MnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgUmVhY3RVcGRhdGVzLlJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb24gPSBSZWNvbmNpbGVUcmFuc2FjdGlvbjtcbiAgfSxcblxuICBpbmplY3RCYXRjaGluZ1N0cmF0ZWd5OiBmdW5jdGlvbiAoX2JhdGNoaW5nU3RyYXRlZ3kpIHtcbiAgICAhX2JhdGNoaW5nU3RyYXRlZ3kgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RVcGRhdGVzOiBtdXN0IHByb3ZpZGUgYSBiYXRjaGluZyBzdHJhdGVneScpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICAhKHR5cGVvZiBfYmF0Y2hpbmdTdHJhdGVneS5iYXRjaGVkVXBkYXRlcyA9PT0gJ2Z1bmN0aW9uJykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAnUmVhY3RVcGRhdGVzOiBtdXN0IHByb3ZpZGUgYSBiYXRjaGVkVXBkYXRlcygpIGZ1bmN0aW9uJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgICEodHlwZW9mIF9iYXRjaGluZ1N0cmF0ZWd5LmlzQmF0Y2hpbmdVcGRhdGVzID09PSAnYm9vbGVhbicpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1JlYWN0VXBkYXRlczogbXVzdCBwcm92aWRlIGFuIGlzQmF0Y2hpbmdVcGRhdGVzIGJvb2xlYW4gYXR0cmlidXRlJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIGJhdGNoaW5nU3RyYXRlZ3kgPSBfYmF0Y2hpbmdTdHJhdGVneTtcbiAgfVxufTtcblxudmFyIFJlYWN0VXBkYXRlcyA9IHtcbiAgLyoqXG4gICAqIFJlYWN0IHJlZmVyZW5jZXMgYFJlYWN0UmVjb25jaWxlVHJhbnNhY3Rpb25gIHVzaW5nIHRoaXMgcHJvcGVydHkgaW4gb3JkZXJcbiAgICogdG8gYWxsb3cgZGVwZW5kZW5jeSBpbmplY3Rpb24uXG4gICAqXG4gICAqIEBpbnRlcm5hbFxuICAgKi9cbiAgUmVhY3RSZWNvbmNpbGVUcmFuc2FjdGlvbjogbnVsbCxcblxuICBiYXRjaGVkVXBkYXRlczogYmF0Y2hlZFVwZGF0ZXMsXG4gIGVucXVldWVVcGRhdGU6IGVucXVldWVVcGRhdGUsXG4gIGZsdXNoQmF0Y2hlZFVwZGF0ZXM6IGZsdXNoQmF0Y2hlZFVwZGF0ZXMsXG4gIGluamVjdGlvbjogUmVhY3RVcGRhdGVzSW5qZWN0aW9uLFxuICBhc2FwOiBhc2FwXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWN0VXBkYXRlczsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgUmVhY3RWZXJzaW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9ICcwLjE0LjgnOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTVkdET01Qcm9wZXJ0eUNvbmZpZ1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIERPTVByb3BlcnR5ID0gcmVxdWlyZSgnLi9ET01Qcm9wZXJ0eScpO1xuXG52YXIgTVVTVF9VU0VfQVRUUklCVVRFID0gRE9NUHJvcGVydHkuaW5qZWN0aW9uLk1VU1RfVVNFX0FUVFJJQlVURTtcblxudmFyIE5TID0ge1xuICB4bGluazogJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnLFxuICB4bWw6ICdodHRwOi8vd3d3LnczLm9yZy9YTUwvMTk5OC9uYW1lc3BhY2UnXG59O1xuXG52YXIgU1ZHRE9NUHJvcGVydHlDb25maWcgPSB7XG4gIFByb3BlcnRpZXM6IHtcbiAgICBjbGlwUGF0aDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGN4OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgY3k6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBkOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZHg6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBkeTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGZpbGw6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmaWxsT3BhY2l0eTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGZvbnRGYW1pbHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBmb250U2l6ZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGZ4OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgZnk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBncmFkaWVudFRyYW5zZm9ybTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIGdyYWRpZW50VW5pdHM6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBtYXJrZXJFbmQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBtYXJrZXJNaWQ6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBtYXJrZXJTdGFydDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIG9mZnNldDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIG9wYWNpdHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBwYXR0ZXJuQ29udGVudFVuaXRzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcGF0dGVyblVuaXRzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcG9pbnRzOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgcHJlc2VydmVBc3BlY3RSYXRpbzogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHI6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICByeDogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHJ5OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3ByZWFkTWV0aG9kOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3RvcENvbG9yOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3RvcE9wYWNpdHk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBzdHJva2U6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBzdHJva2VEYXNoYXJyYXk6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICBzdHJva2VMaW5lY2FwOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgc3Ryb2tlT3BhY2l0eTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHN0cm9rZVdpZHRoOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgdGV4dEFuY2hvcjogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHRyYW5zZm9ybTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHZlcnNpb246IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB2aWV3Qm94OiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeDE6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4MjogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHg6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bGlua0FjdHVhdGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bGlua0FyY3JvbGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bGlua0hyZWY6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bGlua1JvbGU6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bGlua1Nob3c6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bGlua1RpdGxlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeGxpbmtUeXBlOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeG1sQmFzZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHhtbExhbmc6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB4bWxTcGFjZTogTVVTVF9VU0VfQVRUUklCVVRFLFxuICAgIHkxOiBNVVNUX1VTRV9BVFRSSUJVVEUsXG4gICAgeTI6IE1VU1RfVVNFX0FUVFJJQlVURSxcbiAgICB5OiBNVVNUX1VTRV9BVFRSSUJVVEVcbiAgfSxcbiAgRE9NQXR0cmlidXRlTmFtZXNwYWNlczoge1xuICAgIHhsaW5rQWN0dWF0ZTogTlMueGxpbmssXG4gICAgeGxpbmtBcmNyb2xlOiBOUy54bGluayxcbiAgICB4bGlua0hyZWY6IE5TLnhsaW5rLFxuICAgIHhsaW5rUm9sZTogTlMueGxpbmssXG4gICAgeGxpbmtTaG93OiBOUy54bGluayxcbiAgICB4bGlua1RpdGxlOiBOUy54bGluayxcbiAgICB4bGlua1R5cGU6IE5TLnhsaW5rLFxuICAgIHhtbEJhc2U6IE5TLnhtbCxcbiAgICB4bWxMYW5nOiBOUy54bWwsXG4gICAgeG1sU3BhY2U6IE5TLnhtbFxuICB9LFxuICBET01BdHRyaWJ1dGVOYW1lczoge1xuICAgIGNsaXBQYXRoOiAnY2xpcC1wYXRoJyxcbiAgICBmaWxsT3BhY2l0eTogJ2ZpbGwtb3BhY2l0eScsXG4gICAgZm9udEZhbWlseTogJ2ZvbnQtZmFtaWx5JyxcbiAgICBmb250U2l6ZTogJ2ZvbnQtc2l6ZScsXG4gICAgZ3JhZGllbnRUcmFuc2Zvcm06ICdncmFkaWVudFRyYW5zZm9ybScsXG4gICAgZ3JhZGllbnRVbml0czogJ2dyYWRpZW50VW5pdHMnLFxuICAgIG1hcmtlckVuZDogJ21hcmtlci1lbmQnLFxuICAgIG1hcmtlck1pZDogJ21hcmtlci1taWQnLFxuICAgIG1hcmtlclN0YXJ0OiAnbWFya2VyLXN0YXJ0JyxcbiAgICBwYXR0ZXJuQ29udGVudFVuaXRzOiAncGF0dGVybkNvbnRlbnRVbml0cycsXG4gICAgcGF0dGVyblVuaXRzOiAncGF0dGVyblVuaXRzJyxcbiAgICBwcmVzZXJ2ZUFzcGVjdFJhdGlvOiAncHJlc2VydmVBc3BlY3RSYXRpbycsXG4gICAgc3ByZWFkTWV0aG9kOiAnc3ByZWFkTWV0aG9kJyxcbiAgICBzdG9wQ29sb3I6ICdzdG9wLWNvbG9yJyxcbiAgICBzdG9wT3BhY2l0eTogJ3N0b3Atb3BhY2l0eScsXG4gICAgc3Ryb2tlRGFzaGFycmF5OiAnc3Ryb2tlLWRhc2hhcnJheScsXG4gICAgc3Ryb2tlTGluZWNhcDogJ3N0cm9rZS1saW5lY2FwJyxcbiAgICBzdHJva2VPcGFjaXR5OiAnc3Ryb2tlLW9wYWNpdHknLFxuICAgIHN0cm9rZVdpZHRoOiAnc3Ryb2tlLXdpZHRoJyxcbiAgICB0ZXh0QW5jaG9yOiAndGV4dC1hbmNob3InLFxuICAgIHZpZXdCb3g6ICd2aWV3Qm94JyxcbiAgICB4bGlua0FjdHVhdGU6ICd4bGluazphY3R1YXRlJyxcbiAgICB4bGlua0FyY3JvbGU6ICd4bGluazphcmNyb2xlJyxcbiAgICB4bGlua0hyZWY6ICd4bGluazpocmVmJyxcbiAgICB4bGlua1JvbGU6ICd4bGluazpyb2xlJyxcbiAgICB4bGlua1Nob3c6ICd4bGluazpzaG93JyxcbiAgICB4bGlua1RpdGxlOiAneGxpbms6dGl0bGUnLFxuICAgIHhsaW5rVHlwZTogJ3hsaW5rOnR5cGUnLFxuICAgIHhtbEJhc2U6ICd4bWw6YmFzZScsXG4gICAgeG1sTGFuZzogJ3htbDpsYW5nJyxcbiAgICB4bWxTcGFjZTogJ3htbDpzcGFjZSdcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBTVkdET01Qcm9wZXJ0eUNvbmZpZzsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU2VsZWN0RXZlbnRQbHVnaW5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFdmVudENvbnN0YW50cyA9IHJlcXVpcmUoJy4vRXZlbnRDb25zdGFudHMnKTtcbnZhciBFdmVudFByb3BhZ2F0b3JzID0gcmVxdWlyZSgnLi9FdmVudFByb3BhZ2F0b3JzJyk7XG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xudmFyIFJlYWN0SW5wdXRTZWxlY3Rpb24gPSByZXF1aXJlKCcuL1JlYWN0SW5wdXRTZWxlY3Rpb24nKTtcbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcblxudmFyIGdldEFjdGl2ZUVsZW1lbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9nZXRBY3RpdmVFbGVtZW50Jyk7XG52YXIgaXNUZXh0SW5wdXRFbGVtZW50ID0gcmVxdWlyZSgnLi9pc1RleHRJbnB1dEVsZW1lbnQnKTtcbnZhciBrZXlPZiA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU9mJyk7XG52YXIgc2hhbGxvd0VxdWFsID0gcmVxdWlyZSgnZmJqcy9saWIvc2hhbGxvd0VxdWFsJyk7XG5cbnZhciB0b3BMZXZlbFR5cGVzID0gRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcztcblxudmFyIHNraXBTZWxlY3Rpb25DaGFuZ2VFdmVudCA9IEV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSAmJiAnZG9jdW1lbnRNb2RlJyBpbiBkb2N1bWVudCAmJiBkb2N1bWVudC5kb2N1bWVudE1vZGUgPD0gMTE7XG5cbnZhciBldmVudFR5cGVzID0ge1xuICBzZWxlY3Q6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblNlbGVjdDogbnVsbCB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uU2VsZWN0Q2FwdHVyZTogbnVsbCB9KVxuICAgIH0sXG4gICAgZGVwZW5kZW5jaWVzOiBbdG9wTGV2ZWxUeXBlcy50b3BCbHVyLCB0b3BMZXZlbFR5cGVzLnRvcENvbnRleHRNZW51LCB0b3BMZXZlbFR5cGVzLnRvcEZvY3VzLCB0b3BMZXZlbFR5cGVzLnRvcEtleURvd24sIHRvcExldmVsVHlwZXMudG9wTW91c2VEb3duLCB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlVXAsIHRvcExldmVsVHlwZXMudG9wU2VsZWN0aW9uQ2hhbmdlXVxuICB9XG59O1xuXG52YXIgYWN0aXZlRWxlbWVudCA9IG51bGw7XG52YXIgYWN0aXZlRWxlbWVudElEID0gbnVsbDtcbnZhciBsYXN0U2VsZWN0aW9uID0gbnVsbDtcbnZhciBtb3VzZURvd24gPSBmYWxzZTtcblxuLy8gVHJhY2sgd2hldGhlciBhIGxpc3RlbmVyIGV4aXN0cyBmb3IgdGhpcyBwbHVnaW4uIElmIG5vbmUgZXhpc3QsIHdlIGRvXG4vLyBub3QgZXh0cmFjdCBldmVudHMuXG52YXIgaGFzTGlzdGVuZXIgPSBmYWxzZTtcbnZhciBPTl9TRUxFQ1RfS0VZID0ga2V5T2YoeyBvblNlbGVjdDogbnVsbCB9KTtcblxuLyoqXG4gKiBHZXQgYW4gb2JqZWN0IHdoaWNoIGlzIGEgdW5pcXVlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBjdXJyZW50IHNlbGVjdGlvbi5cbiAqXG4gKiBUaGUgcmV0dXJuIHZhbHVlIHdpbGwgbm90IGJlIGNvbnNpc3RlbnQgYWNyb3NzIG5vZGVzIG9yIGJyb3dzZXJzLCBidXRcbiAqIHR3byBpZGVudGljYWwgc2VsZWN0aW9ucyBvbiB0aGUgc2FtZSBub2RlIHdpbGwgcmV0dXJuIGlkZW50aWNhbCBvYmplY3RzLlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudH0gbm9kZVxuICogQHJldHVybiB7b2JqZWN0fVxuICovXG5mdW5jdGlvbiBnZXRTZWxlY3Rpb24obm9kZSkge1xuICBpZiAoJ3NlbGVjdGlvblN0YXJ0JyBpbiBub2RlICYmIFJlYWN0SW5wdXRTZWxlY3Rpb24uaGFzU2VsZWN0aW9uQ2FwYWJpbGl0aWVzKG5vZGUpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0OiBub2RlLnNlbGVjdGlvblN0YXJ0LFxuICAgICAgZW5kOiBub2RlLnNlbGVjdGlvbkVuZFxuICAgIH07XG4gIH0gZWxzZSBpZiAod2luZG93LmdldFNlbGVjdGlvbikge1xuICAgIHZhciBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFuY2hvck5vZGU6IHNlbGVjdGlvbi5hbmNob3JOb2RlLFxuICAgICAgYW5jaG9yT2Zmc2V0OiBzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0LFxuICAgICAgZm9jdXNOb2RlOiBzZWxlY3Rpb24uZm9jdXNOb2RlLFxuICAgICAgZm9jdXNPZmZzZXQ6IHNlbGVjdGlvbi5mb2N1c09mZnNldFxuICAgIH07XG4gIH0gZWxzZSBpZiAoZG9jdW1lbnQuc2VsZWN0aW9uKSB7XG4gICAgdmFyIHJhbmdlID0gZG9jdW1lbnQuc2VsZWN0aW9uLmNyZWF0ZVJhbmdlKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBhcmVudEVsZW1lbnQ6IHJhbmdlLnBhcmVudEVsZW1lbnQoKSxcbiAgICAgIHRleHQ6IHJhbmdlLnRleHQsXG4gICAgICB0b3A6IHJhbmdlLmJvdW5kaW5nVG9wLFxuICAgICAgbGVmdDogcmFuZ2UuYm91bmRpbmdMZWZ0XG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIFBvbGwgc2VsZWN0aW9uIHRvIHNlZSB3aGV0aGVyIGl0J3MgY2hhbmdlZC5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnRcbiAqIEByZXR1cm4gez9TeW50aGV0aWNFdmVudH1cbiAqL1xuZnVuY3Rpb24gY29uc3RydWN0U2VsZWN0RXZlbnQobmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIC8vIEVuc3VyZSB3ZSBoYXZlIHRoZSByaWdodCBlbGVtZW50LCBhbmQgdGhhdCB0aGUgdXNlciBpcyBub3QgZHJhZ2dpbmcgYVxuICAvLyBzZWxlY3Rpb24gKHRoaXMgbWF0Y2hlcyBuYXRpdmUgYHNlbGVjdGAgZXZlbnQgYmVoYXZpb3IpLiBJbiBIVE1MNSwgc2VsZWN0XG4gIC8vIGZpcmVzIG9ubHkgb24gaW5wdXQgYW5kIHRleHRhcmVhIHRodXMgaWYgdGhlcmUncyBubyBmb2N1c2VkIGVsZW1lbnQgd2VcbiAgLy8gd29uJ3QgZGlzcGF0Y2guXG4gIGlmIChtb3VzZURvd24gfHwgYWN0aXZlRWxlbWVudCA9PSBudWxsIHx8IGFjdGl2ZUVsZW1lbnQgIT09IGdldEFjdGl2ZUVsZW1lbnQoKSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gT25seSBmaXJlIHdoZW4gc2VsZWN0aW9uIGhhcyBhY3R1YWxseSBjaGFuZ2VkLlxuICB2YXIgY3VycmVudFNlbGVjdGlvbiA9IGdldFNlbGVjdGlvbihhY3RpdmVFbGVtZW50KTtcbiAgaWYgKCFsYXN0U2VsZWN0aW9uIHx8ICFzaGFsbG93RXF1YWwobGFzdFNlbGVjdGlvbiwgY3VycmVudFNlbGVjdGlvbikpIHtcbiAgICBsYXN0U2VsZWN0aW9uID0gY3VycmVudFNlbGVjdGlvbjtcblxuICAgIHZhciBzeW50aGV0aWNFdmVudCA9IFN5bnRoZXRpY0V2ZW50LmdldFBvb2xlZChldmVudFR5cGVzLnNlbGVjdCwgYWN0aXZlRWxlbWVudElELCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuXG4gICAgc3ludGhldGljRXZlbnQudHlwZSA9ICdzZWxlY3QnO1xuICAgIHN5bnRoZXRpY0V2ZW50LnRhcmdldCA9IGFjdGl2ZUVsZW1lbnQ7XG5cbiAgICBFdmVudFByb3BhZ2F0b3JzLmFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXMoc3ludGhldGljRXZlbnQpO1xuXG4gICAgcmV0dXJuIHN5bnRoZXRpY0V2ZW50O1xuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogVGhpcyBwbHVnaW4gY3JlYXRlcyBhbiBgb25TZWxlY3RgIGV2ZW50IHRoYXQgbm9ybWFsaXplcyBzZWxlY3QgZXZlbnRzXG4gKiBhY3Jvc3MgZm9ybSBlbGVtZW50cy5cbiAqXG4gKiBTdXBwb3J0ZWQgZWxlbWVudHMgYXJlOlxuICogLSBpbnB1dCAoc2VlIGBpc1RleHRJbnB1dEVsZW1lbnRgKVxuICogLSB0ZXh0YXJlYVxuICogLSBjb250ZW50RWRpdGFibGVcbiAqXG4gKiBUaGlzIGRpZmZlcnMgZnJvbSBuYXRpdmUgYnJvd3NlciBpbXBsZW1lbnRhdGlvbnMgaW4gdGhlIGZvbGxvd2luZyB3YXlzOlxuICogLSBGaXJlcyBvbiBjb250ZW50RWRpdGFibGUgZmllbGRzIGFzIHdlbGwgYXMgaW5wdXRzLlxuICogLSBGaXJlcyBmb3IgY29sbGFwc2VkIHNlbGVjdGlvbi5cbiAqIC0gRmlyZXMgYWZ0ZXIgdXNlciBpbnB1dC5cbiAqL1xudmFyIFNlbGVjdEV2ZW50UGx1Z2luID0ge1xuXG4gIGV2ZW50VHlwZXM6IGV2ZW50VHlwZXMsXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFR5cGUgUmVjb3JkIGZyb20gYEV2ZW50Q29uc3RhbnRzYC5cbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdG9wTGV2ZWxUYXJnZXQgVGhlIGxpc3RlbmluZyBjb21wb25lbnQgcm9vdCBub2RlLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdG9wTGV2ZWxUYXJnZXRJRCBJRCBvZiBgdG9wTGV2ZWxUYXJnZXRgLlxuICAgKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gICAqIEByZXR1cm4geyp9IEFuIGFjY3VtdWxhdGlvbiBvZiBzeW50aGV0aWMgZXZlbnRzLlxuICAgKiBAc2VlIHtFdmVudFBsdWdpbkh1Yi5leHRyYWN0RXZlbnRzfVxuICAgKi9cbiAgZXh0cmFjdEV2ZW50czogZnVuY3Rpb24gKHRvcExldmVsVHlwZSwgdG9wTGV2ZWxUYXJnZXQsIHRvcExldmVsVGFyZ2V0SUQsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICAgIGlmICghaGFzTGlzdGVuZXIpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHN3aXRjaCAodG9wTGV2ZWxUeXBlKSB7XG4gICAgICAvLyBUcmFjayB0aGUgaW5wdXQgbm9kZSB0aGF0IGhhcyBmb2N1cy5cbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BGb2N1czpcbiAgICAgICAgaWYgKGlzVGV4dElucHV0RWxlbWVudCh0b3BMZXZlbFRhcmdldCkgfHwgdG9wTGV2ZWxUYXJnZXQuY29udGVudEVkaXRhYmxlID09PSAndHJ1ZScpIHtcbiAgICAgICAgICBhY3RpdmVFbGVtZW50ID0gdG9wTGV2ZWxUYXJnZXQ7XG4gICAgICAgICAgYWN0aXZlRWxlbWVudElEID0gdG9wTGV2ZWxUYXJnZXRJRDtcbiAgICAgICAgICBsYXN0U2VsZWN0aW9uID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BCbHVyOlxuICAgICAgICBhY3RpdmVFbGVtZW50ID0gbnVsbDtcbiAgICAgICAgYWN0aXZlRWxlbWVudElEID0gbnVsbDtcbiAgICAgICAgbGFzdFNlbGVjdGlvbiA9IG51bGw7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICAvLyBEb24ndCBmaXJlIHRoZSBldmVudCB3aGlsZSB0aGUgdXNlciBpcyBkcmFnZ2luZy4gVGhpcyBtYXRjaGVzIHRoZVxuICAgICAgLy8gc2VtYW50aWNzIG9mIHRoZSBuYXRpdmUgc2VsZWN0IGV2ZW50LlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlRG93bjpcbiAgICAgICAgbW91c2VEb3duID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29udGV4dE1lbnU6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTW91c2VVcDpcbiAgICAgICAgbW91c2VEb3duID0gZmFsc2U7XG4gICAgICAgIHJldHVybiBjb25zdHJ1Y3RTZWxlY3RFdmVudChuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xuXG4gICAgICAvLyBDaHJvbWUgYW5kIElFIGZpcmUgbm9uLXN0YW5kYXJkIGV2ZW50IHdoZW4gc2VsZWN0aW9uIGlzIGNoYW5nZWQgKGFuZFxuICAgICAgLy8gc29tZXRpbWVzIHdoZW4gaXQgaGFzbid0KS4gSUUncyBldmVudCBmaXJlcyBvdXQgb2Ygb3JkZXIgd2l0aCByZXNwZWN0XG4gICAgICAvLyB0byBrZXkgYW5kIGlucHV0IGV2ZW50cyBvbiBkZWxldGlvbiwgc28gd2UgZGlzY2FyZCBpdC5cbiAgICAgIC8vXG4gICAgICAvLyBGaXJlZm94IGRvZXNuJ3Qgc3VwcG9ydCBzZWxlY3Rpb25jaGFuZ2UsIHNvIGNoZWNrIHNlbGVjdGlvbiBzdGF0dXNcbiAgICAgIC8vIGFmdGVyIGVhY2gga2V5IGVudHJ5LiBUaGUgc2VsZWN0aW9uIGNoYW5nZXMgYWZ0ZXIga2V5ZG93biBhbmQgYmVmb3JlXG4gICAgICAvLyBrZXl1cCwgYnV0IHdlIGNoZWNrIG9uIGtleWRvd24gYXMgd2VsbCBpbiB0aGUgY2FzZSBvZiBob2xkaW5nIGRvd24gYVxuICAgICAgLy8ga2V5LCB3aGVuIG11bHRpcGxlIGtleWRvd24gZXZlbnRzIGFyZSBmaXJlZCBidXQgb25seSBvbmUga2V5dXAgaXMuXG4gICAgICAvLyBUaGlzIGlzIGFsc28gb3VyIGFwcHJvYWNoIGZvciBJRSBoYW5kbGluZywgZm9yIHRoZSByZWFzb24gYWJvdmUuXG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wU2VsZWN0aW9uQ2hhbmdlOlxuICAgICAgICBpZiAoc2tpcFNlbGVjdGlvbkNoYW5nZUV2ZW50KSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIC8vIGZhbGxzIHRocm91Z2hcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BLZXlEb3duOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEtleVVwOlxuICAgICAgICByZXR1cm4gY29uc3RydWN0U2VsZWN0RXZlbnQobmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfSxcblxuICBkaWRQdXRMaXN0ZW5lcjogZnVuY3Rpb24gKGlkLCByZWdpc3RyYXRpb25OYW1lLCBsaXN0ZW5lcikge1xuICAgIGlmIChyZWdpc3RyYXRpb25OYW1lID09PSBPTl9TRUxFQ1RfS0VZKSB7XG4gICAgICBoYXNMaXN0ZW5lciA9IHRydWU7XG4gICAgfVxuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNlbGVjdEV2ZW50UGx1Z2luOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTZXJ2ZXJSZWFjdFJvb3RJbmRleFxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogU2l6ZSBvZiB0aGUgcmVhY3RSb290IElEIHNwYWNlLiBXZSBnZW5lcmF0ZSByYW5kb20gbnVtYmVycyBmb3IgUmVhY3Qgcm9vdFxuICogSURzIGFuZCBpZiB0aGVyZSdzIGEgY29sbGlzaW9uIHRoZSBldmVudHMgYW5kIERPTSB1cGRhdGUgc3lzdGVtIHdpbGxcbiAqIGdldCBjb25mdXNlZC4gSW4gdGhlIGZ1dHVyZSB3ZSBuZWVkIGEgd2F5IHRvIGdlbmVyYXRlIEdVSURzIGJ1dCBmb3JcbiAqIG5vdyB0aGlzIHdpbGwgd29yayBvbiBhIHNtYWxsZXIgc2NhbGUuXG4gKi9cbnZhciBHTE9CQUxfTU9VTlRfUE9JTlRfTUFYID0gTWF0aC5wb3coMiwgNTMpO1xuXG52YXIgU2VydmVyUmVhY3RSb290SW5kZXggPSB7XG4gIGNyZWF0ZVJlYWN0Um9vdEluZGV4OiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIE1hdGguY2VpbChNYXRoLnJhbmRvbSgpICogR0xPQkFMX01PVU5UX1BPSU5UX01BWCk7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gU2VydmVyUmVhY3RSb290SW5kZXg7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFNpbXBsZUV2ZW50UGx1Z2luXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXZlbnRDb25zdGFudHMgPSByZXF1aXJlKCcuL0V2ZW50Q29uc3RhbnRzJyk7XG52YXIgRXZlbnRMaXN0ZW5lciA9IHJlcXVpcmUoJ2ZianMvbGliL0V2ZW50TGlzdGVuZXInKTtcbnZhciBFdmVudFByb3BhZ2F0b3JzID0gcmVxdWlyZSgnLi9FdmVudFByb3BhZ2F0b3JzJyk7XG52YXIgUmVhY3RNb3VudCA9IHJlcXVpcmUoJy4vUmVhY3RNb3VudCcpO1xudmFyIFN5bnRoZXRpY0NsaXBib2FyZEV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNDbGlwYm9hcmRFdmVudCcpO1xudmFyIFN5bnRoZXRpY0V2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNFdmVudCcpO1xudmFyIFN5bnRoZXRpY0ZvY3VzRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY0ZvY3VzRXZlbnQnKTtcbnZhciBTeW50aGV0aWNLZXlib2FyZEV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNLZXlib2FyZEV2ZW50Jyk7XG52YXIgU3ludGhldGljTW91c2VFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljTW91c2VFdmVudCcpO1xudmFyIFN5bnRoZXRpY0RyYWdFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRHJhZ0V2ZW50Jyk7XG52YXIgU3ludGhldGljVG91Y2hFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljVG91Y2hFdmVudCcpO1xudmFyIFN5bnRoZXRpY1VJRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY1VJRXZlbnQnKTtcbnZhciBTeW50aGV0aWNXaGVlbEV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNXaGVlbEV2ZW50Jyk7XG5cbnZhciBlbXB0eUZ1bmN0aW9uID0gcmVxdWlyZSgnZmJqcy9saWIvZW1wdHlGdW5jdGlvbicpO1xudmFyIGdldEV2ZW50Q2hhckNvZGUgPSByZXF1aXJlKCcuL2dldEV2ZW50Q2hhckNvZGUnKTtcbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCdmYmpzL2xpYi9pbnZhcmlhbnQnKTtcbnZhciBrZXlPZiA9IHJlcXVpcmUoJ2ZianMvbGliL2tleU9mJyk7XG5cbnZhciB0b3BMZXZlbFR5cGVzID0gRXZlbnRDb25zdGFudHMudG9wTGV2ZWxUeXBlcztcblxudmFyIGV2ZW50VHlwZXMgPSB7XG4gIGFib3J0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25BYm9ydDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQWJvcnRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBibHVyOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25CbHVyOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25CbHVyQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgY2FuUGxheToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQ2FuUGxheTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ2FuUGxheUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGNhblBsYXlUaHJvdWdoOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25DYW5QbGF5VGhyb3VnaDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ2FuUGxheVRocm91Z2hDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBjbGljazoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uQ2xpY2s6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNsaWNrQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgY29udGV4dE1lbnU6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNvbnRleHRNZW51OiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Db250ZXh0TWVudUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGNvcHk6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkNvcHk6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkNvcHlDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBjdXQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkN1dDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uQ3V0Q2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZG91YmxlQ2xpY2s6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkRvdWJsZUNsaWNrOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Eb3VibGVDbGlja0NhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGRyYWc6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkRyYWc6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkRyYWdDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBkcmFnRW5kOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnRW5kOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EcmFnRW5kQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZHJhZ0VudGVyOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnRW50ZXI6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkRyYWdFbnRlckNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGRyYWdFeGl0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25EcmFnRXhpdDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJhZ0V4aXRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBkcmFnTGVhdmU6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkRyYWdMZWF2ZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRHJhZ0xlYXZlQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZHJhZ092ZXI6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkRyYWdPdmVyOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EcmFnT3ZlckNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGRyYWdTdGFydDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRHJhZ1N0YXJ0OiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EcmFnU3RhcnRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBkcm9wOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Ecm9wOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Ecm9wQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZHVyYXRpb25DaGFuZ2U6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkR1cmF0aW9uQ2hhbmdlOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25EdXJhdGlvbkNoYW5nZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGVtcHRpZWQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkVtcHRpZWQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkVtcHRpZWRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBlbmNyeXB0ZWQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkVuY3J5cHRlZDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRW5jcnlwdGVkQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgZW5kZWQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkVuZGVkOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25FbmRlZENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGVycm9yOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25FcnJvcjogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uRXJyb3JDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBmb2N1czoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uRm9jdXM6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkZvY3VzQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgaW5wdXQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbklucHV0OiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25JbnB1dENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGtleURvd246IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbktleURvd246IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbktleURvd25DYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBrZXlQcmVzczoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uS2V5UHJlc3M6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbktleVByZXNzQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAga2V5VXA6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbktleVVwOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25LZXlVcENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGxvYWQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkxvYWQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbkxvYWRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBsb2FkZWREYXRhOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Mb2FkZWREYXRhOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Mb2FkZWREYXRhQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgbG9hZGVkTWV0YWRhdGE6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbkxvYWRlZE1ldGFkYXRhOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Mb2FkZWRNZXRhZGF0YUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIGxvYWRTdGFydDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uTG9hZFN0YXJ0OiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Mb2FkU3RhcnRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICAvLyBOb3RlOiBXZSBkbyBub3QgYWxsb3cgbGlzdGVuaW5nIHRvIG1vdXNlT3ZlciBldmVudHMuIEluc3RlYWQsIHVzZSB0aGVcbiAgLy8gb25Nb3VzZUVudGVyL29uTW91c2VMZWF2ZSBjcmVhdGVkIGJ5IGBFbnRlckxlYXZlRXZlbnRQbHVnaW5gLlxuICBtb3VzZURvd246IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbk1vdXNlRG93bjogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTW91c2VEb3duQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgbW91c2VNb3ZlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Nb3VzZU1vdmU6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvbk1vdXNlTW92ZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIG1vdXNlT3V0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Nb3VzZU91dDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTW91c2VPdXRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBtb3VzZU92ZXI6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbk1vdXNlT3ZlcjogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTW91c2VPdmVyQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgbW91c2VVcDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uTW91c2VVcDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uTW91c2VVcENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHBhc3RlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25QYXN0ZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uUGFzdGVDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBwYXVzZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uUGF1c2U6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblBhdXNlQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgcGxheToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uUGxheTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uUGxheUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHBsYXlpbmc6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblBsYXlpbmc6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblBsYXlpbmdDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBwcm9ncmVzczoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uUHJvZ3Jlc3M6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblByb2dyZXNzQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgcmF0ZUNoYW5nZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uUmF0ZUNoYW5nZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uUmF0ZUNoYW5nZUNhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHJlc2V0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25SZXNldDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uUmVzZXRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBzY3JvbGw6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblNjcm9sbDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uU2Nyb2xsQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgc2Vla2VkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TZWVrZWQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblNlZWtlZENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHNlZWtpbmc6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblNlZWtpbmc6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblNlZWtpbmdDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICBzdGFsbGVkOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TdGFsbGVkOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25TdGFsbGVkQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgc3VibWl0OiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25TdWJtaXQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblN1Ym1pdENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHN1c3BlbmQ6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblN1c3BlbmQ6IHRydWUgfSksXG4gICAgICBjYXB0dXJlZDoga2V5T2YoeyBvblN1c3BlbmRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICB0aW1lVXBkYXRlOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25UaW1lVXBkYXRlOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25UaW1lVXBkYXRlQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgdG91Y2hDYW5jZWw6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblRvdWNoQ2FuY2VsOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Ub3VjaENhbmNlbENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHRvdWNoRW5kOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25Ub3VjaEVuZDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVG91Y2hFbmRDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICB0b3VjaE1vdmU6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvblRvdWNoTW92ZTogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVG91Y2hNb3ZlQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgdG91Y2hTdGFydDoge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uVG91Y2hTdGFydDogdHJ1ZSB9KSxcbiAgICAgIGNhcHR1cmVkOiBrZXlPZih7IG9uVG91Y2hTdGFydENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH0sXG4gIHZvbHVtZUNoYW5nZToge1xuICAgIHBoYXNlZFJlZ2lzdHJhdGlvbk5hbWVzOiB7XG4gICAgICBidWJibGVkOiBrZXlPZih7IG9uVm9sdW1lQ2hhbmdlOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25Wb2x1bWVDaGFuZ2VDYXB0dXJlOiB0cnVlIH0pXG4gICAgfVxuICB9LFxuICB3YWl0aW5nOiB7XG4gICAgcGhhc2VkUmVnaXN0cmF0aW9uTmFtZXM6IHtcbiAgICAgIGJ1YmJsZWQ6IGtleU9mKHsgb25XYWl0aW5nOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25XYWl0aW5nQ2FwdHVyZTogdHJ1ZSB9KVxuICAgIH1cbiAgfSxcbiAgd2hlZWw6IHtcbiAgICBwaGFzZWRSZWdpc3RyYXRpb25OYW1lczoge1xuICAgICAgYnViYmxlZDoga2V5T2YoeyBvbldoZWVsOiB0cnVlIH0pLFxuICAgICAgY2FwdHVyZWQ6IGtleU9mKHsgb25XaGVlbENhcHR1cmU6IHRydWUgfSlcbiAgICB9XG4gIH1cbn07XG5cbnZhciB0b3BMZXZlbEV2ZW50c1RvRGlzcGF0Y2hDb25maWcgPSB7XG4gIHRvcEFib3J0OiBldmVudFR5cGVzLmFib3J0LFxuICB0b3BCbHVyOiBldmVudFR5cGVzLmJsdXIsXG4gIHRvcENhblBsYXk6IGV2ZW50VHlwZXMuY2FuUGxheSxcbiAgdG9wQ2FuUGxheVRocm91Z2g6IGV2ZW50VHlwZXMuY2FuUGxheVRocm91Z2gsXG4gIHRvcENsaWNrOiBldmVudFR5cGVzLmNsaWNrLFxuICB0b3BDb250ZXh0TWVudTogZXZlbnRUeXBlcy5jb250ZXh0TWVudSxcbiAgdG9wQ29weTogZXZlbnRUeXBlcy5jb3B5LFxuICB0b3BDdXQ6IGV2ZW50VHlwZXMuY3V0LFxuICB0b3BEb3VibGVDbGljazogZXZlbnRUeXBlcy5kb3VibGVDbGljayxcbiAgdG9wRHJhZzogZXZlbnRUeXBlcy5kcmFnLFxuICB0b3BEcmFnRW5kOiBldmVudFR5cGVzLmRyYWdFbmQsXG4gIHRvcERyYWdFbnRlcjogZXZlbnRUeXBlcy5kcmFnRW50ZXIsXG4gIHRvcERyYWdFeGl0OiBldmVudFR5cGVzLmRyYWdFeGl0LFxuICB0b3BEcmFnTGVhdmU6IGV2ZW50VHlwZXMuZHJhZ0xlYXZlLFxuICB0b3BEcmFnT3ZlcjogZXZlbnRUeXBlcy5kcmFnT3ZlcixcbiAgdG9wRHJhZ1N0YXJ0OiBldmVudFR5cGVzLmRyYWdTdGFydCxcbiAgdG9wRHJvcDogZXZlbnRUeXBlcy5kcm9wLFxuICB0b3BEdXJhdGlvbkNoYW5nZTogZXZlbnRUeXBlcy5kdXJhdGlvbkNoYW5nZSxcbiAgdG9wRW1wdGllZDogZXZlbnRUeXBlcy5lbXB0aWVkLFxuICB0b3BFbmNyeXB0ZWQ6IGV2ZW50VHlwZXMuZW5jcnlwdGVkLFxuICB0b3BFbmRlZDogZXZlbnRUeXBlcy5lbmRlZCxcbiAgdG9wRXJyb3I6IGV2ZW50VHlwZXMuZXJyb3IsXG4gIHRvcEZvY3VzOiBldmVudFR5cGVzLmZvY3VzLFxuICB0b3BJbnB1dDogZXZlbnRUeXBlcy5pbnB1dCxcbiAgdG9wS2V5RG93bjogZXZlbnRUeXBlcy5rZXlEb3duLFxuICB0b3BLZXlQcmVzczogZXZlbnRUeXBlcy5rZXlQcmVzcyxcbiAgdG9wS2V5VXA6IGV2ZW50VHlwZXMua2V5VXAsXG4gIHRvcExvYWQ6IGV2ZW50VHlwZXMubG9hZCxcbiAgdG9wTG9hZGVkRGF0YTogZXZlbnRUeXBlcy5sb2FkZWREYXRhLFxuICB0b3BMb2FkZWRNZXRhZGF0YTogZXZlbnRUeXBlcy5sb2FkZWRNZXRhZGF0YSxcbiAgdG9wTG9hZFN0YXJ0OiBldmVudFR5cGVzLmxvYWRTdGFydCxcbiAgdG9wTW91c2VEb3duOiBldmVudFR5cGVzLm1vdXNlRG93bixcbiAgdG9wTW91c2VNb3ZlOiBldmVudFR5cGVzLm1vdXNlTW92ZSxcbiAgdG9wTW91c2VPdXQ6IGV2ZW50VHlwZXMubW91c2VPdXQsXG4gIHRvcE1vdXNlT3ZlcjogZXZlbnRUeXBlcy5tb3VzZU92ZXIsXG4gIHRvcE1vdXNlVXA6IGV2ZW50VHlwZXMubW91c2VVcCxcbiAgdG9wUGFzdGU6IGV2ZW50VHlwZXMucGFzdGUsXG4gIHRvcFBhdXNlOiBldmVudFR5cGVzLnBhdXNlLFxuICB0b3BQbGF5OiBldmVudFR5cGVzLnBsYXksXG4gIHRvcFBsYXlpbmc6IGV2ZW50VHlwZXMucGxheWluZyxcbiAgdG9wUHJvZ3Jlc3M6IGV2ZW50VHlwZXMucHJvZ3Jlc3MsXG4gIHRvcFJhdGVDaGFuZ2U6IGV2ZW50VHlwZXMucmF0ZUNoYW5nZSxcbiAgdG9wUmVzZXQ6IGV2ZW50VHlwZXMucmVzZXQsXG4gIHRvcFNjcm9sbDogZXZlbnRUeXBlcy5zY3JvbGwsXG4gIHRvcFNlZWtlZDogZXZlbnRUeXBlcy5zZWVrZWQsXG4gIHRvcFNlZWtpbmc6IGV2ZW50VHlwZXMuc2Vla2luZyxcbiAgdG9wU3RhbGxlZDogZXZlbnRUeXBlcy5zdGFsbGVkLFxuICB0b3BTdWJtaXQ6IGV2ZW50VHlwZXMuc3VibWl0LFxuICB0b3BTdXNwZW5kOiBldmVudFR5cGVzLnN1c3BlbmQsXG4gIHRvcFRpbWVVcGRhdGU6IGV2ZW50VHlwZXMudGltZVVwZGF0ZSxcbiAgdG9wVG91Y2hDYW5jZWw6IGV2ZW50VHlwZXMudG91Y2hDYW5jZWwsXG4gIHRvcFRvdWNoRW5kOiBldmVudFR5cGVzLnRvdWNoRW5kLFxuICB0b3BUb3VjaE1vdmU6IGV2ZW50VHlwZXMudG91Y2hNb3ZlLFxuICB0b3BUb3VjaFN0YXJ0OiBldmVudFR5cGVzLnRvdWNoU3RhcnQsXG4gIHRvcFZvbHVtZUNoYW5nZTogZXZlbnRUeXBlcy52b2x1bWVDaGFuZ2UsXG4gIHRvcFdhaXRpbmc6IGV2ZW50VHlwZXMud2FpdGluZyxcbiAgdG9wV2hlZWw6IGV2ZW50VHlwZXMud2hlZWxcbn07XG5cbmZvciAodmFyIHR5cGUgaW4gdG9wTGV2ZWxFdmVudHNUb0Rpc3BhdGNoQ29uZmlnKSB7XG4gIHRvcExldmVsRXZlbnRzVG9EaXNwYXRjaENvbmZpZ1t0eXBlXS5kZXBlbmRlbmNpZXMgPSBbdHlwZV07XG59XG5cbnZhciBPTl9DTElDS19LRVkgPSBrZXlPZih7IG9uQ2xpY2s6IG51bGwgfSk7XG52YXIgb25DbGlja0xpc3RlbmVycyA9IHt9O1xuXG52YXIgU2ltcGxlRXZlbnRQbHVnaW4gPSB7XG5cbiAgZXZlbnRUeXBlczogZXZlbnRUeXBlcyxcblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHRvcExldmVsVHlwZSBSZWNvcmQgZnJvbSBgRXZlbnRDb25zdGFudHNgLlxuICAgKiBAcGFyYW0ge0RPTUV2ZW50VGFyZ2V0fSB0b3BMZXZlbFRhcmdldCBUaGUgbGlzdGVuaW5nIGNvbXBvbmVudCByb290IG5vZGUuXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0b3BMZXZlbFRhcmdldElEIElEIG9mIGB0b3BMZXZlbFRhcmdldGAuXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAgICogQHJldHVybiB7Kn0gQW4gYWNjdW11bGF0aW9uIG9mIHN5bnRoZXRpYyBldmVudHMuXG4gICAqIEBzZWUge0V2ZW50UGx1Z2luSHViLmV4dHJhY3RFdmVudHN9XG4gICAqL1xuICBleHRyYWN0RXZlbnRzOiBmdW5jdGlvbiAodG9wTGV2ZWxUeXBlLCB0b3BMZXZlbFRhcmdldCwgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gICAgdmFyIGRpc3BhdGNoQ29uZmlnID0gdG9wTGV2ZWxFdmVudHNUb0Rpc3BhdGNoQ29uZmlnW3RvcExldmVsVHlwZV07XG4gICAgaWYgKCFkaXNwYXRjaENvbmZpZykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHZhciBFdmVudENvbnN0cnVjdG9yO1xuICAgIHN3aXRjaCAodG9wTGV2ZWxUeXBlKSB7XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQWJvcnQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ2FuUGxheTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BDYW5QbGF5VGhyb3VnaDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEdXJhdGlvbkNoYW5nZTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BFbXB0aWVkOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEVuY3J5cHRlZDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BFbmRlZDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BFcnJvcjpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BJbnB1dDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BMb2FkOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcExvYWRlZERhdGE6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTG9hZGVkTWV0YWRhdGE6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTG9hZFN0YXJ0OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFBhdXNlOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFBsYXk6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wUGxheWluZzpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BQcm9ncmVzczpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BSYXRlQ2hhbmdlOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFJlc2V0OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFNlZWtlZDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BTZWVraW5nOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFN0YWxsZWQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wU3VibWl0OlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFN1c3BlbmQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVGltZVVwZGF0ZTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BWb2x1bWVDaGFuZ2U6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wV2FpdGluZzpcbiAgICAgICAgLy8gSFRNTCBFdmVudHNcbiAgICAgICAgLy8gQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9odG1sNS9pbmRleC5odG1sI2V2ZW50cy0wXG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNFdmVudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5UHJlc3M6XG4gICAgICAgIC8vIEZpcmVGb3ggY3JlYXRlcyBhIGtleXByZXNzIGV2ZW50IGZvciBmdW5jdGlvbiBrZXlzIHRvby4gVGhpcyByZW1vdmVzXG4gICAgICAgIC8vIHRoZSB1bndhbnRlZCBrZXlwcmVzcyBldmVudHMuIEVudGVyIGlzIGhvd2V2ZXIgYm90aCBwcmludGFibGUgYW5kXG4gICAgICAgIC8vIG5vbi1wcmludGFibGUuIE9uZSB3b3VsZCBleHBlY3QgVGFiIHRvIGJlIGFzIHdlbGwgKGJ1dCBpdCBpc24ndCkuXG4gICAgICAgIGlmIChnZXRFdmVudENoYXJDb2RlKG5hdGl2ZUV2ZW50KSA9PT0gMCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wS2V5RG93bjpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BLZXlVcDpcbiAgICAgICAgRXZlbnRDb25zdHJ1Y3RvciA9IFN5bnRoZXRpY0tleWJvYXJkRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcEJsdXI6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRm9jdXM6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNGb2N1c0V2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BDbGljazpcbiAgICAgICAgLy8gRmlyZWZveCBjcmVhdGVzIGEgY2xpY2sgZXZlbnQgb24gcmlnaHQgbW91c2UgY2xpY2tzLiBUaGlzIHJlbW92ZXMgdGhlXG4gICAgICAgIC8vIHVud2FudGVkIGNsaWNrIGV2ZW50cy5cbiAgICAgICAgaWYgKG5hdGl2ZUV2ZW50LmJ1dHRvbiA9PT0gMikge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAvKiBmYWxscyB0aHJvdWdoICovXG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29udGV4dE1lbnU6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRG91YmxlQ2xpY2s6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTW91c2VEb3duOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcE1vdXNlTW92ZTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU91dDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BNb3VzZU92ZXI6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wTW91c2VVcDpcbiAgICAgICAgRXZlbnRDb25zdHJ1Y3RvciA9IFN5bnRoZXRpY01vdXNlRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWc6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHJhZ0VuZDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEcmFnRW50ZXI6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHJhZ0V4aXQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wRHJhZ0xlYXZlOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWdPdmVyOlxuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcERyYWdTdGFydDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BEcm9wOlxuICAgICAgICBFdmVudENvbnN0cnVjdG9yID0gU3ludGhldGljRHJhZ0V2ZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BUb3VjaENhbmNlbDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BUb3VjaEVuZDpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BUb3VjaE1vdmU6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wVG91Y2hTdGFydDpcbiAgICAgICAgRXZlbnRDb25zdHJ1Y3RvciA9IFN5bnRoZXRpY1RvdWNoRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFNjcm9sbDpcbiAgICAgICAgRXZlbnRDb25zdHJ1Y3RvciA9IFN5bnRoZXRpY1VJRXZlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSB0b3BMZXZlbFR5cGVzLnRvcFdoZWVsOlxuICAgICAgICBFdmVudENvbnN0cnVjdG9yID0gU3ludGhldGljV2hlZWxFdmVudDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wQ29weTpcbiAgICAgIGNhc2UgdG9wTGV2ZWxUeXBlcy50b3BDdXQ6XG4gICAgICBjYXNlIHRvcExldmVsVHlwZXMudG9wUGFzdGU6XG4gICAgICAgIEV2ZW50Q29uc3RydWN0b3IgPSBTeW50aGV0aWNDbGlwYm9hcmRFdmVudDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgICFFdmVudENvbnN0cnVjdG9yID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1NpbXBsZUV2ZW50UGx1Z2luOiBVbmhhbmRsZWQgZXZlbnQgdHlwZSwgYCVzYC4nLCB0b3BMZXZlbFR5cGUpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICB2YXIgZXZlbnQgPSBFdmVudENvbnN0cnVjdG9yLmdldFBvb2xlZChkaXNwYXRjaENvbmZpZywgdG9wTGV2ZWxUYXJnZXRJRCwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbiAgICBFdmVudFByb3BhZ2F0b3JzLmFjY3VtdWxhdGVUd29QaGFzZURpc3BhdGNoZXMoZXZlbnQpO1xuICAgIHJldHVybiBldmVudDtcbiAgfSxcblxuICBkaWRQdXRMaXN0ZW5lcjogZnVuY3Rpb24gKGlkLCByZWdpc3RyYXRpb25OYW1lLCBsaXN0ZW5lcikge1xuICAgIC8vIE1vYmlsZSBTYWZhcmkgZG9lcyBub3QgZmlyZSBwcm9wZXJseSBidWJibGUgY2xpY2sgZXZlbnRzIG9uXG4gICAgLy8gbm9uLWludGVyYWN0aXZlIGVsZW1lbnRzLCB3aGljaCBtZWFucyBkZWxlZ2F0ZWQgY2xpY2sgbGlzdGVuZXJzIGRvIG5vdFxuICAgIC8vIGZpcmUuIFRoZSB3b3JrYXJvdW5kIGZvciB0aGlzIGJ1ZyBpbnZvbHZlcyBhdHRhY2hpbmcgYW4gZW1wdHkgY2xpY2tcbiAgICAvLyBsaXN0ZW5lciBvbiB0aGUgdGFyZ2V0IG5vZGUuXG4gICAgaWYgKHJlZ2lzdHJhdGlvbk5hbWUgPT09IE9OX0NMSUNLX0tFWSkge1xuICAgICAgdmFyIG5vZGUgPSBSZWFjdE1vdW50LmdldE5vZGUoaWQpO1xuICAgICAgaWYgKCFvbkNsaWNrTGlzdGVuZXJzW2lkXSkge1xuICAgICAgICBvbkNsaWNrTGlzdGVuZXJzW2lkXSA9IEV2ZW50TGlzdGVuZXIubGlzdGVuKG5vZGUsICdjbGljaycsIGVtcHR5RnVuY3Rpb24pO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB3aWxsRGVsZXRlTGlzdGVuZXI6IGZ1bmN0aW9uIChpZCwgcmVnaXN0cmF0aW9uTmFtZSkge1xuICAgIGlmIChyZWdpc3RyYXRpb25OYW1lID09PSBPTl9DTElDS19LRVkpIHtcbiAgICAgIG9uQ2xpY2tMaXN0ZW5lcnNbaWRdLnJlbW92ZSgpO1xuICAgICAgZGVsZXRlIG9uQ2xpY2tMaXN0ZW5lcnNbaWRdO1xuICAgIH1cbiAgfVxuXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNpbXBsZUV2ZW50UGx1Z2luOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNDbGlwYm9hcmRFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL2NsaXBib2FyZC1hcGlzL1xuICovXG52YXIgQ2xpcGJvYXJkRXZlbnRJbnRlcmZhY2UgPSB7XG4gIGNsaXBib2FyZERhdGE6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHJldHVybiAnY2xpcGJvYXJkRGF0YScgaW4gZXZlbnQgPyBldmVudC5jbGlwYm9hcmREYXRhIDogd2luZG93LmNsaXBib2FyZERhdGE7XG4gIH1cbn07XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQGV4dGVuZHMge1N5bnRoZXRpY1VJRXZlbnR9XG4gKi9cbmZ1bmN0aW9uIFN5bnRoZXRpY0NsaXBib2FyZEV2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY0V2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNFdmVudC5hdWdtZW50Q2xhc3MoU3ludGhldGljQ2xpcGJvYXJkRXZlbnQsIENsaXBib2FyZEV2ZW50SW50ZXJmYWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNDbGlwYm9hcmRFdmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljQ29tcG9zaXRpb25FdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy8jZXZlbnRzLWNvbXBvc2l0aW9uZXZlbnRzXG4gKi9cbnZhciBDb21wb3NpdGlvbkV2ZW50SW50ZXJmYWNlID0ge1xuICBkYXRhOiBudWxsXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNVSUV2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNDb21wb3NpdGlvbkV2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY0V2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNFdmVudC5hdWdtZW50Q2xhc3MoU3ludGhldGljQ29tcG9zaXRpb25FdmVudCwgQ29tcG9zaXRpb25FdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljQ29tcG9zaXRpb25FdmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljRHJhZ0V2ZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFN5bnRoZXRpY01vdXNlRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY01vdXNlRXZlbnQnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIERyYWdFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvXG4gKi9cbnZhciBEcmFnRXZlbnRJbnRlcmZhY2UgPSB7XG4gIGRhdGFUcmFuc2ZlcjogbnVsbFxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljRHJhZ0V2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY01vdXNlRXZlbnQuY2FsbCh0aGlzLCBkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG59XG5cblN5bnRoZXRpY01vdXNlRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0RyYWdFdmVudCwgRHJhZ0V2ZW50SW50ZXJmYWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNEcmFnRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY0V2ZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFBvb2xlZENsYXNzID0gcmVxdWlyZSgnLi9Qb29sZWRDbGFzcycpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJ2ZianMvbGliL2VtcHR5RnVuY3Rpb24nKTtcbnZhciB3YXJuaW5nID0gcmVxdWlyZSgnZmJqcy9saWIvd2FybmluZycpO1xuXG4vKipcbiAqIEBpbnRlcmZhY2UgRXZlbnRcbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzL1xuICovXG52YXIgRXZlbnRJbnRlcmZhY2UgPSB7XG4gIHR5cGU6IG51bGwsXG4gIHRhcmdldDogbnVsbCxcbiAgLy8gY3VycmVudFRhcmdldCBpcyBzZXQgd2hlbiBkaXNwYXRjaGluZzsgbm8gdXNlIGluIGNvcHlpbmcgaXQgaGVyZVxuICBjdXJyZW50VGFyZ2V0OiBlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zTnVsbCxcbiAgZXZlbnRQaGFzZTogbnVsbCxcbiAgYnViYmxlczogbnVsbCxcbiAgY2FuY2VsYWJsZTogbnVsbCxcbiAgdGltZVN0YW1wOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gZXZlbnQudGltZVN0YW1wIHx8IERhdGUubm93KCk7XG4gIH0sXG4gIGRlZmF1bHRQcmV2ZW50ZWQ6IG51bGwsXG4gIGlzVHJ1c3RlZDogbnVsbFxufTtcblxuLyoqXG4gKiBTeW50aGV0aWMgZXZlbnRzIGFyZSBkaXNwYXRjaGVkIGJ5IGV2ZW50IHBsdWdpbnMsIHR5cGljYWxseSBpbiByZXNwb25zZSB0byBhXG4gKiB0b3AtbGV2ZWwgZXZlbnQgZGVsZWdhdGlvbiBoYW5kbGVyLlxuICpcbiAqIFRoZXNlIHN5c3RlbXMgc2hvdWxkIGdlbmVyYWxseSB1c2UgcG9vbGluZyB0byByZWR1Y2UgdGhlIGZyZXF1ZW5jeSBvZiBnYXJiYWdlXG4gKiBjb2xsZWN0aW9uLiBUaGUgc3lzdGVtIHNob3VsZCBjaGVjayBgaXNQZXJzaXN0ZW50YCB0byBkZXRlcm1pbmUgd2hldGhlciB0aGVcbiAqIGV2ZW50IHNob3VsZCBiZSByZWxlYXNlZCBpbnRvIHRoZSBwb29sIGFmdGVyIGJlaW5nIGRpc3BhdGNoZWQuIFVzZXJzIHRoYXRcbiAqIG5lZWQgYSBwZXJzaXN0ZWQgZXZlbnQgc2hvdWxkIGludm9rZSBgcGVyc2lzdGAuXG4gKlxuICogU3ludGhldGljIGV2ZW50cyAoYW5kIHN1YmNsYXNzZXMpIGltcGxlbWVudCB0aGUgRE9NIExldmVsIDMgRXZlbnRzIEFQSSBieVxuICogbm9ybWFsaXppbmcgYnJvd3NlciBxdWlya3MuIFN1YmNsYXNzZXMgZG8gbm90IG5lY2Vzc2FyaWx5IGhhdmUgdG8gaW1wbGVtZW50IGFcbiAqIERPTSBpbnRlcmZhY2U7IGN1c3RvbSBhcHBsaWNhdGlvbi1zcGVjaWZpYyBldmVudHMgY2FuIGFsc28gc3ViY2xhc3MgdGhpcy5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKi9cbmZ1bmN0aW9uIFN5bnRoZXRpY0V2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIHRoaXMuZGlzcGF0Y2hDb25maWcgPSBkaXNwYXRjaENvbmZpZztcbiAgdGhpcy5kaXNwYXRjaE1hcmtlciA9IGRpc3BhdGNoTWFya2VyO1xuICB0aGlzLm5hdGl2ZUV2ZW50ID0gbmF0aXZlRXZlbnQ7XG5cbiAgdmFyIEludGVyZmFjZSA9IHRoaXMuY29uc3RydWN0b3IuSW50ZXJmYWNlO1xuICBmb3IgKHZhciBwcm9wTmFtZSBpbiBJbnRlcmZhY2UpIHtcbiAgICBpZiAoIUludGVyZmFjZS5oYXNPd25Qcm9wZXJ0eShwcm9wTmFtZSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICB2YXIgbm9ybWFsaXplID0gSW50ZXJmYWNlW3Byb3BOYW1lXTtcbiAgICBpZiAobm9ybWFsaXplKSB7XG4gICAgICB0aGlzW3Byb3BOYW1lXSA9IG5vcm1hbGl6ZShuYXRpdmVFdmVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwcm9wTmFtZSA9PT0gJ3RhcmdldCcpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBuYXRpdmVFdmVudFRhcmdldDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXNbcHJvcE5hbWVdID0gbmF0aXZlRXZlbnRbcHJvcE5hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBkZWZhdWx0UHJldmVudGVkID0gbmF0aXZlRXZlbnQuZGVmYXVsdFByZXZlbnRlZCAhPSBudWxsID8gbmF0aXZlRXZlbnQuZGVmYXVsdFByZXZlbnRlZCA6IG5hdGl2ZUV2ZW50LnJldHVyblZhbHVlID09PSBmYWxzZTtcbiAgaWYgKGRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICB0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNUcnVlO1xuICB9IGVsc2Uge1xuICAgIHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0ZhbHNlO1xuICB9XG4gIHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSBlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zRmFsc2U7XG59XG5cbmFzc2lnbihTeW50aGV0aWNFdmVudC5wcm90b3R5cGUsIHtcblxuICBwcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZGVmYXVsdFByZXZlbnRlZCA9IHRydWU7XG4gICAgdmFyIGV2ZW50ID0gdGhpcy5uYXRpdmVFdmVudDtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZXZlbnQsICdUaGlzIHN5bnRoZXRpYyBldmVudCBpcyByZXVzZWQgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMuIElmIHlvdVxcJ3JlICcgKyAnc2VlaW5nIHRoaXMsIHlvdVxcJ3JlIGNhbGxpbmcgYHByZXZlbnREZWZhdWx0YCBvbiBhICcgKyAncmVsZWFzZWQvbnVsbGlmaWVkIHN5bnRoZXRpYyBldmVudC4gVGhpcyBpcyBhIG5vLW9wLiBTZWUgJyArICdodHRwczovL2ZiLm1lL3JlYWN0LWV2ZW50LXBvb2xpbmcgZm9yIG1vcmUgaW5mb3JtYXRpb24uJykgOiB1bmRlZmluZWQ7XG4gICAgfVxuICAgIGlmICghZXZlbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQucHJldmVudERlZmF1bHQpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV2ZW50LnJldHVyblZhbHVlID0gZmFsc2U7XG4gICAgfVxuICAgIHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc1RydWU7XG4gIH0sXG5cbiAgc3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV2ZW50ID0gdGhpcy5uYXRpdmVFdmVudDtcbiAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZXZlbnQsICdUaGlzIHN5bnRoZXRpYyBldmVudCBpcyByZXVzZWQgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnMuIElmIHlvdVxcJ3JlICcgKyAnc2VlaW5nIHRoaXMsIHlvdVxcJ3JlIGNhbGxpbmcgYHN0b3BQcm9wYWdhdGlvbmAgb24gYSAnICsgJ3JlbGVhc2VkL251bGxpZmllZCBzeW50aGV0aWMgZXZlbnQuIFRoaXMgaXMgYSBuby1vcC4gU2VlICcgKyAnaHR0cHM6Ly9mYi5tZS9yZWFjdC1ldmVudC1wb29saW5nIGZvciBtb3JlIGluZm9ybWF0aW9uLicpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgICBpZiAoIWV2ZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LnN0b3BQcm9wYWdhdGlvbikge1xuICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGV2ZW50LmNhbmNlbEJ1YmJsZSA9IHRydWU7XG4gICAgfVxuICAgIHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSBlbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zVHJ1ZTtcbiAgfSxcblxuICAvKipcbiAgICogV2UgcmVsZWFzZSBhbGwgZGlzcGF0Y2hlZCBgU3ludGhldGljRXZlbnRgcyBhZnRlciBlYWNoIGV2ZW50IGxvb3AsIGFkZGluZ1xuICAgKiB0aGVtIGJhY2sgaW50byB0aGUgcG9vbC4gVGhpcyBhbGxvd3MgYSB3YXkgdG8gaG9sZCBvbnRvIGEgcmVmZXJlbmNlIHRoYXRcbiAgICogd29uJ3QgYmUgYWRkZWQgYmFjayBpbnRvIHRoZSBwb29sLlxuICAgKi9cbiAgcGVyc2lzdDogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuaXNQZXJzaXN0ZW50ID0gZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc1RydWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENoZWNrcyBpZiB0aGlzIGV2ZW50IHNob3VsZCBiZSByZWxlYXNlZCBiYWNrIGludG8gdGhlIHBvb2wuXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhpcyBzaG91bGQgbm90IGJlIHJlbGVhc2VkLCBmYWxzZSBvdGhlcndpc2UuXG4gICAqL1xuICBpc1BlcnNpc3RlbnQ6IGVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNGYWxzZSxcblxuICAvKipcbiAgICogYFBvb2xlZENsYXNzYCBsb29rcyBmb3IgYGRlc3RydWN0b3JgIG9uIGVhY2ggaW5zdGFuY2UgaXQgcmVsZWFzZXMuXG4gICAqL1xuICBkZXN0cnVjdG9yOiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIEludGVyZmFjZSA9IHRoaXMuY29uc3RydWN0b3IuSW50ZXJmYWNlO1xuICAgIGZvciAodmFyIHByb3BOYW1lIGluIEludGVyZmFjZSkge1xuICAgICAgdGhpc1twcm9wTmFtZV0gPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLmRpc3BhdGNoQ29uZmlnID0gbnVsbDtcbiAgICB0aGlzLmRpc3BhdGNoTWFya2VyID0gbnVsbDtcbiAgICB0aGlzLm5hdGl2ZUV2ZW50ID0gbnVsbDtcbiAgfVxuXG59KTtcblxuU3ludGhldGljRXZlbnQuSW50ZXJmYWNlID0gRXZlbnRJbnRlcmZhY2U7XG5cbi8qKlxuICogSGVscGVyIHRvIHJlZHVjZSBib2lsZXJwbGF0ZSB3aGVuIGNyZWF0aW5nIHN1YmNsYXNzZXMuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gQ2xhc3NcbiAqIEBwYXJhbSB7P29iamVjdH0gSW50ZXJmYWNlXG4gKi9cblN5bnRoZXRpY0V2ZW50LmF1Z21lbnRDbGFzcyA9IGZ1bmN0aW9uIChDbGFzcywgSW50ZXJmYWNlKSB7XG4gIHZhciBTdXBlciA9IHRoaXM7XG5cbiAgdmFyIHByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3VwZXIucHJvdG90eXBlKTtcbiAgYXNzaWduKHByb3RvdHlwZSwgQ2xhc3MucHJvdG90eXBlKTtcbiAgQ2xhc3MucHJvdG90eXBlID0gcHJvdG90eXBlO1xuICBDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBDbGFzcztcblxuICBDbGFzcy5JbnRlcmZhY2UgPSBhc3NpZ24oe30sIFN1cGVyLkludGVyZmFjZSwgSW50ZXJmYWNlKTtcbiAgQ2xhc3MuYXVnbWVudENsYXNzID0gU3VwZXIuYXVnbWVudENsYXNzO1xuXG4gIFBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhDbGFzcywgUG9vbGVkQ2xhc3MuZm91ckFyZ3VtZW50UG9vbGVyKTtcbn07XG5cblBvb2xlZENsYXNzLmFkZFBvb2xpbmdUbyhTeW50aGV0aWNFdmVudCwgUG9vbGVkQ2xhc3MuZm91ckFyZ3VtZW50UG9vbGVyKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNFdmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljRm9jdXNFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNVSUV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNVSUV2ZW50Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBGb2N1c0V2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cbiAqL1xudmFyIEZvY3VzRXZlbnRJbnRlcmZhY2UgPSB7XG4gIHJlbGF0ZWRUYXJnZXQ6IG51bGxcbn07XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IGRpc3BhdGNoQ29uZmlnIENvbmZpZ3VyYXRpb24gdXNlZCB0byBkaXNwYXRjaCB0aGlzIGV2ZW50LlxuICogQHBhcmFtIHtzdHJpbmd9IGRpc3BhdGNoTWFya2VyIE1hcmtlciBpZGVudGlmeWluZyB0aGUgZXZlbnQgdGFyZ2V0LlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQGV4dGVuZHMge1N5bnRoZXRpY1VJRXZlbnR9XG4gKi9cbmZ1bmN0aW9uIFN5bnRoZXRpY0ZvY3VzRXZlbnQoZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgU3ludGhldGljVUlFdmVudC5jYWxsKHRoaXMsIGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KTtcbn1cblxuU3ludGhldGljVUlFdmVudC5hdWdtZW50Q2xhc3MoU3ludGhldGljRm9jdXNFdmVudCwgRm9jdXNFdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljRm9jdXNFdmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljSW5wdXRFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljRXZlbnQnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIEV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTMvV0QtRE9NLUxldmVsLTMtRXZlbnRzLTIwMTMxMTA1XG4gKiAgICAgIC8jZXZlbnRzLWlucHV0ZXZlbnRzXG4gKi9cbnZhciBJbnB1dEV2ZW50SW50ZXJmYWNlID0ge1xuICBkYXRhOiBudWxsXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNVSUV2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNJbnB1dEV2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY0V2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNFdmVudC5hdWdtZW50Q2xhc3MoU3ludGhldGljSW5wdXRFdmVudCwgSW5wdXRFdmVudEludGVyZmFjZSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ludGhldGljSW5wdXRFdmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgU3ludGhldGljS2V5Ym9hcmRFdmVudFxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBTeW50aGV0aWNVSUV2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNVSUV2ZW50Jyk7XG5cbnZhciBnZXRFdmVudENoYXJDb2RlID0gcmVxdWlyZSgnLi9nZXRFdmVudENoYXJDb2RlJyk7XG52YXIgZ2V0RXZlbnRLZXkgPSByZXF1aXJlKCcuL2dldEV2ZW50S2V5Jyk7XG52YXIgZ2V0RXZlbnRNb2RpZmllclN0YXRlID0gcmVxdWlyZSgnLi9nZXRFdmVudE1vZGlmaWVyU3RhdGUnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIEtleWJvYXJkRXZlbnRcbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzL1xuICovXG52YXIgS2V5Ym9hcmRFdmVudEludGVyZmFjZSA9IHtcbiAga2V5OiBnZXRFdmVudEtleSxcbiAgbG9jYXRpb246IG51bGwsXG4gIGN0cmxLZXk6IG51bGwsXG4gIHNoaWZ0S2V5OiBudWxsLFxuICBhbHRLZXk6IG51bGwsXG4gIG1ldGFLZXk6IG51bGwsXG4gIHJlcGVhdDogbnVsbCxcbiAgbG9jYWxlOiBudWxsLFxuICBnZXRNb2RpZmllclN0YXRlOiBnZXRFdmVudE1vZGlmaWVyU3RhdGUsXG4gIC8vIExlZ2FjeSBJbnRlcmZhY2VcbiAgY2hhckNvZGU6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIC8vIGBjaGFyQ29kZWAgaXMgdGhlIHJlc3VsdCBvZiBhIEtleVByZXNzIGV2ZW50IGFuZCByZXByZXNlbnRzIHRoZSB2YWx1ZSBvZlxuICAgIC8vIHRoZSBhY3R1YWwgcHJpbnRhYmxlIGNoYXJhY3Rlci5cblxuICAgIC8vIEtleVByZXNzIGlzIGRlcHJlY2F0ZWQsIGJ1dCBpdHMgcmVwbGFjZW1lbnQgaXMgbm90IHlldCBmaW5hbCBhbmQgbm90XG4gICAgLy8gaW1wbGVtZW50ZWQgaW4gYW55IG1ham9yIGJyb3dzZXIuIE9ubHkgS2V5UHJlc3MgaGFzIGNoYXJDb2RlLlxuICAgIGlmIChldmVudC50eXBlID09PSAna2V5cHJlc3MnKSB7XG4gICAgICByZXR1cm4gZ2V0RXZlbnRDaGFyQ29kZShldmVudCk7XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9LFxuICBrZXlDb2RlOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAvLyBga2V5Q29kZWAgaXMgdGhlIHJlc3VsdCBvZiBhIEtleURvd24vVXAgZXZlbnQgYW5kIHJlcHJlc2VudHMgdGhlIHZhbHVlIG9mXG4gICAgLy8gcGh5c2ljYWwga2V5Ym9hcmQga2V5LlxuXG4gICAgLy8gVGhlIGFjdHVhbCBtZWFuaW5nIG9mIHRoZSB2YWx1ZSBkZXBlbmRzIG9uIHRoZSB1c2Vycycga2V5Ym9hcmQgbGF5b3V0XG4gICAgLy8gd2hpY2ggY2Fubm90IGJlIGRldGVjdGVkLiBBc3N1bWluZyB0aGF0IGl0IGlzIGEgVVMga2V5Ym9hcmQgbGF5b3V0XG4gICAgLy8gcHJvdmlkZXMgYSBzdXJwcmlzaW5nbHkgYWNjdXJhdGUgbWFwcGluZyBmb3IgVVMgYW5kIEV1cm9wZWFuIHVzZXJzLlxuICAgIC8vIER1ZSB0byB0aGlzLCBpdCBpcyBsZWZ0IHRvIHRoZSB1c2VyIHRvIGltcGxlbWVudCBhdCB0aGlzIHRpbWUuXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdrZXlkb3duJyB8fCBldmVudC50eXBlID09PSAna2V5dXAnKSB7XG4gICAgICByZXR1cm4gZXZlbnQua2V5Q29kZTtcbiAgICB9XG4gICAgcmV0dXJuIDA7XG4gIH0sXG4gIHdoaWNoOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAvLyBgd2hpY2hgIGlzIGFuIGFsaWFzIGZvciBlaXRoZXIgYGtleUNvZGVgIG9yIGBjaGFyQ29kZWAgZGVwZW5kaW5nIG9uIHRoZVxuICAgIC8vIHR5cGUgb2YgdGhlIGV2ZW50LlxuICAgIGlmIChldmVudC50eXBlID09PSAna2V5cHJlc3MnKSB7XG4gICAgICByZXR1cm4gZ2V0RXZlbnRDaGFyQ29kZShldmVudCk7XG4gICAgfVxuICAgIGlmIChldmVudC50eXBlID09PSAna2V5ZG93bicgfHwgZXZlbnQudHlwZSA9PT0gJ2tleXVwJykge1xuICAgICAgcmV0dXJuIGV2ZW50LmtleUNvZGU7XG4gICAgfVxuICAgIHJldHVybiAwO1xuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNVSUV2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNLZXlib2FyZEV2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY1VJRXZlbnQuY2FsbCh0aGlzLCBkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG59XG5cblN5bnRoZXRpY1VJRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY0tleWJvYXJkRXZlbnQsIEtleWJvYXJkRXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY0tleWJvYXJkRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY01vdXNlRXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljVUlFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljVUlFdmVudCcpO1xudmFyIFZpZXdwb3J0TWV0cmljcyA9IHJlcXVpcmUoJy4vVmlld3BvcnRNZXRyaWNzJyk7XG5cbnZhciBnZXRFdmVudE1vZGlmaWVyU3RhdGUgPSByZXF1aXJlKCcuL2dldEV2ZW50TW9kaWZpZXJTdGF0ZScpO1xuXG4vKipcbiAqIEBpbnRlcmZhY2UgTW91c2VFdmVudFxuICogQHNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvXG4gKi9cbnZhciBNb3VzZUV2ZW50SW50ZXJmYWNlID0ge1xuICBzY3JlZW5YOiBudWxsLFxuICBzY3JlZW5ZOiBudWxsLFxuICBjbGllbnRYOiBudWxsLFxuICBjbGllbnRZOiBudWxsLFxuICBjdHJsS2V5OiBudWxsLFxuICBzaGlmdEtleTogbnVsbCxcbiAgYWx0S2V5OiBudWxsLFxuICBtZXRhS2V5OiBudWxsLFxuICBnZXRNb2RpZmllclN0YXRlOiBnZXRFdmVudE1vZGlmaWVyU3RhdGUsXG4gIGJ1dHRvbjogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgLy8gV2Via2l0LCBGaXJlZm94LCBJRTkrXG4gICAgLy8gd2hpY2g6ICAxIDIgM1xuICAgIC8vIGJ1dHRvbjogMCAxIDIgKHN0YW5kYXJkKVxuICAgIHZhciBidXR0b24gPSBldmVudC5idXR0b247XG4gICAgaWYgKCd3aGljaCcgaW4gZXZlbnQpIHtcbiAgICAgIHJldHVybiBidXR0b247XG4gICAgfVxuICAgIC8vIElFPDlcbiAgICAvLyB3aGljaDogIHVuZGVmaW5lZFxuICAgIC8vIGJ1dHRvbjogMCAwIDBcbiAgICAvLyBidXR0b246IDEgNCAyIChvbm1vdXNldXApXG4gICAgcmV0dXJuIGJ1dHRvbiA9PT0gMiA/IDIgOiBidXR0b24gPT09IDQgPyAxIDogMDtcbiAgfSxcbiAgYnV0dG9uczogbnVsbCxcbiAgcmVsYXRlZFRhcmdldDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuIGV2ZW50LnJlbGF0ZWRUYXJnZXQgfHwgKGV2ZW50LmZyb21FbGVtZW50ID09PSBldmVudC5zcmNFbGVtZW50ID8gZXZlbnQudG9FbGVtZW50IDogZXZlbnQuZnJvbUVsZW1lbnQpO1xuICB9LFxuICAvLyBcIlByb3ByaWV0YXJ5XCIgSW50ZXJmYWNlLlxuICBwYWdlWDogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuICdwYWdlWCcgaW4gZXZlbnQgPyBldmVudC5wYWdlWCA6IGV2ZW50LmNsaWVudFggKyBWaWV3cG9ydE1ldHJpY3MuY3VycmVudFNjcm9sbExlZnQ7XG4gIH0sXG4gIHBhZ2VZOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gJ3BhZ2VZJyBpbiBldmVudCA/IGV2ZW50LnBhZ2VZIDogZXZlbnQuY2xpZW50WSArIFZpZXdwb3J0TWV0cmljcy5jdXJyZW50U2Nyb2xsVG9wO1xuICB9XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNVSUV2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNNb3VzZUV2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY1VJRXZlbnQuY2FsbCh0aGlzLCBkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG59XG5cblN5bnRoZXRpY1VJRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY01vdXNlRXZlbnQsIE1vdXNlRXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY01vdXNlRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFN5bnRoZXRpY1RvdWNoRXZlbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgU3ludGhldGljVUlFdmVudCA9IHJlcXVpcmUoJy4vU3ludGhldGljVUlFdmVudCcpO1xuXG52YXIgZ2V0RXZlbnRNb2RpZmllclN0YXRlID0gcmVxdWlyZSgnLi9nZXRFdmVudE1vZGlmaWVyU3RhdGUnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIFRvdWNoRXZlbnRcbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvdG91Y2gtZXZlbnRzL1xuICovXG52YXIgVG91Y2hFdmVudEludGVyZmFjZSA9IHtcbiAgdG91Y2hlczogbnVsbCxcbiAgdGFyZ2V0VG91Y2hlczogbnVsbCxcbiAgY2hhbmdlZFRvdWNoZXM6IG51bGwsXG4gIGFsdEtleTogbnVsbCxcbiAgbWV0YUtleTogbnVsbCxcbiAgY3RybEtleTogbnVsbCxcbiAgc2hpZnRLZXk6IG51bGwsXG4gIGdldE1vZGlmaWVyU3RhdGU6IGdldEV2ZW50TW9kaWZpZXJTdGF0ZVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljVUlFdmVudH1cbiAqL1xuZnVuY3Rpb24gU3ludGhldGljVG91Y2hFdmVudChkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCkge1xuICBTeW50aGV0aWNVSUV2ZW50LmNhbGwodGhpcywgZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpO1xufVxuXG5TeW50aGV0aWNVSUV2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNUb3VjaEV2ZW50LCBUb3VjaEV2ZW50SW50ZXJmYWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNUb3VjaEV2ZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNVSUV2ZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFN5bnRoZXRpY0V2ZW50ID0gcmVxdWlyZSgnLi9TeW50aGV0aWNFdmVudCcpO1xuXG52YXIgZ2V0RXZlbnRUYXJnZXQgPSByZXF1aXJlKCcuL2dldEV2ZW50VGFyZ2V0Jyk7XG5cbi8qKlxuICogQGludGVyZmFjZSBVSUV2ZW50XG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy9cbiAqL1xudmFyIFVJRXZlbnRJbnRlcmZhY2UgPSB7XG4gIHZpZXc6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIGlmIChldmVudC52aWV3KSB7XG4gICAgICByZXR1cm4gZXZlbnQudmlldztcbiAgICB9XG5cbiAgICB2YXIgdGFyZ2V0ID0gZ2V0RXZlbnRUYXJnZXQoZXZlbnQpO1xuICAgIGlmICh0YXJnZXQgIT0gbnVsbCAmJiB0YXJnZXQud2luZG93ID09PSB0YXJnZXQpIHtcbiAgICAgIC8vIHRhcmdldCBpcyBhIHdpbmRvdyBvYmplY3RcbiAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgfVxuXG4gICAgdmFyIGRvYyA9IHRhcmdldC5vd25lckRvY3VtZW50O1xuICAgIC8vIFRPRE86IEZpZ3VyZSBvdXQgd2h5IGBvd25lckRvY3VtZW50YCBpcyBzb21ldGltZXMgdW5kZWZpbmVkIGluIElFOC5cbiAgICBpZiAoZG9jKSB7XG4gICAgICByZXR1cm4gZG9jLmRlZmF1bHRWaWV3IHx8IGRvYy5wYXJlbnRXaW5kb3c7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB3aW5kb3c7XG4gICAgfVxuICB9LFxuICBkZXRhaWw6IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHJldHVybiBldmVudC5kZXRhaWwgfHwgMDtcbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge29iamVjdH0gZGlzcGF0Y2hDb25maWcgQ29uZmlndXJhdGlvbiB1c2VkIHRvIGRpc3BhdGNoIHRoaXMgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZGlzcGF0Y2hNYXJrZXIgTWFya2VyIGlkZW50aWZ5aW5nIHRoZSBldmVudCB0YXJnZXQuXG4gKiBAcGFyYW0ge29iamVjdH0gbmF0aXZlRXZlbnQgTmF0aXZlIGJyb3dzZXIgZXZlbnQuXG4gKiBAZXh0ZW5kcyB7U3ludGhldGljRXZlbnR9XG4gKi9cbmZ1bmN0aW9uIFN5bnRoZXRpY1VJRXZlbnQoZGlzcGF0Y2hDb25maWcsIGRpc3BhdGNoTWFya2VyLCBuYXRpdmVFdmVudCwgbmF0aXZlRXZlbnRUYXJnZXQpIHtcbiAgU3ludGhldGljRXZlbnQuY2FsbCh0aGlzLCBkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG59XG5cblN5bnRoZXRpY0V2ZW50LmF1Z21lbnRDbGFzcyhTeW50aGV0aWNVSUV2ZW50LCBVSUV2ZW50SW50ZXJmYWNlKTtcblxubW9kdWxlLmV4cG9ydHMgPSBTeW50aGV0aWNVSUV2ZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBTeW50aGV0aWNXaGVlbEV2ZW50XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFN5bnRoZXRpY01vdXNlRXZlbnQgPSByZXF1aXJlKCcuL1N5bnRoZXRpY01vdXNlRXZlbnQnKTtcblxuLyoqXG4gKiBAaW50ZXJmYWNlIFdoZWVsRXZlbnRcbiAqIEBzZWUgaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzL1xuICovXG52YXIgV2hlZWxFdmVudEludGVyZmFjZSA9IHtcbiAgZGVsdGFYOiBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICByZXR1cm4gJ2RlbHRhWCcgaW4gZXZlbnQgPyBldmVudC5kZWx0YVggOlxuICAgIC8vIEZhbGxiYWNrIHRvIGB3aGVlbERlbHRhWGAgZm9yIFdlYmtpdCBhbmQgbm9ybWFsaXplIChyaWdodCBpcyBwb3NpdGl2ZSkuXG4gICAgJ3doZWVsRGVsdGFYJyBpbiBldmVudCA/IC1ldmVudC53aGVlbERlbHRhWCA6IDA7XG4gIH0sXG4gIGRlbHRhWTogZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgcmV0dXJuICdkZWx0YVknIGluIGV2ZW50ID8gZXZlbnQuZGVsdGFZIDpcbiAgICAvLyBGYWxsYmFjayB0byBgd2hlZWxEZWx0YVlgIGZvciBXZWJraXQgYW5kIG5vcm1hbGl6ZSAoZG93biBpcyBwb3NpdGl2ZSkuXG4gICAgJ3doZWVsRGVsdGFZJyBpbiBldmVudCA/IC1ldmVudC53aGVlbERlbHRhWSA6XG4gICAgLy8gRmFsbGJhY2sgdG8gYHdoZWVsRGVsdGFgIGZvciBJRTw5IGFuZCBub3JtYWxpemUgKGRvd24gaXMgcG9zaXRpdmUpLlxuICAgICd3aGVlbERlbHRhJyBpbiBldmVudCA/IC1ldmVudC53aGVlbERlbHRhIDogMDtcbiAgfSxcbiAgZGVsdGFaOiBudWxsLFxuXG4gIC8vIEJyb3dzZXJzIHdpdGhvdXQgXCJkZWx0YU1vZGVcIiBpcyByZXBvcnRpbmcgaW4gcmF3IHdoZWVsIGRlbHRhIHdoZXJlIG9uZVxuICAvLyBub3RjaCBvbiB0aGUgc2Nyb2xsIGlzIGFsd2F5cyArLy0gMTIwLCByb3VnaGx5IGVxdWl2YWxlbnQgdG8gcGl4ZWxzLlxuICAvLyBBIGdvb2QgYXBwcm94aW1hdGlvbiBvZiBET01fREVMVEFfTElORSAoMSkgaXMgNSUgb2Ygdmlld3BvcnQgc2l6ZSBvclxuICAvLyB+NDAgcGl4ZWxzLCBmb3IgRE9NX0RFTFRBX1NDUkVFTiAoMikgaXQgaXMgODcuNSUgb2Ygdmlld3BvcnQgc2l6ZS5cbiAgZGVsdGFNb2RlOiBudWxsXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7b2JqZWN0fSBkaXNwYXRjaENvbmZpZyBDb25maWd1cmF0aW9uIHVzZWQgdG8gZGlzcGF0Y2ggdGhpcyBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBkaXNwYXRjaE1hcmtlciBNYXJrZXIgaWRlbnRpZnlpbmcgdGhlIGV2ZW50IHRhcmdldC5cbiAqIEBwYXJhbSB7b2JqZWN0fSBuYXRpdmVFdmVudCBOYXRpdmUgYnJvd3NlciBldmVudC5cbiAqIEBleHRlbmRzIHtTeW50aGV0aWNNb3VzZUV2ZW50fVxuICovXG5mdW5jdGlvbiBTeW50aGV0aWNXaGVlbEV2ZW50KGRpc3BhdGNoQ29uZmlnLCBkaXNwYXRjaE1hcmtlciwgbmF0aXZlRXZlbnQsIG5hdGl2ZUV2ZW50VGFyZ2V0KSB7XG4gIFN5bnRoZXRpY01vdXNlRXZlbnQuY2FsbCh0aGlzLCBkaXNwYXRjaENvbmZpZywgZGlzcGF0Y2hNYXJrZXIsIG5hdGl2ZUV2ZW50LCBuYXRpdmVFdmVudFRhcmdldCk7XG59XG5cblN5bnRoZXRpY01vdXNlRXZlbnQuYXVnbWVudENsYXNzKFN5bnRoZXRpY1doZWVsRXZlbnQsIFdoZWVsRXZlbnRJbnRlcmZhY2UpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN5bnRoZXRpY1doZWVsRXZlbnQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFRyYW5zYWN0aW9uXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG5cbi8qKlxuICogYFRyYW5zYWN0aW9uYCBjcmVhdGVzIGEgYmxhY2sgYm94IHRoYXQgaXMgYWJsZSB0byB3cmFwIGFueSBtZXRob2Qgc3VjaCB0aGF0XG4gKiBjZXJ0YWluIGludmFyaWFudHMgYXJlIG1haW50YWluZWQgYmVmb3JlIGFuZCBhZnRlciB0aGUgbWV0aG9kIGlzIGludm9rZWRcbiAqIChFdmVuIGlmIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gd2hpbGUgaW52b2tpbmcgdGhlIHdyYXBwZWQgbWV0aG9kKS4gV2hvZXZlclxuICogaW5zdGFudGlhdGVzIGEgdHJhbnNhY3Rpb24gY2FuIHByb3ZpZGUgZW5mb3JjZXJzIG9mIHRoZSBpbnZhcmlhbnRzIGF0XG4gKiBjcmVhdGlvbiB0aW1lLiBUaGUgYFRyYW5zYWN0aW9uYCBjbGFzcyBpdHNlbGYgd2lsbCBzdXBwbHkgb25lIGFkZGl0aW9uYWxcbiAqIGF1dG9tYXRpYyBpbnZhcmlhbnQgZm9yIHlvdSAtIHRoZSBpbnZhcmlhbnQgdGhhdCBhbnkgdHJhbnNhY3Rpb24gaW5zdGFuY2VcbiAqIHNob3VsZCBub3QgYmUgcnVuIHdoaWxlIGl0IGlzIGFscmVhZHkgYmVpbmcgcnVuLiBZb3Ugd291bGQgdHlwaWNhbGx5IGNyZWF0ZSBhXG4gKiBzaW5nbGUgaW5zdGFuY2Ugb2YgYSBgVHJhbnNhY3Rpb25gIGZvciByZXVzZSBtdWx0aXBsZSB0aW1lcywgdGhhdCBwb3RlbnRpYWxseVxuICogaXMgdXNlZCB0byB3cmFwIHNldmVyYWwgZGlmZmVyZW50IG1ldGhvZHMuIFdyYXBwZXJzIGFyZSBleHRyZW1lbHkgc2ltcGxlIC1cbiAqIHRoZXkgb25seSByZXF1aXJlIGltcGxlbWVudGluZyB0d28gbWV0aG9kcy5cbiAqXG4gKiA8cHJlPlxuICogICAgICAgICAgICAgICAgICAgICAgIHdyYXBwZXJzIChpbmplY3RlZCBhdCBjcmVhdGlvbiB0aW1lKVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgICAgICAgICtcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8ICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tfC0tLS0tLS0tLS0tLS0tK1xuICogICAgICAgICAgICAgICAgICAgIHwgICAgICAgICAgICAgICAgIHYgICAgICAgIHwgICAgICAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICAgICAgKy0tLS0tLS0tLS0tLS0tLSsgICB8ICAgICAgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgICstLXwgICAgd3JhcHBlcjEgICB8LS0tfC0tLS0rICAgICAgICAgfFxuICogICAgICAgICAgICAgICAgICAgIHwgICB8ICArLS0tLS0tLS0tLS0tLS0tKyAgIHYgICAgfCAgICAgICAgIHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICAgfCAgICAgICAgICArLS0tLS0tLS0tLS0tLSsgIHwgICAgICAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgIHwgICAgICstLS0tfCAgIHdyYXBwZXIyICB8LS0tLS0tLS0rICAgfFxuICogICAgICAgICAgICAgICAgICAgIHwgICB8ICAgICB8ICAgICstLS0tLS0tLS0tLS0tKyAgfCAgICAgfCAgIHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICAgfCAgICAgfCAgICAgICAgICAgICAgICAgICAgIHwgICAgIHwgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCAgIHYgICAgIHYgICAgICAgICAgICAgICAgICAgICB2ICAgICB2ICAgfCB3cmFwcGVyXG4gKiAgICAgICAgICAgICAgICAgICAgfCArLS0tKyArLS0tKyAgICstLS0tLS0tLS0rICAgKy0tLSsgKy0tLSsgfCBpbnZhcmlhbnRzXG4gKiBwZXJmb3JtKGFueU1ldGhvZCkgfCB8ICAgfCB8ICAgfCAgIHwgICAgICAgICB8ICAgfCAgIHwgfCAgIHwgfCBtYWludGFpbmVkXG4gKiArLS0tLS0tLS0tLS0tLS0tLS0+fC18LS0tfC18LS0tfC0tPnxhbnlNZXRob2R8LS0tfC0tLXwtfC0tLXwtfC0tLS0tLS0tPlxuICogICAgICAgICAgICAgICAgICAgIHwgfCAgIHwgfCAgIHwgICB8ICAgICAgICAgfCAgIHwgICB8IHwgICB8IHxcbiAqICAgICAgICAgICAgICAgICAgICB8IHwgICB8IHwgICB8ICAgfCAgICAgICAgIHwgICB8ICAgfCB8ICAgfCB8XG4gKiAgICAgICAgICAgICAgICAgICAgfCB8ICAgfCB8ICAgfCAgIHwgICAgICAgICB8ICAgfCAgIHwgfCAgIHwgfFxuICogICAgICAgICAgICAgICAgICAgIHwgKy0tLSsgKy0tLSsgICArLS0tLS0tLS0tKyAgICstLS0rICstLS0rIHxcbiAqICAgICAgICAgICAgICAgICAgICB8ICBpbml0aWFsaXplICAgICAgICAgICAgICAgICAgICBjbG9zZSAgICB8XG4gKiAgICAgICAgICAgICAgICAgICAgKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tK1xuICogPC9wcmU+XG4gKlxuICogVXNlIGNhc2VzOlxuICogLSBQcmVzZXJ2aW5nIHRoZSBpbnB1dCBzZWxlY3Rpb24gcmFuZ2VzIGJlZm9yZS9hZnRlciByZWNvbmNpbGlhdGlvbi5cbiAqICAgUmVzdG9yaW5nIHNlbGVjdGlvbiBldmVuIGluIHRoZSBldmVudCBvZiBhbiB1bmV4cGVjdGVkIGVycm9yLlxuICogLSBEZWFjdGl2YXRpbmcgZXZlbnRzIHdoaWxlIHJlYXJyYW5naW5nIHRoZSBET00sIHByZXZlbnRpbmcgYmx1cnMvZm9jdXNlcyxcbiAqICAgd2hpbGUgZ3VhcmFudGVlaW5nIHRoYXQgYWZ0ZXJ3YXJkcywgdGhlIGV2ZW50IHN5c3RlbSBpcyByZWFjdGl2YXRlZC5cbiAqIC0gRmx1c2hpbmcgYSBxdWV1ZSBvZiBjb2xsZWN0ZWQgRE9NIG11dGF0aW9ucyB0byB0aGUgbWFpbiBVSSB0aHJlYWQgYWZ0ZXIgYVxuICogICByZWNvbmNpbGlhdGlvbiB0YWtlcyBwbGFjZSBpbiBhIHdvcmtlciB0aHJlYWQuXG4gKiAtIEludm9raW5nIGFueSBjb2xsZWN0ZWQgYGNvbXBvbmVudERpZFVwZGF0ZWAgY2FsbGJhY2tzIGFmdGVyIHJlbmRlcmluZyBuZXdcbiAqICAgY29udGVudC5cbiAqIC0gKEZ1dHVyZSB1c2UgY2FzZSk6IFdyYXBwaW5nIHBhcnRpY3VsYXIgZmx1c2hlcyBvZiB0aGUgYFJlYWN0V29ya2VyYCBxdWV1ZVxuICogICB0byBwcmVzZXJ2ZSB0aGUgYHNjcm9sbFRvcGAgKGFuIGF1dG9tYXRpYyBzY3JvbGwgYXdhcmUgRE9NKS5cbiAqIC0gKEZ1dHVyZSB1c2UgY2FzZSk6IExheW91dCBjYWxjdWxhdGlvbnMgYmVmb3JlIGFuZCBhZnRlciBET00gdXBkYXRlcy5cbiAqXG4gKiBUcmFuc2FjdGlvbmFsIHBsdWdpbiBBUEk6XG4gKiAtIEEgbW9kdWxlIHRoYXQgaGFzIGFuIGBpbml0aWFsaXplYCBtZXRob2QgdGhhdCByZXR1cm5zIGFueSBwcmVjb21wdXRhdGlvbi5cbiAqIC0gYW5kIGEgYGNsb3NlYCBtZXRob2QgdGhhdCBhY2NlcHRzIHRoZSBwcmVjb21wdXRhdGlvbi4gYGNsb3NlYCBpcyBpbnZva2VkXG4gKiAgIHdoZW4gdGhlIHdyYXBwZWQgcHJvY2VzcyBpcyBjb21wbGV0ZWQsIG9yIGhhcyBmYWlsZWQuXG4gKlxuICogQHBhcmFtIHtBcnJheTxUcmFuc2FjdGlvbmFsV3JhcHBlcj59IHRyYW5zYWN0aW9uV3JhcHBlciBXcmFwcGVyIG1vZHVsZXNcbiAqIHRoYXQgaW1wbGVtZW50IGBpbml0aWFsaXplYCBhbmQgYGNsb3NlYC5cbiAqIEByZXR1cm4ge1RyYW5zYWN0aW9ufSBTaW5nbGUgdHJhbnNhY3Rpb24gZm9yIHJldXNlIGluIHRocmVhZC5cbiAqXG4gKiBAY2xhc3MgVHJhbnNhY3Rpb25cbiAqL1xudmFyIE1peGluID0ge1xuICAvKipcbiAgICogU2V0cyB1cCB0aGlzIGluc3RhbmNlIHNvIHRoYXQgaXQgaXMgcHJlcGFyZWQgZm9yIGNvbGxlY3RpbmcgbWV0cmljcy4gRG9lc1xuICAgKiBzbyBzdWNoIHRoYXQgdGhpcyBzZXR1cCBtZXRob2QgbWF5IGJlIHVzZWQgb24gYW4gaW5zdGFuY2UgdGhhdCBpcyBhbHJlYWR5XG4gICAqIGluaXRpYWxpemVkLCBpbiBhIHdheSB0aGF0IGRvZXMgbm90IGNvbnN1bWUgYWRkaXRpb25hbCBtZW1vcnkgdXBvbiByZXVzZS5cbiAgICogVGhhdCBjYW4gYmUgdXNlZnVsIGlmIHlvdSBkZWNpZGUgdG8gbWFrZSB5b3VyIHN1YmNsYXNzIG9mIHRoaXMgbWl4aW4gYVxuICAgKiBcIlBvb2xlZENsYXNzXCIuXG4gICAqL1xuICByZWluaXRpYWxpemVUcmFuc2FjdGlvbjogZnVuY3Rpb24gKCkge1xuICAgIHRoaXMudHJhbnNhY3Rpb25XcmFwcGVycyA9IHRoaXMuZ2V0VHJhbnNhY3Rpb25XcmFwcGVycygpO1xuICAgIGlmICh0aGlzLndyYXBwZXJJbml0RGF0YSkge1xuICAgICAgdGhpcy53cmFwcGVySW5pdERhdGEubGVuZ3RoID0gMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy53cmFwcGVySW5pdERhdGEgPSBbXTtcbiAgICB9XG4gICAgdGhpcy5faXNJblRyYW5zYWN0aW9uID0gZmFsc2U7XG4gIH0sXG5cbiAgX2lzSW5UcmFuc2FjdGlvbjogZmFsc2UsXG5cbiAgLyoqXG4gICAqIEBhYnN0cmFjdFxuICAgKiBAcmV0dXJuIHtBcnJheTxUcmFuc2FjdGlvbldyYXBwZXI+fSBBcnJheSBvZiB0cmFuc2FjdGlvbiB3cmFwcGVycy5cbiAgICovXG4gIGdldFRyYW5zYWN0aW9uV3JhcHBlcnM6IG51bGwsXG5cbiAgaXNJblRyYW5zYWN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuICEhdGhpcy5faXNJblRyYW5zYWN0aW9uO1xuICB9LFxuXG4gIC8qKlxuICAgKiBFeGVjdXRlcyB0aGUgZnVuY3Rpb24gd2l0aGluIGEgc2FmZXR5IHdpbmRvdy4gVXNlIHRoaXMgZm9yIHRoZSB0b3AgbGV2ZWxcbiAgICogbWV0aG9kcyB0aGF0IHJlc3VsdCBpbiBsYXJnZSBhbW91bnRzIG9mIGNvbXB1dGF0aW9uL211dGF0aW9ucyB0aGF0IHdvdWxkXG4gICAqIG5lZWQgdG8gYmUgc2FmZXR5IGNoZWNrZWQuIFRoZSBvcHRpb25hbCBhcmd1bWVudHMgaGVscHMgcHJldmVudCB0aGUgbmVlZFxuICAgKiB0byBiaW5kIGluIG1hbnkgY2FzZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7ZnVuY3Rpb259IG1ldGhvZCBNZW1iZXIgb2Ygc2NvcGUgdG8gY2FsbC5cbiAgICogQHBhcmFtIHtPYmplY3R9IHNjb3BlIFNjb3BlIHRvIGludm9rZSBmcm9tLlxuICAgKiBAcGFyYW0ge09iamVjdD89fSBhIEFyZ3VtZW50IHRvIHBhc3MgdG8gdGhlIG1ldGhvZC5cbiAgICogQHBhcmFtIHtPYmplY3Q/PX0gYiBBcmd1bWVudCB0byBwYXNzIHRvIHRoZSBtZXRob2QuXG4gICAqIEBwYXJhbSB7T2JqZWN0Pz19IGMgQXJndW1lbnQgdG8gcGFzcyB0byB0aGUgbWV0aG9kLlxuICAgKiBAcGFyYW0ge09iamVjdD89fSBkIEFyZ3VtZW50IHRvIHBhc3MgdG8gdGhlIG1ldGhvZC5cbiAgICogQHBhcmFtIHtPYmplY3Q/PX0gZSBBcmd1bWVudCB0byBwYXNzIHRvIHRoZSBtZXRob2QuXG4gICAqIEBwYXJhbSB7T2JqZWN0Pz19IGYgQXJndW1lbnQgdG8gcGFzcyB0byB0aGUgbWV0aG9kLlxuICAgKlxuICAgKiBAcmV0dXJuIHsqfSBSZXR1cm4gdmFsdWUgZnJvbSBgbWV0aG9kYC5cbiAgICovXG4gIHBlcmZvcm06IGZ1bmN0aW9uIChtZXRob2QsIHNjb3BlLCBhLCBiLCBjLCBkLCBlLCBmKSB7XG4gICAgISF0aGlzLmlzSW5UcmFuc2FjdGlvbigpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1RyYW5zYWN0aW9uLnBlcmZvcm0oLi4uKTogQ2Fubm90IGluaXRpYWxpemUgYSB0cmFuc2FjdGlvbiB3aGVuIHRoZXJlICcgKyAnaXMgYWxyZWFkeSBhbiBvdXRzdGFuZGluZyB0cmFuc2FjdGlvbi4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICAgdmFyIGVycm9yVGhyb3duO1xuICAgIHZhciByZXQ7XG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuX2lzSW5UcmFuc2FjdGlvbiA9IHRydWU7XG4gICAgICAvLyBDYXRjaGluZyBlcnJvcnMgbWFrZXMgZGVidWdnaW5nIG1vcmUgZGlmZmljdWx0LCBzbyB3ZSBzdGFydCB3aXRoXG4gICAgICAvLyBlcnJvclRocm93biBzZXQgdG8gdHJ1ZSBiZWZvcmUgc2V0dGluZyBpdCB0byBmYWxzZSBhZnRlciBjYWxsaW5nXG4gICAgICAvLyBjbG9zZSAtLSBpZiBpdCdzIHN0aWxsIHNldCB0byB0cnVlIGluIHRoZSBmaW5hbGx5IGJsb2NrLCBpdCBtZWFuc1xuICAgICAgLy8gb25lIG9mIHRoZXNlIGNhbGxzIHRocmV3LlxuICAgICAgZXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgdGhpcy5pbml0aWFsaXplQWxsKDApO1xuICAgICAgcmV0ID0gbWV0aG9kLmNhbGwoc2NvcGUsIGEsIGIsIGMsIGQsIGUsIGYpO1xuICAgICAgZXJyb3JUaHJvd24gPSBmYWxzZTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgaWYgKGVycm9yVGhyb3duKSB7XG4gICAgICAgICAgLy8gSWYgYG1ldGhvZGAgdGhyb3dzLCBwcmVmZXIgdG8gc2hvdyB0aGF0IHN0YWNrIHRyYWNlIG92ZXIgYW55IHRocm93blxuICAgICAgICAgIC8vIGJ5IGludm9raW5nIGBjbG9zZUFsbGAuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VBbGwoMCk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7fVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFNpbmNlIGBtZXRob2RgIGRpZG4ndCB0aHJvdywgd2UgZG9uJ3Qgd2FudCB0byBzaWxlbmNlIHRoZSBleGNlcHRpb25cbiAgICAgICAgICAvLyBoZXJlLlxuICAgICAgICAgIHRoaXMuY2xvc2VBbGwoMCk7XG4gICAgICAgIH1cbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIHRoaXMuX2lzSW5UcmFuc2FjdGlvbiA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmV0O1xuICB9LFxuXG4gIGluaXRpYWxpemVBbGw6IGZ1bmN0aW9uIChzdGFydEluZGV4KSB7XG4gICAgdmFyIHRyYW5zYWN0aW9uV3JhcHBlcnMgPSB0aGlzLnRyYW5zYWN0aW9uV3JhcHBlcnM7XG4gICAgZm9yICh2YXIgaSA9IHN0YXJ0SW5kZXg7IGkgPCB0cmFuc2FjdGlvbldyYXBwZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgd3JhcHBlciA9IHRyYW5zYWN0aW9uV3JhcHBlcnNbaV07XG4gICAgICB0cnkge1xuICAgICAgICAvLyBDYXRjaGluZyBlcnJvcnMgbWFrZXMgZGVidWdnaW5nIG1vcmUgZGlmZmljdWx0LCBzbyB3ZSBzdGFydCB3aXRoIHRoZVxuICAgICAgICAvLyBPQlNFUlZFRF9FUlJPUiBzdGF0ZSBiZWZvcmUgb3ZlcndyaXRpbmcgaXQgd2l0aCB0aGUgcmVhbCByZXR1cm4gdmFsdWVcbiAgICAgICAgLy8gb2YgaW5pdGlhbGl6ZSAtLSBpZiBpdCdzIHN0aWxsIHNldCB0byBPQlNFUlZFRF9FUlJPUiBpbiB0aGUgZmluYWxseVxuICAgICAgICAvLyBibG9jaywgaXQgbWVhbnMgd3JhcHBlci5pbml0aWFsaXplIHRocmV3LlxuICAgICAgICB0aGlzLndyYXBwZXJJbml0RGF0YVtpXSA9IFRyYW5zYWN0aW9uLk9CU0VSVkVEX0VSUk9SO1xuICAgICAgICB0aGlzLndyYXBwZXJJbml0RGF0YVtpXSA9IHdyYXBwZXIuaW5pdGlhbGl6ZSA/IHdyYXBwZXIuaW5pdGlhbGl6ZS5jYWxsKHRoaXMpIDogbnVsbDtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGlmICh0aGlzLndyYXBwZXJJbml0RGF0YVtpXSA9PT0gVHJhbnNhY3Rpb24uT0JTRVJWRURfRVJST1IpIHtcbiAgICAgICAgICAvLyBUaGUgaW5pdGlhbGl6ZXIgZm9yIHdyYXBwZXIgaSB0aHJldyBhbiBlcnJvcjsgaW5pdGlhbGl6ZSB0aGVcbiAgICAgICAgICAvLyByZW1haW5pbmcgd3JhcHBlcnMgYnV0IHNpbGVuY2UgYW55IGV4Y2VwdGlvbnMgZnJvbSB0aGVtIHRvIGVuc3VyZVxuICAgICAgICAgIC8vIHRoYXQgdGhlIGZpcnN0IGVycm9yIGlzIHRoZSBvbmUgdG8gYnViYmxlIHVwLlxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVBbGwoaSArIDEpO1xuICAgICAgICAgIH0gY2F0Y2ggKGVycikge31cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSW52b2tlcyBlYWNoIG9mIGB0aGlzLnRyYW5zYWN0aW9uV3JhcHBlcnMuY2xvc2VbaV1gIGZ1bmN0aW9ucywgcGFzc2luZyBpbnRvXG4gICAqIHRoZW0gdGhlIHJlc3BlY3RpdmUgcmV0dXJuIHZhbHVlcyBvZiBgdGhpcy50cmFuc2FjdGlvbldyYXBwZXJzLmluaXRbaV1gXG4gICAqIChgY2xvc2VgcnMgdGhhdCBjb3JyZXNwb25kIHRvIGluaXRpYWxpemVycyB0aGF0IGZhaWxlZCB3aWxsIG5vdCBiZVxuICAgKiBpbnZva2VkKS5cbiAgICovXG4gIGNsb3NlQWxsOiBmdW5jdGlvbiAoc3RhcnRJbmRleCkge1xuICAgICF0aGlzLmlzSW5UcmFuc2FjdGlvbigpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ1RyYW5zYWN0aW9uLmNsb3NlQWxsKCk6IENhbm5vdCBjbG9zZSB0cmFuc2FjdGlvbiB3aGVuIG5vbmUgYXJlIG9wZW4uJykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIHZhciB0cmFuc2FjdGlvbldyYXBwZXJzID0gdGhpcy50cmFuc2FjdGlvbldyYXBwZXJzO1xuICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4OyBpIDwgdHJhbnNhY3Rpb25XcmFwcGVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHdyYXBwZXIgPSB0cmFuc2FjdGlvbldyYXBwZXJzW2ldO1xuICAgICAgdmFyIGluaXREYXRhID0gdGhpcy53cmFwcGVySW5pdERhdGFbaV07XG4gICAgICB2YXIgZXJyb3JUaHJvd247XG4gICAgICB0cnkge1xuICAgICAgICAvLyBDYXRjaGluZyBlcnJvcnMgbWFrZXMgZGVidWdnaW5nIG1vcmUgZGlmZmljdWx0LCBzbyB3ZSBzdGFydCB3aXRoXG4gICAgICAgIC8vIGVycm9yVGhyb3duIHNldCB0byB0cnVlIGJlZm9yZSBzZXR0aW5nIGl0IHRvIGZhbHNlIGFmdGVyIGNhbGxpbmdcbiAgICAgICAgLy8gY2xvc2UgLS0gaWYgaXQncyBzdGlsbCBzZXQgdG8gdHJ1ZSBpbiB0aGUgZmluYWxseSBibG9jaywgaXQgbWVhbnNcbiAgICAgICAgLy8gd3JhcHBlci5jbG9zZSB0aHJldy5cbiAgICAgICAgZXJyb3JUaHJvd24gPSB0cnVlO1xuICAgICAgICBpZiAoaW5pdERhdGEgIT09IFRyYW5zYWN0aW9uLk9CU0VSVkVEX0VSUk9SICYmIHdyYXBwZXIuY2xvc2UpIHtcbiAgICAgICAgICB3cmFwcGVyLmNsb3NlLmNhbGwodGhpcywgaW5pdERhdGEpO1xuICAgICAgICB9XG4gICAgICAgIGVycm9yVGhyb3duID0gZmFsc2U7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICBpZiAoZXJyb3JUaHJvd24pIHtcbiAgICAgICAgICAvLyBUaGUgY2xvc2VyIGZvciB3cmFwcGVyIGkgdGhyZXcgYW4gZXJyb3I7IGNsb3NlIHRoZSByZW1haW5pbmdcbiAgICAgICAgICAvLyB3cmFwcGVycyBidXQgc2lsZW5jZSBhbnkgZXhjZXB0aW9ucyBmcm9tIHRoZW0gdG8gZW5zdXJlIHRoYXQgdGhlXG4gICAgICAgICAgLy8gZmlyc3QgZXJyb3IgaXMgdGhlIG9uZSB0byBidWJibGUgdXAuXG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VBbGwoaSArIDEpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy53cmFwcGVySW5pdERhdGEubGVuZ3RoID0gMDtcbiAgfVxufTtcblxudmFyIFRyYW5zYWN0aW9uID0ge1xuXG4gIE1peGluOiBNaXhpbixcblxuICAvKipcbiAgICogVG9rZW4gdG8gbG9vayBmb3IgdG8gZGV0ZXJtaW5lIGlmIGFuIGVycm9yIG9jY3VycmVkLlxuICAgKi9cbiAgT0JTRVJWRURfRVJST1I6IHt9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVHJhbnNhY3Rpb247IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIFZpZXdwb3J0TWV0cmljc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFZpZXdwb3J0TWV0cmljcyA9IHtcblxuICBjdXJyZW50U2Nyb2xsTGVmdDogMCxcblxuICBjdXJyZW50U2Nyb2xsVG9wOiAwLFxuXG4gIHJlZnJlc2hTY3JvbGxWYWx1ZXM6IGZ1bmN0aW9uIChzY3JvbGxQb3NpdGlvbikge1xuICAgIFZpZXdwb3J0TWV0cmljcy5jdXJyZW50U2Nyb2xsTGVmdCA9IHNjcm9sbFBvc2l0aW9uLng7XG4gICAgVmlld3BvcnRNZXRyaWNzLmN1cnJlbnRTY3JvbGxUb3AgPSBzY3JvbGxQb3NpdGlvbi55O1xuICB9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gVmlld3BvcnRNZXRyaWNzOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBhY2N1bXVsYXRlSW50b1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqXG4gKiBBY2N1bXVsYXRlcyBpdGVtcyB0aGF0IG11c3Qgbm90IGJlIG51bGwgb3IgdW5kZWZpbmVkIGludG8gdGhlIGZpcnN0IG9uZS4gVGhpc1xuICogaXMgdXNlZCB0byBjb25zZXJ2ZSBtZW1vcnkgYnkgYXZvaWRpbmcgYXJyYXkgYWxsb2NhdGlvbnMsIGFuZCB0aHVzIHNhY3JpZmljZXNcbiAqIEFQSSBjbGVhbm5lc3MuIFNpbmNlIGBjdXJyZW50YCBjYW4gYmUgbnVsbCBiZWZvcmUgYmVpbmcgcGFzc2VkIGluIGFuZCBub3RcbiAqIG51bGwgYWZ0ZXIgdGhpcyBmdW5jdGlvbiwgbWFrZSBzdXJlIHRvIGFzc2lnbiBpdCBiYWNrIHRvIGBjdXJyZW50YDpcbiAqXG4gKiBgYSA9IGFjY3VtdWxhdGVJbnRvKGEsIGIpO2BcbiAqXG4gKiBUaGlzIEFQSSBzaG91bGQgYmUgc3BhcmluZ2x5IHVzZWQuIFRyeSBgYWNjdW11bGF0ZWAgZm9yIHNvbWV0aGluZyBjbGVhbmVyLlxuICpcbiAqIEByZXR1cm4geyp8YXJyYXk8Kj59IEFuIGFjY3VtdWxhdGlvbiBvZiBpdGVtcy5cbiAqL1xuXG5mdW5jdGlvbiBhY2N1bXVsYXRlSW50byhjdXJyZW50LCBuZXh0KSB7XG4gICEobmV4dCAhPSBudWxsKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdhY2N1bXVsYXRlSW50byguLi4pOiBBY2N1bXVsYXRlZCBpdGVtcyBtdXN0IG5vdCBiZSBudWxsIG9yIHVuZGVmaW5lZC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIGlmIChjdXJyZW50ID09IG51bGwpIHtcbiAgICByZXR1cm4gbmV4dDtcbiAgfVxuXG4gIC8vIEJvdGggYXJlIG5vdCBlbXB0eS4gV2FybmluZzogTmV2ZXIgY2FsbCB4LmNvbmNhdCh5KSB3aGVuIHlvdSBhcmUgbm90XG4gIC8vIGNlcnRhaW4gdGhhdCB4IGlzIGFuIEFycmF5ICh4IGNvdWxkIGJlIGEgc3RyaW5nIHdpdGggY29uY2F0IG1ldGhvZCkuXG4gIHZhciBjdXJyZW50SXNBcnJheSA9IEFycmF5LmlzQXJyYXkoY3VycmVudCk7XG4gIHZhciBuZXh0SXNBcnJheSA9IEFycmF5LmlzQXJyYXkobmV4dCk7XG5cbiAgaWYgKGN1cnJlbnRJc0FycmF5ICYmIG5leHRJc0FycmF5KSB7XG4gICAgY3VycmVudC5wdXNoLmFwcGx5KGN1cnJlbnQsIG5leHQpO1xuICAgIHJldHVybiBjdXJyZW50O1xuICB9XG5cbiAgaWYgKGN1cnJlbnRJc0FycmF5KSB7XG4gICAgY3VycmVudC5wdXNoKG5leHQpO1xuICAgIHJldHVybiBjdXJyZW50O1xuICB9XG5cbiAgaWYgKG5leHRJc0FycmF5KSB7XG4gICAgLy8gQSBiaXQgdG9vIGRhbmdlcm91cyB0byBtdXRhdGUgYG5leHRgLlxuICAgIHJldHVybiBbY3VycmVudF0uY29uY2F0KG5leHQpO1xuICB9XG5cbiAgcmV0dXJuIFtjdXJyZW50LCBuZXh0XTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhY2N1bXVsYXRlSW50bzsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgYWRsZXIzMlxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIE1PRCA9IDY1NTIxO1xuXG4vLyBhZGxlcjMyIGlzIG5vdCBjcnlwdG9ncmFwaGljYWxseSBzdHJvbmcsIGFuZCBpcyBvbmx5IHVzZWQgdG8gc2FuaXR5IGNoZWNrIHRoYXRcbi8vIG1hcmt1cCBnZW5lcmF0ZWQgb24gdGhlIHNlcnZlciBtYXRjaGVzIHRoZSBtYXJrdXAgZ2VuZXJhdGVkIG9uIHRoZSBjbGllbnQuXG4vLyBUaGlzIGltcGxlbWVudGF0aW9uIChhIG1vZGlmaWVkIHZlcnNpb24gb2YgdGhlIFNoZWV0SlMgdmVyc2lvbikgaGFzIGJlZW4gb3B0aW1pemVkXG4vLyBmb3Igb3VyIHVzZSBjYXNlLCBhdCB0aGUgZXhwZW5zZSBvZiBjb25mb3JtaW5nIHRvIHRoZSBhZGxlcjMyIHNwZWNpZmljYXRpb25cbi8vIGZvciBub24tYXNjaWkgaW5wdXRzLlxuZnVuY3Rpb24gYWRsZXIzMihkYXRhKSB7XG4gIHZhciBhID0gMTtcbiAgdmFyIGIgPSAwO1xuICB2YXIgaSA9IDA7XG4gIHZhciBsID0gZGF0YS5sZW5ndGg7XG4gIHZhciBtID0gbCAmIH4weDM7XG4gIHdoaWxlIChpIDwgbSkge1xuICAgIGZvciAoOyBpIDwgTWF0aC5taW4oaSArIDQwOTYsIG0pOyBpICs9IDQpIHtcbiAgICAgIGIgKz0gKGEgKz0gZGF0YS5jaGFyQ29kZUF0KGkpKSArIChhICs9IGRhdGEuY2hhckNvZGVBdChpICsgMSkpICsgKGEgKz0gZGF0YS5jaGFyQ29kZUF0KGkgKyAyKSkgKyAoYSArPSBkYXRhLmNoYXJDb2RlQXQoaSArIDMpKTtcbiAgICB9XG4gICAgYSAlPSBNT0Q7XG4gICAgYiAlPSBNT0Q7XG4gIH1cbiAgZm9yICg7IGkgPCBsOyBpKyspIHtcbiAgICBiICs9IGEgKz0gZGF0YS5jaGFyQ29kZUF0KGkpO1xuICB9XG4gIGEgJT0gTU9EO1xuICBiICU9IE1PRDtcbiAgcmV0dXJuIGEgfCBiIDw8IDE2O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFkbGVyMzI7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGNhbkRlZmluZVByb3BlcnR5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgY2FuRGVmaW5lUHJvcGVydHkgPSBmYWxzZTtcbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHRyeSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAneCcsIHsgZ2V0OiBmdW5jdGlvbiAoKSB7fSB9KTtcbiAgICBjYW5EZWZpbmVQcm9wZXJ0eSA9IHRydWU7XG4gIH0gY2F0Y2ggKHgpIHtcbiAgICAvLyBJRSB3aWxsIGZhaWwgb24gZGVmaW5lUHJvcGVydHlcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNhbkRlZmluZVByb3BlcnR5OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBkYW5nZXJvdXNTdHlsZVZhbHVlXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIENTU1Byb3BlcnR5ID0gcmVxdWlyZSgnLi9DU1NQcm9wZXJ0eScpO1xuXG52YXIgaXNVbml0bGVzc051bWJlciA9IENTU1Byb3BlcnR5LmlzVW5pdGxlc3NOdW1iZXI7XG5cbi8qKlxuICogQ29udmVydCBhIHZhbHVlIGludG8gdGhlIHByb3BlciBjc3Mgd3JpdGFibGUgdmFsdWUuIFRoZSBzdHlsZSBuYW1lIGBuYW1lYFxuICogc2hvdWxkIGJlIGxvZ2ljYWwgKG5vIGh5cGhlbnMpLCBhcyBzcGVjaWZpZWRcbiAqIGluIGBDU1NQcm9wZXJ0eS5pc1VuaXRsZXNzTnVtYmVyYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBDU1MgcHJvcGVydHkgbmFtZSBzdWNoIGFzIGB0b3BNYXJnaW5gLlxuICogQHBhcmFtIHsqfSB2YWx1ZSBDU1MgcHJvcGVydHkgdmFsdWUgc3VjaCBhcyBgMTBweGAuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IE5vcm1hbGl6ZWQgc3R5bGUgdmFsdWUgd2l0aCBkaW1lbnNpb25zIGFwcGxpZWQuXG4gKi9cbmZ1bmN0aW9uIGRhbmdlcm91c1N0eWxlVmFsdWUobmFtZSwgdmFsdWUpIHtcbiAgLy8gTm90ZSB0aGF0IHdlJ3ZlIHJlbW92ZWQgZXNjYXBlVGV4dEZvckJyb3dzZXIoKSBjYWxscyBoZXJlIHNpbmNlIHRoZVxuICAvLyB3aG9sZSBzdHJpbmcgd2lsbCBiZSBlc2NhcGVkIHdoZW4gdGhlIGF0dHJpYnV0ZSBpcyBpbmplY3RlZCBpbnRvXG4gIC8vIHRoZSBtYXJrdXAuIElmIHlvdSBwcm92aWRlIHVuc2FmZSB1c2VyIGRhdGEgaGVyZSB0aGV5IGNhbiBpbmplY3RcbiAgLy8gYXJiaXRyYXJ5IENTUyB3aGljaCBtYXkgYmUgcHJvYmxlbWF0aWMgKEkgY291bGRuJ3QgcmVwcm8gdGhpcyk6XG4gIC8vIGh0dHBzOi8vd3d3Lm93YXNwLm9yZy9pbmRleC5waHAvWFNTX0ZpbHRlcl9FdmFzaW9uX0NoZWF0X1NoZWV0XG4gIC8vIGh0dHA6Ly93d3cudGhlc3Bhbm5lci5jby51ay8yMDA3LzExLzI2L3VsdGltYXRlLXhzcy1jc3MtaW5qZWN0aW9uL1xuICAvLyBUaGlzIGlzIG5vdCBhbiBYU1MgaG9sZSBidXQgaW5zdGVhZCBhIHBvdGVudGlhbCBDU1MgaW5qZWN0aW9uIGlzc3VlXG4gIC8vIHdoaWNoIGhhcyBsZWFkIHRvIGEgZ3JlYXRlciBkaXNjdXNzaW9uIGFib3V0IGhvdyB3ZSdyZSBnb2luZyB0b1xuICAvLyB0cnVzdCBVUkxzIG1vdmluZyBmb3J3YXJkLiBTZWUgIzIxMTU5MDFcblxuICB2YXIgaXNFbXB0eSA9IHZhbHVlID09IG51bGwgfHwgdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicgfHwgdmFsdWUgPT09ICcnO1xuICBpZiAoaXNFbXB0eSkge1xuICAgIHJldHVybiAnJztcbiAgfVxuXG4gIHZhciBpc05vbk51bWVyaWMgPSBpc05hTih2YWx1ZSk7XG4gIGlmIChpc05vbk51bWVyaWMgfHwgdmFsdWUgPT09IDAgfHwgaXNVbml0bGVzc051bWJlci5oYXNPd25Qcm9wZXJ0eShuYW1lKSAmJiBpc1VuaXRsZXNzTnVtYmVyW25hbWVdKSB7XG4gICAgcmV0dXJuICcnICsgdmFsdWU7IC8vIGNhc3QgdG8gc3RyaW5nXG4gIH1cblxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgIHZhbHVlID0gdmFsdWUudHJpbSgpO1xuICB9XG4gIHJldHVybiB2YWx1ZSArICdweCc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZGFuZ2Vyb3VzU3R5bGVWYWx1ZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZGVwcmVjYXRlZFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogVGhpcyB3aWxsIGxvZyBhIHNpbmdsZSBkZXByZWNhdGlvbiBub3RpY2UgcGVyIGZ1bmN0aW9uIGFuZCBmb3J3YXJkIHRoZSBjYWxsXG4gKiBvbiB0byB0aGUgbmV3IEFQSS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZm5OYW1lIFRoZSBuYW1lIG9mIHRoZSBmdW5jdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IG5ld01vZHVsZSBUaGUgbW9kdWxlIHRoYXQgZm4gd2lsbCBleGlzdCBpblxuICogQHBhcmFtIHtzdHJpbmd9IG5ld1BhY2thZ2UgVGhlIG1vZHVsZSB0aGF0IGZuIHdpbGwgZXhpc3QgaW5cbiAqIEBwYXJhbSB7Kn0gY3R4IFRoZSBjb250ZXh0IHRoaXMgZm9yd2FyZGVkIGNhbGwgc2hvdWxkIHJ1biBpblxuICogQHBhcmFtIHtmdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIGZvcndhcmQgb24gdG9cbiAqIEByZXR1cm4ge2Z1bmN0aW9ufSBUaGUgZnVuY3Rpb24gdGhhdCB3aWxsIHdhcm4gb25jZSBhbmQgdGhlbiBjYWxsIGZuXG4gKi9cbmZ1bmN0aW9uIGRlcHJlY2F0ZWQoZm5OYW1lLCBuZXdNb2R1bGUsIG5ld1BhY2thZ2UsIGN0eCwgZm4pIHtcbiAgdmFyIHdhcm5lZCA9IGZhbHNlO1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHZhciBuZXdGbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHdhcm5lZCxcbiAgICAgIC8vIFJlcXVpcmUgZXhhbXBsZXMgaW4gdGhpcyBzdHJpbmcgbXVzdCBiZSBzcGxpdCB0byBwcmV2ZW50IFJlYWN0J3NcbiAgICAgIC8vIGJ1aWxkIHRvb2xzIGZyb20gbWlzdGFraW5nIHRoZW0gZm9yIHJlYWwgcmVxdWlyZXMuXG4gICAgICAvLyBPdGhlcndpc2UgdGhlIGJ1aWxkIHRvb2xzIHdpbGwgYXR0ZW1wdCB0byBidWlsZCBhICclcycgbW9kdWxlLlxuICAgICAgJ1JlYWN0LiVzIGlzIGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgJXMuJXMgZnJvbSByZXF1aXJlJyArICcoXFwnJXNcXCcpICcgKyAnaW5zdGVhZC4nLCBmbk5hbWUsIG5ld01vZHVsZSwgZm5OYW1lLCBuZXdQYWNrYWdlKSA6IHVuZGVmaW5lZDtcbiAgICAgIHdhcm5lZCA9IHRydWU7XG4gICAgICByZXR1cm4gZm4uYXBwbHkoY3R4LCBhcmd1bWVudHMpO1xuICAgIH07XG4gICAgLy8gV2UgbmVlZCB0byBtYWtlIHN1cmUgYWxsIHByb3BlcnRpZXMgb2YgdGhlIG9yaWdpbmFsIGZuIGFyZSBjb3BpZWQgb3Zlci5cbiAgICAvLyBJbiBwYXJ0aWN1bGFyLCB0aGlzIGlzIG5lZWRlZCB0byBzdXBwb3J0IFByb3BUeXBlc1xuICAgIHJldHVybiBhc3NpZ24obmV3Rm4sIGZuKTtcbiAgfVxuXG4gIHJldHVybiBmbjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkZXByZWNhdGVkOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFU0NBUEVfTE9PS1VQID0ge1xuICAnJic6ICcmYW1wOycsXG4gICc+JzogJyZndDsnLFxuICAnPCc6ICcmbHQ7JyxcbiAgJ1wiJzogJyZxdW90OycsXG4gICdcXCcnOiAnJiN4Mjc7J1xufTtcblxudmFyIEVTQ0FQRV9SRUdFWCA9IC9bJj48XCInXS9nO1xuXG5mdW5jdGlvbiBlc2NhcGVyKG1hdGNoKSB7XG4gIHJldHVybiBFU0NBUEVfTE9PS1VQW21hdGNoXTtcbn1cblxuLyoqXG4gKiBFc2NhcGVzIHRleHQgdG8gcHJldmVudCBzY3JpcHRpbmcgYXR0YWNrcy5cbiAqXG4gKiBAcGFyYW0geyp9IHRleHQgVGV4dCB2YWx1ZSB0byBlc2NhcGUuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEFuIGVzY2FwZWQgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIodGV4dCkge1xuICByZXR1cm4gKCcnICsgdGV4dCkucmVwbGFjZShFU0NBUEVfUkVHRVgsIGVzY2FwZXIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZmluZERPTU5vZGVcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RDdXJyZW50T3duZXIgPSByZXF1aXJlKCcuL1JlYWN0Q3VycmVudE93bmVyJyk7XG52YXIgUmVhY3RJbnN0YW5jZU1hcCA9IHJlcXVpcmUoJy4vUmVhY3RJbnN0YW5jZU1hcCcpO1xudmFyIFJlYWN0TW91bnQgPSByZXF1aXJlKCcuL1JlYWN0TW91bnQnKTtcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xudmFyIHdhcm5pbmcgPSByZXF1aXJlKCdmYmpzL2xpYi93YXJuaW5nJyk7XG5cbi8qKlxuICogUmV0dXJucyB0aGUgRE9NIG5vZGUgcmVuZGVyZWQgYnkgdGhpcyBlbGVtZW50LlxuICpcbiAqIEBwYXJhbSB7UmVhY3RDb21wb25lbnR8RE9NRWxlbWVudH0gY29tcG9uZW50T3JFbGVtZW50XG4gKiBAcmV0dXJuIHs/RE9NRWxlbWVudH0gVGhlIHJvb3Qgbm9kZSBvZiB0aGlzIGVsZW1lbnQuXG4gKi9cbmZ1bmN0aW9uIGZpbmRET01Ob2RlKGNvbXBvbmVudE9yRWxlbWVudCkge1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHZhciBvd25lciA9IFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQ7XG4gICAgaWYgKG93bmVyICE9PSBudWxsKSB7XG4gICAgICBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gd2FybmluZyhvd25lci5fd2FybmVkQWJvdXRSZWZzSW5SZW5kZXIsICclcyBpcyBhY2Nlc3NpbmcgZ2V0RE9NTm9kZSBvciBmaW5kRE9NTm9kZSBpbnNpZGUgaXRzIHJlbmRlcigpLiAnICsgJ3JlbmRlcigpIHNob3VsZCBiZSBhIHB1cmUgZnVuY3Rpb24gb2YgcHJvcHMgYW5kIHN0YXRlLiBJdCBzaG91bGQgJyArICduZXZlciBhY2Nlc3Mgc29tZXRoaW5nIHRoYXQgcmVxdWlyZXMgc3RhbGUgZGF0YSBmcm9tIHRoZSBwcmV2aW91cyAnICsgJ3JlbmRlciwgc3VjaCBhcyByZWZzLiBNb3ZlIHRoaXMgbG9naWMgdG8gY29tcG9uZW50RGlkTW91bnQgYW5kICcgKyAnY29tcG9uZW50RGlkVXBkYXRlIGluc3RlYWQuJywgb3duZXIuZ2V0TmFtZSgpIHx8ICdBIGNvbXBvbmVudCcpIDogdW5kZWZpbmVkO1xuICAgICAgb3duZXIuX3dhcm5lZEFib3V0UmVmc0luUmVuZGVyID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgaWYgKGNvbXBvbmVudE9yRWxlbWVudCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgaWYgKGNvbXBvbmVudE9yRWxlbWVudC5ub2RlVHlwZSA9PT0gMSkge1xuICAgIHJldHVybiBjb21wb25lbnRPckVsZW1lbnQ7XG4gIH1cbiAgaWYgKFJlYWN0SW5zdGFuY2VNYXAuaGFzKGNvbXBvbmVudE9yRWxlbWVudCkpIHtcbiAgICByZXR1cm4gUmVhY3RNb3VudC5nZXROb2RlRnJvbUluc3RhbmNlKGNvbXBvbmVudE9yRWxlbWVudCk7XG4gIH1cbiAgIShjb21wb25lbnRPckVsZW1lbnQucmVuZGVyID09IG51bGwgfHwgdHlwZW9mIGNvbXBvbmVudE9yRWxlbWVudC5yZW5kZXIgIT09ICdmdW5jdGlvbicpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2ZpbmRET01Ob2RlIHdhcyBjYWxsZWQgb24gYW4gdW5tb3VudGVkIGNvbXBvbmVudC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gICFmYWxzZSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFbGVtZW50IGFwcGVhcnMgdG8gYmUgbmVpdGhlciBSZWFjdENvbXBvbmVudCBub3IgRE9NTm9kZSAoa2V5czogJXMpJywgT2JqZWN0LmtleXMoY29tcG9uZW50T3JFbGVtZW50KSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZpbmRET01Ob2RlOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBmbGF0dGVuQ2hpbGRyZW5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciB0cmF2ZXJzZUFsbENoaWxkcmVuID0gcmVxdWlyZSgnLi90cmF2ZXJzZUFsbENoaWxkcmVuJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuLyoqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSB0cmF2ZXJzZUNvbnRleHQgQ29udGV4dCBwYXNzZWQgdGhyb3VnaCB0cmF2ZXJzYWwuXG4gKiBAcGFyYW0gez9SZWFjdENvbXBvbmVudH0gY2hpbGQgUmVhY3QgY2hpbGQgY29tcG9uZW50LlxuICogQHBhcmFtIHshc3RyaW5nfSBuYW1lIFN0cmluZyBuYW1lIG9mIGtleSBwYXRoIHRvIGNoaWxkLlxuICovXG5mdW5jdGlvbiBmbGF0dGVuU2luZ2xlQ2hpbGRJbnRvQ29udGV4dCh0cmF2ZXJzZUNvbnRleHQsIGNoaWxkLCBuYW1lKSB7XG4gIC8vIFdlIGZvdW5kIGEgY29tcG9uZW50IGluc3RhbmNlLlxuICB2YXIgcmVzdWx0ID0gdHJhdmVyc2VDb250ZXh0O1xuICB2YXIga2V5VW5pcXVlID0gcmVzdWx0W25hbWVdID09PSB1bmRlZmluZWQ7XG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoa2V5VW5pcXVlLCAnZmxhdHRlbkNoaWxkcmVuKC4uLik6IEVuY291bnRlcmVkIHR3byBjaGlsZHJlbiB3aXRoIHRoZSBzYW1lIGtleSwgJyArICdgJXNgLiBDaGlsZCBrZXlzIG11c3QgYmUgdW5pcXVlOyB3aGVuIHR3byBjaGlsZHJlbiBzaGFyZSBhIGtleSwgb25seSAnICsgJ3RoZSBmaXJzdCBjaGlsZCB3aWxsIGJlIHVzZWQuJywgbmFtZSkgOiB1bmRlZmluZWQ7XG4gIH1cbiAgaWYgKGtleVVuaXF1ZSAmJiBjaGlsZCAhPSBudWxsKSB7XG4gICAgcmVzdWx0W25hbWVdID0gY2hpbGQ7XG4gIH1cbn1cblxuLyoqXG4gKiBGbGF0dGVucyBjaGlsZHJlbiB0aGF0IGFyZSB0eXBpY2FsbHkgc3BlY2lmaWVkIGFzIGBwcm9wcy5jaGlsZHJlbmAuIEFueSBudWxsXG4gKiBjaGlsZHJlbiB3aWxsIG5vdCBiZSBpbmNsdWRlZCBpbiB0aGUgcmVzdWx0aW5nIG9iamVjdC5cbiAqIEByZXR1cm4geyFvYmplY3R9IGZsYXR0ZW5lZCBjaGlsZHJlbiBrZXllZCBieSBuYW1lLlxuICovXG5mdW5jdGlvbiBmbGF0dGVuQ2hpbGRyZW4oY2hpbGRyZW4pIHtcbiAgaWYgKGNoaWxkcmVuID09IG51bGwpIHtcbiAgICByZXR1cm4gY2hpbGRyZW47XG4gIH1cbiAgdmFyIHJlc3VsdCA9IHt9O1xuICB0cmF2ZXJzZUFsbENoaWxkcmVuKGNoaWxkcmVuLCBmbGF0dGVuU2luZ2xlQ2hpbGRJbnRvQ29udGV4dCwgcmVzdWx0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmbGF0dGVuQ2hpbGRyZW47IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGZvckVhY2hBY2N1bXVsYXRlZFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBAcGFyYW0ge2FycmF5fSBhcnIgYW4gXCJhY2N1bXVsYXRpb25cIiBvZiBpdGVtcyB3aGljaCBpcyBlaXRoZXIgYW4gQXJyYXkgb3JcbiAqIGEgc2luZ2xlIGl0ZW0uIFVzZWZ1bCB3aGVuIHBhaXJlZCB3aXRoIHRoZSBgYWNjdW11bGF0ZWAgbW9kdWxlLiBUaGlzIGlzIGFcbiAqIHNpbXBsZSB1dGlsaXR5IHRoYXQgYWxsb3dzIHVzIHRvIHJlYXNvbiBhYm91dCBhIGNvbGxlY3Rpb24gb2YgaXRlbXMsIGJ1dFxuICogaGFuZGxpbmcgdGhlIGNhc2Ugd2hlbiB0aGVyZSBpcyBleGFjdGx5IG9uZSBpdGVtIChhbmQgd2UgZG8gbm90IG5lZWQgdG9cbiAqIGFsbG9jYXRlIGFuIGFycmF5KS5cbiAqL1xudmFyIGZvckVhY2hBY2N1bXVsYXRlZCA9IGZ1bmN0aW9uIChhcnIsIGNiLCBzY29wZSkge1xuICBpZiAoQXJyYXkuaXNBcnJheShhcnIpKSB7XG4gICAgYXJyLmZvckVhY2goY2IsIHNjb3BlKTtcbiAgfSBlbHNlIGlmIChhcnIpIHtcbiAgICBjYi5jYWxsKHNjb3BlLCBhcnIpO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZvckVhY2hBY2N1bXVsYXRlZDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZ2V0RXZlbnRDaGFyQ29kZVxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogYGNoYXJDb2RlYCByZXByZXNlbnRzIHRoZSBhY3R1YWwgXCJjaGFyYWN0ZXIgY29kZVwiIGFuZCBpcyBzYWZlIHRvIHVzZSB3aXRoXG4gKiBgU3RyaW5nLmZyb21DaGFyQ29kZWAuIEFzIHN1Y2gsIG9ubHkga2V5cyB0aGF0IGNvcnJlc3BvbmQgdG8gcHJpbnRhYmxlXG4gKiBjaGFyYWN0ZXJzIHByb2R1Y2UgYSB2YWxpZCBgY2hhckNvZGVgLCB0aGUgb25seSBleGNlcHRpb24gdG8gdGhpcyBpcyBFbnRlci5cbiAqIFRoZSBUYWIta2V5IGlzIGNvbnNpZGVyZWQgbm9uLXByaW50YWJsZSBhbmQgZG9lcyBub3QgaGF2ZSBhIGBjaGFyQ29kZWAsXG4gKiBwcmVzdW1hYmx5IGJlY2F1c2UgaXQgZG9lcyBub3QgcHJvZHVjZSBhIHRhYi1jaGFyYWN0ZXIgaW4gYnJvd3NlcnMuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7bnVtYmVyfSBOb3JtYWxpemVkIGBjaGFyQ29kZWAgcHJvcGVydHkuXG4gKi9cbmZ1bmN0aW9uIGdldEV2ZW50Q2hhckNvZGUobmF0aXZlRXZlbnQpIHtcbiAgdmFyIGNoYXJDb2RlO1xuICB2YXIga2V5Q29kZSA9IG5hdGl2ZUV2ZW50LmtleUNvZGU7XG5cbiAgaWYgKCdjaGFyQ29kZScgaW4gbmF0aXZlRXZlbnQpIHtcbiAgICBjaGFyQ29kZSA9IG5hdGl2ZUV2ZW50LmNoYXJDb2RlO1xuXG4gICAgLy8gRkYgZG9lcyBub3Qgc2V0IGBjaGFyQ29kZWAgZm9yIHRoZSBFbnRlci1rZXksIGNoZWNrIGFnYWluc3QgYGtleUNvZGVgLlxuICAgIGlmIChjaGFyQ29kZSA9PT0gMCAmJiBrZXlDb2RlID09PSAxMykge1xuICAgICAgY2hhckNvZGUgPSAxMztcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgLy8gSUU4IGRvZXMgbm90IGltcGxlbWVudCBgY2hhckNvZGVgLCBidXQgYGtleUNvZGVgIGhhcyB0aGUgY29ycmVjdCB2YWx1ZS5cbiAgICBjaGFyQ29kZSA9IGtleUNvZGU7XG4gIH1cblxuICAvLyBTb21lIG5vbi1wcmludGFibGUga2V5cyBhcmUgcmVwb3J0ZWQgaW4gYGNoYXJDb2RlYC9ga2V5Q29kZWAsIGRpc2NhcmQgdGhlbS5cbiAgLy8gTXVzdCBub3QgZGlzY2FyZCB0aGUgKG5vbi0pcHJpbnRhYmxlIEVudGVyLWtleS5cbiAgaWYgKGNoYXJDb2RlID49IDMyIHx8IGNoYXJDb2RlID09PSAxMykge1xuICAgIHJldHVybiBjaGFyQ29kZTtcbiAgfVxuXG4gIHJldHVybiAwO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldEV2ZW50Q2hhckNvZGU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldEV2ZW50S2V5XG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGdldEV2ZW50Q2hhckNvZGUgPSByZXF1aXJlKCcuL2dldEV2ZW50Q2hhckNvZGUnKTtcblxuLyoqXG4gKiBOb3JtYWxpemF0aW9uIG9mIGRlcHJlY2F0ZWQgSFRNTDUgYGtleWAgdmFsdWVzXG4gKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9LZXlib2FyZEV2ZW50I0tleV9uYW1lc1xuICovXG52YXIgbm9ybWFsaXplS2V5ID0ge1xuICAnRXNjJzogJ0VzY2FwZScsXG4gICdTcGFjZWJhcic6ICcgJyxcbiAgJ0xlZnQnOiAnQXJyb3dMZWZ0JyxcbiAgJ1VwJzogJ0Fycm93VXAnLFxuICAnUmlnaHQnOiAnQXJyb3dSaWdodCcsXG4gICdEb3duJzogJ0Fycm93RG93bicsXG4gICdEZWwnOiAnRGVsZXRlJyxcbiAgJ1dpbic6ICdPUycsXG4gICdNZW51JzogJ0NvbnRleHRNZW51JyxcbiAgJ0FwcHMnOiAnQ29udGV4dE1lbnUnLFxuICAnU2Nyb2xsJzogJ1Njcm9sbExvY2snLFxuICAnTW96UHJpbnRhYmxlS2V5JzogJ1VuaWRlbnRpZmllZCdcbn07XG5cbi8qKlxuICogVHJhbnNsYXRpb24gZnJvbSBsZWdhY3kgYGtleUNvZGVgIHRvIEhUTUw1IGBrZXlgXG4gKiBPbmx5IHNwZWNpYWwga2V5cyBzdXBwb3J0ZWQsIGFsbCBvdGhlcnMgZGVwZW5kIG9uIGtleWJvYXJkIGxheW91dCBvciBicm93c2VyXG4gKiBAc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9LZXlib2FyZEV2ZW50I0tleV9uYW1lc1xuICovXG52YXIgdHJhbnNsYXRlVG9LZXkgPSB7XG4gIDg6ICdCYWNrc3BhY2UnLFxuICA5OiAnVGFiJyxcbiAgMTI6ICdDbGVhcicsXG4gIDEzOiAnRW50ZXInLFxuICAxNjogJ1NoaWZ0JyxcbiAgMTc6ICdDb250cm9sJyxcbiAgMTg6ICdBbHQnLFxuICAxOTogJ1BhdXNlJyxcbiAgMjA6ICdDYXBzTG9jaycsXG4gIDI3OiAnRXNjYXBlJyxcbiAgMzI6ICcgJyxcbiAgMzM6ICdQYWdlVXAnLFxuICAzNDogJ1BhZ2VEb3duJyxcbiAgMzU6ICdFbmQnLFxuICAzNjogJ0hvbWUnLFxuICAzNzogJ0Fycm93TGVmdCcsXG4gIDM4OiAnQXJyb3dVcCcsXG4gIDM5OiAnQXJyb3dSaWdodCcsXG4gIDQwOiAnQXJyb3dEb3duJyxcbiAgNDU6ICdJbnNlcnQnLFxuICA0NjogJ0RlbGV0ZScsXG4gIDExMjogJ0YxJywgMTEzOiAnRjInLCAxMTQ6ICdGMycsIDExNTogJ0Y0JywgMTE2OiAnRjUnLCAxMTc6ICdGNicsXG4gIDExODogJ0Y3JywgMTE5OiAnRjgnLCAxMjA6ICdGOScsIDEyMTogJ0YxMCcsIDEyMjogJ0YxMScsIDEyMzogJ0YxMicsXG4gIDE0NDogJ051bUxvY2snLFxuICAxNDU6ICdTY3JvbGxMb2NrJyxcbiAgMjI0OiAnTWV0YSdcbn07XG5cbi8qKlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7c3RyaW5nfSBOb3JtYWxpemVkIGBrZXlgIHByb3BlcnR5LlxuICovXG5mdW5jdGlvbiBnZXRFdmVudEtleShuYXRpdmVFdmVudCkge1xuICBpZiAobmF0aXZlRXZlbnQua2V5KSB7XG4gICAgLy8gTm9ybWFsaXplIGluY29uc2lzdGVudCB2YWx1ZXMgcmVwb3J0ZWQgYnkgYnJvd3NlcnMgZHVlIHRvXG4gICAgLy8gaW1wbGVtZW50YXRpb25zIG9mIGEgd29ya2luZyBkcmFmdCBzcGVjaWZpY2F0aW9uLlxuXG4gICAgLy8gRmlyZUZveCBpbXBsZW1lbnRzIGBrZXlgIGJ1dCByZXR1cm5zIGBNb3pQcmludGFibGVLZXlgIGZvciBhbGxcbiAgICAvLyBwcmludGFibGUgY2hhcmFjdGVycyAobm9ybWFsaXplZCB0byBgVW5pZGVudGlmaWVkYCksIGlnbm9yZSBpdC5cbiAgICB2YXIga2V5ID0gbm9ybWFsaXplS2V5W25hdGl2ZUV2ZW50LmtleV0gfHwgbmF0aXZlRXZlbnQua2V5O1xuICAgIGlmIChrZXkgIT09ICdVbmlkZW50aWZpZWQnKSB7XG4gICAgICByZXR1cm4ga2V5O1xuICAgIH1cbiAgfVxuXG4gIC8vIEJyb3dzZXIgZG9lcyBub3QgaW1wbGVtZW50IGBrZXlgLCBwb2x5ZmlsbCBhcyBtdWNoIG9mIGl0IGFzIHdlIGNhbi5cbiAgaWYgKG5hdGl2ZUV2ZW50LnR5cGUgPT09ICdrZXlwcmVzcycpIHtcbiAgICB2YXIgY2hhckNvZGUgPSBnZXRFdmVudENoYXJDb2RlKG5hdGl2ZUV2ZW50KTtcblxuICAgIC8vIFRoZSBlbnRlci1rZXkgaXMgdGVjaG5pY2FsbHkgYm90aCBwcmludGFibGUgYW5kIG5vbi1wcmludGFibGUgYW5kIGNhblxuICAgIC8vIHRodXMgYmUgY2FwdHVyZWQgYnkgYGtleXByZXNzYCwgbm8gb3RoZXIgbm9uLXByaW50YWJsZSBrZXkgc2hvdWxkLlxuICAgIHJldHVybiBjaGFyQ29kZSA9PT0gMTMgPyAnRW50ZXInIDogU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSk7XG4gIH1cbiAgaWYgKG5hdGl2ZUV2ZW50LnR5cGUgPT09ICdrZXlkb3duJyB8fCBuYXRpdmVFdmVudC50eXBlID09PSAna2V5dXAnKSB7XG4gICAgLy8gV2hpbGUgdXNlciBrZXlib2FyZCBsYXlvdXQgZGV0ZXJtaW5lcyB0aGUgYWN0dWFsIG1lYW5pbmcgb2YgZWFjaFxuICAgIC8vIGBrZXlDb2RlYCB2YWx1ZSwgYWxtb3N0IGFsbCBmdW5jdGlvbiBrZXlzIGhhdmUgYSB1bml2ZXJzYWwgdmFsdWUuXG4gICAgcmV0dXJuIHRyYW5zbGF0ZVRvS2V5W25hdGl2ZUV2ZW50LmtleUNvZGVdIHx8ICdVbmlkZW50aWZpZWQnO1xuICB9XG4gIHJldHVybiAnJztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRFdmVudEtleTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZ2V0RXZlbnRNb2RpZmllclN0YXRlXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqXG4gKiBUcmFuc2xhdGlvbiBmcm9tIG1vZGlmaWVyIGtleSB0byB0aGUgYXNzb2NpYXRlZCBwcm9wZXJ0eSBpbiB0aGUgZXZlbnQuXG4gKiBAc2VlIGh0dHA6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy8ja2V5cy1Nb2RpZmllcnNcbiAqL1xuXG52YXIgbW9kaWZpZXJLZXlUb1Byb3AgPSB7XG4gICdBbHQnOiAnYWx0S2V5JyxcbiAgJ0NvbnRyb2wnOiAnY3RybEtleScsXG4gICdNZXRhJzogJ21ldGFLZXknLFxuICAnU2hpZnQnOiAnc2hpZnRLZXknXG59O1xuXG4vLyBJRTggZG9lcyBub3QgaW1wbGVtZW50IGdldE1vZGlmaWVyU3RhdGUgc28gd2Ugc2ltcGx5IG1hcCBpdCB0byB0aGUgb25seVxuLy8gbW9kaWZpZXIga2V5cyBleHBvc2VkIGJ5IHRoZSBldmVudCBpdHNlbGYsIGRvZXMgbm90IHN1cHBvcnQgTG9jay1rZXlzLlxuLy8gQ3VycmVudGx5LCBhbGwgbWFqb3IgYnJvd3NlcnMgZXhjZXB0IENocm9tZSBzZWVtcyB0byBzdXBwb3J0IExvY2sta2V5cy5cbmZ1bmN0aW9uIG1vZGlmaWVyU3RhdGVHZXR0ZXIoa2V5QXJnKSB7XG4gIHZhciBzeW50aGV0aWNFdmVudCA9IHRoaXM7XG4gIHZhciBuYXRpdmVFdmVudCA9IHN5bnRoZXRpY0V2ZW50Lm5hdGl2ZUV2ZW50O1xuICBpZiAobmF0aXZlRXZlbnQuZ2V0TW9kaWZpZXJTdGF0ZSkge1xuICAgIHJldHVybiBuYXRpdmVFdmVudC5nZXRNb2RpZmllclN0YXRlKGtleUFyZyk7XG4gIH1cbiAgdmFyIGtleVByb3AgPSBtb2RpZmllcktleVRvUHJvcFtrZXlBcmddO1xuICByZXR1cm4ga2V5UHJvcCA/ICEhbmF0aXZlRXZlbnRba2V5UHJvcF0gOiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZ2V0RXZlbnRNb2RpZmllclN0YXRlKG5hdGl2ZUV2ZW50KSB7XG4gIHJldHVybiBtb2RpZmllclN0YXRlR2V0dGVyO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldEV2ZW50TW9kaWZpZXJTdGF0ZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgZ2V0RXZlbnRUYXJnZXRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEdldHMgdGhlIHRhcmdldCBub2RlIGZyb20gYSBuYXRpdmUgYnJvd3NlciBldmVudCBieSBhY2NvdW50aW5nIGZvclxuICogaW5jb25zaXN0ZW5jaWVzIGluIGJyb3dzZXIgRE9NIEFQSXMuXG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG5hdGl2ZUV2ZW50IE5hdGl2ZSBicm93c2VyIGV2ZW50LlxuICogQHJldHVybiB7RE9NRXZlbnRUYXJnZXR9IFRhcmdldCBub2RlLlxuICovXG5mdW5jdGlvbiBnZXRFdmVudFRhcmdldChuYXRpdmVFdmVudCkge1xuICB2YXIgdGFyZ2V0ID0gbmF0aXZlRXZlbnQudGFyZ2V0IHx8IG5hdGl2ZUV2ZW50LnNyY0VsZW1lbnQgfHwgd2luZG93O1xuICAvLyBTYWZhcmkgbWF5IGZpcmUgZXZlbnRzIG9uIHRleHQgbm9kZXMgKE5vZGUuVEVYVF9OT0RFIGlzIDMpLlxuICAvLyBAc2VlIGh0dHA6Ly93d3cucXVpcmtzbW9kZS5vcmcvanMvZXZlbnRzX3Byb3BlcnRpZXMuaHRtbFxuICByZXR1cm4gdGFyZ2V0Lm5vZGVUeXBlID09PSAzID8gdGFyZ2V0LnBhcmVudE5vZGUgOiB0YXJnZXQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0RXZlbnRUYXJnZXQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldEl0ZXJhdG9yRm5cbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKiBnbG9iYWwgU3ltYm9sICovXG52YXIgSVRFUkFUT1JfU1lNQk9MID0gdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBTeW1ib2wuaXRlcmF0b3I7XG52YXIgRkFVWF9JVEVSQVRPUl9TWU1CT0wgPSAnQEBpdGVyYXRvcic7IC8vIEJlZm9yZSBTeW1ib2wgc3BlYy5cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpdGVyYXRvciBtZXRob2QgZnVuY3Rpb24gY29udGFpbmVkIG9uIHRoZSBpdGVyYWJsZSBvYmplY3QuXG4gKlxuICogQmUgc3VyZSB0byBpbnZva2UgdGhlIGZ1bmN0aW9uIHdpdGggdGhlIGl0ZXJhYmxlIGFzIGNvbnRleHQ6XG4gKlxuICogICAgIHZhciBpdGVyYXRvckZuID0gZ2V0SXRlcmF0b3JGbihteUl0ZXJhYmxlKTtcbiAqICAgICBpZiAoaXRlcmF0b3JGbikge1xuICogICAgICAgdmFyIGl0ZXJhdG9yID0gaXRlcmF0b3JGbi5jYWxsKG15SXRlcmFibGUpO1xuICogICAgICAgLi4uXG4gKiAgICAgfVxuICpcbiAqIEBwYXJhbSB7P29iamVjdH0gbWF5YmVJdGVyYWJsZVxuICogQHJldHVybiB7P2Z1bmN0aW9ufVxuICovXG5mdW5jdGlvbiBnZXRJdGVyYXRvckZuKG1heWJlSXRlcmFibGUpIHtcbiAgdmFyIGl0ZXJhdG9yRm4gPSBtYXliZUl0ZXJhYmxlICYmIChJVEVSQVRPUl9TWU1CT0wgJiYgbWF5YmVJdGVyYWJsZVtJVEVSQVRPUl9TWU1CT0xdIHx8IG1heWJlSXRlcmFibGVbRkFVWF9JVEVSQVRPUl9TWU1CT0xdKTtcbiAgaWYgKHR5cGVvZiBpdGVyYXRvckZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGl0ZXJhdG9yRm47XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRJdGVyYXRvckZuOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEdpdmVuIGFueSBub2RlIHJldHVybiB0aGUgZmlyc3QgbGVhZiBub2RlIHdpdGhvdXQgY2hpbGRyZW4uXG4gKlxuICogQHBhcmFtIHtET01FbGVtZW50fERPTVRleHROb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtET01FbGVtZW50fERPTVRleHROb2RlfVxuICovXG5mdW5jdGlvbiBnZXRMZWFmTm9kZShub2RlKSB7XG4gIHdoaWxlIChub2RlICYmIG5vZGUuZmlyc3RDaGlsZCkge1xuICAgIG5vZGUgPSBub2RlLmZpcnN0Q2hpbGQ7XG4gIH1cbiAgcmV0dXJuIG5vZGU7XG59XG5cbi8qKlxuICogR2V0IHRoZSBuZXh0IHNpYmxpbmcgd2l0aGluIGEgY29udGFpbmVyLiBUaGlzIHdpbGwgd2FsayB1cCB0aGVcbiAqIERPTSBpZiBhIG5vZGUncyBzaWJsaW5ncyBoYXZlIGJlZW4gZXhoYXVzdGVkLlxuICpcbiAqIEBwYXJhbSB7RE9NRWxlbWVudHxET01UZXh0Tm9kZX0gbm9kZVxuICogQHJldHVybiB7P0RPTUVsZW1lbnR8RE9NVGV4dE5vZGV9XG4gKi9cbmZ1bmN0aW9uIGdldFNpYmxpbmdOb2RlKG5vZGUpIHtcbiAgd2hpbGUgKG5vZGUpIHtcbiAgICBpZiAobm9kZS5uZXh0U2libGluZykge1xuICAgICAgcmV0dXJuIG5vZGUubmV4dFNpYmxpbmc7XG4gICAgfVxuICAgIG5vZGUgPSBub2RlLnBhcmVudE5vZGU7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgb2JqZWN0IGRlc2NyaWJpbmcgdGhlIG5vZGVzIHdoaWNoIGNvbnRhaW4gY2hhcmFjdGVycyBhdCBvZmZzZXQuXG4gKlxuICogQHBhcmFtIHtET01FbGVtZW50fERPTVRleHROb2RlfSByb290XG4gKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0XG4gKiBAcmV0dXJuIHs/b2JqZWN0fVxuICovXG5mdW5jdGlvbiBnZXROb2RlRm9yQ2hhcmFjdGVyT2Zmc2V0KHJvb3QsIG9mZnNldCkge1xuICB2YXIgbm9kZSA9IGdldExlYWZOb2RlKHJvb3QpO1xuICB2YXIgbm9kZVN0YXJ0ID0gMDtcbiAgdmFyIG5vZGVFbmQgPSAwO1xuXG4gIHdoaWxlIChub2RlKSB7XG4gICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgIG5vZGVFbmQgPSBub2RlU3RhcnQgKyBub2RlLnRleHRDb250ZW50Lmxlbmd0aDtcblxuICAgICAgaWYgKG5vZGVTdGFydCA8PSBvZmZzZXQgJiYgbm9kZUVuZCA+PSBvZmZzZXQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBub2RlOiBub2RlLFxuICAgICAgICAgIG9mZnNldDogb2Zmc2V0IC0gbm9kZVN0YXJ0XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIG5vZGVTdGFydCA9IG5vZGVFbmQ7XG4gICAgfVxuXG4gICAgbm9kZSA9IGdldExlYWZOb2RlKGdldFNpYmxpbmdOb2RlKG5vZGUpKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldE5vZGVGb3JDaGFyYWN0ZXJPZmZzZXQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldFRleHRDb250ZW50QWNjZXNzb3JcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG5cbnZhciBjb250ZW50S2V5ID0gbnVsbDtcblxuLyoqXG4gKiBHZXRzIHRoZSBrZXkgdXNlZCB0byBhY2Nlc3MgdGV4dCBjb250ZW50IG9uIGEgRE9NIG5vZGUuXG4gKlxuICogQHJldHVybiB7P3N0cmluZ30gS2V5IHVzZWQgdG8gYWNjZXNzIHRleHQgY29udGVudC5cbiAqIEBpbnRlcm5hbFxuICovXG5mdW5jdGlvbiBnZXRUZXh0Q29udGVudEFjY2Vzc29yKCkge1xuICBpZiAoIWNvbnRlbnRLZXkgJiYgRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gICAgLy8gUHJlZmVyIHRleHRDb250ZW50IHRvIGlubmVyVGV4dCBiZWNhdXNlIG1hbnkgYnJvd3NlcnMgc3VwcG9ydCBib3RoIGJ1dFxuICAgIC8vIFNWRyA8dGV4dD4gZWxlbWVudHMgZG9uJ3Qgc3VwcG9ydCBpbm5lclRleHQgZXZlbiB3aGVuIDxkaXY+IGRvZXMuXG4gICAgY29udGVudEtleSA9ICd0ZXh0Q29udGVudCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50ID8gJ3RleHRDb250ZW50JyA6ICdpbm5lclRleHQnO1xuICB9XG4gIHJldHVybiBjb250ZW50S2V5O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFRleHRDb250ZW50QWNjZXNzb3I7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGluc3RhbnRpYXRlUmVhY3RDb21wb25lbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RDb21wb3NpdGVDb21wb25lbnQgPSByZXF1aXJlKCcuL1JlYWN0Q29tcG9zaXRlQ29tcG9uZW50Jyk7XG52YXIgUmVhY3RFbXB0eUNvbXBvbmVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbXB0eUNvbXBvbmVudCcpO1xudmFyIFJlYWN0TmF0aXZlQ29tcG9uZW50ID0gcmVxdWlyZSgnLi9SZWFjdE5hdGl2ZUNvbXBvbmVudCcpO1xuXG52YXIgYXNzaWduID0gcmVxdWlyZSgnLi9PYmplY3QuYXNzaWduJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxuLy8gVG8gYXZvaWQgYSBjeWNsaWMgZGVwZW5kZW5jeSwgd2UgY3JlYXRlIHRoZSBmaW5hbCBjbGFzcyBpbiB0aGlzIG1vZHVsZVxudmFyIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50V3JhcHBlciA9IGZ1bmN0aW9uICgpIHt9O1xuYXNzaWduKFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50V3JhcHBlci5wcm90b3R5cGUsIFJlYWN0Q29tcG9zaXRlQ29tcG9uZW50Lk1peGluLCB7XG4gIF9pbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50OiBpbnN0YW50aWF0ZVJlYWN0Q29tcG9uZW50XG59KTtcblxuZnVuY3Rpb24gZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKG93bmVyKSB7XG4gIGlmIChvd25lcikge1xuICAgIHZhciBuYW1lID0gb3duZXIuZ2V0TmFtZSgpO1xuICAgIGlmIChuYW1lKSB7XG4gICAgICByZXR1cm4gJyBDaGVjayB0aGUgcmVuZGVyIG1ldGhvZCBvZiBgJyArIG5hbWUgKyAnYC4nO1xuICAgIH1cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIHR5cGUgcmVmZXJlbmNlIGlzIGEga25vd24gaW50ZXJuYWwgdHlwZS4gSS5lLiBub3QgYSB1c2VyXG4gKiBwcm92aWRlZCBjb21wb3NpdGUgdHlwZS5cbiAqXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSB0eXBlXG4gKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgdGhpcyBpcyBhIHZhbGlkIGludGVybmFsIHR5cGUuXG4gKi9cbmZ1bmN0aW9uIGlzSW50ZXJuYWxDb21wb25lbnRUeXBlKHR5cGUpIHtcbiAgcmV0dXJuIHR5cGVvZiB0eXBlID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiB0eXBlLnByb3RvdHlwZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHR5cGUucHJvdG90eXBlLm1vdW50Q29tcG9uZW50ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiB0eXBlLnByb3RvdHlwZS5yZWNlaXZlQ29tcG9uZW50ID09PSAnZnVuY3Rpb24nO1xufVxuXG4vKipcbiAqIEdpdmVuIGEgUmVhY3ROb2RlLCBjcmVhdGUgYW4gaW5zdGFuY2UgdGhhdCB3aWxsIGFjdHVhbGx5IGJlIG1vdW50ZWQuXG4gKlxuICogQHBhcmFtIHtSZWFjdE5vZGV9IG5vZGVcbiAqIEByZXR1cm4ge29iamVjdH0gQSBuZXcgaW5zdGFuY2Ugb2YgdGhlIGVsZW1lbnQncyBjb25zdHJ1Y3Rvci5cbiAqIEBwcm90ZWN0ZWRcbiAqL1xuZnVuY3Rpb24gaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudChub2RlKSB7XG4gIHZhciBpbnN0YW5jZTtcblxuICBpZiAobm9kZSA9PT0gbnVsbCB8fCBub2RlID09PSBmYWxzZSkge1xuICAgIGluc3RhbmNlID0gbmV3IFJlYWN0RW1wdHlDb21wb25lbnQoaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudCk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIG5vZGUgPT09ICdvYmplY3QnKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBub2RlO1xuICAgICEoZWxlbWVudCAmJiAodHlwZW9mIGVsZW1lbnQudHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fCB0eXBlb2YgZWxlbWVudC50eXBlID09PSAnc3RyaW5nJykpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ0VsZW1lbnQgdHlwZSBpcyBpbnZhbGlkOiBleHBlY3RlZCBhIHN0cmluZyAoZm9yIGJ1aWx0LWluIGNvbXBvbmVudHMpICcgKyAnb3IgYSBjbGFzcy9mdW5jdGlvbiAoZm9yIGNvbXBvc2l0ZSBjb21wb25lbnRzKSBidXQgZ290OiAlcy4lcycsIGVsZW1lbnQudHlwZSA9PSBudWxsID8gZWxlbWVudC50eXBlIDogdHlwZW9mIGVsZW1lbnQudHlwZSwgZ2V0RGVjbGFyYXRpb25FcnJvckFkZGVuZHVtKGVsZW1lbnQuX293bmVyKSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICAgLy8gU3BlY2lhbCBjYXNlIHN0cmluZyB2YWx1ZXNcbiAgICBpZiAodHlwZW9mIGVsZW1lbnQudHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGluc3RhbmNlID0gUmVhY3ROYXRpdmVDb21wb25lbnQuY3JlYXRlSW50ZXJuYWxDb21wb25lbnQoZWxlbWVudCk7XG4gICAgfSBlbHNlIGlmIChpc0ludGVybmFsQ29tcG9uZW50VHlwZShlbGVtZW50LnR5cGUpKSB7XG4gICAgICAvLyBUaGlzIGlzIHRlbXBvcmFyaWx5IGF2YWlsYWJsZSBmb3IgY3VzdG9tIGNvbXBvbmVudHMgdGhhdCBhcmUgbm90IHN0cmluZ1xuICAgICAgLy8gcmVwcmVzZW50YXRpb25zLiBJLmUuIEFSVC4gT25jZSB0aG9zZSBhcmUgdXBkYXRlZCB0byB1c2UgdGhlIHN0cmluZ1xuICAgICAgLy8gcmVwcmVzZW50YXRpb24sIHdlIGNhbiBkcm9wIHRoaXMgY29kZSBwYXRoLlxuICAgICAgaW5zdGFuY2UgPSBuZXcgZWxlbWVudC50eXBlKGVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbnN0YW5jZSA9IG5ldyBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudFdyYXBwZXIoKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIG5vZGUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBub2RlID09PSAnbnVtYmVyJykge1xuICAgIGluc3RhbmNlID0gUmVhY3ROYXRpdmVDb21wb25lbnQuY3JlYXRlSW5zdGFuY2VGb3JUZXh0KG5vZGUpO1xuICB9IGVsc2Uge1xuICAgICFmYWxzZSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdFbmNvdW50ZXJlZCBpbnZhbGlkIFJlYWN0IG5vZGUgb2YgdHlwZSAlcycsIHR5cGVvZiBub2RlKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIH1cblxuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKHR5cGVvZiBpbnN0YW5jZS5jb25zdHJ1Y3QgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGluc3RhbmNlLm1vdW50Q29tcG9uZW50ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBpbnN0YW5jZS5yZWNlaXZlQ29tcG9uZW50ID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBpbnN0YW5jZS51bm1vdW50Q29tcG9uZW50ID09PSAnZnVuY3Rpb24nLCAnT25seSBSZWFjdCBDb21wb25lbnRzIGNhbiBiZSBtb3VudGVkLicpIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgLy8gU2V0cyB1cCB0aGUgaW5zdGFuY2UuIFRoaXMgY2FuIHByb2JhYmx5IGp1c3QgbW92ZSBpbnRvIHRoZSBjb25zdHJ1Y3RvciBub3cuXG4gIGluc3RhbmNlLmNvbnN0cnVjdChub2RlKTtcblxuICAvLyBUaGVzZSB0d28gZmllbGRzIGFyZSB1c2VkIGJ5IHRoZSBET00gYW5kIEFSVCBkaWZmaW5nIGFsZ29yaXRobXNcbiAgLy8gcmVzcGVjdGl2ZWx5LiBJbnN0ZWFkIG9mIHVzaW5nIGV4cGFuZG9zIG9uIGNvbXBvbmVudHMsIHdlIHNob3VsZCBiZVxuICAvLyBzdG9yaW5nIHRoZSBzdGF0ZSBuZWVkZWQgYnkgdGhlIGRpZmZpbmcgYWxnb3JpdGhtcyBlbHNld2hlcmUuXG4gIGluc3RhbmNlLl9tb3VudEluZGV4ID0gMDtcbiAgaW5zdGFuY2UuX21vdW50SW1hZ2UgPSBudWxsO1xuXG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaW5zdGFuY2UuX2lzT3duZXJOZWNlc3NhcnkgPSBmYWxzZTtcbiAgICBpbnN0YW5jZS5fd2FybmVkQWJvdXRSZWZzSW5SZW5kZXIgPSBmYWxzZTtcbiAgfVxuXG4gIC8vIEludGVybmFsIGluc3RhbmNlcyBzaG91bGQgZnVsbHkgY29uc3RydWN0ZWQgYXQgdGhpcyBwb2ludCwgc28gdGhleSBzaG91bGRcbiAgLy8gbm90IGdldCBhbnkgbmV3IGZpZWxkcyBhZGRlZCB0byB0aGVtIGF0IHRoaXMgcG9pbnQuXG4gIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKE9iamVjdC5wcmV2ZW50RXh0ZW5zaW9ucykge1xuICAgICAgT2JqZWN0LnByZXZlbnRFeHRlbnNpb25zKGluc3RhbmNlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gaW5zdGFuY2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW5zdGFudGlhdGVSZWFjdENvbXBvbmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaXNFdmVudFN1cHBvcnRlZFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnZmJqcy9saWIvRXhlY3V0aW9uRW52aXJvbm1lbnQnKTtcblxudmFyIHVzZUhhc0ZlYXR1cmU7XG5pZiAoRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gIHVzZUhhc0ZlYXR1cmUgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbiAmJiBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5oYXNGZWF0dXJlICYmXG4gIC8vIGFsd2F5cyByZXR1cm5zIHRydWUgaW4gbmV3ZXIgYnJvd3NlcnMgYXMgcGVyIHRoZSBzdGFuZGFyZC5cbiAgLy8gQHNlZSBodHRwOi8vZG9tLnNwZWMud2hhdHdnLm9yZy8jZG9tLWRvbWltcGxlbWVudGF0aW9uLWhhc2ZlYXR1cmVcbiAgZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uaGFzRmVhdHVyZSgnJywgJycpICE9PSB0cnVlO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhbiBldmVudCBpcyBzdXBwb3J0ZWQgaW4gdGhlIGN1cnJlbnQgZXhlY3V0aW9uIGVudmlyb25tZW50LlxuICpcbiAqIE5PVEU6IFRoaXMgd2lsbCBub3Qgd29yayBjb3JyZWN0bHkgZm9yIG5vbi1nZW5lcmljIGV2ZW50cyBzdWNoIGFzIGBjaGFuZ2VgLFxuICogYHJlc2V0YCwgYGxvYWRgLCBgZXJyb3JgLCBhbmQgYHNlbGVjdGAuXG4gKlxuICogQm9ycm93cyBmcm9tIE1vZGVybml6ci5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lU3VmZml4IEV2ZW50IG5hbWUsIGUuZy4gXCJjbGlja1wiLlxuICogQHBhcmFtIHs/Ym9vbGVhbn0gY2FwdHVyZSBDaGVjayBpZiB0aGUgY2FwdHVyZSBwaGFzZSBpcyBzdXBwb3J0ZWQuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBldmVudCBpcyBzdXBwb3J0ZWQuXG4gKiBAaW50ZXJuYWxcbiAqIEBsaWNlbnNlIE1vZGVybml6ciAzLjAuMHByZSAoQ3VzdG9tIEJ1aWxkKSB8IE1JVFxuICovXG5mdW5jdGlvbiBpc0V2ZW50U3VwcG9ydGVkKGV2ZW50TmFtZVN1ZmZpeCwgY2FwdHVyZSkge1xuICBpZiAoIUV4ZWN1dGlvbkVudmlyb25tZW50LmNhblVzZURPTSB8fCBjYXB0dXJlICYmICEoJ2FkZEV2ZW50TGlzdGVuZXInIGluIGRvY3VtZW50KSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHZhciBldmVudE5hbWUgPSAnb24nICsgZXZlbnROYW1lU3VmZml4O1xuICB2YXIgaXNTdXBwb3J0ZWQgPSAoZXZlbnROYW1lIGluIGRvY3VtZW50KTtcblxuICBpZiAoIWlzU3VwcG9ydGVkKSB7XG4gICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZShldmVudE5hbWUsICdyZXR1cm47Jyk7XG4gICAgaXNTdXBwb3J0ZWQgPSB0eXBlb2YgZWxlbWVudFtldmVudE5hbWVdID09PSAnZnVuY3Rpb24nO1xuICB9XG5cbiAgaWYgKCFpc1N1cHBvcnRlZCAmJiB1c2VIYXNGZWF0dXJlICYmIGV2ZW50TmFtZVN1ZmZpeCA9PT0gJ3doZWVsJykge1xuICAgIC8vIFRoaXMgaXMgdGhlIG9ubHkgd2F5IHRvIHRlc3Qgc3VwcG9ydCBmb3IgdGhlIGB3aGVlbGAgZXZlbnQgaW4gSUU5Ky5cbiAgICBpc1N1cHBvcnRlZCA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmhhc0ZlYXR1cmUoJ0V2ZW50cy53aGVlbCcsICczLjAnKTtcbiAgfVxuXG4gIHJldHVybiBpc1N1cHBvcnRlZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0V2ZW50U3VwcG9ydGVkOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBpc1RleHRJbnB1dEVsZW1lbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQHNlZSBodHRwOi8vd3d3LndoYXR3Zy5vcmcvc3BlY3Mvd2ViLWFwcHMvY3VycmVudC13b3JrL211bHRpcGFnZS90aGUtaW5wdXQtZWxlbWVudC5odG1sI2lucHV0LXR5cGUtYXR0ci1zdW1tYXJ5XG4gKi9cbnZhciBzdXBwb3J0ZWRJbnB1dFR5cGVzID0ge1xuICAnY29sb3InOiB0cnVlLFxuICAnZGF0ZSc6IHRydWUsXG4gICdkYXRldGltZSc6IHRydWUsXG4gICdkYXRldGltZS1sb2NhbCc6IHRydWUsXG4gICdlbWFpbCc6IHRydWUsXG4gICdtb250aCc6IHRydWUsXG4gICdudW1iZXInOiB0cnVlLFxuICAncGFzc3dvcmQnOiB0cnVlLFxuICAncmFuZ2UnOiB0cnVlLFxuICAnc2VhcmNoJzogdHJ1ZSxcbiAgJ3RlbCc6IHRydWUsXG4gICd0ZXh0JzogdHJ1ZSxcbiAgJ3RpbWUnOiB0cnVlLFxuICAndXJsJzogdHJ1ZSxcbiAgJ3dlZWsnOiB0cnVlXG59O1xuXG5mdW5jdGlvbiBpc1RleHRJbnB1dEVsZW1lbnQoZWxlbSkge1xuICB2YXIgbm9kZU5hbWUgPSBlbGVtICYmIGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuICByZXR1cm4gbm9kZU5hbWUgJiYgKG5vZGVOYW1lID09PSAnaW5wdXQnICYmIHN1cHBvcnRlZElucHV0VHlwZXNbZWxlbS50eXBlXSB8fCBub2RlTmFtZSA9PT0gJ3RleHRhcmVhJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNUZXh0SW5wdXRFbGVtZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBvbmx5Q2hpbGRcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG52YXIgUmVhY3RFbGVtZW50ID0gcmVxdWlyZSgnLi9SZWFjdEVsZW1lbnQnKTtcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJ2ZianMvbGliL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIFJldHVybnMgdGhlIGZpcnN0IGNoaWxkIGluIGEgY29sbGVjdGlvbiBvZiBjaGlsZHJlbiBhbmQgdmVyaWZpZXMgdGhhdCB0aGVyZVxuICogaXMgb25seSBvbmUgY2hpbGQgaW4gdGhlIGNvbGxlY3Rpb24uIFRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIHRoaXNcbiAqIGZ1bmN0aW9uIGFzc3VtZXMgdGhhdCBhIHNpbmdsZSBjaGlsZCBnZXRzIHBhc3NlZCB3aXRob3V0IGEgd3JhcHBlciwgYnV0IHRoZVxuICogcHVycG9zZSBvZiB0aGlzIGhlbHBlciBmdW5jdGlvbiBpcyB0byBhYnN0cmFjdCBhd2F5IHRoZSBwYXJ0aWN1bGFyIHN0cnVjdHVyZVxuICogb2YgY2hpbGRyZW4uXG4gKlxuICogQHBhcmFtIHs/b2JqZWN0fSBjaGlsZHJlbiBDaGlsZCBjb2xsZWN0aW9uIHN0cnVjdHVyZS5cbiAqIEByZXR1cm4ge1JlYWN0Q29tcG9uZW50fSBUaGUgZmlyc3QgYW5kIG9ubHkgYFJlYWN0Q29tcG9uZW50YCBjb250YWluZWQgaW4gdGhlXG4gKiBzdHJ1Y3R1cmUuXG4gKi9cbmZ1bmN0aW9uIG9ubHlDaGlsZChjaGlsZHJlbikge1xuICAhUmVhY3RFbGVtZW50LmlzVmFsaWRFbGVtZW50KGNoaWxkcmVuKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdvbmx5Q2hpbGQgbXVzdCBiZSBwYXNzZWQgYSBjaGlsZHJlbiB3aXRoIGV4YWN0bHkgb25lIGNoaWxkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgcmV0dXJuIGNoaWxkcmVuO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG9ubHlDaGlsZDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgcXVvdGVBdHRyaWJ1dGVWYWx1ZUZvckJyb3dzZXJcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIgPSByZXF1aXJlKCcuL2VzY2FwZVRleHRDb250ZW50Rm9yQnJvd3NlcicpO1xuXG4vKipcbiAqIEVzY2FwZXMgYXR0cmlidXRlIHZhbHVlIHRvIHByZXZlbnQgc2NyaXB0aW5nIGF0dGFja3MuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSB0byBlc2NhcGUuXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEFuIGVzY2FwZWQgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBxdW90ZUF0dHJpYnV0ZVZhbHVlRm9yQnJvd3Nlcih2YWx1ZSkge1xuICByZXR1cm4gJ1wiJyArIGVzY2FwZVRleHRDb250ZW50Rm9yQnJvd3Nlcih2YWx1ZSkgKyAnXCInO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHF1b3RlQXR0cmlidXRlVmFsdWVGb3JCcm93c2VyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiogQHByb3ZpZGVzTW9kdWxlIHJlbmRlclN1YnRyZWVJbnRvQ29udGFpbmVyXG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBSZWFjdE1vdW50ID0gcmVxdWlyZSgnLi9SZWFjdE1vdW50Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUmVhY3RNb3VudC5yZW5kZXJTdWJ0cmVlSW50b0NvbnRhaW5lcjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgc2V0SW5uZXJIVE1MXG4gKi9cblxuLyogZ2xvYmFscyBNU0FwcCAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG5cbnZhciBXSElURVNQQUNFX1RFU1QgPSAvXlsgXFxyXFxuXFx0XFxmXS87XG52YXIgTk9OVklTSUJMRV9URVNUID0gLzwoIS0tfGxpbmt8bm9zY3JpcHR8bWV0YXxzY3JpcHR8c3R5bGUpWyBcXHJcXG5cXHRcXGZcXC8+XS87XG5cbi8qKlxuICogU2V0IHRoZSBpbm5lckhUTUwgcHJvcGVydHkgb2YgYSBub2RlLCBlbnN1cmluZyB0aGF0IHdoaXRlc3BhY2UgaXMgcHJlc2VydmVkXG4gKiBldmVuIGluIElFOC5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBodG1sXG4gKiBAaW50ZXJuYWxcbiAqL1xudmFyIHNldElubmVySFRNTCA9IGZ1bmN0aW9uIChub2RlLCBodG1sKSB7XG4gIG5vZGUuaW5uZXJIVE1MID0gaHRtbDtcbn07XG5cbi8vIFdpbjggYXBwczogQWxsb3cgYWxsIGh0bWwgdG8gYmUgaW5zZXJ0ZWRcbmlmICh0eXBlb2YgTVNBcHAgIT09ICd1bmRlZmluZWQnICYmIE1TQXBwLmV4ZWNVbnNhZmVMb2NhbEZ1bmN0aW9uKSB7XG4gIHNldElubmVySFRNTCA9IGZ1bmN0aW9uIChub2RlLCBodG1sKSB7XG4gICAgTVNBcHAuZXhlY1Vuc2FmZUxvY2FsRnVuY3Rpb24oZnVuY3Rpb24gKCkge1xuICAgICAgbm9kZS5pbm5lckhUTUwgPSBodG1sO1xuICAgIH0pO1xuICB9O1xufVxuXG5pZiAoRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gIC8vIElFODogV2hlbiB1cGRhdGluZyBhIGp1c3QgY3JlYXRlZCBub2RlIHdpdGggaW5uZXJIVE1MIG9ubHkgbGVhZGluZ1xuICAvLyB3aGl0ZXNwYWNlIGlzIHJlbW92ZWQuIFdoZW4gdXBkYXRpbmcgYW4gZXhpc3Rpbmcgbm9kZSB3aXRoIGlubmVySFRNTFxuICAvLyB3aGl0ZXNwYWNlIGluIHJvb3QgVGV4dE5vZGVzIGlzIGFsc28gY29sbGFwc2VkLlxuICAvLyBAc2VlIHF1aXJrc21vZGUub3JnL2J1Z3JlcG9ydHMvYXJjaGl2ZXMvMjAwNC8xMS9pbm5lcmh0bWxfYW5kX3QuaHRtbFxuXG4gIC8vIEZlYXR1cmUgZGV0ZWN0aW9uOyBvbmx5IElFOCBpcyBrbm93biB0byBiZWhhdmUgaW1wcm9wZXJseSBsaWtlIHRoaXMuXG4gIHZhciB0ZXN0RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB0ZXN0RWxlbWVudC5pbm5lckhUTUwgPSAnICc7XG4gIGlmICh0ZXN0RWxlbWVudC5pbm5lckhUTUwgPT09ICcnKSB7XG4gICAgc2V0SW5uZXJIVE1MID0gZnVuY3Rpb24gKG5vZGUsIGh0bWwpIHtcbiAgICAgIC8vIE1hZ2ljIHRoZW9yeTogSUU4IHN1cHBvc2VkbHkgZGlmZmVyZW50aWF0ZXMgYmV0d2VlbiBhZGRlZCBhbmQgdXBkYXRlZFxuICAgICAgLy8gbm9kZXMgd2hlbiBwcm9jZXNzaW5nIGlubmVySFRNTCwgaW5uZXJIVE1MIG9uIHVwZGF0ZWQgbm9kZXMgc3VmZmVyc1xuICAgICAgLy8gZnJvbSB3b3JzZSB3aGl0ZXNwYWNlIGJlaGF2aW9yLiBSZS1hZGRpbmcgYSBub2RlIGxpa2UgdGhpcyB0cmlnZ2Vyc1xuICAgICAgLy8gdGhlIGluaXRpYWwgYW5kIG1vcmUgZmF2b3JhYmxlIHdoaXRlc3BhY2UgYmVoYXZpb3IuXG4gICAgICAvLyBUT0RPOiBXaGF0IHRvIGRvIG9uIGEgZGV0YWNoZWQgbm9kZT9cbiAgICAgIGlmIChub2RlLnBhcmVudE5vZGUpIHtcbiAgICAgICAgbm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChub2RlLCBub2RlKTtcbiAgICAgIH1cblxuICAgICAgLy8gV2UgYWxzbyBpbXBsZW1lbnQgYSB3b3JrYXJvdW5kIGZvciBub24tdmlzaWJsZSB0YWdzIGRpc2FwcGVhcmluZyBpbnRvXG4gICAgICAvLyB0aGluIGFpciBvbiBJRTgsIHRoaXMgb25seSBoYXBwZW5zIGlmIHRoZXJlIGlzIG5vIHZpc2libGUgdGV4dFxuICAgICAgLy8gaW4tZnJvbnQgb2YgdGhlIG5vbi12aXNpYmxlIHRhZ3MuIFBpZ2d5YmFjayBvbiB0aGUgd2hpdGVzcGFjZSBmaXhcbiAgICAgIC8vIGFuZCBzaW1wbHkgY2hlY2sgaWYgYW55IG5vbi12aXNpYmxlIHRhZ3MgYXBwZWFyIGluIHRoZSBzb3VyY2UuXG4gICAgICBpZiAoV0hJVEVTUEFDRV9URVNULnRlc3QoaHRtbCkgfHwgaHRtbFswXSA9PT0gJzwnICYmIE5PTlZJU0lCTEVfVEVTVC50ZXN0KGh0bWwpKSB7XG4gICAgICAgIC8vIFJlY292ZXIgbGVhZGluZyB3aGl0ZXNwYWNlIGJ5IHRlbXBvcmFyaWx5IHByZXBlbmRpbmcgYW55IGNoYXJhY3Rlci5cbiAgICAgICAgLy8gXFx1RkVGRiBoYXMgdGhlIHBvdGVudGlhbCBhZHZhbnRhZ2Ugb2YgYmVpbmcgemVyby13aWR0aC9pbnZpc2libGUuXG4gICAgICAgIC8vIFVnbGlmeUpTIGRyb3BzIFUrRkVGRiBjaGFycyB3aGVuIHBhcnNpbmcsIHNvIHVzZSBTdHJpbmcuZnJvbUNoYXJDb2RlXG4gICAgICAgIC8vIGluIGhvcGVzIHRoYXQgdGhpcyBpcyBwcmVzZXJ2ZWQgZXZlbiBpZiBcIlxcdUZFRkZcIiBpcyB0cmFuc2Zvcm1lZCB0b1xuICAgICAgICAvLyB0aGUgYWN0dWFsIFVuaWNvZGUgY2hhcmFjdGVyIChieSBCYWJlbCwgZm9yIGV4YW1wbGUpLlxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbWlzaG9vL1VnbGlmeUpTMi9ibG9iL3YyLjQuMjAvbGliL3BhcnNlLmpzI0wyMTZcbiAgICAgICAgbm9kZS5pbm5lckhUTUwgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4RkVGRikgKyBodG1sO1xuXG4gICAgICAgIC8vIGRlbGV0ZURhdGEgbGVhdmVzIGFuIGVtcHR5IGBUZXh0Tm9kZWAgd2hpY2ggb2Zmc2V0cyB0aGUgaW5kZXggb2YgYWxsXG4gICAgICAgIC8vIGNoaWxkcmVuLiBEZWZpbml0ZWx5IHdhbnQgdG8gYXZvaWQgdGhpcy5cbiAgICAgICAgdmFyIHRleHROb2RlID0gbm9kZS5maXJzdENoaWxkO1xuICAgICAgICBpZiAodGV4dE5vZGUuZGF0YS5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBub2RlLnJlbW92ZUNoaWxkKHRleHROb2RlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0ZXh0Tm9kZS5kZWxldGVEYXRhKDAsIDEpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlLmlubmVySFRNTCA9IGh0bWw7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNldElubmVySFRNTDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgc2V0VGV4dENvbnRlbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHJlcXVpcmUoJ2ZianMvbGliL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG52YXIgZXNjYXBlVGV4dENvbnRlbnRGb3JCcm93c2VyID0gcmVxdWlyZSgnLi9lc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXInKTtcbnZhciBzZXRJbm5lckhUTUwgPSByZXF1aXJlKCcuL3NldElubmVySFRNTCcpO1xuXG4vKipcbiAqIFNldCB0aGUgdGV4dENvbnRlbnQgcHJvcGVydHkgb2YgYSBub2RlLCBlbnN1cmluZyB0aGF0IHdoaXRlc3BhY2UgaXMgcHJlc2VydmVkXG4gKiBldmVuIGluIElFOC4gaW5uZXJUZXh0IGlzIGEgcG9vciBzdWJzdGl0dXRlIGZvciB0ZXh0Q29udGVudCBhbmQsIGFtb25nIG1hbnlcbiAqIGlzc3VlcywgaW5zZXJ0cyA8YnI+IGluc3RlYWQgb2YgdGhlIGxpdGVyYWwgbmV3bGluZSBjaGFycy4gaW5uZXJIVE1MIGJlaGF2ZXNcbiAqIGFzIGl0IHNob3VsZC5cbiAqXG4gKiBAcGFyYW0ge0RPTUVsZW1lbnR9IG5vZGVcbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gKiBAaW50ZXJuYWxcbiAqL1xudmFyIHNldFRleHRDb250ZW50ID0gZnVuY3Rpb24gKG5vZGUsIHRleHQpIHtcbiAgbm9kZS50ZXh0Q29udGVudCA9IHRleHQ7XG59O1xuXG5pZiAoRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NKSB7XG4gIGlmICghKCd0ZXh0Q29udGVudCcgaW4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KSkge1xuICAgIHNldFRleHRDb250ZW50ID0gZnVuY3Rpb24gKG5vZGUsIHRleHQpIHtcbiAgICAgIHNldElubmVySFRNTChub2RlLCBlc2NhcGVUZXh0Q29udGVudEZvckJyb3dzZXIodGV4dCkpO1xuICAgIH07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXRUZXh0Q29udGVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnRcbiAqIEB0eXBlY2hlY2tzIHN0YXRpYy1vbmx5XG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIEdpdmVuIGEgYHByZXZFbGVtZW50YCBhbmQgYG5leHRFbGVtZW50YCwgZGV0ZXJtaW5lcyBpZiB0aGUgZXhpc3RpbmdcbiAqIGluc3RhbmNlIHNob3VsZCBiZSB1cGRhdGVkIGFzIG9wcG9zZWQgdG8gYmVpbmcgZGVzdHJveWVkIG9yIHJlcGxhY2VkIGJ5IGEgbmV3XG4gKiBpbnN0YW5jZS4gQm90aCBhcmd1bWVudHMgYXJlIGVsZW1lbnRzLiBUaGlzIGVuc3VyZXMgdGhhdCB0aGlzIGxvZ2ljIGNhblxuICogb3BlcmF0ZSBvbiBzdGF0ZWxlc3MgdHJlZXMgd2l0aG91dCBhbnkgYmFja2luZyBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0gez9vYmplY3R9IHByZXZFbGVtZW50XG4gKiBAcGFyYW0gez9vYmplY3R9IG5leHRFbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBleGlzdGluZyBpbnN0YW5jZSBzaG91bGQgYmUgdXBkYXRlZC5cbiAqIEBwcm90ZWN0ZWRcbiAqL1xuZnVuY3Rpb24gc2hvdWxkVXBkYXRlUmVhY3RDb21wb25lbnQocHJldkVsZW1lbnQsIG5leHRFbGVtZW50KSB7XG4gIHZhciBwcmV2RW1wdHkgPSBwcmV2RWxlbWVudCA9PT0gbnVsbCB8fCBwcmV2RWxlbWVudCA9PT0gZmFsc2U7XG4gIHZhciBuZXh0RW1wdHkgPSBuZXh0RWxlbWVudCA9PT0gbnVsbCB8fCBuZXh0RWxlbWVudCA9PT0gZmFsc2U7XG4gIGlmIChwcmV2RW1wdHkgfHwgbmV4dEVtcHR5KSB7XG4gICAgcmV0dXJuIHByZXZFbXB0eSA9PT0gbmV4dEVtcHR5O1xuICB9XG5cbiAgdmFyIHByZXZUeXBlID0gdHlwZW9mIHByZXZFbGVtZW50O1xuICB2YXIgbmV4dFR5cGUgPSB0eXBlb2YgbmV4dEVsZW1lbnQ7XG4gIGlmIChwcmV2VHlwZSA9PT0gJ3N0cmluZycgfHwgcHJldlR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIG5leHRUeXBlID09PSAnc3RyaW5nJyB8fCBuZXh0VHlwZSA9PT0gJ251bWJlcic7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG5leHRUeXBlID09PSAnb2JqZWN0JyAmJiBwcmV2RWxlbWVudC50eXBlID09PSBuZXh0RWxlbWVudC50eXBlICYmIHByZXZFbGVtZW50LmtleSA9PT0gbmV4dEVsZW1lbnQua2V5O1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzaG91bGRVcGRhdGVSZWFjdENvbXBvbmVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgdHJhdmVyc2VBbGxDaGlsZHJlblxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIFJlYWN0Q3VycmVudE93bmVyID0gcmVxdWlyZSgnLi9SZWFjdEN1cnJlbnRPd25lcicpO1xudmFyIFJlYWN0RWxlbWVudCA9IHJlcXVpcmUoJy4vUmVhY3RFbGVtZW50Jyk7XG52YXIgUmVhY3RJbnN0YW5jZUhhbmRsZXMgPSByZXF1aXJlKCcuL1JlYWN0SW5zdGFuY2VIYW5kbGVzJyk7XG5cbnZhciBnZXRJdGVyYXRvckZuID0gcmVxdWlyZSgnLi9nZXRJdGVyYXRvckZuJyk7XG52YXIgaW52YXJpYW50ID0gcmVxdWlyZSgnZmJqcy9saWIvaW52YXJpYW50Jyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIFNFUEFSQVRPUiA9IFJlYWN0SW5zdGFuY2VIYW5kbGVzLlNFUEFSQVRPUjtcbnZhciBTVUJTRVBBUkFUT1IgPSAnOic7XG5cbi8qKlxuICogVE9ETzogVGVzdCB0aGF0IGEgc2luZ2xlIGNoaWxkIGFuZCBhbiBhcnJheSB3aXRoIG9uZSBpdGVtIGhhdmUgdGhlIHNhbWUga2V5XG4gKiBwYXR0ZXJuLlxuICovXG5cbnZhciB1c2VyUHJvdmlkZWRLZXlFc2NhcGVyTG9va3VwID0ge1xuICAnPSc6ICc9MCcsXG4gICcuJzogJz0xJyxcbiAgJzonOiAnPTInXG59O1xuXG52YXIgdXNlclByb3ZpZGVkS2V5RXNjYXBlUmVnZXggPSAvWz0uOl0vZztcblxudmFyIGRpZFdhcm5BYm91dE1hcHMgPSBmYWxzZTtcblxuZnVuY3Rpb24gdXNlclByb3ZpZGVkS2V5RXNjYXBlcihtYXRjaCkge1xuICByZXR1cm4gdXNlclByb3ZpZGVkS2V5RXNjYXBlckxvb2t1cFttYXRjaF07XG59XG5cbi8qKlxuICogR2VuZXJhdGUgYSBrZXkgc3RyaW5nIHRoYXQgaWRlbnRpZmllcyBhIGNvbXBvbmVudCB3aXRoaW4gYSBzZXQuXG4gKlxuICogQHBhcmFtIHsqfSBjb21wb25lbnQgQSBjb21wb25lbnQgdGhhdCBjb3VsZCBjb250YWluIGEgbWFudWFsIGtleS5cbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleCB0aGF0IGlzIHVzZWQgaWYgYSBtYW51YWwga2V5IGlzIG5vdCBwcm92aWRlZC5cbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gZ2V0Q29tcG9uZW50S2V5KGNvbXBvbmVudCwgaW5kZXgpIHtcbiAgaWYgKGNvbXBvbmVudCAmJiBjb21wb25lbnQua2V5ICE9IG51bGwpIHtcbiAgICAvLyBFeHBsaWNpdCBrZXlcbiAgICByZXR1cm4gd3JhcFVzZXJQcm92aWRlZEtleShjb21wb25lbnQua2V5KTtcbiAgfVxuICAvLyBJbXBsaWNpdCBrZXkgZGV0ZXJtaW5lZCBieSB0aGUgaW5kZXggaW4gdGhlIHNldFxuICByZXR1cm4gaW5kZXgudG9TdHJpbmcoMzYpO1xufVxuXG4vKipcbiAqIEVzY2FwZSBhIGNvbXBvbmVudCBrZXkgc28gdGhhdCBpdCBpcyBzYWZlIHRvIHVzZSBpbiBhIHJlYWN0aWQuXG4gKlxuICogQHBhcmFtIHsqfSB0ZXh0IENvbXBvbmVudCBrZXkgdG8gYmUgZXNjYXBlZC5cbiAqIEByZXR1cm4ge3N0cmluZ30gQW4gZXNjYXBlZCBzdHJpbmcuXG4gKi9cbmZ1bmN0aW9uIGVzY2FwZVVzZXJQcm92aWRlZEtleSh0ZXh0KSB7XG4gIHJldHVybiAoJycgKyB0ZXh0KS5yZXBsYWNlKHVzZXJQcm92aWRlZEtleUVzY2FwZVJlZ2V4LCB1c2VyUHJvdmlkZWRLZXlFc2NhcGVyKTtcbn1cblxuLyoqXG4gKiBXcmFwIGEgYGtleWAgdmFsdWUgZXhwbGljaXRseSBwcm92aWRlZCBieSB0aGUgdXNlciB0byBkaXN0aW5ndWlzaCBpdCBmcm9tXG4gKiBpbXBsaWNpdGx5LWdlbmVyYXRlZCBrZXlzIGdlbmVyYXRlZCBieSBhIGNvbXBvbmVudCdzIGluZGV4IGluIGl0cyBwYXJlbnQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBWYWx1ZSBvZiBhIHVzZXItcHJvdmlkZWQgYGtleWAgYXR0cmlidXRlXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHdyYXBVc2VyUHJvdmlkZWRLZXkoa2V5KSB7XG4gIHJldHVybiAnJCcgKyBlc2NhcGVVc2VyUHJvdmlkZWRLZXkoa2V5KTtcbn1cblxuLyoqXG4gKiBAcGFyYW0gez8qfSBjaGlsZHJlbiBDaGlsZHJlbiB0cmVlIGNvbnRhaW5lci5cbiAqIEBwYXJhbSB7IXN0cmluZ30gbmFtZVNvRmFyIE5hbWUgb2YgdGhlIGtleSBwYXRoIHNvIGZhci5cbiAqIEBwYXJhbSB7IWZ1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjayB0byBpbnZva2Ugd2l0aCBlYWNoIGNoaWxkIGZvdW5kLlxuICogQHBhcmFtIHs/Kn0gdHJhdmVyc2VDb250ZXh0IFVzZWQgdG8gcGFzcyBpbmZvcm1hdGlvbiB0aHJvdWdob3V0IHRoZSB0cmF2ZXJzYWxcbiAqIHByb2Nlc3MuXG4gKiBAcmV0dXJuIHshbnVtYmVyfSBUaGUgbnVtYmVyIG9mIGNoaWxkcmVuIGluIHRoaXMgc3VidHJlZS5cbiAqL1xuZnVuY3Rpb24gdHJhdmVyc2VBbGxDaGlsZHJlbkltcGwoY2hpbGRyZW4sIG5hbWVTb0ZhciwgY2FsbGJhY2ssIHRyYXZlcnNlQ29udGV4dCkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiBjaGlsZHJlbjtcblxuICBpZiAodHlwZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgLy8gQWxsIG9mIHRoZSBhYm92ZSBhcmUgcGVyY2VpdmVkIGFzIG51bGwuXG4gICAgY2hpbGRyZW4gPSBudWxsO1xuICB9XG5cbiAgaWYgKGNoaWxkcmVuID09PSBudWxsIHx8IHR5cGUgPT09ICdzdHJpbmcnIHx8IHR5cGUgPT09ICdudW1iZXInIHx8IFJlYWN0RWxlbWVudC5pc1ZhbGlkRWxlbWVudChjaGlsZHJlbikpIHtcbiAgICBjYWxsYmFjayh0cmF2ZXJzZUNvbnRleHQsIGNoaWxkcmVuLFxuICAgIC8vIElmIGl0J3MgdGhlIG9ubHkgY2hpbGQsIHRyZWF0IHRoZSBuYW1lIGFzIGlmIGl0IHdhcyB3cmFwcGVkIGluIGFuIGFycmF5XG4gICAgLy8gc28gdGhhdCBpdCdzIGNvbnNpc3RlbnQgaWYgdGhlIG51bWJlciBvZiBjaGlsZHJlbiBncm93cy5cbiAgICBuYW1lU29GYXIgPT09ICcnID8gU0VQQVJBVE9SICsgZ2V0Q29tcG9uZW50S2V5KGNoaWxkcmVuLCAwKSA6IG5hbWVTb0Zhcik7XG4gICAgcmV0dXJuIDE7XG4gIH1cblxuICB2YXIgY2hpbGQ7XG4gIHZhciBuZXh0TmFtZTtcbiAgdmFyIHN1YnRyZWVDb3VudCA9IDA7IC8vIENvdW50IG9mIGNoaWxkcmVuIGZvdW5kIGluIHRoZSBjdXJyZW50IHN1YnRyZWUuXG4gIHZhciBuZXh0TmFtZVByZWZpeCA9IG5hbWVTb0ZhciA9PT0gJycgPyBTRVBBUkFUT1IgOiBuYW1lU29GYXIgKyBTVUJTRVBBUkFUT1I7XG5cbiAgaWYgKEFycmF5LmlzQXJyYXkoY2hpbGRyZW4pKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgIG5leHROYW1lID0gbmV4dE5hbWVQcmVmaXggKyBnZXRDb21wb25lbnRLZXkoY2hpbGQsIGkpO1xuICAgICAgc3VidHJlZUNvdW50ICs9IHRyYXZlcnNlQWxsQ2hpbGRyZW5JbXBsKGNoaWxkLCBuZXh0TmFtZSwgY2FsbGJhY2ssIHRyYXZlcnNlQ29udGV4dCk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBpdGVyYXRvckZuID0gZ2V0SXRlcmF0b3JGbihjaGlsZHJlbik7XG4gICAgaWYgKGl0ZXJhdG9yRm4pIHtcbiAgICAgIHZhciBpdGVyYXRvciA9IGl0ZXJhdG9yRm4uY2FsbChjaGlsZHJlbik7XG4gICAgICB2YXIgc3RlcDtcbiAgICAgIGlmIChpdGVyYXRvckZuICE9PSBjaGlsZHJlbi5lbnRyaWVzKSB7XG4gICAgICAgIHZhciBpaSA9IDA7XG4gICAgICAgIHdoaWxlICghKHN0ZXAgPSBpdGVyYXRvci5uZXh0KCkpLmRvbmUpIHtcbiAgICAgICAgICBjaGlsZCA9IHN0ZXAudmFsdWU7XG4gICAgICAgICAgbmV4dE5hbWUgPSBuZXh0TmFtZVByZWZpeCArIGdldENvbXBvbmVudEtleShjaGlsZCwgaWkrKyk7XG4gICAgICAgICAgc3VidHJlZUNvdW50ICs9IHRyYXZlcnNlQWxsQ2hpbGRyZW5JbXBsKGNoaWxkLCBuZXh0TmFtZSwgY2FsbGJhY2ssIHRyYXZlcnNlQ29udGV4dCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZGlkV2FybkFib3V0TWFwcywgJ1VzaW5nIE1hcHMgYXMgY2hpbGRyZW4gaXMgbm90IHlldCBmdWxseSBzdXBwb3J0ZWQuIEl0IGlzIGFuICcgKyAnZXhwZXJpbWVudGFsIGZlYXR1cmUgdGhhdCBtaWdodCBiZSByZW1vdmVkLiBDb252ZXJ0IGl0IHRvIGEgJyArICdzZXF1ZW5jZSAvIGl0ZXJhYmxlIG9mIGtleWVkIFJlYWN0RWxlbWVudHMgaW5zdGVhZC4nKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICBkaWRXYXJuQWJvdXRNYXBzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJdGVyYXRvciB3aWxsIHByb3ZpZGUgZW50cnkgW2ssdl0gdHVwbGVzIHJhdGhlciB0aGFuIHZhbHVlcy5cbiAgICAgICAgd2hpbGUgKCEoc3RlcCA9IGl0ZXJhdG9yLm5leHQoKSkuZG9uZSkge1xuICAgICAgICAgIHZhciBlbnRyeSA9IHN0ZXAudmFsdWU7XG4gICAgICAgICAgaWYgKGVudHJ5KSB7XG4gICAgICAgICAgICBjaGlsZCA9IGVudHJ5WzFdO1xuICAgICAgICAgICAgbmV4dE5hbWUgPSBuZXh0TmFtZVByZWZpeCArIHdyYXBVc2VyUHJvdmlkZWRLZXkoZW50cnlbMF0pICsgU1VCU0VQQVJBVE9SICsgZ2V0Q29tcG9uZW50S2V5KGNoaWxkLCAwKTtcbiAgICAgICAgICAgIHN1YnRyZWVDb3VudCArPSB0cmF2ZXJzZUFsbENoaWxkcmVuSW1wbChjaGlsZCwgbmV4dE5hbWUsIGNhbGxiYWNrLCB0cmF2ZXJzZUNvbnRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHZhciBhZGRlbmR1bSA9ICcnO1xuICAgICAgaWYgKFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgYWRkZW5kdW0gPSAnIElmIHlvdSBtZWFudCB0byByZW5kZXIgYSBjb2xsZWN0aW9uIG9mIGNoaWxkcmVuLCB1c2UgYW4gYXJyYXkgJyArICdpbnN0ZWFkIG9yIHdyYXAgdGhlIG9iamVjdCB1c2luZyBjcmVhdGVGcmFnbWVudChvYmplY3QpIGZyb20gdGhlICcgKyAnUmVhY3QgYWRkLW9ucy4nO1xuICAgICAgICBpZiAoY2hpbGRyZW4uX2lzUmVhY3RFbGVtZW50KSB7XG4gICAgICAgICAgYWRkZW5kdW0gPSAnIEl0IGxvb2tzIGxpa2UgeW91XFwncmUgdXNpbmcgYW4gZWxlbWVudCBjcmVhdGVkIGJ5IGEgZGlmZmVyZW50ICcgKyAndmVyc2lvbiBvZiBSZWFjdC4gTWFrZSBzdXJlIHRvIHVzZSBvbmx5IG9uZSBjb3B5IG9mIFJlYWN0Lic7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQpIHtcbiAgICAgICAgICB2YXIgbmFtZSA9IFJlYWN0Q3VycmVudE93bmVyLmN1cnJlbnQuZ2V0TmFtZSgpO1xuICAgICAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgICAgICBhZGRlbmR1bSArPSAnIENoZWNrIHRoZSByZW5kZXIgbWV0aG9kIG9mIGAnICsgbmFtZSArICdgLic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB2YXIgY2hpbGRyZW5TdHJpbmcgPSBTdHJpbmcoY2hpbGRyZW4pO1xuICAgICAgIWZhbHNlID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ09iamVjdHMgYXJlIG5vdCB2YWxpZCBhcyBhIFJlYWN0IGNoaWxkIChmb3VuZDogJXMpLiVzJywgY2hpbGRyZW5TdHJpbmcgPT09ICdbb2JqZWN0IE9iamVjdF0nID8gJ29iamVjdCB3aXRoIGtleXMgeycgKyBPYmplY3Qua2V5cyhjaGlsZHJlbikuam9pbignLCAnKSArICd9JyA6IGNoaWxkcmVuU3RyaW5nLCBhZGRlbmR1bSkgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBzdWJ0cmVlQ291bnQ7XG59XG5cbi8qKlxuICogVHJhdmVyc2VzIGNoaWxkcmVuIHRoYXQgYXJlIHR5cGljYWxseSBzcGVjaWZpZWQgYXMgYHByb3BzLmNoaWxkcmVuYCwgYnV0XG4gKiBtaWdodCBhbHNvIGJlIHNwZWNpZmllZCB0aHJvdWdoIGF0dHJpYnV0ZXM6XG4gKlxuICogLSBgdHJhdmVyc2VBbGxDaGlsZHJlbih0aGlzLnByb3BzLmNoaWxkcmVuLCAuLi4pYFxuICogLSBgdHJhdmVyc2VBbGxDaGlsZHJlbih0aGlzLnByb3BzLmxlZnRQYW5lbENoaWxkcmVuLCAuLi4pYFxuICpcbiAqIFRoZSBgdHJhdmVyc2VDb250ZXh0YCBpcyBhbiBvcHRpb25hbCBhcmd1bWVudCB0aGF0IGlzIHBhc3NlZCB0aHJvdWdoIHRoZVxuICogZW50aXJlIHRyYXZlcnNhbC4gSXQgY2FuIGJlIHVzZWQgdG8gc3RvcmUgYWNjdW11bGF0aW9ucyBvciBhbnl0aGluZyBlbHNlIHRoYXRcbiAqIHRoZSBjYWxsYmFjayBtaWdodCBmaW5kIHJlbGV2YW50LlxuICpcbiAqIEBwYXJhbSB7Pyp9IGNoaWxkcmVuIENoaWxkcmVuIHRyZWUgb2JqZWN0LlxuICogQHBhcmFtIHshZnVuY3Rpb259IGNhbGxiYWNrIFRvIGludm9rZSB1cG9uIHRyYXZlcnNpbmcgZWFjaCBjaGlsZC5cbiAqIEBwYXJhbSB7Pyp9IHRyYXZlcnNlQ29udGV4dCBDb250ZXh0IGZvciB0cmF2ZXJzYWwuXG4gKiBAcmV0dXJuIHshbnVtYmVyfSBUaGUgbnVtYmVyIG9mIGNoaWxkcmVuIGluIHRoaXMgc3VidHJlZS5cbiAqL1xuZnVuY3Rpb24gdHJhdmVyc2VBbGxDaGlsZHJlbihjaGlsZHJlbiwgY2FsbGJhY2ssIHRyYXZlcnNlQ29udGV4dCkge1xuICBpZiAoY2hpbGRyZW4gPT0gbnVsbCkge1xuICAgIHJldHVybiAwO1xuICB9XG5cbiAgcmV0dXJuIHRyYXZlcnNlQWxsQ2hpbGRyZW5JbXBsKGNoaWxkcmVuLCAnJywgY2FsbGJhY2ssIHRyYXZlcnNlQ29udGV4dCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdHJhdmVyc2VBbGxDaGlsZHJlbjsiLCIvKipcbiAqIENvcHlyaWdodCAyMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIHZhbGlkYXRlRE9NTmVzdGluZ1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGFzc2lnbiA9IHJlcXVpcmUoJy4vT2JqZWN0LmFzc2lnbicpO1xudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCdmYmpzL2xpYi9lbXB0eUZ1bmN0aW9uJyk7XG52YXIgd2FybmluZyA9IHJlcXVpcmUoJ2ZianMvbGliL3dhcm5pbmcnKTtcblxudmFyIHZhbGlkYXRlRE9NTmVzdGluZyA9IGVtcHR5RnVuY3Rpb247XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIC8vIFRoaXMgdmFsaWRhdGlvbiBjb2RlIHdhcyB3cml0dGVuIGJhc2VkIG9uIHRoZSBIVE1MNSBwYXJzaW5nIHNwZWM6XG4gIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI2hhcy1hbi1lbGVtZW50LWluLXNjb3BlXG4gIC8vXG4gIC8vIE5vdGU6IHRoaXMgZG9lcyBub3QgY2F0Y2ggYWxsIGludmFsaWQgbmVzdGluZywgbm9yIGRvZXMgaXQgdHJ5IHRvIChhcyBpdCdzXG4gIC8vIG5vdCBjbGVhciB3aGF0IHByYWN0aWNhbCBiZW5lZml0IGRvaW5nIHNvIHByb3ZpZGVzKTsgaW5zdGVhZCwgd2Ugd2FybiBvbmx5XG4gIC8vIGZvciBjYXNlcyB3aGVyZSB0aGUgcGFyc2VyIHdpbGwgZ2l2ZSBhIHBhcnNlIHRyZWUgZGlmZmVyaW5nIGZyb20gd2hhdCBSZWFjdFxuICAvLyBpbnRlbmRlZC4gRm9yIGV4YW1wbGUsIDxiPjxkaXY+PC9kaXY+PC9iPiBpcyBpbnZhbGlkIGJ1dCB3ZSBkb24ndCB3YXJuXG4gIC8vIGJlY2F1c2UgaXQgc3RpbGwgcGFyc2VzIGNvcnJlY3RseTsgd2UgZG8gd2FybiBmb3Igb3RoZXIgY2FzZXMgbGlrZSBuZXN0ZWRcbiAgLy8gPHA+IHRhZ3Mgd2hlcmUgdGhlIGJlZ2lubmluZyBvZiB0aGUgc2Vjb25kIGVsZW1lbnQgaW1wbGljaXRseSBjbG9zZXMgdGhlXG4gIC8vIGZpcnN0LCBjYXVzaW5nIGEgY29uZnVzaW5nIG1lc3MuXG5cbiAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjc3BlY2lhbFxuICB2YXIgc3BlY2lhbFRhZ3MgPSBbJ2FkZHJlc3MnLCAnYXBwbGV0JywgJ2FyZWEnLCAnYXJ0aWNsZScsICdhc2lkZScsICdiYXNlJywgJ2Jhc2Vmb250JywgJ2Jnc291bmQnLCAnYmxvY2txdW90ZScsICdib2R5JywgJ2JyJywgJ2J1dHRvbicsICdjYXB0aW9uJywgJ2NlbnRlcicsICdjb2wnLCAnY29sZ3JvdXAnLCAnZGQnLCAnZGV0YWlscycsICdkaXInLCAnZGl2JywgJ2RsJywgJ2R0JywgJ2VtYmVkJywgJ2ZpZWxkc2V0JywgJ2ZpZ2NhcHRpb24nLCAnZmlndXJlJywgJ2Zvb3RlcicsICdmb3JtJywgJ2ZyYW1lJywgJ2ZyYW1lc2V0JywgJ2gxJywgJ2gyJywgJ2gzJywgJ2g0JywgJ2g1JywgJ2g2JywgJ2hlYWQnLCAnaGVhZGVyJywgJ2hncm91cCcsICdocicsICdodG1sJywgJ2lmcmFtZScsICdpbWcnLCAnaW5wdXQnLCAnaXNpbmRleCcsICdsaScsICdsaW5rJywgJ2xpc3RpbmcnLCAnbWFpbicsICdtYXJxdWVlJywgJ21lbnUnLCAnbWVudWl0ZW0nLCAnbWV0YScsICduYXYnLCAnbm9lbWJlZCcsICdub2ZyYW1lcycsICdub3NjcmlwdCcsICdvYmplY3QnLCAnb2wnLCAncCcsICdwYXJhbScsICdwbGFpbnRleHQnLCAncHJlJywgJ3NjcmlwdCcsICdzZWN0aW9uJywgJ3NlbGVjdCcsICdzb3VyY2UnLCAnc3R5bGUnLCAnc3VtbWFyeScsICd0YWJsZScsICd0Ym9keScsICd0ZCcsICd0ZW1wbGF0ZScsICd0ZXh0YXJlYScsICd0Zm9vdCcsICd0aCcsICd0aGVhZCcsICd0aXRsZScsICd0cicsICd0cmFjaycsICd1bCcsICd3YnInLCAneG1wJ107XG5cbiAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjaGFzLWFuLWVsZW1lbnQtaW4tc2NvcGVcbiAgdmFyIGluU2NvcGVUYWdzID0gWydhcHBsZXQnLCAnY2FwdGlvbicsICdodG1sJywgJ3RhYmxlJywgJ3RkJywgJ3RoJywgJ21hcnF1ZWUnLCAnb2JqZWN0JywgJ3RlbXBsYXRlJyxcblxuICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNodG1sLWludGVncmF0aW9uLXBvaW50XG4gIC8vIFRPRE86IERpc3Rpbmd1aXNoIGJ5IG5hbWVzcGFjZSBoZXJlIC0tIGZvciA8dGl0bGU+LCBpbmNsdWRpbmcgaXQgaGVyZVxuICAvLyBlcnJzIG9uIHRoZSBzaWRlIG9mIGZld2VyIHdhcm5pbmdzXG4gICdmb3JlaWduT2JqZWN0JywgJ2Rlc2MnLCAndGl0bGUnXTtcblxuICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNoYXMtYW4tZWxlbWVudC1pbi1idXR0b24tc2NvcGVcbiAgdmFyIGJ1dHRvblNjb3BlVGFncyA9IGluU2NvcGVUYWdzLmNvbmNhdChbJ2J1dHRvbiddKTtcblxuICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNnZW5lcmF0ZS1pbXBsaWVkLWVuZC10YWdzXG4gIHZhciBpbXBsaWVkRW5kVGFncyA9IFsnZGQnLCAnZHQnLCAnbGknLCAnb3B0aW9uJywgJ29wdGdyb3VwJywgJ3AnLCAncnAnLCAncnQnXTtcblxuICB2YXIgZW1wdHlBbmNlc3RvckluZm8gPSB7XG4gICAgcGFyZW50VGFnOiBudWxsLFxuXG4gICAgZm9ybVRhZzogbnVsbCxcbiAgICBhVGFnSW5TY29wZTogbnVsbCxcbiAgICBidXR0b25UYWdJblNjb3BlOiBudWxsLFxuICAgIG5vYnJUYWdJblNjb3BlOiBudWxsLFxuICAgIHBUYWdJbkJ1dHRvblNjb3BlOiBudWxsLFxuXG4gICAgbGlzdEl0ZW1UYWdBdXRvY2xvc2luZzogbnVsbCxcbiAgICBkbEl0ZW1UYWdBdXRvY2xvc2luZzogbnVsbFxuICB9O1xuXG4gIHZhciB1cGRhdGVkQW5jZXN0b3JJbmZvID0gZnVuY3Rpb24gKG9sZEluZm8sIHRhZywgaW5zdGFuY2UpIHtcbiAgICB2YXIgYW5jZXN0b3JJbmZvID0gYXNzaWduKHt9LCBvbGRJbmZvIHx8IGVtcHR5QW5jZXN0b3JJbmZvKTtcbiAgICB2YXIgaW5mbyA9IHsgdGFnOiB0YWcsIGluc3RhbmNlOiBpbnN0YW5jZSB9O1xuXG4gICAgaWYgKGluU2NvcGVUYWdzLmluZGV4T2YodGFnKSAhPT0gLTEpIHtcbiAgICAgIGFuY2VzdG9ySW5mby5hVGFnSW5TY29wZSA9IG51bGw7XG4gICAgICBhbmNlc3RvckluZm8uYnV0dG9uVGFnSW5TY29wZSA9IG51bGw7XG4gICAgICBhbmNlc3RvckluZm8ubm9iclRhZ0luU2NvcGUgPSBudWxsO1xuICAgIH1cbiAgICBpZiAoYnV0dG9uU2NvcGVUYWdzLmluZGV4T2YodGFnKSAhPT0gLTEpIHtcbiAgICAgIGFuY2VzdG9ySW5mby5wVGFnSW5CdXR0b25TY29wZSA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gU2VlIHJ1bGVzIGZvciAnbGknLCAnZGQnLCAnZHQnIHN0YXJ0IHRhZ3MgaW5cbiAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW5ib2R5XG4gICAgaWYgKHNwZWNpYWxUYWdzLmluZGV4T2YodGFnKSAhPT0gLTEgJiYgdGFnICE9PSAnYWRkcmVzcycgJiYgdGFnICE9PSAnZGl2JyAmJiB0YWcgIT09ICdwJykge1xuICAgICAgYW5jZXN0b3JJbmZvLmxpc3RJdGVtVGFnQXV0b2Nsb3NpbmcgPSBudWxsO1xuICAgICAgYW5jZXN0b3JJbmZvLmRsSXRlbVRhZ0F1dG9jbG9zaW5nID0gbnVsbDtcbiAgICB9XG5cbiAgICBhbmNlc3RvckluZm8ucGFyZW50VGFnID0gaW5mbztcblxuICAgIGlmICh0YWcgPT09ICdmb3JtJykge1xuICAgICAgYW5jZXN0b3JJbmZvLmZvcm1UYWcgPSBpbmZvO1xuICAgIH1cbiAgICBpZiAodGFnID09PSAnYScpIHtcbiAgICAgIGFuY2VzdG9ySW5mby5hVGFnSW5TY29wZSA9IGluZm87XG4gICAgfVxuICAgIGlmICh0YWcgPT09ICdidXR0b24nKSB7XG4gICAgICBhbmNlc3RvckluZm8uYnV0dG9uVGFnSW5TY29wZSA9IGluZm87XG4gICAgfVxuICAgIGlmICh0YWcgPT09ICdub2JyJykge1xuICAgICAgYW5jZXN0b3JJbmZvLm5vYnJUYWdJblNjb3BlID0gaW5mbztcbiAgICB9XG4gICAgaWYgKHRhZyA9PT0gJ3AnKSB7XG4gICAgICBhbmNlc3RvckluZm8ucFRhZ0luQnV0dG9uU2NvcGUgPSBpbmZvO1xuICAgIH1cbiAgICBpZiAodGFnID09PSAnbGknKSB7XG4gICAgICBhbmNlc3RvckluZm8ubGlzdEl0ZW1UYWdBdXRvY2xvc2luZyA9IGluZm87XG4gICAgfVxuICAgIGlmICh0YWcgPT09ICdkZCcgfHwgdGFnID09PSAnZHQnKSB7XG4gICAgICBhbmNlc3RvckluZm8uZGxJdGVtVGFnQXV0b2Nsb3NpbmcgPSBpbmZvO1xuICAgIH1cblxuICAgIHJldHVybiBhbmNlc3RvckluZm87XG4gIH07XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlclxuICAgKi9cbiAgdmFyIGlzVGFnVmFsaWRXaXRoUGFyZW50ID0gZnVuY3Rpb24gKHRhZywgcGFyZW50VGFnKSB7XG4gICAgLy8gRmlyc3QsIGxldCdzIGNoZWNrIGlmIHdlJ3JlIGluIGFuIHVudXN1YWwgcGFyc2luZyBtb2RlLi4uXG4gICAgc3dpdGNoIChwYXJlbnRUYWcpIHtcbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbnNlbGVjdFxuICAgICAgY2FzZSAnc2VsZWN0JzpcbiAgICAgICAgcmV0dXJuIHRhZyA9PT0gJ29wdGlvbicgfHwgdGFnID09PSAnb3B0Z3JvdXAnIHx8IHRhZyA9PT0gJyN0ZXh0JztcbiAgICAgIGNhc2UgJ29wdGdyb3VwJzpcbiAgICAgICAgcmV0dXJuIHRhZyA9PT0gJ29wdGlvbicgfHwgdGFnID09PSAnI3RleHQnO1xuICAgICAgLy8gU3RyaWN0bHkgc3BlYWtpbmcsIHNlZWluZyBhbiA8b3B0aW9uPiBkb2Vzbid0IG1lYW4gd2UncmUgaW4gYSA8c2VsZWN0PlxuICAgICAgLy8gYnV0XG4gICAgICBjYXNlICdvcHRpb24nOlxuICAgICAgICByZXR1cm4gdGFnID09PSAnI3RleHQnO1xuXG4gICAgICAvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNwYXJzaW5nLW1haW4taW50ZFxuICAgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjcGFyc2luZy1tYWluLWluY2FwdGlvblxuICAgICAgLy8gTm8gc3BlY2lhbCBiZWhhdmlvciBzaW5jZSB0aGVzZSBydWxlcyBmYWxsIGJhY2sgdG8gXCJpbiBib2R5XCIgbW9kZSBmb3JcbiAgICAgIC8vIGFsbCBleGNlcHQgc3BlY2lhbCB0YWJsZSBub2RlcyB3aGljaCBjYXVzZSBiYWQgcGFyc2luZyBiZWhhdmlvciBhbnl3YXkuXG5cbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbnRyXG4gICAgICBjYXNlICd0cic6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICd0aCcgfHwgdGFnID09PSAndGQnIHx8IHRhZyA9PT0gJ3N0eWxlJyB8fCB0YWcgPT09ICdzY3JpcHQnIHx8IHRhZyA9PT0gJ3RlbXBsYXRlJztcblxuICAgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjcGFyc2luZy1tYWluLWludGJvZHlcbiAgICAgIGNhc2UgJ3Rib2R5JzpcbiAgICAgIGNhc2UgJ3RoZWFkJzpcbiAgICAgIGNhc2UgJ3Rmb290JzpcbiAgICAgICAgcmV0dXJuIHRhZyA9PT0gJ3RyJyB8fCB0YWcgPT09ICdzdHlsZScgfHwgdGFnID09PSAnc2NyaXB0JyB8fCB0YWcgPT09ICd0ZW1wbGF0ZSc7XG5cbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbmNvbGdyb3VwXG4gICAgICBjYXNlICdjb2xncm91cCc6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICdjb2wnIHx8IHRhZyA9PT0gJ3RlbXBsYXRlJztcblxuICAgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjcGFyc2luZy1tYWluLWludGFibGVcbiAgICAgIGNhc2UgJ3RhYmxlJzpcbiAgICAgICAgcmV0dXJuIHRhZyA9PT0gJ2NhcHRpb24nIHx8IHRhZyA9PT0gJ2NvbGdyb3VwJyB8fCB0YWcgPT09ICd0Ym9keScgfHwgdGFnID09PSAndGZvb3QnIHx8IHRhZyA9PT0gJ3RoZWFkJyB8fCB0YWcgPT09ICdzdHlsZScgfHwgdGFnID09PSAnc2NyaXB0JyB8fCB0YWcgPT09ICd0ZW1wbGF0ZSc7XG5cbiAgICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbmhlYWRcbiAgICAgIGNhc2UgJ2hlYWQnOlxuICAgICAgICByZXR1cm4gdGFnID09PSAnYmFzZScgfHwgdGFnID09PSAnYmFzZWZvbnQnIHx8IHRhZyA9PT0gJ2Jnc291bmQnIHx8IHRhZyA9PT0gJ2xpbmsnIHx8IHRhZyA9PT0gJ21ldGEnIHx8IHRhZyA9PT0gJ3RpdGxlJyB8fCB0YWcgPT09ICdub3NjcmlwdCcgfHwgdGFnID09PSAnbm9mcmFtZXMnIHx8IHRhZyA9PT0gJ3N0eWxlJyB8fCB0YWcgPT09ICdzY3JpcHQnIHx8IHRhZyA9PT0gJ3RlbXBsYXRlJztcblxuICAgICAgLy8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc2VtYW50aWNzLmh0bWwjdGhlLWh0bWwtZWxlbWVudFxuICAgICAgY2FzZSAnaHRtbCc6XG4gICAgICAgIHJldHVybiB0YWcgPT09ICdoZWFkJyB8fCB0YWcgPT09ICdib2R5JztcbiAgICB9XG5cbiAgICAvLyBQcm9iYWJseSBpbiB0aGUgXCJpbiBib2R5XCIgcGFyc2luZyBtb2RlLCBzbyB3ZSBvdXRsYXcgb25seSB0YWcgY29tYm9zXG4gICAgLy8gd2hlcmUgdGhlIHBhcnNpbmcgcnVsZXMgY2F1c2UgaW1wbGljaXQgb3BlbnMgb3IgY2xvc2VzIHRvIGJlIGFkZGVkLlxuICAgIC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3N5bnRheC5odG1sI3BhcnNpbmctbWFpbi1pbmJvZHlcbiAgICBzd2l0Y2ggKHRhZykge1xuICAgICAgY2FzZSAnaDEnOlxuICAgICAgY2FzZSAnaDInOlxuICAgICAgY2FzZSAnaDMnOlxuICAgICAgY2FzZSAnaDQnOlxuICAgICAgY2FzZSAnaDUnOlxuICAgICAgY2FzZSAnaDYnOlxuICAgICAgICByZXR1cm4gcGFyZW50VGFnICE9PSAnaDEnICYmIHBhcmVudFRhZyAhPT0gJ2gyJyAmJiBwYXJlbnRUYWcgIT09ICdoMycgJiYgcGFyZW50VGFnICE9PSAnaDQnICYmIHBhcmVudFRhZyAhPT0gJ2g1JyAmJiBwYXJlbnRUYWcgIT09ICdoNic7XG5cbiAgICAgIGNhc2UgJ3JwJzpcbiAgICAgIGNhc2UgJ3J0JzpcbiAgICAgICAgcmV0dXJuIGltcGxpZWRFbmRUYWdzLmluZGV4T2YocGFyZW50VGFnKSA9PT0gLTE7XG5cbiAgICAgIGNhc2UgJ2NhcHRpb24nOlxuICAgICAgY2FzZSAnY29sJzpcbiAgICAgIGNhc2UgJ2NvbGdyb3VwJzpcbiAgICAgIGNhc2UgJ2ZyYW1lJzpcbiAgICAgIGNhc2UgJ2hlYWQnOlxuICAgICAgY2FzZSAndGJvZHknOlxuICAgICAgY2FzZSAndGQnOlxuICAgICAgY2FzZSAndGZvb3QnOlxuICAgICAgY2FzZSAndGgnOlxuICAgICAgY2FzZSAndGhlYWQnOlxuICAgICAgY2FzZSAndHInOlxuICAgICAgICAvLyBUaGVzZSB0YWdzIGFyZSBvbmx5IHZhbGlkIHdpdGggYSBmZXcgcGFyZW50cyB0aGF0IGhhdmUgc3BlY2lhbCBjaGlsZFxuICAgICAgICAvLyBwYXJzaW5nIHJ1bGVzIC0tIGlmIHdlJ3JlIGRvd24gaGVyZSwgdGhlbiBub25lIG9mIHRob3NlIG1hdGNoZWQgYW5kXG4gICAgICAgIC8vIHNvIHdlIGFsbG93IGl0IG9ubHkgaWYgd2UgZG9uJ3Qga25vdyB3aGF0IHRoZSBwYXJlbnQgaXMsIGFzIGFsbCBvdGhlclxuICAgICAgICAvLyBjYXNlcyBhcmUgaW52YWxpZC5cbiAgICAgICAgcmV0dXJuIHBhcmVudFRhZyA9PSBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXJcbiAgICovXG4gIHZhciBmaW5kSW52YWxpZEFuY2VzdG9yRm9yVGFnID0gZnVuY3Rpb24gKHRhZywgYW5jZXN0b3JJbmZvKSB7XG4gICAgc3dpdGNoICh0YWcpIHtcbiAgICAgIGNhc2UgJ2FkZHJlc3MnOlxuICAgICAgY2FzZSAnYXJ0aWNsZSc6XG4gICAgICBjYXNlICdhc2lkZSc6XG4gICAgICBjYXNlICdibG9ja3F1b3RlJzpcbiAgICAgIGNhc2UgJ2NlbnRlcic6XG4gICAgICBjYXNlICdkZXRhaWxzJzpcbiAgICAgIGNhc2UgJ2RpYWxvZyc6XG4gICAgICBjYXNlICdkaXInOlxuICAgICAgY2FzZSAnZGl2JzpcbiAgICAgIGNhc2UgJ2RsJzpcbiAgICAgIGNhc2UgJ2ZpZWxkc2V0JzpcbiAgICAgIGNhc2UgJ2ZpZ2NhcHRpb24nOlxuICAgICAgY2FzZSAnZmlndXJlJzpcbiAgICAgIGNhc2UgJ2Zvb3Rlcic6XG4gICAgICBjYXNlICdoZWFkZXInOlxuICAgICAgY2FzZSAnaGdyb3VwJzpcbiAgICAgIGNhc2UgJ21haW4nOlxuICAgICAgY2FzZSAnbWVudSc6XG4gICAgICBjYXNlICduYXYnOlxuICAgICAgY2FzZSAnb2wnOlxuICAgICAgY2FzZSAncCc6XG4gICAgICBjYXNlICdzZWN0aW9uJzpcbiAgICAgIGNhc2UgJ3N1bW1hcnknOlxuICAgICAgY2FzZSAndWwnOlxuXG4gICAgICBjYXNlICdwcmUnOlxuICAgICAgY2FzZSAnbGlzdGluZyc6XG5cbiAgICAgIGNhc2UgJ3RhYmxlJzpcblxuICAgICAgY2FzZSAnaHInOlxuXG4gICAgICBjYXNlICd4bXAnOlxuXG4gICAgICBjYXNlICdoMSc6XG4gICAgICBjYXNlICdoMic6XG4gICAgICBjYXNlICdoMyc6XG4gICAgICBjYXNlICdoNCc6XG4gICAgICBjYXNlICdoNSc6XG4gICAgICBjYXNlICdoNic6XG4gICAgICAgIHJldHVybiBhbmNlc3RvckluZm8ucFRhZ0luQnV0dG9uU2NvcGU7XG5cbiAgICAgIGNhc2UgJ2Zvcm0nOlxuICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLmZvcm1UYWcgfHwgYW5jZXN0b3JJbmZvLnBUYWdJbkJ1dHRvblNjb3BlO1xuXG4gICAgICBjYXNlICdsaSc6XG4gICAgICAgIHJldHVybiBhbmNlc3RvckluZm8ubGlzdEl0ZW1UYWdBdXRvY2xvc2luZztcblxuICAgICAgY2FzZSAnZGQnOlxuICAgICAgY2FzZSAnZHQnOlxuICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLmRsSXRlbVRhZ0F1dG9jbG9zaW5nO1xuXG4gICAgICBjYXNlICdidXR0b24nOlxuICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLmJ1dHRvblRhZ0luU2NvcGU7XG5cbiAgICAgIGNhc2UgJ2EnOlxuICAgICAgICAvLyBTcGVjIHNheXMgc29tZXRoaW5nIGFib3V0IHN0b3JpbmcgYSBsaXN0IG9mIG1hcmtlcnMsIGJ1dCBpdCBzb3VuZHNcbiAgICAgICAgLy8gZXF1aXZhbGVudCB0byB0aGlzIGNoZWNrLlxuICAgICAgICByZXR1cm4gYW5jZXN0b3JJbmZvLmFUYWdJblNjb3BlO1xuXG4gICAgICBjYXNlICdub2JyJzpcbiAgICAgICAgcmV0dXJuIGFuY2VzdG9ySW5mby5ub2JyVGFnSW5TY29wZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogR2l2ZW4gYSBSZWFjdENvbXBvc2l0ZUNvbXBvbmVudCBpbnN0YW5jZSwgcmV0dXJuIGEgbGlzdCBvZiBpdHMgcmVjdXJzaXZlXG4gICAqIG93bmVycywgc3RhcnRpbmcgYXQgdGhlIHJvb3QgYW5kIGVuZGluZyB3aXRoIHRoZSBpbnN0YW5jZSBpdHNlbGYuXG4gICAqL1xuICB2YXIgZmluZE93bmVyU3RhY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UpIHtcbiAgICBpZiAoIWluc3RhbmNlKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgdmFyIHN0YWNrID0gW107XG4gICAgLyplc2xpbnQtZGlzYWJsZSBzcGFjZS1hZnRlci1rZXl3b3JkcyAqL1xuICAgIGRvIHtcbiAgICAgIC8qZXNsaW50LWVuYWJsZSBzcGFjZS1hZnRlci1rZXl3b3JkcyAqL1xuICAgICAgc3RhY2sucHVzaChpbnN0YW5jZSk7XG4gICAgfSB3aGlsZSAoaW5zdGFuY2UgPSBpbnN0YW5jZS5fY3VycmVudEVsZW1lbnQuX293bmVyKTtcbiAgICBzdGFjay5yZXZlcnNlKCk7XG4gICAgcmV0dXJuIHN0YWNrO1xuICB9O1xuXG4gIHZhciBkaWRXYXJuID0ge307XG5cbiAgdmFsaWRhdGVET01OZXN0aW5nID0gZnVuY3Rpb24gKGNoaWxkVGFnLCBjaGlsZEluc3RhbmNlLCBhbmNlc3RvckluZm8pIHtcbiAgICBhbmNlc3RvckluZm8gPSBhbmNlc3RvckluZm8gfHwgZW1wdHlBbmNlc3RvckluZm87XG4gICAgdmFyIHBhcmVudEluZm8gPSBhbmNlc3RvckluZm8ucGFyZW50VGFnO1xuICAgIHZhciBwYXJlbnRUYWcgPSBwYXJlbnRJbmZvICYmIHBhcmVudEluZm8udGFnO1xuXG4gICAgdmFyIGludmFsaWRQYXJlbnQgPSBpc1RhZ1ZhbGlkV2l0aFBhcmVudChjaGlsZFRhZywgcGFyZW50VGFnKSA/IG51bGwgOiBwYXJlbnRJbmZvO1xuICAgIHZhciBpbnZhbGlkQW5jZXN0b3IgPSBpbnZhbGlkUGFyZW50ID8gbnVsbCA6IGZpbmRJbnZhbGlkQW5jZXN0b3JGb3JUYWcoY2hpbGRUYWcsIGFuY2VzdG9ySW5mbyk7XG4gICAgdmFyIHByb2JsZW1hdGljID0gaW52YWxpZFBhcmVudCB8fCBpbnZhbGlkQW5jZXN0b3I7XG5cbiAgICBpZiAocHJvYmxlbWF0aWMpIHtcbiAgICAgIHZhciBhbmNlc3RvclRhZyA9IHByb2JsZW1hdGljLnRhZztcbiAgICAgIHZhciBhbmNlc3Rvckluc3RhbmNlID0gcHJvYmxlbWF0aWMuaW5zdGFuY2U7XG5cbiAgICAgIHZhciBjaGlsZE93bmVyID0gY2hpbGRJbnN0YW5jZSAmJiBjaGlsZEluc3RhbmNlLl9jdXJyZW50RWxlbWVudC5fb3duZXI7XG4gICAgICB2YXIgYW5jZXN0b3JPd25lciA9IGFuY2VzdG9ySW5zdGFuY2UgJiYgYW5jZXN0b3JJbnN0YW5jZS5fY3VycmVudEVsZW1lbnQuX293bmVyO1xuXG4gICAgICB2YXIgY2hpbGRPd25lcnMgPSBmaW5kT3duZXJTdGFjayhjaGlsZE93bmVyKTtcbiAgICAgIHZhciBhbmNlc3Rvck93bmVycyA9IGZpbmRPd25lclN0YWNrKGFuY2VzdG9yT3duZXIpO1xuXG4gICAgICB2YXIgbWluU3RhY2tMZW4gPSBNYXRoLm1pbihjaGlsZE93bmVycy5sZW5ndGgsIGFuY2VzdG9yT3duZXJzLmxlbmd0aCk7XG4gICAgICB2YXIgaTtcblxuICAgICAgdmFyIGRlZXBlc3RDb21tb24gPSAtMTtcbiAgICAgIGZvciAoaSA9IDA7IGkgPCBtaW5TdGFja0xlbjsgaSsrKSB7XG4gICAgICAgIGlmIChjaGlsZE93bmVyc1tpXSA9PT0gYW5jZXN0b3JPd25lcnNbaV0pIHtcbiAgICAgICAgICBkZWVwZXN0Q29tbW9uID0gaTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgVU5LTk9XTiA9ICcodW5rbm93biknO1xuICAgICAgdmFyIGNoaWxkT3duZXJOYW1lcyA9IGNoaWxkT3duZXJzLnNsaWNlKGRlZXBlc3RDb21tb24gKyAxKS5tYXAoZnVuY3Rpb24gKGluc3QpIHtcbiAgICAgICAgcmV0dXJuIGluc3QuZ2V0TmFtZSgpIHx8IFVOS05PV047XG4gICAgICB9KTtcbiAgICAgIHZhciBhbmNlc3Rvck93bmVyTmFtZXMgPSBhbmNlc3Rvck93bmVycy5zbGljZShkZWVwZXN0Q29tbW9uICsgMSkubWFwKGZ1bmN0aW9uIChpbnN0KSB7XG4gICAgICAgIHJldHVybiBpbnN0LmdldE5hbWUoKSB8fCBVTktOT1dOO1xuICAgICAgfSk7XG4gICAgICB2YXIgb3duZXJJbmZvID0gW10uY29uY2F0KFxuICAgICAgLy8gSWYgdGhlIHBhcmVudCBhbmQgY2hpbGQgaW5zdGFuY2VzIGhhdmUgYSBjb21tb24gb3duZXIgYW5jZXN0b3IsIHN0YXJ0XG4gICAgICAvLyB3aXRoIHRoYXQgLS0gb3RoZXJ3aXNlIHdlIGp1c3Qgc3RhcnQgd2l0aCB0aGUgcGFyZW50J3Mgb3duZXJzLlxuICAgICAgZGVlcGVzdENvbW1vbiAhPT0gLTEgPyBjaGlsZE93bmVyc1tkZWVwZXN0Q29tbW9uXS5nZXROYW1lKCkgfHwgVU5LTk9XTiA6IFtdLCBhbmNlc3Rvck93bmVyTmFtZXMsIGFuY2VzdG9yVGFnLFxuICAgICAgLy8gSWYgd2UncmUgd2FybmluZyBhYm91dCBhbiBpbnZhbGlkIChub24tcGFyZW50KSBhbmNlc3RyeSwgYWRkICcuLi4nXG4gICAgICBpbnZhbGlkQW5jZXN0b3IgPyBbJy4uLiddIDogW10sIGNoaWxkT3duZXJOYW1lcywgY2hpbGRUYWcpLmpvaW4oJyA+ICcpO1xuXG4gICAgICB2YXIgd2FybktleSA9ICEhaW52YWxpZFBhcmVudCArICd8JyArIGNoaWxkVGFnICsgJ3wnICsgYW5jZXN0b3JUYWcgKyAnfCcgKyBvd25lckluZm87XG4gICAgICBpZiAoZGlkV2Fyblt3YXJuS2V5XSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBkaWRXYXJuW3dhcm5LZXldID0gdHJ1ZTtcblxuICAgICAgaWYgKGludmFsaWRQYXJlbnQpIHtcbiAgICAgICAgdmFyIGluZm8gPSAnJztcbiAgICAgICAgaWYgKGFuY2VzdG9yVGFnID09PSAndGFibGUnICYmIGNoaWxkVGFnID09PSAndHInKSB7XG4gICAgICAgICAgaW5mbyArPSAnIEFkZCBhIDx0Ym9keT4gdG8geW91ciBjb2RlIHRvIG1hdGNoIHRoZSBET00gdHJlZSBnZW5lcmF0ZWQgYnkgJyArICd0aGUgYnJvd3Nlci4nO1xuICAgICAgICB9XG4gICAgICAgIFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyB3YXJuaW5nKGZhbHNlLCAndmFsaWRhdGVET01OZXN0aW5nKC4uLik6IDwlcz4gY2Fubm90IGFwcGVhciBhcyBhIGNoaWxkIG9mIDwlcz4uICcgKyAnU2VlICVzLiVzJywgY2hpbGRUYWcsIGFuY2VzdG9yVGFnLCBvd25lckluZm8sIGluZm8pIDogdW5kZWZpbmVkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IHdhcm5pbmcoZmFsc2UsICd2YWxpZGF0ZURPTU5lc3RpbmcoLi4uKTogPCVzPiBjYW5ub3QgYXBwZWFyIGFzIGEgZGVzY2VuZGFudCBvZiAnICsgJzwlcz4uIFNlZSAlcy4nLCBjaGlsZFRhZywgYW5jZXN0b3JUYWcsIG93bmVySW5mbykgOiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIHZhbGlkYXRlRE9NTmVzdGluZy5hbmNlc3RvckluZm9Db250ZXh0S2V5ID0gJ19fdmFsaWRhdGVET01OZXN0aW5nX2FuY2VzdG9ySW5mbyQnICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc2xpY2UoMik7XG5cbiAgdmFsaWRhdGVET01OZXN0aW5nLnVwZGF0ZWRBbmNlc3RvckluZm8gPSB1cGRhdGVkQW5jZXN0b3JJbmZvO1xuXG4gIC8vIEZvciB0ZXN0aW5nXG4gIHZhbGlkYXRlRE9NTmVzdGluZy5pc1RhZ1ZhbGlkSW5Db250ZXh0ID0gZnVuY3Rpb24gKHRhZywgYW5jZXN0b3JJbmZvKSB7XG4gICAgYW5jZXN0b3JJbmZvID0gYW5jZXN0b3JJbmZvIHx8IGVtcHR5QW5jZXN0b3JJbmZvO1xuICAgIHZhciBwYXJlbnRJbmZvID0gYW5jZXN0b3JJbmZvLnBhcmVudFRhZztcbiAgICB2YXIgcGFyZW50VGFnID0gcGFyZW50SW5mbyAmJiBwYXJlbnRJbmZvLnRhZztcbiAgICByZXR1cm4gaXNUYWdWYWxpZFdpdGhQYXJlbnQodGFnLCBwYXJlbnRUYWcpICYmICFmaW5kSW52YWxpZEFuY2VzdG9yRm9yVGFnKHRhZywgYW5jZXN0b3JJbmZvKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB2YWxpZGF0ZURPTU5lc3Rpbmc7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBFdmVudExpc3RlbmVyXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGVtcHR5RnVuY3Rpb24gPSByZXF1aXJlKCcuL2VtcHR5RnVuY3Rpb24nKTtcblxuLyoqXG4gKiBVcHN0cmVhbSB2ZXJzaW9uIG9mIGV2ZW50IGxpc3RlbmVyLiBEb2VzIG5vdCB0YWtlIGludG8gYWNjb3VudCBzcGVjaWZpY1xuICogbmF0dXJlIG9mIHBsYXRmb3JtLlxuICovXG52YXIgRXZlbnRMaXN0ZW5lciA9IHtcbiAgLyoqXG4gICAqIExpc3RlbiB0byBET00gZXZlbnRzIGR1cmluZyB0aGUgYnViYmxlIHBoYXNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0RPTUV2ZW50VGFyZ2V0fSB0YXJnZXQgRE9NIGVsZW1lbnQgdG8gcmVnaXN0ZXIgbGlzdGVuZXIgb24uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFR5cGUgRXZlbnQgdHlwZSwgZS5nLiAnY2xpY2snIG9yICdtb3VzZW92ZXInLlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayBDYWxsYmFjayBmdW5jdGlvbi5cbiAgICogQHJldHVybiB7b2JqZWN0fSBPYmplY3Qgd2l0aCBhIGByZW1vdmVgIG1ldGhvZC5cbiAgICovXG4gIGxpc3RlbjogZnVuY3Rpb24gKHRhcmdldCwgZXZlbnRUeXBlLCBjYWxsYmFjaykge1xuICAgIGlmICh0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgICAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYWxsYmFjaywgZmFsc2UpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBjYWxsYmFjaywgZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gZWxzZSBpZiAodGFyZ2V0LmF0dGFjaEV2ZW50KSB7XG4gICAgICB0YXJnZXQuYXR0YWNoRXZlbnQoJ29uJyArIGV2ZW50VHlwZSwgY2FsbGJhY2spO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGFyZ2V0LmRldGFjaEV2ZW50KCdvbicgKyBldmVudFR5cGUsIGNhbGxiYWNrKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIExpc3RlbiB0byBET00gZXZlbnRzIGR1cmluZyB0aGUgY2FwdHVyZSBwaGFzZS5cbiAgICpcbiAgICogQHBhcmFtIHtET01FdmVudFRhcmdldH0gdGFyZ2V0IERPTSBlbGVtZW50IHRvIHJlZ2lzdGVyIGxpc3RlbmVyIG9uLlxuICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnRUeXBlIEV2ZW50IHR5cGUsIGUuZy4gJ2NsaWNrJyBvciAnbW91c2VvdmVyJy5cbiAgICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2sgQ2FsbGJhY2sgZnVuY3Rpb24uXG4gICAqIEByZXR1cm4ge29iamVjdH0gT2JqZWN0IHdpdGggYSBgcmVtb3ZlYCBtZXRob2QuXG4gICAqL1xuICBjYXB0dXJlOiBmdW5jdGlvbiAodGFyZ2V0LCBldmVudFR5cGUsIGNhbGxiYWNrKSB7XG4gICAgaWYgKHRhcmdldC5hZGRFdmVudExpc3RlbmVyKSB7XG4gICAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihldmVudFR5cGUsIGNhbGxiYWNrLCB0cnVlKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgY2FsbGJhY2ssIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdBdHRlbXB0ZWQgdG8gbGlzdGVuIHRvIGV2ZW50cyBkdXJpbmcgdGhlIGNhcHR1cmUgcGhhc2Ugb24gYSAnICsgJ2Jyb3dzZXIgdGhhdCBkb2VzIG5vdCBzdXBwb3J0IHRoZSBjYXB0dXJlIHBoYXNlLiBZb3VyIGFwcGxpY2F0aW9uICcgKyAnd2lsbCBub3QgcmVjZWl2ZSBzb21lIGV2ZW50cy4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlbW92ZTogZW1wdHlGdW5jdGlvblxuICAgICAgfTtcbiAgICB9XG4gIH0sXG5cbiAgcmVnaXN0ZXJEZWZhdWx0OiBmdW5jdGlvbiAoKSB7fVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFdmVudExpc3RlbmVyOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBFeGVjdXRpb25FbnZpcm9ubWVudFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGNhblVzZURPTSA9ICEhKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5kb2N1bWVudCAmJiB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7XG5cbi8qKlxuICogU2ltcGxlLCBsaWdodHdlaWdodCBtb2R1bGUgYXNzaXN0aW5nIHdpdGggdGhlIGRldGVjdGlvbiBhbmQgY29udGV4dCBvZlxuICogV29ya2VyLiBIZWxwcyBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYW5kIGFsbG93cyBjb2RlIHRvIHJlYXNvbiBhYm91dFxuICogd2hldGhlciBvciBub3QgdGhleSBhcmUgaW4gYSBXb3JrZXIsIGV2ZW4gaWYgdGhleSBuZXZlciBpbmNsdWRlIHRoZSBtYWluXG4gKiBgUmVhY3RXb3JrZXJgIGRlcGVuZGVuY3kuXG4gKi9cbnZhciBFeGVjdXRpb25FbnZpcm9ubWVudCA9IHtcblxuICBjYW5Vc2VET006IGNhblVzZURPTSxcblxuICBjYW5Vc2VXb3JrZXJzOiB0eXBlb2YgV29ya2VyICE9PSAndW5kZWZpbmVkJyxcblxuICBjYW5Vc2VFdmVudExpc3RlbmVyczogY2FuVXNlRE9NICYmICEhKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyIHx8IHdpbmRvdy5hdHRhY2hFdmVudCksXG5cbiAgY2FuVXNlVmlld3BvcnQ6IGNhblVzZURPTSAmJiAhIXdpbmRvdy5zY3JlZW4sXG5cbiAgaXNJbldvcmtlcjogIWNhblVzZURPTSAvLyBGb3Igbm93LCB0aGlzIGlzIHRydWUgLSBtaWdodCBjaGFuZ2UgaW4gdGhlIGZ1dHVyZS5cblxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBFeGVjdXRpb25FbnZpcm9ubWVudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgY2FtZWxpemVcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBfaHlwaGVuUGF0dGVybiA9IC8tKC4pL2c7XG5cbi8qKlxuICogQ2FtZWxjYXNlcyBhIGh5cGhlbmF0ZWQgc3RyaW5nLCBmb3IgZXhhbXBsZTpcbiAqXG4gKiAgID4gY2FtZWxpemUoJ2JhY2tncm91bmQtY29sb3InKVxuICogICA8IFwiYmFja2dyb3VuZENvbG9yXCJcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGNhbWVsaXplKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoX2h5cGhlblBhdHRlcm4sIGZ1bmN0aW9uIChfLCBjaGFyYWN0ZXIpIHtcbiAgICByZXR1cm4gY2hhcmFjdGVyLnRvVXBwZXJDYXNlKCk7XG4gIH0pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNhbWVsaXplOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBjYW1lbGl6ZVN0eWxlTmFtZVxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBjYW1lbGl6ZSA9IHJlcXVpcmUoJy4vY2FtZWxpemUnKTtcblxudmFyIG1zUGF0dGVybiA9IC9eLW1zLS87XG5cbi8qKlxuICogQ2FtZWxjYXNlcyBhIGh5cGhlbmF0ZWQgQ1NTIHByb3BlcnR5IG5hbWUsIGZvciBleGFtcGxlOlxuICpcbiAqICAgPiBjYW1lbGl6ZVN0eWxlTmFtZSgnYmFja2dyb3VuZC1jb2xvcicpXG4gKiAgIDwgXCJiYWNrZ3JvdW5kQ29sb3JcIlxuICogICA+IGNhbWVsaXplU3R5bGVOYW1lKCctbW96LXRyYW5zaXRpb24nKVxuICogICA8IFwiTW96VHJhbnNpdGlvblwiXG4gKiAgID4gY2FtZWxpemVTdHlsZU5hbWUoJy1tcy10cmFuc2l0aW9uJylcbiAqICAgPCBcIm1zVHJhbnNpdGlvblwiXG4gKlxuICogQXMgQW5kaSBTbWl0aCBzdWdnZXN0c1xuICogKGh0dHA6Ly93d3cuYW5kaXNtaXRoLmNvbS9ibG9nLzIwMTIvMDIvbW9kZXJuaXpyLXByZWZpeGVkLyksIGFuIGAtbXNgIHByZWZpeFxuICogaXMgY29udmVydGVkIHRvIGxvd2VyY2FzZSBgbXNgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gY2FtZWxpemVTdHlsZU5hbWUoc3RyaW5nKSB7XG4gIHJldHVybiBjYW1lbGl6ZShzdHJpbmcucmVwbGFjZShtc1BhdHRlcm4sICdtcy0nKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY2FtZWxpemVTdHlsZU5hbWU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGNvbnRhaW5zTm9kZVxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBpc1RleHROb2RlID0gcmVxdWlyZSgnLi9pc1RleHROb2RlJyk7XG5cbi8qZXNsaW50LWRpc2FibGUgbm8tYml0d2lzZSAqL1xuXG4vKipcbiAqIENoZWNrcyBpZiBhIGdpdmVuIERPTSBub2RlIGNvbnRhaW5zIG9yIGlzIGFub3RoZXIgRE9NIG5vZGUuXG4gKlxuICogQHBhcmFtIHs/RE9NTm9kZX0gb3V0ZXJOb2RlIE91dGVyIERPTSBub2RlLlxuICogQHBhcmFtIHs/RE9NTm9kZX0gaW5uZXJOb2RlIElubmVyIERPTSBub2RlLlxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBgb3V0ZXJOb2RlYCBjb250YWlucyBvciBpcyBgaW5uZXJOb2RlYC5cbiAqL1xuZnVuY3Rpb24gY29udGFpbnNOb2RlKF94LCBfeDIpIHtcbiAgdmFyIF9hZ2FpbiA9IHRydWU7XG5cbiAgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7XG4gICAgdmFyIG91dGVyTm9kZSA9IF94LFxuICAgICAgICBpbm5lck5vZGUgPSBfeDI7XG4gICAgX2FnYWluID0gZmFsc2U7XG5cbiAgICBpZiAoIW91dGVyTm9kZSB8fCAhaW5uZXJOb2RlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIGlmIChvdXRlck5vZGUgPT09IGlubmVyTm9kZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmIChpc1RleHROb2RlKG91dGVyTm9kZSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGVsc2UgaWYgKGlzVGV4dE5vZGUoaW5uZXJOb2RlKSkge1xuICAgICAgX3ggPSBvdXRlck5vZGU7XG4gICAgICBfeDIgPSBpbm5lck5vZGUucGFyZW50Tm9kZTtcbiAgICAgIF9hZ2FpbiA9IHRydWU7XG4gICAgICBjb250aW51ZSBfZnVuY3Rpb247XG4gICAgfSBlbHNlIGlmIChvdXRlck5vZGUuY29udGFpbnMpIHtcbiAgICAgIHJldHVybiBvdXRlck5vZGUuY29udGFpbnMoaW5uZXJOb2RlKTtcbiAgICB9IGVsc2UgaWYgKG91dGVyTm9kZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbikge1xuICAgICAgcmV0dXJuICEhKG91dGVyTm9kZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbihpbm5lck5vZGUpICYgMTYpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY29udGFpbnNOb2RlOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBjcmVhdGVBcnJheUZyb21NaXhlZFxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciB0b0FycmF5ID0gcmVxdWlyZSgnLi90b0FycmF5Jyk7XG5cbi8qKlxuICogUGVyZm9ybSBhIGhldXJpc3RpYyB0ZXN0IHRvIGRldGVybWluZSBpZiBhbiBvYmplY3QgaXMgXCJhcnJheS1saWtlXCIuXG4gKlxuICogICBBIG1vbmsgYXNrZWQgSm9zaHUsIGEgWmVuIG1hc3RlciwgXCJIYXMgYSBkb2cgQnVkZGhhIG5hdHVyZT9cIlxuICogICBKb3NodSByZXBsaWVkOiBcIk11LlwiXG4gKlxuICogVGhpcyBmdW5jdGlvbiBkZXRlcm1pbmVzIGlmIGl0cyBhcmd1bWVudCBoYXMgXCJhcnJheSBuYXR1cmVcIjogaXQgcmV0dXJuc1xuICogdHJ1ZSBpZiB0aGUgYXJndW1lbnQgaXMgYW4gYWN0dWFsIGFycmF5LCBhbiBgYXJndW1lbnRzJyBvYmplY3QsIG9yIGFuXG4gKiBIVE1MQ29sbGVjdGlvbiAoZS5nLiBub2RlLmNoaWxkTm9kZXMgb3Igbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgpKS5cbiAqXG4gKiBJdCB3aWxsIHJldHVybiBmYWxzZSBmb3Igb3RoZXIgYXJyYXktbGlrZSBvYmplY3RzIGxpa2UgRmlsZWxpc3QuXG4gKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIGhhc0FycmF5TmF0dXJlKG9iaikge1xuICByZXR1cm4oXG4gICAgLy8gbm90IG51bGwvZmFsc2VcbiAgICAhIW9iaiAmJiAoXG4gICAgLy8gYXJyYXlzIGFyZSBvYmplY3RzLCBOb2RlTGlzdHMgYXJlIGZ1bmN0aW9ucyBpbiBTYWZhcmlcbiAgICB0eXBlb2Ygb2JqID09ICdvYmplY3QnIHx8IHR5cGVvZiBvYmogPT0gJ2Z1bmN0aW9uJykgJiZcbiAgICAvLyBxdWFja3MgbGlrZSBhbiBhcnJheVxuICAgICdsZW5ndGgnIGluIG9iaiAmJlxuICAgIC8vIG5vdCB3aW5kb3dcbiAgICAhKCdzZXRJbnRlcnZhbCcgaW4gb2JqKSAmJlxuICAgIC8vIG5vIERPTSBub2RlIHNob3VsZCBiZSBjb25zaWRlcmVkIGFuIGFycmF5LWxpa2VcbiAgICAvLyBhICdzZWxlY3QnIGVsZW1lbnQgaGFzICdsZW5ndGgnIGFuZCAnaXRlbScgcHJvcGVydGllcyBvbiBJRThcbiAgICB0eXBlb2Ygb2JqLm5vZGVUeXBlICE9ICdudW1iZXInICYmIChcbiAgICAvLyBhIHJlYWwgYXJyYXlcbiAgICBBcnJheS5pc0FycmF5KG9iaikgfHxcbiAgICAvLyBhcmd1bWVudHNcbiAgICAnY2FsbGVlJyBpbiBvYmogfHxcbiAgICAvLyBIVE1MQ29sbGVjdGlvbi9Ob2RlTGlzdFxuICAgICdpdGVtJyBpbiBvYmopXG4gICk7XG59XG5cbi8qKlxuICogRW5zdXJlIHRoYXQgdGhlIGFyZ3VtZW50IGlzIGFuIGFycmF5IGJ5IHdyYXBwaW5nIGl0IGluIGFuIGFycmF5IGlmIGl0IGlzIG5vdC5cbiAqIENyZWF0ZXMgYSBjb3B5IG9mIHRoZSBhcmd1bWVudCBpZiBpdCBpcyBhbHJlYWR5IGFuIGFycmF5LlxuICpcbiAqIFRoaXMgaXMgbW9zdGx5IHVzZWZ1bCBpZGlvbWF0aWNhbGx5OlxuICpcbiAqICAgdmFyIGNyZWF0ZUFycmF5RnJvbU1peGVkID0gcmVxdWlyZSgnY3JlYXRlQXJyYXlGcm9tTWl4ZWQnKTtcbiAqXG4gKiAgIGZ1bmN0aW9uIHRha2VzT25lT3JNb3JlVGhpbmdzKHRoaW5ncykge1xuICogICAgIHRoaW5ncyA9IGNyZWF0ZUFycmF5RnJvbU1peGVkKHRoaW5ncyk7XG4gKiAgICAgLi4uXG4gKiAgIH1cbiAqXG4gKiBUaGlzIGFsbG93cyB5b3UgdG8gdHJlYXQgYHRoaW5ncycgYXMgYW4gYXJyYXksIGJ1dCBhY2NlcHQgc2NhbGFycyBpbiB0aGUgQVBJLlxuICpcbiAqIElmIHlvdSBuZWVkIHRvIGNvbnZlcnQgYW4gYXJyYXktbGlrZSBvYmplY3QsIGxpa2UgYGFyZ3VtZW50c2AsIGludG8gYW4gYXJyYXlcbiAqIHVzZSB0b0FycmF5IGluc3RlYWQuXG4gKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm4ge2FycmF5fVxuICovXG5mdW5jdGlvbiBjcmVhdGVBcnJheUZyb21NaXhlZChvYmopIHtcbiAgaWYgKCFoYXNBcnJheU5hdHVyZShvYmopKSB7XG4gICAgcmV0dXJuIFtvYmpdO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkob2JqKSkge1xuICAgIHJldHVybiBvYmouc2xpY2UoKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gdG9BcnJheShvYmopO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlQXJyYXlGcm9tTWl4ZWQ7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGNyZWF0ZU5vZGVzRnJvbU1hcmt1cFxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4vKmVzbGludC1kaXNhYmxlIGZiLXd3dy91bnNhZmUtaHRtbCovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIEV4ZWN1dGlvbkVudmlyb25tZW50ID0gcmVxdWlyZSgnLi9FeGVjdXRpb25FbnZpcm9ubWVudCcpO1xuXG52YXIgY3JlYXRlQXJyYXlGcm9tTWl4ZWQgPSByZXF1aXJlKCcuL2NyZWF0ZUFycmF5RnJvbU1peGVkJyk7XG52YXIgZ2V0TWFya3VwV3JhcCA9IHJlcXVpcmUoJy4vZ2V0TWFya3VwV3JhcCcpO1xudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJy4vaW52YXJpYW50Jyk7XG5cbi8qKlxuICogRHVtbXkgY29udGFpbmVyIHVzZWQgdG8gcmVuZGVyIGFsbCBtYXJrdXAuXG4gKi9cbnZhciBkdW1teU5vZGUgPSBFeGVjdXRpb25FbnZpcm9ubWVudC5jYW5Vc2VET00gPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSA6IG51bGw7XG5cbi8qKlxuICogUGF0dGVybiB1c2VkIGJ5IGBnZXROb2RlTmFtZWAuXG4gKi9cbnZhciBub2RlTmFtZVBhdHRlcm4gPSAvXlxccyo8KFxcdyspLztcblxuLyoqXG4gKiBFeHRyYWN0cyB0aGUgYG5vZGVOYW1lYCBvZiB0aGUgZmlyc3QgZWxlbWVudCBpbiBhIHN0cmluZyBvZiBtYXJrdXAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1hcmt1cCBTdHJpbmcgb2YgbWFya3VwLlxuICogQHJldHVybiB7P3N0cmluZ30gTm9kZSBuYW1lIG9mIHRoZSBzdXBwbGllZCBtYXJrdXAuXG4gKi9cbmZ1bmN0aW9uIGdldE5vZGVOYW1lKG1hcmt1cCkge1xuICB2YXIgbm9kZU5hbWVNYXRjaCA9IG1hcmt1cC5tYXRjaChub2RlTmFtZVBhdHRlcm4pO1xuICByZXR1cm4gbm9kZU5hbWVNYXRjaCAmJiBub2RlTmFtZU1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBjb250YWluaW5nIHRoZSBub2RlcyByZW5kZXJlZCBmcm9tIHRoZSBzdXBwbGllZCBtYXJrdXAuIFRoZVxuICogb3B0aW9uYWxseSBzdXBwbGllZCBgaGFuZGxlU2NyaXB0YCBmdW5jdGlvbiB3aWxsIGJlIGludm9rZWQgb25jZSBmb3IgZWFjaFxuICogPHNjcmlwdD4gZWxlbWVudCB0aGF0IGlzIHJlbmRlcmVkLiBJZiBubyBgaGFuZGxlU2NyaXB0YCBmdW5jdGlvbiBpcyBzdXBwbGllZCxcbiAqIGFuIGV4Y2VwdGlvbiBpcyB0aHJvd24gaWYgYW55IDxzY3JpcHQ+IGVsZW1lbnRzIGFyZSByZW5kZXJlZC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbWFya3VwIEEgc3RyaW5nIG9mIHZhbGlkIEhUTUwgbWFya3VwLlxuICogQHBhcmFtIHs/ZnVuY3Rpb259IGhhbmRsZVNjcmlwdCBJbnZva2VkIG9uY2UgZm9yIGVhY2ggcmVuZGVyZWQgPHNjcmlwdD4uXG4gKiBAcmV0dXJuIHthcnJheTxET01FbGVtZW50fERPTVRleHROb2RlPn0gQW4gYXJyYXkgb2YgcmVuZGVyZWQgbm9kZXMuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZU5vZGVzRnJvbU1hcmt1cChtYXJrdXAsIGhhbmRsZVNjcmlwdCkge1xuICB2YXIgbm9kZSA9IGR1bW15Tm9kZTtcbiAgISEhZHVtbXlOb2RlID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2NyZWF0ZU5vZGVzRnJvbU1hcmt1cCBkdW1teSBub3QgaW5pdGlhbGl6ZWQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIHZhciBub2RlTmFtZSA9IGdldE5vZGVOYW1lKG1hcmt1cCk7XG5cbiAgdmFyIHdyYXAgPSBub2RlTmFtZSAmJiBnZXRNYXJrdXBXcmFwKG5vZGVOYW1lKTtcbiAgaWYgKHdyYXApIHtcbiAgICBub2RlLmlubmVySFRNTCA9IHdyYXBbMV0gKyBtYXJrdXAgKyB3cmFwWzJdO1xuXG4gICAgdmFyIHdyYXBEZXB0aCA9IHdyYXBbMF07XG4gICAgd2hpbGUgKHdyYXBEZXB0aC0tKSB7XG4gICAgICBub2RlID0gbm9kZS5sYXN0Q2hpbGQ7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIG5vZGUuaW5uZXJIVE1MID0gbWFya3VwO1xuICB9XG5cbiAgdmFyIHNjcmlwdHMgPSBub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKTtcbiAgaWYgKHNjcmlwdHMubGVuZ3RoKSB7XG4gICAgIWhhbmRsZVNjcmlwdCA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICdjcmVhdGVOb2Rlc0Zyb21NYXJrdXAoLi4uKTogVW5leHBlY3RlZCA8c2NyaXB0PiBlbGVtZW50IHJlbmRlcmVkLicpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgICBjcmVhdGVBcnJheUZyb21NaXhlZChzY3JpcHRzKS5mb3JFYWNoKGhhbmRsZVNjcmlwdCk7XG4gIH1cblxuICB2YXIgbm9kZXMgPSBjcmVhdGVBcnJheUZyb21NaXhlZChub2RlLmNoaWxkTm9kZXMpO1xuICB3aGlsZSAobm9kZS5sYXN0Q2hpbGQpIHtcbiAgICBub2RlLnJlbW92ZUNoaWxkKG5vZGUubGFzdENoaWxkKTtcbiAgfVxuICByZXR1cm4gbm9kZXM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY3JlYXRlTm9kZXNGcm9tTWFya3VwOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBlbXB0eUZ1bmN0aW9uXG4gKi9cblxuXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIG1ha2VFbXB0eUZ1bmN0aW9uKGFyZykge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBhcmc7XG4gIH07XG59XG5cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBhY2NlcHRzIGFuZCBkaXNjYXJkcyBpbnB1dHM7IGl0IGhhcyBubyBzaWRlIGVmZmVjdHMuIFRoaXMgaXNcbiAqIHByaW1hcmlseSB1c2VmdWwgaWRpb21hdGljYWxseSBmb3Igb3ZlcnJpZGFibGUgZnVuY3Rpb24gZW5kcG9pbnRzIHdoaWNoXG4gKiBhbHdheXMgbmVlZCB0byBiZSBjYWxsYWJsZSwgc2luY2UgSlMgbGFja3MgYSBudWxsLWNhbGwgaWRpb20gYWxhIENvY29hLlxuICovXG5mdW5jdGlvbiBlbXB0eUZ1bmN0aW9uKCkge31cblxuZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJucyA9IG1ha2VFbXB0eUZ1bmN0aW9uO1xuZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0ZhbHNlID0gbWFrZUVtcHR5RnVuY3Rpb24oZmFsc2UpO1xuZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc1RydWUgPSBtYWtlRW1wdHlGdW5jdGlvbih0cnVlKTtcbmVtcHR5RnVuY3Rpb24udGhhdFJldHVybnNOdWxsID0gbWFrZUVtcHR5RnVuY3Rpb24obnVsbCk7XG5lbXB0eUZ1bmN0aW9uLnRoYXRSZXR1cm5zVGhpcyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHRoaXM7XG59O1xuZW1wdHlGdW5jdGlvbi50aGF0UmV0dXJuc0FyZ3VtZW50ID0gZnVuY3Rpb24gKGFyZykge1xuICByZXR1cm4gYXJnO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBlbXB0eUZ1bmN0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBlbXB0eU9iamVjdFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGVtcHR5T2JqZWN0ID0ge307XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIE9iamVjdC5mcmVlemUoZW1wdHlPYmplY3QpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVtcHR5T2JqZWN0OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBmb2N1c05vZGVcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQHBhcmFtIHtET01FbGVtZW50fSBub2RlIGlucHV0L3RleHRhcmVhIHRvIGZvY3VzXG4gKi9cbmZ1bmN0aW9uIGZvY3VzTm9kZShub2RlKSB7XG4gIC8vIElFOCBjYW4gdGhyb3cgXCJDYW4ndCBtb3ZlIGZvY3VzIHRvIHRoZSBjb250cm9sIGJlY2F1c2UgaXQgaXMgaW52aXNpYmxlLFxuICAvLyBub3QgZW5hYmxlZCwgb3Igb2YgYSB0eXBlIHRoYXQgZG9lcyBub3QgYWNjZXB0IHRoZSBmb2N1cy5cIiBmb3IgYWxsIGtpbmRzIG9mXG4gIC8vIHJlYXNvbnMgdGhhdCBhcmUgdG9vIGV4cGVuc2l2ZSBhbmQgZnJhZ2lsZSB0byB0ZXN0LlxuICB0cnkge1xuICAgIG5vZGUuZm9jdXMoKTtcbiAgfSBjYXRjaCAoZSkge31cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmb2N1c05vZGU7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGdldEFjdGl2ZUVsZW1lbnRcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuLyogZXNsaW50LWRpc2FibGUgZmItd3d3L3R5cGVvZi11bmRlZmluZWQgKi9cblxuLyoqXG4gKiBTYW1lIGFzIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgYnV0IHdyYXBzIGluIGEgdHJ5LWNhdGNoIGJsb2NrLiBJbiBJRSBpdCBpc1xuICogbm90IHNhZmUgdG8gY2FsbCBkb2N1bWVudC5hY3RpdmVFbGVtZW50IGlmIHRoZXJlIGlzIG5vdGhpbmcgZm9jdXNlZC5cbiAqXG4gKiBUaGUgYWN0aXZlRWxlbWVudCB3aWxsIGJlIG51bGwgb25seSBpZiB0aGUgZG9jdW1lbnQgb3IgZG9jdW1lbnQgYm9keSBpcyBub3RcbiAqIHlldCBkZWZpbmVkLlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIGdldEFjdGl2ZUVsZW1lbnQoKSAvKj9ET01FbGVtZW50Ki97XG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgdHJ5IHtcbiAgICByZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudCB8fCBkb2N1bWVudC5ib2R5O1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmJvZHk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRBY3RpdmVFbGVtZW50OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRNYXJrdXBXcmFwXG4gKi9cblxuLyplc2xpbnQtZGlzYWJsZSBmYi13d3cvdW5zYWZlLWh0bWwgKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgRXhlY3V0aW9uRW52aXJvbm1lbnQgPSByZXF1aXJlKCcuL0V4ZWN1dGlvbkVudmlyb25tZW50Jyk7XG5cbnZhciBpbnZhcmlhbnQgPSByZXF1aXJlKCcuL2ludmFyaWFudCcpO1xuXG4vKipcbiAqIER1bW15IGNvbnRhaW5lciB1c2VkIHRvIGRldGVjdCB3aGljaCB3cmFwcyBhcmUgbmVjZXNzYXJ5LlxuICovXG52YXIgZHVtbXlOb2RlID0gRXhlY3V0aW9uRW52aXJvbm1lbnQuY2FuVXNlRE9NID8gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JykgOiBudWxsO1xuXG4vKipcbiAqIFNvbWUgYnJvd3NlcnMgY2Fubm90IHVzZSBgaW5uZXJIVE1MYCB0byByZW5kZXIgY2VydGFpbiBlbGVtZW50cyBzdGFuZGFsb25lLFxuICogc28gd2Ugd3JhcCB0aGVtLCByZW5kZXIgdGhlIHdyYXBwZWQgbm9kZXMsIHRoZW4gZXh0cmFjdCB0aGUgZGVzaXJlZCBub2RlLlxuICpcbiAqIEluIElFOCwgY2VydGFpbiBlbGVtZW50cyBjYW5ub3QgcmVuZGVyIGFsb25lLCBzbyB3cmFwIGFsbCBlbGVtZW50cyAoJyonKS5cbiAqL1xuXG52YXIgc2hvdWxkV3JhcCA9IHt9O1xuXG52YXIgc2VsZWN0V3JhcCA9IFsxLCAnPHNlbGVjdCBtdWx0aXBsZT1cInRydWVcIj4nLCAnPC9zZWxlY3Q+J107XG52YXIgdGFibGVXcmFwID0gWzEsICc8dGFibGU+JywgJzwvdGFibGU+J107XG52YXIgdHJXcmFwID0gWzMsICc8dGFibGU+PHRib2R5Pjx0cj4nLCAnPC90cj48L3Rib2R5PjwvdGFibGU+J107XG5cbnZhciBzdmdXcmFwID0gWzEsICc8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj4nLCAnPC9zdmc+J107XG5cbnZhciBtYXJrdXBXcmFwID0ge1xuICAnKic6IFsxLCAnPzxkaXY+JywgJzwvZGl2PiddLFxuXG4gICdhcmVhJzogWzEsICc8bWFwPicsICc8L21hcD4nXSxcbiAgJ2NvbCc6IFsyLCAnPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4nLCAnPC9jb2xncm91cD48L3RhYmxlPiddLFxuICAnbGVnZW5kJzogWzEsICc8ZmllbGRzZXQ+JywgJzwvZmllbGRzZXQ+J10sXG4gICdwYXJhbSc6IFsxLCAnPG9iamVjdD4nLCAnPC9vYmplY3Q+J10sXG4gICd0cic6IFsyLCAnPHRhYmxlPjx0Ym9keT4nLCAnPC90Ym9keT48L3RhYmxlPiddLFxuXG4gICdvcHRncm91cCc6IHNlbGVjdFdyYXAsXG4gICdvcHRpb24nOiBzZWxlY3RXcmFwLFxuXG4gICdjYXB0aW9uJzogdGFibGVXcmFwLFxuICAnY29sZ3JvdXAnOiB0YWJsZVdyYXAsXG4gICd0Ym9keSc6IHRhYmxlV3JhcCxcbiAgJ3Rmb290JzogdGFibGVXcmFwLFxuICAndGhlYWQnOiB0YWJsZVdyYXAsXG5cbiAgJ3RkJzogdHJXcmFwLFxuICAndGgnOiB0cldyYXBcbn07XG5cbi8vIEluaXRpYWxpemUgdGhlIFNWRyBlbGVtZW50cyBzaW5jZSB3ZSBrbm93IHRoZXknbGwgYWx3YXlzIG5lZWQgdG8gYmUgd3JhcHBlZFxuLy8gY29uc2lzdGVudGx5LiBJZiB0aGV5IGFyZSBjcmVhdGVkIGluc2lkZSBhIDxkaXY+IHRoZXkgd2lsbCBiZSBpbml0aWFsaXplZCBpblxuLy8gdGhlIHdyb25nIG5hbWVzcGFjZSAoYW5kIHdpbGwgbm90IGRpc3BsYXkpLlxudmFyIHN2Z0VsZW1lbnRzID0gWydjaXJjbGUnLCAnY2xpcFBhdGgnLCAnZGVmcycsICdlbGxpcHNlJywgJ2cnLCAnaW1hZ2UnLCAnbGluZScsICdsaW5lYXJHcmFkaWVudCcsICdtYXNrJywgJ3BhdGgnLCAncGF0dGVybicsICdwb2x5Z29uJywgJ3BvbHlsaW5lJywgJ3JhZGlhbEdyYWRpZW50JywgJ3JlY3QnLCAnc3RvcCcsICd0ZXh0JywgJ3RzcGFuJ107XG5zdmdFbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlTmFtZSkge1xuICBtYXJrdXBXcmFwW25vZGVOYW1lXSA9IHN2Z1dyYXA7XG4gIHNob3VsZFdyYXBbbm9kZU5hbWVdID0gdHJ1ZTtcbn0pO1xuXG4vKipcbiAqIEdldHMgdGhlIG1hcmt1cCB3cmFwIGNvbmZpZ3VyYXRpb24gZm9yIHRoZSBzdXBwbGllZCBgbm9kZU5hbWVgLlxuICpcbiAqIE5PVEU6IFRoaXMgbGF6aWx5IGRldGVjdHMgd2hpY2ggd3JhcHMgYXJlIG5lY2Vzc2FyeSBmb3IgdGhlIGN1cnJlbnQgYnJvd3Nlci5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbm9kZU5hbWUgTG93ZXJjYXNlIGBub2RlTmFtZWAuXG4gKiBAcmV0dXJuIHs/YXJyYXl9IE1hcmt1cCB3cmFwIGNvbmZpZ3VyYXRpb24sIGlmIGFwcGxpY2FibGUuXG4gKi9cbmZ1bmN0aW9uIGdldE1hcmt1cFdyYXAobm9kZU5hbWUpIHtcbiAgISEhZHVtbXlOb2RlID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ01hcmt1cCB3cmFwcGluZyBub2RlIG5vdCBpbml0aWFsaXplZCcpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcbiAgaWYgKCFtYXJrdXBXcmFwLmhhc093blByb3BlcnR5KG5vZGVOYW1lKSkge1xuICAgIG5vZGVOYW1lID0gJyonO1xuICB9XG4gIGlmICghc2hvdWxkV3JhcC5oYXNPd25Qcm9wZXJ0eShub2RlTmFtZSkpIHtcbiAgICBpZiAobm9kZU5hbWUgPT09ICcqJykge1xuICAgICAgZHVtbXlOb2RlLmlubmVySFRNTCA9ICc8bGluayAvPic7XG4gICAgfSBlbHNlIHtcbiAgICAgIGR1bW15Tm9kZS5pbm5lckhUTUwgPSAnPCcgKyBub2RlTmFtZSArICc+PC8nICsgbm9kZU5hbWUgKyAnPic7XG4gICAgfVxuICAgIHNob3VsZFdyYXBbbm9kZU5hbWVdID0gIWR1bW15Tm9kZS5maXJzdENoaWxkO1xuICB9XG4gIHJldHVybiBzaG91bGRXcmFwW25vZGVOYW1lXSA/IG1hcmt1cFdyYXBbbm9kZU5hbWVdIDogbnVsbDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRNYXJrdXBXcmFwOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBnZXRVbmJvdW5kZWRTY3JvbGxQb3NpdGlvblxuICogQHR5cGVjaGVja3NcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogR2V0cyB0aGUgc2Nyb2xsIHBvc2l0aW9uIG9mIHRoZSBzdXBwbGllZCBlbGVtZW50IG9yIHdpbmRvdy5cbiAqXG4gKiBUaGUgcmV0dXJuIHZhbHVlcyBhcmUgdW5ib3VuZGVkLCB1bmxpa2UgYGdldFNjcm9sbFBvc2l0aW9uYC4gVGhpcyBtZWFucyB0aGV5XG4gKiBtYXkgYmUgbmVnYXRpdmUgb3IgZXhjZWVkIHRoZSBlbGVtZW50IGJvdW5kYXJpZXMgKHdoaWNoIGlzIHBvc3NpYmxlIHVzaW5nXG4gKiBpbmVydGlhbCBzY3JvbGxpbmcpLlxuICpcbiAqIEBwYXJhbSB7RE9NV2luZG93fERPTUVsZW1lbnR9IHNjcm9sbGFibGVcbiAqIEByZXR1cm4ge29iamVjdH0gTWFwIHdpdGggYHhgIGFuZCBgeWAga2V5cy5cbiAqL1xuZnVuY3Rpb24gZ2V0VW5ib3VuZGVkU2Nyb2xsUG9zaXRpb24oc2Nyb2xsYWJsZSkge1xuICBpZiAoc2Nyb2xsYWJsZSA9PT0gd2luZG93KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IHdpbmRvdy5wYWdlWE9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCxcbiAgICAgIHk6IHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wXG4gICAgfTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHg6IHNjcm9sbGFibGUuc2Nyb2xsTGVmdCxcbiAgICB5OiBzY3JvbGxhYmxlLnNjcm9sbFRvcFxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFVuYm91bmRlZFNjcm9sbFBvc2l0aW9uOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBoeXBoZW5hdGVcbiAqIEB0eXBlY2hlY2tzXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgX3VwcGVyY2FzZVBhdHRlcm4gPSAvKFtBLVpdKS9nO1xuXG4vKipcbiAqIEh5cGhlbmF0ZXMgYSBjYW1lbGNhc2VkIHN0cmluZywgZm9yIGV4YW1wbGU6XG4gKlxuICogICA+IGh5cGhlbmF0ZSgnYmFja2dyb3VuZENvbG9yJylcbiAqICAgPCBcImJhY2tncm91bmQtY29sb3JcIlxuICpcbiAqIEZvciBDU1Mgc3R5bGUgbmFtZXMsIHVzZSBgaHlwaGVuYXRlU3R5bGVOYW1lYCBpbnN0ZWFkIHdoaWNoIHdvcmtzIHByb3Blcmx5XG4gKiB3aXRoIGFsbCB2ZW5kb3IgcHJlZml4ZXMsIGluY2x1ZGluZyBgbXNgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gaHlwaGVuYXRlKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoX3VwcGVyY2FzZVBhdHRlcm4sICctJDEnKS50b0xvd2VyQ2FzZSgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGh5cGhlbmF0ZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaHlwaGVuYXRlU3R5bGVOYW1lXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGh5cGhlbmF0ZSA9IHJlcXVpcmUoJy4vaHlwaGVuYXRlJyk7XG5cbnZhciBtc1BhdHRlcm4gPSAvXm1zLS87XG5cbi8qKlxuICogSHlwaGVuYXRlcyBhIGNhbWVsY2FzZWQgQ1NTIHByb3BlcnR5IG5hbWUsIGZvciBleGFtcGxlOlxuICpcbiAqICAgPiBoeXBoZW5hdGVTdHlsZU5hbWUoJ2JhY2tncm91bmRDb2xvcicpXG4gKiAgIDwgXCJiYWNrZ3JvdW5kLWNvbG9yXCJcbiAqICAgPiBoeXBoZW5hdGVTdHlsZU5hbWUoJ01velRyYW5zaXRpb24nKVxuICogICA8IFwiLW1vei10cmFuc2l0aW9uXCJcbiAqICAgPiBoeXBoZW5hdGVTdHlsZU5hbWUoJ21zVHJhbnNpdGlvbicpXG4gKiAgIDwgXCItbXMtdHJhbnNpdGlvblwiXG4gKlxuICogQXMgTW9kZXJuaXpyIHN1Z2dlc3RzIChodHRwOi8vbW9kZXJuaXpyLmNvbS9kb2NzLyNwcmVmaXhlZCksIGFuIGBtc2AgcHJlZml4XG4gKiBpcyBjb252ZXJ0ZWQgdG8gYC1tcy1gLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJpbmdcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gaHlwaGVuYXRlU3R5bGVOYW1lKHN0cmluZykge1xuICByZXR1cm4gaHlwaGVuYXRlKHN0cmluZykucmVwbGFjZShtc1BhdHRlcm4sICctbXMtJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaHlwaGVuYXRlU3R5bGVOYW1lOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBpbnZhcmlhbnRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogVXNlIGludmFyaWFudCgpIHRvIGFzc2VydCBzdGF0ZSB3aGljaCB5b3VyIHByb2dyYW0gYXNzdW1lcyB0byBiZSB0cnVlLlxuICpcbiAqIFByb3ZpZGUgc3ByaW50Zi1zdHlsZSBmb3JtYXQgKG9ubHkgJXMgaXMgc3VwcG9ydGVkKSBhbmQgYXJndW1lbnRzXG4gKiB0byBwcm92aWRlIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgYnJva2UgYW5kIHdoYXQgeW91IHdlcmVcbiAqIGV4cGVjdGluZy5cbiAqXG4gKiBUaGUgaW52YXJpYW50IG1lc3NhZ2Ugd2lsbCBiZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uLCBidXQgdGhlIGludmFyaWFudFxuICogd2lsbCByZW1haW4gdG8gZW5zdXJlIGxvZ2ljIGRvZXMgbm90IGRpZmZlciBpbiBwcm9kdWN0aW9uLlxuICovXG5cbmZ1bmN0aW9uIGludmFyaWFudChjb25kaXRpb24sIGZvcm1hdCwgYSwgYiwgYywgZCwgZSwgZikge1xuICBpZiAoXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhcmlhbnQgcmVxdWlyZXMgYW4gZXJyb3IgbWVzc2FnZSBhcmd1bWVudCcpO1xuICAgIH1cbiAgfVxuXG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgdmFyIGVycm9yO1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoJ01pbmlmaWVkIGV4Y2VwdGlvbiBvY2N1cnJlZDsgdXNlIHRoZSBub24tbWluaWZpZWQgZGV2IGVudmlyb25tZW50ICcgKyAnZm9yIHRoZSBmdWxsIGVycm9yIG1lc3NhZ2UgYW5kIGFkZGl0aW9uYWwgaGVscGZ1bCB3YXJuaW5ncy4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGFyZ3MgPSBbYSwgYiwgYywgZCwgZSwgZl07XG4gICAgICB2YXIgYXJnSW5kZXggPSAwO1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoZm9ybWF0LnJlcGxhY2UoLyVzL2csIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFyZ3NbYXJnSW5kZXgrK107XG4gICAgICB9KSk7XG4gICAgICBlcnJvci5uYW1lID0gJ0ludmFyaWFudCBWaW9sYXRpb24nO1xuICAgIH1cblxuICAgIGVycm9yLmZyYW1lc1RvUG9wID0gMTsgLy8gd2UgZG9uJ3QgY2FyZSBhYm91dCBpbnZhcmlhbnQncyBvd24gZnJhbWVcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGludmFyaWFudDsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgaXNOb2RlXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbi8qKlxuICogQHBhcmFtIHsqfSBvYmplY3QgVGhlIG9iamVjdCB0byBjaGVjay5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgb3Igbm90IHRoZSBvYmplY3QgaXMgYSBET00gbm9kZS5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBpc05vZGUob2JqZWN0KSB7XG4gIHJldHVybiAhIShvYmplY3QgJiYgKHR5cGVvZiBOb2RlID09PSAnZnVuY3Rpb24nID8gb2JqZWN0IGluc3RhbmNlb2YgTm9kZSA6IHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIHR5cGVvZiBvYmplY3Qubm9kZVR5cGUgPT09ICdudW1iZXInICYmIHR5cGVvZiBvYmplY3Qubm9kZU5hbWUgPT09ICdzdHJpbmcnKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNOb2RlOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBpc1RleHROb2RlXG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGlzTm9kZSA9IHJlcXVpcmUoJy4vaXNOb2RlJyk7XG5cbi8qKlxuICogQHBhcmFtIHsqfSBvYmplY3QgVGhlIG9iamVjdCB0byBjaGVjay5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgb3Igbm90IHRoZSBvYmplY3QgaXMgYSBET00gdGV4dCBub2RlLlxuICovXG5mdW5jdGlvbiBpc1RleHROb2RlKG9iamVjdCkge1xuICByZXR1cm4gaXNOb2RlKG9iamVjdCkgJiYgb2JqZWN0Lm5vZGVUeXBlID09IDM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNUZXh0Tm9kZTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUga2V5TWlycm9yXG4gKiBAdHlwZWNoZWNrcyBzdGF0aWMtb25seVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJy4vaW52YXJpYW50Jyk7XG5cbi8qKlxuICogQ29uc3RydWN0cyBhbiBlbnVtZXJhdGlvbiB3aXRoIGtleXMgZXF1YWwgdG8gdGhlaXIgdmFsdWUuXG4gKlxuICogRm9yIGV4YW1wbGU6XG4gKlxuICogICB2YXIgQ09MT1JTID0ga2V5TWlycm9yKHtibHVlOiBudWxsLCByZWQ6IG51bGx9KTtcbiAqICAgdmFyIG15Q29sb3IgPSBDT0xPUlMuYmx1ZTtcbiAqICAgdmFyIGlzQ29sb3JWYWxpZCA9ICEhQ09MT1JTW215Q29sb3JdO1xuICpcbiAqIFRoZSBsYXN0IGxpbmUgY291bGQgbm90IGJlIHBlcmZvcm1lZCBpZiB0aGUgdmFsdWVzIG9mIHRoZSBnZW5lcmF0ZWQgZW51bSB3ZXJlXG4gKiBub3QgZXF1YWwgdG8gdGhlaXIga2V5cy5cbiAqXG4gKiAgIElucHV0OiAge2tleTE6IHZhbDEsIGtleTI6IHZhbDJ9XG4gKiAgIE91dHB1dDoge2tleTE6IGtleTEsIGtleTI6IGtleTJ9XG4gKlxuICogQHBhcmFtIHtvYmplY3R9IG9ialxuICogQHJldHVybiB7b2JqZWN0fVxuICovXG52YXIga2V5TWlycm9yID0gZnVuY3Rpb24gKG9iaikge1xuICB2YXIgcmV0ID0ge307XG4gIHZhciBrZXk7XG4gICEob2JqIGluc3RhbmNlb2YgT2JqZWN0ICYmICFBcnJheS5pc0FycmF5KG9iaikpID8gXCJwcm9kdWN0aW9uXCIgIT09ICdwcm9kdWN0aW9uJyA/IGludmFyaWFudChmYWxzZSwgJ2tleU1pcnJvciguLi4pOiBBcmd1bWVudCBtdXN0IGJlIGFuIG9iamVjdC4nKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG4gIGZvciAoa2V5IGluIG9iaikge1xuICAgIGlmICghb2JqLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICByZXRba2V5XSA9IGtleTtcbiAgfVxuICByZXR1cm4gcmV0O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBrZXlNaXJyb3I7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIGtleU9mXG4gKi9cblxuLyoqXG4gKiBBbGxvd3MgZXh0cmFjdGlvbiBvZiBhIG1pbmlmaWVkIGtleS4gTGV0J3MgdGhlIGJ1aWxkIHN5c3RlbSBtaW5pZnkga2V5c1xuICogd2l0aG91dCBsb3NpbmcgdGhlIGFiaWxpdHkgdG8gZHluYW1pY2FsbHkgdXNlIGtleSBzdHJpbmdzIGFzIHZhbHVlc1xuICogdGhlbXNlbHZlcy4gUGFzcyBpbiBhbiBvYmplY3Qgd2l0aCBhIHNpbmdsZSBrZXkvdmFsIHBhaXIgYW5kIGl0IHdpbGwgcmV0dXJuXG4gKiB5b3UgdGhlIHN0cmluZyBrZXkgb2YgdGhhdCBzaW5nbGUgcmVjb3JkLiBTdXBwb3NlIHlvdSB3YW50IHRvIGdyYWIgdGhlXG4gKiB2YWx1ZSBmb3IgYSBrZXkgJ2NsYXNzTmFtZScgaW5zaWRlIG9mIGFuIG9iamVjdC4gS2V5L3ZhbCBtaW5pZmljYXRpb24gbWF5XG4gKiBoYXZlIGFsaWFzZWQgdGhhdCBrZXkgdG8gYmUgJ3hhMTInLiBrZXlPZih7Y2xhc3NOYW1lOiBudWxsfSkgd2lsbCByZXR1cm5cbiAqICd4YTEyJyBpbiB0aGF0IGNhc2UuIFJlc29sdmUga2V5cyB5b3Ugd2FudCB0byB1c2Ugb25jZSBhdCBzdGFydHVwIHRpbWUsIHRoZW5cbiAqIHJldXNlIHRob3NlIHJlc29sdXRpb25zLlxuICovXG5cInVzZSBzdHJpY3RcIjtcblxudmFyIGtleU9mID0gZnVuY3Rpb24gKG9uZUtleU9iaikge1xuICB2YXIga2V5O1xuICBmb3IgKGtleSBpbiBvbmVLZXlPYmopIHtcbiAgICBpZiAoIW9uZUtleU9iai5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgcmV0dXJuIGtleTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ga2V5T2Y7IiwiLyoqXG4gKiBDb3B5cmlnaHQgMjAxMy0yMDE1LCBGYWNlYm9vaywgSW5jLlxuICogQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBCU0Qtc3R5bGUgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS4gQW4gYWRkaXRpb25hbCBncmFudFxuICogb2YgcGF0ZW50IHJpZ2h0cyBjYW4gYmUgZm91bmQgaW4gdGhlIFBBVEVOVFMgZmlsZSBpbiB0aGUgc2FtZSBkaXJlY3RvcnkuXG4gKlxuICogQHByb3ZpZGVzTW9kdWxlIG1hcE9iamVjdFxuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcHJvdmlkZWQgYGNhbGxiYWNrYCBvbmNlIGZvciBlYWNoIGVudW1lcmFibGUgb3duIHByb3BlcnR5IGluIHRoZVxuICogb2JqZWN0IGFuZCBjb25zdHJ1Y3RzIGEgbmV3IG9iamVjdCBmcm9tIHRoZSByZXN1bHRzLiBUaGUgYGNhbGxiYWNrYCBpc1xuICogaW52b2tlZCB3aXRoIHRocmVlIGFyZ3VtZW50czpcbiAqXG4gKiAgLSB0aGUgcHJvcGVydHkgdmFsdWVcbiAqICAtIHRoZSBwcm9wZXJ0eSBuYW1lXG4gKiAgLSB0aGUgb2JqZWN0IGJlaW5nIHRyYXZlcnNlZFxuICpcbiAqIFByb3BlcnRpZXMgdGhhdCBhcmUgYWRkZWQgYWZ0ZXIgdGhlIGNhbGwgdG8gYG1hcE9iamVjdGAgd2lsbCBub3QgYmUgdmlzaXRlZFxuICogYnkgYGNhbGxiYWNrYC4gSWYgdGhlIHZhbHVlcyBvZiBleGlzdGluZyBwcm9wZXJ0aWVzIGFyZSBjaGFuZ2VkLCB0aGUgdmFsdWVcbiAqIHBhc3NlZCB0byBgY2FsbGJhY2tgIHdpbGwgYmUgdGhlIHZhbHVlIGF0IHRoZSB0aW1lIGBtYXBPYmplY3RgIHZpc2l0cyB0aGVtLlxuICogUHJvcGVydGllcyB0aGF0IGFyZSBkZWxldGVkIGJlZm9yZSBiZWluZyB2aXNpdGVkIGFyZSBub3QgdmlzaXRlZC5cbiAqXG4gKiBAZ3JlcCBmdW5jdGlvbiBvYmplY3RNYXAoKVxuICogQGdyZXAgZnVuY3Rpb24gb2JqTWFwKClcbiAqXG4gKiBAcGFyYW0gez9vYmplY3R9IG9iamVjdFxuICogQHBhcmFtIHtmdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEBwYXJhbSB7Kn0gY29udGV4dFxuICogQHJldHVybiB7P29iamVjdH1cbiAqL1xuZnVuY3Rpb24gbWFwT2JqZWN0KG9iamVjdCwgY2FsbGJhY2ssIGNvbnRleHQpIHtcbiAgaWYgKCFvYmplY3QpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICB2YXIgcmVzdWx0ID0ge307XG4gIGZvciAodmFyIG5hbWUgaW4gb2JqZWN0KSB7XG4gICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBuYW1lKSkge1xuICAgICAgcmVzdWx0W25hbWVdID0gY2FsbGJhY2suY2FsbChjb250ZXh0LCBvYmplY3RbbmFtZV0sIG5hbWUsIG9iamVjdCk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbWFwT2JqZWN0OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSBtZW1vaXplU3RyaW5nT25seVxuICogQHR5cGVjaGVja3Mgc3RhdGljLW9ubHlcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogTWVtb2l6ZXMgdGhlIHJldHVybiB2YWx1ZSBvZiBhIGZ1bmN0aW9uIHRoYXQgYWNjZXB0cyBvbmUgc3RyaW5nIGFyZ3VtZW50LlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGNhbGxiYWNrXG4gKiBAcmV0dXJuIHtmdW5jdGlvbn1cbiAqL1xuZnVuY3Rpb24gbWVtb2l6ZVN0cmluZ09ubHkoY2FsbGJhY2spIHtcbiAgdmFyIGNhY2hlID0ge307XG4gIHJldHVybiBmdW5jdGlvbiAoc3RyaW5nKSB7XG4gICAgaWYgKCFjYWNoZS5oYXNPd25Qcm9wZXJ0eShzdHJpbmcpKSB7XG4gICAgICBjYWNoZVtzdHJpbmddID0gY2FsbGJhY2suY2FsbCh0aGlzLCBzdHJpbmcpO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGVbc3RyaW5nXTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtZW1vaXplU3RyaW5nT25seTsiLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTUsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqXG4gKiBAcHJvdmlkZXNNb2R1bGUgc2hhbGxvd0VxdWFsXG4gKiBAdHlwZWNoZWNrc1xuICogXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFBlcmZvcm1zIGVxdWFsaXR5IGJ5IGl0ZXJhdGluZyB0aHJvdWdoIGtleXMgb24gYW4gb2JqZWN0IGFuZCByZXR1cm5pbmcgZmFsc2VcbiAqIHdoZW4gYW55IGtleSBoYXMgdmFsdWVzIHdoaWNoIGFyZSBub3Qgc3RyaWN0bHkgZXF1YWwgYmV0d2VlbiB0aGUgYXJndW1lbnRzLlxuICogUmV0dXJucyB0cnVlIHdoZW4gdGhlIHZhbHVlcyBvZiBhbGwga2V5cyBhcmUgc3RyaWN0bHkgZXF1YWwuXG4gKi9cbmZ1bmN0aW9uIHNoYWxsb3dFcXVhbChvYmpBLCBvYmpCKSB7XG4gIGlmIChvYmpBID09PSBvYmpCKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBpZiAodHlwZW9mIG9iakEgIT09ICdvYmplY3QnIHx8IG9iakEgPT09IG51bGwgfHwgdHlwZW9mIG9iakIgIT09ICdvYmplY3QnIHx8IG9iakIgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICB2YXIga2V5c0EgPSBPYmplY3Qua2V5cyhvYmpBKTtcbiAgdmFyIGtleXNCID0gT2JqZWN0LmtleXMob2JqQik7XG5cbiAgaWYgKGtleXNBLmxlbmd0aCAhPT0ga2V5c0IubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gVGVzdCBmb3IgQSdzIGtleXMgZGlmZmVyZW50IGZyb20gQi5cbiAgdmFyIGJIYXNPd25Qcm9wZXJ0eSA9IGhhc093blByb3BlcnR5LmJpbmQob2JqQik7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwga2V5c0EubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoIWJIYXNPd25Qcm9wZXJ0eShrZXlzQVtpXSkgfHwgb2JqQVtrZXlzQVtpXV0gIT09IG9iakJba2V5c0FbaV1dKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2hhbGxvd0VxdWFsOyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSB0b0FycmF5XG4gKiBAdHlwZWNoZWNrc1xuICovXG5cbid1c2Ugc3RyaWN0JztcblxudmFyIGludmFyaWFudCA9IHJlcXVpcmUoJy4vaW52YXJpYW50Jyk7XG5cbi8qKlxuICogQ29udmVydCBhcnJheS1saWtlIG9iamVjdHMgdG8gYXJyYXlzLlxuICpcbiAqIFRoaXMgQVBJIGFzc3VtZXMgdGhlIGNhbGxlciBrbm93cyB0aGUgY29udGVudHMgb2YgdGhlIGRhdGEgdHlwZS4gRm9yIGxlc3NcbiAqIHdlbGwgZGVmaW5lZCBpbnB1dHMgdXNlIGNyZWF0ZUFycmF5RnJvbU1peGVkLlxuICpcbiAqIEBwYXJhbSB7b2JqZWN0fGZ1bmN0aW9ufGZpbGVsaXN0fSBvYmpcbiAqIEByZXR1cm4ge2FycmF5fVxuICovXG5mdW5jdGlvbiB0b0FycmF5KG9iaikge1xuICB2YXIgbGVuZ3RoID0gb2JqLmxlbmd0aDtcblxuICAvLyBTb21lIGJyb3dzZSBidWlsdGluIG9iamVjdHMgY2FuIHJlcG9ydCB0eXBlb2YgJ2Z1bmN0aW9uJyAoZS5nLiBOb2RlTGlzdCBpblxuICAvLyBvbGQgdmVyc2lvbnMgb2YgU2FmYXJpKS5cbiAgISghQXJyYXkuaXNBcnJheShvYmopICYmICh0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyB8fCB0eXBlb2Ygb2JqID09PSAnZnVuY3Rpb24nKSkgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndG9BcnJheTogQXJyYXktbGlrZSBvYmplY3QgZXhwZWN0ZWQnKSA6IGludmFyaWFudChmYWxzZSkgOiB1bmRlZmluZWQ7XG5cbiAgISh0eXBlb2YgbGVuZ3RoID09PSAnbnVtYmVyJykgPyBcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nID8gaW52YXJpYW50KGZhbHNlLCAndG9BcnJheTogT2JqZWN0IG5lZWRzIGEgbGVuZ3RoIHByb3BlcnR5JykgOiBpbnZhcmlhbnQoZmFsc2UpIDogdW5kZWZpbmVkO1xuXG4gICEobGVuZ3RoID09PSAwIHx8IGxlbmd0aCAtIDEgaW4gb2JqKSA/IFwicHJvZHVjdGlvblwiICE9PSAncHJvZHVjdGlvbicgPyBpbnZhcmlhbnQoZmFsc2UsICd0b0FycmF5OiBPYmplY3Qgc2hvdWxkIGhhdmUga2V5cyBmb3IgaW5kaWNlcycpIDogaW52YXJpYW50KGZhbHNlKSA6IHVuZGVmaW5lZDtcblxuICAvLyBPbGQgSUUgZG9lc24ndCBnaXZlIGNvbGxlY3Rpb25zIGFjY2VzcyB0byBoYXNPd25Qcm9wZXJ0eS4gQXNzdW1lIGlucHV0c1xuICAvLyB3aXRob3V0IG1ldGhvZCB3aWxsIHRocm93IGR1cmluZyB0aGUgc2xpY2UgY2FsbCBhbmQgc2tpcCBzdHJhaWdodCB0byB0aGVcbiAgLy8gZmFsbGJhY2suXG4gIGlmIChvYmouaGFzT3duUHJvcGVydHkpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG9iaik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gSUUgPCA5IGRvZXMgbm90IHN1cHBvcnQgQXJyYXkjc2xpY2Ugb24gY29sbGVjdGlvbnMgb2JqZWN0c1xuICAgIH1cbiAgfVxuXG4gIC8vIEZhbGwgYmFjayB0byBjb3B5aW5nIGtleSBieSBrZXkuIFRoaXMgYXNzdW1lcyBhbGwga2V5cyBoYXZlIGEgdmFsdWUsXG4gIC8vIHNvIHdpbGwgbm90IHByZXNlcnZlIHNwYXJzZWx5IHBvcHVsYXRlZCBpbnB1dHMuXG4gIHZhciByZXQgPSBBcnJheShsZW5ndGgpO1xuICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgbGVuZ3RoOyBpaSsrKSB7XG4gICAgcmV0W2lpXSA9IG9ialtpaV07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0b0FycmF5OyIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTQtMjAxNSwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICpcbiAqIEBwcm92aWRlc01vZHVsZSB3YXJuaW5nXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG52YXIgZW1wdHlGdW5jdGlvbiA9IHJlcXVpcmUoJy4vZW1wdHlGdW5jdGlvbicpO1xuXG4vKipcbiAqIFNpbWlsYXIgdG8gaW52YXJpYW50IGJ1dCBvbmx5IGxvZ3MgYSB3YXJuaW5nIGlmIHRoZSBjb25kaXRpb24gaXMgbm90IG1ldC5cbiAqIFRoaXMgY2FuIGJlIHVzZWQgdG8gbG9nIGlzc3VlcyBpbiBkZXZlbG9wbWVudCBlbnZpcm9ubWVudHMgaW4gY3JpdGljYWxcbiAqIHBhdGhzLiBSZW1vdmluZyB0aGUgbG9nZ2luZyBjb2RlIGZvciBwcm9kdWN0aW9uIGVudmlyb25tZW50cyB3aWxsIGtlZXAgdGhlXG4gKiBzYW1lIGxvZ2ljIGFuZCBmb2xsb3cgdGhlIHNhbWUgY29kZSBwYXRocy5cbiAqL1xuXG52YXIgd2FybmluZyA9IGVtcHR5RnVuY3Rpb247XG5cbmlmIChcInByb2R1Y3Rpb25cIiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHdhcm5pbmcgPSBmdW5jdGlvbiAoY29uZGl0aW9uLCBmb3JtYXQpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4gPiAyID8gX2xlbiAtIDIgOiAwKSwgX2tleSA9IDI7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgIGFyZ3NbX2tleSAtIDJdID0gYXJndW1lbnRzW19rZXldO1xuICAgIH1cblxuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdgd2FybmluZyhjb25kaXRpb24sIGZvcm1hdCwgLi4uYXJncylgIHJlcXVpcmVzIGEgd2FybmluZyAnICsgJ21lc3NhZ2UgYXJndW1lbnQnKTtcbiAgICB9XG5cbiAgICBpZiAoZm9ybWF0LmluZGV4T2YoJ0ZhaWxlZCBDb21wb3NpdGUgcHJvcFR5cGU6ICcpID09PSAwKSB7XG4gICAgICByZXR1cm47IC8vIElnbm9yZSBDb21wb3NpdGVDb21wb25lbnQgcHJvcHR5cGUgY2hlY2suXG4gICAgfVxuXG4gICAgaWYgKCFjb25kaXRpb24pIHtcbiAgICAgIHZhciBhcmdJbmRleCA9IDA7XG4gICAgICB2YXIgbWVzc2FnZSA9ICdXYXJuaW5nOiAnICsgZm9ybWF0LnJlcGxhY2UoLyVzL2csIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGFyZ3NbYXJnSW5kZXgrK107XG4gICAgICB9KTtcbiAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihtZXNzYWdlKTtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIC0tLSBXZWxjb21lIHRvIGRlYnVnZ2luZyBSZWFjdCAtLS1cbiAgICAgICAgLy8gVGhpcyBlcnJvciB3YXMgdGhyb3duIGFzIGEgY29udmVuaWVuY2Ugc28gdGhhdCB5b3UgY2FuIHVzZSB0aGlzIHN0YWNrXG4gICAgICAgIC8vIHRvIGZpbmQgdGhlIGNhbGxzaXRlIHRoYXQgY2F1c2VkIHRoaXMgd2FybmluZyB0byBmaXJlLlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IobWVzc2FnZSk7XG4gICAgICB9IGNhdGNoICh4KSB7fVxuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB3YXJuaW5nOyIsIid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2xpYi9SZWFjdCcpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBzaGFsbG93XG5cbmZ1bmN0aW9uIHNoYWxsb3coYSwgYiwgY29tcGFyZSkge1xuICB2YXIgYUlzQXJyYXkgPSBBcnJheS5pc0FycmF5KGEpXG4gIHZhciBiSXNBcnJheSA9IEFycmF5LmlzQXJyYXkoYilcblxuICBpZiAoYUlzQXJyYXkgIT09IGJJc0FycmF5KSByZXR1cm4gZmFsc2VcblxuICB2YXIgYVR5cGVvZiA9IHR5cGVvZiBhXG4gIHZhciBiVHlwZW9mID0gdHlwZW9mIGJcblxuICBpZiAoYVR5cGVvZiAhPT0gYlR5cGVvZikgcmV0dXJuIGZhbHNlXG4gIGlmIChmbGF0KGFUeXBlb2YpKSByZXR1cm4gY29tcGFyZVxuICAgID8gY29tcGFyZShhLCBiKVxuICAgIDogYSA9PT0gYlxuXG4gIHJldHVybiBhSXNBcnJheVxuICAgID8gc2hhbGxvd0FycmF5KGEsIGIsIGNvbXBhcmUpXG4gICAgOiBzaGFsbG93T2JqZWN0KGEsIGIsIGNvbXBhcmUpXG59XG5cbmZ1bmN0aW9uIHNoYWxsb3dBcnJheShhLCBiLCBjb21wYXJlKSB7XG4gIHZhciBsID0gYS5sZW5ndGhcbiAgaWYgKGwgIT09IGIubGVuZ3RoKSByZXR1cm4gZmFsc2VcblxuICBpZiAoY29tcGFyZSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbDsgaSsrKVxuICAgICAgaWYgKCFjb21wYXJlKGFbaV0sIGJbaV0pKSByZXR1cm4gZmFsc2VcbiAgfSBlbHNlIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgaWYgKGFbaV0gIT09IGJbaV0pIHJldHVybiBmYWxzZVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlXG59XG5cbmZ1bmN0aW9uIHNoYWxsb3dPYmplY3QoYSwgYiwgY29tcGFyZSkge1xuICB2YXIga2EgPSAwXG4gIHZhciBrYiA9IDBcblxuICBpZiAoY29tcGFyZSkge1xuICAgIGZvciAodmFyIGtleSBpbiBhKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGEuaGFzT3duUHJvcGVydHkoa2V5KSAmJlxuICAgICAgICAhY29tcGFyZShhW2tleV0sIGJba2V5XSlcbiAgICAgICkgcmV0dXJuIGZhbHNlXG5cbiAgICAgIGthKytcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZm9yICh2YXIga2V5IGluIGEpIHtcbiAgICAgIGlmIChcbiAgICAgICAgYS5oYXNPd25Qcm9wZXJ0eShrZXkpICYmXG4gICAgICAgIGFba2V5XSAhPT0gYltrZXldXG4gICAgICApIHJldHVybiBmYWxzZVxuXG4gICAgICBrYSsrXG4gICAgfVxuICB9XG5cbiAgZm9yICh2YXIga2V5IGluIGIpIHtcbiAgICBpZiAoYi5oYXNPd25Qcm9wZXJ0eShrZXkpKSBrYisrXG4gIH1cblxuICByZXR1cm4ga2EgPT09IGtiXG59XG5cbmZ1bmN0aW9uIGZsYXQodHlwZSkge1xuICByZXR1cm4gKFxuICAgIHR5cGUgIT09ICdmdW5jdGlvbicgJiZcbiAgICB0eXBlICE9PSAnb2JqZWN0J1xuICApXG59XG4iLCIvLyAgICAgVW5kZXJzY29yZS5qcyAxLjguM1xuLy8gICAgIGh0dHA6Ly91bmRlcnNjb3JlanMub3JnXG4vLyAgICAgKGMpIDIwMDktMjAxNSBKZXJlbXkgQXNoa2VuYXMsIERvY3VtZW50Q2xvdWQgYW5kIEludmVzdGlnYXRpdmUgUmVwb3J0ZXJzICYgRWRpdG9yc1xuLy8gICAgIFVuZGVyc2NvcmUgbWF5IGJlIGZyZWVseSBkaXN0cmlidXRlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UuXG5cbihmdW5jdGlvbigpIHtcblxuICAvLyBCYXNlbGluZSBzZXR1cFxuICAvLyAtLS0tLS0tLS0tLS0tLVxuXG4gIC8vIEVzdGFibGlzaCB0aGUgcm9vdCBvYmplY3QsIGB3aW5kb3dgIGluIHRoZSBicm93c2VyLCBvciBgZXhwb3J0c2Agb24gdGhlIHNlcnZlci5cbiAgdmFyIHJvb3QgPSB0aGlzO1xuXG4gIC8vIFNhdmUgdGhlIHByZXZpb3VzIHZhbHVlIG9mIHRoZSBgX2AgdmFyaWFibGUuXG4gIHZhciBwcmV2aW91c1VuZGVyc2NvcmUgPSByb290Ll87XG5cbiAgLy8gU2F2ZSBieXRlcyBpbiB0aGUgbWluaWZpZWQgKGJ1dCBub3QgZ3ppcHBlZCkgdmVyc2lvbjpcbiAgdmFyIEFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGUsIE9ialByb3RvID0gT2JqZWN0LnByb3RvdHlwZSwgRnVuY1Byb3RvID0gRnVuY3Rpb24ucHJvdG90eXBlO1xuXG4gIC8vIENyZWF0ZSBxdWljayByZWZlcmVuY2UgdmFyaWFibGVzIGZvciBzcGVlZCBhY2Nlc3MgdG8gY29yZSBwcm90b3R5cGVzLlxuICB2YXJcbiAgICBwdXNoICAgICAgICAgICAgID0gQXJyYXlQcm90by5wdXNoLFxuICAgIHNsaWNlICAgICAgICAgICAgPSBBcnJheVByb3RvLnNsaWNlLFxuICAgIHRvU3RyaW5nICAgICAgICAgPSBPYmpQcm90by50b1N0cmluZyxcbiAgICBoYXNPd25Qcm9wZXJ0eSAgID0gT2JqUHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbiAgLy8gQWxsICoqRUNNQVNjcmlwdCA1KiogbmF0aXZlIGZ1bmN0aW9uIGltcGxlbWVudGF0aW9ucyB0aGF0IHdlIGhvcGUgdG8gdXNlXG4gIC8vIGFyZSBkZWNsYXJlZCBoZXJlLlxuICB2YXJcbiAgICBuYXRpdmVJc0FycmF5ICAgICAgPSBBcnJheS5pc0FycmF5LFxuICAgIG5hdGl2ZUtleXMgICAgICAgICA9IE9iamVjdC5rZXlzLFxuICAgIG5hdGl2ZUJpbmQgICAgICAgICA9IEZ1bmNQcm90by5iaW5kLFxuICAgIG5hdGl2ZUNyZWF0ZSAgICAgICA9IE9iamVjdC5jcmVhdGU7XG5cbiAgLy8gTmFrZWQgZnVuY3Rpb24gcmVmZXJlbmNlIGZvciBzdXJyb2dhdGUtcHJvdG90eXBlLXN3YXBwaW5nLlxuICB2YXIgQ3RvciA9IGZ1bmN0aW9uKCl7fTtcblxuICAvLyBDcmVhdGUgYSBzYWZlIHJlZmVyZW5jZSB0byB0aGUgVW5kZXJzY29yZSBvYmplY3QgZm9yIHVzZSBiZWxvdy5cbiAgdmFyIF8gPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAob2JqIGluc3RhbmNlb2YgXykgcmV0dXJuIG9iajtcbiAgICBpZiAoISh0aGlzIGluc3RhbmNlb2YgXykpIHJldHVybiBuZXcgXyhvYmopO1xuICAgIHRoaXMuX3dyYXBwZWQgPSBvYmo7XG4gIH07XG5cbiAgLy8gRXhwb3J0IHRoZSBVbmRlcnNjb3JlIG9iamVjdCBmb3IgKipOb2RlLmpzKiosIHdpdGhcbiAgLy8gYmFja3dhcmRzLWNvbXBhdGliaWxpdHkgZm9yIHRoZSBvbGQgYHJlcXVpcmUoKWAgQVBJLiBJZiB3ZSdyZSBpblxuICAvLyB0aGUgYnJvd3NlciwgYWRkIGBfYCBhcyBhIGdsb2JhbCBvYmplY3QuXG4gIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF87XG4gICAgfVxuICAgIGV4cG9ydHMuXyA9IF87XG4gIH0gZWxzZSB7XG4gICAgcm9vdC5fID0gXztcbiAgfVxuXG4gIC8vIEN1cnJlbnQgdmVyc2lvbi5cbiAgXy5WRVJTSU9OID0gJzEuOC4zJztcblxuICAvLyBJbnRlcm5hbCBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gZWZmaWNpZW50IChmb3IgY3VycmVudCBlbmdpbmVzKSB2ZXJzaW9uXG4gIC8vIG9mIHRoZSBwYXNzZWQtaW4gY2FsbGJhY2ssIHRvIGJlIHJlcGVhdGVkbHkgYXBwbGllZCBpbiBvdGhlciBVbmRlcnNjb3JlXG4gIC8vIGZ1bmN0aW9ucy5cbiAgdmFyIG9wdGltaXplQ2IgPSBmdW5jdGlvbihmdW5jLCBjb250ZXh0LCBhcmdDb3VudCkge1xuICAgIGlmIChjb250ZXh0ID09PSB2b2lkIDApIHJldHVybiBmdW5jO1xuICAgIHN3aXRjaCAoYXJnQ291bnQgPT0gbnVsbCA/IDMgOiBhcmdDb3VudCkge1xuICAgICAgY2FzZSAxOiByZXR1cm4gZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSk7XG4gICAgICB9O1xuICAgICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24odmFsdWUsIG90aGVyKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmNhbGwoY29udGV4dCwgdmFsdWUsIG90aGVyKTtcbiAgICAgIH07XG4gICAgICBjYXNlIDM6IHJldHVybiBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pO1xuICAgICAgfTtcbiAgICAgIGNhc2UgNDogcmV0dXJuIGZ1bmN0aW9uKGFjY3VtdWxhdG9yLCB2YWx1ZSwgaW5kZXgsIGNvbGxlY3Rpb24pIHtcbiAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbChjb250ZXh0LCBhY2N1bXVsYXRvciwgdmFsdWUsIGluZGV4LCBjb2xsZWN0aW9uKTtcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfTtcblxuICAvLyBBIG1vc3RseS1pbnRlcm5hbCBmdW5jdGlvbiB0byBnZW5lcmF0ZSBjYWxsYmFja3MgdGhhdCBjYW4gYmUgYXBwbGllZFxuICAvLyB0byBlYWNoIGVsZW1lbnQgaW4gYSBjb2xsZWN0aW9uLCByZXR1cm5pbmcgdGhlIGRlc2lyZWQgcmVzdWx0IOKAlCBlaXRoZXJcbiAgLy8gaWRlbnRpdHksIGFuIGFyYml0cmFyeSBjYWxsYmFjaywgYSBwcm9wZXJ0eSBtYXRjaGVyLCBvciBhIHByb3BlcnR5IGFjY2Vzc29yLlxuICB2YXIgY2IgPSBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCwgYXJnQ291bnQpIHtcbiAgICBpZiAodmFsdWUgPT0gbnVsbCkgcmV0dXJuIF8uaWRlbnRpdHk7XG4gICAgaWYgKF8uaXNGdW5jdGlvbih2YWx1ZSkpIHJldHVybiBvcHRpbWl6ZUNiKHZhbHVlLCBjb250ZXh0LCBhcmdDb3VudCk7XG4gICAgaWYgKF8uaXNPYmplY3QodmFsdWUpKSByZXR1cm4gXy5tYXRjaGVyKHZhbHVlKTtcbiAgICByZXR1cm4gXy5wcm9wZXJ0eSh2YWx1ZSk7XG4gIH07XG4gIF8uaXRlcmF0ZWUgPSBmdW5jdGlvbih2YWx1ZSwgY29udGV4dCkge1xuICAgIHJldHVybiBjYih2YWx1ZSwgY29udGV4dCwgSW5maW5pdHkpO1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIGZvciBjcmVhdGluZyBhc3NpZ25lciBmdW5jdGlvbnMuXG4gIHZhciBjcmVhdGVBc3NpZ25lciA9IGZ1bmN0aW9uKGtleXNGdW5jLCB1bmRlZmluZWRPbmx5KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaikge1xuICAgICAgdmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgICBpZiAobGVuZ3RoIDwgMiB8fCBvYmogPT0gbnVsbCkgcmV0dXJuIG9iajtcbiAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpbmRleF0sXG4gICAgICAgICAgICBrZXlzID0ga2V5c0Z1bmMoc291cmNlKSxcbiAgICAgICAgICAgIGwgPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgICBpZiAoIXVuZGVmaW5lZE9ubHkgfHwgb2JqW2tleV0gPT09IHZvaWQgMCkgb2JqW2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG9iajtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIGZvciBjcmVhdGluZyBhIG5ldyBvYmplY3QgdGhhdCBpbmhlcml0cyBmcm9tIGFub3RoZXIuXG4gIHZhciBiYXNlQ3JlYXRlID0gZnVuY3Rpb24ocHJvdG90eXBlKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KHByb3RvdHlwZSkpIHJldHVybiB7fTtcbiAgICBpZiAobmF0aXZlQ3JlYXRlKSByZXR1cm4gbmF0aXZlQ3JlYXRlKHByb3RvdHlwZSk7XG4gICAgQ3Rvci5wcm90b3R5cGUgPSBwcm90b3R5cGU7XG4gICAgdmFyIHJlc3VsdCA9IG5ldyBDdG9yO1xuICAgIEN0b3IucHJvdG90eXBlID0gbnVsbDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIHZhciBwcm9wZXJ0eSA9IGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBvYmogPT0gbnVsbCA/IHZvaWQgMCA6IG9ialtrZXldO1xuICAgIH07XG4gIH07XG5cbiAgLy8gSGVscGVyIGZvciBjb2xsZWN0aW9uIG1ldGhvZHMgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBjb2xsZWN0aW9uXG4gIC8vIHNob3VsZCBiZSBpdGVyYXRlZCBhcyBhbiBhcnJheSBvciBhcyBhbiBvYmplY3RcbiAgLy8gUmVsYXRlZDogaHR0cDovL3Blb3BsZS5tb3ppbGxhLm9yZy9+am9yZW5kb3JmZi9lczYtZHJhZnQuaHRtbCNzZWMtdG9sZW5ndGhcbiAgLy8gQXZvaWRzIGEgdmVyeSBuYXN0eSBpT1MgOCBKSVQgYnVnIG9uIEFSTS02NC4gIzIwOTRcbiAgdmFyIE1BWF9BUlJBWV9JTkRFWCA9IE1hdGgucG93KDIsIDUzKSAtIDE7XG4gIHZhciBnZXRMZW5ndGggPSBwcm9wZXJ0eSgnbGVuZ3RoJyk7XG4gIHZhciBpc0FycmF5TGlrZSA9IGZ1bmN0aW9uKGNvbGxlY3Rpb24pIHtcbiAgICB2YXIgbGVuZ3RoID0gZ2V0TGVuZ3RoKGNvbGxlY3Rpb24pO1xuICAgIHJldHVybiB0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInICYmIGxlbmd0aCA+PSAwICYmIGxlbmd0aCA8PSBNQVhfQVJSQVlfSU5ERVg7XG4gIH07XG5cbiAgLy8gQ29sbGVjdGlvbiBGdW5jdGlvbnNcbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAvLyBUaGUgY29ybmVyc3RvbmUsIGFuIGBlYWNoYCBpbXBsZW1lbnRhdGlvbiwgYWthIGBmb3JFYWNoYC5cbiAgLy8gSGFuZGxlcyByYXcgb2JqZWN0cyBpbiBhZGRpdGlvbiB0byBhcnJheS1saWtlcy4gVHJlYXRzIGFsbFxuICAvLyBzcGFyc2UgYXJyYXktbGlrZXMgYXMgaWYgdGhleSB3ZXJlIGRlbnNlLlxuICBfLmVhY2ggPSBfLmZvckVhY2ggPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIgaSwgbGVuZ3RoO1xuICAgIGlmIChpc0FycmF5TGlrZShvYmopKSB7XG4gICAgICBmb3IgKGkgPSAwLCBsZW5ndGggPSBvYmoubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaXRlcmF0ZWUob2JqW2ldLCBpLCBvYmopO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBpdGVyYXRlZShvYmpba2V5c1tpXV0sIGtleXNbaV0sIG9iaik7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSByZXN1bHRzIG9mIGFwcGx5aW5nIHRoZSBpdGVyYXRlZSB0byBlYWNoIGVsZW1lbnQuXG4gIF8ubWFwID0gXy5jb2xsZWN0ID0gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoLFxuICAgICAgICByZXN1bHRzID0gQXJyYXkobGVuZ3RoKTtcbiAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuICAgICAgcmVzdWx0c1tpbmRleF0gPSBpdGVyYXRlZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaik7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHRzO1xuICB9O1xuXG4gIC8vIENyZWF0ZSBhIHJlZHVjaW5nIGZ1bmN0aW9uIGl0ZXJhdGluZyBsZWZ0IG9yIHJpZ2h0LlxuICBmdW5jdGlvbiBjcmVhdGVSZWR1Y2UoZGlyKSB7XG4gICAgLy8gT3B0aW1pemVkIGl0ZXJhdG9yIGZ1bmN0aW9uIGFzIHVzaW5nIGFyZ3VtZW50cy5sZW5ndGhcbiAgICAvLyBpbiB0aGUgbWFpbiBmdW5jdGlvbiB3aWxsIGRlb3B0aW1pemUgdGhlLCBzZWUgIzE5OTEuXG4gICAgZnVuY3Rpb24gaXRlcmF0b3Iob2JqLCBpdGVyYXRlZSwgbWVtbywga2V5cywgaW5kZXgsIGxlbmd0aCkge1xuICAgICAgZm9yICg7IGluZGV4ID49IDAgJiYgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IGRpcikge1xuICAgICAgICB2YXIgY3VycmVudEtleSA9IGtleXMgPyBrZXlzW2luZGV4XSA6IGluZGV4O1xuICAgICAgICBtZW1vID0gaXRlcmF0ZWUobWVtbywgb2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG1lbW87XG4gICAgfVxuXG4gICAgcmV0dXJuIGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIG1lbW8sIGNvbnRleHQpIHtcbiAgICAgIGl0ZXJhdGVlID0gb3B0aW1pemVDYihpdGVyYXRlZSwgY29udGV4dCwgNCk7XG4gICAgICB2YXIga2V5cyA9ICFpc0FycmF5TGlrZShvYmopICYmIF8ua2V5cyhvYmopLFxuICAgICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoLFxuICAgICAgICAgIGluZGV4ID0gZGlyID4gMCA/IDAgOiBsZW5ndGggLSAxO1xuICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBpbml0aWFsIHZhbHVlIGlmIG5vbmUgaXMgcHJvdmlkZWQuXG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgbWVtbyA9IG9ialtrZXlzID8ga2V5c1tpbmRleF0gOiBpbmRleF07XG4gICAgICAgIGluZGV4ICs9IGRpcjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpdGVyYXRvcihvYmosIGl0ZXJhdGVlLCBtZW1vLCBrZXlzLCBpbmRleCwgbGVuZ3RoKTtcbiAgICB9O1xuICB9XG5cbiAgLy8gKipSZWR1Y2UqKiBidWlsZHMgdXAgYSBzaW5nbGUgcmVzdWx0IGZyb20gYSBsaXN0IG9mIHZhbHVlcywgYWthIGBpbmplY3RgLFxuICAvLyBvciBgZm9sZGxgLlxuICBfLnJlZHVjZSA9IF8uZm9sZGwgPSBfLmluamVjdCA9IGNyZWF0ZVJlZHVjZSgxKTtcblxuICAvLyBUaGUgcmlnaHQtYXNzb2NpYXRpdmUgdmVyc2lvbiBvZiByZWR1Y2UsIGFsc28ga25vd24gYXMgYGZvbGRyYC5cbiAgXy5yZWR1Y2VSaWdodCA9IF8uZm9sZHIgPSBjcmVhdGVSZWR1Y2UoLTEpO1xuXG4gIC8vIFJldHVybiB0aGUgZmlyc3QgdmFsdWUgd2hpY2ggcGFzc2VzIGEgdHJ1dGggdGVzdC4gQWxpYXNlZCBhcyBgZGV0ZWN0YC5cbiAgXy5maW5kID0gXy5kZXRlY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHZhciBrZXk7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHtcbiAgICAgIGtleSA9IF8uZmluZEluZGV4KG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB9IGVsc2Uge1xuICAgICAga2V5ID0gXy5maW5kS2V5KG9iaiwgcHJlZGljYXRlLCBjb250ZXh0KTtcbiAgICB9XG4gICAgaWYgKGtleSAhPT0gdm9pZCAwICYmIGtleSAhPT0gLTEpIHJldHVybiBvYmpba2V5XTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYWxsIHRoZSBlbGVtZW50cyB0aGF0IHBhc3MgYSB0cnV0aCB0ZXN0LlxuICAvLyBBbGlhc2VkIGFzIGBzZWxlY3RgLlxuICBfLmZpbHRlciA9IF8uc2VsZWN0ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBpbmRleCwgbGlzdCkpIHJlc3VsdHMucHVzaCh2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgZm9yIHdoaWNoIGEgdHJ1dGggdGVzdCBmYWlscy5cbiAgXy5yZWplY3QgPSBmdW5jdGlvbihvYmosIHByZWRpY2F0ZSwgY29udGV4dCkge1xuICAgIHJldHVybiBfLmZpbHRlcihvYmosIF8ubmVnYXRlKGNiKHByZWRpY2F0ZSkpLCBjb250ZXh0KTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgd2hldGhlciBhbGwgb2YgdGhlIGVsZW1lbnRzIG1hdGNoIGEgdHJ1dGggdGVzdC5cbiAgLy8gQWxpYXNlZCBhcyBgYWxsYC5cbiAgXy5ldmVyeSA9IF8uYWxsID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICBpZiAoIXByZWRpY2F0ZShvYmpbY3VycmVudEtleV0sIGN1cnJlbnRLZXksIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cbiAgLy8gRGV0ZXJtaW5lIGlmIGF0IGxlYXN0IG9uZSBlbGVtZW50IGluIHRoZSBvYmplY3QgbWF0Y2hlcyBhIHRydXRoIHRlc3QuXG4gIC8vIEFsaWFzZWQgYXMgYGFueWAuXG4gIF8uc29tZSA9IF8uYW55ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gIWlzQXJyYXlMaWtlKG9iaikgJiYgXy5rZXlzKG9iaiksXG4gICAgICAgIGxlbmd0aCA9IChrZXlzIHx8IG9iaikubGVuZ3RoO1xuICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgIHZhciBjdXJyZW50S2V5ID0ga2V5cyA/IGtleXNbaW5kZXhdIDogaW5kZXg7XG4gICAgICBpZiAocHJlZGljYXRlKG9ialtjdXJyZW50S2V5XSwgY3VycmVudEtleSwgb2JqKSkgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvLyBEZXRlcm1pbmUgaWYgdGhlIGFycmF5IG9yIG9iamVjdCBjb250YWlucyBhIGdpdmVuIGl0ZW0gKHVzaW5nIGA9PT1gKS5cbiAgLy8gQWxpYXNlZCBhcyBgaW5jbHVkZXNgIGFuZCBgaW5jbHVkZWAuXG4gIF8uY29udGFpbnMgPSBfLmluY2x1ZGVzID0gXy5pbmNsdWRlID0gZnVuY3Rpb24ob2JqLCBpdGVtLCBmcm9tSW5kZXgsIGd1YXJkKSB7XG4gICAgaWYgKCFpc0FycmF5TGlrZShvYmopKSBvYmogPSBfLnZhbHVlcyhvYmopO1xuICAgIGlmICh0eXBlb2YgZnJvbUluZGV4ICE9ICdudW1iZXInIHx8IGd1YXJkKSBmcm9tSW5kZXggPSAwO1xuICAgIHJldHVybiBfLmluZGV4T2Yob2JqLCBpdGVtLCBmcm9tSW5kZXgpID49IDA7XG4gIH07XG5cbiAgLy8gSW52b2tlIGEgbWV0aG9kICh3aXRoIGFyZ3VtZW50cykgb24gZXZlcnkgaXRlbSBpbiBhIGNvbGxlY3Rpb24uXG4gIF8uaW52b2tlID0gZnVuY3Rpb24ob2JqLCBtZXRob2QpIHtcbiAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICB2YXIgaXNGdW5jID0gXy5pc0Z1bmN0aW9uKG1ldGhvZCk7XG4gICAgcmV0dXJuIF8ubWFwKG9iaiwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgIHZhciBmdW5jID0gaXNGdW5jID8gbWV0aG9kIDogdmFsdWVbbWV0aG9kXTtcbiAgICAgIHJldHVybiBmdW5jID09IG51bGwgPyBmdW5jIDogZnVuYy5hcHBseSh2YWx1ZSwgYXJncyk7XG4gICAgfSk7XG4gIH07XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgbWFwYDogZmV0Y2hpbmcgYSBwcm9wZXJ0eS5cbiAgXy5wbHVjayA9IGZ1bmN0aW9uKG9iaiwga2V5KSB7XG4gICAgcmV0dXJuIF8ubWFwKG9iaiwgXy5wcm9wZXJ0eShrZXkpKTtcbiAgfTtcblxuICAvLyBDb252ZW5pZW5jZSB2ZXJzaW9uIG9mIGEgY29tbW9uIHVzZSBjYXNlIG9mIGBmaWx0ZXJgOiBzZWxlY3Rpbmcgb25seSBvYmplY3RzXG4gIC8vIGNvbnRhaW5pbmcgc3BlY2lmaWMgYGtleTp2YWx1ZWAgcGFpcnMuXG4gIF8ud2hlcmUgPSBmdW5jdGlvbihvYmosIGF0dHJzKSB7XG4gICAgcmV0dXJuIF8uZmlsdGVyKG9iaiwgXy5tYXRjaGVyKGF0dHJzKSk7XG4gIH07XG5cbiAgLy8gQ29udmVuaWVuY2UgdmVyc2lvbiBvZiBhIGNvbW1vbiB1c2UgY2FzZSBvZiBgZmluZGA6IGdldHRpbmcgdGhlIGZpcnN0IG9iamVjdFxuICAvLyBjb250YWluaW5nIHNwZWNpZmljIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLmZpbmRXaGVyZSA9IGZ1bmN0aW9uKG9iaiwgYXR0cnMpIHtcbiAgICByZXR1cm4gXy5maW5kKG9iaiwgXy5tYXRjaGVyKGF0dHJzKSk7XG4gIH07XG5cbiAgLy8gUmV0dXJuIHRoZSBtYXhpbXVtIGVsZW1lbnQgKG9yIGVsZW1lbnQtYmFzZWQgY29tcHV0YXRpb24pLlxuICBfLm1heCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0ID0gLUluZmluaXR5LCBsYXN0Q29tcHV0ZWQgPSAtSW5maW5pdHksXG4gICAgICAgIHZhbHVlLCBjb21wdXRlZDtcbiAgICBpZiAoaXRlcmF0ZWUgPT0gbnVsbCAmJiBvYmogIT0gbnVsbCkge1xuICAgICAgb2JqID0gaXNBcnJheUxpa2Uob2JqKSA/IG9iaiA6IF8udmFsdWVzKG9iaik7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gb2JqLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhbHVlID0gb2JqW2ldO1xuICAgICAgICBpZiAodmFsdWUgPiByZXN1bHQpIHtcbiAgICAgICAgICByZXN1bHQgPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICAgIF8uZWFjaChvYmosIGZ1bmN0aW9uKHZhbHVlLCBpbmRleCwgbGlzdCkge1xuICAgICAgICBjb21wdXRlZCA9IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgbGlzdCk7XG4gICAgICAgIGlmIChjb21wdXRlZCA+IGxhc3RDb21wdXRlZCB8fCBjb21wdXRlZCA9PT0gLUluZmluaXR5ICYmIHJlc3VsdCA9PT0gLUluZmluaXR5KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgbGFzdENvbXB1dGVkID0gY29tcHV0ZWQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgbWluaW11bSBlbGVtZW50IChvciBlbGVtZW50LWJhc2VkIGNvbXB1dGF0aW9uKS5cbiAgXy5taW4gPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgdmFyIHJlc3VsdCA9IEluZmluaXR5LCBsYXN0Q29tcHV0ZWQgPSBJbmZpbml0eSxcbiAgICAgICAgdmFsdWUsIGNvbXB1dGVkO1xuICAgIGlmIChpdGVyYXRlZSA9PSBudWxsICYmIG9iaiAhPSBudWxsKSB7XG4gICAgICBvYmogPSBpc0FycmF5TGlrZShvYmopID8gb2JqIDogXy52YWx1ZXMob2JqKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBvYmoubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFsdWUgPSBvYmpbaV07XG4gICAgICAgIGlmICh2YWx1ZSA8IHJlc3VsdCkge1xuICAgICAgICAgIHJlc3VsdCA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgICAgXy5lYWNoKG9iaiwgZnVuY3Rpb24odmFsdWUsIGluZGV4LCBsaXN0KSB7XG4gICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBsaXN0KTtcbiAgICAgICAgaWYgKGNvbXB1dGVkIDwgbGFzdENvbXB1dGVkIHx8IGNvbXB1dGVkID09PSBJbmZpbml0eSAmJiByZXN1bHQgPT09IEluZmluaXR5KSB7XG4gICAgICAgICAgcmVzdWx0ID0gdmFsdWU7XG4gICAgICAgICAgbGFzdENvbXB1dGVkID0gY29tcHV0ZWQ7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIFNodWZmbGUgYSBjb2xsZWN0aW9uLCB1c2luZyB0aGUgbW9kZXJuIHZlcnNpb24gb2YgdGhlXG4gIC8vIFtGaXNoZXItWWF0ZXMgc2h1ZmZsZV0oaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9GaXNoZXLigJNZYXRlc19zaHVmZmxlKS5cbiAgXy5zaHVmZmxlID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHNldCA9IGlzQXJyYXlMaWtlKG9iaikgPyBvYmogOiBfLnZhbHVlcyhvYmopO1xuICAgIHZhciBsZW5ndGggPSBzZXQubGVuZ3RoO1xuICAgIHZhciBzaHVmZmxlZCA9IEFycmF5KGxlbmd0aCk7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwLCByYW5kOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgcmFuZCA9IF8ucmFuZG9tKDAsIGluZGV4KTtcbiAgICAgIGlmIChyYW5kICE9PSBpbmRleCkgc2h1ZmZsZWRbaW5kZXhdID0gc2h1ZmZsZWRbcmFuZF07XG4gICAgICBzaHVmZmxlZFtyYW5kXSA9IHNldFtpbmRleF07XG4gICAgfVxuICAgIHJldHVybiBzaHVmZmxlZDtcbiAgfTtcblxuICAvLyBTYW1wbGUgKipuKiogcmFuZG9tIHZhbHVlcyBmcm9tIGEgY29sbGVjdGlvbi5cbiAgLy8gSWYgKipuKiogaXMgbm90IHNwZWNpZmllZCwgcmV0dXJucyBhIHNpbmdsZSByYW5kb20gZWxlbWVudC5cbiAgLy8gVGhlIGludGVybmFsIGBndWFyZGAgYXJndW1lbnQgYWxsb3dzIGl0IHRvIHdvcmsgd2l0aCBgbWFwYC5cbiAgXy5zYW1wbGUgPSBmdW5jdGlvbihvYmosIG4sIGd1YXJkKSB7XG4gICAgaWYgKG4gPT0gbnVsbCB8fCBndWFyZCkge1xuICAgICAgaWYgKCFpc0FycmF5TGlrZShvYmopKSBvYmogPSBfLnZhbHVlcyhvYmopO1xuICAgICAgcmV0dXJuIG9ialtfLnJhbmRvbShvYmoubGVuZ3RoIC0gMSldO1xuICAgIH1cbiAgICByZXR1cm4gXy5zaHVmZmxlKG9iaikuc2xpY2UoMCwgTWF0aC5tYXgoMCwgbikpO1xuICB9O1xuXG4gIC8vIFNvcnQgdGhlIG9iamVjdCdzIHZhbHVlcyBieSBhIGNyaXRlcmlvbiBwcm9kdWNlZCBieSBhbiBpdGVyYXRlZS5cbiAgXy5zb3J0QnkgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgcmV0dXJuIF8ucGx1Y2soXy5tYXAob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgsIGxpc3QpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICBjcml0ZXJpYTogaXRlcmF0ZWUodmFsdWUsIGluZGV4LCBsaXN0KVxuICAgICAgfTtcbiAgICB9KS5zb3J0KGZ1bmN0aW9uKGxlZnQsIHJpZ2h0KSB7XG4gICAgICB2YXIgYSA9IGxlZnQuY3JpdGVyaWE7XG4gICAgICB2YXIgYiA9IHJpZ2h0LmNyaXRlcmlhO1xuICAgICAgaWYgKGEgIT09IGIpIHtcbiAgICAgICAgaWYgKGEgPiBiIHx8IGEgPT09IHZvaWQgMCkgcmV0dXJuIDE7XG4gICAgICAgIGlmIChhIDwgYiB8fCBiID09PSB2b2lkIDApIHJldHVybiAtMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBsZWZ0LmluZGV4IC0gcmlnaHQuaW5kZXg7XG4gICAgfSksICd2YWx1ZScpO1xuICB9O1xuXG4gIC8vIEFuIGludGVybmFsIGZ1bmN0aW9uIHVzZWQgZm9yIGFnZ3JlZ2F0ZSBcImdyb3VwIGJ5XCIgb3BlcmF0aW9ucy5cbiAgdmFyIGdyb3VwID0gZnVuY3Rpb24oYmVoYXZpb3IpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCk7XG4gICAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwgaW5kZXgpIHtcbiAgICAgICAgdmFyIGtleSA9IGl0ZXJhdGVlKHZhbHVlLCBpbmRleCwgb2JqKTtcbiAgICAgICAgYmVoYXZpb3IocmVzdWx0LCB2YWx1ZSwga2V5KTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9O1xuXG4gIC8vIEdyb3VwcyB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uLiBQYXNzIGVpdGhlciBhIHN0cmluZyBhdHRyaWJ1dGVcbiAgLy8gdG8gZ3JvdXAgYnksIG9yIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSBjcml0ZXJpb24uXG4gIF8uZ3JvdXBCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgIGlmIChfLmhhcyhyZXN1bHQsIGtleSkpIHJlc3VsdFtrZXldLnB1c2godmFsdWUpOyBlbHNlIHJlc3VsdFtrZXldID0gW3ZhbHVlXTtcbiAgfSk7XG5cbiAgLy8gSW5kZXhlcyB0aGUgb2JqZWN0J3MgdmFsdWVzIGJ5IGEgY3JpdGVyaW9uLCBzaW1pbGFyIHRvIGBncm91cEJ5YCwgYnV0IGZvclxuICAvLyB3aGVuIHlvdSBrbm93IHRoYXQgeW91ciBpbmRleCB2YWx1ZXMgd2lsbCBiZSB1bmlxdWUuXG4gIF8uaW5kZXhCeSA9IGdyb3VwKGZ1bmN0aW9uKHJlc3VsdCwgdmFsdWUsIGtleSkge1xuICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gIH0pO1xuXG4gIC8vIENvdW50cyBpbnN0YW5jZXMgb2YgYW4gb2JqZWN0IHRoYXQgZ3JvdXAgYnkgYSBjZXJ0YWluIGNyaXRlcmlvbi4gUGFzc1xuICAvLyBlaXRoZXIgYSBzdHJpbmcgYXR0cmlidXRlIHRvIGNvdW50IGJ5LCBvciBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGVcbiAgLy8gY3JpdGVyaW9uLlxuICBfLmNvdW50QnkgPSBncm91cChmdW5jdGlvbihyZXN1bHQsIHZhbHVlLCBrZXkpIHtcbiAgICBpZiAoXy5oYXMocmVzdWx0LCBrZXkpKSByZXN1bHRba2V5XSsrOyBlbHNlIHJlc3VsdFtrZXldID0gMTtcbiAgfSk7XG5cbiAgLy8gU2FmZWx5IGNyZWF0ZSBhIHJlYWwsIGxpdmUgYXJyYXkgZnJvbSBhbnl0aGluZyBpdGVyYWJsZS5cbiAgXy50b0FycmF5ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFvYmopIHJldHVybiBbXTtcbiAgICBpZiAoXy5pc0FycmF5KG9iaikpIHJldHVybiBzbGljZS5jYWxsKG9iaik7XG4gICAgaWYgKGlzQXJyYXlMaWtlKG9iaikpIHJldHVybiBfLm1hcChvYmosIF8uaWRlbnRpdHkpO1xuICAgIHJldHVybiBfLnZhbHVlcyhvYmopO1xuICB9O1xuXG4gIC8vIFJldHVybiB0aGUgbnVtYmVyIG9mIGVsZW1lbnRzIGluIGFuIG9iamVjdC5cbiAgXy5zaXplID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gMDtcbiAgICByZXR1cm4gaXNBcnJheUxpa2Uob2JqKSA/IG9iai5sZW5ndGggOiBfLmtleXMob2JqKS5sZW5ndGg7XG4gIH07XG5cbiAgLy8gU3BsaXQgYSBjb2xsZWN0aW9uIGludG8gdHdvIGFycmF5czogb25lIHdob3NlIGVsZW1lbnRzIGFsbCBzYXRpc2Z5IHRoZSBnaXZlblxuICAvLyBwcmVkaWNhdGUsIGFuZCBvbmUgd2hvc2UgZWxlbWVudHMgYWxsIGRvIG5vdCBzYXRpc2Z5IHRoZSBwcmVkaWNhdGUuXG4gIF8ucGFydGl0aW9uID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBwYXNzID0gW10sIGZhaWwgPSBbXTtcbiAgICBfLmVhY2gob2JqLCBmdW5jdGlvbih2YWx1ZSwga2V5LCBvYmopIHtcbiAgICAgIChwcmVkaWNhdGUodmFsdWUsIGtleSwgb2JqKSA/IHBhc3MgOiBmYWlsKS5wdXNoKHZhbHVlKTtcbiAgICB9KTtcbiAgICByZXR1cm4gW3Bhc3MsIGZhaWxdO1xuICB9O1xuXG4gIC8vIEFycmF5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS1cblxuICAvLyBHZXQgdGhlIGZpcnN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGZpcnN0IE5cbiAgLy8gdmFsdWVzIGluIHRoZSBhcnJheS4gQWxpYXNlZCBhcyBgaGVhZGAgYW5kIGB0YWtlYC4gVGhlICoqZ3VhcmQqKiBjaGVja1xuICAvLyBhbGxvd3MgaXQgdG8gd29yayB3aXRoIGBfLm1hcGAuXG4gIF8uZmlyc3QgPSBfLmhlYWQgPSBfLnRha2UgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcbiAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSByZXR1cm4gYXJyYXlbMF07XG4gICAgcmV0dXJuIF8uaW5pdGlhbChhcnJheSwgYXJyYXkubGVuZ3RoIC0gbik7XG4gIH07XG5cbiAgLy8gUmV0dXJucyBldmVyeXRoaW5nIGJ1dCB0aGUgbGFzdCBlbnRyeSBvZiB0aGUgYXJyYXkuIEVzcGVjaWFsbHkgdXNlZnVsIG9uXG4gIC8vIHRoZSBhcmd1bWVudHMgb2JqZWN0LiBQYXNzaW5nICoqbioqIHdpbGwgcmV0dXJuIGFsbCB0aGUgdmFsdWVzIGluXG4gIC8vIHRoZSBhcnJheSwgZXhjbHVkaW5nIHRoZSBsYXN0IE4uXG4gIF8uaW5pdGlhbCA9IGZ1bmN0aW9uKGFycmF5LCBuLCBndWFyZCkge1xuICAgIHJldHVybiBzbGljZS5jYWxsKGFycmF5LCAwLCBNYXRoLm1heCgwLCBhcnJheS5sZW5ndGggLSAobiA9PSBudWxsIHx8IGd1YXJkID8gMSA6IG4pKSk7XG4gIH07XG5cbiAgLy8gR2V0IHRoZSBsYXN0IGVsZW1lbnQgb2YgYW4gYXJyYXkuIFBhc3NpbmcgKipuKiogd2lsbCByZXR1cm4gdGhlIGxhc3QgTlxuICAvLyB2YWx1ZXMgaW4gdGhlIGFycmF5LlxuICBfLmxhc3QgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICBpZiAoYXJyYXkgPT0gbnVsbCkgcmV0dXJuIHZvaWQgMDtcbiAgICBpZiAobiA9PSBudWxsIHx8IGd1YXJkKSByZXR1cm4gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV07XG4gICAgcmV0dXJuIF8ucmVzdChhcnJheSwgTWF0aC5tYXgoMCwgYXJyYXkubGVuZ3RoIC0gbikpO1xuICB9O1xuXG4gIC8vIFJldHVybnMgZXZlcnl0aGluZyBidXQgdGhlIGZpcnN0IGVudHJ5IG9mIHRoZSBhcnJheS4gQWxpYXNlZCBhcyBgdGFpbGAgYW5kIGBkcm9wYC5cbiAgLy8gRXNwZWNpYWxseSB1c2VmdWwgb24gdGhlIGFyZ3VtZW50cyBvYmplY3QuIFBhc3NpbmcgYW4gKipuKiogd2lsbCByZXR1cm5cbiAgLy8gdGhlIHJlc3QgTiB2YWx1ZXMgaW4gdGhlIGFycmF5LlxuICBfLnJlc3QgPSBfLnRhaWwgPSBfLmRyb3AgPSBmdW5jdGlvbihhcnJheSwgbiwgZ3VhcmQpIHtcbiAgICByZXR1cm4gc2xpY2UuY2FsbChhcnJheSwgbiA9PSBudWxsIHx8IGd1YXJkID8gMSA6IG4pO1xuICB9O1xuXG4gIC8vIFRyaW0gb3V0IGFsbCBmYWxzeSB2YWx1ZXMgZnJvbSBhbiBhcnJheS5cbiAgXy5jb21wYWN0ID0gZnVuY3Rpb24oYXJyYXkpIHtcbiAgICByZXR1cm4gXy5maWx0ZXIoYXJyYXksIF8uaWRlbnRpdHkpO1xuICB9O1xuXG4gIC8vIEludGVybmFsIGltcGxlbWVudGF0aW9uIG9mIGEgcmVjdXJzaXZlIGBmbGF0dGVuYCBmdW5jdGlvbi5cbiAgdmFyIGZsYXR0ZW4gPSBmdW5jdGlvbihpbnB1dCwgc2hhbGxvdywgc3RyaWN0LCBzdGFydEluZGV4KSB7XG4gICAgdmFyIG91dHB1dCA9IFtdLCBpZHggPSAwO1xuICAgIGZvciAodmFyIGkgPSBzdGFydEluZGV4IHx8IDAsIGxlbmd0aCA9IGdldExlbmd0aChpbnB1dCk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHZhbHVlID0gaW5wdXRbaV07XG4gICAgICBpZiAoaXNBcnJheUxpa2UodmFsdWUpICYmIChfLmlzQXJyYXkodmFsdWUpIHx8IF8uaXNBcmd1bWVudHModmFsdWUpKSkge1xuICAgICAgICAvL2ZsYXR0ZW4gY3VycmVudCBsZXZlbCBvZiBhcnJheSBvciBhcmd1bWVudHMgb2JqZWN0XG4gICAgICAgIGlmICghc2hhbGxvdykgdmFsdWUgPSBmbGF0dGVuKHZhbHVlLCBzaGFsbG93LCBzdHJpY3QpO1xuICAgICAgICB2YXIgaiA9IDAsIGxlbiA9IHZhbHVlLmxlbmd0aDtcbiAgICAgICAgb3V0cHV0Lmxlbmd0aCArPSBsZW47XG4gICAgICAgIHdoaWxlIChqIDwgbGVuKSB7XG4gICAgICAgICAgb3V0cHV0W2lkeCsrXSA9IHZhbHVlW2orK107XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIXN0cmljdCkge1xuICAgICAgICBvdXRwdXRbaWR4KytdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH07XG5cbiAgLy8gRmxhdHRlbiBvdXQgYW4gYXJyYXksIGVpdGhlciByZWN1cnNpdmVseSAoYnkgZGVmYXVsdCksIG9yIGp1c3Qgb25lIGxldmVsLlxuICBfLmZsYXR0ZW4gPSBmdW5jdGlvbihhcnJheSwgc2hhbGxvdykge1xuICAgIHJldHVybiBmbGF0dGVuKGFycmF5LCBzaGFsbG93LCBmYWxzZSk7XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgdmVyc2lvbiBvZiB0aGUgYXJyYXkgdGhhdCBkb2VzIG5vdCBjb250YWluIHRoZSBzcGVjaWZpZWQgdmFsdWUocykuXG4gIF8ud2l0aG91dCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgcmV0dXJuIF8uZGlmZmVyZW5jZShhcnJheSwgc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpKTtcbiAgfTtcblxuICAvLyBQcm9kdWNlIGEgZHVwbGljYXRlLWZyZWUgdmVyc2lvbiBvZiB0aGUgYXJyYXkuIElmIHRoZSBhcnJheSBoYXMgYWxyZWFkeVxuICAvLyBiZWVuIHNvcnRlZCwgeW91IGhhdmUgdGhlIG9wdGlvbiBvZiB1c2luZyBhIGZhc3RlciBhbGdvcml0aG0uXG4gIC8vIEFsaWFzZWQgYXMgYHVuaXF1ZWAuXG4gIF8udW5pcSA9IF8udW5pcXVlID0gZnVuY3Rpb24oYXJyYXksIGlzU29ydGVkLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIGlmICghXy5pc0Jvb2xlYW4oaXNTb3J0ZWQpKSB7XG4gICAgICBjb250ZXh0ID0gaXRlcmF0ZWU7XG4gICAgICBpdGVyYXRlZSA9IGlzU29ydGVkO1xuICAgICAgaXNTb3J0ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGl0ZXJhdGVlICE9IG51bGwpIGl0ZXJhdGVlID0gY2IoaXRlcmF0ZWUsIGNvbnRleHQpO1xuICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICB2YXIgc2VlbiA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgoYXJyYXkpOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB2YWx1ZSA9IGFycmF5W2ldLFxuICAgICAgICAgIGNvbXB1dGVkID0gaXRlcmF0ZWUgPyBpdGVyYXRlZSh2YWx1ZSwgaSwgYXJyYXkpIDogdmFsdWU7XG4gICAgICBpZiAoaXNTb3J0ZWQpIHtcbiAgICAgICAgaWYgKCFpIHx8IHNlZW4gIT09IGNvbXB1dGVkKSByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgICAgIHNlZW4gPSBjb21wdXRlZDtcbiAgICAgIH0gZWxzZSBpZiAoaXRlcmF0ZWUpIHtcbiAgICAgICAgaWYgKCFfLmNvbnRhaW5zKHNlZW4sIGNvbXB1dGVkKSkge1xuICAgICAgICAgIHNlZW4ucHVzaChjb21wdXRlZCk7XG4gICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFfLmNvbnRhaW5zKHJlc3VsdCwgdmFsdWUpKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBQcm9kdWNlIGFuIGFycmF5IHRoYXQgY29udGFpbnMgdGhlIHVuaW9uOiBlYWNoIGRpc3RpbmN0IGVsZW1lbnQgZnJvbSBhbGwgb2ZcbiAgLy8gdGhlIHBhc3NlZC1pbiBhcnJheXMuXG4gIF8udW5pb24gPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gXy51bmlxKGZsYXR0ZW4oYXJndW1lbnRzLCB0cnVlLCB0cnVlKSk7XG4gIH07XG5cbiAgLy8gUHJvZHVjZSBhbiBhcnJheSB0aGF0IGNvbnRhaW5zIGV2ZXJ5IGl0ZW0gc2hhcmVkIGJldHdlZW4gYWxsIHRoZVxuICAvLyBwYXNzZWQtaW4gYXJyYXlzLlxuICBfLmludGVyc2VjdGlvbiA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIHJlc3VsdCA9IFtdO1xuICAgIHZhciBhcmdzTGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgaXRlbSA9IGFycmF5W2ldO1xuICAgICAgaWYgKF8uY29udGFpbnMocmVzdWx0LCBpdGVtKSkgY29udGludWU7XG4gICAgICBmb3IgKHZhciBqID0gMTsgaiA8IGFyZ3NMZW5ndGg7IGorKykge1xuICAgICAgICBpZiAoIV8uY29udGFpbnMoYXJndW1lbnRzW2pdLCBpdGVtKSkgYnJlYWs7XG4gICAgICB9XG4gICAgICBpZiAoaiA9PT0gYXJnc0xlbmd0aCkgcmVzdWx0LnB1c2goaXRlbSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgLy8gVGFrZSB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIG9uZSBhcnJheSBhbmQgYSBudW1iZXIgb2Ygb3RoZXIgYXJyYXlzLlxuICAvLyBPbmx5IHRoZSBlbGVtZW50cyBwcmVzZW50IGluIGp1c3QgdGhlIGZpcnN0IGFycmF5IHdpbGwgcmVtYWluLlxuICBfLmRpZmZlcmVuY2UgPSBmdW5jdGlvbihhcnJheSkge1xuICAgIHZhciByZXN0ID0gZmxhdHRlbihhcmd1bWVudHMsIHRydWUsIHRydWUsIDEpO1xuICAgIHJldHVybiBfLmZpbHRlcihhcnJheSwgZnVuY3Rpb24odmFsdWUpe1xuICAgICAgcmV0dXJuICFfLmNvbnRhaW5zKHJlc3QsIHZhbHVlKTtcbiAgICB9KTtcbiAgfTtcblxuICAvLyBaaXAgdG9nZXRoZXIgbXVsdGlwbGUgbGlzdHMgaW50byBhIHNpbmdsZSBhcnJheSAtLSBlbGVtZW50cyB0aGF0IHNoYXJlXG4gIC8vIGFuIGluZGV4IGdvIHRvZ2V0aGVyLlxuICBfLnppcCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBfLnVuemlwKGFyZ3VtZW50cyk7XG4gIH07XG5cbiAgLy8gQ29tcGxlbWVudCBvZiBfLnppcC4gVW56aXAgYWNjZXB0cyBhbiBhcnJheSBvZiBhcnJheXMgYW5kIGdyb3Vwc1xuICAvLyBlYWNoIGFycmF5J3MgZWxlbWVudHMgb24gc2hhcmVkIGluZGljZXNcbiAgXy51bnppcCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gICAgdmFyIGxlbmd0aCA9IGFycmF5ICYmIF8ubWF4KGFycmF5LCBnZXRMZW5ndGgpLmxlbmd0aCB8fCAwO1xuICAgIHZhciByZXN1bHQgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgcmVzdWx0W2luZGV4XSA9IF8ucGx1Y2soYXJyYXksIGluZGV4KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBDb252ZXJ0cyBsaXN0cyBpbnRvIG9iamVjdHMuIFBhc3MgZWl0aGVyIGEgc2luZ2xlIGFycmF5IG9mIGBba2V5LCB2YWx1ZV1gXG4gIC8vIHBhaXJzLCBvciB0d28gcGFyYWxsZWwgYXJyYXlzIG9mIHRoZSBzYW1lIGxlbmd0aCAtLSBvbmUgb2Yga2V5cywgYW5kIG9uZSBvZlxuICAvLyB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZXMuXG4gIF8ub2JqZWN0ID0gZnVuY3Rpb24obGlzdCwgdmFsdWVzKSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBnZXRMZW5ndGgobGlzdCk7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKHZhbHVlcykge1xuICAgICAgICByZXN1bHRbbGlzdFtpXV0gPSB2YWx1ZXNbaV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHRbbGlzdFtpXVswXV0gPSBsaXN0W2ldWzFdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuXG4gIC8vIEdlbmVyYXRvciBmdW5jdGlvbiB0byBjcmVhdGUgdGhlIGZpbmRJbmRleCBhbmQgZmluZExhc3RJbmRleCBmdW5jdGlvbnNcbiAgZnVuY3Rpb24gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoZGlyKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGFycmF5LCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICAgIHByZWRpY2F0ZSA9IGNiKHByZWRpY2F0ZSwgY29udGV4dCk7XG4gICAgICB2YXIgbGVuZ3RoID0gZ2V0TGVuZ3RoKGFycmF5KTtcbiAgICAgIHZhciBpbmRleCA9IGRpciA+IDAgPyAwIDogbGVuZ3RoIC0gMTtcbiAgICAgIGZvciAoOyBpbmRleCA+PSAwICYmIGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSBkaXIpIHtcbiAgICAgICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHJldHVybiBpbmRleDtcbiAgICAgIH1cbiAgICAgIHJldHVybiAtMTtcbiAgICB9O1xuICB9XG5cbiAgLy8gUmV0dXJucyB0aGUgZmlyc3QgaW5kZXggb24gYW4gYXJyYXktbGlrZSB0aGF0IHBhc3NlcyBhIHByZWRpY2F0ZSB0ZXN0XG4gIF8uZmluZEluZGV4ID0gY3JlYXRlUHJlZGljYXRlSW5kZXhGaW5kZXIoMSk7XG4gIF8uZmluZExhc3RJbmRleCA9IGNyZWF0ZVByZWRpY2F0ZUluZGV4RmluZGVyKC0xKTtcblxuICAvLyBVc2UgYSBjb21wYXJhdG9yIGZ1bmN0aW9uIHRvIGZpZ3VyZSBvdXQgdGhlIHNtYWxsZXN0IGluZGV4IGF0IHdoaWNoXG4gIC8vIGFuIG9iamVjdCBzaG91bGQgYmUgaW5zZXJ0ZWQgc28gYXMgdG8gbWFpbnRhaW4gb3JkZXIuIFVzZXMgYmluYXJ5IHNlYXJjaC5cbiAgXy5zb3J0ZWRJbmRleCA9IGZ1bmN0aW9uKGFycmF5LCBvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaXRlcmF0ZWUgPSBjYihpdGVyYXRlZSwgY29udGV4dCwgMSk7XG4gICAgdmFyIHZhbHVlID0gaXRlcmF0ZWUob2JqKTtcbiAgICB2YXIgbG93ID0gMCwgaGlnaCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICAgIHZhciBtaWQgPSBNYXRoLmZsb29yKChsb3cgKyBoaWdoKSAvIDIpO1xuICAgICAgaWYgKGl0ZXJhdGVlKGFycmF5W21pZF0pIDwgdmFsdWUpIGxvdyA9IG1pZCArIDE7IGVsc2UgaGlnaCA9IG1pZDtcbiAgICB9XG4gICAgcmV0dXJuIGxvdztcbiAgfTtcblxuICAvLyBHZW5lcmF0b3IgZnVuY3Rpb24gdG8gY3JlYXRlIHRoZSBpbmRleE9mIGFuZCBsYXN0SW5kZXhPZiBmdW5jdGlvbnNcbiAgZnVuY3Rpb24gY3JlYXRlSW5kZXhGaW5kZXIoZGlyLCBwcmVkaWNhdGVGaW5kLCBzb3J0ZWRJbmRleCkge1xuICAgIHJldHVybiBmdW5jdGlvbihhcnJheSwgaXRlbSwgaWR4KSB7XG4gICAgICB2YXIgaSA9IDAsIGxlbmd0aCA9IGdldExlbmd0aChhcnJheSk7XG4gICAgICBpZiAodHlwZW9mIGlkeCA9PSAnbnVtYmVyJykge1xuICAgICAgICBpZiAoZGlyID4gMCkge1xuICAgICAgICAgICAgaSA9IGlkeCA+PSAwID8gaWR4IDogTWF0aC5tYXgoaWR4ICsgbGVuZ3RoLCBpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxlbmd0aCA9IGlkeCA+PSAwID8gTWF0aC5taW4oaWR4ICsgMSwgbGVuZ3RoKSA6IGlkeCArIGxlbmd0aCArIDE7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoc29ydGVkSW5kZXggJiYgaWR4ICYmIGxlbmd0aCkge1xuICAgICAgICBpZHggPSBzb3J0ZWRJbmRleChhcnJheSwgaXRlbSk7XG4gICAgICAgIHJldHVybiBhcnJheVtpZHhdID09PSBpdGVtID8gaWR4IDogLTE7XG4gICAgICB9XG4gICAgICBpZiAoaXRlbSAhPT0gaXRlbSkge1xuICAgICAgICBpZHggPSBwcmVkaWNhdGVGaW5kKHNsaWNlLmNhbGwoYXJyYXksIGksIGxlbmd0aCksIF8uaXNOYU4pO1xuICAgICAgICByZXR1cm4gaWR4ID49IDAgPyBpZHggKyBpIDogLTE7XG4gICAgICB9XG4gICAgICBmb3IgKGlkeCA9IGRpciA+IDAgPyBpIDogbGVuZ3RoIC0gMTsgaWR4ID49IDAgJiYgaWR4IDwgbGVuZ3RoOyBpZHggKz0gZGlyKSB7XG4gICAgICAgIGlmIChhcnJheVtpZHhdID09PSBpdGVtKSByZXR1cm4gaWR4O1xuICAgICAgfVxuICAgICAgcmV0dXJuIC0xO1xuICAgIH07XG4gIH1cblxuICAvLyBSZXR1cm4gdGhlIHBvc2l0aW9uIG9mIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGFuIGl0ZW0gaW4gYW4gYXJyYXksXG4gIC8vIG9yIC0xIGlmIHRoZSBpdGVtIGlzIG5vdCBpbmNsdWRlZCBpbiB0aGUgYXJyYXkuXG4gIC8vIElmIHRoZSBhcnJheSBpcyBsYXJnZSBhbmQgYWxyZWFkeSBpbiBzb3J0IG9yZGVyLCBwYXNzIGB0cnVlYFxuICAvLyBmb3IgKippc1NvcnRlZCoqIHRvIHVzZSBiaW5hcnkgc2VhcmNoLlxuICBfLmluZGV4T2YgPSBjcmVhdGVJbmRleEZpbmRlcigxLCBfLmZpbmRJbmRleCwgXy5zb3J0ZWRJbmRleCk7XG4gIF8ubGFzdEluZGV4T2YgPSBjcmVhdGVJbmRleEZpbmRlcigtMSwgXy5maW5kTGFzdEluZGV4KTtcblxuICAvLyBHZW5lcmF0ZSBhbiBpbnRlZ2VyIEFycmF5IGNvbnRhaW5pbmcgYW4gYXJpdGhtZXRpYyBwcm9ncmVzc2lvbi4gQSBwb3J0IG9mXG4gIC8vIHRoZSBuYXRpdmUgUHl0aG9uIGByYW5nZSgpYCBmdW5jdGlvbi4gU2VlXG4gIC8vIFt0aGUgUHl0aG9uIGRvY3VtZW50YXRpb25dKGh0dHA6Ly9kb2NzLnB5dGhvbi5vcmcvbGlicmFyeS9mdW5jdGlvbnMuaHRtbCNyYW5nZSkuXG4gIF8ucmFuZ2UgPSBmdW5jdGlvbihzdGFydCwgc3RvcCwgc3RlcCkge1xuICAgIGlmIChzdG9wID09IG51bGwpIHtcbiAgICAgIHN0b3AgPSBzdGFydCB8fCAwO1xuICAgICAgc3RhcnQgPSAwO1xuICAgIH1cbiAgICBzdGVwID0gc3RlcCB8fCAxO1xuXG4gICAgdmFyIGxlbmd0aCA9IE1hdGgubWF4KE1hdGguY2VpbCgoc3RvcCAtIHN0YXJ0KSAvIHN0ZXApLCAwKTtcbiAgICB2YXIgcmFuZ2UgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgZm9yICh2YXIgaWR4ID0gMDsgaWR4IDwgbGVuZ3RoOyBpZHgrKywgc3RhcnQgKz0gc3RlcCkge1xuICAgICAgcmFuZ2VbaWR4XSA9IHN0YXJ0O1xuICAgIH1cblxuICAgIHJldHVybiByYW5nZTtcbiAgfTtcblxuICAvLyBGdW5jdGlvbiAoYWhlbSkgRnVuY3Rpb25zXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIERldGVybWluZXMgd2hldGhlciB0byBleGVjdXRlIGEgZnVuY3Rpb24gYXMgYSBjb25zdHJ1Y3RvclxuICAvLyBvciBhIG5vcm1hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm92aWRlZCBhcmd1bWVudHNcbiAgdmFyIGV4ZWN1dGVCb3VuZCA9IGZ1bmN0aW9uKHNvdXJjZUZ1bmMsIGJvdW5kRnVuYywgY29udGV4dCwgY2FsbGluZ0NvbnRleHQsIGFyZ3MpIHtcbiAgICBpZiAoIShjYWxsaW5nQ29udGV4dCBpbnN0YW5jZW9mIGJvdW5kRnVuYykpIHJldHVybiBzb3VyY2VGdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgIHZhciBzZWxmID0gYmFzZUNyZWF0ZShzb3VyY2VGdW5jLnByb3RvdHlwZSk7XG4gICAgdmFyIHJlc3VsdCA9IHNvdXJjZUZ1bmMuYXBwbHkoc2VsZiwgYXJncyk7XG4gICAgaWYgKF8uaXNPYmplY3QocmVzdWx0KSkgcmV0dXJuIHJlc3VsdDtcbiAgICByZXR1cm4gc2VsZjtcbiAgfTtcblxuICAvLyBDcmVhdGUgYSBmdW5jdGlvbiBib3VuZCB0byBhIGdpdmVuIG9iamVjdCAoYXNzaWduaW5nIGB0aGlzYCwgYW5kIGFyZ3VtZW50cyxcbiAgLy8gb3B0aW9uYWxseSkuIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBGdW5jdGlvbi5iaW5kYCBpZlxuICAvLyBhdmFpbGFibGUuXG4gIF8uYmluZCA9IGZ1bmN0aW9uKGZ1bmMsIGNvbnRleHQpIHtcbiAgICBpZiAobmF0aXZlQmluZCAmJiBmdW5jLmJpbmQgPT09IG5hdGl2ZUJpbmQpIHJldHVybiBuYXRpdmVCaW5kLmFwcGx5KGZ1bmMsIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgaWYgKCFfLmlzRnVuY3Rpb24oZnVuYykpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JpbmQgbXVzdCBiZSBjYWxsZWQgb24gYSBmdW5jdGlvbicpO1xuICAgIHZhciBhcmdzID0gc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xuICAgIHZhciBib3VuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGV4ZWN1dGVCb3VuZChmdW5jLCBib3VuZCwgY29udGV4dCwgdGhpcywgYXJncy5jb25jYXQoc2xpY2UuY2FsbChhcmd1bWVudHMpKSk7XG4gICAgfTtcbiAgICByZXR1cm4gYm91bmQ7XG4gIH07XG5cbiAgLy8gUGFydGlhbGx5IGFwcGx5IGEgZnVuY3Rpb24gYnkgY3JlYXRpbmcgYSB2ZXJzaW9uIHRoYXQgaGFzIGhhZCBzb21lIG9mIGl0c1xuICAvLyBhcmd1bWVudHMgcHJlLWZpbGxlZCwgd2l0aG91dCBjaGFuZ2luZyBpdHMgZHluYW1pYyBgdGhpc2AgY29udGV4dC4gXyBhY3RzXG4gIC8vIGFzIGEgcGxhY2Vob2xkZXIsIGFsbG93aW5nIGFueSBjb21iaW5hdGlvbiBvZiBhcmd1bWVudHMgdG8gYmUgcHJlLWZpbGxlZC5cbiAgXy5wYXJ0aWFsID0gZnVuY3Rpb24oZnVuYykge1xuICAgIHZhciBib3VuZEFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG4gICAgdmFyIGJvdW5kID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcG9zaXRpb24gPSAwLCBsZW5ndGggPSBib3VuZEFyZ3MubGVuZ3RoO1xuICAgICAgdmFyIGFyZ3MgPSBBcnJheShsZW5ndGgpO1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICBhcmdzW2ldID0gYm91bmRBcmdzW2ldID09PSBfID8gYXJndW1lbnRzW3Bvc2l0aW9uKytdIDogYm91bmRBcmdzW2ldO1xuICAgICAgfVxuICAgICAgd2hpbGUgKHBvc2l0aW9uIDwgYXJndW1lbnRzLmxlbmd0aCkgYXJncy5wdXNoKGFyZ3VtZW50c1twb3NpdGlvbisrXSk7XG4gICAgICByZXR1cm4gZXhlY3V0ZUJvdW5kKGZ1bmMsIGJvdW5kLCB0aGlzLCB0aGlzLCBhcmdzKTtcbiAgICB9O1xuICAgIHJldHVybiBib3VuZDtcbiAgfTtcblxuICAvLyBCaW5kIGEgbnVtYmVyIG9mIGFuIG9iamVjdCdzIG1ldGhvZHMgdG8gdGhhdCBvYmplY3QuIFJlbWFpbmluZyBhcmd1bWVudHNcbiAgLy8gYXJlIHRoZSBtZXRob2QgbmFtZXMgdG8gYmUgYm91bmQuIFVzZWZ1bCBmb3IgZW5zdXJpbmcgdGhhdCBhbGwgY2FsbGJhY2tzXG4gIC8vIGRlZmluZWQgb24gYW4gb2JqZWN0IGJlbG9uZyB0byBpdC5cbiAgXy5iaW5kQWxsID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIGksIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsIGtleTtcbiAgICBpZiAobGVuZ3RoIDw9IDEpIHRocm93IG5ldyBFcnJvcignYmluZEFsbCBtdXN0IGJlIHBhc3NlZCBmdW5jdGlvbiBuYW1lcycpO1xuICAgIGZvciAoaSA9IDE7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0gYXJndW1lbnRzW2ldO1xuICAgICAgb2JqW2tleV0gPSBfLmJpbmQob2JqW2tleV0sIG9iaik7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gTWVtb2l6ZSBhbiBleHBlbnNpdmUgZnVuY3Rpb24gYnkgc3RvcmluZyBpdHMgcmVzdWx0cy5cbiAgXy5tZW1vaXplID0gZnVuY3Rpb24oZnVuYywgaGFzaGVyKSB7XG4gICAgdmFyIG1lbW9pemUgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgIHZhciBjYWNoZSA9IG1lbW9pemUuY2FjaGU7XG4gICAgICB2YXIgYWRkcmVzcyA9ICcnICsgKGhhc2hlciA/IGhhc2hlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIDoga2V5KTtcbiAgICAgIGlmICghXy5oYXMoY2FjaGUsIGFkZHJlc3MpKSBjYWNoZVthZGRyZXNzXSA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIHJldHVybiBjYWNoZVthZGRyZXNzXTtcbiAgICB9O1xuICAgIG1lbW9pemUuY2FjaGUgPSB7fTtcbiAgICByZXR1cm4gbWVtb2l6ZTtcbiAgfTtcblxuICAvLyBEZWxheXMgYSBmdW5jdGlvbiBmb3IgdGhlIGdpdmVuIG51bWJlciBvZiBtaWxsaXNlY29uZHMsIGFuZCB0aGVuIGNhbGxzXG4gIC8vIGl0IHdpdGggdGhlIGFyZ3VtZW50cyBzdXBwbGllZC5cbiAgXy5kZWxheSA9IGZ1bmN0aW9uKGZ1bmMsIHdhaXQpIHtcbiAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAyKTtcbiAgICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpe1xuICAgICAgcmV0dXJuIGZ1bmMuYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfSwgd2FpdCk7XG4gIH07XG5cbiAgLy8gRGVmZXJzIGEgZnVuY3Rpb24sIHNjaGVkdWxpbmcgaXQgdG8gcnVuIGFmdGVyIHRoZSBjdXJyZW50IGNhbGwgc3RhY2sgaGFzXG4gIC8vIGNsZWFyZWQuXG4gIF8uZGVmZXIgPSBfLnBhcnRpYWwoXy5kZWxheSwgXywgMSk7XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uLCB0aGF0LCB3aGVuIGludm9rZWQsIHdpbGwgb25seSBiZSB0cmlnZ2VyZWQgYXQgbW9zdCBvbmNlXG4gIC8vIGR1cmluZyBhIGdpdmVuIHdpbmRvdyBvZiB0aW1lLiBOb3JtYWxseSwgdGhlIHRocm90dGxlZCBmdW5jdGlvbiB3aWxsIHJ1blxuICAvLyBhcyBtdWNoIGFzIGl0IGNhbiwgd2l0aG91dCBldmVyIGdvaW5nIG1vcmUgdGhhbiBvbmNlIHBlciBgd2FpdGAgZHVyYXRpb247XG4gIC8vIGJ1dCBpZiB5b3UnZCBsaWtlIHRvIGRpc2FibGUgdGhlIGV4ZWN1dGlvbiBvbiB0aGUgbGVhZGluZyBlZGdlLCBwYXNzXG4gIC8vIGB7bGVhZGluZzogZmFsc2V9YC4gVG8gZGlzYWJsZSBleGVjdXRpb24gb24gdGhlIHRyYWlsaW5nIGVkZ2UsIGRpdHRvLlxuICBfLnRocm90dGxlID0gZnVuY3Rpb24oZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICAgIHZhciBjb250ZXh0LCBhcmdzLCByZXN1bHQ7XG4gICAgdmFyIHRpbWVvdXQgPSBudWxsO1xuICAgIHZhciBwcmV2aW91cyA9IDA7XG4gICAgaWYgKCFvcHRpb25zKSBvcHRpb25zID0ge307XG4gICAgdmFyIGxhdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICBwcmV2aW91cyA9IG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UgPyAwIDogXy5ub3coKTtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIG5vdyA9IF8ubm93KCk7XG4gICAgICBpZiAoIXByZXZpb3VzICYmIG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UpIHByZXZpb3VzID0gbm93O1xuICAgICAgdmFyIHJlbWFpbmluZyA9IHdhaXQgLSAobm93IC0gcHJldmlvdXMpO1xuICAgICAgY29udGV4dCA9IHRoaXM7XG4gICAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgaWYgKHJlbWFpbmluZyA8PSAwIHx8IHJlbWFpbmluZyA+IHdhaXQpIHtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcHJldmlvdXMgPSBub3c7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICghdGltZW91dCAmJiBvcHRpb25zLnRyYWlsaW5nICE9PSBmYWxzZSkge1xuICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgcmVtYWluaW5nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIGFzIGxvbmcgYXMgaXQgY29udGludWVzIHRvIGJlIGludm9rZWQsIHdpbGwgbm90XG4gIC8vIGJlIHRyaWdnZXJlZC4gVGhlIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIGFmdGVyIGl0IHN0b3BzIGJlaW5nIGNhbGxlZCBmb3JcbiAgLy8gTiBtaWxsaXNlY29uZHMuIElmIGBpbW1lZGlhdGVgIGlzIHBhc3NlZCwgdHJpZ2dlciB0aGUgZnVuY3Rpb24gb24gdGhlXG4gIC8vIGxlYWRpbmcgZWRnZSwgaW5zdGVhZCBvZiB0aGUgdHJhaWxpbmcuXG4gIF8uZGVib3VuY2UgPSBmdW5jdGlvbihmdW5jLCB3YWl0LCBpbW1lZGlhdGUpIHtcbiAgICB2YXIgdGltZW91dCwgYXJncywgY29udGV4dCwgdGltZXN0YW1wLCByZXN1bHQ7XG5cbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciBsYXN0ID0gXy5ub3coKSAtIHRpbWVzdGFtcDtcblxuICAgICAgaWYgKGxhc3QgPCB3YWl0ICYmIGxhc3QgPj0gMCkge1xuICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICAgIGlmICghaW1tZWRpYXRlKSB7XG4gICAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICAgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBjb250ZXh0ID0gdGhpcztcbiAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgICB0aW1lc3RhbXAgPSBfLm5vdygpO1xuICAgICAgdmFyIGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgICBpZiAoIXRpbWVvdXQpIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICAgIGlmIChjYWxsTm93KSB7XG4gICAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgdGhlIGZpcnN0IGZ1bmN0aW9uIHBhc3NlZCBhcyBhbiBhcmd1bWVudCB0byB0aGUgc2Vjb25kLFxuICAvLyBhbGxvd2luZyB5b3UgdG8gYWRqdXN0IGFyZ3VtZW50cywgcnVuIGNvZGUgYmVmb3JlIGFuZCBhZnRlciwgYW5kXG4gIC8vIGNvbmRpdGlvbmFsbHkgZXhlY3V0ZSB0aGUgb3JpZ2luYWwgZnVuY3Rpb24uXG4gIF8ud3JhcCA9IGZ1bmN0aW9uKGZ1bmMsIHdyYXBwZXIpIHtcbiAgICByZXR1cm4gXy5wYXJ0aWFsKHdyYXBwZXIsIGZ1bmMpO1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBuZWdhdGVkIHZlcnNpb24gb2YgdGhlIHBhc3NlZC1pbiBwcmVkaWNhdGUuXG4gIF8ubmVnYXRlID0gZnVuY3Rpb24ocHJlZGljYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuICFwcmVkaWNhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9O1xuXG4gIC8vIFJldHVybnMgYSBmdW5jdGlvbiB0aGF0IGlzIHRoZSBjb21wb3NpdGlvbiBvZiBhIGxpc3Qgb2YgZnVuY3Rpb25zLCBlYWNoXG4gIC8vIGNvbnN1bWluZyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmdW5jdGlvbiB0aGF0IGZvbGxvd3MuXG4gIF8uY29tcG9zZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgIHZhciBzdGFydCA9IGFyZ3MubGVuZ3RoIC0gMTtcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgaSA9IHN0YXJ0O1xuICAgICAgdmFyIHJlc3VsdCA9IGFyZ3Nbc3RhcnRdLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB3aGlsZSAoaS0tKSByZXN1bHQgPSBhcmdzW2ldLmNhbGwodGhpcywgcmVzdWx0KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgb24gYW5kIGFmdGVyIHRoZSBOdGggY2FsbC5cbiAgXy5hZnRlciA9IGZ1bmN0aW9uKHRpbWVzLCBmdW5jKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgaWYgKC0tdGltZXMgPCAxKSB7XG4gICAgICAgIHJldHVybiBmdW5jLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICB9XG4gICAgfTtcbiAgfTtcblxuICAvLyBSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB3aWxsIG9ubHkgYmUgZXhlY3V0ZWQgdXAgdG8gKGJ1dCBub3QgaW5jbHVkaW5nKSB0aGUgTnRoIGNhbGwuXG4gIF8uYmVmb3JlID0gZnVuY3Rpb24odGltZXMsIGZ1bmMpIHtcbiAgICB2YXIgbWVtbztcbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICBpZiAoLS10aW1lcyA+IDApIHtcbiAgICAgICAgbWVtbyA9IGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aW1lcyA8PSAxKSBmdW5jID0gbnVsbDtcbiAgICAgIHJldHVybiBtZW1vO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBhdCBtb3N0IG9uZSB0aW1lLCBubyBtYXR0ZXIgaG93XG4gIC8vIG9mdGVuIHlvdSBjYWxsIGl0LiBVc2VmdWwgZm9yIGxhenkgaW5pdGlhbGl6YXRpb24uXG4gIF8ub25jZSA9IF8ucGFydGlhbChfLmJlZm9yZSwgMik7XG5cbiAgLy8gT2JqZWN0IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tXG5cbiAgLy8gS2V5cyBpbiBJRSA8IDkgdGhhdCB3b24ndCBiZSBpdGVyYXRlZCBieSBgZm9yIGtleSBpbiAuLi5gIGFuZCB0aHVzIG1pc3NlZC5cbiAgdmFyIGhhc0VudW1CdWcgPSAhe3RvU3RyaW5nOiBudWxsfS5wcm9wZXJ0eUlzRW51bWVyYWJsZSgndG9TdHJpbmcnKTtcbiAgdmFyIG5vbkVudW1lcmFibGVQcm9wcyA9IFsndmFsdWVPZicsICdpc1Byb3RvdHlwZU9mJywgJ3RvU3RyaW5nJyxcbiAgICAgICAgICAgICAgICAgICAgICAncHJvcGVydHlJc0VudW1lcmFibGUnLCAnaGFzT3duUHJvcGVydHknLCAndG9Mb2NhbGVTdHJpbmcnXTtcblxuICBmdW5jdGlvbiBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaiwga2V5cykge1xuICAgIHZhciBub25FbnVtSWR4ID0gbm9uRW51bWVyYWJsZVByb3BzLmxlbmd0aDtcbiAgICB2YXIgY29uc3RydWN0b3IgPSBvYmouY29uc3RydWN0b3I7XG4gICAgdmFyIHByb3RvID0gKF8uaXNGdW5jdGlvbihjb25zdHJ1Y3RvcikgJiYgY29uc3RydWN0b3IucHJvdG90eXBlKSB8fCBPYmpQcm90bztcblxuICAgIC8vIENvbnN0cnVjdG9yIGlzIGEgc3BlY2lhbCBjYXNlLlxuICAgIHZhciBwcm9wID0gJ2NvbnN0cnVjdG9yJztcbiAgICBpZiAoXy5oYXMob2JqLCBwcm9wKSAmJiAhXy5jb250YWlucyhrZXlzLCBwcm9wKSkga2V5cy5wdXNoKHByb3ApO1xuXG4gICAgd2hpbGUgKG5vbkVudW1JZHgtLSkge1xuICAgICAgcHJvcCA9IG5vbkVudW1lcmFibGVQcm9wc1tub25FbnVtSWR4XTtcbiAgICAgIGlmIChwcm9wIGluIG9iaiAmJiBvYmpbcHJvcF0gIT09IHByb3RvW3Byb3BdICYmICFfLmNvbnRhaW5zKGtleXMsIHByb3ApKSB7XG4gICAgICAgIGtleXMucHVzaChwcm9wKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBSZXRyaWV2ZSB0aGUgbmFtZXMgb2YgYW4gb2JqZWN0J3Mgb3duIHByb3BlcnRpZXMuXG4gIC8vIERlbGVnYXRlcyB0byAqKkVDTUFTY3JpcHQgNSoqJ3MgbmF0aXZlIGBPYmplY3Qua2V5c2BcbiAgXy5rZXlzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKCFfLmlzT2JqZWN0KG9iaikpIHJldHVybiBbXTtcbiAgICBpZiAobmF0aXZlS2V5cykgcmV0dXJuIG5hdGl2ZUtleXMob2JqKTtcbiAgICB2YXIga2V5cyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiBvYmopIGlmIChfLmhhcyhvYmosIGtleSkpIGtleXMucHVzaChrZXkpO1xuICAgIC8vIEFoZW0sIElFIDwgOS5cbiAgICBpZiAoaGFzRW51bUJ1ZykgY29sbGVjdE5vbkVudW1Qcm9wcyhvYmosIGtleXMpO1xuICAgIHJldHVybiBrZXlzO1xuICB9O1xuXG4gIC8vIFJldHJpZXZlIGFsbCB0aGUgcHJvcGVydHkgbmFtZXMgb2YgYW4gb2JqZWN0LlxuICBfLmFsbEtleXMgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIV8uaXNPYmplY3Qob2JqKSkgcmV0dXJuIFtdO1xuICAgIHZhciBrZXlzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikga2V5cy5wdXNoKGtleSk7XG4gICAgLy8gQWhlbSwgSUUgPCA5LlxuICAgIGlmIChoYXNFbnVtQnVnKSBjb2xsZWN0Tm9uRW51bVByb3BzKG9iaiwga2V5cyk7XG4gICAgcmV0dXJuIGtleXM7XG4gIH07XG5cbiAgLy8gUmV0cmlldmUgdGhlIHZhbHVlcyBvZiBhbiBvYmplY3QncyBwcm9wZXJ0aWVzLlxuICBfLnZhbHVlcyA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG4gICAgdmFyIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgIHZhciB2YWx1ZXMgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhbHVlc1tpXSA9IG9ialtrZXlzW2ldXTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlcztcbiAgfTtcblxuICAvLyBSZXR1cm5zIHRoZSByZXN1bHRzIG9mIGFwcGx5aW5nIHRoZSBpdGVyYXRlZSB0byBlYWNoIGVsZW1lbnQgb2YgdGhlIG9iamVjdFxuICAvLyBJbiBjb250cmFzdCB0byBfLm1hcCBpdCByZXR1cm5zIGFuIG9iamVjdFxuICBfLm1hcE9iamVjdCA9IGZ1bmN0aW9uKG9iaiwgaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICBpdGVyYXRlZSA9IGNiKGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgICB2YXIga2V5cyA9ICBfLmtleXMob2JqKSxcbiAgICAgICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aCxcbiAgICAgICAgICByZXN1bHRzID0ge30sXG4gICAgICAgICAgY3VycmVudEtleTtcbiAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgY3VycmVudEtleSA9IGtleXNbaW5kZXhdO1xuICAgICAgICByZXN1bHRzW2N1cnJlbnRLZXldID0gaXRlcmF0ZWUob2JqW2N1cnJlbnRLZXldLCBjdXJyZW50S2V5LCBvYmopO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdHM7XG4gIH07XG5cbiAgLy8gQ29udmVydCBhbiBvYmplY3QgaW50byBhIGxpc3Qgb2YgYFtrZXksIHZhbHVlXWAgcGFpcnMuXG4gIF8ucGFpcnMgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhvYmopO1xuICAgIHZhciBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgcGFpcnMgPSBBcnJheShsZW5ndGgpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHBhaXJzW2ldID0gW2tleXNbaV0sIG9ialtrZXlzW2ldXV07XG4gICAgfVxuICAgIHJldHVybiBwYWlycztcbiAgfTtcblxuICAvLyBJbnZlcnQgdGhlIGtleXMgYW5kIHZhbHVlcyBvZiBhbiBvYmplY3QuIFRoZSB2YWx1ZXMgbXVzdCBiZSBzZXJpYWxpemFibGUuXG4gIF8uaW52ZXJ0ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaik7XG4gICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aCA9IGtleXMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlc3VsdFtvYmpba2V5c1tpXV1dID0ga2V5c1tpXTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSBzb3J0ZWQgbGlzdCBvZiB0aGUgZnVuY3Rpb24gbmFtZXMgYXZhaWxhYmxlIG9uIHRoZSBvYmplY3QuXG4gIC8vIEFsaWFzZWQgYXMgYG1ldGhvZHNgXG4gIF8uZnVuY3Rpb25zID0gXy5tZXRob2RzID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgdmFyIG5hbWVzID0gW107XG4gICAgZm9yICh2YXIga2V5IGluIG9iaikge1xuICAgICAgaWYgKF8uaXNGdW5jdGlvbihvYmpba2V5XSkpIG5hbWVzLnB1c2goa2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIG5hbWVzLnNvcnQoKTtcbiAgfTtcblxuICAvLyBFeHRlbmQgYSBnaXZlbiBvYmplY3Qgd2l0aCBhbGwgdGhlIHByb3BlcnRpZXMgaW4gcGFzc2VkLWluIG9iamVjdChzKS5cbiAgXy5leHRlbmQgPSBjcmVhdGVBc3NpZ25lcihfLmFsbEtleXMpO1xuXG4gIC8vIEFzc2lnbnMgYSBnaXZlbiBvYmplY3Qgd2l0aCBhbGwgdGhlIG93biBwcm9wZXJ0aWVzIGluIHRoZSBwYXNzZWQtaW4gb2JqZWN0KHMpXG4gIC8vIChodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9PYmplY3QvYXNzaWduKVxuICBfLmV4dGVuZE93biA9IF8uYXNzaWduID0gY3JlYXRlQXNzaWduZXIoXy5rZXlzKTtcblxuICAvLyBSZXR1cm5zIHRoZSBmaXJzdCBrZXkgb24gYW4gb2JqZWN0IHRoYXQgcGFzc2VzIGEgcHJlZGljYXRlIHRlc3RcbiAgXy5maW5kS2V5ID0gZnVuY3Rpb24ob2JqLCBwcmVkaWNhdGUsIGNvbnRleHQpIHtcbiAgICBwcmVkaWNhdGUgPSBjYihwcmVkaWNhdGUsIGNvbnRleHQpO1xuICAgIHZhciBrZXlzID0gXy5rZXlzKG9iaiksIGtleTtcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgIGlmIChwcmVkaWNhdGUob2JqW2tleV0sIGtleSwgb2JqKSkgcmV0dXJuIGtleTtcbiAgICB9XG4gIH07XG5cbiAgLy8gUmV0dXJuIGEgY29weSBvZiB0aGUgb2JqZWN0IG9ubHkgY29udGFpbmluZyB0aGUgd2hpdGVsaXN0ZWQgcHJvcGVydGllcy5cbiAgXy5waWNrID0gZnVuY3Rpb24ob2JqZWN0LCBvaXRlcmF0ZWUsIGNvbnRleHQpIHtcbiAgICB2YXIgcmVzdWx0ID0ge30sIG9iaiA9IG9iamVjdCwgaXRlcmF0ZWUsIGtleXM7XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gcmVzdWx0O1xuICAgIGlmIChfLmlzRnVuY3Rpb24ob2l0ZXJhdGVlKSkge1xuICAgICAga2V5cyA9IF8uYWxsS2V5cyhvYmopO1xuICAgICAgaXRlcmF0ZWUgPSBvcHRpbWl6ZUNiKG9pdGVyYXRlZSwgY29udGV4dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleXMgPSBmbGF0dGVuKGFyZ3VtZW50cywgZmFsc2UsIGZhbHNlLCAxKTtcbiAgICAgIGl0ZXJhdGVlID0gZnVuY3Rpb24odmFsdWUsIGtleSwgb2JqKSB7IHJldHVybiBrZXkgaW4gb2JqOyB9O1xuICAgICAgb2JqID0gT2JqZWN0KG9iaik7XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICAgIHZhciB2YWx1ZSA9IG9ialtrZXldO1xuICAgICAgaWYgKGl0ZXJhdGVlKHZhbHVlLCBrZXksIG9iaikpIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG5cbiAgIC8vIFJldHVybiBhIGNvcHkgb2YgdGhlIG9iamVjdCB3aXRob3V0IHRoZSBibGFja2xpc3RlZCBwcm9wZXJ0aWVzLlxuICBfLm9taXQgPSBmdW5jdGlvbihvYmosIGl0ZXJhdGVlLCBjb250ZXh0KSB7XG4gICAgaWYgKF8uaXNGdW5jdGlvbihpdGVyYXRlZSkpIHtcbiAgICAgIGl0ZXJhdGVlID0gXy5uZWdhdGUoaXRlcmF0ZWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIga2V5cyA9IF8ubWFwKGZsYXR0ZW4oYXJndW1lbnRzLCBmYWxzZSwgZmFsc2UsIDEpLCBTdHJpbmcpO1xuICAgICAgaXRlcmF0ZWUgPSBmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgICAgIHJldHVybiAhXy5jb250YWlucyhrZXlzLCBrZXkpO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIF8ucGljayhvYmosIGl0ZXJhdGVlLCBjb250ZXh0KTtcbiAgfTtcblxuICAvLyBGaWxsIGluIGEgZ2l2ZW4gb2JqZWN0IHdpdGggZGVmYXVsdCBwcm9wZXJ0aWVzLlxuICBfLmRlZmF1bHRzID0gY3JlYXRlQXNzaWduZXIoXy5hbGxLZXlzLCB0cnVlKTtcblxuICAvLyBDcmVhdGVzIGFuIG9iamVjdCB0aGF0IGluaGVyaXRzIGZyb20gdGhlIGdpdmVuIHByb3RvdHlwZSBvYmplY3QuXG4gIC8vIElmIGFkZGl0aW9uYWwgcHJvcGVydGllcyBhcmUgcHJvdmlkZWQgdGhlbiB0aGV5IHdpbGwgYmUgYWRkZWQgdG8gdGhlXG4gIC8vIGNyZWF0ZWQgb2JqZWN0LlxuICBfLmNyZWF0ZSA9IGZ1bmN0aW9uKHByb3RvdHlwZSwgcHJvcHMpIHtcbiAgICB2YXIgcmVzdWx0ID0gYmFzZUNyZWF0ZShwcm90b3R5cGUpO1xuICAgIGlmIChwcm9wcykgXy5leHRlbmRPd24ocmVzdWx0LCBwcm9wcyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcblxuICAvLyBDcmVhdGUgYSAoc2hhbGxvdy1jbG9uZWQpIGR1cGxpY2F0ZSBvZiBhbiBvYmplY3QuXG4gIF8uY2xvbmUgPSBmdW5jdGlvbihvYmopIHtcbiAgICBpZiAoIV8uaXNPYmplY3Qob2JqKSkgcmV0dXJuIG9iajtcbiAgICByZXR1cm4gXy5pc0FycmF5KG9iaikgPyBvYmouc2xpY2UoKSA6IF8uZXh0ZW5kKHt9LCBvYmopO1xuICB9O1xuXG4gIC8vIEludm9rZXMgaW50ZXJjZXB0b3Igd2l0aCB0aGUgb2JqLCBhbmQgdGhlbiByZXR1cm5zIG9iai5cbiAgLy8gVGhlIHByaW1hcnkgcHVycG9zZSBvZiB0aGlzIG1ldGhvZCBpcyB0byBcInRhcCBpbnRvXCIgYSBtZXRob2QgY2hhaW4sIGluXG4gIC8vIG9yZGVyIHRvIHBlcmZvcm0gb3BlcmF0aW9ucyBvbiBpbnRlcm1lZGlhdGUgcmVzdWx0cyB3aXRoaW4gdGhlIGNoYWluLlxuICBfLnRhcCA9IGZ1bmN0aW9uKG9iaiwgaW50ZXJjZXB0b3IpIHtcbiAgICBpbnRlcmNlcHRvcihvYmopO1xuICAgIHJldHVybiBvYmo7XG4gIH07XG5cbiAgLy8gUmV0dXJucyB3aGV0aGVyIGFuIG9iamVjdCBoYXMgYSBnaXZlbiBzZXQgb2YgYGtleTp2YWx1ZWAgcGFpcnMuXG4gIF8uaXNNYXRjaCA9IGZ1bmN0aW9uKG9iamVjdCwgYXR0cnMpIHtcbiAgICB2YXIga2V5cyA9IF8ua2V5cyhhdHRycyksIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgIGlmIChvYmplY3QgPT0gbnVsbCkgcmV0dXJuICFsZW5ndGg7XG4gICAgdmFyIG9iaiA9IE9iamVjdChvYmplY3QpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYgKGF0dHJzW2tleV0gIT09IG9ialtrZXldIHx8ICEoa2V5IGluIG9iaikpIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH07XG5cblxuICAvLyBJbnRlcm5hbCByZWN1cnNpdmUgY29tcGFyaXNvbiBmdW5jdGlvbiBmb3IgYGlzRXF1YWxgLlxuICB2YXIgZXEgPSBmdW5jdGlvbihhLCBiLCBhU3RhY2ssIGJTdGFjaykge1xuICAgIC8vIElkZW50aWNhbCBvYmplY3RzIGFyZSBlcXVhbC4gYDAgPT09IC0wYCwgYnV0IHRoZXkgYXJlbid0IGlkZW50aWNhbC5cbiAgICAvLyBTZWUgdGhlIFtIYXJtb255IGBlZ2FsYCBwcm9wb3NhbF0oaHR0cDovL3dpa2kuZWNtYXNjcmlwdC5vcmcvZG9rdS5waHA/aWQ9aGFybW9ueTplZ2FsKS5cbiAgICBpZiAoYSA9PT0gYikgcmV0dXJuIGEgIT09IDAgfHwgMSAvIGEgPT09IDEgLyBiO1xuICAgIC8vIEEgc3RyaWN0IGNvbXBhcmlzb24gaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYG51bGwgPT0gdW5kZWZpbmVkYC5cbiAgICBpZiAoYSA9PSBudWxsIHx8IGIgPT0gbnVsbCkgcmV0dXJuIGEgPT09IGI7XG4gICAgLy8gVW53cmFwIGFueSB3cmFwcGVkIG9iamVjdHMuXG4gICAgaWYgKGEgaW5zdGFuY2VvZiBfKSBhID0gYS5fd3JhcHBlZDtcbiAgICBpZiAoYiBpbnN0YW5jZW9mIF8pIGIgPSBiLl93cmFwcGVkO1xuICAgIC8vIENvbXBhcmUgYFtbQ2xhc3NdXWAgbmFtZXMuXG4gICAgdmFyIGNsYXNzTmFtZSA9IHRvU3RyaW5nLmNhbGwoYSk7XG4gICAgaWYgKGNsYXNzTmFtZSAhPT0gdG9TdHJpbmcuY2FsbChiKSkgcmV0dXJuIGZhbHNlO1xuICAgIHN3aXRjaCAoY2xhc3NOYW1lKSB7XG4gICAgICAvLyBTdHJpbmdzLCBudW1iZXJzLCByZWd1bGFyIGV4cHJlc3Npb25zLCBkYXRlcywgYW5kIGJvb2xlYW5zIGFyZSBjb21wYXJlZCBieSB2YWx1ZS5cbiAgICAgIGNhc2UgJ1tvYmplY3QgUmVnRXhwXSc6XG4gICAgICAvLyBSZWdFeHBzIGFyZSBjb2VyY2VkIHRvIHN0cmluZ3MgZm9yIGNvbXBhcmlzb24gKE5vdGU6ICcnICsgL2EvaSA9PT0gJy9hL2knKVxuICAgICAgY2FzZSAnW29iamVjdCBTdHJpbmddJzpcbiAgICAgICAgLy8gUHJpbWl0aXZlcyBhbmQgdGhlaXIgY29ycmVzcG9uZGluZyBvYmplY3Qgd3JhcHBlcnMgYXJlIGVxdWl2YWxlbnQ7IHRodXMsIGBcIjVcImAgaXNcbiAgICAgICAgLy8gZXF1aXZhbGVudCB0byBgbmV3IFN0cmluZyhcIjVcIilgLlxuICAgICAgICByZXR1cm4gJycgKyBhID09PSAnJyArIGI7XG4gICAgICBjYXNlICdbb2JqZWN0IE51bWJlcl0nOlxuICAgICAgICAvLyBgTmFOYHMgYXJlIGVxdWl2YWxlbnQsIGJ1dCBub24tcmVmbGV4aXZlLlxuICAgICAgICAvLyBPYmplY3QoTmFOKSBpcyBlcXVpdmFsZW50IHRvIE5hTlxuICAgICAgICBpZiAoK2EgIT09ICthKSByZXR1cm4gK2IgIT09ICtiO1xuICAgICAgICAvLyBBbiBgZWdhbGAgY29tcGFyaXNvbiBpcyBwZXJmb3JtZWQgZm9yIG90aGVyIG51bWVyaWMgdmFsdWVzLlxuICAgICAgICByZXR1cm4gK2EgPT09IDAgPyAxIC8gK2EgPT09IDEgLyBiIDogK2EgPT09ICtiO1xuICAgICAgY2FzZSAnW29iamVjdCBEYXRlXSc6XG4gICAgICBjYXNlICdbb2JqZWN0IEJvb2xlYW5dJzpcbiAgICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1lcmljIHByaW1pdGl2ZSB2YWx1ZXMuIERhdGVzIGFyZSBjb21wYXJlZCBieSB0aGVpclxuICAgICAgICAvLyBtaWxsaXNlY29uZCByZXByZXNlbnRhdGlvbnMuIE5vdGUgdGhhdCBpbnZhbGlkIGRhdGVzIHdpdGggbWlsbGlzZWNvbmQgcmVwcmVzZW50YXRpb25zXG4gICAgICAgIC8vIG9mIGBOYU5gIGFyZSBub3QgZXF1aXZhbGVudC5cbiAgICAgICAgcmV0dXJuICthID09PSArYjtcbiAgICB9XG5cbiAgICB2YXIgYXJlQXJyYXlzID0gY2xhc3NOYW1lID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgIGlmICghYXJlQXJyYXlzKSB7XG4gICAgICBpZiAodHlwZW9mIGEgIT0gJ29iamVjdCcgfHwgdHlwZW9mIGIgIT0gJ29iamVjdCcpIHJldHVybiBmYWxzZTtcblxuICAgICAgLy8gT2JqZWN0cyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVpdmFsZW50LCBidXQgYE9iamVjdGBzIG9yIGBBcnJheWBzXG4gICAgICAvLyBmcm9tIGRpZmZlcmVudCBmcmFtZXMgYXJlLlxuICAgICAgdmFyIGFDdG9yID0gYS5jb25zdHJ1Y3RvciwgYkN0b3IgPSBiLmNvbnN0cnVjdG9yO1xuICAgICAgaWYgKGFDdG9yICE9PSBiQ3RvciAmJiAhKF8uaXNGdW5jdGlvbihhQ3RvcikgJiYgYUN0b3IgaW5zdGFuY2VvZiBhQ3RvciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uaXNGdW5jdGlvbihiQ3RvcikgJiYgYkN0b3IgaW5zdGFuY2VvZiBiQ3RvcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJiYgKCdjb25zdHJ1Y3RvcicgaW4gYSAmJiAnY29uc3RydWN0b3InIGluIGIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gQXNzdW1lIGVxdWFsaXR5IGZvciBjeWNsaWMgc3RydWN0dXJlcy4gVGhlIGFsZ29yaXRobSBmb3IgZGV0ZWN0aW5nIGN5Y2xpY1xuICAgIC8vIHN0cnVjdHVyZXMgaXMgYWRhcHRlZCBmcm9tIEVTIDUuMSBzZWN0aW9uIDE1LjEyLjMsIGFic3RyYWN0IG9wZXJhdGlvbiBgSk9gLlxuXG4gICAgLy8gSW5pdGlhbGl6aW5nIHN0YWNrIG9mIHRyYXZlcnNlZCBvYmplY3RzLlxuICAgIC8vIEl0J3MgZG9uZSBoZXJlIHNpbmNlIHdlIG9ubHkgbmVlZCB0aGVtIGZvciBvYmplY3RzIGFuZCBhcnJheXMgY29tcGFyaXNvbi5cbiAgICBhU3RhY2sgPSBhU3RhY2sgfHwgW107XG4gICAgYlN0YWNrID0gYlN0YWNrIHx8IFtdO1xuICAgIHZhciBsZW5ndGggPSBhU3RhY2subGVuZ3RoO1xuICAgIHdoaWxlIChsZW5ndGgtLSkge1xuICAgICAgLy8gTGluZWFyIHNlYXJjaC4gUGVyZm9ybWFuY2UgaXMgaW52ZXJzZWx5IHByb3BvcnRpb25hbCB0byB0aGUgbnVtYmVyIG9mXG4gICAgICAvLyB1bmlxdWUgbmVzdGVkIHN0cnVjdHVyZXMuXG4gICAgICBpZiAoYVN0YWNrW2xlbmd0aF0gPT09IGEpIHJldHVybiBiU3RhY2tbbGVuZ3RoXSA9PT0gYjtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGhlIGZpcnN0IG9iamVjdCB0byB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgYVN0YWNrLnB1c2goYSk7XG4gICAgYlN0YWNrLnB1c2goYik7XG5cbiAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgYW5kIGFycmF5cy5cbiAgICBpZiAoYXJlQXJyYXlzKSB7XG4gICAgICAvLyBDb21wYXJlIGFycmF5IGxlbmd0aHMgdG8gZGV0ZXJtaW5lIGlmIGEgZGVlcCBjb21wYXJpc29uIGlzIG5lY2Vzc2FyeS5cbiAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgaWYgKGxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICAgIC8vIERlZXAgY29tcGFyZSB0aGUgY29udGVudHMsIGlnbm9yaW5nIG5vbi1udW1lcmljIHByb3BlcnRpZXMuXG4gICAgICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICAgICAgaWYgKCFlcShhW2xlbmd0aF0sIGJbbGVuZ3RoXSwgYVN0YWNrLCBiU3RhY2spKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIERlZXAgY29tcGFyZSBvYmplY3RzLlxuICAgICAgdmFyIGtleXMgPSBfLmtleXMoYSksIGtleTtcbiAgICAgIGxlbmd0aCA9IGtleXMubGVuZ3RoO1xuICAgICAgLy8gRW5zdXJlIHRoYXQgYm90aCBvYmplY3RzIGNvbnRhaW4gdGhlIHNhbWUgbnVtYmVyIG9mIHByb3BlcnRpZXMgYmVmb3JlIGNvbXBhcmluZyBkZWVwIGVxdWFsaXR5LlxuICAgICAgaWYgKF8ua2V5cyhiKS5sZW5ndGggIT09IGxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgICAgIC8vIERlZXAgY29tcGFyZSBlYWNoIG1lbWJlclxuICAgICAgICBrZXkgPSBrZXlzW2xlbmd0aF07XG4gICAgICAgIGlmICghKF8uaGFzKGIsIGtleSkgJiYgZXEoYVtrZXldLCBiW2tleV0sIGFTdGFjaywgYlN0YWNrKSkpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gUmVtb3ZlIHRoZSBmaXJzdCBvYmplY3QgZnJvbSB0aGUgc3RhY2sgb2YgdHJhdmVyc2VkIG9iamVjdHMuXG4gICAgYVN0YWNrLnBvcCgpO1xuICAgIGJTdGFjay5wb3AoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfTtcblxuICAvLyBQZXJmb3JtIGEgZGVlcCBjb21wYXJpc29uIHRvIGNoZWNrIGlmIHR3byBvYmplY3RzIGFyZSBlcXVhbC5cbiAgXy5pc0VxdWFsID0gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBlcShhLCBiKTtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIGFycmF5LCBzdHJpbmcsIG9yIG9iamVjdCBlbXB0eT9cbiAgLy8gQW4gXCJlbXB0eVwiIG9iamVjdCBoYXMgbm8gZW51bWVyYWJsZSBvd24tcHJvcGVydGllcy5cbiAgXy5pc0VtcHR5ID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgaWYgKG9iaiA9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNBcnJheUxpa2Uob2JqKSAmJiAoXy5pc0FycmF5KG9iaikgfHwgXy5pc1N0cmluZyhvYmopIHx8IF8uaXNBcmd1bWVudHMob2JqKSkpIHJldHVybiBvYmoubGVuZ3RoID09PSAwO1xuICAgIHJldHVybiBfLmtleXMob2JqKS5sZW5ndGggPT09IDA7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhIERPTSBlbGVtZW50P1xuICBfLmlzRWxlbWVudCA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiAhIShvYmogJiYgb2JqLm5vZGVUeXBlID09PSAxKTtcbiAgfTtcblxuICAvLyBJcyBhIGdpdmVuIHZhbHVlIGFuIGFycmF5P1xuICAvLyBEZWxlZ2F0ZXMgdG8gRUNNQTUncyBuYXRpdmUgQXJyYXkuaXNBcnJheVxuICBfLmlzQXJyYXkgPSBuYXRpdmVJc0FycmF5IHx8IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YXJpYWJsZSBhbiBvYmplY3Q/XG4gIF8uaXNPYmplY3QgPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiBvYmo7XG4gICAgcmV0dXJuIHR5cGUgPT09ICdmdW5jdGlvbicgfHwgdHlwZSA9PT0gJ29iamVjdCcgJiYgISFvYmo7XG4gIH07XG5cbiAgLy8gQWRkIHNvbWUgaXNUeXBlIG1ldGhvZHM6IGlzQXJndW1lbnRzLCBpc0Z1bmN0aW9uLCBpc1N0cmluZywgaXNOdW1iZXIsIGlzRGF0ZSwgaXNSZWdFeHAsIGlzRXJyb3IuXG4gIF8uZWFjaChbJ0FyZ3VtZW50cycsICdGdW5jdGlvbicsICdTdHJpbmcnLCAnTnVtYmVyJywgJ0RhdGUnLCAnUmVnRXhwJywgJ0Vycm9yJ10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBfWydpcycgKyBuYW1lXSA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgJyArIG5hbWUgKyAnXSc7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gRGVmaW5lIGEgZmFsbGJhY2sgdmVyc2lvbiBvZiB0aGUgbWV0aG9kIGluIGJyb3dzZXJzIChhaGVtLCBJRSA8IDkpLCB3aGVyZVxuICAvLyB0aGVyZSBpc24ndCBhbnkgaW5zcGVjdGFibGUgXCJBcmd1bWVudHNcIiB0eXBlLlxuICBpZiAoIV8uaXNBcmd1bWVudHMoYXJndW1lbnRzKSkge1xuICAgIF8uaXNBcmd1bWVudHMgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgIHJldHVybiBfLmhhcyhvYmosICdjYWxsZWUnKTtcbiAgICB9O1xuICB9XG5cbiAgLy8gT3B0aW1pemUgYGlzRnVuY3Rpb25gIGlmIGFwcHJvcHJpYXRlLiBXb3JrIGFyb3VuZCBzb21lIHR5cGVvZiBidWdzIGluIG9sZCB2OCxcbiAgLy8gSUUgMTEgKCMxNjIxKSwgYW5kIGluIFNhZmFyaSA4ICgjMTkyOSkuXG4gIGlmICh0eXBlb2YgLy4vICE9ICdmdW5jdGlvbicgJiYgdHlwZW9mIEludDhBcnJheSAhPSAnb2JqZWN0Jykge1xuICAgIF8uaXNGdW5jdGlvbiA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIHR5cGVvZiBvYmogPT0gJ2Z1bmN0aW9uJyB8fCBmYWxzZTtcbiAgICB9O1xuICB9XG5cbiAgLy8gSXMgYSBnaXZlbiBvYmplY3QgYSBmaW5pdGUgbnVtYmVyP1xuICBfLmlzRmluaXRlID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIGlzRmluaXRlKG9iaikgJiYgIWlzTmFOKHBhcnNlRmxvYXQob2JqKSk7XG4gIH07XG5cbiAgLy8gSXMgdGhlIGdpdmVuIHZhbHVlIGBOYU5gPyAoTmFOIGlzIHRoZSBvbmx5IG51bWJlciB3aGljaCBkb2VzIG5vdCBlcXVhbCBpdHNlbGYpLlxuICBfLmlzTmFOID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIF8uaXNOdW1iZXIob2JqKSAmJiBvYmogIT09ICtvYmo7XG4gIH07XG5cbiAgLy8gSXMgYSBnaXZlbiB2YWx1ZSBhIGJvb2xlYW4/XG4gIF8uaXNCb29sZWFuID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PT0gdHJ1ZSB8fCBvYmogPT09IGZhbHNlIHx8IHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gJ1tvYmplY3QgQm9vbGVhbl0nO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFsdWUgZXF1YWwgdG8gbnVsbD9cbiAgXy5pc051bGwgPSBmdW5jdGlvbihvYmopIHtcbiAgICByZXR1cm4gb2JqID09PSBudWxsO1xuICB9O1xuXG4gIC8vIElzIGEgZ2l2ZW4gdmFyaWFibGUgdW5kZWZpbmVkP1xuICBfLmlzVW5kZWZpbmVkID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgcmV0dXJuIG9iaiA9PT0gdm9pZCAwO1xuICB9O1xuXG4gIC8vIFNob3J0Y3V0IGZ1bmN0aW9uIGZvciBjaGVja2luZyBpZiBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gcHJvcGVydHkgZGlyZWN0bHlcbiAgLy8gb24gaXRzZWxmIChpbiBvdGhlciB3b3Jkcywgbm90IG9uIGEgcHJvdG90eXBlKS5cbiAgXy5oYXMgPSBmdW5jdGlvbihvYmosIGtleSkge1xuICAgIHJldHVybiBvYmogIT0gbnVsbCAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbiAgfTtcblxuICAvLyBVdGlsaXR5IEZ1bmN0aW9uc1xuICAvLyAtLS0tLS0tLS0tLS0tLS0tLVxuXG4gIC8vIFJ1biBVbmRlcnNjb3JlLmpzIGluICpub0NvbmZsaWN0KiBtb2RlLCByZXR1cm5pbmcgdGhlIGBfYCB2YXJpYWJsZSB0byBpdHNcbiAgLy8gcHJldmlvdXMgb3duZXIuIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LlxuICBfLm5vQ29uZmxpY3QgPSBmdW5jdGlvbigpIHtcbiAgICByb290Ll8gPSBwcmV2aW91c1VuZGVyc2NvcmU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLy8gS2VlcCB0aGUgaWRlbnRpdHkgZnVuY3Rpb24gYXJvdW5kIGZvciBkZWZhdWx0IGl0ZXJhdGVlcy5cbiAgXy5pZGVudGl0eSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuXG4gIC8vIFByZWRpY2F0ZS1nZW5lcmF0aW5nIGZ1bmN0aW9ucy4gT2Z0ZW4gdXNlZnVsIG91dHNpZGUgb2YgVW5kZXJzY29yZS5cbiAgXy5jb25zdGFudCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH07XG4gIH07XG5cbiAgXy5ub29wID0gZnVuY3Rpb24oKXt9O1xuXG4gIF8ucHJvcGVydHkgPSBwcm9wZXJ0eTtcblxuICAvLyBHZW5lcmF0ZXMgYSBmdW5jdGlvbiBmb3IgYSBnaXZlbiBvYmplY3QgdGhhdCByZXR1cm5zIGEgZ2l2ZW4gcHJvcGVydHkuXG4gIF8ucHJvcGVydHlPZiA9IGZ1bmN0aW9uKG9iaikge1xuICAgIHJldHVybiBvYmogPT0gbnVsbCA/IGZ1bmN0aW9uKCl7fSA6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgcmV0dXJuIG9ialtrZXldO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUmV0dXJucyBhIHByZWRpY2F0ZSBmb3IgY2hlY2tpbmcgd2hldGhlciBhbiBvYmplY3QgaGFzIGEgZ2l2ZW4gc2V0IG9mXG4gIC8vIGBrZXk6dmFsdWVgIHBhaXJzLlxuICBfLm1hdGNoZXIgPSBfLm1hdGNoZXMgPSBmdW5jdGlvbihhdHRycykge1xuICAgIGF0dHJzID0gXy5leHRlbmRPd24oe30sIGF0dHJzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24ob2JqKSB7XG4gICAgICByZXR1cm4gXy5pc01hdGNoKG9iaiwgYXR0cnMpO1xuICAgIH07XG4gIH07XG5cbiAgLy8gUnVuIGEgZnVuY3Rpb24gKipuKiogdGltZXMuXG4gIF8udGltZXMgPSBmdW5jdGlvbihuLCBpdGVyYXRlZSwgY29udGV4dCkge1xuICAgIHZhciBhY2N1bSA9IEFycmF5KE1hdGgubWF4KDAsIG4pKTtcbiAgICBpdGVyYXRlZSA9IG9wdGltaXplQ2IoaXRlcmF0ZWUsIGNvbnRleHQsIDEpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbjsgaSsrKSBhY2N1bVtpXSA9IGl0ZXJhdGVlKGkpO1xuICAgIHJldHVybiBhY2N1bTtcbiAgfTtcblxuICAvLyBSZXR1cm4gYSByYW5kb20gaW50ZWdlciBiZXR3ZWVuIG1pbiBhbmQgbWF4IChpbmNsdXNpdmUpLlxuICBfLnJhbmRvbSA9IGZ1bmN0aW9uKG1pbiwgbWF4KSB7XG4gICAgaWYgKG1heCA9PSBudWxsKSB7XG4gICAgICBtYXggPSBtaW47XG4gICAgICBtaW4gPSAwO1xuICAgIH1cbiAgICByZXR1cm4gbWluICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKG1heCAtIG1pbiArIDEpKTtcbiAgfTtcblxuICAvLyBBIChwb3NzaWJseSBmYXN0ZXIpIHdheSB0byBnZXQgdGhlIGN1cnJlbnQgdGltZXN0YW1wIGFzIGFuIGludGVnZXIuXG4gIF8ubm93ID0gRGF0ZS5ub3cgfHwgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xuICB9O1xuXG4gICAvLyBMaXN0IG9mIEhUTUwgZW50aXRpZXMgZm9yIGVzY2FwaW5nLlxuICB2YXIgZXNjYXBlTWFwID0ge1xuICAgICcmJzogJyZhbXA7JyxcbiAgICAnPCc6ICcmbHQ7JyxcbiAgICAnPic6ICcmZ3Q7JyxcbiAgICAnXCInOiAnJnF1b3Q7JyxcbiAgICBcIidcIjogJyYjeDI3OycsXG4gICAgJ2AnOiAnJiN4NjA7J1xuICB9O1xuICB2YXIgdW5lc2NhcGVNYXAgPSBfLmludmVydChlc2NhcGVNYXApO1xuXG4gIC8vIEZ1bmN0aW9ucyBmb3IgZXNjYXBpbmcgYW5kIHVuZXNjYXBpbmcgc3RyaW5ncyB0by9mcm9tIEhUTUwgaW50ZXJwb2xhdGlvbi5cbiAgdmFyIGNyZWF0ZUVzY2FwZXIgPSBmdW5jdGlvbihtYXApIHtcbiAgICB2YXIgZXNjYXBlciA9IGZ1bmN0aW9uKG1hdGNoKSB7XG4gICAgICByZXR1cm4gbWFwW21hdGNoXTtcbiAgICB9O1xuICAgIC8vIFJlZ2V4ZXMgZm9yIGlkZW50aWZ5aW5nIGEga2V5IHRoYXQgbmVlZHMgdG8gYmUgZXNjYXBlZFxuICAgIHZhciBzb3VyY2UgPSAnKD86JyArIF8ua2V5cyhtYXApLmpvaW4oJ3wnKSArICcpJztcbiAgICB2YXIgdGVzdFJlZ2V4cCA9IFJlZ0V4cChzb3VyY2UpO1xuICAgIHZhciByZXBsYWNlUmVnZXhwID0gUmVnRXhwKHNvdXJjZSwgJ2cnKTtcbiAgICByZXR1cm4gZnVuY3Rpb24oc3RyaW5nKSB7XG4gICAgICBzdHJpbmcgPSBzdHJpbmcgPT0gbnVsbCA/ICcnIDogJycgKyBzdHJpbmc7XG4gICAgICByZXR1cm4gdGVzdFJlZ2V4cC50ZXN0KHN0cmluZykgPyBzdHJpbmcucmVwbGFjZShyZXBsYWNlUmVnZXhwLCBlc2NhcGVyKSA6IHN0cmluZztcbiAgICB9O1xuICB9O1xuICBfLmVzY2FwZSA9IGNyZWF0ZUVzY2FwZXIoZXNjYXBlTWFwKTtcbiAgXy51bmVzY2FwZSA9IGNyZWF0ZUVzY2FwZXIodW5lc2NhcGVNYXApO1xuXG4gIC8vIElmIHRoZSB2YWx1ZSBvZiB0aGUgbmFtZWQgYHByb3BlcnR5YCBpcyBhIGZ1bmN0aW9uIHRoZW4gaW52b2tlIGl0IHdpdGggdGhlXG4gIC8vIGBvYmplY3RgIGFzIGNvbnRleHQ7IG90aGVyd2lzZSwgcmV0dXJuIGl0LlxuICBfLnJlc3VsdCA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHksIGZhbGxiYWNrKSB7XG4gICAgdmFyIHZhbHVlID0gb2JqZWN0ID09IG51bGwgPyB2b2lkIDAgOiBvYmplY3RbcHJvcGVydHldO1xuICAgIGlmICh2YWx1ZSA9PT0gdm9pZCAwKSB7XG4gICAgICB2YWx1ZSA9IGZhbGxiYWNrO1xuICAgIH1cbiAgICByZXR1cm4gXy5pc0Z1bmN0aW9uKHZhbHVlKSA/IHZhbHVlLmNhbGwob2JqZWN0KSA6IHZhbHVlO1xuICB9O1xuXG4gIC8vIEdlbmVyYXRlIGEgdW5pcXVlIGludGVnZXIgaWQgKHVuaXF1ZSB3aXRoaW4gdGhlIGVudGlyZSBjbGllbnQgc2Vzc2lvbikuXG4gIC8vIFVzZWZ1bCBmb3IgdGVtcG9yYXJ5IERPTSBpZHMuXG4gIHZhciBpZENvdW50ZXIgPSAwO1xuICBfLnVuaXF1ZUlkID0gZnVuY3Rpb24ocHJlZml4KSB7XG4gICAgdmFyIGlkID0gKytpZENvdW50ZXIgKyAnJztcbiAgICByZXR1cm4gcHJlZml4ID8gcHJlZml4ICsgaWQgOiBpZDtcbiAgfTtcblxuICAvLyBCeSBkZWZhdWx0LCBVbmRlcnNjb3JlIHVzZXMgRVJCLXN0eWxlIHRlbXBsYXRlIGRlbGltaXRlcnMsIGNoYW5nZSB0aGVcbiAgLy8gZm9sbG93aW5nIHRlbXBsYXRlIHNldHRpbmdzIHRvIHVzZSBhbHRlcm5hdGl2ZSBkZWxpbWl0ZXJzLlxuICBfLnRlbXBsYXRlU2V0dGluZ3MgPSB7XG4gICAgZXZhbHVhdGUgICAgOiAvPCUoW1xcc1xcU10rPyklPi9nLFxuICAgIGludGVycG9sYXRlIDogLzwlPShbXFxzXFxTXSs/KSU+L2csXG4gICAgZXNjYXBlICAgICAgOiAvPCUtKFtcXHNcXFNdKz8pJT4vZ1xuICB9O1xuXG4gIC8vIFdoZW4gY3VzdG9taXppbmcgYHRlbXBsYXRlU2V0dGluZ3NgLCBpZiB5b3UgZG9uJ3Qgd2FudCB0byBkZWZpbmUgYW5cbiAgLy8gaW50ZXJwb2xhdGlvbiwgZXZhbHVhdGlvbiBvciBlc2NhcGluZyByZWdleCwgd2UgbmVlZCBvbmUgdGhhdCBpc1xuICAvLyBndWFyYW50ZWVkIG5vdCB0byBtYXRjaC5cbiAgdmFyIG5vTWF0Y2ggPSAvKC4pXi87XG5cbiAgLy8gQ2VydGFpbiBjaGFyYWN0ZXJzIG5lZWQgdG8gYmUgZXNjYXBlZCBzbyB0aGF0IHRoZXkgY2FuIGJlIHB1dCBpbnRvIGFcbiAgLy8gc3RyaW5nIGxpdGVyYWwuXG4gIHZhciBlc2NhcGVzID0ge1xuICAgIFwiJ1wiOiAgICAgIFwiJ1wiLFxuICAgICdcXFxcJzogICAgICdcXFxcJyxcbiAgICAnXFxyJzogICAgICdyJyxcbiAgICAnXFxuJzogICAgICduJyxcbiAgICAnXFx1MjAyOCc6ICd1MjAyOCcsXG4gICAgJ1xcdTIwMjknOiAndTIwMjknXG4gIH07XG5cbiAgdmFyIGVzY2FwZXIgPSAvXFxcXHwnfFxccnxcXG58XFx1MjAyOHxcXHUyMDI5L2c7XG5cbiAgdmFyIGVzY2FwZUNoYXIgPSBmdW5jdGlvbihtYXRjaCkge1xuICAgIHJldHVybiAnXFxcXCcgKyBlc2NhcGVzW21hdGNoXTtcbiAgfTtcblxuICAvLyBKYXZhU2NyaXB0IG1pY3JvLXRlbXBsYXRpbmcsIHNpbWlsYXIgdG8gSm9obiBSZXNpZydzIGltcGxlbWVudGF0aW9uLlxuICAvLyBVbmRlcnNjb3JlIHRlbXBsYXRpbmcgaGFuZGxlcyBhcmJpdHJhcnkgZGVsaW1pdGVycywgcHJlc2VydmVzIHdoaXRlc3BhY2UsXG4gIC8vIGFuZCBjb3JyZWN0bHkgZXNjYXBlcyBxdW90ZXMgd2l0aGluIGludGVycG9sYXRlZCBjb2RlLlxuICAvLyBOQjogYG9sZFNldHRpbmdzYCBvbmx5IGV4aXN0cyBmb3IgYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gIF8udGVtcGxhdGUgPSBmdW5jdGlvbih0ZXh0LCBzZXR0aW5ncywgb2xkU2V0dGluZ3MpIHtcbiAgICBpZiAoIXNldHRpbmdzICYmIG9sZFNldHRpbmdzKSBzZXR0aW5ncyA9IG9sZFNldHRpbmdzO1xuICAgIHNldHRpbmdzID0gXy5kZWZhdWx0cyh7fSwgc2V0dGluZ3MsIF8udGVtcGxhdGVTZXR0aW5ncyk7XG5cbiAgICAvLyBDb21iaW5lIGRlbGltaXRlcnMgaW50byBvbmUgcmVndWxhciBleHByZXNzaW9uIHZpYSBhbHRlcm5hdGlvbi5cbiAgICB2YXIgbWF0Y2hlciA9IFJlZ0V4cChbXG4gICAgICAoc2V0dGluZ3MuZXNjYXBlIHx8IG5vTWF0Y2gpLnNvdXJjZSxcbiAgICAgIChzZXR0aW5ncy5pbnRlcnBvbGF0ZSB8fCBub01hdGNoKS5zb3VyY2UsXG4gICAgICAoc2V0dGluZ3MuZXZhbHVhdGUgfHwgbm9NYXRjaCkuc291cmNlXG4gICAgXS5qb2luKCd8JykgKyAnfCQnLCAnZycpO1xuXG4gICAgLy8gQ29tcGlsZSB0aGUgdGVtcGxhdGUgc291cmNlLCBlc2NhcGluZyBzdHJpbmcgbGl0ZXJhbHMgYXBwcm9wcmlhdGVseS5cbiAgICB2YXIgaW5kZXggPSAwO1xuICAgIHZhciBzb3VyY2UgPSBcIl9fcCs9J1wiO1xuICAgIHRleHQucmVwbGFjZShtYXRjaGVyLCBmdW5jdGlvbihtYXRjaCwgZXNjYXBlLCBpbnRlcnBvbGF0ZSwgZXZhbHVhdGUsIG9mZnNldCkge1xuICAgICAgc291cmNlICs9IHRleHQuc2xpY2UoaW5kZXgsIG9mZnNldCkucmVwbGFjZShlc2NhcGVyLCBlc2NhcGVDaGFyKTtcbiAgICAgIGluZGV4ID0gb2Zmc2V0ICsgbWF0Y2gubGVuZ3RoO1xuXG4gICAgICBpZiAoZXNjYXBlKSB7XG4gICAgICAgIHNvdXJjZSArPSBcIicrXFxuKChfX3Q9KFwiICsgZXNjYXBlICsgXCIpKT09bnVsbD8nJzpfLmVzY2FwZShfX3QpKStcXG4nXCI7XG4gICAgICB9IGVsc2UgaWYgKGludGVycG9sYXRlKSB7XG4gICAgICAgIHNvdXJjZSArPSBcIicrXFxuKChfX3Q9KFwiICsgaW50ZXJwb2xhdGUgKyBcIikpPT1udWxsPycnOl9fdCkrXFxuJ1wiO1xuICAgICAgfSBlbHNlIGlmIChldmFsdWF0ZSkge1xuICAgICAgICBzb3VyY2UgKz0gXCInO1xcblwiICsgZXZhbHVhdGUgKyBcIlxcbl9fcCs9J1wiO1xuICAgICAgfVxuXG4gICAgICAvLyBBZG9iZSBWTXMgbmVlZCB0aGUgbWF0Y2ggcmV0dXJuZWQgdG8gcHJvZHVjZSB0aGUgY29ycmVjdCBvZmZlc3QuXG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfSk7XG4gICAgc291cmNlICs9IFwiJztcXG5cIjtcblxuICAgIC8vIElmIGEgdmFyaWFibGUgaXMgbm90IHNwZWNpZmllZCwgcGxhY2UgZGF0YSB2YWx1ZXMgaW4gbG9jYWwgc2NvcGUuXG4gICAgaWYgKCFzZXR0aW5ncy52YXJpYWJsZSkgc291cmNlID0gJ3dpdGgob2JqfHx7fSl7XFxuJyArIHNvdXJjZSArICd9XFxuJztcblxuICAgIHNvdXJjZSA9IFwidmFyIF9fdCxfX3A9JycsX19qPUFycmF5LnByb3RvdHlwZS5qb2luLFwiICtcbiAgICAgIFwicHJpbnQ9ZnVuY3Rpb24oKXtfX3ArPV9fai5jYWxsKGFyZ3VtZW50cywnJyk7fTtcXG5cIiArXG4gICAgICBzb3VyY2UgKyAncmV0dXJuIF9fcDtcXG4nO1xuXG4gICAgdHJ5IHtcbiAgICAgIHZhciByZW5kZXIgPSBuZXcgRnVuY3Rpb24oc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaicsICdfJywgc291cmNlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBlLnNvdXJjZSA9IHNvdXJjZTtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuXG4gICAgdmFyIHRlbXBsYXRlID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgcmV0dXJuIHJlbmRlci5jYWxsKHRoaXMsIGRhdGEsIF8pO1xuICAgIH07XG5cbiAgICAvLyBQcm92aWRlIHRoZSBjb21waWxlZCBzb3VyY2UgYXMgYSBjb252ZW5pZW5jZSBmb3IgcHJlY29tcGlsYXRpb24uXG4gICAgdmFyIGFyZ3VtZW50ID0gc2V0dGluZ3MudmFyaWFibGUgfHwgJ29iaic7XG4gICAgdGVtcGxhdGUuc291cmNlID0gJ2Z1bmN0aW9uKCcgKyBhcmd1bWVudCArICcpe1xcbicgKyBzb3VyY2UgKyAnfSc7XG5cbiAgICByZXR1cm4gdGVtcGxhdGU7XG4gIH07XG5cbiAgLy8gQWRkIGEgXCJjaGFpblwiIGZ1bmN0aW9uLiBTdGFydCBjaGFpbmluZyBhIHdyYXBwZWQgVW5kZXJzY29yZSBvYmplY3QuXG4gIF8uY2hhaW4gPSBmdW5jdGlvbihvYmopIHtcbiAgICB2YXIgaW5zdGFuY2UgPSBfKG9iaik7XG4gICAgaW5zdGFuY2UuX2NoYWluID0gdHJ1ZTtcbiAgICByZXR1cm4gaW5zdGFuY2U7XG4gIH07XG5cbiAgLy8gT09QXG4gIC8vIC0tLS0tLS0tLS0tLS0tLVxuICAvLyBJZiBVbmRlcnNjb3JlIGlzIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLCBpdCByZXR1cm5zIGEgd3JhcHBlZCBvYmplY3QgdGhhdFxuICAvLyBjYW4gYmUgdXNlZCBPTy1zdHlsZS4gVGhpcyB3cmFwcGVyIGhvbGRzIGFsdGVyZWQgdmVyc2lvbnMgb2YgYWxsIHRoZVxuICAvLyB1bmRlcnNjb3JlIGZ1bmN0aW9ucy4gV3JhcHBlZCBvYmplY3RzIG1heSBiZSBjaGFpbmVkLlxuXG4gIC8vIEhlbHBlciBmdW5jdGlvbiB0byBjb250aW51ZSBjaGFpbmluZyBpbnRlcm1lZGlhdGUgcmVzdWx0cy5cbiAgdmFyIHJlc3VsdCA9IGZ1bmN0aW9uKGluc3RhbmNlLCBvYmopIHtcbiAgICByZXR1cm4gaW5zdGFuY2UuX2NoYWluID8gXyhvYmopLmNoYWluKCkgOiBvYmo7XG4gIH07XG5cbiAgLy8gQWRkIHlvdXIgb3duIGN1c3RvbSBmdW5jdGlvbnMgdG8gdGhlIFVuZGVyc2NvcmUgb2JqZWN0LlxuICBfLm1peGluID0gZnVuY3Rpb24ob2JqKSB7XG4gICAgXy5lYWNoKF8uZnVuY3Rpb25zKG9iaiksIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHZhciBmdW5jID0gX1tuYW1lXSA9IG9ialtuYW1lXTtcbiAgICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBhcmdzID0gW3RoaXMuX3dyYXBwZWRdO1xuICAgICAgICBwdXNoLmFwcGx5KGFyZ3MsIGFyZ3VtZW50cyk7XG4gICAgICAgIHJldHVybiByZXN1bHQodGhpcywgZnVuYy5hcHBseShfLCBhcmdzKSk7XG4gICAgICB9O1xuICAgIH0pO1xuICB9O1xuXG4gIC8vIEFkZCBhbGwgb2YgdGhlIFVuZGVyc2NvcmUgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyIG9iamVjdC5cbiAgXy5taXhpbihfKTtcblxuICAvLyBBZGQgYWxsIG11dGF0b3IgQXJyYXkgZnVuY3Rpb25zIHRvIHRoZSB3cmFwcGVyLlxuICBfLmVhY2goWydwb3AnLCAncHVzaCcsICdyZXZlcnNlJywgJ3NoaWZ0JywgJ3NvcnQnLCAnc3BsaWNlJywgJ3Vuc2hpZnQnXSwgZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciBtZXRob2QgPSBBcnJheVByb3RvW25hbWVdO1xuICAgIF8ucHJvdG90eXBlW25hbWVdID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgb2JqID0gdGhpcy5fd3JhcHBlZDtcbiAgICAgIG1ldGhvZC5hcHBseShvYmosIGFyZ3VtZW50cyk7XG4gICAgICBpZiAoKG5hbWUgPT09ICdzaGlmdCcgfHwgbmFtZSA9PT0gJ3NwbGljZScpICYmIG9iai5sZW5ndGggPT09IDApIGRlbGV0ZSBvYmpbMF07XG4gICAgICByZXR1cm4gcmVzdWx0KHRoaXMsIG9iaik7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gQWRkIGFsbCBhY2Nlc3NvciBBcnJheSBmdW5jdGlvbnMgdG8gdGhlIHdyYXBwZXIuXG4gIF8uZWFjaChbJ2NvbmNhdCcsICdqb2luJywgJ3NsaWNlJ10sIGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgbWV0aG9kID0gQXJyYXlQcm90b1tuYW1lXTtcbiAgICBfLnByb3RvdHlwZVtuYW1lXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHJlc3VsdCh0aGlzLCBtZXRob2QuYXBwbHkodGhpcy5fd3JhcHBlZCwgYXJndW1lbnRzKSk7XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gRXh0cmFjdHMgdGhlIHJlc3VsdCBmcm9tIGEgd3JhcHBlZCBhbmQgY2hhaW5lZCBvYmplY3QuXG4gIF8ucHJvdG90eXBlLnZhbHVlID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3dyYXBwZWQ7XG4gIH07XG5cbiAgLy8gUHJvdmlkZSB1bndyYXBwaW5nIHByb3h5IGZvciBzb21lIG1ldGhvZHMgdXNlZCBpbiBlbmdpbmUgb3BlcmF0aW9uc1xuICAvLyBzdWNoIGFzIGFyaXRobWV0aWMgYW5kIEpTT04gc3RyaW5naWZpY2F0aW9uLlxuICBfLnByb3RvdHlwZS52YWx1ZU9mID0gXy5wcm90b3R5cGUudG9KU09OID0gXy5wcm90b3R5cGUudmFsdWU7XG5cbiAgXy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gJycgKyB0aGlzLl93cmFwcGVkO1xuICB9O1xuXG4gIC8vIEFNRCByZWdpc3RyYXRpb24gaGFwcGVucyBhdCB0aGUgZW5kIGZvciBjb21wYXRpYmlsaXR5IHdpdGggQU1EIGxvYWRlcnNcbiAgLy8gdGhhdCBtYXkgbm90IGVuZm9yY2UgbmV4dC10dXJuIHNlbWFudGljcyBvbiBtb2R1bGVzLiBFdmVuIHRob3VnaCBnZW5lcmFsXG4gIC8vIHByYWN0aWNlIGZvciBBTUQgcmVnaXN0cmF0aW9uIGlzIHRvIGJlIGFub255bW91cywgdW5kZXJzY29yZSByZWdpc3RlcnNcbiAgLy8gYXMgYSBuYW1lZCBtb2R1bGUgYmVjYXVzZSwgbGlrZSBqUXVlcnksIGl0IGlzIGEgYmFzZSBsaWJyYXJ5IHRoYXQgaXNcbiAgLy8gcG9wdWxhciBlbm91Z2ggdG8gYmUgYnVuZGxlZCBpbiBhIHRoaXJkIHBhcnR5IGxpYiwgYnV0IG5vdCBiZSBwYXJ0IG9mXG4gIC8vIGFuIEFNRCBsb2FkIHJlcXVlc3QuIFRob3NlIGNhc2VzIGNvdWxkIGdlbmVyYXRlIGFuIGVycm9yIHdoZW4gYW5cbiAgLy8gYW5vbnltb3VzIGRlZmluZSgpIGlzIGNhbGxlZCBvdXRzaWRlIG9mIGEgbG9hZGVyIHJlcXVlc3QuXG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICBkZWZpbmUoJ3VuZGVyc2NvcmUnLCBbXSwgZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gXztcbiAgICB9KTtcbiAgfVxufS5jYWxsKHRoaXMpKTtcbiIsIiFmdW5jdGlvbigpe1xuICB2YXIgZDMgPSB7dmVyc2lvbjogXCIzLjUuMTdcIn07IC8vIHNlbXZlclxudmFyIGQzX2RvY3VtZW50ID0gdGhpcy5kb2N1bWVudDtcblxuZnVuY3Rpb24gZDNfZG9jdW1lbnRFbGVtZW50KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGVcbiAgICAgICYmIChub2RlLm93bmVyRG9jdW1lbnQgLy8gbm9kZSBpcyBhIE5vZGVcbiAgICAgIHx8IG5vZGUuZG9jdW1lbnQgLy8gbm9kZSBpcyBhIFdpbmRvd1xuICAgICAgfHwgbm9kZSkuZG9jdW1lbnRFbGVtZW50OyAvLyBub2RlIGlzIGEgRG9jdW1lbnRcbn1cblxuZnVuY3Rpb24gZDNfd2luZG93KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGVcbiAgICAgICYmICgobm9kZS5vd25lckRvY3VtZW50ICYmIG5vZGUub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldykgLy8gbm9kZSBpcyBhIE5vZGVcbiAgICAgICAgfHwgKG5vZGUuZG9jdW1lbnQgJiYgbm9kZSkgLy8gbm9kZSBpcyBhIFdpbmRvd1xuICAgICAgICB8fCBub2RlLmRlZmF1bHRWaWV3KTsgLy8gbm9kZSBpcyBhIERvY3VtZW50XG59XG5mdW5jdGlvbiBkM19pZGVudGl0eShkKSB7XG4gIHJldHVybiBkO1xufVxuLy8gQ29waWVzIGEgdmFyaWFibGUgbnVtYmVyIG9mIG1ldGhvZHMgZnJvbSBzb3VyY2UgdG8gdGFyZ2V0LlxuZDMucmViaW5kID0gZnVuY3Rpb24odGFyZ2V0LCBzb3VyY2UpIHtcbiAgdmFyIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aCwgbWV0aG9kO1xuICB3aGlsZSAoKytpIDwgbikgdGFyZ2V0W21ldGhvZCA9IGFyZ3VtZW50c1tpXV0gPSBkM19yZWJpbmQodGFyZ2V0LCBzb3VyY2UsIHNvdXJjZVttZXRob2RdKTtcbiAgcmV0dXJuIHRhcmdldDtcbn07XG5cbi8vIE1ldGhvZCBpcyBhc3N1bWVkIHRvIGJlIGEgc3RhbmRhcmQgRDMgZ2V0dGVyLXNldHRlcjpcbi8vIElmIHBhc3NlZCB3aXRoIG5vIGFyZ3VtZW50cywgZ2V0cyB0aGUgdmFsdWUuXG4vLyBJZiBwYXNzZWQgd2l0aCBhcmd1bWVudHMsIHNldHMgdGhlIHZhbHVlIGFuZCByZXR1cm5zIHRoZSB0YXJnZXQuXG5mdW5jdGlvbiBkM19yZWJpbmQodGFyZ2V0LCBzb3VyY2UsIG1ldGhvZCkge1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZhbHVlID0gbWV0aG9kLmFwcGx5KHNvdXJjZSwgYXJndW1lbnRzKTtcbiAgICByZXR1cm4gdmFsdWUgPT09IHNvdXJjZSA/IHRhcmdldCA6IHZhbHVlO1xuICB9O1xufVxuZnVuY3Rpb24gZDNfdmVuZG9yU3ltYm9sKG9iamVjdCwgbmFtZSkge1xuICBpZiAobmFtZSBpbiBvYmplY3QpIHJldHVybiBuYW1lO1xuICBuYW1lID0gbmFtZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoMSk7XG4gIGZvciAodmFyIGkgPSAwLCBuID0gZDNfdmVuZG9yUHJlZml4ZXMubGVuZ3RoOyBpIDwgbjsgKytpKSB7XG4gICAgdmFyIHByZWZpeE5hbWUgPSBkM192ZW5kb3JQcmVmaXhlc1tpXSArIG5hbWU7XG4gICAgaWYgKHByZWZpeE5hbWUgaW4gb2JqZWN0KSByZXR1cm4gcHJlZml4TmFtZTtcbiAgfVxufVxuXG52YXIgZDNfdmVuZG9yUHJlZml4ZXMgPSBbXCJ3ZWJraXRcIiwgXCJtc1wiLCBcIm1velwiLCBcIk1velwiLCBcIm9cIiwgXCJPXCJdO1xuZnVuY3Rpb24gZDNfY2xhc3MoY3RvciwgcHJvcGVydGllcykge1xuICBmb3IgKHZhciBrZXkgaW4gcHJvcGVydGllcykge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjdG9yLnByb3RvdHlwZSwga2V5LCB7XG4gICAgICB2YWx1ZTogcHJvcGVydGllc1trZXldLFxuICAgICAgZW51bWVyYWJsZTogZmFsc2VcbiAgICB9KTtcbiAgfVxufVxuXG5kMy5tYXAgPSBmdW5jdGlvbihvYmplY3QsIGYpIHtcbiAgdmFyIG1hcCA9IG5ldyBkM19NYXA7XG4gIGlmIChvYmplY3QgaW5zdGFuY2VvZiBkM19NYXApIHtcbiAgICBvYmplY3QuZm9yRWFjaChmdW5jdGlvbihrZXksIHZhbHVlKSB7IG1hcC5zZXQoa2V5LCB2YWx1ZSk7IH0pO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkob2JqZWN0KSkge1xuICAgIHZhciBpID0gLTEsXG4gICAgICAgIG4gPSBvYmplY3QubGVuZ3RoLFxuICAgICAgICBvO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB3aGlsZSAoKytpIDwgbikgbWFwLnNldChpLCBvYmplY3RbaV0pO1xuICAgIGVsc2Ugd2hpbGUgKCsraSA8IG4pIG1hcC5zZXQoZi5jYWxsKG9iamVjdCwgbyA9IG9iamVjdFtpXSwgaSksIG8pO1xuICB9IGVsc2Uge1xuICAgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIG1hcC5zZXQoa2V5LCBvYmplY3Rba2V5XSk7XG4gIH1cbiAgcmV0dXJuIG1hcDtcbn07XG5cbmZ1bmN0aW9uIGQzX01hcCgpIHtcbiAgdGhpcy5fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbn1cblxudmFyIGQzX21hcF9wcm90byA9IFwiX19wcm90b19fXCIsXG4gICAgZDNfbWFwX3plcm8gPSBcIlxcMFwiO1xuXG5kM19jbGFzcyhkM19NYXAsIHtcbiAgaGFzOiBkM19tYXBfaGFzLFxuICBnZXQ6IGZ1bmN0aW9uKGtleSkge1xuICAgIHJldHVybiB0aGlzLl9bZDNfbWFwX2VzY2FwZShrZXkpXTtcbiAgfSxcbiAgc2V0OiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMuX1tkM19tYXBfZXNjYXBlKGtleSldID0gdmFsdWU7XG4gIH0sXG4gIHJlbW92ZTogZDNfbWFwX3JlbW92ZSxcbiAga2V5czogZDNfbWFwX2tleXMsXG4gIHZhbHVlczogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl8pIHZhbHVlcy5wdXNoKHRoaXMuX1trZXldKTtcbiAgICByZXR1cm4gdmFsdWVzO1xuICB9LFxuICBlbnRyaWVzOiBmdW5jdGlvbigpIHtcbiAgICB2YXIgZW50cmllcyA9IFtdO1xuICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl8pIGVudHJpZXMucHVzaCh7a2V5OiBkM19tYXBfdW5lc2NhcGUoa2V5KSwgdmFsdWU6IHRoaXMuX1trZXldfSk7XG4gICAgcmV0dXJuIGVudHJpZXM7XG4gIH0sXG4gIHNpemU6IGQzX21hcF9zaXplLFxuICBlbXB0eTogZDNfbWFwX2VtcHR5LFxuICBmb3JFYWNoOiBmdW5jdGlvbihmKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHRoaXMuXykgZi5jYWxsKHRoaXMsIGQzX21hcF91bmVzY2FwZShrZXkpLCB0aGlzLl9ba2V5XSk7XG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBkM19tYXBfZXNjYXBlKGtleSkge1xuICByZXR1cm4gKGtleSArPSBcIlwiKSA9PT0gZDNfbWFwX3Byb3RvIHx8IGtleVswXSA9PT0gZDNfbWFwX3plcm8gPyBkM19tYXBfemVybyArIGtleSA6IGtleTtcbn1cblxuZnVuY3Rpb24gZDNfbWFwX3VuZXNjYXBlKGtleSkge1xuICByZXR1cm4gKGtleSArPSBcIlwiKVswXSA9PT0gZDNfbWFwX3plcm8gPyBrZXkuc2xpY2UoMSkgOiBrZXk7XG59XG5cbmZ1bmN0aW9uIGQzX21hcF9oYXMoa2V5KSB7XG4gIHJldHVybiBkM19tYXBfZXNjYXBlKGtleSkgaW4gdGhpcy5fO1xufVxuXG5mdW5jdGlvbiBkM19tYXBfcmVtb3ZlKGtleSkge1xuICByZXR1cm4gKGtleSA9IGQzX21hcF9lc2NhcGUoa2V5KSkgaW4gdGhpcy5fICYmIGRlbGV0ZSB0aGlzLl9ba2V5XTtcbn1cblxuZnVuY3Rpb24gZDNfbWFwX2tleXMoKSB7XG4gIHZhciBrZXlzID0gW107XG4gIGZvciAodmFyIGtleSBpbiB0aGlzLl8pIGtleXMucHVzaChkM19tYXBfdW5lc2NhcGUoa2V5KSk7XG4gIHJldHVybiBrZXlzO1xufVxuXG5mdW5jdGlvbiBkM19tYXBfc2l6ZSgpIHtcbiAgdmFyIHNpemUgPSAwO1xuICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fKSArK3NpemU7XG4gIHJldHVybiBzaXplO1xufVxuXG5mdW5jdGlvbiBkM19tYXBfZW1wdHkoKSB7XG4gIGZvciAodmFyIGtleSBpbiB0aGlzLl8pIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHRydWU7XG59XG52YXIgZDNfYXJyYXlTbGljZSA9IFtdLnNsaWNlLFxuICAgIGQzX2FycmF5ID0gZnVuY3Rpb24obGlzdCkgeyByZXR1cm4gZDNfYXJyYXlTbGljZS5jYWxsKGxpc3QpOyB9OyAvLyBjb252ZXJzaW9uIGZvciBOb2RlTGlzdHNcbmZ1bmN0aW9uIGQzX25vb3AoKSB7fVxuXG5kMy5kaXNwYXRjaCA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZGlzcGF0Y2ggPSBuZXcgZDNfZGlzcGF0Y2gsXG4gICAgICBpID0gLTEsXG4gICAgICBuID0gYXJndW1lbnRzLmxlbmd0aDtcbiAgd2hpbGUgKCsraSA8IG4pIGRpc3BhdGNoW2FyZ3VtZW50c1tpXV0gPSBkM19kaXNwYXRjaF9ldmVudChkaXNwYXRjaCk7XG4gIHJldHVybiBkaXNwYXRjaDtcbn07XG5cbmZ1bmN0aW9uIGQzX2Rpc3BhdGNoKCkge31cblxuZDNfZGlzcGF0Y2gucHJvdG90eXBlLm9uID0gZnVuY3Rpb24odHlwZSwgbGlzdGVuZXIpIHtcbiAgdmFyIGkgPSB0eXBlLmluZGV4T2YoXCIuXCIpLFxuICAgICAgbmFtZSA9IFwiXCI7XG5cbiAgLy8gRXh0cmFjdCBvcHRpb25hbCBuYW1lc3BhY2UsIGUuZy4sIFwiY2xpY2suZm9vXCJcbiAgaWYgKGkgPj0gMCkge1xuICAgIG5hbWUgPSB0eXBlLnNsaWNlKGkgKyAxKTtcbiAgICB0eXBlID0gdHlwZS5zbGljZSgwLCBpKTtcbiAgfVxuXG4gIGlmICh0eXBlKSByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA8IDJcbiAgICAgID8gdGhpc1t0eXBlXS5vbihuYW1lKVxuICAgICAgOiB0aGlzW3R5cGVdLm9uKG5hbWUsIGxpc3RlbmVyKTtcblxuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgIGlmIChsaXN0ZW5lciA9PSBudWxsKSBmb3IgKHR5cGUgaW4gdGhpcykge1xuICAgICAgaWYgKHRoaXMuaGFzT3duUHJvcGVydHkodHlwZSkpIHRoaXNbdHlwZV0ub24obmFtZSwgbnVsbCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG59O1xuXG5mdW5jdGlvbiBkM19kaXNwYXRjaF9ldmVudChkaXNwYXRjaCkge1xuICB2YXIgbGlzdGVuZXJzID0gW10sXG4gICAgICBsaXN0ZW5lckJ5TmFtZSA9IG5ldyBkM19NYXA7XG5cbiAgZnVuY3Rpb24gZXZlbnQoKSB7XG4gICAgdmFyIHogPSBsaXN0ZW5lcnMsIC8vIGRlZmVuc2l2ZSByZWZlcmVuY2VcbiAgICAgICAgaSA9IC0xLFxuICAgICAgICBuID0gei5sZW5ndGgsXG4gICAgICAgIGw7XG4gICAgd2hpbGUgKCsraSA8IG4pIGlmIChsID0geltpXS5vbikgbC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIHJldHVybiBkaXNwYXRjaDtcbiAgfVxuXG4gIGV2ZW50Lm9uID0gZnVuY3Rpb24obmFtZSwgbGlzdGVuZXIpIHtcbiAgICB2YXIgbCA9IGxpc3RlbmVyQnlOYW1lLmdldChuYW1lKSxcbiAgICAgICAgaTtcblxuICAgIC8vIHJldHVybiB0aGUgY3VycmVudCBsaXN0ZW5lciwgaWYgYW55XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSByZXR1cm4gbCAmJiBsLm9uO1xuXG4gICAgLy8gcmVtb3ZlIHRoZSBvbGQgbGlzdGVuZXIsIGlmIGFueSAod2l0aCBjb3B5LW9uLXdyaXRlKVxuICAgIGlmIChsKSB7XG4gICAgICBsLm9uID0gbnVsbDtcbiAgICAgIGxpc3RlbmVycyA9IGxpc3RlbmVycy5zbGljZSgwLCBpID0gbGlzdGVuZXJzLmluZGV4T2YobCkpLmNvbmNhdChsaXN0ZW5lcnMuc2xpY2UoaSArIDEpKTtcbiAgICAgIGxpc3RlbmVyQnlOYW1lLnJlbW92ZShuYW1lKTtcbiAgICB9XG5cbiAgICAvLyBhZGQgdGhlIG5ldyBsaXN0ZW5lciwgaWYgYW55XG4gICAgaWYgKGxpc3RlbmVyKSBsaXN0ZW5lcnMucHVzaChsaXN0ZW5lckJ5TmFtZS5zZXQobmFtZSwge29uOiBsaXN0ZW5lcn0pKTtcblxuICAgIHJldHVybiBkaXNwYXRjaDtcbiAgfTtcblxuICByZXR1cm4gZXZlbnQ7XG59XG5cbmQzLmV2ZW50ID0gbnVsbDtcblxuZnVuY3Rpb24gZDNfZXZlbnRQcmV2ZW50RGVmYXVsdCgpIHtcbiAgZDMuZXZlbnQucHJldmVudERlZmF1bHQoKTtcbn1cblxuZnVuY3Rpb24gZDNfZXZlbnRTb3VyY2UoKSB7XG4gIHZhciBlID0gZDMuZXZlbnQsIHM7XG4gIHdoaWxlIChzID0gZS5zb3VyY2VFdmVudCkgZSA9IHM7XG4gIHJldHVybiBlO1xufVxuXG4vLyBMaWtlIGQzLmRpc3BhdGNoLCBidXQgZm9yIGN1c3RvbSBldmVudHMgYWJzdHJhY3RpbmcgbmF0aXZlIFVJIGV2ZW50cy4gVGhlc2Vcbi8vIGV2ZW50cyBoYXZlIGEgdGFyZ2V0IGNvbXBvbmVudCAoc3VjaCBhcyBhIGJydXNoKSwgYSB0YXJnZXQgZWxlbWVudCAoc3VjaCBhc1xuLy8gdGhlIHN2ZzpnIGVsZW1lbnQgY29udGFpbmluZyB0aGUgYnJ1c2gpIGFuZCB0aGUgc3RhbmRhcmQgYXJndW1lbnRzIGBkYCAodGhlXG4vLyB0YXJnZXQgZWxlbWVudCdzIGRhdGEpIGFuZCBgaWAgKHRoZSBzZWxlY3Rpb24gaW5kZXggb2YgdGhlIHRhcmdldCBlbGVtZW50KS5cbmZ1bmN0aW9uIGQzX2V2ZW50RGlzcGF0Y2godGFyZ2V0KSB7XG4gIHZhciBkaXNwYXRjaCA9IG5ldyBkM19kaXNwYXRjaCxcbiAgICAgIGkgPSAwLFxuICAgICAgbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraSA8IG4pIGRpc3BhdGNoW2FyZ3VtZW50c1tpXV0gPSBkM19kaXNwYXRjaF9ldmVudChkaXNwYXRjaCk7XG5cbiAgLy8gQ3JlYXRlcyBhIGRpc3BhdGNoIGNvbnRleHQgZm9yIHRoZSBzcGVjaWZpZWQgYHRoaXpgICh0eXBpY2FsbHksIHRoZSB0YXJnZXRcbiAgLy8gRE9NIGVsZW1lbnQgdGhhdCByZWNlaXZlZCB0aGUgc291cmNlIGV2ZW50KSBhbmQgYGFyZ3VtZW50emAgKHR5cGljYWxseSwgdGhlXG4gIC8vIGRhdGEgYGRgIGFuZCBpbmRleCBgaWAgb2YgdGhlIHRhcmdldCBlbGVtZW50KS4gVGhlIHJldHVybmVkIGZ1bmN0aW9uIGNhbiBiZVxuICAvLyB1c2VkIHRvIGRpc3BhdGNoIGFuIGV2ZW50IHRvIGFueSByZWdpc3RlcmVkIGxpc3RlbmVyczsgdGhlIGZ1bmN0aW9uIHRha2VzIGFcbiAgLy8gc2luZ2xlIGFyZ3VtZW50IGFzIGlucHV0LCBiZWluZyB0aGUgZXZlbnQgdG8gZGlzcGF0Y2guIFRoZSBldmVudCBtdXN0IGhhdmVcbiAgLy8gYSBcInR5cGVcIiBhdHRyaWJ1dGUgd2hpY2ggY29ycmVzcG9uZHMgdG8gYSB0eXBlIHJlZ2lzdGVyZWQgaW4gdGhlXG4gIC8vIGNvbnN0cnVjdG9yLiBUaGlzIGNvbnRleHQgd2lsbCBhdXRvbWF0aWNhbGx5IHBvcHVsYXRlIHRoZSBcInNvdXJjZUV2ZW50XCIgYW5kXG4gIC8vIFwidGFyZ2V0XCIgYXR0cmlidXRlcyBvZiB0aGUgZXZlbnQsIGFzIHdlbGwgYXMgc2V0dGluZyB0aGUgYGQzLmV2ZW50YCBnbG9iYWxcbiAgLy8gZm9yIHRoZSBkdXJhdGlvbiBvZiB0aGUgbm90aWZpY2F0aW9uLlxuICBkaXNwYXRjaC5vZiA9IGZ1bmN0aW9uKHRoaXosIGFyZ3VtZW50eikge1xuICAgIHJldHVybiBmdW5jdGlvbihlMSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIGUwID1cbiAgICAgICAgZTEuc291cmNlRXZlbnQgPSBkMy5ldmVudDtcbiAgICAgICAgZTEudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICBkMy5ldmVudCA9IGUxO1xuICAgICAgICBkaXNwYXRjaFtlMS50eXBlXS5hcHBseSh0aGl6LCBhcmd1bWVudHopO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgZDMuZXZlbnQgPSBlMDtcbiAgICAgIH1cbiAgICB9O1xuICB9O1xuXG4gIHJldHVybiBkaXNwYXRjaDtcbn1cbmQzLnJlcXVvdGUgPSBmdW5jdGlvbihzKSB7XG4gIHJldHVybiBzLnJlcGxhY2UoZDNfcmVxdW90ZV9yZSwgXCJcXFxcJCZcIik7XG59O1xuXG52YXIgZDNfcmVxdW90ZV9yZSA9IC9bXFxcXFxcXlxcJFxcKlxcK1xcP1xcfFxcW1xcXVxcKFxcKVxcLlxce1xcfV0vZztcbnZhciBkM19zdWJjbGFzcyA9IHt9Ll9fcHJvdG9fXz9cblxuLy8gVW50aWwgRUNNQVNjcmlwdCBzdXBwb3J0cyBhcnJheSBzdWJjbGFzc2luZywgcHJvdG90eXBlIGluamVjdGlvbiB3b3JrcyB3ZWxsLlxuZnVuY3Rpb24ob2JqZWN0LCBwcm90b3R5cGUpIHtcbiAgb2JqZWN0Ll9fcHJvdG9fXyA9IHByb3RvdHlwZTtcbn06XG5cbi8vIEFuZCBpZiB5b3VyIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IF9fcHJvdG9fXywgd2UnbGwgdXNlIGRpcmVjdCBleHRlbnNpb24uXG5mdW5jdGlvbihvYmplY3QsIHByb3RvdHlwZSkge1xuICBmb3IgKHZhciBwcm9wZXJ0eSBpbiBwcm90b3R5cGUpIG9iamVjdFtwcm9wZXJ0eV0gPSBwcm90b3R5cGVbcHJvcGVydHldO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uKGdyb3Vwcykge1xuICBkM19zdWJjbGFzcyhncm91cHMsIGQzX3NlbGVjdGlvblByb3RvdHlwZSk7XG4gIHJldHVybiBncm91cHM7XG59XG5cbnZhciBkM19zZWxlY3QgPSBmdW5jdGlvbihzLCBuKSB7IHJldHVybiBuLnF1ZXJ5U2VsZWN0b3Iocyk7IH0sXG4gICAgZDNfc2VsZWN0QWxsID0gZnVuY3Rpb24ocywgbikgeyByZXR1cm4gbi5xdWVyeVNlbGVjdG9yQWxsKHMpOyB9LFxuICAgIGQzX3NlbGVjdE1hdGNoZXMgPSBmdW5jdGlvbihuLCBzKSB7XG4gICAgICB2YXIgZDNfc2VsZWN0TWF0Y2hlciA9IG4ubWF0Y2hlcyB8fCBuW2QzX3ZlbmRvclN5bWJvbChuLCBcIm1hdGNoZXNTZWxlY3RvclwiKV07XG4gICAgICBkM19zZWxlY3RNYXRjaGVzID0gZnVuY3Rpb24obiwgcykge1xuICAgICAgICByZXR1cm4gZDNfc2VsZWN0TWF0Y2hlci5jYWxsKG4sIHMpO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBkM19zZWxlY3RNYXRjaGVzKG4sIHMpO1xuICAgIH07XG5cbi8vIFByZWZlciBTaXp6bGUsIGlmIGF2YWlsYWJsZS5cbmlmICh0eXBlb2YgU2l6emxlID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgZDNfc2VsZWN0ID0gZnVuY3Rpb24ocywgbikgeyByZXR1cm4gU2l6emxlKHMsIG4pWzBdIHx8IG51bGw7IH07XG4gIGQzX3NlbGVjdEFsbCA9IFNpenpsZTtcbiAgZDNfc2VsZWN0TWF0Y2hlcyA9IFNpenpsZS5tYXRjaGVzU2VsZWN0b3I7XG59XG5cbmQzLnNlbGVjdGlvbiA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gZDMuc2VsZWN0KGQzX2RvY3VtZW50LmRvY3VtZW50RWxlbWVudCk7XG59O1xuXG52YXIgZDNfc2VsZWN0aW9uUHJvdG90eXBlID0gZDMuc2VsZWN0aW9uLnByb3RvdHlwZSA9IFtdO1xuXG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5zZWxlY3QgPSBmdW5jdGlvbihzZWxlY3Rvcikge1xuICB2YXIgc3ViZ3JvdXBzID0gW10sXG4gICAgICBzdWJncm91cCxcbiAgICAgIHN1Ym5vZGUsXG4gICAgICBncm91cCxcbiAgICAgIG5vZGU7XG5cbiAgc2VsZWN0b3IgPSBkM19zZWxlY3Rpb25fc2VsZWN0b3Ioc2VsZWN0b3IpO1xuXG4gIGZvciAodmFyIGogPSAtMSwgbSA9IHRoaXMubGVuZ3RoOyArK2ogPCBtOykge1xuICAgIHN1Ymdyb3Vwcy5wdXNoKHN1Ymdyb3VwID0gW10pO1xuICAgIHN1Ymdyb3VwLnBhcmVudE5vZGUgPSAoZ3JvdXAgPSB0aGlzW2pdKS5wYXJlbnROb2RlO1xuICAgIGZvciAodmFyIGkgPSAtMSwgbiA9IGdyb3VwLmxlbmd0aDsgKytpIDwgbjspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgc3ViZ3JvdXAucHVzaChzdWJub2RlID0gc2VsZWN0b3IuY2FsbChub2RlLCBub2RlLl9fZGF0YV9fLCBpLCBqKSk7XG4gICAgICAgIGlmIChzdWJub2RlICYmIFwiX19kYXRhX19cIiBpbiBub2RlKSBzdWJub2RlLl9fZGF0YV9fID0gbm9kZS5fX2RhdGFfXztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1Ymdyb3VwLnB1c2gobnVsbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGQzX3NlbGVjdGlvbihzdWJncm91cHMpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX3NlbGVjdG9yKHNlbGVjdG9yKSB7XG4gIHJldHVybiB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiA/IHNlbGVjdG9yIDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzX3NlbGVjdChzZWxlY3RvciwgdGhpcyk7XG4gIH07XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5zZWxlY3RBbGwgPSBmdW5jdGlvbihzZWxlY3Rvcikge1xuICB2YXIgc3ViZ3JvdXBzID0gW10sXG4gICAgICBzdWJncm91cCxcbiAgICAgIG5vZGU7XG5cbiAgc2VsZWN0b3IgPSBkM19zZWxlY3Rpb25fc2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuXG4gIGZvciAodmFyIGogPSAtMSwgbSA9IHRoaXMubGVuZ3RoOyArK2ogPCBtOykge1xuICAgIGZvciAodmFyIGdyb3VwID0gdGhpc1tqXSwgaSA9IC0xLCBuID0gZ3JvdXAubGVuZ3RoOyArK2kgPCBuOykge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBzdWJncm91cHMucHVzaChzdWJncm91cCA9IGQzX2FycmF5KHNlbGVjdG9yLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgaikpKTtcbiAgICAgICAgc3ViZ3JvdXAucGFyZW50Tm9kZSA9IG5vZGU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGQzX3NlbGVjdGlvbihzdWJncm91cHMpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX3NlbGVjdG9yQWxsKHNlbGVjdG9yKSB7XG4gIHJldHVybiB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiA/IHNlbGVjdG9yIDogZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGQzX3NlbGVjdEFsbChzZWxlY3RvciwgdGhpcyk7XG4gIH07XG59XG52YXIgZDNfbnNYaHRtbCA9IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiO1xuXG52YXIgZDNfbnNQcmVmaXggPSB7XG4gIHN2ZzogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICB4aHRtbDogZDNfbnNYaHRtbCxcbiAgeGxpbms6IFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLFxuICB4bWw6IFwiaHR0cDovL3d3dy53My5vcmcvWE1MLzE5OTgvbmFtZXNwYWNlXCIsXG4gIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAveG1sbnMvXCJcbn07XG5cbmQzLm5zID0ge1xuICBwcmVmaXg6IGQzX25zUHJlZml4LFxuICBxdWFsaWZ5OiBmdW5jdGlvbihuYW1lKSB7XG4gICAgdmFyIGkgPSBuYW1lLmluZGV4T2YoXCI6XCIpLCBwcmVmaXggPSBuYW1lO1xuICAgIGlmIChpID49IDAgJiYgKHByZWZpeCA9IG5hbWUuc2xpY2UoMCwgaSkpICE9PSBcInhtbG5zXCIpIG5hbWUgPSBuYW1lLnNsaWNlKGkgKyAxKTtcbiAgICByZXR1cm4gZDNfbnNQcmVmaXguaGFzT3duUHJvcGVydHkocHJlZml4KSA/IHtzcGFjZTogZDNfbnNQcmVmaXhbcHJlZml4XSwgbG9jYWw6IG5hbWV9IDogbmFtZTtcbiAgfVxufTtcblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLmF0dHIgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcblxuICAgIC8vIEZvciBhdHRyKHN0cmluZyksIHJldHVybiB0aGUgYXR0cmlidXRlIHZhbHVlIGZvciB0aGUgZmlyc3Qgbm9kZS5cbiAgICBpZiAodHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHZhciBub2RlID0gdGhpcy5ub2RlKCk7XG4gICAgICBuYW1lID0gZDMubnMucXVhbGlmeShuYW1lKTtcbiAgICAgIHJldHVybiBuYW1lLmxvY2FsXG4gICAgICAgICAgPyBub2RlLmdldEF0dHJpYnV0ZU5TKG5hbWUuc3BhY2UsIG5hbWUubG9jYWwpXG4gICAgICAgICAgOiBub2RlLmdldEF0dHJpYnV0ZShuYW1lKTtcbiAgICB9XG5cbiAgICAvLyBGb3IgYXR0cihvYmplY3QpLCB0aGUgb2JqZWN0IHNwZWNpZmllcyB0aGUgbmFtZXMgYW5kIHZhbHVlcyBvZiB0aGVcbiAgICAvLyBhdHRyaWJ1dGVzIHRvIHNldCBvciByZW1vdmUuIFRoZSB2YWx1ZXMgbWF5IGJlIGZ1bmN0aW9ucyB0aGF0IGFyZVxuICAgIC8vIGV2YWx1YXRlZCBmb3IgZWFjaCBlbGVtZW50LlxuICAgIGZvciAodmFsdWUgaW4gbmFtZSkgdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9hdHRyKHZhbHVlLCBuYW1lW3ZhbHVlXSkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcmV0dXJuIHRoaXMuZWFjaChkM19zZWxlY3Rpb25fYXR0cihuYW1lLCB2YWx1ZSkpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2F0dHIobmFtZSwgdmFsdWUpIHtcbiAgbmFtZSA9IGQzLm5zLnF1YWxpZnkobmFtZSk7XG5cbiAgLy8gRm9yIGF0dHIoc3RyaW5nLCBudWxsKSwgcmVtb3ZlIHRoZSBhdHRyaWJ1dGUgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUuXG4gIGZ1bmN0aW9uIGF0dHJOdWxsKCkge1xuICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICB9XG4gIGZ1bmN0aW9uIGF0dHJOdWxsTlMoKSB7XG4gICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsKTtcbiAgfVxuXG4gIC8vIEZvciBhdHRyKHN0cmluZywgc3RyaW5nKSwgc2V0IHRoZSBhdHRyaWJ1dGUgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUuXG4gIGZ1bmN0aW9uIGF0dHJDb25zdGFudCgpIHtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gIH1cbiAgZnVuY3Rpb24gYXR0ckNvbnN0YW50TlMoKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGVOUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsLCB2YWx1ZSk7XG4gIH1cblxuICAvLyBGb3IgYXR0cihzdHJpbmcsIGZ1bmN0aW9uKSwgZXZhbHVhdGUgdGhlIGZ1bmN0aW9uIGZvciBlYWNoIGVsZW1lbnQsIGFuZCBzZXRcbiAgLy8gb3IgcmVtb3ZlIHRoZSBhdHRyaWJ1dGUgYXMgYXBwcm9wcmlhdGUuXG4gIGZ1bmN0aW9uIGF0dHJGdW5jdGlvbigpIHtcbiAgICB2YXIgeCA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHggPT0gbnVsbCkgdGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgZWxzZSB0aGlzLnNldEF0dHJpYnV0ZShuYW1lLCB4KTtcbiAgfVxuICBmdW5jdGlvbiBhdHRyRnVuY3Rpb25OUygpIHtcbiAgICB2YXIgeCA9IHZhbHVlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgaWYgKHggPT0gbnVsbCkgdGhpcy5yZW1vdmVBdHRyaWJ1dGVOUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsKTtcbiAgICBlbHNlIHRoaXMuc2V0QXR0cmlidXRlTlMobmFtZS5zcGFjZSwgbmFtZS5sb2NhbCwgeCk7XG4gIH1cblxuICByZXR1cm4gdmFsdWUgPT0gbnVsbFxuICAgICAgPyAobmFtZS5sb2NhbCA/IGF0dHJOdWxsTlMgOiBhdHRyTnVsbCkgOiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gKG5hbWUubG9jYWwgPyBhdHRyRnVuY3Rpb25OUyA6IGF0dHJGdW5jdGlvbilcbiAgICAgIDogKG5hbWUubG9jYWwgPyBhdHRyQ29uc3RhbnROUyA6IGF0dHJDb25zdGFudCkpO1xufVxuZnVuY3Rpb24gZDNfY29sbGFwc2Uocykge1xuICByZXR1cm4gcy50cmltKCkucmVwbGFjZSgvXFxzKy9nLCBcIiBcIik7XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5jbGFzc2VkID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG5cbiAgICAvLyBGb3IgY2xhc3NlZChzdHJpbmcpLCByZXR1cm4gdHJ1ZSBvbmx5IGlmIHRoZSBmaXJzdCBub2RlIGhhcyB0aGUgc3BlY2lmaWVkXG4gICAgLy8gY2xhc3Mgb3IgY2xhc3Nlcy4gTm90ZSB0aGF0IGV2ZW4gaWYgdGhlIGJyb3dzZXIgc3VwcG9ydHMgRE9NVG9rZW5MaXN0LCBpdFxuICAgIC8vIHByb2JhYmx5IGRvZXNuJ3Qgc3VwcG9ydCBpdCBvbiBTVkcgZWxlbWVudHMgKHdoaWNoIGNhbiBiZSBhbmltYXRlZCkuXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICB2YXIgbm9kZSA9IHRoaXMubm9kZSgpLFxuICAgICAgICAgIG4gPSAobmFtZSA9IGQzX3NlbGVjdGlvbl9jbGFzc2VzKG5hbWUpKS5sZW5ndGgsXG4gICAgICAgICAgaSA9IC0xO1xuICAgICAgaWYgKHZhbHVlID0gbm9kZS5jbGFzc0xpc3QpIHtcbiAgICAgICAgd2hpbGUgKCsraSA8IG4pIGlmICghdmFsdWUuY29udGFpbnMobmFtZVtpXSkpIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlID0gbm9kZS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKTtcbiAgICAgICAgd2hpbGUgKCsraSA8IG4pIGlmICghZDNfc2VsZWN0aW9uX2NsYXNzZWRSZShuYW1lW2ldKS50ZXN0KHZhbHVlKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gRm9yIGNsYXNzZWQob2JqZWN0KSwgdGhlIG9iamVjdCBzcGVjaWZpZXMgdGhlIG5hbWVzIG9mIGNsYXNzZXMgdG8gYWRkIG9yXG4gICAgLy8gcmVtb3ZlLiBUaGUgdmFsdWVzIG1heSBiZSBmdW5jdGlvbnMgdGhhdCBhcmUgZXZhbHVhdGVkIGZvciBlYWNoIGVsZW1lbnQuXG4gICAgZm9yICh2YWx1ZSBpbiBuYW1lKSB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX2NsYXNzZWQodmFsdWUsIG5hbWVbdmFsdWVdKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvLyBPdGhlcndpc2UsIGJvdGggYSBuYW1lIGFuZCBhIHZhbHVlIGFyZSBzcGVjaWZpZWQsIGFuZCBhcmUgaGFuZGxlZCBhcyBiZWxvdy5cbiAgcmV0dXJuIHRoaXMuZWFjaChkM19zZWxlY3Rpb25fY2xhc3NlZChuYW1lLCB2YWx1ZSkpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2NsYXNzZWRSZShuYW1lKSB7XG4gIHJldHVybiBuZXcgUmVnRXhwKFwiKD86XnxcXFxccyspXCIgKyBkMy5yZXF1b3RlKG5hbWUpICsgXCIoPzpcXFxccyt8JClcIiwgXCJnXCIpO1xufVxuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fY2xhc3NlcyhuYW1lKSB7XG4gIHJldHVybiAobmFtZSArIFwiXCIpLnRyaW0oKS5zcGxpdCgvXnxcXHMrLyk7XG59XG5cbi8vIE11bHRpcGxlIGNsYXNzIG5hbWVzIGFyZSBhbGxvd2VkIChlLmcuLCBcImZvbyBiYXJcIikuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fY2xhc3NlZChuYW1lLCB2YWx1ZSkge1xuICBuYW1lID0gZDNfc2VsZWN0aW9uX2NsYXNzZXMobmFtZSkubWFwKGQzX3NlbGVjdGlvbl9jbGFzc2VkTmFtZSk7XG4gIHZhciBuID0gbmFtZS5sZW5ndGg7XG5cbiAgZnVuY3Rpb24gY2xhc3NlZENvbnN0YW50KCkge1xuICAgIHZhciBpID0gLTE7XG4gICAgd2hpbGUgKCsraSA8IG4pIG5hbWVbaV0odGhpcywgdmFsdWUpO1xuICB9XG5cbiAgLy8gV2hlbiB0aGUgdmFsdWUgaXMgYSBmdW5jdGlvbiwgdGhlIGZ1bmN0aW9uIGlzIHN0aWxsIGV2YWx1YXRlZCBvbmx5IG9uY2UgcGVyXG4gIC8vIGVsZW1lbnQgZXZlbiBpZiB0aGVyZSBhcmUgbXVsdGlwbGUgY2xhc3MgbmFtZXMuXG4gIGZ1bmN0aW9uIGNsYXNzZWRGdW5jdGlvbigpIHtcbiAgICB2YXIgaSA9IC0xLCB4ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB3aGlsZSAoKytpIDwgbikgbmFtZVtpXSh0aGlzLCB4KTtcbiAgfVxuXG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyBjbGFzc2VkRnVuY3Rpb25cbiAgICAgIDogY2xhc3NlZENvbnN0YW50O1xufVxuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fY2xhc3NlZE5hbWUobmFtZSkge1xuICB2YXIgcmUgPSBkM19zZWxlY3Rpb25fY2xhc3NlZFJlKG5hbWUpO1xuICByZXR1cm4gZnVuY3Rpb24obm9kZSwgdmFsdWUpIHtcbiAgICBpZiAoYyA9IG5vZGUuY2xhc3NMaXN0KSByZXR1cm4gdmFsdWUgPyBjLmFkZChuYW1lKSA6IGMucmVtb3ZlKG5hbWUpO1xuICAgIHZhciBjID0gbm9kZS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSB8fCBcIlwiO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgcmUubGFzdEluZGV4ID0gMDtcbiAgICAgIGlmICghcmUudGVzdChjKSkgbm9kZS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBkM19jb2xsYXBzZShjICsgXCIgXCIgKyBuYW1lKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG5vZGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgZDNfY29sbGFwc2UoYy5yZXBsYWNlKHJlLCBcIiBcIikpKTtcbiAgICB9XG4gIH07XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5zdHlsZSA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlLCBwcmlvcml0eSkge1xuICB2YXIgbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gIGlmIChuIDwgMykge1xuXG4gICAgLy8gRm9yIHN0eWxlKG9iamVjdCkgb3Igc3R5bGUob2JqZWN0LCBzdHJpbmcpLCB0aGUgb2JqZWN0IHNwZWNpZmllcyB0aGVcbiAgICAvLyBuYW1lcyBhbmQgdmFsdWVzIG9mIHRoZSBhdHRyaWJ1dGVzIHRvIHNldCBvciByZW1vdmUuIFRoZSB2YWx1ZXMgbWF5IGJlXG4gICAgLy8gZnVuY3Rpb25zIHRoYXQgYXJlIGV2YWx1YXRlZCBmb3IgZWFjaCBlbGVtZW50LiBUaGUgb3B0aW9uYWwgc3RyaW5nXG4gICAgLy8gc3BlY2lmaWVzIHRoZSBwcmlvcml0eS5cbiAgICBpZiAodHlwZW9mIG5hbWUgIT09IFwic3RyaW5nXCIpIHtcbiAgICAgIGlmIChuIDwgMikgdmFsdWUgPSBcIlwiO1xuICAgICAgZm9yIChwcmlvcml0eSBpbiBuYW1lKSB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX3N0eWxlKHByaW9yaXR5LCBuYW1lW3ByaW9yaXR5XSwgdmFsdWUpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIEZvciBzdHlsZShzdHJpbmcpLCByZXR1cm4gdGhlIGNvbXB1dGVkIHN0eWxlIHZhbHVlIGZvciB0aGUgZmlyc3Qgbm9kZS5cbiAgICBpZiAobiA8IDIpIHtcbiAgICAgIHZhciBub2RlID0gdGhpcy5ub2RlKCk7XG4gICAgICByZXR1cm4gZDNfd2luZG93KG5vZGUpLmdldENvbXB1dGVkU3R5bGUobm9kZSwgbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKTtcbiAgICB9XG5cbiAgICAvLyBGb3Igc3R5bGUoc3RyaW5nLCBzdHJpbmcpIG9yIHN0eWxlKHN0cmluZywgZnVuY3Rpb24pLCB1c2UgdGhlIGRlZmF1bHRcbiAgICAvLyBwcmlvcml0eS4gVGhlIHByaW9yaXR5IGlzIGlnbm9yZWQgZm9yIHN0eWxlKHN0cmluZywgbnVsbCkuXG4gICAgcHJpb3JpdHkgPSBcIlwiO1xuICB9XG5cbiAgLy8gT3RoZXJ3aXNlLCBhIG5hbWUsIHZhbHVlIGFuZCBwcmlvcml0eSBhcmUgc3BlY2lmaWVkLCBhbmQgaGFuZGxlZCBhcyBiZWxvdy5cbiAgcmV0dXJuIHRoaXMuZWFjaChkM19zZWxlY3Rpb25fc3R5bGUobmFtZSwgdmFsdWUsIHByaW9yaXR5KSk7XG59O1xuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fc3R5bGUobmFtZSwgdmFsdWUsIHByaW9yaXR5KSB7XG5cbiAgLy8gRm9yIHN0eWxlKG5hbWUsIG51bGwpIG9yIHN0eWxlKG5hbWUsIG51bGwsIHByaW9yaXR5KSwgcmVtb3ZlIHRoZSBzdHlsZVxuICAvLyBwcm9wZXJ0eSB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZS4gVGhlIHByaW9yaXR5IGlzIGlnbm9yZWQuXG4gIGZ1bmN0aW9uIHN0eWxlTnVsbCgpIHtcbiAgICB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICB9XG5cbiAgLy8gRm9yIHN0eWxlKG5hbWUsIHN0cmluZykgb3Igc3R5bGUobmFtZSwgc3RyaW5nLCBwcmlvcml0eSksIHNldCB0aGUgc3R5bGVcbiAgLy8gcHJvcGVydHkgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUsIHVzaW5nIHRoZSBzcGVjaWZpZWQgcHJpb3JpdHkuXG4gIGZ1bmN0aW9uIHN0eWxlQ29uc3RhbnQoKSB7XG4gICAgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB2YWx1ZSwgcHJpb3JpdHkpO1xuICB9XG5cbiAgLy8gRm9yIHN0eWxlKG5hbWUsIGZ1bmN0aW9uKSBvciBzdHlsZShuYW1lLCBmdW5jdGlvbiwgcHJpb3JpdHkpLCBldmFsdWF0ZSB0aGVcbiAgLy8gZnVuY3Rpb24gZm9yIGVhY2ggZWxlbWVudCwgYW5kIHNldCBvciByZW1vdmUgdGhlIHN0eWxlIHByb3BlcnR5IGFzXG4gIC8vIGFwcHJvcHJpYXRlLiBXaGVuIHNldHRpbmcsIHVzZSB0aGUgc3BlY2lmaWVkIHByaW9yaXR5LlxuICBmdW5jdGlvbiBzdHlsZUZ1bmN0aW9uKCkge1xuICAgIHZhciB4ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoeCA9PSBudWxsKSB0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpO1xuICAgIGVsc2UgdGhpcy5zdHlsZS5zZXRQcm9wZXJ0eShuYW1lLCB4LCBwcmlvcml0eSk7XG4gIH1cblxuICByZXR1cm4gdmFsdWUgPT0gbnVsbFxuICAgICAgPyBzdHlsZU51bGwgOiAodHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gc3R5bGVGdW5jdGlvbiA6IHN0eWxlQ29uc3RhbnQpO1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUucHJvcGVydHkgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIHtcblxuICAgIC8vIEZvciBwcm9wZXJ0eShzdHJpbmcpLCByZXR1cm4gdGhlIHByb3BlcnR5IHZhbHVlIGZvciB0aGUgZmlyc3Qgbm9kZS5cbiAgICBpZiAodHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIpIHJldHVybiB0aGlzLm5vZGUoKVtuYW1lXTtcblxuICAgIC8vIEZvciBwcm9wZXJ0eShvYmplY3QpLCB0aGUgb2JqZWN0IHNwZWNpZmllcyB0aGUgbmFtZXMgYW5kIHZhbHVlcyBvZiB0aGVcbiAgICAvLyBwcm9wZXJ0aWVzIHRvIHNldCBvciByZW1vdmUuIFRoZSB2YWx1ZXMgbWF5IGJlIGZ1bmN0aW9ucyB0aGF0IGFyZVxuICAgIC8vIGV2YWx1YXRlZCBmb3IgZWFjaCBlbGVtZW50LlxuICAgIGZvciAodmFsdWUgaW4gbmFtZSkgdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9wcm9wZXJ0eSh2YWx1ZSwgbmFtZVt2YWx1ZV0pKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8vIE90aGVyd2lzZSwgYm90aCBhIG5hbWUgYW5kIGEgdmFsdWUgYXJlIHNwZWNpZmllZCwgYW5kIGFyZSBoYW5kbGVkIGFzIGJlbG93LlxuICByZXR1cm4gdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9wcm9wZXJ0eShuYW1lLCB2YWx1ZSkpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX3Byb3BlcnR5KG5hbWUsIHZhbHVlKSB7XG5cbiAgLy8gRm9yIHByb3BlcnR5KG5hbWUsIG51bGwpLCByZW1vdmUgdGhlIHByb3BlcnR5IHdpdGggdGhlIHNwZWNpZmllZCBuYW1lLlxuICBmdW5jdGlvbiBwcm9wZXJ0eU51bGwoKSB7XG4gICAgZGVsZXRlIHRoaXNbbmFtZV07XG4gIH1cblxuICAvLyBGb3IgcHJvcGVydHkobmFtZSwgc3RyaW5nKSwgc2V0IHRoZSBwcm9wZXJ0eSB3aXRoIHRoZSBzcGVjaWZpZWQgbmFtZS5cbiAgZnVuY3Rpb24gcHJvcGVydHlDb25zdGFudCgpIHtcbiAgICB0aGlzW25hbWVdID0gdmFsdWU7XG4gIH1cblxuICAvLyBGb3IgcHJvcGVydHkobmFtZSwgZnVuY3Rpb24pLCBldmFsdWF0ZSB0aGUgZnVuY3Rpb24gZm9yIGVhY2ggZWxlbWVudCwgYW5kXG4gIC8vIHNldCBvciByZW1vdmUgdGhlIHByb3BlcnR5IGFzIGFwcHJvcHJpYXRlLlxuICBmdW5jdGlvbiBwcm9wZXJ0eUZ1bmN0aW9uKCkge1xuICAgIHZhciB4ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoeCA9PSBudWxsKSBkZWxldGUgdGhpc1tuYW1lXTtcbiAgICBlbHNlIHRoaXNbbmFtZV0gPSB4O1xuICB9XG5cbiAgcmV0dXJuIHZhbHVlID09IG51bGxcbiAgICAgID8gcHJvcGVydHlOdWxsIDogKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiXG4gICAgICA/IHByb3BlcnR5RnVuY3Rpb24gOiBwcm9wZXJ0eUNvbnN0YW50KTtcbn1cblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLnRleHQgPSBmdW5jdGlvbih2YWx1ZSkge1xuICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aFxuICAgICAgPyB0aGlzLmVhY2godHlwZW9mIHZhbHVlID09PSBcImZ1bmN0aW9uXCJcbiAgICAgID8gZnVuY3Rpb24oKSB7IHZhciB2ID0gdmFsdWUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgdGhpcy50ZXh0Q29udGVudCA9IHYgPT0gbnVsbCA/IFwiXCIgOiB2OyB9IDogdmFsdWUgPT0gbnVsbFxuICAgICAgPyBmdW5jdGlvbigpIHsgdGhpcy50ZXh0Q29udGVudCA9IFwiXCI7IH1cbiAgICAgIDogZnVuY3Rpb24oKSB7IHRoaXMudGV4dENvbnRlbnQgPSB2YWx1ZTsgfSlcbiAgICAgIDogdGhpcy5ub2RlKCkudGV4dENvbnRlbnQ7XG59O1xuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuaHRtbCA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMuZWFjaCh0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyBmdW5jdGlvbigpIHsgdmFyIHYgPSB2YWx1ZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB0aGlzLmlubmVySFRNTCA9IHYgPT0gbnVsbCA/IFwiXCIgOiB2OyB9IDogdmFsdWUgPT0gbnVsbFxuICAgICAgPyBmdW5jdGlvbigpIHsgdGhpcy5pbm5lckhUTUwgPSBcIlwiOyB9XG4gICAgICA6IGZ1bmN0aW9uKCkgeyB0aGlzLmlubmVySFRNTCA9IHZhbHVlOyB9KVxuICAgICAgOiB0aGlzLm5vZGUoKS5pbm5lckhUTUw7XG59O1xuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24obmFtZSkge1xuICBuYW1lID0gZDNfc2VsZWN0aW9uX2NyZWF0b3IobmFtZSk7XG4gIHJldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5hcHBlbmRDaGlsZChuYW1lLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9jcmVhdG9yKG5hbWUpIHtcblxuICBmdW5jdGlvbiBjcmVhdGUoKSB7XG4gICAgdmFyIGRvY3VtZW50ID0gdGhpcy5vd25lckRvY3VtZW50LFxuICAgICAgICBuYW1lc3BhY2UgPSB0aGlzLm5hbWVzcGFjZVVSSTtcbiAgICByZXR1cm4gbmFtZXNwYWNlID09PSBkM19uc1hodG1sICYmIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5uYW1lc3BhY2VVUkkgPT09IGQzX25zWGh0bWxcbiAgICAgICAgPyBkb2N1bWVudC5jcmVhdGVFbGVtZW50KG5hbWUpXG4gICAgICAgIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5hbWVzcGFjZSwgbmFtZSk7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVOUygpIHtcbiAgICByZXR1cm4gdGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhuYW1lLnNwYWNlLCBuYW1lLmxvY2FsKTtcbiAgfVxuXG4gIHJldHVybiB0eXBlb2YgbmFtZSA9PT0gXCJmdW5jdGlvblwiID8gbmFtZVxuICAgICAgOiAobmFtZSA9IGQzLm5zLnF1YWxpZnkobmFtZSkpLmxvY2FsID8gY3JlYXRlTlNcbiAgICAgIDogY3JlYXRlO1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuaW5zZXJ0ID0gZnVuY3Rpb24obmFtZSwgYmVmb3JlKSB7XG4gIG5hbWUgPSBkM19zZWxlY3Rpb25fY3JlYXRvcihuYW1lKTtcbiAgYmVmb3JlID0gZDNfc2VsZWN0aW9uX3NlbGVjdG9yKGJlZm9yZSk7XG4gIHJldHVybiB0aGlzLnNlbGVjdChmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pbnNlcnRCZWZvcmUobmFtZS5hcHBseSh0aGlzLCBhcmd1bWVudHMpLCBiZWZvcmUuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCBudWxsKTtcbiAgfSk7XG59O1xuXG4vLyBUT0RPIHJlbW92ZShzZWxlY3Rvcik/XG4vLyBUT0RPIHJlbW92ZShub2RlKT9cbi8vIFRPRE8gcmVtb3ZlKGZ1bmN0aW9uKT9cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIHRoaXMuZWFjaChkM19zZWxlY3Rpb25SZW1vdmUpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uUmVtb3ZlKCkge1xuICB2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xuICBpZiAocGFyZW50KSBwYXJlbnQucmVtb3ZlQ2hpbGQodGhpcyk7XG59XG5cbmQzLnNldCA9IGZ1bmN0aW9uKGFycmF5KSB7XG4gIHZhciBzZXQgPSBuZXcgZDNfU2V0O1xuICBpZiAoYXJyYXkpIGZvciAodmFyIGkgPSAwLCBuID0gYXJyYXkubGVuZ3RoOyBpIDwgbjsgKytpKSBzZXQuYWRkKGFycmF5W2ldKTtcbiAgcmV0dXJuIHNldDtcbn07XG5cbmZ1bmN0aW9uIGQzX1NldCgpIHtcbiAgdGhpcy5fID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbn1cblxuZDNfY2xhc3MoZDNfU2V0LCB7XG4gIGhhczogZDNfbWFwX2hhcyxcbiAgYWRkOiBmdW5jdGlvbihrZXkpIHtcbiAgICB0aGlzLl9bZDNfbWFwX2VzY2FwZShrZXkgKz0gXCJcIildID0gdHJ1ZTtcbiAgICByZXR1cm4ga2V5O1xuICB9LFxuICByZW1vdmU6IGQzX21hcF9yZW1vdmUsXG4gIHZhbHVlczogZDNfbWFwX2tleXMsXG4gIHNpemU6IGQzX21hcF9zaXplLFxuICBlbXB0eTogZDNfbWFwX2VtcHR5LFxuICBmb3JFYWNoOiBmdW5jdGlvbihmKSB7XG4gICAgZm9yICh2YXIga2V5IGluIHRoaXMuXykgZi5jYWxsKHRoaXMsIGQzX21hcF91bmVzY2FwZShrZXkpKTtcbiAgfVxufSk7XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5kYXRhID0gZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICB2YXIgaSA9IC0xLFxuICAgICAgbiA9IHRoaXMubGVuZ3RoLFxuICAgICAgZ3JvdXAsXG4gICAgICBub2RlO1xuXG4gIC8vIElmIG5vIHZhbHVlIGlzIHNwZWNpZmllZCwgcmV0dXJuIHRoZSBmaXJzdCB2YWx1ZS5cbiAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgdmFsdWUgPSBuZXcgQXJyYXkobiA9IChncm91cCA9IHRoaXNbMF0pLmxlbmd0aCk7XG4gICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgdmFsdWVbaV0gPSBub2RlLl9fZGF0YV9fO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiBiaW5kKGdyb3VwLCBncm91cERhdGEpIHtcbiAgICB2YXIgaSxcbiAgICAgICAgbiA9IGdyb3VwLmxlbmd0aCxcbiAgICAgICAgbSA9IGdyb3VwRGF0YS5sZW5ndGgsXG4gICAgICAgIG4wID0gTWF0aC5taW4obiwgbSksXG4gICAgICAgIHVwZGF0ZU5vZGVzID0gbmV3IEFycmF5KG0pLFxuICAgICAgICBlbnRlck5vZGVzID0gbmV3IEFycmF5KG0pLFxuICAgICAgICBleGl0Tm9kZXMgPSBuZXcgQXJyYXkobiksXG4gICAgICAgIG5vZGUsXG4gICAgICAgIG5vZGVEYXRhO1xuXG4gICAgaWYgKGtleSkge1xuICAgICAgdmFyIG5vZGVCeUtleVZhbHVlID0gbmV3IGQzX01hcCxcbiAgICAgICAgICBrZXlWYWx1ZXMgPSBuZXcgQXJyYXkobiksXG4gICAgICAgICAga2V5VmFsdWU7XG5cbiAgICAgIGZvciAoaSA9IC0xOyArK2kgPCBuOykge1xuICAgICAgICBpZiAobm9kZSA9IGdyb3VwW2ldKSB7XG4gICAgICAgICAgaWYgKG5vZGVCeUtleVZhbHVlLmhhcyhrZXlWYWx1ZSA9IGtleS5jYWxsKG5vZGUsIG5vZGUuX19kYXRhX18sIGkpKSkge1xuICAgICAgICAgICAgZXhpdE5vZGVzW2ldID0gbm9kZTsgLy8gZHVwbGljYXRlIHNlbGVjdGlvbiBrZXlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbm9kZUJ5S2V5VmFsdWUuc2V0KGtleVZhbHVlLCBub2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAga2V5VmFsdWVzW2ldID0ga2V5VmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yIChpID0gLTE7ICsraSA8IG07KSB7XG4gICAgICAgIGlmICghKG5vZGUgPSBub2RlQnlLZXlWYWx1ZS5nZXQoa2V5VmFsdWUgPSBrZXkuY2FsbChncm91cERhdGEsIG5vZGVEYXRhID0gZ3JvdXBEYXRhW2ldLCBpKSkpKSB7XG4gICAgICAgICAgZW50ZXJOb2Rlc1tpXSA9IGQzX3NlbGVjdGlvbl9kYXRhTm9kZShub2RlRGF0YSk7XG4gICAgICAgIH0gZWxzZSBpZiAobm9kZSAhPT0gdHJ1ZSkgeyAvLyBubyBkdXBsaWNhdGUgZGF0YSBrZXlcbiAgICAgICAgICB1cGRhdGVOb2Rlc1tpXSA9IG5vZGU7XG4gICAgICAgICAgbm9kZS5fX2RhdGFfXyA9IG5vZGVEYXRhO1xuICAgICAgICB9XG4gICAgICAgIG5vZGVCeUtleVZhbHVlLnNldChrZXlWYWx1ZSwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAoaSA9IC0xOyArK2kgPCBuOykge1xuICAgICAgICBpZiAoaSBpbiBrZXlWYWx1ZXMgJiYgbm9kZUJ5S2V5VmFsdWUuZ2V0KGtleVZhbHVlc1tpXSkgIT09IHRydWUpIHtcbiAgICAgICAgICBleGl0Tm9kZXNbaV0gPSBncm91cFtpXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGkgPSAtMTsgKytpIDwgbjA7KSB7XG4gICAgICAgIG5vZGUgPSBncm91cFtpXTtcbiAgICAgICAgbm9kZURhdGEgPSBncm91cERhdGFbaV07XG4gICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgbm9kZS5fX2RhdGFfXyA9IG5vZGVEYXRhO1xuICAgICAgICAgIHVwZGF0ZU5vZGVzW2ldID0gbm9kZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbnRlck5vZGVzW2ldID0gZDNfc2VsZWN0aW9uX2RhdGFOb2RlKG5vZGVEYXRhKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZm9yICg7IGkgPCBtOyArK2kpIHtcbiAgICAgICAgZW50ZXJOb2Rlc1tpXSA9IGQzX3NlbGVjdGlvbl9kYXRhTm9kZShncm91cERhdGFbaV0pO1xuICAgICAgfVxuICAgICAgZm9yICg7IGkgPCBuOyArK2kpIHtcbiAgICAgICAgZXhpdE5vZGVzW2ldID0gZ3JvdXBbaV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgZW50ZXJOb2Rlcy51cGRhdGVcbiAgICAgICAgPSB1cGRhdGVOb2RlcztcblxuICAgIGVudGVyTm9kZXMucGFyZW50Tm9kZVxuICAgICAgICA9IHVwZGF0ZU5vZGVzLnBhcmVudE5vZGVcbiAgICAgICAgPSBleGl0Tm9kZXMucGFyZW50Tm9kZVxuICAgICAgICA9IGdyb3VwLnBhcmVudE5vZGU7XG5cbiAgICBlbnRlci5wdXNoKGVudGVyTm9kZXMpO1xuICAgIHVwZGF0ZS5wdXNoKHVwZGF0ZU5vZGVzKTtcbiAgICBleGl0LnB1c2goZXhpdE5vZGVzKTtcbiAgfVxuXG4gIHZhciBlbnRlciA9IGQzX3NlbGVjdGlvbl9lbnRlcihbXSksXG4gICAgICB1cGRhdGUgPSBkM19zZWxlY3Rpb24oW10pLFxuICAgICAgZXhpdCA9IGQzX3NlbGVjdGlvbihbXSk7XG5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgd2hpbGUgKCsraSA8IG4pIHtcbiAgICAgIGJpbmQoZ3JvdXAgPSB0aGlzW2ldLCB2YWx1ZS5jYWxsKGdyb3VwLCBncm91cC5wYXJlbnROb2RlLl9fZGF0YV9fLCBpKSk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgICBiaW5kKGdyb3VwID0gdGhpc1tpXSwgdmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZS5lbnRlciA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gZW50ZXI7IH07XG4gIHVwZGF0ZS5leGl0ID0gZnVuY3Rpb24oKSB7IHJldHVybiBleGl0OyB9O1xuICByZXR1cm4gdXBkYXRlO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2RhdGFOb2RlKGRhdGEpIHtcbiAgcmV0dXJuIHtfX2RhdGFfXzogZGF0YX07XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5kYXR1bSA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiBhcmd1bWVudHMubGVuZ3RoXG4gICAgICA/IHRoaXMucHJvcGVydHkoXCJfX2RhdGFfX1wiLCB2YWx1ZSlcbiAgICAgIDogdGhpcy5wcm9wZXJ0eShcIl9fZGF0YV9fXCIpO1xufTtcblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLmZpbHRlciA9IGZ1bmN0aW9uKGZpbHRlcikge1xuICB2YXIgc3ViZ3JvdXBzID0gW10sXG4gICAgICBzdWJncm91cCxcbiAgICAgIGdyb3VwLFxuICAgICAgbm9kZTtcblxuICBpZiAodHlwZW9mIGZpbHRlciAhPT0gXCJmdW5jdGlvblwiKSBmaWx0ZXIgPSBkM19zZWxlY3Rpb25fZmlsdGVyKGZpbHRlcik7XG5cbiAgZm9yICh2YXIgaiA9IDAsIG0gPSB0aGlzLmxlbmd0aDsgaiA8IG07IGorKykge1xuICAgIHN1Ymdyb3Vwcy5wdXNoKHN1Ymdyb3VwID0gW10pO1xuICAgIHN1Ymdyb3VwLnBhcmVudE5vZGUgPSAoZ3JvdXAgPSB0aGlzW2pdKS5wYXJlbnROb2RlO1xuICAgIGZvciAodmFyIGkgPSAwLCBuID0gZ3JvdXAubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XG4gICAgICBpZiAoKG5vZGUgPSBncm91cFtpXSkgJiYgZmlsdGVyLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgaikpIHtcbiAgICAgICAgc3ViZ3JvdXAucHVzaChub2RlKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gZDNfc2VsZWN0aW9uKHN1Ymdyb3Vwcyk7XG59O1xuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fZmlsdGVyKHNlbGVjdG9yKSB7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZDNfc2VsZWN0TWF0Y2hlcyh0aGlzLCBzZWxlY3Rvcik7XG4gIH07XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5vcmRlciA9IGZ1bmN0aW9uKCkge1xuICBmb3IgKHZhciBqID0gLTEsIG0gPSB0aGlzLmxlbmd0aDsgKytqIDwgbTspIHtcbiAgICBmb3IgKHZhciBncm91cCA9IHRoaXNbal0sIGkgPSBncm91cC5sZW5ndGggLSAxLCBuZXh0ID0gZ3JvdXBbaV0sIG5vZGU7IC0taSA+PSAwOykge1xuICAgICAgaWYgKG5vZGUgPSBncm91cFtpXSkge1xuICAgICAgICBpZiAobmV4dCAmJiBuZXh0ICE9PSBub2RlLm5leHRTaWJsaW5nKSBuZXh0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsIG5leHQpO1xuICAgICAgICBuZXh0ID0gbm9kZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59O1xuZDMuYXNjZW5kaW5nID0gZDNfYXNjZW5kaW5nO1xuXG5mdW5jdGlvbiBkM19hc2NlbmRpbmcoYSwgYikge1xuICByZXR1cm4gYSA8IGIgPyAtMSA6IGEgPiBiID8gMSA6IGEgPj0gYiA/IDAgOiBOYU47XG59XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5zb3J0ID0gZnVuY3Rpb24oY29tcGFyYXRvcikge1xuICBjb21wYXJhdG9yID0gZDNfc2VsZWN0aW9uX3NvcnRDb21wYXJhdG9yLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gIGZvciAodmFyIGogPSAtMSwgbSA9IHRoaXMubGVuZ3RoOyArK2ogPCBtOykgdGhpc1tqXS5zb3J0KGNvbXBhcmF0b3IpO1xuICByZXR1cm4gdGhpcy5vcmRlcigpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX3NvcnRDb21wYXJhdG9yKGNvbXBhcmF0b3IpIHtcbiAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSBjb21wYXJhdG9yID0gZDNfYXNjZW5kaW5nO1xuICByZXR1cm4gZnVuY3Rpb24oYSwgYikge1xuICAgIHJldHVybiBhICYmIGIgPyBjb21wYXJhdG9yKGEuX19kYXRhX18sIGIuX19kYXRhX18pIDogIWEgLSAhYjtcbiAgfTtcbn1cblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLmVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaykge1xuICByZXR1cm4gZDNfc2VsZWN0aW9uX2VhY2godGhpcywgZnVuY3Rpb24obm9kZSwgaSwgaikge1xuICAgIGNhbGxiYWNrLmNhbGwobm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgaik7XG4gIH0pO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2VhY2goZ3JvdXBzLCBjYWxsYmFjaykge1xuICBmb3IgKHZhciBqID0gMCwgbSA9IGdyb3Vwcy5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICBmb3IgKHZhciBncm91cCA9IGdyb3Vwc1tqXSwgaSA9IDAsIG4gPSBncm91cC5sZW5ndGgsIG5vZGU7IGkgPCBuOyBpKyspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIGNhbGxiYWNrKG5vZGUsIGksIGopO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZ3JvdXBzO1xufVxuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUuY2FsbCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gIHZhciBhcmdzID0gZDNfYXJyYXkoYXJndW1lbnRzKTtcbiAgY2FsbGJhY2suYXBwbHkoYXJnc1swXSA9IHRoaXMsIGFyZ3MpO1xuICByZXR1cm4gdGhpcztcbn07XG5cbmQzX3NlbGVjdGlvblByb3RvdHlwZS5lbXB0eSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gIXRoaXMubm9kZSgpO1xufTtcblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLm5vZGUgPSBmdW5jdGlvbigpIHtcbiAgZm9yICh2YXIgaiA9IDAsIG0gPSB0aGlzLmxlbmd0aDsgaiA8IG07IGorKykge1xuICAgIGZvciAodmFyIGdyb3VwID0gdGhpc1tqXSwgaSA9IDAsIG4gPSBncm91cC5sZW5ndGg7IGkgPCBuOyBpKyspIHtcbiAgICAgIHZhciBub2RlID0gZ3JvdXBbaV07XG4gICAgICBpZiAobm9kZSkgcmV0dXJuIG5vZGU7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufTtcblxuZDNfc2VsZWN0aW9uUHJvdG90eXBlLnNpemUgPSBmdW5jdGlvbigpIHtcbiAgdmFyIG4gPSAwO1xuICBkM19zZWxlY3Rpb25fZWFjaCh0aGlzLCBmdW5jdGlvbigpIHsgKytuOyB9KTtcbiAgcmV0dXJuIG47XG59O1xuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fZW50ZXIoc2VsZWN0aW9uKSB7XG4gIGQzX3N1YmNsYXNzKHNlbGVjdGlvbiwgZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlKTtcbiAgcmV0dXJuIHNlbGVjdGlvbjtcbn1cblxudmFyIGQzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZSA9IFtdO1xuXG5kMy5zZWxlY3Rpb24uZW50ZXIgPSBkM19zZWxlY3Rpb25fZW50ZXI7XG5kMy5zZWxlY3Rpb24uZW50ZXIucHJvdG90eXBlID0gZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlO1xuXG5kM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUuYXBwZW5kID0gZDNfc2VsZWN0aW9uUHJvdG90eXBlLmFwcGVuZDtcbmQzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZS5lbXB0eSA9IGQzX3NlbGVjdGlvblByb3RvdHlwZS5lbXB0eTtcbmQzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZS5ub2RlID0gZDNfc2VsZWN0aW9uUHJvdG90eXBlLm5vZGU7XG5kM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUuY2FsbCA9IGQzX3NlbGVjdGlvblByb3RvdHlwZS5jYWxsO1xuZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlLnNpemUgPSBkM19zZWxlY3Rpb25Qcm90b3R5cGUuc2l6ZTtcblxuXG5kM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGUuc2VsZWN0ID0gZnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgdmFyIHN1Ymdyb3VwcyA9IFtdLFxuICAgICAgc3ViZ3JvdXAsXG4gICAgICBzdWJub2RlLFxuICAgICAgdXBncm91cCxcbiAgICAgIGdyb3VwLFxuICAgICAgbm9kZTtcblxuICBmb3IgKHZhciBqID0gLTEsIG0gPSB0aGlzLmxlbmd0aDsgKytqIDwgbTspIHtcbiAgICB1cGdyb3VwID0gKGdyb3VwID0gdGhpc1tqXSkudXBkYXRlO1xuICAgIHN1Ymdyb3Vwcy5wdXNoKHN1Ymdyb3VwID0gW10pO1xuICAgIHN1Ymdyb3VwLnBhcmVudE5vZGUgPSBncm91cC5wYXJlbnROb2RlO1xuICAgIGZvciAodmFyIGkgPSAtMSwgbiA9IGdyb3VwLmxlbmd0aDsgKytpIDwgbjspIHtcbiAgICAgIGlmIChub2RlID0gZ3JvdXBbaV0pIHtcbiAgICAgICAgc3ViZ3JvdXAucHVzaCh1cGdyb3VwW2ldID0gc3Vibm9kZSA9IHNlbGVjdG9yLmNhbGwoZ3JvdXAucGFyZW50Tm9kZSwgbm9kZS5fX2RhdGFfXywgaSwgaikpO1xuICAgICAgICBzdWJub2RlLl9fZGF0YV9fID0gbm9kZS5fX2RhdGFfXztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1Ymdyb3VwLnB1c2gobnVsbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGQzX3NlbGVjdGlvbihzdWJncm91cHMpO1xufTtcblxuZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uKG5hbWUsIGJlZm9yZSkge1xuICBpZiAoYXJndW1lbnRzLmxlbmd0aCA8IDIpIGJlZm9yZSA9IGQzX3NlbGVjdGlvbl9lbnRlckluc2VydEJlZm9yZSh0aGlzKTtcbiAgcmV0dXJuIGQzX3NlbGVjdGlvblByb3RvdHlwZS5pbnNlcnQuY2FsbCh0aGlzLCBuYW1lLCBiZWZvcmUpO1xufTtcblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2VudGVySW5zZXJ0QmVmb3JlKGVudGVyKSB7XG4gIHZhciBpMCwgajA7XG4gIHJldHVybiBmdW5jdGlvbihkLCBpLCBqKSB7XG4gICAgdmFyIGdyb3VwID0gZW50ZXJbal0udXBkYXRlLFxuICAgICAgICBuID0gZ3JvdXAubGVuZ3RoLFxuICAgICAgICBub2RlO1xuICAgIGlmIChqICE9IGowKSBqMCA9IGosIGkwID0gMDtcbiAgICBpZiAoaSA+PSBpMCkgaTAgPSBpICsgMTtcbiAgICB3aGlsZSAoIShub2RlID0gZ3JvdXBbaTBdKSAmJiArK2kwIDwgbik7XG4gICAgcmV0dXJuIG5vZGU7XG4gIH07XG59XG5cbi8vIFRPRE8gZmFzdCBzaW5nbGV0b24gaW1wbGVtZW50YXRpb24/XG5kMy5zZWxlY3QgPSBmdW5jdGlvbihub2RlKSB7XG4gIHZhciBncm91cDtcbiAgaWYgKHR5cGVvZiBub2RlID09PSBcInN0cmluZ1wiKSB7XG4gICAgZ3JvdXAgPSBbZDNfc2VsZWN0KG5vZGUsIGQzX2RvY3VtZW50KV07XG4gICAgZ3JvdXAucGFyZW50Tm9kZSA9IGQzX2RvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgfSBlbHNlIHtcbiAgICBncm91cCA9IFtub2RlXTtcbiAgICBncm91cC5wYXJlbnROb2RlID0gZDNfZG9jdW1lbnRFbGVtZW50KG5vZGUpO1xuICB9XG4gIHJldHVybiBkM19zZWxlY3Rpb24oW2dyb3VwXSk7XG59O1xuXG5kMy5zZWxlY3RBbGwgPSBmdW5jdGlvbihub2Rlcykge1xuICB2YXIgZ3JvdXA7XG4gIGlmICh0eXBlb2Ygbm9kZXMgPT09IFwic3RyaW5nXCIpIHtcbiAgICBncm91cCA9IGQzX2FycmF5KGQzX3NlbGVjdEFsbChub2RlcywgZDNfZG9jdW1lbnQpKTtcbiAgICBncm91cC5wYXJlbnROb2RlID0gZDNfZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICB9IGVsc2Uge1xuICAgIGdyb3VwID0gZDNfYXJyYXkobm9kZXMpO1xuICAgIGdyb3VwLnBhcmVudE5vZGUgPSBudWxsO1xuICB9XG4gIHJldHVybiBkM19zZWxlY3Rpb24oW2dyb3VwXSk7XG59O1xuXG5kM19zZWxlY3Rpb25Qcm90b3R5cGUub24gPSBmdW5jdGlvbih0eXBlLCBsaXN0ZW5lciwgY2FwdHVyZSkge1xuICB2YXIgbiA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gIGlmIChuIDwgMykge1xuXG4gICAgLy8gRm9yIG9uKG9iamVjdCkgb3Igb24ob2JqZWN0LCBib29sZWFuKSwgdGhlIG9iamVjdCBzcGVjaWZpZXMgdGhlIGV2ZW50XG4gICAgLy8gdHlwZXMgYW5kIGxpc3RlbmVycyB0byBhZGQgb3IgcmVtb3ZlLiBUaGUgb3B0aW9uYWwgYm9vbGVhbiBzcGVjaWZpZXNcbiAgICAvLyB3aGV0aGVyIHRoZSBsaXN0ZW5lciBjYXB0dXJlcyBldmVudHMuXG4gICAgaWYgKHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICBpZiAobiA8IDIpIGxpc3RlbmVyID0gZmFsc2U7XG4gICAgICBmb3IgKGNhcHR1cmUgaW4gdHlwZSkgdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9vbihjYXB0dXJlLCB0eXBlW2NhcHR1cmVdLCBsaXN0ZW5lcikpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gRm9yIG9uKHN0cmluZyksIHJldHVybiB0aGUgbGlzdGVuZXIgZm9yIHRoZSBmaXJzdCBub2RlLlxuICAgIGlmIChuIDwgMikgcmV0dXJuIChuID0gdGhpcy5ub2RlKClbXCJfX29uXCIgKyB0eXBlXSkgJiYgbi5fO1xuXG4gICAgLy8gRm9yIG9uKHN0cmluZywgZnVuY3Rpb24pLCB1c2UgdGhlIGRlZmF1bHQgY2FwdHVyZS5cbiAgICBjYXB0dXJlID0gZmFsc2U7XG4gIH1cblxuICAvLyBPdGhlcndpc2UsIGEgdHlwZSwgbGlzdGVuZXIgYW5kIGNhcHR1cmUgYXJlIHNwZWNpZmllZCwgYW5kIGhhbmRsZWQgYXMgYmVsb3cuXG4gIHJldHVybiB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX29uKHR5cGUsIGxpc3RlbmVyLCBjYXB0dXJlKSk7XG59O1xuXG5mdW5jdGlvbiBkM19zZWxlY3Rpb25fb24odHlwZSwgbGlzdGVuZXIsIGNhcHR1cmUpIHtcbiAgdmFyIG5hbWUgPSBcIl9fb25cIiArIHR5cGUsXG4gICAgICBpID0gdHlwZS5pbmRleE9mKFwiLlwiKSxcbiAgICAgIHdyYXAgPSBkM19zZWxlY3Rpb25fb25MaXN0ZW5lcjtcblxuICBpZiAoaSA+IDApIHR5cGUgPSB0eXBlLnNsaWNlKDAsIGkpO1xuICB2YXIgZmlsdGVyID0gZDNfc2VsZWN0aW9uX29uRmlsdGVycy5nZXQodHlwZSk7XG4gIGlmIChmaWx0ZXIpIHR5cGUgPSBmaWx0ZXIsIHdyYXAgPSBkM19zZWxlY3Rpb25fb25GaWx0ZXI7XG5cbiAgZnVuY3Rpb24gb25SZW1vdmUoKSB7XG4gICAgdmFyIGwgPSB0aGlzW25hbWVdO1xuICAgIGlmIChsKSB7XG4gICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgbCwgbC4kKTtcbiAgICAgIGRlbGV0ZSB0aGlzW25hbWVdO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uQWRkKCkge1xuICAgIHZhciBsID0gd3JhcChsaXN0ZW5lciwgZDNfYXJyYXkoYXJndW1lbnRzKSk7XG4gICAgb25SZW1vdmUuY2FsbCh0aGlzKTtcbiAgICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgdGhpc1tuYW1lXSA9IGwsIGwuJCA9IGNhcHR1cmUpO1xuICAgIGwuXyA9IGxpc3RlbmVyO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlQWxsKCkge1xuICAgIHZhciByZSA9IG5ldyBSZWdFeHAoXCJeX19vbihbXi5dKylcIiArIGQzLnJlcXVvdGUodHlwZSkgKyBcIiRcIiksXG4gICAgICAgIG1hdGNoO1xuICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcykge1xuICAgICAgaWYgKG1hdGNoID0gbmFtZS5tYXRjaChyZSkpIHtcbiAgICAgICAgdmFyIGwgPSB0aGlzW25hbWVdO1xuICAgICAgICB0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIobWF0Y2hbMV0sIGwsIGwuJCk7XG4gICAgICAgIGRlbGV0ZSB0aGlzW25hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBpXG4gICAgICA/IGxpc3RlbmVyID8gb25BZGQgOiBvblJlbW92ZVxuICAgICAgOiBsaXN0ZW5lciA/IGQzX25vb3AgOiByZW1vdmVBbGw7XG59XG5cbnZhciBkM19zZWxlY3Rpb25fb25GaWx0ZXJzID0gZDMubWFwKHtcbiAgbW91c2VlbnRlcjogXCJtb3VzZW92ZXJcIixcbiAgbW91c2VsZWF2ZTogXCJtb3VzZW91dFwiXG59KTtcblxuaWYgKGQzX2RvY3VtZW50KSB7XG4gIGQzX3NlbGVjdGlvbl9vbkZpbHRlcnMuZm9yRWFjaChmdW5jdGlvbihrKSB7XG4gICAgaWYgKFwib25cIiArIGsgaW4gZDNfZG9jdW1lbnQpIGQzX3NlbGVjdGlvbl9vbkZpbHRlcnMucmVtb3ZlKGspO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZDNfc2VsZWN0aW9uX29uTGlzdGVuZXIobGlzdGVuZXIsIGFyZ3VtZW50eikge1xuICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgIHZhciBvID0gZDMuZXZlbnQ7IC8vIEV2ZW50cyBjYW4gYmUgcmVlbnRyYW50IChlLmcuLCBmb2N1cykuXG4gICAgZDMuZXZlbnQgPSBlO1xuICAgIGFyZ3VtZW50elswXSA9IHRoaXMuX19kYXRhX187XG4gICAgdHJ5IHtcbiAgICAgIGxpc3RlbmVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50eik7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIGQzLmV2ZW50ID0gbztcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGQzX3NlbGVjdGlvbl9vbkZpbHRlcihsaXN0ZW5lciwgYXJndW1lbnR6KSB7XG4gIHZhciBsID0gZDNfc2VsZWN0aW9uX29uTGlzdGVuZXIobGlzdGVuZXIsIGFyZ3VtZW50eik7XG4gIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgdmFyIHRhcmdldCA9IHRoaXMsIHJlbGF0ZWQgPSBlLnJlbGF0ZWRUYXJnZXQ7XG4gICAgaWYgKCFyZWxhdGVkIHx8IChyZWxhdGVkICE9PSB0YXJnZXQgJiYgIShyZWxhdGVkLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKHRhcmdldCkgJiA4KSkpIHtcbiAgICAgIGwuY2FsbCh0YXJnZXQsIGUpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIGQzX2V2ZW50X2RyYWdTZWxlY3QsXG4gICAgZDNfZXZlbnRfZHJhZ0lkID0gMDtcblxuZnVuY3Rpb24gZDNfZXZlbnRfZHJhZ1N1cHByZXNzKG5vZGUpIHtcbiAgdmFyIG5hbWUgPSBcIi5kcmFnc3VwcHJlc3MtXCIgKyArK2QzX2V2ZW50X2RyYWdJZCxcbiAgICAgIGNsaWNrID0gXCJjbGlja1wiICsgbmFtZSxcbiAgICAgIHcgPSBkMy5zZWxlY3QoZDNfd2luZG93KG5vZGUpKVxuICAgICAgICAgIC5vbihcInRvdWNobW92ZVwiICsgbmFtZSwgZDNfZXZlbnRQcmV2ZW50RGVmYXVsdClcbiAgICAgICAgICAub24oXCJkcmFnc3RhcnRcIiArIG5hbWUsIGQzX2V2ZW50UHJldmVudERlZmF1bHQpXG4gICAgICAgICAgLm9uKFwic2VsZWN0c3RhcnRcIiArIG5hbWUsIGQzX2V2ZW50UHJldmVudERlZmF1bHQpO1xuXG4gIGlmIChkM19ldmVudF9kcmFnU2VsZWN0ID09IG51bGwpIHtcbiAgICBkM19ldmVudF9kcmFnU2VsZWN0ID0gXCJvbnNlbGVjdHN0YXJ0XCIgaW4gbm9kZSA/IGZhbHNlXG4gICAgICAgIDogZDNfdmVuZG9yU3ltYm9sKG5vZGUuc3R5bGUsIFwidXNlclNlbGVjdFwiKTtcbiAgfVxuXG4gIGlmIChkM19ldmVudF9kcmFnU2VsZWN0KSB7XG4gICAgdmFyIHN0eWxlID0gZDNfZG9jdW1lbnRFbGVtZW50KG5vZGUpLnN0eWxlLFxuICAgICAgICBzZWxlY3QgPSBzdHlsZVtkM19ldmVudF9kcmFnU2VsZWN0XTtcbiAgICBzdHlsZVtkM19ldmVudF9kcmFnU2VsZWN0XSA9IFwibm9uZVwiO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmN0aW9uKHN1cHByZXNzQ2xpY2spIHtcbiAgICB3Lm9uKG5hbWUsIG51bGwpO1xuICAgIGlmIChkM19ldmVudF9kcmFnU2VsZWN0KSBzdHlsZVtkM19ldmVudF9kcmFnU2VsZWN0XSA9IHNlbGVjdDtcbiAgICBpZiAoc3VwcHJlc3NDbGljaykgeyAvLyBzdXBwcmVzcyB0aGUgbmV4dCBjbGljaywgYnV0IG9ubHkgaWYgaXTigJlzIGltbWVkaWF0ZVxuICAgICAgdmFyIG9mZiA9IGZ1bmN0aW9uKCkgeyB3Lm9uKGNsaWNrLCBudWxsKTsgfTtcbiAgICAgIHcub24oY2xpY2ssIGZ1bmN0aW9uKCkgeyBkM19ldmVudFByZXZlbnREZWZhdWx0KCk7IG9mZigpOyB9LCB0cnVlKTtcbiAgICAgIHNldFRpbWVvdXQob2ZmLCAwKTtcbiAgICB9XG4gIH07XG59XG5cbmQzLm1vdXNlID0gZnVuY3Rpb24oY29udGFpbmVyKSB7XG4gIHJldHVybiBkM19tb3VzZVBvaW50KGNvbnRhaW5lciwgZDNfZXZlbnRTb3VyY2UoKSk7XG59O1xuXG4vLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9NDQwODNcbnZhciBkM19tb3VzZV9idWc0NDA4MyA9IHRoaXMubmF2aWdhdG9yICYmIC9XZWJLaXQvLnRlc3QodGhpcy5uYXZpZ2F0b3IudXNlckFnZW50KSA/IC0xIDogMDtcblxuZnVuY3Rpb24gZDNfbW91c2VQb2ludChjb250YWluZXIsIGUpIHtcbiAgaWYgKGUuY2hhbmdlZFRvdWNoZXMpIGUgPSBlLmNoYW5nZWRUb3VjaGVzWzBdO1xuICB2YXIgc3ZnID0gY29udGFpbmVyLm93bmVyU1ZHRWxlbWVudCB8fCBjb250YWluZXI7XG4gIGlmIChzdmcuY3JlYXRlU1ZHUG9pbnQpIHtcbiAgICB2YXIgcG9pbnQgPSBzdmcuY3JlYXRlU1ZHUG9pbnQoKTtcbiAgICBpZiAoZDNfbW91c2VfYnVnNDQwODMgPCAwKSB7XG4gICAgICB2YXIgd2luZG93ID0gZDNfd2luZG93KGNvbnRhaW5lcik7XG4gICAgICBpZiAod2luZG93LnNjcm9sbFggfHwgd2luZG93LnNjcm9sbFkpIHtcbiAgICAgICAgc3ZnID0gZDMuc2VsZWN0KFwiYm9keVwiKS5hcHBlbmQoXCJzdmdcIikuc3R5bGUoe1xuICAgICAgICAgIHBvc2l0aW9uOiBcImFic29sdXRlXCIsXG4gICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgbWFyZ2luOiAwLFxuICAgICAgICAgIHBhZGRpbmc6IDAsXG4gICAgICAgICAgYm9yZGVyOiBcIm5vbmVcIlxuICAgICAgICB9LCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgdmFyIGN0bSA9IHN2Z1swXVswXS5nZXRTY3JlZW5DVE0oKTtcbiAgICAgICAgZDNfbW91c2VfYnVnNDQwODMgPSAhKGN0bS5mIHx8IGN0bS5lKTtcbiAgICAgICAgc3ZnLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoZDNfbW91c2VfYnVnNDQwODMpIHBvaW50LnggPSBlLnBhZ2VYLCBwb2ludC55ID0gZS5wYWdlWTtcbiAgICBlbHNlIHBvaW50LnggPSBlLmNsaWVudFgsIHBvaW50LnkgPSBlLmNsaWVudFk7XG4gICAgcG9pbnQgPSBwb2ludC5tYXRyaXhUcmFuc2Zvcm0oY29udGFpbmVyLmdldFNjcmVlbkNUTSgpLmludmVyc2UoKSk7XG4gICAgcmV0dXJuIFtwb2ludC54LCBwb2ludC55XTtcbiAgfVxuICB2YXIgcmVjdCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgcmV0dXJuIFtlLmNsaWVudFggLSByZWN0LmxlZnQgLSBjb250YWluZXIuY2xpZW50TGVmdCwgZS5jbGllbnRZIC0gcmVjdC50b3AgLSBjb250YWluZXIuY2xpZW50VG9wXTtcbn07XG5cbmQzLnRvdWNoID0gZnVuY3Rpb24oY29udGFpbmVyLCB0b3VjaGVzLCBpZGVudGlmaWVyKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoIDwgMykgaWRlbnRpZmllciA9IHRvdWNoZXMsIHRvdWNoZXMgPSBkM19ldmVudFNvdXJjZSgpLmNoYW5nZWRUb3VjaGVzO1xuICBpZiAodG91Y2hlcykgZm9yICh2YXIgaSA9IDAsIG4gPSB0b3VjaGVzLmxlbmd0aCwgdG91Y2g7IGkgPCBuOyArK2kpIHtcbiAgICBpZiAoKHRvdWNoID0gdG91Y2hlc1tpXSkuaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmV0dXJuIGQzX21vdXNlUG9pbnQoY29udGFpbmVyLCB0b3VjaCk7XG4gICAgfVxuICB9XG59O1xuZDMuYmVoYXZpb3IgPSB7fTtcblxuZDMuYmVoYXZpb3IuZHJhZyA9IGZ1bmN0aW9uKCkge1xuICB2YXIgZXZlbnQgPSBkM19ldmVudERpc3BhdGNoKGRyYWcsIFwiZHJhZ1wiLCBcImRyYWdzdGFydFwiLCBcImRyYWdlbmRcIiksXG4gICAgICBvcmlnaW4gPSBudWxsLFxuICAgICAgbW91c2Vkb3duID0gZHJhZ3N0YXJ0KGQzX25vb3AsIGQzLm1vdXNlLCBkM193aW5kb3csIFwibW91c2Vtb3ZlXCIsIFwibW91c2V1cFwiKSxcbiAgICAgIHRvdWNoc3RhcnQgPSBkcmFnc3RhcnQoZDNfYmVoYXZpb3JfZHJhZ1RvdWNoSWQsIGQzLnRvdWNoLCBkM19pZGVudGl0eSwgXCJ0b3VjaG1vdmVcIiwgXCJ0b3VjaGVuZFwiKTtcblxuICBmdW5jdGlvbiBkcmFnKCkge1xuICAgIHRoaXMub24oXCJtb3VzZWRvd24uZHJhZ1wiLCBtb3VzZWRvd24pXG4gICAgICAgIC5vbihcInRvdWNoc3RhcnQuZHJhZ1wiLCB0b3VjaHN0YXJ0KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYWdzdGFydChpZCwgcG9zaXRpb24sIHN1YmplY3QsIG1vdmUsIGVuZCkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgIHZhciB0aGF0ID0gdGhpcyxcbiAgICAgICAgICB0YXJnZXQgPSBkMy5ldmVudC50YXJnZXQuY29ycmVzcG9uZGluZ0VsZW1lbnQgfHwgZDMuZXZlbnQudGFyZ2V0LFxuICAgICAgICAgIHBhcmVudCA9IHRoYXQucGFyZW50Tm9kZSxcbiAgICAgICAgICBkaXNwYXRjaCA9IGV2ZW50Lm9mKHRoYXQsIGFyZ3VtZW50cyksXG4gICAgICAgICAgZHJhZ2dlZCA9IDAsXG4gICAgICAgICAgZHJhZ0lkID0gaWQoKSxcbiAgICAgICAgICBkcmFnTmFtZSA9IFwiLmRyYWdcIiArIChkcmFnSWQgPT0gbnVsbCA/IFwiXCIgOiBcIi1cIiArIGRyYWdJZCksXG4gICAgICAgICAgZHJhZ09mZnNldCxcbiAgICAgICAgICBkcmFnU3ViamVjdCA9IGQzLnNlbGVjdChzdWJqZWN0KHRhcmdldCkpLm9uKG1vdmUgKyBkcmFnTmFtZSwgbW92ZWQpLm9uKGVuZCArIGRyYWdOYW1lLCBlbmRlZCksXG4gICAgICAgICAgZHJhZ1Jlc3RvcmUgPSBkM19ldmVudF9kcmFnU3VwcHJlc3ModGFyZ2V0KSxcbiAgICAgICAgICBwb3NpdGlvbjAgPSBwb3NpdGlvbihwYXJlbnQsIGRyYWdJZCk7XG5cbiAgICAgIGlmIChvcmlnaW4pIHtcbiAgICAgICAgZHJhZ09mZnNldCA9IG9yaWdpbi5hcHBseSh0aGF0LCBhcmd1bWVudHMpO1xuICAgICAgICBkcmFnT2Zmc2V0ID0gW2RyYWdPZmZzZXQueCAtIHBvc2l0aW9uMFswXSwgZHJhZ09mZnNldC55IC0gcG9zaXRpb24wWzFdXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRyYWdPZmZzZXQgPSBbMCwgMF07XG4gICAgICB9XG5cbiAgICAgIGRpc3BhdGNoKHt0eXBlOiBcImRyYWdzdGFydFwifSk7XG5cbiAgICAgIGZ1bmN0aW9uIG1vdmVkKCkge1xuICAgICAgICB2YXIgcG9zaXRpb24xID0gcG9zaXRpb24ocGFyZW50LCBkcmFnSWQpLCBkeCwgZHk7XG4gICAgICAgIGlmICghcG9zaXRpb24xKSByZXR1cm47IC8vIHRoaXMgdG91Y2ggZGlkbuKAmXQgbW92ZVxuXG4gICAgICAgIGR4ID0gcG9zaXRpb24xWzBdIC0gcG9zaXRpb24wWzBdO1xuICAgICAgICBkeSA9IHBvc2l0aW9uMVsxXSAtIHBvc2l0aW9uMFsxXTtcbiAgICAgICAgZHJhZ2dlZCB8PSBkeCB8IGR5O1xuICAgICAgICBwb3NpdGlvbjAgPSBwb3NpdGlvbjE7XG5cbiAgICAgICAgZGlzcGF0Y2goe1xuICAgICAgICAgIHR5cGU6IFwiZHJhZ1wiLFxuICAgICAgICAgIHg6IHBvc2l0aW9uMVswXSArIGRyYWdPZmZzZXRbMF0sXG4gICAgICAgICAgeTogcG9zaXRpb24xWzFdICsgZHJhZ09mZnNldFsxXSxcbiAgICAgICAgICBkeDogZHgsXG4gICAgICAgICAgZHk6IGR5XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBlbmRlZCgpIHtcbiAgICAgICAgaWYgKCFwb3NpdGlvbihwYXJlbnQsIGRyYWdJZCkpIHJldHVybjsgLy8gdGhpcyB0b3VjaCBkaWRu4oCZdCBlbmRcbiAgICAgICAgZHJhZ1N1YmplY3Qub24obW92ZSArIGRyYWdOYW1lLCBudWxsKS5vbihlbmQgKyBkcmFnTmFtZSwgbnVsbCk7XG4gICAgICAgIGRyYWdSZXN0b3JlKGRyYWdnZWQpO1xuICAgICAgICBkaXNwYXRjaCh7dHlwZTogXCJkcmFnZW5kXCJ9KTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgZHJhZy5vcmlnaW4gPSBmdW5jdGlvbih4KSB7XG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gb3JpZ2luO1xuICAgIG9yaWdpbiA9IHg7XG4gICAgcmV0dXJuIGRyYWc7XG4gIH07XG5cbiAgcmV0dXJuIGQzLnJlYmluZChkcmFnLCBldmVudCwgXCJvblwiKTtcbn07XG5cbi8vIFdoaWxlIGl0IGlzIHBvc3NpYmxlIHRvIHJlY2VpdmUgYSB0b3VjaHN0YXJ0IGV2ZW50IHdpdGggbW9yZSB0aGFuIG9uZSBjaGFuZ2VkXG4vLyB0b3VjaCwgdGhlIGV2ZW50IGlzIG9ubHkgc2hhcmVkIGJ5IHRvdWNoZXMgb24gdGhlIHNhbWUgdGFyZ2V0OyBmb3IgbmV3XG4vLyB0b3VjaGVzIHRhcmdldHRpbmcgZGlmZmVyZW50IGVsZW1lbnRzLCBtdWx0aXBsZSB0b3VjaHN0YXJ0IGV2ZW50cyBhcmVcbi8vIHJlY2VpdmVkIGV2ZW4gd2hlbiB0aGUgdG91Y2hlcyBzdGFydCBzaW11bHRhbmVvdXNseS4gU2luY2UgbXVsdGlwbGUgdG91Y2hlc1xuLy8gY2Fubm90IG1vdmUgdGhlIHNhbWUgdGFyZ2V0IHRvIGRpZmZlcmVudCBsb2NhdGlvbnMgY29uY3VycmVudGx5IHdpdGhvdXRcbi8vIHRlYXJpbmcgdGhlIGZhYnJpYyBvZiBzcGFjZXRpbWUsIHdlIGFsbG93IHRoZSBmaXJzdCB0b3VjaCB0byB3aW4uXG5mdW5jdGlvbiBkM19iZWhhdmlvcl9kcmFnVG91Y2hJZCgpIHtcbiAgcmV0dXJuIGQzLmV2ZW50LmNoYW5nZWRUb3VjaGVzWzBdLmlkZW50aWZpZXI7XG59XG4gIGlmICh0eXBlb2YgZGVmaW5lID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmaW5lLmFtZCkgdGhpcy5kMyA9IGQzLCBkZWZpbmUoZDMpO1xuICBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIG1vZHVsZS5leHBvcnRzKSBtb2R1bGUuZXhwb3J0cyA9IGQzO1xuICBlbHNlIHRoaXMuZDMgPSBkMztcbn0oKTtcbiIsIi8qKlxuICogQWJzdHJhY3RGaWxlIGlzIGFuIGFic3RyYWN0IHJlcHJlc2VudGF0aW9uIG9mIGEgZmlsZS4gVGhlcmUgYXJlIHR3byBpbXBsZW1lbnRhdGlvbjpcbiAqIDEuIFJlbW90ZUZpbGUgIC0gcmVwcmVzZW50YXRpb24gb2YgYSBmaWxlIG9uIGEgcmVtb3RlIHNlcnZlciB3aGljaCBjYW4gYmVcbiAqIGZldGNoZWQgaW4gY2h1bmtzLCBlLmcuIHVzaW5nIGEgUmFuZ2UgcmVxdWVzdC5cbiAqIDIuIExvY2FsU3RyaW5nRmlsZSBpcyBhIHJlcHJlc2VudGF0aW9uIG9mIGEgZmlsZSB0aGF0IHdhcyBjcmVhdGVkIGZyb20gaW5wdXQgc3RyaW5nLiBcbiAqIFVzZWQgZm9yIHRlc3RpbmcgYW5kIHNtYWxsIGlucHV0IGZpbGVzLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vL2ltcG9ydCBRIGZyb20gJ3EnO1xuXG5jbGFzcyBBYnN0cmFjdEZpbGUge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvL2hvdyB0byBwcmV2ZW50IGluc3RhbnRhdGlvbiBvZiB0aGlzIGNsYXNzPz8/XG4gICAgLy90aGlzIGNvZGUgZG9lc24ndCBwYXNzIG5wbSBydW4gZmxvd1xuLy8gICAgaWYgKG5ldy50YXJnZXQgPT09IEFic3RyYWN0RmlsZSkgeyBcbi8vICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjb25zdHJ1Y3QgQWJzdHJhY3RGaWxlIGluc3RhbmNlcyBkaXJlY3RseVwiKTtcbi8vICAgIH1cbiAgfVxuXG4gIGdldEJ5dGVzKHN0YXJ0OiBudW1iZXIsIGxlbmd0aDogbnVtYmVyKTpPYmplY3Qgey8vOiBRLlByb21pc2U8QXJyYXlCdWZmZXI+IHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiTWV0aG9kIGdldEJ5dGVzIGlzIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgfVxuXG4gIC8vIFJlYWQgdGhlIGVudGlyZSBmaWxlIC0tIG5vdCByZWNvbW1lbmRlZCBmb3IgbGFyZ2UgZmlsZXMhXG4gIGdldEFsbCgpOk9iamVjdCB7Ly86IFEuUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJNZXRob2QgZ2V0QWxsIGlzIG5vdCBpbXBsZW1lbnRlZFwiKTtcbiAgfVxuXG4gIC8vIFJlYWRzIHRoZSBlbnRpcmUgZmlsZSBhcyBhIHN0cmluZyAobm90IGFuIEFycmF5QnVmZmVyKS5cbiAgLy8gVGhpcyBkb2VzIG5vdCB1c2UgdGhlIGNhY2hlLlxuICBnZXRBbGxTdHJpbmcoKTpPYmplY3Qgey8vOiBRLlByb21pc2U8c3RyaW5nPiB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIk1ldGhvZCBnZXRBbGxTdHJpbmcgaXMgbm90IGltcGxlbWVudGVkXCIpO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIHByb21pc2UgZm9yIHRoZSBudW1iZXIgb2YgYnl0ZXMgaW4gdGhlIHJlbW90ZSBmaWxlLlxuICBnZXRTaXplKCk6T2JqZWN0IHsvLzogUS5Qcm9taXNlPG51bWJlcj4ge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJNZXRob2QgZ2V0U2l6ZSBpcyBub3QgaW1wbGVtZW50ZWRcIik7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBYnN0cmFjdEZpbGU7XG4iLCIvKiBAZmxvdyAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi9JbnRlcnZhbCc7XG5pbXBvcnQge2ZsYXRNYXB9IGZyb20gJy4vdXRpbHMnO1xuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIGNsb3NlZCBpbnRlcnZhbCBvbiB0aGUgZ2Vub21lOiBjb250aWc6c3RhcnQtc3RvcC5cbiAqXG4gKiBUaGUgY29udGlnIG1heSBiZSBlaXRoZXIgYSBzdHJpbmcgKFwiY2hyMjJcIikgb3IgYSBudW1iZXIgKGluIGNhc2UgdGhlIGNvbnRpZ3NcbiAqIGFyZSBpbmRleGVkLCBmb3IgZXhhbXBsZSkuXG4gKi9cbmNsYXNzIENvbnRpZ0ludGVydmFsPFQ6IChudW1iZXJ8c3RyaW5nKT4ge1xuICBjb250aWc6IFQ7XG4gIGludGVydmFsOiBJbnRlcnZhbDtcblxuICBjb25zdHJ1Y3Rvcihjb250aWc6IFQsIHN0YXJ0OiBudW1iZXIsIHN0b3A6IG51bWJlcikge1xuICAgIHRoaXMuY29udGlnID0gY29udGlnO1xuICAgIHRoaXMuaW50ZXJ2YWwgPSBuZXcgSW50ZXJ2YWwoc3RhcnQsIHN0b3ApO1xuICB9XG5cbiAgLy8gVE9ETzogbWFrZSB0aGVzZSBnZXR0ZXIgbWV0aG9kcyAmIHN3aXRjaCB0byBCYWJlbC5cbiAgc3RhcnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcnZhbC5zdGFydDtcbiAgfVxuICBzdG9wKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJ2YWwuc3RvcDtcbiAgfVxuICBsZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcnZhbC5sZW5ndGgoKTtcbiAgfVxuXG4gIGludGVyc2VjdHMob3RoZXI6IENvbnRpZ0ludGVydmFsPFQ+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLmNvbnRpZyA9PT0gb3RoZXIuY29udGlnICYmXG4gICAgICAgICAgICB0aGlzLmludGVydmFsLmludGVyc2VjdHMob3RoZXIuaW50ZXJ2YWwpKTtcbiAgfVxuXG4gIC8vIExpa2UgaW50ZXJzZWN0cygpLCBidXQgYWxsb3dzICdjaHIxNycgdnMuICcxNyctc3R5bGUgbWlzbWF0Y2hlcy5cbiAgY2hySW50ZXJzZWN0cyhvdGhlcjogQ29udGlnSW50ZXJ2YWw8VD4pOiBib29sZWFuIHtcbiAgICByZXR1cm4gKHRoaXMuY2hyT25Db250aWcob3RoZXIuY29udGlnKSAmJlxuICAgICAgICAgICAgdGhpcy5pbnRlcnZhbC5pbnRlcnNlY3RzKG90aGVyLmludGVydmFsKSk7XG4gIH1cblxuICBjb250YWluc0ludGVydmFsKG90aGVyOiBDb250aWdJbnRlcnZhbDxUPik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAodGhpcy5jb250aWcgPT09IG90aGVyLmNvbnRpZyAmJlxuICAgICAgICAgICAgdGhpcy5pbnRlcnZhbC5jb250YWluc0ludGVydmFsKG90aGVyLmludGVydmFsKSk7XG4gIH1cblxuICBpc0FkamFjZW50VG8ob3RoZXI6IENvbnRpZ0ludGVydmFsPFQ+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLmNvbnRpZyA9PT0gb3RoZXIuY29udGlnICYmXG4gICAgICAgICAgICAodGhpcy5zdGFydCgpID09IDEgKyBvdGhlci5zdG9wKCkgfHxcbiAgICAgICAgICAgICB0aGlzLnN0b3AoKSArIDEgPT0gb3RoZXIuc3RhcnQoKSkpO1xuICB9XG5cbiAgaXNDb3ZlcmVkQnkoaW50ZXJ2YWxzOiBDb250aWdJbnRlcnZhbDxUPltdKTogYm9vbGVhbiB7XG4gICAgdmFyIGl2cyA9IGludGVydmFscy5maWx0ZXIoaXYgPT4gaXYuY29udGlnID09PSB0aGlzLmNvbnRpZylcbiAgICAgICAgICAgICAgICAgICAgICAgLm1hcChpdiA9PiBpdi5pbnRlcnZhbCk7XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJ2YWwuaXNDb3ZlcmVkQnkoaXZzKTtcbiAgfVxuXG4gIGNvbnRhaW5zTG9jdXMoY29udGlnOiBULCBwb3NpdGlvbjogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29udGlnID09PSBjb250aWcgJiZcbiAgICAgICAgICAgdGhpcy5pbnRlcnZhbC5jb250YWlucyhwb3NpdGlvbik7XG4gIH1cblxuICAvLyBMaWtlIGNvbnRhaW5zTG9jdXMsIGJ1dCBhbGxvd3MgJ2NocjE3JyB2cyAnMTcnLXN0eWxlIG1pc21hdGNoZXNcbiAgY2hyQ29udGFpbnNMb2N1cyhjb250aWc6IFQsIHBvc2l0aW9uOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jaHJPbkNvbnRpZyhjb250aWcpICYmXG4gICAgICAgICAgIHRoaXMuaW50ZXJ2YWwuY29udGFpbnMocG9zaXRpb24pO1xuICB9XG5cbiAgLy8gSXMgdGhpcyByZWFkIG9uIHRoZSBnaXZlbiBjb250aWc/IChhbGxvd2luZyBmb3IgY2hyMTcgdnMgMTctc3R5bGUgbWlzbWF0Y2hlcylcbiAgY2hyT25Db250aWcoY29udGlnOiBUKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICh0aGlzLmNvbnRpZyA9PT0gY29udGlnIHx8XG4gICAgICAgICAgICB0aGlzLmNvbnRpZyA9PT0gJ2NocicgKyBjb250aWcgfHxcbiAgICAgICAgICAgICdjaHInICsgdGhpcy5jb250aWcgPT09IGNvbnRpZyk7XG4gIH1cblxuICBjbG9uZSgpOiBDb250aWdJbnRlcnZhbDxUPiB7XG4gICAgcmV0dXJuIG5ldyBDb250aWdJbnRlcnZhbCh0aGlzLmNvbnRpZywgdGhpcy5pbnRlcnZhbC5zdGFydCwgdGhpcy5pbnRlcnZhbC5zdG9wKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaW1pbGFyIHRvIEludGVydmFsLmNvbXBsZW1lbnRJbnRlcnZhbHMsIGJ1dCBvbmx5IGNvbnNpZGVycyB0aG9zZSBpbnRlcnZhbHNcbiAgICogb24gdGhlIHNhbWUgY29udGlnIGFzIHRoaXMgb25lLlxuICAgKi9cbiAgY29tcGxlbWVudEludGVydmFscyhpbnRlcnZhbHM6IENvbnRpZ0ludGVydmFsPFQ+W10pOiBDb250aWdJbnRlcnZhbDxUPltdIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcnZhbC5jb21wbGVtZW50SW50ZXJ2YWxzKFxuICAgICAgICBmbGF0TWFwKGludGVydmFscywgY2kgPT4gY2kuY29udGlnID09PSB0aGlzLmNvbnRpZyA/IFtjaS5pbnRlcnZhbF0gOiBbXSkpXG4gICAgICAgIC5tYXAoaXYgPT4gbmV3IENvbnRpZ0ludGVydmFsKHRoaXMuY29udGlnLCBpdi5zdGFydCwgaXYuc3RvcCkpO1xuICB9XG5cbiAgLypcbiAgVGhpcyBtZXRob2QgZG9lc24ndCB0eXBlY2hlY2suIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svZmxvdy9pc3N1ZXMvMzg4XG4gIGlzQWZ0ZXJJbnRlcnZhbChvdGhlcjogQ29udGlnSW50ZXJ2YWwpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKHRoaXMuY29udGlnID4gb3RoZXIuY29udGlnIHx8XG4gICAgICAgICAgICAodGhpcy5jb250aWcgPT09IG90aGVyLmNvbnRpZyAmJiB0aGlzLnN0YXJ0KCkgPiBvdGhlci5zdGFydCgpKSk7XG4gIH1cbiAgKi9cblxuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0aGlzLmNvbnRpZ306JHt0aGlzLnN0YXJ0KCl9LSR7dGhpcy5zdG9wKCl9YDtcbiAgfVxuXG4gIHRvR2Vub21lUmFuZ2UoKTogR2Vub21lUmFuZ2Uge1xuICAgIGlmICghKHR5cGVvZiB0aGlzLmNvbnRpZyA9PT0gJ3N0cmluZycgfHwgdGhpcy5jb250aWcgaW5zdGFuY2VvZiBTdHJpbmcpKSB7XG4gICAgICB0aHJvdyAnQ2Fubm90IGNvbnZlcnQgbnVtZXJpYyBDb250aWdJbnRlcnZhbCB0byBHZW5vbWVSYW5nZSc7XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICBjb250aWc6IHRoaXMuY29udGlnLFxuICAgICAgc3RhcnQ6IHRoaXMuc3RhcnQoKSxcbiAgICAgIHN0b3A6IHRoaXMuc3RvcCgpXG4gICAgfTtcbiAgfVxuXG4gIC8vIENvbXBhcmF0b3IgZm9yIHVzZSB3aXRoIEFycmF5LnByb3RvdHlwZS5zb3J0XG4gIHN0YXRpYyBjb21wYXJlKGE6IENvbnRpZ0ludGVydmFsLCBiOiBDb250aWdJbnRlcnZhbCk6IG51bWJlciB7XG4gICAgaWYgKGEuY29udGlnID4gYi5jb250aWcpIHtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9IGVsc2UgaWYgKGEuY29udGlnIDwgYi5jb250aWcpIHtcbiAgICAgIHJldHVybiArMTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGEuc3RhcnQoKSAtIGIuc3RhcnQoKTtcbiAgICB9XG4gIH1cblxuICAvLyBTb3J0IGFuIGFycmF5IG9mIGludGVydmFscyAmIGNvYWxlc2NlIGFkamFjZW50L292ZXJsYXBwaW5nIHJhbmdlcy5cbiAgLy8gTkI6IHRoaXMgbWF5IHJlLW9yZGVyIHRoZSBpbnRlcnZhbHMgcGFyYW1ldGVyXG4gIHN0YXRpYyBjb2FsZXNjZShpbnRlcnZhbHM6IENvbnRpZ0ludGVydmFsW10pOiBDb250aWdJbnRlcnZhbFtdIHtcbiAgICBpbnRlcnZhbHMuc29ydChDb250aWdJbnRlcnZhbC5jb21wYXJlKTtcblxuICAgIHZhciBycyA9IFtdO1xuICAgIGludGVydmFscy5mb3JFYWNoKHIgPT4ge1xuICAgICAgaWYgKHJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBycy5wdXNoKHIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHZhciBsYXN0UiA9IHJzW3JzLmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKHIuaW50ZXJzZWN0cyhsYXN0UikgfHwgci5pc0FkamFjZW50VG8obGFzdFIpKSB7XG4gICAgICAgIGxhc3RSID0gcnNbcnMubGVuZ3RoIC0gMV0gPSBsYXN0Ui5jbG9uZSgpO1xuICAgICAgICBsYXN0Ui5pbnRlcnZhbC5zdG9wID0gTWF0aC5tYXgoci5pbnRlcnZhbC5zdG9wLCBsYXN0Ui5pbnRlcnZhbC5zdG9wKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJzLnB1c2gocik7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gcnM7XG4gIH1cblxuICBzdGF0aWMgZnJvbUdlbm9tZVJhbmdlKHJhbmdlOiBHZW5vbWVSYW5nZSk6IENvbnRpZ0ludGVydmFsPHN0cmluZz4ge1xuICAgIHJldHVybiBuZXcgQ29udGlnSW50ZXJ2YWwocmFuZ2UuY29udGlnLCByYW5nZS5zdGFydCwgcmFuZ2Uuc3RvcCk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDb250aWdJbnRlcnZhbDtcbiIsIi8qKlxuICogQ29udHJvbHMgZm9yIHpvb21pbmcgdG8gcGFydGljdWxhciByYW5nZXMgb2YgdGhlIGdlbm9tZS5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1BhcnRpYWxHZW5vbWVSYW5nZX0gZnJvbSAnLi90eXBlcyc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcblxuaW1wb3J0IHV0aWxzIGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IEludGVydmFsIGZyb20gJy4vSW50ZXJ2YWwnO1xuXG50eXBlIFByb3BzID0ge1xuICByYW5nZTogP0dlbm9tZVJhbmdlO1xuICBjb250aWdMaXN0OiBzdHJpbmdbXTtcbiAgb25DaGFuZ2U6IChuZXdSYW5nZTogR2Vub21lUmFuZ2UpPT52b2lkO1xufTtcblxuY2xhc3MgQ29udHJvbHMgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBwcm9wczogUHJvcHM7XG4gIHN0YXRlOiB2b2lkOyAgLy8gbm8gc3RhdGVcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogT2JqZWN0KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICB9XG5cbiAgbWFrZVJhbmdlKCk6IEdlbm9tZVJhbmdlIHtcbiAgICByZXR1cm4ge1xuICAgICAgY29udGlnOiB0aGlzLnJlZnMuY29udGlnLnZhbHVlLFxuICAgICAgc3RhcnQ6IE51bWJlcih0aGlzLnJlZnMuc3RhcnQudmFsdWUpLFxuICAgICAgc3RvcDogTnVtYmVyKHRoaXMucmVmcy5zdG9wLnZhbHVlKVxuICAgIH07XG4gIH1cblxuICBjb21wbGV0ZVJhbmdlKHJhbmdlOiA/UGFydGlhbEdlbm9tZVJhbmdlKTogR2Vub21lUmFuZ2Uge1xuICAgIHJhbmdlID0gcmFuZ2UgfHwge307XG4gICAgaWYgKHJhbmdlLnN0YXJ0ICYmIHJhbmdlLnN0b3AgPT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gQ29uc3RydWN0IGEgcmFuZ2UgY2VudGVyZWQgYXJvdW5kIGEgdmFsdWUuIFRoaXMgbWF0Y2hlcyBJR1YuXG4gICAgICByYW5nZS5zdG9wID0gcmFuZ2Uuc3RhcnQgKyAyMDtcbiAgICAgIHJhbmdlLnN0YXJ0IC09IDIwO1xuICAgIH1cblxuICAgIGlmIChyYW5nZS5jb250aWcpIHtcbiAgICAgIC8vIFRoZXJlIGFyZSBtYWpvciBwZXJmb3JtYW5jZSBpc3N1ZXMgd2l0aCBoYXZpbmcgYSAnY2hyJyBtaXNtYXRjaCBpbiB0aGVcbiAgICAgIC8vIGdsb2JhbCBsb2NhdGlvbiBvYmplY3QuXG4gICAgICBjb25zdCBjb250aWcgPSByYW5nZS5jb250aWc7XG4gICAgICB2YXIgYWx0Q29udGlnID0gXy5maW5kKHRoaXMucHJvcHMuY29udGlnTGlzdCwgcmVmID0+IHV0aWxzLmlzQ2hyTWF0Y2goY29udGlnLCByZWYpKTtcbiAgICAgIGlmIChhbHRDb250aWcpIHJhbmdlLmNvbnRpZyA9IGFsdENvbnRpZztcbiAgICB9XG5cbiAgICByZXR1cm4gKF8uZXh0ZW5kKHt9LCB0aGlzLnByb3BzLnJhbmdlLCByYW5nZSkgOiBhbnkpO1xuICB9XG5cbiAgaGFuZGxlQ29udGlnQ2hhbmdlKGU6IFN5bnRoZXRpY0V2ZW50KSB7XG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZSh0aGlzLmNvbXBsZXRlUmFuZ2Uoe2NvbnRpZzogdGhpcy5yZWZzLmNvbnRpZy52YWx1ZX0pKTtcbiAgfVxuXG4gIGhhbmRsZUZvcm1TdWJtaXQoZTogU3ludGhldGljRXZlbnQpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdmFyIHJhbmdlID0gdGhpcy5jb21wbGV0ZVJhbmdlKHV0aWxzLnBhcnNlUmFuZ2UodGhpcy5yZWZzLnBvc2l0aW9uLnZhbHVlKSk7XG4gICAgdGhpcy5wcm9wcy5vbkNoYW5nZShyYW5nZSk7XG4gIH1cblxuICAvLyBTZXRzIHRoZSB2YWx1ZXMgb2YgdGhlIGlucHV0IGVsZW1lbnRzIHRvIG1hdGNoIGBwcm9wcy5yYW5nZWAuXG4gIHVwZGF0ZVJhbmdlVUkoKSB7XG4gICAgY29uc3QgciA9IHRoaXMucHJvcHMucmFuZ2U7XG4gICAgaWYgKCFyKSByZXR1cm47XG5cbiAgICB0aGlzLnJlZnMucG9zaXRpb24udmFsdWUgPSB1dGlscy5mb3JtYXRJbnRlcnZhbChuZXcgSW50ZXJ2YWwoci5zdGFydCwgci5zdG9wKSk7XG5cbiAgICBpZiAodGhpcy5wcm9wcy5jb250aWdMaXN0KSB7XG4gICAgICB2YXIgY29udGlnSWR4ID0gdGhpcy5wcm9wcy5jb250aWdMaXN0LmluZGV4T2Yoci5jb250aWcpO1xuICAgICAgdGhpcy5yZWZzLmNvbnRpZy5zZWxlY3RlZEluZGV4ID0gY29udGlnSWR4O1xuICAgIH1cbiAgfVxuXG4gIHpvb21JbihlOiBhbnkpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgdGhpcy56b29tQnlGYWN0b3IoMC41KTtcbiAgfVxuXG4gIHpvb21PdXQoZTogYW55KSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMuem9vbUJ5RmFjdG9yKDIuMCk7XG4gIH1cblxuICB6b29tQnlGYWN0b3IoZmFjdG9yOiBudW1iZXIpIHtcbiAgICB2YXIgciA9IHRoaXMucHJvcHMucmFuZ2U7XG4gICAgaWYgKCFyKSByZXR1cm47XG5cbiAgICB2YXIgaXYgPSB1dGlscy5zY2FsZVJhbmdlKG5ldyBJbnRlcnZhbChyLnN0YXJ0LCByLnN0b3ApLCBmYWN0b3IpO1xuICAgIHRoaXMucHJvcHMub25DaGFuZ2Uoe1xuICAgICAgY29udGlnOiByLmNvbnRpZyxcbiAgICAgIHN0YXJ0OiBpdi5zdGFydCxcbiAgICAgIHN0b3A6IGl2LnN0b3BcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlcigpOiBhbnkge1xuICAgIHZhciBjb250aWdPcHRpb25zID0gdGhpcy5wcm9wcy5jb250aWdMaXN0XG4gICAgICAgID8gdGhpcy5wcm9wcy5jb250aWdMaXN0Lm1hcCgoY29udGlnLCBpKSA9PiA8b3B0aW9uIGtleT17aX0+e2NvbnRpZ308L29wdGlvbj4pXG4gICAgICAgIDogbnVsbDtcblxuICAgIC8vIE5vdGU6IGlucHV0IHZhbHVlcyBhcmUgc2V0IGluIGNvbXBvbmVudERpZFVwZGF0ZS5cbiAgICByZXR1cm4gKFxuICAgICAgPGZvcm0gY2xhc3NOYW1lPSdjb250cm9scycgb25TdWJtaXQ9e3RoaXMuaGFuZGxlRm9ybVN1Ym1pdC5iaW5kKHRoaXMpfT5cbiAgICAgICAgPHNlbGVjdCByZWY9J2NvbnRpZycgb25DaGFuZ2U9e3RoaXMuaGFuZGxlQ29udGlnQ2hhbmdlLmJpbmQodGhpcyl9PlxuICAgICAgICAgIHtjb250aWdPcHRpb25zfVxuICAgICAgICA8L3NlbGVjdD57JyAnfVxuICAgICAgICA8aW5wdXQgcmVmPSdwb3NpdGlvbicgdHlwZT0ndGV4dCcgLz57JyAnfVxuICAgICAgICA8YnV0dG9uIGNsYXNzTmFtZT0nYnRuLXN1Ym1pdCcgb25DbGljaz17dGhpcy5oYW5kbGVGb3JtU3VibWl0LmJpbmQodGhpcyl9PkdvPC9idXR0b24+eycgJ31cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3pvb20tY29udHJvbHMnPlxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPSdidG4tem9vbS1vdXQnIG9uQ2xpY2s9e3RoaXMuem9vbU91dC5iaW5kKHRoaXMpfT48L2J1dHRvbj57JyAnfVxuICAgICAgICAgIDxidXR0b24gY2xhc3NOYW1lPSdidG4tem9vbS1pbicgb25DbGljaz17dGhpcy56b29tSW4uYmluZCh0aGlzKX0+PC9idXR0b24+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9mb3JtPlxuICAgICk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBPYmplY3QpIHtcbiAgICBpZiAoIV8uaXNFcXVhbChwcmV2UHJvcHMucmFuZ2UsIHRoaXMucHJvcHMucmFuZ2UpKSB7XG4gICAgICB0aGlzLnVwZGF0ZVJhbmdlVUkoKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnVwZGF0ZVJhbmdlVUkoKTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IENvbnRyb2xzO1xuIiwiLyoqXG4gKiBUaGlzIHNlcnZlcyBhcyBhIGJyaWRnZSBiZXR3ZWVuIG9yZy5nYTRnaC5HQVJlYWRBbGlnbm1lbnQgYW5kIHRoZVxuICogcGlsZXVwLmpzIEFsaWdubWVudCB0eXBlLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7Q2lnYXJPcCwgTWF0ZVByb3BlcnRpZXMsIFN0cmFuZH0gZnJvbSAnLi9BbGlnbm1lbnQnO1xuXG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgU2FtUmVhZCBmcm9tICcuL2RhdGEvU2FtUmVhZCc7XG5cbi8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZ2E0Z2gvc2NoZW1hcy9ibG9iL3YwLjUuMS9zcmMvbWFpbi9yZXNvdXJjZXMvYXZyby9jb21tb24uYXZkbFxudmFyIE9QX01BUCA9IHtcbiAgQUxJR05NRU5UX01BVENIOiAnTScsXG4gIElOU0VSVDogJ0knLFxuICBERUxFVEU6ICdEJyxcbiAgU0tJUDogJ04nLFxuICBDTElQX1NPRlQ6ICdTJyxcbiAgQ0xJUF9IQVJEOiAnSCcsXG4gIFBBRDogJ1AnLFxuICBTRVFVRU5DRV9NQVRDSDogJz0nLFxuICBTRVFVRU5DRV9NSVNNQVRDSDogJ1gnXG59O1xuXG4vKipcbiAqIFRoaXMgY2xhc3MgYWN0cyBhcyBhIGJyaWRnZSBiZXR3ZWVuIG9yZy5nYTRnaC5HQVJlYWRBbGlnbm1lbnQgYW5kIHRoZVxuICogcGlsZXVwLmpzIEFsaWdubWVudCB0eXBlLlxuICovXG5jbGFzcyBHQTRHSEFsaWdubWVudCAvKiBpbXBsZW1lbnRzIEFsaWdubWVudCAqLyB7XG4gIHBvczogbnVtYmVyO1xuICByZWY6IHN0cmluZztcbiAgYWxpZ25tZW50OiBPYmplY3Q7XG4gIG5hbWU6IHN0cmluZztcbiAgY2lnYXJPcHM6IENpZ2FyT3BbXTtcbiAgX2ludGVydmFsOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+O1xuXG4gIC8vIGFsaWdubWVudCBmb2xsb3dzIG9yZy5nYTRnaC5HQVJlYWRBbGlnbm1lbnRcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2dhNGdoL3NjaGVtYXMvYmxvYi92MC41LjEvc3JjL21haW4vcmVzb3VyY2VzL2F2cm8vcmVhZHMuYXZkbFxuICBjb25zdHJ1Y3RvcihhbGlnbm1lbnQ6IE9iamVjdCkge1xuICAgIHRoaXMuYWxpZ25tZW50ID0gYWxpZ25tZW50O1xuICAgIC8vIGNvbnNvbGUubG9nKGFsaWdubWVudClcbiAgICB0aGlzLnBvcyA9ICBhbGlnbm1lbnQuYWxpZ25tZW50LnBvc2l0aW9uLnBvc2l0aW9uO1xuICAgIHRoaXMucmVmID0gIGFsaWdubWVudC5hbGlnbm1lbnQucG9zaXRpb24ucmVmZXJlbmNlTmFtZTtcbiAgICB0aGlzLm5hbWUgPSAgYWxpZ25tZW50LmZyYWdtZW50TmFtZTtcblxuICAgIHRoaXMuY2lnYXJPcHMgPSAgYWxpZ25tZW50LmFsaWdubWVudC5jaWdhci5tYXAoXG4gICAgICAgICh7b3BlcmF0aW9uLCBvcGVyYXRpb25MZW5ndGg6IGxlbmd0aH0pID0+ICh7IG9wOiBPUF9NQVBbb3BlcmF0aW9uXSwgbGVuZ3RoIH0pKTtcbiAgICB0aGlzLl9pbnRlcnZhbCA9IG5ldyBDb250aWdJbnRlcnZhbCh0aGlzLnJlZixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcyArIHRoaXMuZ2V0UmVmZXJlbmNlTGVuZ3RoKCkgLSAxKTtcbiAgfVxuXG4gIGdldEtleSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBHQTRHSEFsaWdubWVudC5rZXlGcm9tR0E0R0hSZXNwb25zZSh0aGlzLmFsaWdubWVudCk7XG4gIH1cblxuICBnZXRTdHJhbmQoKTogU3RyYW5kIHtcbiAgICByZXR1cm4gdGhpcy5hbGlnbm1lbnQuYWxpZ25tZW50LnBvc2l0aW9uLnJldmVyc2VTdHJhbmQgPyAnLScgOiAnKyc7XG4gIH1cblxuICBnZXRRdWFsaXR5U2NvcmVzKCk6IG51bWJlcltdIHtcbiAgICByZXR1cm4gdGhpcy5hbGlnbm1lbnQuYWxpZ25lZFF1YWxpdHk7XG4gIH1cblxuICBnZXRTZXF1ZW5jZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmFsaWdubWVudC5hbGlnbmVkU2VxdWVuY2U7XG4gIH1cblxuICBnZXRJbnRlcnZhbCgpOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+IHtcbiAgICByZXR1cm4gdGhpcy5faW50ZXJ2YWw7XG4gIH1cblxuICBpbnRlcnNlY3RzKGludGVydmFsOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGludGVydmFsLmludGVyc2VjdHModGhpcy5nZXRJbnRlcnZhbCgpKTtcbiAgfVxuXG4gIGdldFJlZmVyZW5jZUxlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiBTYW1SZWFkLnJlZmVyZW5jZUxlbmd0aEZyb21PcHModGhpcy5jaWdhck9wcyk7XG4gIH1cblxuICBnZXRNYXRlUHJvcGVydGllcygpOiA/TWF0ZVByb3BlcnRpZXMge1xuICAgIHZhciBuZXh0ID0gdGhpcy5hbGlnbm1lbnQubmV4dE1hdGVQb3NpdGlvbjtcbiAgICByZXR1cm4gbmV4dCAmJiB7XG4gICAgICByZWY6IG5leHQucmVmZXJlbmNlTmFtZSxcbiAgICAgIHBvczogbmV4dC5wb3NpdGlvbixcbiAgICAgIHN0cmFuZDogbmV4dC5yZXZlcnNlU3RyYW5kID8gJy0nIDogJysnXG4gICAgfTtcbiAgfVxuXG4gIGdldEluZmVycmVkSW5zZXJ0U2l6ZSgpOiBudW1iZXIge1xuICAgIC8vIFRPRE86IFNBTS9CQU0gd3JpdGVzIHRoaXMgZXhwbGljaXRseS4gRG9lcyBHQTRHSCByZWFsbHkgbm90P1xuICAgIHZhciBtID0gdGhpcy5nZXRNYXRlUHJvcGVydGllcygpO1xuICAgIGlmIChtICYmIG0ucmVmID09IHRoaXMucmVmKSB7XG4gICAgICB2YXIgc3RhcnQxID0gdGhpcy5faW50ZXJ2YWwuc3RhcnQoKSxcbiAgICAgICAgICBzdG9wMSA9IHRoaXMuX2ludGVydmFsLnN0b3AoKSxcbiAgICAgICAgICBzdGFydDIgPSBtLnBvcyxcbiAgICAgICAgICBzdG9wMiA9IHN0YXJ0MiArIHRoaXMuZ2V0U2VxdWVuY2UoKS5sZW5ndGg7XG4gICAgICByZXR1cm4gTWF0aC5tYXgoc3RvcDEsIHN0b3AyKSAtIE1hdGgubWluKHN0YXJ0MSwgc3RhcnQyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG5cbiAgLy8gVGhpcyBpcyBleHBvc2VkIGFzIGEgc3RhdGljIG1ldGhvZCB0byBmYWNpbGl0YXRlIGFuIG9wdGltaXphdGlvbiBpbiBHQTRHSERhdGFTb3VyY2UuXG4gIHN0YXRpYyBrZXlGcm9tR0E0R0hSZXNwb25zZShhbGlnbm1lbnQ6IE9iamVjdCk6IHN0cmluZyB7XG4gICAgLy8gdGhpcy5hbGlnbm1lbnQuaWQgd291bGQgYmUgYXBwZWFsaW5nIGhlcmUsIGJ1dCBpdCdzIG5vdCBhY3R1YWxseSB1bmlxdWUhXG4gICAgcmV0dXJuIGFsaWdubWVudC5mcmFnbWVudE5hbWUgKyAnOicgKyBhbGlnbm1lbnQucmVhZE51bWJlcjtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEdBNEdIQWxpZ25tZW50O1xuIiwiLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgYSBjbG9zZWQgbnVtZXJpYyBpbnRlcnZhbCwgW3N0YXJ0LCBzdG9wXS5cbiAqXG4gKiBAZmxvd1xuICovXG5cblwidXNlIHN0cmljdFwiO1xuXG5jbGFzcyBJbnRlcnZhbCB7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIHN0b3A6IG51bWJlcjtcblxuICAvLyBSZXByZXNlbnRzIFtzdGFydCwgc3RvcF0gLS0gYm90aCBlbmRzIGFyZSBpbmNsdXNpdmUuXG4gIC8vIElmIHN0b3AgPCBzdGFydCwgdGhlbiB0aGlzIGlzIGFuIGVtcHR5IGludGVydmFsLlxuICBjb25zdHJ1Y3RvcihzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpIHtcbiAgICB0aGlzLnN0YXJ0ID0gc3RhcnQ7XG4gICAgdGhpcy5zdG9wID0gc3RvcDtcbiAgfVxuXG4gIC8vIFRPRE86IG1ha2UgdGhpcyBhIGdldHRlciBtZXRob2QgJiBzd2l0Y2ggdG8gQmFiZWwuXG4gIGxlbmd0aCgpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLm1heCgwLCB0aGlzLnN0b3AgLSB0aGlzLnN0YXJ0ICsgMSk7XG4gIH1cblxuICBpbnRlcnNlY3Qob3RoZXI6IEludGVydmFsKTogSW50ZXJ2YWwge1xuICAgIHJldHVybiBuZXcgSW50ZXJ2YWwoTWF0aC5tYXgodGhpcy5zdGFydCwgb3RoZXIuc3RhcnQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5taW4odGhpcy5zdG9wLCBvdGhlci5zdG9wKSk7XG4gIH1cblxuICBpbnRlcnNlY3RzKG90aGVyOiBJbnRlcnZhbCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnN0YXJ0IDw9IG90aGVyLnN0b3AgJiYgb3RoZXIuc3RhcnQgPD0gdGhpcy5zdG9wO1xuICB9XG5cbiAgY29udGFpbnModmFsdWU6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiB2YWx1ZSA+PSB0aGlzLnN0YXJ0ICYmIHZhbHVlIDw9IHRoaXMuc3RvcDtcbiAgfVxuXG4gIGNvbnRhaW5zSW50ZXJ2YWwob3RoZXI6IEludGVydmFsKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbnMob3RoZXIuc3RhcnQpICYmIHRoaXMuY29udGFpbnMob3RoZXIuc3RvcCk7XG4gIH1cblxuICBjbG9uZSgpOiBJbnRlcnZhbCB7XG4gICAgcmV0dXJuIG5ldyBJbnRlcnZhbCh0aGlzLnN0YXJ0LCB0aGlzLnN0b3ApO1xuICB9XG5cbiAgLyoqXG4gICAqIElzIHRoaXMgSW50ZXJ2YWwgZW50aXJlbHkgY292ZXJlZCBieSB0aGUgdW5pb24gb2YgdGhlIHJhbmdlcz9cbiAgICogVGhlIHJhbmdlcyBwYXJhbWV0ZXIgbXVzdCBiZSBzb3J0ZWQgYnkgcmFuZ2Uuc3RhcnRcbiAgICovXG4gIGlzQ292ZXJlZEJ5KHJhbmdlczogSW50ZXJ2YWxbXSk6IGJvb2xlYW4ge1xuICAgIHZhciByZW1haW5pbmcgPSB0aGlzLmNsb25lKCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCByYW5nZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciByID0gcmFuZ2VzW2ldO1xuICAgICAgaWYgKGkgJiYgci5zdGFydCA8IHJhbmdlc1tpIC0gMV0uc3RhcnQpIHtcbiAgICAgICAgdGhyb3cgJ2lzQ292ZXJlZEJ5IG11c3QgYmUgY2FsbGVkIHdpdGggc29ydGVkIHJhbmdlcyc7XG4gICAgICB9XG4gICAgICBpZiAoci5zdGFydCA+IHJlbWFpbmluZy5zdGFydCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7ICAvLyBBIHBvc2l0aW9uIGhhcyBiZWVuIG1pc3NlZCBhbmQgdGhlcmUncyBubyBnb2luZyBiYWNrLlxuICAgICAgfVxuICAgICAgcmVtYWluaW5nLnN0YXJ0ID0gTWF0aC5tYXgocmVtYWluaW5nLnN0YXJ0LCByLnN0b3AgKyAxKTtcbiAgICAgIGlmIChyZW1haW5pbmcubGVuZ3RoKCkgPD0gMCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgdGhlIHN1YmludGVydmFscyB3aGljaCBhcmUgbm90IGluIGBvdGhlcmAuXG4gICAqIFRoaXMgY2FuIHlpZWxkIGVpdGhlciB6ZXJvLCBvbmUgb3IgdHdvIEludGVydmFscy5cbiAgICovXG4gIHN1YnRyYWN0KG90aGVyOiBJbnRlcnZhbCk6IEludGVydmFsW10ge1xuICAgIGlmICghdGhpcy5pbnRlcnNlY3RzKG90aGVyKSkge1xuICAgICAgcmV0dXJuIFt0aGlzXTsgIC8vIHVuYWZmZWN0ZWQgYnkgdGhpcyByYW5nZVxuICAgIH0gZWxzZSBpZiAodGhpcy5jb250YWluc0ludGVydmFsKG90aGVyKSkge1xuICAgICAgLy8gcmV0dXJuIHRoZSBiaXQgYmVmb3JlIGFuZCB0aGUgYml0IGFmdGVyXG4gICAgICByZXR1cm4gW25ldyBJbnRlcnZhbCh0aGlzLnN0YXJ0LCBvdGhlci5zdGFydCAtIDEpLFxuICAgICAgICAgICAgICBuZXcgSW50ZXJ2YWwob3RoZXIuc3RvcCArIDEsIHRoaXMuc3RvcCldLmZpbHRlcih4ID0+IHgubGVuZ3RoKCkgPiAwKTtcbiAgICB9IGVsc2UgaWYgKG90aGVyLmNvbnRhaW5zSW50ZXJ2YWwodGhpcykpIHtcbiAgICAgIHJldHVybiBbXTsgIC8vIGl0J3MgYmVlbiBjb21wbGV0ZWx5IG9ibGl0ZXJhdGVkXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGl0IG92ZXJsYXBzIG9uZSBlbmRcbiAgICAgIGlmIChvdGhlci5zdGFydCA8IHRoaXMuc3RhcnQpIHtcbiAgICAgICAgcmV0dXJuIFtuZXcgSW50ZXJ2YWwob3RoZXIuc3RvcCArIDEsIHRoaXMuc3RvcCldO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtuZXcgSW50ZXJ2YWwodGhpcy5zdGFydCwgb3RoZXIuc3RhcnQgLSAxKV07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZpbmQgdGhlIGRpc2pvaW50IHN1YmludGVydmFscyBub3QgY292ZXJlZCBieSBhbnkgaW50ZXJ2YWwgaW4gdGhlIGxpc3QuXG4gICAqXG4gICAqIElmIGNvbXAgPSBpbnRlcnZhbC5jb21wbGVtZW50SW50ZXJ2YWxzKHJhbmdlcyksIHRoZW4gdGhpcyBndWFyYW50ZWVzIHRoYXQ6XG4gICAqIC0gY29tcCB1bmlvbiByYW5nZXMgPSBpbnRlcnZhbFxuICAgKiAtIGEgaW50IGIgPSAwIGZvcmFsbCBhIFxcaW4gY29tcCwgYiBpbiByYW5nZXNcbiAgICpcbiAgICogKFRoZSBpbnB1dCByYW5nZXMgbmVlZCBub3QgYmUgZGlzam9pbnQuKVxuICAgKi9cbiAgY29tcGxlbWVudEludGVydmFscyhyYW5nZXM6IEludGVydmFsW10pOiBJbnRlcnZhbFtdIHtcbiAgICB2YXIgY29tcHMgPSBbdGhpc107XG4gICAgcmFuZ2VzLmZvckVhY2gocmFuZ2UgPT4ge1xuICAgICAgdmFyIG5ld0NvbXBzID0gW107XG4gICAgICBjb21wcy5mb3JFYWNoKGl2ID0+IHtcbiAgICAgICAgbmV3Q29tcHMgPSBuZXdDb21wcy5jb25jYXQoaXYuc3VidHJhY3QocmFuZ2UpKTtcbiAgICAgIH0pO1xuICAgICAgY29tcHMgPSBuZXdDb21wcztcbiAgICB9KTtcbiAgICByZXR1cm4gY29tcHM7XG4gIH1cblxuICBzdGF0aWMgaW50ZXJzZWN0QWxsKGludGVydmFsczogQXJyYXk8SW50ZXJ2YWw+KTogSW50ZXJ2YWwge1xuICAgIGlmICghaW50ZXJ2YWxzLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUcmllZCB0byBpbnRlcnNlY3QgemVybyBpbnRlcnZhbHMnKTtcbiAgICB9XG4gICAgdmFyIHJlc3VsdCA9IGludGVydmFsc1swXS5jbG9uZSgpO1xuICAgIGludGVydmFscy5zbGljZSgxKS5mb3JFYWNoKGZ1bmN0aW9uKHtzdGFydCwgc3RvcH0pIHtcbiAgICAgIHJlc3VsdC5zdGFydCA9IE1hdGgubWF4KHN0YXJ0LCByZXN1bHQuc3RhcnQpO1xuICAgICAgcmVzdWx0LnN0b3AgPSBNYXRoLm1pbihzdG9wLCByZXN1bHQuc3RvcCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8vIFJldHVybnMgYW4gaW50ZXJ2YWwgd2hpY2ggY29udGFpbnMgYWxsIHRoZSBnaXZlbiBpbnRlcnZhbHMuXG4gIHN0YXRpYyBib3VuZGluZ0ludGVydmFsKGludGVydmFsczogQXJyYXk8SW50ZXJ2YWw+KTogSW50ZXJ2YWwge1xuICAgIGlmICghaW50ZXJ2YWxzLmxlbmd0aCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdUcmllZCB0byBib3VuZCB6ZXJvIGludGVydmFscycpO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gaW50ZXJ2YWxzWzBdLmNsb25lKCk7XG4gICAgaW50ZXJ2YWxzLnNsaWNlKDEpLmZvckVhY2goZnVuY3Rpb24oe3N0YXJ0LCBzdG9wfSkge1xuICAgICAgcmVzdWx0LnN0YXJ0ID0gTWF0aC5taW4oc3RhcnQsIHJlc3VsdC5zdGFydCk7XG4gICAgICByZXN1bHQuc3RvcCA9IE1hdGgubWF4KHN0b3AsIHJlc3VsdC5zdG9wKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFske3RoaXMuc3RhcnR9LCAke3RoaXMuc3RvcH1dYDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEludGVydmFsO1xuIiwiLyoqXG4gKiBMb2NhbFN0cmluZ0ZpbGUgaXMgYSByZXByZXNlbnRhdGlvbiBvZiBhIGZpbGUgdGhhdCB3YXMgY3JlYXRlZCBmcm9tIGlucHV0IHN0cmluZy4gVXNlZCBmb3IgdGVzdGluZyBhbmQgc21hbGwgaW5wdXQgZmlsZXMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBRIGZyb20gJ3EnO1xuaW1wb3J0IEFic3RyYWN0RmlsZSBmcm9tICcuL0Fic3RyYWN0RmlsZSc7XG5cbmNsYXNzIExvY2FsU3RyaW5nRmlsZSBleHRlbmRzIEFic3RyYWN0RmlsZSB7XG4gIGZpbGVMZW5ndGg6IG51bWJlcjtcbiAgY29udGVudDogc3RyaW5nOyAgLy9jb250ZW50IG9mIHRoaXMgXCJGaWxlXCJcbiAgYnVmZmVyOiBBcnJheUJ1ZmZlcjtcblxuICBjb25zdHJ1Y3Rvcihjb250ZW50OiBzdHJpbmcpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuZmlsZUxlbmd0aCA9IGNvbnRlbnQubGVuZ3RoOyAgXG4gICAgdGhpcy5idWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIoY29udGVudC5sZW5ndGgpOyAvLyAyIGJ5dGVzIGZvciBlYWNoIGNoYXJcbiAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuXG4gICAgdmFyIGJ1ZlZpZXcgPSBuZXcgVWludDhBcnJheSh0aGlzLmJ1ZmZlcik7XG4gICAgZm9yICh2YXIgaT0wOyBpIDwgdGhpcy5maWxlTGVuZ3RoOyBpKyspIHtcbiAgICAgIGJ1ZlZpZXdbaV0gPSBjb250ZW50LmNoYXJDb2RlQXQoaSk7XG4gICAgfVxuICB9XG5cbiAgZ2V0Qnl0ZXMoc3RhcnQ6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIpOiBRLlByb21pc2U8QXJyYXlCdWZmZXI+IHtcbiAgICBpZiAobGVuZ3RoIDwgMCkge1xuICAgICAgcmV0dXJuIFEucmVqZWN0KGBSZXF1ZXN0ZWQgPDAgYnl0ZXMgKCR7bGVuZ3RofSlgKTtcbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgcmVtb3RlIGZpbGUgbGVuZ3RoIGlzIGtub3duLCBjbGFtcCB0aGUgcmVxdWVzdCB0byBmaXQgd2l0aGluIGl0LlxuICAgIHZhciBzdG9wID0gc3RhcnQgKyBsZW5ndGggLSAxO1xuICAgIGlmICh0aGlzLmZpbGVMZW5ndGggIT0gLTEpIHtcbiAgICAgIHN0b3AgPSBNYXRoLm1pbih0aGlzLmZpbGVMZW5ndGggLSAxLCBzdG9wKTtcbiAgICB9XG5cbiAgICAvLyBGaXJzdCBjaGVjayB0aGUgY2FjaGUuXG4gICAgdmFyIGJ1ZiA9IHRoaXMuZ2V0RnJvbUNhY2hlKHN0YXJ0LCBzdG9wKTtcbiAgICByZXR1cm4gUS53aGVuKGJ1Zik7XG4gIH1cblxuICAvLyBSZWFkIHRoZSBlbnRpcmUgZmlsZSAtLSBub3QgcmVjb21tZW5kZWQgZm9yIGxhcmdlIGZpbGVzIVxuICBnZXRBbGwoKTogUS5Qcm9taXNlPEFycmF5QnVmZmVyPiB7XG4gICB2YXIgYnVmID0gdGhpcy5nZXRGcm9tQ2FjaGUoMCwgdGhpcy5maWxlTGVuZ3RoIC0gMSk7XG4gICByZXR1cm4gUS53aGVuKGJ1Zik7XG4gIH1cblxuICAvLyBSZWFkcyB0aGUgZW50aXJlIGZpbGUgYXMgYSBzdHJpbmcgKG5vdCBhbiBBcnJheUJ1ZmZlcikuXG4gIC8vIFRoaXMgZG9lcyBub3QgdXNlIHRoZSBjYWNoZS5cbiAgZ2V0QWxsU3RyaW5nKCk6IFEuUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gUS53aGVuKHRoaXMuY29udGVudCk7XG4gIH1cblxuICAvLyBSZXR1cm5zIGEgcHJvbWlzZSBmb3IgdGhlIG51bWJlciBvZiBieXRlcyBpbiB0aGUgcmVtb3RlIGZpbGUuXG4gIGdldFNpemUoKTogUS5Qcm9taXNlPG51bWJlcj4ge1xuICAgIHJldHVybiBRLndoZW4odGhpcy5maWxlTGVuZ3RoKTtcbiAgfVxuXG4gIGdldEZyb21DYWNoZShzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpOiA/QXJyYXlCdWZmZXIge1xuICAgIHJldHVybiB0aGlzLmJ1ZmZlci5zbGljZShzdGFydCwgc3RvcCArIDEpO1xuICB9XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBMb2NhbFN0cmluZ0ZpbGU7XG4iLCIvKipcbiAqIEEgZ2VuZXJpYyBtZW51LCBpbnRlbmRlZCB0byBiZSB1c2VkIGZvciBib3RoIHRvZ2dsaW5nIG9wdGlvbnMgYW5kIGludm9raW5nIGNvbW1hbmRzLlxuICpcbiAqIFVzYWdlOlxuICpcbiAqIHZhciBpdGVtcyA9IFtcbiAqICAge2tleTogJ2EnLCBsYWJlbDogJ0l0ZW0gQScsIGNoZWNrZWQ6IHRydWV9LFxuICogICB7a2V5OiAnYicsIGxhYmVsOiAnSXRlbSBCJ30sXG4gKiAgICctJyxcbiAqICAge2tleTogJ3JhbmRvbScsIGxhYmVsOiAnUGljayBSYW5kb20nfVxuICogXTtcbiAqIDxNZW51IGhlYWRlcj1cIkhlYWRlclwiIGl0ZW1zPXtpdGVtc30gb25TZWxlY3Q9e3NlbGVjdEhhbmRsZXJ9IC8+XG4gKlxuICogQGZsb3dcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbnR5cGUgTWVudUl0ZW0gPSB7XG4gIGtleTogc3RyaW5nO1xuICBsYWJlbDogc3RyaW5nO1xuICBjaGVja2VkPzogYm9vbGVhbjtcbn07XG5cbnR5cGUgUHJvcHMgPSB7XG4gIGhlYWRlcjogc3RyaW5nO1xuICBpdGVtczogQXJyYXk8TWVudUl0ZW18Jy0nPjtcbiAgb25TZWxlY3Q6IChrZXk6IHN0cmluZykgPT4gdm9pZDtcbn07XG5cbmNsYXNzIE1lbnUgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8dm9pZCwgUHJvcHMsIHZvaWQ+IHtcbiAgcHJvcHM6IFByb3BzO1xuXG4gIGNsaWNrSGFuZGxlcihpZHg6IG51bWJlciwgZTogU3ludGhldGljTW91c2VFdmVudCkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB2YXIgaXRlbSA9IHRoaXMucHJvcHMuaXRlbXNbaWR4XTtcbiAgICBpZiAodHlwZW9mKGl0ZW0pID09ICdzdHJpbmcnKSByZXR1cm47ICAvLyBmb3IgZmxvd1xuICAgIHRoaXMucHJvcHMub25TZWxlY3QoaXRlbS5rZXkpO1xuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgdmFyIG1ha2VIYW5kbGVyID0gaSA9PiB0aGlzLmNsaWNrSGFuZGxlci5iaW5kKHRoaXMsIGkpO1xuICAgIHZhciBlbHMgPSBbXTtcbiAgICBpZiAodGhpcy5wcm9wcy5oZWFkZXIpIHtcbiAgICAgIGVscy5wdXNoKDxkaXYga2V5PSdoZWFkZXInIGNsYXNzTmFtZT0nbWVudS1oZWFkZXInPnt0aGlzLnByb3BzLmhlYWRlcn08L2Rpdj4pO1xuICAgIH1cbiAgICBlbHMgPSBlbHMuY29uY2F0KHRoaXMucHJvcHMuaXRlbXMubWFwKChpdGVtLCBpKSA9PiB7XG4gICAgICBpZiAodHlwZW9mKGl0ZW0pID09PSAnc3RyaW5nJykgeyAgLy8gd291bGQgcHJlZmVyIFwiPT0gJy0nXCIsIHNlZSBmbG93IzEwNjZcbiAgICAgICAgcmV0dXJuIDxkaXYga2V5PXtpfSBjbGFzc05hbWU9J21lbnUtc2VwYXJhdG9yJyAvPjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBjaGVja0NsYXNzID0gJ2NoZWNrJyArIChpdGVtLmNoZWNrZWQgPyAnIGNoZWNrZWQnIDogJycpO1xuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgIDxkaXYga2V5PXtpfSBjbGFzc05hbWU9J21lbnUtaXRlbScgb25DbGljaz17bWFrZUhhbmRsZXIoaSl9PlxuICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPXtjaGVja0NsYXNzfT48L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzc05hbWU9J21lbnUtaXRlbS1sYWJlbCc+e2l0ZW0ubGFiZWx9PC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pKTtcblxuICAgIHJldHVybiAoXG4gICAgICA8ZGl2IGNsYXNzTmFtZT0nbWVudSc+XG4gICAgICAgIHtlbHN9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTWVudTtcbiIsIi8qKlxuICogUmVtb3RlRmlsZSBpcyBhIHJlcHJlc2VudGF0aW9uIG9mIGEgZmlsZSBvbiBhIHJlbW90ZSBzZXJ2ZXIgd2hpY2ggY2FuIGJlXG4gKiBmZXRjaGVkIGluIGNodW5rcywgZS5nLiB1c2luZyBhIFJhbmdlIHJlcXVlc3QuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBRIGZyb20gJ3EnO1xuaW1wb3J0IEFic3RyYWN0RmlsZSBmcm9tICcuL0Fic3RyYWN0RmlsZSc7XG5cbnR5cGUgQ2h1bmsgPSB7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIHN0b3A6IG51bWJlcjtcbiAgYnVmZmVyOiBBcnJheUJ1ZmZlcjtcbiAgLy8gVE9ETyhkYW52ayk6IHByaW9yaXR5OiBudW1iZXI7XG59XG5cblxuY2xhc3MgUmVtb3RlRmlsZSBleHRlbmRzIEFic3RyYWN0RmlsZXtcbiAgdXJsOiBzdHJpbmc7XG4gIGZpbGVMZW5ndGg6IG51bWJlcjtcbiAgY2h1bmtzOiBBcnJheTxDaHVuaz47ICAvLyByZWdpb25zIG9mIGZpbGUgdGhhdCBoYXZlIGFscmVhZHkgYmVlbiBsb2FkZWQuXG4gIG51bU5ldHdvcmtSZXF1ZXN0czogbnVtYmVyOyAgLy8gdHJhY2sgdGhpcyBmb3IgZGVidWdnaW5nL3Rlc3RpbmdcblxuICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZykge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy51cmwgPSB1cmw7XG4gICAgdGhpcy5maWxlTGVuZ3RoID0gLTE7ICAvLyB1bmtub3duXG4gICAgdGhpcy5jaHVua3MgPSBbXTtcbiAgICB0aGlzLm51bU5ldHdvcmtSZXF1ZXN0cyA9IDA7XG4gIH1cblxuICBnZXRCeXRlcyhzdGFydDogbnVtYmVyLCBsZW5ndGg6IG51bWJlcik6IFEuUHJvbWlzZTxBcnJheUJ1ZmZlcj4ge1xuICAgIGlmIChsZW5ndGggPCAwKSB7XG4gICAgICByZXR1cm4gUS5yZWplY3QoYFJlcXVlc3RlZCA8MCBieXRlcyAoJHtsZW5ndGh9KSBmcm9tICR7dGhpcy51cmx9YCk7XG4gICAgfVxuXG4gICAgLy8gSWYgdGhlIHJlbW90ZSBmaWxlIGxlbmd0aCBpcyBrbm93biwgY2xhbXAgdGhlIHJlcXVlc3QgdG8gZml0IHdpdGhpbiBpdC5cbiAgICB2YXIgc3RvcCA9IHN0YXJ0ICsgbGVuZ3RoIC0gMTtcbiAgICBpZiAodGhpcy5maWxlTGVuZ3RoICE9IC0xKSB7XG4gICAgICBzdG9wID0gTWF0aC5taW4odGhpcy5maWxlTGVuZ3RoIC0gMSwgc3RvcCk7XG4gICAgfVxuXG4gICAgLy8gRmlyc3QgY2hlY2sgdGhlIGNhY2hlLlxuICAgIHZhciBidWYgPSB0aGlzLmdldEZyb21DYWNoZShzdGFydCwgc3RvcCk7XG4gICAgaWYgKGJ1Zikge1xuICAgICAgcmV0dXJuIFEud2hlbihidWYpO1xuICAgIH1cblxuICAgIC8vIFRPRE86IGhhbmRsZSBwYXJ0aWFsIG92ZXJsYXAgb2YgcmVxdWVzdCB3LyBjYWNoZS5cblxuICAgIC8vIE5lZWQgdG8gZmV0Y2ggZnJvbSB0aGUgbmV0d29yay5cbiAgICByZXR1cm4gdGhpcy5nZXRGcm9tTmV0d29yayhzdGFydCwgc3RvcCk7XG4gIH1cblxuICAvLyBSZWFkIHRoZSBlbnRpcmUgZmlsZSAtLSBub3QgcmVjb21tZW5kZWQgZm9yIGxhcmdlIGZpbGVzIVxuICBnZXRBbGwoKTogUS5Qcm9taXNlPEFycmF5QnVmZmVyPiB7XG4gICAgLy8gQ2hlY2sgY2FjaGUgaWYgZmlsZSBsZW5ndGggaXMgYXZhaWxhYmxlLlxuICAgIGlmICh0aGlzLmZpbGVMZW5ndGggIT0gLTEpIHtcbiAgICAgIHZhciBidWYgPSB0aGlzLmdldEZyb21DYWNoZSgwLCB0aGlzLmZpbGVMZW5ndGggLSAxKTtcbiAgICAgIGlmIChidWYpIHtcbiAgICAgICAgcmV0dXJuIFEud2hlbihidWYpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignR0VUJywgdGhpcy51cmwpO1xuICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuICAgIHJldHVybiB0aGlzLnByb21pc2VYSFIoeGhyKS50aGVuKChbYnVmZmVyXSkgPT4ge1xuICAgICAgdGhpcy5maWxlTGVuZ3RoID0gYnVmZmVyLmJ5dGVMZW5ndGg7XG4gICAgICB0aGlzLmNodW5rcyA9IFt7c3RhcnQ6IDAsIHN0b3A6IHRoaXMuZmlsZUxlbmd0aCAtIDEsIGJ1ZmZlcn1dO1xuICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFJlYWRzIHRoZSBlbnRpcmUgZmlsZSBhcyBhIHN0cmluZyAobm90IGFuIEFycmF5QnVmZmVyKS5cbiAgLy8gVGhpcyBkb2VzIG5vdCB1c2UgdGhlIGNhY2hlLlxuICBnZXRBbGxTdHJpbmcoKTogUS5Qcm9taXNlPHN0cmluZz4ge1xuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignR0VUJywgdGhpcy51cmwpO1xuICAgIHJldHVybiB0aGlzLnByb21pc2VYSFIoeGhyKS50aGVuKChbc3RyaW5nXSkgPT4ge1xuICAgICAgcmV0dXJuIHN0cmluZztcbiAgICB9KTtcbiAgfVxuXG4gIC8vIFJldHVybnMgYSBwcm9taXNlIGZvciB0aGUgbnVtYmVyIG9mIGJ5dGVzIGluIHRoZSByZW1vdGUgZmlsZS5cbiAgZ2V0U2l6ZSgpOiBRLlByb21pc2U8bnVtYmVyPiB7XG4gICAgaWYgKHRoaXMuZmlsZUxlbmd0aCAhPSAtMSkge1xuICAgICAgcmV0dXJuIFEud2hlbih0aGlzLmZpbGVMZW5ndGgpO1xuICAgIH1cblxuICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICB4aHIub3BlbignSEVBRCcsIHRoaXMudXJsKTtcblxuICAgIHJldHVybiB0aGlzLnByb21pc2VYSFIoeGhyKS50aGVuKCgpID0+IHtcbiAgICAgIC8vIGV2ZW50LnRvdGFsIHdvdWxkIGJlIGJldHRlciwgc2VlIGZhY2Vib29rL2Zsb3cjMzU3XG4gICAgICB2YXIgbGVuID0geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdDb250ZW50LUxlbmd0aCcpO1xuICAgICAgaWYgKGxlbiAhPT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gTnVtYmVyKGxlbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyAnUmVtb3RlIHJlc291cmNlIGhhcyB1bmtub3duIGxlbmd0aCc7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBnZXRGcm9tQ2FjaGUoc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKTogP0FycmF5QnVmZmVyIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2h1bmtzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgY2h1bmsgPSB0aGlzLmNodW5rc1tpXTtcbiAgICAgIGlmIChjaHVuay5zdGFydCA8PSBzdGFydCAmJiBjaHVuay5zdG9wID49IHN0b3ApIHtcbiAgICAgICAgcmV0dXJuIGNodW5rLmJ1ZmZlci5zbGljZShzdGFydCAtIGNodW5rLnN0YXJ0LCBzdG9wIC0gY2h1bmsuc3RhcnQgKyAxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBnZXRGcm9tTmV0d29yayhzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpOiBRLlByb21pc2U8QXJyYXlCdWZmZXI+IHtcbiAgICB2YXIgbGVuZ3RoID0gc3RvcCAtIHN0YXJ0ICsgMTtcbiAgICBpZiAobGVuZ3RoID4gNTAwMDAwMDApIHtcbiAgICAgIHRocm93IGBNb25zdGVyIHJlcXVlc3Q6IFdvbid0IGZldGNoICR7bGVuZ3RofSBieXRlcyBmcm9tICR7dGhpcy51cmx9YDtcbiAgICB9XG5cbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ0dFVCcsIHRoaXMudXJsKTtcbiAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2FycmF5YnVmZmVyJztcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignUmFuZ2UnLCBgYnl0ZXM9JHtzdGFydH0tJHtzdG9wfWApO1xuXG4gICAgcmV0dXJuIHRoaXMucHJvbWlzZVhIUih4aHIpLnRoZW4oKFtidWZmZXJdKSA9PiB7XG4gICAgICAvLyBUaGUgYWN0dWFsIGxlbmd0aCBvZiB0aGUgcmVzcG9uc2UgbWF5IGJlIGxlc3MgdGhhbiByZXF1ZXN0ZWQgaWYgaXQnc1xuICAgICAgLy8gdG9vIHNob3J0LCBlLmcuIGlmIHdlIHJlcXVlc3QgYnl0ZXMgMC0xMDAwIG9mIGEgNTAwLWJ5dGUgZmlsZS5cbiAgICAgIHZhciBuZXdDaHVuayA9IHsgc3RhcnQsIHN0b3A6IHN0YXJ0ICsgYnVmZmVyLmJ5dGVMZW5ndGggLSAxLCBidWZmZXIgfTtcbiAgICAgIHRoaXMuY2h1bmtzLnB1c2gobmV3Q2h1bmspO1xuXG4gICAgICAvLyBSZWNvcmQgdGhlIGZ1bGwgZmlsZSBsZW5ndGggaWYgaXQncyBhdmFpbGFibGUuXG4gICAgICB2YXIgc2l6ZSA9IHRoaXMuX2dldExlbmd0aEZyb21Db250ZW50UmFuZ2UoeGhyKTtcbiAgICAgIGlmIChzaXplICE9PSBudWxsICYmIHNpemUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBpZiAodGhpcy5maWxlTGVuZ3RoICE9IC0xICYmIHRoaXMuZmlsZUxlbmd0aCAhPSBzaXplKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGBTaXplIG9mIHJlbW90ZSBmaWxlICR7dGhpcy51cmx9IGNoYW5nZWQgZnJvbSBgICtcbiAgICAgICAgICAgICAgICAgICAgICAgYCR7dGhpcy5maWxlTGVuZ3RofSB0byAke3NpemV9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5maWxlTGVuZ3RoID0gc2l6ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gYnVmZmVyO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gV3JhcHBlciB0byBjb252ZXJ0IFhIUnMgdG8gUHJvbWlzZXMuXG4gIC8vIFRoZSBwcm9taXNlZCB2YWx1ZXMgYXJlIHRoZSByZXNwb25zZSAoZS5nLiBhbiBBcnJheUJ1ZmZlcikgYW5kIHRoZSBFdmVudC5cbiAgcHJvbWlzZVhIUih4aHI6IFhNTEh0dHBSZXF1ZXN0KTogUS5Qcm9taXNlPFthbnksIEV2ZW50XT4ge1xuICAgIHZhciB1cmwgPSB0aGlzLnVybDtcbiAgICB2YXIgZGVmZXJyZWQgPSBRLmRlZmVyKCk7XG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbihlKSB7XG4gICAgICBpZiAodGhpcy5zdGF0dXMgPj0gNDAwKSB7XG4gICAgICAgIGRlZmVycmVkLnJlamVjdChgUmVxdWVzdCBmb3IgJHt1cmx9IGZhaWxlZCB3aXRoIHN0YXR1czogJHt0aGlzLnN0YXR1c30gJHt0aGlzLnN0YXR1c1RleHR9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKFt0aGlzLnJlc3BvbnNlLCBlXSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2Vycm9yJywgZnVuY3Rpb24oZSkge1xuICAgICAgZGVmZXJyZWQucmVqZWN0KGBSZXF1ZXN0IGZvciAke3VybH0gZmFpbGVkIHdpdGggc3RhdHVzOiAke3RoaXMuc3RhdHVzfSAke3RoaXMuc3RhdHVzVGV4dH1gKTtcbiAgICB9KTtcbiAgICB0aGlzLm51bU5ldHdvcmtSZXF1ZXN0cysrO1xuICAgIHhoci5zZW5kKCk7XG4gICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG4gIH1cblxuICAvLyBBdHRlbXB0aW5nIHRvIGFjY2VzcyBDb250ZW50LVJhbmdlIGRpcmVjdGx5IG1heSByYWlzZSBzZWN1cml0eSBlcnJvcnMuXG4gIC8vIFRoaXMgZW5zdXJlcyB0aGUgYWNjZXNzIGlzIHNhZmUgYmVmb3JlIG1ha2luZyBpdC5cbiAgX2dldExlbmd0aEZyb21Db250ZW50UmFuZ2UoeGhyOiBYTUxIdHRwUmVxdWVzdCk6ID9udW1iZXIge1xuICAgIGlmICghL0NvbnRlbnQtUmFuZ2UvaS5leGVjKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBjb250ZW50UmFuZ2UgPSB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ0NvbnRlbnQtUmFuZ2UnKTtcbiAgICB2YXIgbSA9IC9cXC8oXFxkKykkLy5leGVjKGNvbnRlbnRSYW5nZSk7XG4gICAgaWYgKG0pIHtcbiAgICAgIHJldHVybiBOdW1iZXIobVsxXSk7XG4gICAgfVxuICAgIGNvbnNvbGUud2FybihgUmVjZWl2ZWQgaW1wcm9wZXIgQ29udGVudC1SYW5nZSB2YWx1ZSBmb3IgYCArXG4gICAgICAgICAgICAgICAgIGAke3RoaXMudXJsfTogJHtjb250ZW50UmFuZ2V9YCk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjbGVhckNhY2hlKCkge1xuICAgIHRoaXMuY2h1bmtzID0gW107XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBSZW1vdGVGaWxlO1xuIiwiLyoqXG4gKiBSZW1vdGVSZXF1ZXN0IGlzIGEgZ2VuZXJpYyBlbmRwb2ludCBmb3Igc2VydmluZyBodHRwIHJlcXVlc3RzLiBSZW1vdGVSZXF1ZXN0XG4gKiBoYW5kbGVzIGpzb24gZGF0YSwgd2hpY2ggaXMgc3BlY2lmaWVkIGJ5IGdlbm9taWMgcmFuZ2UgKGNvbnRpZywgc3RhcnQsIHN0b3ApXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgUSBmcm9tICdxJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuL0NvbnRpZ0ludGVydmFsJztcblxudmFyIEJBU0VfUEFJUlNfUEVSX0ZFVENIID0gMTAwMDtcbnZhciBNT05TVEVSX1JFUVVFU1QgPSA1MDAwMDAwO1xuXG5jbGFzcyBSZW1vdGVSZXF1ZXN0IHtcbiAgdXJsOiBzdHJpbmc7XG4gIGJhc2VQYWlyc1BlckZldGNoOiBudW1iZXI7XG4gIG51bU5ldHdvcmtSZXF1ZXN0czogbnVtYmVyOyAgLy8gdHJhY2sgdGhpcyBmb3IgZGVidWdnaW5nL3Rlc3RpbmdcblxuICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZywgYmFzZVBhaXJzUGVyRmV0Y2g/OiBudW1iZXIpIHtcbiAgICB0aGlzLnVybCA9IHVybDtcbiAgICBpZiAoIWJhc2VQYWlyc1BlckZldGNoKVxuICAgICAgdGhpcy5iYXNlUGFpcnNQZXJGZXRjaCA9IEJBU0VfUEFJUlNfUEVSX0ZFVENIO1xuICAgIGVsc2VcbiAgICAgIHRoaXMuYmFzZVBhaXJzUGVyRmV0Y2ggPSBiYXNlUGFpcnNQZXJGZXRjaDtcbiAgICB0aGlzLm51bU5ldHdvcmtSZXF1ZXN0cyA9IDA7XG4gIH1cblxuICBleHBhbmRSYW5nZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IENvbnRpZ0ludGVydmFsPHN0cmluZz4ge1xuICAgIHZhciByb3VuZERvd24gPSB4ID0+IHggLSB4ICUgdGhpcy5iYXNlUGFpcnNQZXJGZXRjaDtcbiAgICB2YXIgbmV3U3RhcnQgPSBNYXRoLm1heCgxLCByb3VuZERvd24ocmFuZ2Uuc3RhcnQoKSkpLFxuICAgICAgICBuZXdTdG9wID0gcm91bmREb3duKHJhbmdlLnN0b3AoKSArIHRoaXMuYmFzZVBhaXJzUGVyRmV0Y2ggLSAxKTtcblxuICAgIHJldHVybiBuZXcgQ29udGlnSW50ZXJ2YWwocmFuZ2UuY29udGlnLCBuZXdTdGFydCwgbmV3U3RvcCk7XG4gIH1cblxuICBnZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sIG1vZGlmaWVyOiBzdHJpbmcgPSBcIlwiKTogUS5Qcm9taXNlPE9iamVjdD4ge1xuICAgIHZhciBleHBhbmRlZFJhbmdlID0gdGhpcy5leHBhbmRSYW5nZShyYW5nZSk7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KGV4cGFuZGVkUmFuZ2UsIG1vZGlmaWVyKTtcbiAgfVxuXG4gIGdldChyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiwgbW9kaWZpZXI6IHN0cmluZyA9IFwiXCIpOiBRLlByb21pc2U8T2JqZWN0PiB7XG5cbiAgICB2YXIgbGVuZ3RoID0gcmFuZ2Uuc3RvcCgpIC0gcmFuZ2Uuc3RhcnQoKTtcbiAgICBpZiAobGVuZ3RoIDw9IDApIHtcbiAgICAgIHJldHVybiBRLnJlamVjdChgUmVxdWVzdGVkIDwwIGludGVydmFsICgke2xlbmd0aH0pIGZyb20gJHt0aGlzLnVybH1gKTtcbiAgICB9IGVsc2UgaWYgKGxlbmd0aCA+IE1PTlNURVJfUkVRVUVTVCkge1xuICAgICAgdGhyb3cgYE1vbnN0ZXIgcmVxdWVzdDogV29uJ3QgZmV0Y2ggJHtsZW5ndGh9IHNpemVkIHJhbmdlcyBmcm9tICR7dGhpcy51cmx9YDtcbiAgICB9XG4gICAgLy8gZ2V0IGVuZHBvaW50XG4gICAgdmFyIGVuZHBvaW50ID0gdGhpcy5nZXRFbmRwb2ludEZyb21Db250aWcocmFuZ2UuY29udGlnLCByYW5nZS5zdGFydCgpLCByYW5nZS5zdG9wKCksIG1vZGlmaWVyKTtcbiAgICAvLyBGZXRjaCBmcm9tIHRoZSBuZXR3b3JrXG4gICAgcmV0dXJuIHRoaXMuZ2V0RnJvbU5ldHdvcmsoZW5kcG9pbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3QgbXVzdCBiZSBvZiBmb3JtIFwidXJsL2NvbnRpZz9zdGFydD1zdGFydCZlbmQ9c3RvcFwiXG4gICovXG4gIGdldEZyb21OZXR3b3JrKGVuZHBvaW50OiBzdHJpbmcpOiBRLlByb21pc2U8T2JqZWN0PiB7XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIHhoci5vcGVuKCdHRVQnLCBlbmRwb2ludCk7XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcbiAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcignQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcblxuICAgIHJldHVybiB0aGlzLnByb21pc2VYSFIoeGhyKS50aGVuKGUgPT4ge1xuICAgICAgLy8gc2VuZCBiYWNrIHJlc3BvbnNlIGFuZCBzdGF0dXNcbiAgICAgIHJldHVybiBlWzBdO1xuICAgIH0pO1xuICB9XG5cbiAgZ2V0RW5kcG9pbnRGcm9tQ29udGlnKGNvbnRpZzogc3RyaW5nLCBzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIsIG1vZGlmaWVyOiBzdHJpbmcgPSBcIlwiKTogc3RyaW5nIHtcbiAgICBpZiAobW9kaWZpZXIubGVuZ3RoIDwgMSlcbiAgICAgIHJldHVybiBgJHt0aGlzLnVybH0vJHtjb250aWd9P3N0YXJ0PSR7c3RhcnR9JmVuZD0ke3N0b3B9YDtcbiAgICBlbHNlXG4gICAgICByZXR1cm4gYCR7dGhpcy51cmx9LyR7Y29udGlnfT9zdGFydD0ke3N0YXJ0fSZlbmQ9JHtzdG9wfSYke21vZGlmaWVyfWA7XG4gIH1cblxuICAvLyBXcmFwcGVyIHRvIGNvbnZlcnQgWEhScyB0byBQcm9taXNlcy5cbiAgLy8gVGhlIHByb21pc2VkIHZhbHVlcyBhcmUgdGhlIHJlc3BvbnNlIChlLmcuIGFuIEFycmF5QnVmZmVyKSBhbmQgdGhlIEV2ZW50LlxuICBwcm9taXNlWEhSKHhocjogWE1MSHR0cFJlcXVlc3QpOiBRLlByb21pc2U8W2FueV0+IHtcbiAgICB2YXIgdXJsID0gdGhpcy51cmw7XG4gICAgdmFyIGRlZmVycmVkID0gUS5kZWZlcigpO1xuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24oZSkge1xuICAgICAgaWYgKHRoaXMuc3RhdHVzID49IDQwMCkge1xuICAgICAgICBkZWZlcnJlZC5yZWplY3QoYFJlcXVlc3QgZm9yICR7dXJsfSBmYWlsZWQgd2l0aCBzdGF0dXM6ICR7dGhpcy5zdGF0dXN9ICR7dGhpcy5zdGF0dXNUZXh0fWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShbdGhpc10pO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIGRlZmVycmVkLnJlamVjdChgUmVxdWVzdCBmb3IgJHt1cmx9IGZhaWxlZCB3aXRoIHN0YXR1czogJHt0aGlzLnN0YXR1c30gJHt0aGlzLnN0YXR1c1RleHR9YCk7XG4gICAgfSk7XG4gICAgdGhpcy5udW1OZXR3b3JrUmVxdWVzdHMrKztcbiAgICB4aHIuc2VuZCgpO1xuICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBSZW1vdGVSZXF1ZXN0LFxuICBNT05TVEVSX1JFUVVFU1Q6IE1PTlNURVJfUkVRVUVTVFxufTtcblxuLy9tb2R1bGUuZXhwb3J0cyA9IFJlbW90ZVJlcXVlc3Q7XG4iLCIvKipcbiAqIENhY2hlIGZvciBhbnkgRGF0YSBTb3VyY2VzIHRoYXQgcmVseSBvbiByZXNvbHV0aW9uLiBGb3IgZXhhbXBsZSxcbiAqIHRoaXMgaXMgdXNlZCBieSBjb3ZlcmFnZSB0byBrZWVwIHRyYWNrIG9mIHRoZSBkaWZmZXJlbmNlIHJlc29sdXRpb25zXG4gKiB0aGF0IGhhdmUgYmVlbiBmZXRjaGVkIGFscmVhZHkuXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG4vKiBleHBvcnRlZCBJbnRlcnZhbCwgQ29udGlnSW50ZXJ2YWwgKi9cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IEludGVydmFsIGZyb20gJy4vSW50ZXJ2YWwnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4vQ29udGlnSW50ZXJ2YWwnO1xuXG5cbmNsYXNzIFJlc29sdXRpb25DYWNoZTxUOiBPYmplY3Q+IHtcbiAgY292ZXJlZFJhbmdlczogUmVzb2x1dGlvbkNhY2hlS2V5W107XG4gIGNhY2hlOiB7W3Jlc29sdXRpb246IG51bWJlcl06IHtba2V5OiBzdHJpbmddOiBUfX07XG4gIC8vIHVzZWQgdG8gZmlsdGVyIG91dCBlbGVtZW50cyBpbiB0aGUgY2FjaGUgYmFzZWQgb24gcmVzb2x1dGlvbi5cbiAgZmlsdGVyRnVuY3Rpb246IEZ1bmN0aW9uOyAvLyBzaG91bGQgdGFrZSBmb3JtIChyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiwgVCkgPT4gYm9vbGVhbjtcbiAga2V5RnVuY3Rpb246IEZ1bmN0aW9uOyAgICAvLyBzaG91bGQgdGFrZSBmb3JtIChkOiBUKSA9PiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoZmlsdGVyRnVuY3Rpb246IEZ1bmN0aW9uLCBrZXlGdW5jdGlvbjogRnVuY3Rpb24pIHtcbiAgICB0aGlzLmNvdmVyZWRSYW5nZXMgPSBbXTtcbiAgICB0aGlzLmNhY2hlID0ge307XG4gICAgdGhpcy5maWx0ZXJGdW5jdGlvbiA9IGZpbHRlckZ1bmN0aW9uO1xuICAgIHRoaXMua2V5RnVuY3Rpb24gPSBrZXlGdW5jdGlvbjtcbiAgfVxuXG4gIC8vIGdldHMgZGF0YSBmcm9tIGNhY2hlIGF0IHRoZSBSZXNvbHV0aW9uIGRlZmluZWQgYnkgdGhlIGludGVydmFsXG4gIGdldChyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiwgcmVzb2x1dGlvbjogP251bWJlcik6IFRbXSB7XG4gICAgaWYgKCFyYW5nZSkgcmV0dXJuIFtdO1xuICAgIHZhciByZXMgPSB7fTtcbiAgICBpZiAoIXJlc29sdXRpb24pIHtcbiAgICAgICAgcmVzID0gXy5maWx0ZXIodGhpcy5jYWNoZVsxXSwgZCA9PiB0aGlzLmZpbHRlckZ1bmN0aW9uKHJhbmdlLCBkKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmVzID0gXy5maWx0ZXIodGhpcy5jYWNoZVtyZXNvbHV0aW9uXSwgZCA9PiB0aGlzLmZpbHRlckZ1bmN0aW9uKHJhbmdlLCBkKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBGaW5kIHRoZSBkaXNqb2ludCBzdWJpbnRlcnZhbHMgbm90IGNvdmVyZWQgYnkgYW55IGludGVydmFsIGluIHRoZSBsaXN0IHdpdGggdGhlIHNhbWUgcmVzb2x1dGlvbi5cbiAgICpcbiAgICogSWYgY29tcCA9IGludGVydmFsLmNvbXBsZW1lbnRJbnRlcnZhbHMocmFuZ2VzKSwgdGhlbiB0aGlzIGd1YXJhbnRlZXMgdGhhdDpcbiAgICogLSBjb21wIHVuaW9uIHJhbmdlcyA9IGludGVydmFsXG4gICAqIC0gYSBpbnQgYiA9IDAgZm9yYWxsIGEgXFxpbiBjb21wLCBiIGluIHJhbmdlc1xuICAgKlxuICAgKiAoVGhlIGlucHV0IHJhbmdlcyBuZWVkIG5vdCBiZSBkaXNqb2ludC4pXG4gICAqL1xuICBjb21wbGVtZW50SW50ZXJ2YWwocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sIHJlc29sdXRpb246ID9udW1iZXIpOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+W10ge1xuICAgIGlmICghcmVzb2x1dGlvbikge1xuICAgICAgcmVzb2x1dGlvbiA9IFJlc29sdXRpb25DYWNoZS5nZXRSZXNvbHV0aW9uKHJhbmdlLmludGVydmFsKTtcbiAgICB9XG5cbiAgICAvLyBmaWx0ZXIgcmFuZ2VzIGJ5IGNvcnJlY3QgcmVzb2x1dGlvblxuICAgIHZhciByZXNvbHV0aW9uSW50ZXJ2YWxzID0gXy5maWx0ZXIodGhpcy5jb3ZlcmVkUmFuZ2VzLCByID0+IHIucmVzb2x1dGlvbiA9PSByZXNvbHV0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubWFwKHIgPT4gci5jb250aWdJbnRlcnZhbCk7XG5cbiAgICByZXR1cm4gcmFuZ2UuY29tcGxlbWVudEludGVydmFscyhyZXNvbHV0aW9uSW50ZXJ2YWxzKTtcblxuICB9XG5cbiAgLy8gcHV0cyBuZXcgcmFuZ2VzIGludG8gbGlzdCBvZiByYW5nZXMgY292ZXJlZCBieSBjYWNoZVxuICBjb3ZlclJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LCByZXNvbHV0aW9uOiA/bnVtYmVyKSB7XG4gICAgaWYgKCFyZXNvbHV0aW9uKSB7XG4gICAgICByZXNvbHV0aW9uID0gUmVzb2x1dGlvbkNhY2hlLmdldFJlc29sdXRpb24ocmFuZ2UuaW50ZXJ2YWwpO1xuICAgIH1cbiAgICB2YXIgcmVzb2x2ZWRSYW5nZSA9IG5ldyBSZXNvbHV0aW9uQ2FjaGVLZXkocmFuZ2UsIHJlc29sdXRpb24pO1xuICAgIHRoaXMuY292ZXJlZFJhbmdlcy5wdXNoKHJlc29sdmVkUmFuZ2UpO1xuICAgIC8vIGNvYWxlc2NlIG5ldyBjb250aWdJbnRlcnZhbHNcbiAgICB0aGlzLmNvdmVyZWRSYW5nZXMgPSBSZXNvbHV0aW9uQ2FjaGVLZXkuY29hbGVzY2UodGhpcy5jb3ZlcmVkUmFuZ2VzKTtcbiAgfVxuXG4gIC8vIHB1dHMgZGF0YSBpbiBjYWNoZVxuICBwdXQodmFsdWU6IFQsIHJlc29sdXRpb246ID9udW1iZXIpIHtcbiAgICBpZiAoIXJlc29sdXRpb24pIHtcbiAgICAgIHJlc29sdXRpb24gPSAxO1xuICAgIH1cbiAgICB2YXIga2V5ID0gdGhpcy5rZXlGdW5jdGlvbih2YWx1ZSk7XG5cbiAgICAvLyBpbml0aWFsaXplIGNhY2hlIHJlc29sdXRpb24sIGlmIG5vdCBhbHJlYWR5IGluaXRpYWxpemVkXG4gICAgaWYgKCF0aGlzLmNhY2hlW3Jlc29sdXRpb25dKSB0aGlzLmNhY2hlW3Jlc29sdXRpb25dID0ge307XG5cbiAgICBpZiAoIXRoaXMuY2FjaGVbcmVzb2x1dGlvbl1ba2V5XSkge1xuICAgICAgdGhpcy5jYWNoZVtyZXNvbHV0aW9uXVtrZXldID0gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgLy8gY2hlY2tzIHdlYXRoZXIgY2FjaGUgY29udGFpbnMgZGF0YSBmb3IgdGhlXG4gIC8vIHNwZWNpZmllZCBpbnRlcnZhbCBhbmQgaXRzIGNvcnJlc3BvbmRpbmcgcmVzb2x1dGlvblxuICBjb3ZlcnNSYW5nZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPixcbiAgICAgICAgICAgICAgcmVzb2x1dGlvbjogP251bWJlcik6IGJvb2xlYW4ge1xuICAgIGlmICghcmVzb2x1dGlvbikge1xuICAgICAgcmVzb2x1dGlvbiA9IFJlc29sdXRpb25DYWNoZS5nZXRSZXNvbHV0aW9uKHJhbmdlLmludGVydmFsKTtcbiAgICB9XG5cbiAgICAvLyBmaWx0ZXIgcmFuZ2VzIGJ5IGNvcnJlY3QgcmVzb2x1dGlvblxuICAgIHZhciByZXNvbHV0aW9uUmFuZ2VzID0gXy5maWx0ZXIodGhpcy5jb3ZlcmVkUmFuZ2VzLCByID0+IHIucmVzb2x1dGlvbiA9PSByZXNvbHV0aW9uKTtcbiAgICBpZiAocmFuZ2UuaXNDb3ZlcmVkQnkocmVzb2x1dGlvblJhbmdlcy5tYXAociA9PiByLmNvbnRpZ0ludGVydmFsKSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBjbGVhcnMgb3V0IGFsbCBjb250ZW50IGluIGNhY2hlXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuY292ZXJlZFJhbmdlcyA9IFtdO1xuICAgIHRoaXMuY2FjaGUgPSB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBCYXNlIFBhaXJzIHBlciBiaW4gZ2l2ZW4gYSBzcGVjaWZpZWQgaW50ZXJ2YWxcbiAgICogVGhpcyBpcyB1c2VkIHRvIGJpbiBjb3ZlcmFnZSB3aGVuIHZpZXdpbmcgbGFyZ2UgcmVnaW9uc1xuICAgKlxuICAgKiBWYWx1ZXMgd2VyZSBjaG9zZW4gYmFzZWQgb24gYSAxMDAwIHBpeGVsIHNjcmVlbiAoYSBjb25zZXJ2YXRpdmUgZXN0aW1hdGUpOlxuICAgKiAtIEZvciByZWdpb25zIDwgMTAsMDAwIGJhc2UgcGFpcnMsIG5vIGJpbm5pbmcgaXMgcGVyZm9ybWVkIChyZXR1cm4gMSlcbiAgICogLSBGb3IgcmVnaW9ucyA+PSAxMCwwMDAgYW5kIDwgMTAwLDAwMCwgYmluIDEwIGJwIGludG8gMSAocmV0dXJuIDEwKVxuICAgKiAtIEZvciByZWdpb25zID49IDEwMCwwMDAgYW5kIDwgMSwwMDAsMDAwLCBiaW4gMTAwIGJwIGludG8gMSAocmV0dXJuIDEwMClcbiAgICogLSBGb3IgcmVnaW9ucyA+PSAxLDAwMCwwMDAsIGJpbiAxMDAwIGJwIGludG8gMSAocmV0dXJuIDEwMDApXG4gICAqL1xuICBzdGF0aWMgZ2V0UmVzb2x1dGlvbihyYW5nZTogSW50ZXJ2YWwpOiBudW1iZXIge1xuICAgIC8vIHN1YnRyYWN0IG9uZSBiZWNhdXNlIGxlbmd0aCgpIGFkZHMgb25lXG4gICAgdmFyIHJhbmdlTGVuZ3RoID0gcmFuZ2UubGVuZ3RoKCkgLSAxO1xuICAgIGlmIChyYW5nZUxlbmd0aCA8IDEwMDAwKVxuICAgICAgcmV0dXJuIDE7XG4gICAgZWxzZSBpZiAocmFuZ2VMZW5ndGggPj0gMTAwMDAgJiYgcmFuZ2VMZW5ndGggPCAxMDAwMDAgKVxuICAgICAgcmV0dXJuIDEwO1xuICAgIGVsc2UgaWYgKHJhbmdlTGVuZ3RoID49IDEwMDAwMCAmJiByYW5nZUxlbmd0aCA8IDEwMDAwMDAgKVxuICAgICAgcmV0dXJuIDEwMDtcbiAgICBlbHNlXG4gICAgICByZXR1cm4gMTAwMDtcbiAgfVxufVxuXG4vKipcbiAqIENsYXNzIGhvbGRzIGEgQ29udGlnSW50ZXJ2YWwgYW5kIHJlc29sdXRpb24gdGhhdCBkZXNpZ25hdGVzIHdoZXRoZXJcbiAqIGEgY29udGlnIGludGVydmFsIHJlcHJlc2VudHMgZGF0YSBhdCBhIGNlcnRhaW4gcmVzb2x1dGlvbi4gVGhlXG4gKiBwYXJhbWV0ZXJzIGZvciBjaG9vc2luZyBhIHJlc29sdXRpb24gYmFzZWQgb24gaW50ZXJ2YWwgbGVuZ3RoIGFyZSBzZXRcbiAqIGluIGdldFJlc29sdXRpb24uXG4gKlxuICovXG5jbGFzcyBSZXNvbHV0aW9uQ2FjaGVLZXkge1xuICBjb250aWdJbnRlcnZhbDogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPjtcbiAgcmVzb2x1dGlvbjogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGNvbnRpZ0ludGVydmFsOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LCByZXNvbHV0aW9uOiBudW1iZXIpIHtcbiAgICB0aGlzLmNvbnRpZ0ludGVydmFsID0gY29udGlnSW50ZXJ2YWw7XG4gICAgdGhpcy5yZXNvbHV0aW9uID0gcmVzb2x1dGlvbjtcbiAgfVxuXG4gIGNsb25lKCk6IFJlc29sdXRpb25DYWNoZUtleSB7XG4gICAgcmV0dXJuIG5ldyBSZXNvbHV0aW9uQ2FjaGVLZXkodGhpcy5jb250aWdJbnRlcnZhbC5jbG9uZSgpLCB0aGlzLnJlc29sdXRpb24pO1xuICB9XG5cbiAgLy8gU29ydCBhbiBhcnJheSBvZiBpbnRlcnZhbHMgJiBjb2FsZXNjZSBhZGphY2VudC9vdmVybGFwcGluZyByYW5nZXMuXG4gIC8vIE5COiB0aGlzIG1heSByZS1vcmRlciB0aGUgaW50ZXJ2YWxzIHBhcmFtZXRlclxuICBzdGF0aWMgY29hbGVzY2UoaW50ZXJ2YWxzOiBSZXNvbHV0aW9uQ2FjaGVLZXlbXSk6IFJlc29sdXRpb25DYWNoZUtleVtdIHtcbiAgICBpbnRlcnZhbHMuc29ydChSZXNvbHV0aW9uQ2FjaGVLZXkuY29tcGFyZSk7XG5cbiAgICB2YXIgcnMgPSBbXTtcbiAgICBpbnRlcnZhbHMuZm9yRWFjaChyID0+IHtcbiAgICAgIGlmIChycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcnMucHVzaChyKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgbGFzdFI6IFJlc29sdXRpb25DYWNoZUtleSA9IHJzW3JzLmxlbmd0aCAtIDFdO1xuICAgICAgaWYgKChyLmNvbnRpZ0ludGVydmFsLmludGVyc2VjdHMobGFzdFIuY29udGlnSW50ZXJ2YWwpIHx8XG4gICAgICAgICAgci5jb250aWdJbnRlcnZhbC5pc0FkamFjZW50VG8obGFzdFIuY29udGlnSW50ZXJ2YWwpKSAmJlxuICAgICAgICAgIHIucmVzb2x1dGlvbiA9PSBsYXN0Ui5yZXNvbHV0aW9uKSB7XG4gICAgICAgIGxhc3RSID0gcnNbcnMubGVuZ3RoIC0gMV0gPSBsYXN0Ui5jbG9uZSgpO1xuICAgICAgICBsYXN0Ui5jb250aWdJbnRlcnZhbC5pbnRlcnZhbC5zdG9wID1cbiAgICAgICAgICBNYXRoLm1heChyLmNvbnRpZ0ludGVydmFsLmludGVydmFsLnN0b3AsIGxhc3RSLmNvbnRpZ0ludGVydmFsLmludGVydmFsLnN0b3ApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcnMucHVzaChyKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBycztcbiAgfVxuXG4gIC8vIENvbXBhcmF0b3IgZm9yIHVzZSB3aXRoIEFycmF5LnByb3RvdHlwZS5zb3J0XG4gIHN0YXRpYyBjb21wYXJlKGE6IFJlc29sdXRpb25DYWNoZUtleSwgYjogUmVzb2x1dGlvbkNhY2hlS2V5KTogbnVtYmVyIHtcbiAgICBpZiAoYS5jb250aWdJbnRlcnZhbC5jb250aWcgPiBiLmNvbnRpZ0ludGVydmFsLmNvbnRpZykge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH0gZWxzZSBpZiAoYS5jb250aWdJbnRlcnZhbC5jb250aWcgPCBiLmNvbnRpZ0ludGVydmFsLmNvbnRpZykge1xuICAgICAgcmV0dXJuICsxO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gYS5jb250aWdJbnRlcnZhbC5zdGFydCgpIC0gYi5jb250aWdJbnRlcnZhbC5zdGFydCgpO1xuICAgIH1cbiAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBSZXNvbHV0aW9uQ2FjaGVcbn07XG4iLCIvKipcbiAqIFJvb3Qgb2YgdGhlIFJlYWN0IGNvbXBvbmVudCB0cmVlLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7VHdvQml0U291cmNlfSBmcm9tICcuL3NvdXJjZXMvVHdvQml0RGF0YVNvdXJjZSc7XG5pbXBvcnQgdHlwZSB7VmlzdWFsaXplZFRyYWNrLCBWaXpXaXRoT3B0aW9uc30gZnJvbSAnLi90eXBlcyc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBDb250cm9scyBmcm9tICcuL0NvbnRyb2xzJztcbmltcG9ydCBNZW51IGZyb20gJy4vTWVudSc7XG5pbXBvcnQgdHlwZSB7U2VxdWVuY2VSZWNvcmR9IGZyb20gJy4vZGF0YS9TZXF1ZW5jZSc7XG5pbXBvcnQgVmlzdWFsaXphdGlvbldyYXBwZXIgZnJvbSAnLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIHJlZmVyZW5jZVNvdXJjZTogVHdvQml0U291cmNlO1xuICB0cmFja3M6IFZpc3VhbGl6ZWRUcmFja1tdO1xuICBpbml0aWFsUmFuZ2U6IEdlbm9tZVJhbmdlO1xufTtcblxuY2xhc3MgUm9vdCBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHByb3BzOiBQcm9wcztcbiAgc3RhdGU6IHtcbiAgICBjb250aWdMaXN0OiBTZXF1ZW5jZVJlY29yZFtdO1xuICAgIGNvbnRpZ05hbWVzOiBzdHJpbmdbXTtcbiAgICByYW5nZTogP0dlbm9tZVJhbmdlO1xuICAgIHNldHRpbmdzTWVudUtleTogP3N0cmluZztcbiAgfTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogT2JqZWN0KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBjb250aWdMaXN0OiB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5jb250aWdMaXN0KCksXG4gICAgICBjb250aWdOYW1lczogXy5tYXAodGhpcy5wcm9wcy5yZWZlcmVuY2VTb3VyY2UuY29udGlnTGlzdCgpLCBjb250aWcgPT4gY29udGlnLm5hbWUpLFxuICAgICAgcmFuZ2U6IG51bGwsXG4gICAgICBzZXR0aW5nc01lbnVLZXk6IG51bGxcbiAgICB9O1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5wcm9wcy5yZWZlcmVuY2VTb3VyY2Uub24oJ2NvbnRpZ3MnLCAoKSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgY29udGlnTGlzdDogdGhpcy5wcm9wcy5yZWZlcmVuY2VTb3VyY2UuY29udGlnTGlzdCgpLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpZiAoIXRoaXMuc3RhdGUucmFuZ2UpIHtcbiAgICAgIHRoaXMuaGFuZGxlUmFuZ2VDaGFuZ2UodGhpcy5wcm9wcy5pbml0aWFsUmFuZ2UpO1xuICAgIH1cbiAgICAvLyBpbiBjYXNlIHRoZSBjb250aWdzIGNhbWUgaW4gYmV0d2VlbiBnZXRJbml0aWFsU3RhdGUoKSBhbmQgaGVyZS5cbiAgICB0aGlzLnNldFN0YXRlKHtjb250aWdMaXN0OiB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5jb250aWdMaXN0KCl9KTtcbiAgfVxuXG4gIGhhbmRsZVJhbmdlQ2hhbmdlKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgIC8vIERvIG5vdCBwcm9wYWdhdGUgbmVnYXRpdmUgcmFuZ2VzXG4gICAgaWYgKG5ld1JhbmdlLnN0YXJ0IDwgMCkge1xuICAgICAgbmV3UmFuZ2Uuc3RhcnQgPSAwO1xuICAgIH1cbiAgICB2YXIgcmVjb3JkID0gXy5maW5kKHRoaXMuc3RhdGUuY29udGlnTGlzdCwgY29udGlnID0+IGNvbnRpZy5uYW1lID09IG5ld1JhbmdlLmNvbnRpZyk7XG4gICAgaWYgKHJlY29yZCkge1xuICAgICAgaWYgKG5ld1JhbmdlLnN0b3AgPiByZWNvcmQubGVuZ3RoKSB7XG4gICAgICAgIG5ld1JhbmdlLnN0b3AgPSByZWNvcmQubGVuZ3RoO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLm5vcm1hbGl6ZVJhbmdlKG5ld1JhbmdlKS50aGVuKHJhbmdlID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3JhbmdlOiByYW5nZX0pO1xuXG4gICAgICAvLyBJbmZvcm0gYWxsIHRoZSBzb3VyY2VzIG9mIHRoZSByYW5nZSBjaGFuZ2UgKGluY2x1ZGluZyByZWZlcmVuY2VTb3VyY2UpLlxuICAgICAgdGhpcy5wcm9wcy50cmFja3MuZm9yRWFjaCh0cmFjayA9PiB7XG4gICAgICAgIHRyYWNrLnNvdXJjZS5yYW5nZUNoYW5nZWQocmFuZ2UpO1xuICAgICAgfSk7XG4gICAgfSkuZG9uZSgpO1xuICB9XG5cbiAgdG9nZ2xlU2V0dGluZ3NNZW51KGtleTogc3RyaW5nLCBlOiBTeW50aGV0aWNFdmVudCkge1xuICAgIGlmICh0aGlzLnN0YXRlLnNldHRpbmdzTWVudUtleSA9PSBrZXkpIHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe3NldHRpbmdzTWVudUtleTogbnVsbH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtzZXR0aW5nc01lbnVLZXk6IGtleX0pO1xuICAgIH1cbiAgfVxuXG4gIGhhbmRsZVNlbGVjdE9wdGlvbih0cmFja0tleTogc3RyaW5nLCBvcHRpb25LZXk6IHN0cmluZykge1xuICAgIHRoaXMuc2V0U3RhdGUoe3NldHRpbmdzTWVudUtleTogbnVsbH0pO1xuXG4gICAgdmFyIHZpeiA9IHRoaXMucHJvcHMudHJhY2tzW051bWJlcih0cmFja0tleSldLnZpc3VhbGl6YXRpb247XG4gICAgdmFyIG9sZE9wdHMgPSB2aXoub3B0aW9ucztcbiAgICB2YXIgbmV3T3B0cyA9IHZpei5jb21wb25lbnQuaGFuZGxlU2VsZWN0T3B0aW9uKG9wdGlvbktleSwgb2xkT3B0cyk7XG4gICAgdml6Lm9wdGlvbnMgPSBuZXdPcHRzO1xuICAgIGlmIChuZXdPcHRzICE9IG9sZE9wdHMpIHtcbiAgICAgIHRoaXMuZm9yY2VVcGRhdGUoKTtcbiAgICB9XG4gIH1cblxuICBtYWtlRGl2Rm9yVHJhY2soa2V5OiBzdHJpbmcsIHRyYWNrOiBWaXN1YWxpemVkVHJhY2spOiBSZWFjdC5FbGVtZW50IHtcbiAgICB2YXIgdHJhY2tFbCA9IChcbiAgICAgICAgPFZpc3VhbGl6YXRpb25XcmFwcGVyIHZpc3VhbGl6YXRpb249e3RyYWNrLnZpc3VhbGl6YXRpb259XG4gICAgICAgICAgICByYW5nZT17dGhpcy5zdGF0ZS5yYW5nZX1cbiAgICAgICAgICAgIG9uUmFuZ2VDaGFuZ2U9e3RoaXMuaGFuZGxlUmFuZ2VDaGFuZ2UuYmluZCh0aGlzKX1cbiAgICAgICAgICAgIHNvdXJjZT17dHJhY2suc291cmNlfVxuICAgICAgICAgICAgcmVmZXJlbmNlU291cmNlPXt0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZX1cbiAgICAgICAgICAvPik7XG5cbiAgICB2YXIgdHJhY2tOYW1lID0gdHJhY2sudHJhY2submFtZSB8fCAnKHRyYWNrIG5hbWUpJztcblxuICAgIHZhciBnZWFySWNvbiA9IG51bGwsXG4gICAgICAgIHNldHRpbmdzTWVudSA9IG51bGw7XG4gICAgaWYgKHRyYWNrLnZpc3VhbGl6YXRpb24uY29tcG9uZW50LmdldE9wdGlvbnNNZW51KSB7XG4gICAgICBnZWFySWNvbiA9IChcbiAgICAgICAgICA8c3BhbiByZWY9eydnZWFyLScgKyBrZXl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPSdnZWFyJ1xuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlU2V0dGluZ3NNZW51LmJpbmQodGhpcywga2V5KX0+XG4gICAgICAgICAgICDimplcbiAgICAgICAgICA8L3NwYW4+XG4gICAgICApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXRlLnNldHRpbmdzTWVudUtleSA9PSBrZXkpIHtcbiAgICAgIHZhciBnZWFyID0gdGhpcy5yZWZzWydnZWFyLScgKyBrZXldLFxuICAgICAgICAgIGdlYXJYID0gZ2Vhci5vZmZzZXRMZWZ0LFxuICAgICAgICAgIGdlYXJXID0gZ2Vhci5vZmZzZXRXaWR0aCxcbiAgICAgICAgICBnZWFyWSA9IGdlYXIub2Zmc2V0VG9wO1xuXG4gICAgICB2YXIgbWVudVN0eWxlID0ge1xuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgbGVmdDogKGdlYXJYICsgZ2VhclcpICsgJ3B4JyxcbiAgICAgICAgdG9wOiBnZWFyWSArICdweCdcbiAgICAgIH07XG4gICAgICB2YXIgaXRlbXMgPSB0cmFjay52aXN1YWxpemF0aW9uLmNvbXBvbmVudC5nZXRPcHRpb25zTWVudSh0cmFjay52aXN1YWxpemF0aW9uLm9wdGlvbnMpO1xuICAgICAgc2V0dGluZ3NNZW51ID0gKFxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbWVudS1jb250YWluZXInIHN0eWxlPXttZW51U3R5bGV9PlxuICAgICAgICAgIDxNZW51IGhlYWRlcj17dHJhY2tOYW1lfSBpdGVtcz17aXRlbXN9IG9uU2VsZWN0PXt0aGlzLmhhbmRsZVNlbGVjdE9wdGlvbi5iaW5kKHRoaXMsIGtleSl9IC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG5cbiAgICB2YXIgY2xhc3NOYW1lID0gWyd0cmFjaycsIHRyYWNrLnZpc3VhbGl6YXRpb24uY29tcG9uZW50LmRpc3BsYXlOYW1lIHx8ICcnLCB0cmFjay50cmFjay5jc3NDbGFzcyB8fCAnJ10uam9pbignICcpO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYga2V5PXtrZXl9IGNsYXNzTmFtZT17Y2xhc3NOYW1lfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RyYWNrLWxhYmVsJz5cbiAgICAgICAgICA8c3Bhbj57dHJhY2tOYW1lfTwvc3Bhbj5cbiAgICAgICAgICA8YnIvPlxuICAgICAgICAgIHtnZWFySWNvbn1cbiAgICAgICAgICB7c2V0dGluZ3NNZW51fVxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RyYWNrLWNvbnRlbnQnPlxuICAgICAgICAgIHt0cmFja0VsfVxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgICk7XG4gIH1cblxuICByZW5kZXIoKTogYW55IHtcbiAgICAvLyBUT0RPOiB1c2UgYSBiZXR0ZXIga2V5IHRoYW4gaW5kZXguXG4gICAgdmFyIHRyYWNrRWxzID0gdGhpcy5wcm9wcy50cmFja3MubWFwKCh0LCBpKSA9PiB0aGlzLm1ha2VEaXZGb3JUcmFjaygnJytpLCB0KSk7XG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXYgY2xhc3NOYW1lPSdwaWxldXAtcm9vdCc+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0cmFjayBjb250cm9scyc+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9J3RyYWNrLWxhYmVsJz5cbiAgICAgICAgICAgICZuYnNwO1xuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSd0cmFjay1jb250ZW50Jz5cbiAgICAgICAgICAgIDxDb250cm9scyBjb250aWdMaXN0PXt0aGlzLnN0YXRlLmNvbnRpZ05hbWVzfVxuICAgICAgICAgICAgICAgICAgICAgIHJhbmdlPXt0aGlzLnN0YXRlLnJhbmdlfVxuICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLmhhbmRsZVJhbmdlQ2hhbmdlLmJpbmQodGhpcyl9IC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICB7dHJhY2tFbHN9XG4gICAgICA8L2Rpdj5cbiAgICApO1xuICB9XG59XG5Sb290LmRpc3BsYXlOYW1lID0gJ1Jvb3QnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJvb3Q7XG4iLCIvKipcbiAqIEEgc3RvcmUgZm9yIHNlcXVlbmNlcy5cbiAqXG4gKiBUaGlzIGlzIHVzZWQgdG8gc3RvcmUgYW5kIHJldHJpZXZlIHJlZmVyZW5jZSBkYXRhLlxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUgSW50ZXJ2YWwgZnJvbSAnLi9JbnRlcnZhbCc7XG5pbXBvcnQgdHlwZSBDb250aWdJbnRlcnZhbCBmcm9tICcuL0NvbnRpZ0ludGVydmFsJztcblxuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5cbmltcG9ydCB7YWx0Q29udGlnTmFtZX0gZnJvbSAnLi91dGlscyc7XG5cbi8vIFN0b3JlIHNlcXVlbmNlcyBvZiB0aGlzIG1hbnkgYmFzZSBwYWlycyB0b2dldGhlciBpbiBhIHNpbmdsZSBzdHJpbmcuXG5jb25zdCBDSFVOS19TSVpFID0gMTAwMDtcblxudHlwZSBTZXFNYXAgPSB7W2tleTogbnVtYmVyXTogc3RyaW5nfTtcbnR5cGUgQ2h1bmtXaXRoT2Zmc2V0ID0ge1xuICBjaHVua1N0YXJ0OiBudW1iZXI7XG4gIG9mZnNldDogbnVtYmVyO1xuICBsZW5ndGg6IG51bWJlcjtcbn07XG5cbi8vIFRoaXMgY2xhc3Mgc3RvcmVzIHNlcXVlbmNlcyBlZmZpY2llbnRseS5cbmNsYXNzIFNlcXVlbmNlU3RvcmUge1xuICAvLyBjb250aWcgLS0+IHN0YXJ0IG9mIGNodW5rIC0tPiBzZXF1ZW5jZSBvZiBjaHVua1xuICBjb250aWdNYXA6IHtba2V5OiBzdHJpbmddOiBTZXFNYXB9O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuY29udGlnTWFwID0ge307XG4gIH1cblxuICAvKipcbiAgICogU2V0IGEgcmFuZ2Ugb2YgdGhlIGdlbm9tZSB0byB0aGUgcGFydGljdWxhciBzZXF1ZW5jZS5cbiAgICogVGhpcyBvdmVyd3JpdGVzIGFueSBleGlzdGluZyBkYXRhLlxuICAgKi9cbiAgc2V0UmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sIHNlcXVlbmNlOiBzdHJpbmcpIHtcbiAgICBpZiAocmFuZ2UubGVuZ3RoKCkgPT09IDApIHJldHVybjtcbiAgICBpZiAocmFuZ2UubGVuZ3RoKCkgIT0gc2VxdWVuY2UubGVuZ3RoKSB7XG4gICAgICB0aHJvdyAnc2V0UmFuZ2UgbGVuZ3RoIG1pc21hdGNoJztcbiAgICB9XG5cbiAgICB2YXIgc2VxcyA9IHRoaXMuX2dldFNlcXVlbmNlcyhyYW5nZS5jb250aWcpO1xuICAgIGlmICghc2Vxcykge1xuICAgICAgc2VxcyA9IHRoaXMuY29udGlnTWFwW3JhbmdlLmNvbnRpZ10gPSB7fTtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBjaHVuayBvZiB0aGlzLl9jaHVua0ZvckludGVydmFsKHJhbmdlLmludGVydmFsKSkge1xuICAgICAgdmFyIHBvcyA9IGNodW5rLmNodW5rU3RhcnQgKyBjaHVuay5vZmZzZXQgLSByYW5nZS5zdGFydCgpO1xuICAgICAgdGhpcy5fc2V0Q2h1bmsoc2VxcywgY2h1bmssIHNlcXVlbmNlLnNsaWNlKHBvcywgcG9zICsgY2h1bmsubGVuZ3RoKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlIGEgcmFuZ2Ugb2Ygc2VxdWVuY2UgZGF0YS5cbiAgICogSWYgYW55IHBvcnRpb25zIGFyZSB1bmtub3duLCB0aGV5IHdpbGwgYmUgc2V0IHRvICcuJy5cbiAgICovXG4gIGdldEFzU3RyaW5nKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogc3RyaW5nIHtcbiAgICBjb25zdCBzZXFzID0gdGhpcy5fZ2V0U2VxdWVuY2VzKHJhbmdlLmNvbnRpZyk7XG4gICAgaWYgKCFzZXFzKSB7XG4gICAgICByZXR1cm4gJy4nLnJlcGVhdChyYW5nZS5sZW5ndGgoKSk7XG4gICAgfVxuXG4gICAgdmFyIGNodW5rcyA9IHRoaXMuX2NodW5rRm9ySW50ZXJ2YWwocmFuZ2UuaW50ZXJ2YWwpO1xuICAgIHZhciByZXN1bHQgPSAnJztcbiAgICBmb3IgKHZhciBjaHVuayBvZiBjaHVua3MpIHtcbiAgICAgIHZhciBzZXEgPSBzZXFzW2NodW5rLmNodW5rU3RhcnRdO1xuICAgICAgaWYgKCFzZXEpIHtcbiAgICAgICAgcmVzdWx0ICs9ICcuJy5yZXBlYXQoY2h1bmsubGVuZ3RoKTtcbiAgICAgIH0gZWxzZSBpZiAoY2h1bmsub2Zmc2V0ID09PSAwICYmIGNodW5rLmxlbmd0aCA9PSBzZXEubGVuZ3RoKSB7XG4gICAgICAgIHJlc3VsdCArPSBzZXE7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHQgKz0gc2VxLnNsaWNlKGNodW5rLm9mZnNldCwgY2h1bmsub2Zmc2V0ICsgY2h1bmsubGVuZ3RoKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaWtlIGdldEFzU3RyaW5nKCksIGJ1dCByZXR1cm5zIGEgbGVzcyBlZmZpY2llbnQgb2JqZWN0IHJlcHJlc2VudGF0aW9uOlxuICAgKiB7J2NocjE6MTAnOiAnQScsICdjaHIxOjExJzogJ0MnLCAuLi59XG4gICAqL1xuICBnZXRBc09iamVjdHMocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiB7W2tleTpzdHJpbmddOiA/c3RyaW5nfSB7XG4gICAgcmV0dXJuIF8ub2JqZWN0KF8ubWFwKHRoaXMuZ2V0QXNTdHJpbmcocmFuZ2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAoYmFzZSwgaSkgPT4gW3JhbmdlLmNvbnRpZyArICc6JyArIChyYW5nZS5zdGFydCgpICsgaSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZSA9PSAnLicgPyBudWxsIDogYmFzZV0pKTtcbiAgfVxuXG4gIC8vIFJldHJpZXZlIGEgY2h1bmsgZnJvbSB0aGUgc2VxdWVuY2UgbWFwLlxuICBfZ2V0Q2h1bmsoc2VxczogU2VxTWFwLCBzdGFydDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gc2Vxc1tzdGFydF0gfHwgJy4nLnJlcGVhdChDSFVOS19TSVpFKTtcbiAgfVxuXG4gIC8vIFNwbGl0IGFuIGludGVydmFsIGludG8gY2h1bmtzIHdoaWNoIGFsaWduIHdpdGggdGhlIHN0b3JlLlxuICBfY2h1bmtGb3JJbnRlcnZhbChyYW5nZTogSW50ZXJ2YWwpOiBDaHVua1dpdGhPZmZzZXRbXSB7XG4gICAgdmFyIG9mZnNldCA9IHJhbmdlLnN0YXJ0ICUgQ0hVTktfU0laRSxcbiAgICAgICAgY2h1bmtTdGFydCA9IHJhbmdlLnN0YXJ0IC0gb2Zmc2V0O1xuICAgIHZhciBjaHVua3MgPSBbe1xuICAgICAgY2h1bmtTdGFydCxcbiAgICAgIG9mZnNldCxcbiAgICAgIGxlbmd0aDogTWF0aC5taW4oQ0hVTktfU0laRSAtIG9mZnNldCwgcmFuZ2UubGVuZ3RoKCkpXG4gICAgfV07XG4gICAgY2h1bmtTdGFydCArPSBDSFVOS19TSVpFO1xuICAgIGZvciAoOyBjaHVua1N0YXJ0IDw9IHJhbmdlLnN0b3A7IGNodW5rU3RhcnQgKz0gQ0hVTktfU0laRSkge1xuICAgICAgY2h1bmtzLnB1c2goe1xuICAgICAgICBjaHVua1N0YXJ0LFxuICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgIGxlbmd0aDogTWF0aC5taW4oQ0hVTktfU0laRSwgcmFuZ2Uuc3RvcCAtIGNodW5rU3RhcnQgKyAxKVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBjaHVua3M7XG4gIH1cblxuICAvLyBTZXQgYSAoc3Vic2V0IG9mIGEpIGNodW5rIHRvIHRoZSBnaXZlbiBzZXF1ZW5jZS5cbiAgX3NldENodW5rKHNlcXM6IFNlcU1hcCwgY2h1bms6IENodW5rV2l0aE9mZnNldCwgc2VxdWVuY2U6IHN0cmluZykge1xuICAgIC8vIEZpcnN0OiB0aGUgZWFzeSBjYXNlLiBUb3RhbCByZXBsYWNlbWVudC5cbiAgICBpZiAoY2h1bmsub2Zmc2V0ID09PSAwICYmIHNlcXVlbmNlLmxlbmd0aCA9PSBDSFVOS19TSVpFKSB7XG4gICAgICBzZXFzW2NodW5rLmNodW5rU3RhcnRdID0gc2VxdWVuY2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gV2UgbmVlZCB0byBtZXJnZSB0aGUgbmV3IHNlcXVlbmNlIHdpdGggdGhlIG9sZC5cbiAgICB2YXIgb2xkQ2h1bmsgPSB0aGlzLl9nZXRDaHVuayhzZXFzLCBjaHVuay5jaHVua1N0YXJ0KTtcbiAgICBzZXFzW2NodW5rLmNodW5rU3RhcnRdID0gb2xkQ2h1bmsuc2xpY2UoMCwgY2h1bmsub2Zmc2V0KSArXG4gICAgICAgICAgICAgICAgICAgICAgIHNlcXVlbmNlICtcbiAgICAgICAgICAgICAgICAgICAgICAgb2xkQ2h1bmsuc2xpY2UoY2h1bmsub2Zmc2V0ICsgc2VxdWVuY2UubGVuZ3RoKTtcbiAgfVxuXG4gIC8vIEdldCB0aGUgc2VxdWVuY2VzIGZvciBhIGNvbnRpZywgYWxsb3dpbmcgY2hyLSBtaXNtYXRjaGVzLlxuICBfZ2V0U2VxdWVuY2VzKGNvbnRpZzogc3RyaW5nKTogP1NlcU1hcCB7XG4gICAgcmV0dXJuIHRoaXMuY29udGlnTWFwW2NvbnRpZ10gfHxcbiAgICAgICAgICAgdGhpcy5jb250aWdNYXBbYWx0Q29udGlnTmFtZShjb250aWcpXSB8fFxuICAgICAgICAgICBudWxsO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gU2VxdWVuY2VTdG9yZTtcbiIsIi8qKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5cbmltcG9ydCB0eXBlIHtUd29CaXRTb3VyY2V9IGZyb20gJy4vc291cmNlcy9Ud29CaXREYXRhU291cmNlJztcbmltcG9ydCB0eXBlIHtWaXpXaXRoT3B0aW9uc30gZnJvbSAnLi90eXBlcyc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBkM3V0aWxzIGZyb20gJy4vdml6L2QzdXRpbHMnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgZDMgZnJvbSAnLi4vbGliL21pbmlkMyc7XG5cbmV4cG9ydCB0eXBlIFZpelByb3BzID0ge1xuICB3aWR0aDogbnVtYmVyO1xuICBoZWlnaHQ6IG51bWJlcjtcbiAgcmFuZ2U6IEdlbm9tZVJhbmdlO1xuICByZWZlcmVuY2VTb3VyY2U6IFR3b0JpdFNvdXJjZTtcbiAgb3B0aW9uczogYW55O1xufTtcblxudHlwZSBQcm9wcyA9IHtcbiAgcmFuZ2U6ID9HZW5vbWVSYW5nZTtcbiAgdmlzdWFsaXphdGlvbjogVml6V2l0aE9wdGlvbnM7XG4gIG9uUmFuZ2VDaGFuZ2U6IChuZXdSYW5nZTogR2Vub21lUmFuZ2UpID0+IHZvaWQ7XG4gIHJlZmVyZW5jZVNvdXJjZTogVHdvQml0U291cmNlO1xuICBzb3VyY2U6IGFueTtcbn07XG5cbmNsYXNzIFZpc3VhbGl6YXRpb25XcmFwcGVyIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgcHJvcHM6IFByb3BzO1xuICBzdGF0ZToge3dpZHRoOiBudW1iZXI7IGhlaWdodDogbnVtYmVyfTtcbiAgaGFzRHJhZ0JlZW5Jbml0aWFsaXplZDogYm9vbGVhbjtcbiAgb25SZXNpemVMaXN0ZW5lcjogT2JqZWN0OyAgLy9saXN0ZW5lciB0aGF0IGhhbmRsZXMgd2luZG93Lm9ucmVzaXplIGV2ZW50XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IE9iamVjdCkge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgICB0aGlzLmhhc0RyYWdCZWVuSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgd2lkdGg6IDAsXG4gICAgICBoZWlnaHQ6IDBcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlU2l6ZSgpOiBhbnkge1xuICAgIHZhciBwYXJlbnREaXYgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKS5wYXJlbnROb2RlO1xuICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgd2lkdGg6IHBhcmVudERpdi5vZmZzZXRXaWR0aCxcbiAgICAgIGhlaWdodDogcGFyZW50RGl2Lm9mZnNldEhlaWdodFxuICAgIH0pO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKTogYW55IHtcbiAgICAvL2xvY2FsIGNvcHkgb2YgdGhlIGxpc3RlbmVyLCBzbyB3ZSBjYW4gcmVtb3ZlIGl0XG4gICAgLy93aGVuIHBpbGV1cCBpcyBkZXN0cm95ZWRcbiAgICB0aGlzLm9uUmVzaXplTGlzdGVuZXIgPSAoKSA9PiB0aGlzLnVwZGF0ZVNpemUoKTtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5vblJlc2l6ZUxpc3RlbmVyKTtcbiAgICB0aGlzLnVwZGF0ZVNpemUoKTtcblxuICAgIGlmICh0aGlzLnByb3BzLnJhbmdlICYmICF0aGlzLmhhc0RyYWdCZWVuSW5pdGlhbGl6ZWQpIHRoaXMuYWRkRHJhZ0ludGVyZmFjZSgpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKCk6IGFueSB7XG4gICAgaWYgKHRoaXMucHJvcHMucmFuZ2UgJiYgIXRoaXMuaGFzRHJhZ0JlZW5Jbml0aWFsaXplZCkgdGhpcy5hZGREcmFnSW50ZXJmYWNlKCk7XG4gIH1cblxuICBjb21wb25lbnRXaWxsVW5tb3VudCgpOiBhbnkge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLm9uUmVzaXplTGlzdGVuZXIpO1xuICB9XG5cbiAgZ2V0U2NhbGUoKTogKG51bTogbnVtYmVyKT0+bnVtYmVyIHtcbiAgICBpZiAoIXRoaXMucHJvcHMucmFuZ2UpIHJldHVybiB4ID0+IHg7XG4gICAgcmV0dXJuIGQzdXRpbHMuZ2V0VHJhY2tTY2FsZSh0aGlzLnByb3BzLnJhbmdlLCB0aGlzLnN0YXRlLndpZHRoKTtcbiAgfVxuXG4gIGFkZERyYWdJbnRlcmZhY2UoKTogYW55IHtcbiAgICB0aGlzLmhhc0RyYWdCZWVuSW5pdGlhbGl6ZWQgPSB0cnVlO1xuICAgIHZhciBkaXYgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKTtcbiAgICB2YXIgb3JpZ2luYWxSYW5nZSwgb3JpZ2luYWxTY2FsZSwgZHg9MDtcbiAgICB2YXIgZHJhZ3N0YXJ0ZWQgPSAoKSA9PiB7XG4gICAgICBkMy5ldmVudC5zb3VyY2VFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIGR4ID0gMDtcbiAgICAgIG9yaWdpbmFsUmFuZ2UgPSBfLmNsb25lKHRoaXMucHJvcHMucmFuZ2UpO1xuICAgICAgb3JpZ2luYWxTY2FsZSA9IHRoaXMuZ2V0U2NhbGUoKTtcbiAgICB9O1xuICAgIHZhciB1cGRhdGVSYW5nZSA9ICgpID0+IHtcbiAgICAgIGlmICghb3JpZ2luYWxTY2FsZSkgcmV0dXJuOyAgLy8gY2FuIG5ldmVyIGhhcHBlbiwgYnV0IEZsb3cgZG9uJ3Qga25vdy5cbiAgICAgIGlmICghb3JpZ2luYWxSYW5nZSkgcmV0dXJuOyAgLy8gY2FuIG5ldmVyIGhhcHBlbiwgYnV0IEZsb3cgZG9uJ3Qga25vdy5cbiAgICAgIHZhciBuZXdTdGFydCA9IG9yaWdpbmFsU2NhbGUuaW52ZXJ0KC1keCksXG4gICAgICAgICAgaW50U3RhcnQgPSBNYXRoLnJvdW5kKG5ld1N0YXJ0KSxcbiAgICAgICAgICBvZmZzZXRQeCA9IG9yaWdpbmFsU2NhbGUobmV3U3RhcnQpIC0gb3JpZ2luYWxTY2FsZShpbnRTdGFydCk7XG5cbiAgICAgIHZhciBuZXdSYW5nZSA9IHtcbiAgICAgICAgY29udGlnOiBvcmlnaW5hbFJhbmdlLmNvbnRpZyxcbiAgICAgICAgc3RhcnQ6IGludFN0YXJ0LFxuICAgICAgICBzdG9wOiBpbnRTdGFydCArIChvcmlnaW5hbFJhbmdlLnN0b3AgLSBvcmlnaW5hbFJhbmdlLnN0YXJ0KSxcbiAgICAgICAgb2Zmc2V0UHg6IG9mZnNldFB4XG4gICAgICB9O1xuICAgICAgdGhpcy5wcm9wcy5vblJhbmdlQ2hhbmdlKG5ld1JhbmdlKTtcbiAgICB9O1xuICAgIHZhciBkcmFnbW92ZSA9ICgpID0+IHtcbiAgICAgIGR4ICs9IGQzLmV2ZW50LmR4OyAgLy8gdGhlc2UgYXJlIGludGVnZXJzLCBzbyBubyByb3VuZG9mZiBpc3N1ZXMuXG4gICAgICB1cGRhdGVSYW5nZSgpO1xuICAgIH07XG4gICAgZnVuY3Rpb24gZHJhZ2VuZGVkKCkge1xuICAgICAgdXBkYXRlUmFuZ2UoKTtcbiAgICB9XG5cbiAgICB2YXIgZHJhZyA9IGQzLmJlaGF2aW9yLmRyYWcoKVxuICAgICAgICAub24oJ2RyYWdzdGFydCcsIGRyYWdzdGFydGVkKVxuICAgICAgICAub24oJ2RyYWcnLCBkcmFnbW92ZSlcbiAgICAgICAgLm9uKCdkcmFnZW5kJywgZHJhZ2VuZGVkKTtcblxuICAgIGQzLnNlbGVjdChkaXYpLmNhbGwoZHJhZykub24oJ2NsaWNrJywgdGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIGhhbmRsZUNsaWNrKCk6IGFueSB7XG4gICAgaWYgKGQzLmV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHtcbiAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIHJlbmRlcigpOiBhbnkge1xuICAgIGNvbnN0IHJhbmdlID0gdGhpcy5wcm9wcy5yYW5nZTtcbiAgICBjb25zdCBjb21wb25lbnQgPSB0aGlzLnByb3BzLnZpc3VhbGl6YXRpb24uY29tcG9uZW50O1xuICAgIGlmICghcmFuZ2UpIHtcbiAgICAgIHJldHVybiA8RW1wdHlUcmFjayBjbGFzc05hbWU9e2NvbXBvbmVudC5kaXNwbGF5TmFtZX0gLz47XG4gICAgfVxuXG4gICAgdmFyIGVsID0gUmVhY3QuY3JlYXRlRWxlbWVudChjb21wb25lbnQsICh7XG4gICAgICByYW5nZTogcmFuZ2UsXG4gICAgICBzb3VyY2U6IHRoaXMucHJvcHMuc291cmNlLFxuICAgICAgcmVmZXJlbmNlU291cmNlOiB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZSxcbiAgICAgIHdpZHRoOiB0aGlzLnN0YXRlLndpZHRoLFxuICAgICAgaGVpZ2h0OiB0aGlzLnN0YXRlLmhlaWdodCxcbiAgICAgIG9wdGlvbnM6IHRoaXMucHJvcHMudmlzdWFsaXphdGlvbi5vcHRpb25zXG4gICAgfSA6IFZpelByb3BzKSk7XG5cbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9J2RyYWctd3JhcHBlcic+e2VsfTwvZGl2PjtcbiAgfVxufVxuVmlzdWFsaXphdGlvbldyYXBwZXIuZGlzcGxheU5hbWUgPSAnVmlzdWFsaXphdGlvbldyYXBwZXInO1xuXG5cbnR5cGUgRW1wdHlUcmFja1Byb3BzID0ge2NsYXNzTmFtZTogc3RyaW5nfTtcbmNsYXNzIEVtcHR5VHJhY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQ8dm9pZCwgRW1wdHlUcmFja1Byb3BzLCB2b2lkPiB7XG4gIHJlbmRlcigpIHtcbiAgICB2YXIgY2xhc3NOYW1lID0gdGhpcy5wcm9wcy5jbGFzc05hbWUgKyAnIGVtcHR5JztcbiAgICByZXR1cm4gPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZX0+PC9kaXY+O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gVmlzdWFsaXphdGlvbldyYXBwZXI7XG4iLCIvKipcbiAqIFBhcnNlciBmb3IgYmlnQmVkIGZvcm1hdC5cbiAqIEJhc2VkIG9uIFVDU0MncyBzcmMvaW5jL2JiaUZpbGUuaFxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgUSBmcm9tICdxJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IGpCaW5hcnkgZnJvbSAnamJpbmFyeSc7XG5pbXBvcnQgcGFrbyBmcm9tICdwYWtvL2xpYi9pbmZsYXRlJzsgIC8vIGZvciBnemlwIGluZmxhdGlvblxuXG5pbXBvcnQgUmVtb3RlRmlsZSBmcm9tICcuLi9SZW1vdGVGaWxlJztcbmltcG9ydCBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCBiYmkgZnJvbSAnLi9mb3JtYXRzL2JiaSc7XG5cblxuZnVuY3Rpb24gcGFyc2VIZWFkZXIoYnVmZmVyKSB7XG4gIC8vIFRPRE86IGNoZWNrIEVuZGlhbm5lc3MgdXNpbmcgbWFnaWMuIFBvc3NpYmx5IHVzZSBqRGF0YVZpZXcubGl0dGxlRW5kaWFuXG4gIC8vIHRvIGZsaXAgdGhlIGVuZGlhbm5lc3MgZm9yIGpCaW5hcnkgY29uc3VtcHRpb24uXG4gIC8vIE5COiBkYWxsaWFuY2UgZG9lc24ndCBzdXBwb3J0IGJpZyBlbmRpYW4gZm9ybWF0cy5cbiAgcmV0dXJuIG5ldyBqQmluYXJ5KGJ1ZmZlciwgYmJpLlRZUEVfU0VUKS5yZWFkKCdIZWFkZXInKTtcbn1cblxuLy8gVGhlIFwiQ0lSXCIgdHJlZSBjb250YWlucyBhIG1hcHBpbmcgZnJvbSBzZXF1ZW5jZSAtPiBibG9jayBvZmZzZXRzLlxuLy8gSXQgc3RhbmRzIGZvciBcIkNocm9tb3NvbWUgSW5kZXggUiB0cmVlXCJcbmZ1bmN0aW9uIHBhcnNlQ2lyVHJlZShidWZmZXIpIHtcbiAgcmV0dXJuIG5ldyBqQmluYXJ5KGJ1ZmZlciwgYmJpLlRZUEVfU0VUKS5yZWFkKCdDaXJUcmVlJyk7XG59XG5cbi8vIEV4dHJhY3QgYSBtYXAgZnJvbSBjb250aWcgbmFtZSAtLT4gY29udGlnIElEIGZyb20gdGhlIGJpZ0JlZCBoZWFkZXIuXG5mdW5jdGlvbiBnZW5lcmF0ZUNvbnRpZ01hcChoZWFkZXIpOiB7W2tleTpzdHJpbmddOiBudW1iZXJ9IHtcbiAgLy8gSnVzdCBhc3N1bWUgaXQncyBhIGZsYXQgXCJ0cmVlXCIgZm9yIG5vdy5cbiAgdmFyIG5vZGVzID0gaGVhZGVyLmNocm9tb3NvbWVUcmVlLm5vZGVzLmNvbnRlbnRzO1xuICBpZiAoIW5vZGVzKSB7XG4gICAgdGhyb3cgJ0ludmFsaWQgY2hyb21vc29tZSB0cmVlJztcbiAgfVxuICByZXR1cm4gXy5vYmplY3Qobm9kZXMubWFwKGZ1bmN0aW9uKHtpZCwga2V5fSkge1xuICAgIC8vIHJlbW92ZSB0cmFpbGluZyBudWxscyBmcm9tIHRoZSBrZXkgc3RyaW5nXG4gICAgcmV0dXJuIFtrZXkucmVwbGFjZSgvXFwwLiovLCAnJyksIGlkXTtcbiAgfSkpO1xufVxuXG4vLyBHZW5lcmF0ZSB0aGUgcmV2ZXJzZSBtYXAgZnJvbSBjb250aWcgSUQgLS0+IGNvbnRpZyBuYW1lLlxuZnVuY3Rpb24gcmV2ZXJzZUNvbnRpZ01hcChjb250aWdNYXA6IHtba2V5OnN0cmluZ106IG51bWJlcn0pOiBBcnJheTxzdHJpbmc+IHtcbiAgdmFyIGFyeSA9IFtdO1xuICBfLmVhY2goY29udGlnTWFwLCAoaW5kZXgsIG5hbWUpID0+IHtcbiAgICBhcnlbaW5kZXhdID0gbmFtZTtcbiAgfSk7XG4gIHJldHVybiBhcnk7XG59XG5cblxuZnVuY3Rpb24gZXh0cmFjdEZlYXR1cmVzRnJvbUJsb2NrKGJ1ZmZlcjogQXJyYXlCdWZmZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVJhbmdlOiBJbnRlcnZhbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jazogTGVhZkRhdGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNDb21wcmVzc2VkOiBib29sZWFuKTogQ2hySWRCZWRSb3dbXSB7XG4gIHZhciBibG9ja09mZnNldCA9IGJsb2NrLm9mZnNldCAtIGRhdGFSYW5nZS5zdGFydCxcbiAgICAgIGJsb2NrTGltaXQgPSBibG9ja09mZnNldCArIGJsb2NrLnNpemUsXG5cbiAgICAgIGJsb2NrQnVmZmVyID1cbiAgICAgICAgLy8gTk9URTogXCIrIDJcIiBza2lwcyBvdmVyIHR3byBieXRlcyBvZiBnemlwIGhlYWRlciAoMHg4YjFmKSwgd2hpY2ggcGFrby5pbmZsYXRlUmF3IHdpbGwgbm90IGhhbmRsZS5cbiAgICAgICAgYnVmZmVyLnNsaWNlKFxuICAgICAgICAgIGJsb2NrT2Zmc2V0ICsgKGlzQ29tcHJlc3NlZCA/IDIgOiAwKSxcbiAgICAgICAgICBibG9ja0xpbWl0XG4gICAgICAgICk7XG5cbiAgdmFyIGluZmxhdGVkQnVmZmVyID1cbiAgICBpc0NvbXByZXNzZWQgP1xuICAgICAgcGFrby5pbmZsYXRlUmF3KG5ldyBVaW50OEFycmF5KGJsb2NrQnVmZmVyKSkgOlxuICAgICAgYmxvY2tCdWZmZXI7XG5cbiAgdmFyIGpiID0gbmV3IGpCaW5hcnkoaW5mbGF0ZWRCdWZmZXIsIGJiaS5UWVBFX1NFVCk7XG4gIC8vIFRPRE86IHBhcnNlIG9ubHkgb25lIEJlZEVudHJ5IGF0IGEgdGltZSAmIHVzZSBhbiBpdGVyYXRvci5cbiAgcmV0dXJuIGpiLnJlYWQoJ0JlZEJsb2NrJyk7XG59XG5cblxudHlwZSBCZWRSb3cgPSB7XG4gIC8vIEhhbGYtb3BlbiBpbnRlcnZhbCBmb3IgdGhlIEJFRCByb3cuXG4gIGNvbnRpZzogc3RyaW5nO1xuICBzdGFydDogbnVtYmVyO1xuICBzdG9wOiBudW1iZXI7XG4gIC8vIFJlbWFpbmluZyBmaWVsZHMgaW4gdGhlIEJFRCByb3cgKHR5cGljYWxseSB0YWItZGVsaW1pdGVkKVxuICByZXN0OiBzdHJpbmc7XG59XG5cbnR5cGUgQ2hySWRCZWRSb3cgPSB7XG4gIGNocklkOiBudW1iZXI7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIHN0b3A6IG51bWJlcjsgIC8vIG5vdGU6IG5vdCBpbmNsdXNpdmVcbiAgcmVzdDogc3RyaW5nO1xufVxuXG4vLyBBbGwgZmVhdHVyZXMgZm91bmQgaW4gcmFuZ2UuXG50eXBlIEJlZEJsb2NrID0ge1xuICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPjtcbiAgcm93czogQmVkUm93W107XG59XG5cbnR5cGUgQ2hySWRCZWRCbG9jayA9IHtcbiAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj47XG4gIHJvd3M6IENocklkQmVkUm93W107XG59XG5cbi8vIEEgY29weSBvZiBMZWFmRGF0YSBmcm9tIGJiaS5qcy5cbnR5cGUgTGVhZkRhdGEgPSB7XG4gIHN0YXJ0Q2hyb21JeDogbnVtYmVyO1xuICBzdGFydEJhc2U6IG51bWJlcjtcbiAgZW5kQ2hyb21JeDogbnVtYmVyO1xuICBlbmRCYXNlOiBudW1iZXI7XG4gIG9mZnNldDogbnVtYmVyO1xuICBzaXplOiBudW1iZXI7XG59XG5cbi8vIFRoaXMgKGludGVybmFsKSB2ZXJzaW9uIG9mIHRoZSBCaWdCZWQgY2xhc3MgaGFzIG5vIHByb21pc2VzIGZvciBoZWFkZXJzLFxuLy8gb25seSBpbW1lZGlhdGUgZGF0YS4gVGhpcyBncmVhdGx5IHNpbXBsaWZpZXMgd3JpdGluZyBtZXRob2RzIG9uIGl0LlxuY2xhc3MgSW1tZWRpYXRlQmlnQmVkIHtcbiAgcmVtb3RlRmlsZTogUmVtb3RlRmlsZTtcbiAgaGVhZGVyOiBPYmplY3Q7XG4gIGNpclRyZWU6IE9iamVjdDtcbiAgY29udGlnTWFwOiB7W2tleTpzdHJpbmddOiBudW1iZXJ9O1xuICBjaHJJZFRvQ29udGlnOiBzdHJpbmdbXTtcblxuICBjb25zdHJ1Y3RvcihyZW1vdGVGaWxlLCBoZWFkZXIsIGNpclRyZWUsIGNvbnRpZ01hcDoge1trZXk6c3RyaW5nXTogbnVtYmVyfSkge1xuICAgIHRoaXMucmVtb3RlRmlsZSA9IHJlbW90ZUZpbGU7XG4gICAgdGhpcy5oZWFkZXIgPSBoZWFkZXI7XG4gICAgdGhpcy5jaXJUcmVlID0gY2lyVHJlZTtcbiAgICB0aGlzLmNvbnRpZ01hcCA9IGNvbnRpZ01hcDtcbiAgICB0aGlzLmNocklkVG9Db250aWcgPSByZXZlcnNlQ29udGlnTWFwKGNvbnRpZ01hcCk7XG4gIH1cblxuICAvLyBNYXAgY29udGlnIG5hbWUgdG8gY29udGlnIElELiBMZWFkaW5nIFwiY2hyXCIgaXMgb3B0aW9uYWwuIFRocm93cyBvbiBmYWlsdXJlLlxuICBnZXRDb250aWdJZChjb250aWc6IHN0cmluZyk6IG51bWJlciB7XG4gICAgaWYgKGNvbnRpZyBpbiB0aGlzLmNvbnRpZ01hcCkgcmV0dXJuIHRoaXMuY29udGlnTWFwW2NvbnRpZ107XG4gICAgdmFyIGNociA9ICdjaHInICsgY29udGlnO1xuICAgIGlmIChjaHIgaW4gdGhpcy5jb250aWdNYXApIHJldHVybiB0aGlzLmNvbnRpZ01hcFtjaHJdO1xuICAgIHRocm93IGBJbnZhbGlkIGNvbnRpZyAke2NvbnRpZ31gO1xuICB9XG5cbiAgZ2V0Q2hySWRJbnRlcnZhbChyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IENvbnRpZ0ludGVydmFsPG51bWJlcj4ge1xuICAgIHJldHVybiBuZXcgQ29udGlnSW50ZXJ2YWwoXG4gICAgICAgIHRoaXMuZ2V0Q29udGlnSWQocmFuZ2UuY29udGlnKSwgcmFuZ2Uuc3RhcnQoKSwgcmFuZ2Uuc3RvcCgpKTtcbiAgfVxuXG4gIGdldENvbnRpZ0ludGVydmFsKHJhbmdlOiBDb250aWdJbnRlcnZhbDxudW1iZXI+KTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiB7XG4gICAgcmV0dXJuIG5ldyBDb250aWdJbnRlcnZhbChcbiAgICAgICAgdGhpcy5jaHJJZFRvQ29udGlnW3JhbmdlLmNvbnRpZ10sIHJhbmdlLnN0YXJ0KCksIHJhbmdlLnN0b3AoKSk7XG4gIH1cblxuICAvLyBCZWQgZW50cmllcyBoYXZlIGEgY2hyb21vc29tZSBJRC4gVGhpcyBjb252ZXJ0cyB0aGF0IHRvIGEgY29udGlnIHN0cmluZy5cbiAgYXR0YWNoQ29udGlnVG9CZWRSb3dzKGJlZHM6IENocklkQmVkUm93W10pOiBCZWRSb3dbXSB7XG4gICAgcmV0dXJuIGJlZHMubWFwKGJlZCA9PiAoe1xuICAgICAgY29udGlnOiB0aGlzLmNocklkVG9Db250aWdbYmVkLmNocklkXSxcbiAgICAgIHN0YXJ0OiBiZWQuc3RhcnQsXG4gICAgICBzdG9wOiBiZWQuc3RvcCxcbiAgICAgIHJlc3Q6IGJlZC5yZXN0XG4gICAgfSkpO1xuICB9XG5cbiAgLy8gRmluZCBhbGwgYmxvY2tzIGNvbnRhaW5pbmcgZmVhdHVyZXMgd2hpY2ggaW50ZXJzZWN0IHdpdGggY29udGlnUmFuZ2UuXG4gIGZpbmRPdmVybGFwcGluZ0Jsb2NrcyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8bnVtYmVyPik6IEFycmF5PExlYWZEYXRhPiB7XG4gICAgLy8gRG8gYSByZWN1cnNpdmUgc2VhcmNoIHRocm91Z2ggdGhlIGluZGV4IHRyZWVcbiAgICB2YXIgbWF0Y2hpbmdCbG9ja3MgPSBbXTtcbiAgICB2YXIgdHVwbGVSYW5nZSA9IFtbcmFuZ2UuY29udGlnLCByYW5nZS5zdGFydCgpXSxcbiAgICAgICAgICAgICAgICAgICAgICBbcmFuZ2UuY29udGlnLCByYW5nZS5zdG9wKCldXTtcbiAgICB2YXIgZmluZCA9IGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgIGlmIChub2RlLmNvbnRlbnRzKSB7XG4gICAgICAgIG5vZGUuY29udGVudHMuZm9yRWFjaChmaW5kKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBub2RlUmFuZ2UgPVxuICAgICAgICAgIFtcbiAgICAgICAgICAgIFtub2RlLnN0YXJ0Q2hyb21JeCwgbm9kZS5zdGFydEJhc2VdLFxuICAgICAgICAgICAgW25vZGUuZW5kQ2hyb21JeCwgbm9kZS5lbmRCYXNlXVxuICAgICAgICAgIF07XG5cbiAgICAgICAgaWYgKHV0aWxzLnR1cGxlUmFuZ2VPdmVybGFwcyhub2RlUmFuZ2UsIHR1cGxlUmFuZ2UpKSB7XG4gICAgICAgICAgbWF0Y2hpbmdCbG9ja3MucHVzaChub2RlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgZmluZCh0aGlzLmNpclRyZWUuYmxvY2tzKTtcblxuICAgIHJldHVybiBtYXRjaGluZ0Jsb2NrcztcbiAgfVxuXG4gIC8vIEludGVybmFsIGZ1bmN0aW9uIGZvciBmZXRjaGluZyBmZWF0dXJlcyBieSBibG9jay5cbiAgZmV0Y2hGZWF0dXJlc0J5QmxvY2socmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj4pOiBRLlByb21pc2U8Q2hySWRCZWRCbG9ja1tdPiB7XG4gICAgdmFyIGJsb2NrcyA9IHRoaXMuZmluZE92ZXJsYXBwaW5nQmxvY2tzKHJhbmdlKTtcbiAgICBpZiAoYmxvY2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFEud2hlbihbXSk7XG4gICAgfVxuXG4gICAgLy8gRmluZCB0aGUgcmFuZ2UgaW4gdGhlIGZpbGUgd2hpY2ggY29udGFpbnMgYWxsIHJlbGV2YW50IGJsb2Nrcy5cbiAgICAvLyBJbiB0aGVvcnkgdGhlcmUgY291bGQgYmUgZ2FwcyBiZXR3ZWVuIGJsb2NrcywgYnV0IGl0J3MgaGFyZCB0byBzZWUgaG93LlxuICAgIHZhciBieXRlUmFuZ2UgPSBJbnRlcnZhbC5ib3VuZGluZ0ludGVydmFsKFxuICAgICAgICBibG9ja3MubWFwKG4gPT4gbmV3IEludGVydmFsKCtuLm9mZnNldCwgbi5vZmZzZXQrbi5zaXplKSkpO1xuXG4gICAgdmFyIGlzQ29tcHJlc3NlZCA9ICh0aGlzLmhlYWRlci51bmNvbXByZXNzQnVmU2l6ZSA+IDApO1xuICAgIHJldHVybiB0aGlzLnJlbW90ZUZpbGUuZ2V0Qnl0ZXMoYnl0ZVJhbmdlLnN0YXJ0LCBieXRlUmFuZ2UubGVuZ3RoKCkpXG4gICAgICAgIC50aGVuKGJ1ZmZlciA9PiB7XG4gICAgICAgICAgcmV0dXJuIGJsb2Nrcy5tYXAoYmxvY2sgPT4ge1xuICAgICAgICAgICAgdmFyIGJlZHMgPSBleHRyYWN0RmVhdHVyZXNGcm9tQmxvY2soYnVmZmVyLCBieXRlUmFuZ2UsIGJsb2NrLCBpc0NvbXByZXNzZWQpO1xuICAgICAgICAgICAgaWYgKGJsb2NrLnN0YXJ0Q2hyb21JeCAhPSBibG9jay5lbmRDaHJvbUl4KSB7XG4gICAgICAgICAgICAgIHRocm93IGBDYW4ndCBoYW5kbGUgYmxvY2tzIHdoaWNoIHNwYW4gY2hyb21vc29tZXMhYDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgcmFuZ2U6IG5ldyBDb250aWdJbnRlcnZhbChibG9jay5zdGFydENocm9tSXgsIGJsb2NrLnN0YXJ0QmFzZSwgYmxvY2suZW5kQmFzZSksXG4gICAgICAgICAgICAgIHJvd3M6IGJlZHNcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICB9XG5cbiAgLy8gVE9ETzogbWVyZ2UgdGhpcyBpbnRvIGdldEZlYXR1cmVzSW5SYW5nZVxuICAvLyBGZXRjaCB0aGUgcmVsZXZhbnQgYmxvY2tzIGZyb20gdGhlIGJpZ0JlZCBmaWxlIGFuZCBleHRyYWN0IHRoZSBmZWF0dXJlc1xuICAvLyB3aGljaCBvdmVybGFwIHRoZSBnaXZlbiByYW5nZS5cbiAgZmV0Y2hGZWF0dXJlcyhjb250aWdSYW5nZTogQ29udGlnSW50ZXJ2YWw8bnVtYmVyPik6IFEuUHJvbWlzZTxCZWRSb3dbXT4ge1xuICAgIHJldHVybiB0aGlzLmZldGNoRmVhdHVyZXNCeUJsb2NrKGNvbnRpZ1JhbmdlKVxuICAgICAgICAudGhlbihiZWRzQnlCbG9jayA9PiB7XG4gICAgICAgICAgdmFyIGJlZHMgPSBfLmZsYXR0ZW4oYmVkc0J5QmxvY2subWFwKGIgPT4gYi5yb3dzKSk7XG5cbiAgICAgICAgICBiZWRzID0gYmVkcy5maWx0ZXIoZnVuY3Rpb24oYmVkKSB7XG4gICAgICAgICAgICAvLyBOb3RlOiBCRUQgaW50ZXJ2YWxzIGFyZSBleHBsaWNpdGx5IGhhbGYtb3Blbi5cbiAgICAgICAgICAgIC8vIFRoZSBcIi0gMVwiIGNvbnZlcnRzIHRoZW0gdG8gY2xvc2VkIGludGVydmFscyBmb3IgQ29udGlnSW50ZXJ2YWwuXG4gICAgICAgICAgICB2YXIgYmVkSW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwoYmVkLmNocklkLCBiZWQuc3RhcnQsIGJlZC5zdG9wIC0gMSk7XG4gICAgICAgICAgICByZXR1cm4gY29udGlnUmFuZ2UuaW50ZXJzZWN0cyhiZWRJbnRlcnZhbCk7XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICByZXR1cm4gdGhpcy5hdHRhY2hDb250aWdUb0JlZFJvd3MoYmVkcyk7XG4gICAgICAgIH0pO1xuICB9XG5cbiAgZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogUS5Qcm9taXNlPEJlZFJvd1tdPiB7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hGZWF0dXJlcyh0aGlzLmdldENocklkSW50ZXJ2YWwocmFuZ2UpKTtcbiAgfVxuXG4gIGdldEZlYXR1cmVCbG9ja3NPdmVybGFwcGluZyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IFEuUHJvbWlzZTxCZWRCbG9ja1tdPiB7XG4gICAgdmFyIGluZGV4UmFuZ2UgPSB0aGlzLmdldENocklkSW50ZXJ2YWwocmFuZ2UpO1xuICAgIHJldHVybiB0aGlzLmZldGNoRmVhdHVyZXNCeUJsb2NrKGluZGV4UmFuZ2UpXG4gICAgICAgIC50aGVuKGZlYXR1cmVCbG9ja3MgPT4ge1xuICAgICAgICAgIC8vIENvbnZlcnQgY2hySWRzIHRvIGNvbnRpZyBzdHJpbmdzLlxuICAgICAgICAgIHJldHVybiBmZWF0dXJlQmxvY2tzLm1hcChmYiA9PiAoe1xuICAgICAgICAgICAgcmFuZ2U6IHRoaXMuZ2V0Q29udGlnSW50ZXJ2YWwoZmIucmFuZ2UpLFxuICAgICAgICAgICAgcm93czogdGhpcy5hdHRhY2hDb250aWdUb0JlZFJvd3MoZmIucm93cylcbiAgICAgICAgICB9KSk7XG4gICAgICAgIH0pO1xuICB9XG5cbn1cblxuXG5jbGFzcyBCaWdCZWQge1xuICByZW1vdGVGaWxlOiBSZW1vdGVGaWxlO1xuICBoZWFkZXI6IFEuUHJvbWlzZTxhbnk+O1xuICBjaXJUcmVlOiBRLlByb21pc2U8YW55PjtcbiAgY29udGlnTWFwOiBRLlByb21pc2U8e1trZXk6c3RyaW5nXTogbnVtYmVyfT47XG4gIGltbWVkaWF0ZTogUS5Qcm9taXNlPEltbWVkaWF0ZUJpZ0JlZD47XG5cbiAgLyoqXG4gICAqIFByZXBhcmUgdG8gcmVxdWVzdCBmZWF0dXJlcyBmcm9tIGEgcmVtb3RlIGJpZ0JlZCBmaWxlLlxuICAgKiBUaGUgcmVtb3RlIHNvdXJjZSBtdXN0IHN1cHBvcnQgSFRUUCBSYW5nZSBoZWFkZXJzLlxuICAgKiBUaGlzIHdpbGwga2ljayBvZmYgc2V2ZXJhbCBhc3luYyByZXF1ZXN0cyBmb3IgcG9ydGlvbnMgb2YgdGhlIGZpbGUuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih1cmw6IHN0cmluZykge1xuICAgIHRoaXMucmVtb3RlRmlsZSA9IG5ldyBSZW1vdGVGaWxlKHVybCk7XG4gICAgdGhpcy5oZWFkZXIgPSB0aGlzLnJlbW90ZUZpbGUuZ2V0Qnl0ZXMoMCwgNjQqMTAyNCkudGhlbihwYXJzZUhlYWRlcik7XG4gICAgdGhpcy5jb250aWdNYXAgPSB0aGlzLmhlYWRlci50aGVuKGdlbmVyYXRlQ29udGlnTWFwKTtcblxuICAgIC8vIE5leHQ6IGZldGNoIHRoZSBibG9jayBpbmRleCBhbmQgcGFyc2Ugb3V0IHRoZSBcIkNJUlwiIHRyZWUuXG4gICAgdGhpcy5jaXJUcmVlID0gdGhpcy5oZWFkZXIudGhlbihoZWFkZXIgPT4ge1xuICAgICAgLy8gem9vbUhlYWRlcnNbMF0uZGF0YU9mZnNldCBpcyB0aGUgbmV4dCBlbnRyeSBpbiB0aGUgZmlsZS5cbiAgICAgIC8vIFdlIGFzc3VtZSB0aGUgXCJjaXJUcmVlXCIgc2VjdGlvbiBnb2VzIGFsbCB0aGUgd2F5IHRvIHRoYXQgcG9pbnQuXG4gICAgICAvLyBMYWNraW5nIHpvb20gaGVhZGVycywgYXNzdW1lIGl0J3MgNGsuXG4gICAgICAvLyBUT0RPOiBmZXRjaCBtb3JlIHRoYW4gNGsgaWYgbmVjZXNzYXJ5XG4gICAgICB2YXIgc3RhcnQgPSBoZWFkZXIudW56b29tZWRJbmRleE9mZnNldCxcbiAgICAgICAgICB6b29tSGVhZGVyID0gaGVhZGVyLnpvb21IZWFkZXJzWzBdLFxuICAgICAgICAgIGxlbmd0aCA9IHpvb21IZWFkZXIgPyB6b29tSGVhZGVyLmRhdGFPZmZzZXQgLSBzdGFydCA6IDQwOTY7XG4gICAgICByZXR1cm4gdGhpcy5yZW1vdGVGaWxlLmdldEJ5dGVzKHN0YXJ0LCBsZW5ndGgpLnRoZW4ocGFyc2VDaXJUcmVlKTtcbiAgICB9KTtcblxuICAgIHRoaXMuaW1tZWRpYXRlID0gUS5hbGwoW3RoaXMuaGVhZGVyLCB0aGlzLmNpclRyZWUsIHRoaXMuY29udGlnTWFwXSlcbiAgICAgICAgLnRoZW4oKFtoZWFkZXIsIGNpclRyZWUsIGNvbnRpZ01hcF0pID0+IHtcbiAgICAgICAgICB2YXIgY206IHtba2V5OnN0cmluZ106IG51bWJlcn0gPSBjb250aWdNYXA7XG4gICAgICAgICAgcmV0dXJuIG5ldyBJbW1lZGlhdGVCaWdCZWQodGhpcy5yZW1vdGVGaWxlLCBoZWFkZXIsIGNpclRyZWUsIGNtKTtcbiAgICAgICAgfSk7XG5cbiAgICAvLyBCdWJibGUgdXAgZXJyb3JzXG4gICAgdGhpcy5pbW1lZGlhdGUuZG9uZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYWxsIEJFRCBlbnRyaWVzIHdoaWNoIG92ZXJsYXAgdGhlIHJhbmdlLlxuICAgKiBOb3RlOiB3aGlsZSB0aGUgcmVxdWVzdGVkIHJhbmdlIGlzIGluY2x1c2l2ZSBvbiBib3RoIGVuZHMsIHJhbmdlcyBpblxuICAgKiBiaWdCZWQgZm9ybWF0IGZpbGVzIGFyZSBoYWxmLW9wZW4gKGluY2x1c2l2ZSBhdCB0aGUgc3RhcnQsIGV4Y2x1c2l2ZSBhdFxuICAgKiB0aGUgZW5kKS5cbiAgICovXG4gIGdldEZlYXR1cmVzSW5SYW5nZShjb250aWc6IHN0cmluZywgc3RhcnQ6IG51bWJlciwgc3RvcDogbnVtYmVyKTogUS5Qcm9taXNlPEFycmF5PEJlZFJvdz4+IHtcbiAgICB2YXIgcmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwoY29udGlnLCBzdGFydCwgc3RvcCk7XG4gICAgcmV0dXJuIHRoaXMuaW1tZWRpYXRlLnRoZW4oaW0gPT4gaW0uZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlKSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbGwgZmVhdHVyZXMgaW4gYmxvY2tzIG92ZXJsYXBwaW5nIHRoZSBnaXZlbiByYW5nZS5cbiAgICogQmVjYXVzZSB0aGVzZSBmZWF0dXJlcyBtdXN0IGFsbCBiZSBmZXRjaGVkLCBkZWNvbXByZXNzZWQgYW5kIHBhcnNlZFxuICAgKiBhbnl3YXksIHRoaXMgY2FuIGJlIGhlbHBmdWwgZm9yIHVwc3RyZWFtIGNhY2hpbmcuXG4gICAqL1xuICBnZXRGZWF0dXJlQmxvY2tzT3ZlcmxhcHBpbmcocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBRLlByb21pc2U8QXJyYXk8QmVkQmxvY2s+PiB7XG4gICAgcmV0dXJuIHRoaXMuaW1tZWRpYXRlLnRoZW4oaW0gPT4gaW0uZ2V0RmVhdHVyZUJsb2Nrc092ZXJsYXBwaW5nKHJhbmdlKSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBCaWdCZWQ7XG4iLCIvKipcbiAqIFRoaXMgY2xhc3MgcGFyc2VzIGFuZCByZXByZXNlbnRzIGEgc2luZ2xlIHJlYWQgaW4gYSBTQU0vQkFNIGZpbGUuXG4gKlxuICogVGhpcyBpcyB1c2VkIGluc3RlYWQgb2YgcGFyc2luZyBkaXJlY3RseSB2aWEgakJpbmFyeSBpbiBvcmRlciB0bzpcbiAqIC0gTWFrZSB0aGUgcGFyc2luZyBsYXp5IChmb3Igc2lnbmlmaWNhbnQgcGVyZm9ybWFuY2Ugd2lucylcbiAqIC0gTWFrZSB0aGUgcmVzdWx0aW5nIG9iamVjdCBtb3JlIHByZWNpc2VseSB0eXBlZC5cbiAqXG4gKiBQYXJzaW5nIHJlYWRzIHVzaW5nIFNhbVJlYWQgaXMgfjItM3ggZmFzdGVyIHRoYW4gdXNpbmcgakJpbmFyeSBhbmRcbiAqIFRoaW5BbGlnbm1lbnQgZGlyZWN0bHkuXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSBWaXJ0dWFsT2Zmc2V0IGZyb20gJy4vVmlydHVhbE9mZnNldCc7XG5pbXBvcnQgdHlwZSB7U3RyYW5kLCBDaWdhck9wLCBNYXRlUHJvcGVydGllc30gZnJvbSAnLi4vQWxpZ25tZW50JztcblxuaW1wb3J0IGpEYXRhVmlldyBmcm9tICdqZGF0YXZpZXcnO1xuaW1wb3J0IGpCaW5hcnkgZnJvbSAnamJpbmFyeSc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBiYW1UeXBlcyBmcm9tICcuL2Zvcm1hdHMvYmFtVHlwZXMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcblxuLy8gVE9ETzogTWFrZSBtb3JlIGV4dGVuc2l2ZSB1c2Ugb2YgdGhlIGpCaW5hcnkgc3BlY3MuXG5cblxudmFyIENJR0FSX09QUyA9IFsnTScsICdJJywgJ0QnLCAnTicsICdTJywgJ0gnLCAnUCcsICc9JywgJ1gnXTtcblxudmFyIFNFUVVFTkNFX1ZBTFVFUyA9IFsnPScsICdBJywgJ0MnLCAnTScsICdHJywgJ1InLCAnUycsICdWJyxcbiAgICAgICAgICAgICAgICAgICAgICAgJ1QnLCAnVycsICdZJywgJ0gnLCAnSycsICdEJywgJ0InLCAnTiddO1xuXG5cbmZ1bmN0aW9uIHN0cmFuZEZsYWdUb1N0cmluZyhyZXZlcnNlU3RyYW5kOiBudW1iZXIpOiBTdHJhbmQge1xuICByZXR1cm4gcmV2ZXJzZVN0cmFuZCA/ICctJyA6ICcrJztcbn1cblxuXG5jbGFzcyBTYW1SZWFkIC8qIGltcGxlbWVudHMgQWxpZ25tZW50ICovIHtcbiAgYnVmZmVyOiBBcnJheUJ1ZmZlcjtcbiAgb2Zmc2V0OiBWaXJ0dWFsT2Zmc2V0O1xuXG4gIHBvczogbnVtYmVyO1xuICByZWZJRDogbnVtYmVyO1xuICByZWY6IHN0cmluZztcbiAgbF9zZXE6IG51bWJlcjtcbiAgbmFtZTogc3RyaW5nO1xuICBjaWdhck9wczogQ2lnYXJPcFtdO1xuXG4gIC8vIGNhY2hlZCB2YWx1ZXNcbiAgX2Z1bGw6ID9PYmplY3Q7XG4gIF9zZXE6ID9zdHJpbmc7XG4gIF9pbnRlcnZhbDogP0NvbnRpZ0ludGVydmFsPHN0cmluZz47XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBidWZmZXIgY29udGFpbnMgdGhlIHJhdyBieXRlcyBvZiB0aGUgc2VyaWFsaXplZCBCQU0gcmVhZC4gSXQgbXVzdFxuICAgKiAgICAgY29udGFpbiBhdCBsZWFzdCBvbmUgZnVsbCByZWFkIChidXQgbWF5IGNvbnRhaW4gbW9yZSkuXG4gICAqIEBwYXJhbSBvZmZzZXQgcmVjb3JkcyB3aGVyZSB0aGlzIGFsaWdubWVudCBpcyBsb2NhdGVkIGluIHRoZSBCQU0gZmlsZS4gSXQnc1xuICAgKiAgICAgdXNlZnVsIGFzIGEgdW5pcXVlIElEIGZvciBhbGlnbm1lbnRzLlxuICAgKiBAcGFyYW0gcmVmIGlzIHRoZSBodW1hbi1yZWFkYWJsZSBuYW1lIG9mIHRoZSByZWZlcmVuY2UvY29udGlnICh0aGUgYmluYXJ5XG4gICAqICAgICBlbmNvZGluZyBvbmx5IGNvbnRhaW5zIGFuIElEKS5cbiAgICovXG4gIGNvbnN0cnVjdG9yKGJ1ZmZlcjogQXJyYXlCdWZmZXIsIG9mZnNldDogVmlydHVhbE9mZnNldCwgcmVmOiBzdHJpbmcpIHtcbiAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICB0aGlzLm9mZnNldCA9IG9mZnNldDtcblxuICAgIC8vIEdvIGFoZWFkIGFuZCBwYXJzZSBhIGZldyBmaWVsZHMgaW1tZWRpYXRlbHkuXG4gICAgdmFyIGp2ID0gdGhpcy5fZ2V0SkRhdGFWaWV3KCk7XG4gICAgdGhpcy5yZWZJRCA9IGp2LmdldEludDMyKDApO1xuICAgIHRoaXMucmVmID0gcmVmO1xuICAgIHRoaXMucG9zID0ganYuZ2V0SW50MzIoNCk7XG4gICAgdGhpcy5sX3NlcSA9IGp2LmdldEludDMyKDE2KTtcbiAgICB0aGlzLmNpZ2FyT3BzID0gdGhpcy5fZ2V0Q2lnYXJPcHMoKTtcbiAgICB0aGlzLm5hbWUgPSB0aGlzLl9nZXROYW1lKCk7XG4gIH1cblxuICB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHZhciBzdG9wID0gdGhpcy5wb3MgKyB0aGlzLmxfc2VxO1xuICAgIHJldHVybiBgJHt0aGlzLnJlZn06JHsxK3RoaXMucG9zfS0ke3N0b3B9YDtcbiAgfVxuXG4gIF9nZXRKRGF0YVZpZXcoKTogakRhdGFWaWV3IHtcbiAgICB2YXIgYiA9IHRoaXMuYnVmZmVyO1xuICAgIHJldHVybiBuZXcgakRhdGFWaWV3KGIsIDAsIGIuYnl0ZUxlbmd0aCwgdHJ1ZSAvKiBsaXR0bGUgZW5kaWFuICovKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGlkZW50aWZpZXIgd2hpY2ggaXMgdW5pcXVlIHdpdGhpbiB0aGUgQkFNIGZpbGUuXG4gICAqL1xuICBnZXRLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5vZmZzZXQudG9TdHJpbmcoKTtcbiAgfVxuXG4gIF9nZXROYW1lKCk6IHN0cmluZyB7XG4gICAgdmFyIGp2ID0gdGhpcy5fZ2V0SkRhdGFWaWV3KCk7XG4gICAgdmFyIGxfcmVhZF9uYW1lID0ganYuZ2V0VWludDgoOCk7XG4gICAganYuc2VlaygzMik7ICAvLyB0aGUgcmVhZC1uYW1lIHN0YXJ0cyBhdCBieXRlIDMyXG4gICAgcmV0dXJuIGp2LmdldFN0cmluZyhsX3JlYWRfbmFtZSAtIDEpOyAgLy8gaWdub3JlIG51bGwtdGVybWluYXRvclxuICB9XG5cbiAgZ2V0RmxhZygpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9nZXRKRGF0YVZpZXcoKS5nZXRVaW50MTYoMTQpO1xuICB9XG5cbiAgZ2V0SW5mZXJyZWRJbnNlcnRTaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2dldEpEYXRhVmlldygpLmdldFVpbnQxNigyOCk7XG4gIH1cblxuICBnZXRTdHJhbmQoKTogU3RyYW5kIHtcbiAgICByZXR1cm4gc3RyYW5kRmxhZ1RvU3RyaW5nKHRoaXMuZ2V0RmxhZygpICYgYmFtVHlwZXMuRmxhZ3MuUkVBRF9TVFJBTkQpO1xuICB9XG5cbiAgLy8gVE9ETzogZ2V0IHJpZCBvZiB0aGlzOyBtb3ZlIGFsbCBtZXRob2RzIGludG8gU2FtUmVhZC5cbiAgZ2V0RnVsbCgpOiBPYmplY3Qge1xuICAgIGlmICh0aGlzLl9mdWxsKSByZXR1cm4gdGhpcy5fZnVsbDtcbiAgICB2YXIgamIgPSBuZXcgakJpbmFyeSh0aGlzLmJ1ZmZlciwgYmFtVHlwZXMuVFlQRV9TRVQpO1xuICAgIHZhciBmdWxsID0gamIucmVhZChiYW1UeXBlcy5UaGlja0FsaWdubWVudCwgMCk7XG4gICAgdGhpcy5fZnVsbCA9IGZ1bGw7XG4gICAgcmV0dXJuIGZ1bGw7XG4gIH1cblxuICBnZXRJbnRlcnZhbCgpOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+IHtcbiAgICBpZiAodGhpcy5faW50ZXJ2YWwpIHJldHVybiB0aGlzLl9pbnRlcnZhbDsgIC8vIHVzZSB0aGUgY2FjaGVcbiAgICB2YXIgaW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwodGhpcy5yZWYsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcyArIHRoaXMuZ2V0UmVmZXJlbmNlTGVuZ3RoKCkgLSAxKTtcbiAgICByZXR1cm4gaW50ZXJ2YWw7XG4gIH1cblxuICBpbnRlcnNlY3RzKGludGVydmFsOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGludGVydmFsLmludGVyc2VjdHModGhpcy5nZXRJbnRlcnZhbCgpKTtcbiAgfVxuXG4gIF9nZXRDaWdhck9wcygpOiBDaWdhck9wW10ge1xuICAgIHZhciBqdiA9IHRoaXMuX2dldEpEYXRhVmlldygpLFxuICAgICAgICBsX3JlYWRfbmFtZSA9IGp2LmdldFVpbnQ4KDgpLFxuICAgICAgICBuX2NpZ2FyX29wID0ganYuZ2V0VWludDE2KDEyKSxcbiAgICAgICAgcG9zID0gMzIgKyBsX3JlYWRfbmFtZSxcbiAgICAgICAgY2lnYXJfb3BzID0gbmV3IEFycmF5KG5fY2lnYXJfb3ApO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbl9jaWdhcl9vcDsgaSsrKSB7XG4gICAgICB2YXIgdiA9IGp2LmdldFVpbnQzMihwb3MgKyA0ICogaSk7XG4gICAgICBjaWdhcl9vcHNbaV0gPSB7XG4gICAgICAgIG9wOiBDSUdBUl9PUFNbdiAmIDB4Zl0sXG4gICAgICAgIGxlbmd0aDogdiA+PiA0XG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gY2lnYXJfb3BzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgcGVyLWJhc2UgcXVhbGl0eSBzY29yZXMgZnJvbSAwLTI1NS5cbiAgICovXG4gIGdldFF1YWxpdHlTY29yZXMoKTogbnVtYmVyW10ge1xuICAgIHZhciBqdiA9IHRoaXMuX2dldEpEYXRhVmlldygpLFxuICAgICAgICBsX3JlYWRfbmFtZSA9IGp2LmdldFVpbnQ4KDgpLFxuICAgICAgICBuX2NpZ2FyX29wID0ganYuZ2V0VWludDE2KDEyKSxcbiAgICAgICAgbF9zZXEgPSBqdi5nZXRJbnQzMigxNiksXG4gICAgICAgIHBvcyA9IDMyICsgbF9yZWFkX25hbWUgKyA0ICogbl9jaWdhcl9vcCArIE1hdGguY2VpbChsX3NlcSAvIDIpO1xuICAgIHJldHVybiBqdi5nZXRCeXRlcyhsX3NlcSwgcG9zLCB0cnVlIC8qIGxpdHRsZSBlbmRpYW4gKi8sIHRydWUgLyogdG9BcnJheSAqLyk7XG4gIH1cblxuICBnZXRDaWdhclN0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiBtYWtlQ2lnYXJTdHJpbmcodGhpcy5nZXRGdWxsKCkuY2lnYXIpO1xuICB9XG5cbiAgZ2V0UXVhbFBocmVkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIG1ha2VBc2NpaVBocmVkKHRoaXMuZ2V0UXVhbGl0eVNjb3JlcygpKTtcbiAgfVxuXG4gIGdldFNlcXVlbmNlKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuX3NlcSkgcmV0dXJuIHRoaXMuX3NlcTtcbiAgICB2YXIganYgPSB0aGlzLl9nZXRKRGF0YVZpZXcoKSxcbiAgICAgICAgbF9yZWFkX25hbWUgPSBqdi5nZXRVaW50OCg4KSxcbiAgICAgICAgbl9jaWdhcl9vcCA9IGp2LmdldFVpbnQxNigxMiksXG4gICAgICAgIGxfc2VxID0ganYuZ2V0SW50MzIoMTYpLFxuICAgICAgICBwb3MgPSAzMiArIGxfcmVhZF9uYW1lICsgNCAqIG5fY2lnYXJfb3AsXG4gICAgICAgIGJhc2VQYWlycyA9IG5ldyBBcnJheShsX3NlcSksXG4gICAgICAgIG51bUJ5dGVzID0gTWF0aC5jZWlsKGxfc2VxIC8gMik7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bUJ5dGVzOyBpKyspIHtcbiAgICAgIHZhciBiID0ganYuZ2V0VWludDgocG9zICsgaSk7XG4gICAgICBiYXNlUGFpcnNbMiAqIGldID0gU0VRVUVOQ0VfVkFMVUVTW2IgPj4gNF07XG4gICAgICBpZiAoMiAqIGkgKyAxIDwgbF9zZXEpIHtcbiAgICAgICAgYmFzZVBhaXJzWzIgKiBpICsgMV0gPSBTRVFVRU5DRV9WQUxVRVNbYiAmIDB4Zl07XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHNlcSA9IGJhc2VQYWlycy5qb2luKCcnKTtcbiAgICB0aGlzLl9zZXEgPSBzZXE7XG4gICAgcmV0dXJuIHNlcTtcbiAgfVxuXG4gIC8vIFJldHVybnMgdGhlIGxlbmd0aCBvZiB0aGUgYWxpZ25tZW50IGZyb20gZmlyc3QgYWxpZ25lZCByZWFkIHRvIGxhc3QgYWxpZ25lZCByZWFkLlxuICBnZXRSZWZlcmVuY2VMZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gU2FtUmVhZC5yZWZlcmVuY2VMZW5ndGhGcm9tT3BzKHRoaXMuY2lnYXJPcHMpO1xuICB9XG5cbiAgZ2V0TWF0ZVByb3BlcnRpZXMoKTogP01hdGVQcm9wZXJ0aWVzIHtcbiAgICB2YXIganYgPSB0aGlzLl9nZXRKRGF0YVZpZXcoKSxcbiAgICAgICAgZmxhZyA9IGp2LmdldFVpbnQxNigxNCk7XG4gICAgaWYgKCEoZmxhZyAmIGJhbVR5cGVzLkZsYWdzLlJFQURfUEFJUkVEKSkgcmV0dXJuIG51bGw7XG5cbiAgICB2YXIgbmV4dFJlZklkID0ganYuZ2V0SW50MzIoMjApLFxuICAgICAgICBuZXh0UG9zID0ganYuZ2V0SW50MzIoMjQpLFxuICAgICAgICBuZXh0U3RyYW5kID0gc3RyYW5kRmxhZ1RvU3RyaW5nKGZsYWcgJiBiYW1UeXBlcy5GbGFncy5NQVRFX1NUUkFORCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgLy8gSWYgdGhlIG1hdGUgaXMgb24gYW5vdGhlciBjb250aWcsIHRoZXJlJ3Mgbm8gZWFzeSB3YXkgdG8gZ2V0IGl0cyBzdHJpbmcgbmFtZS5cbiAgICAgIHJlZjogbmV4dFJlZklkID09IHRoaXMucmVmSUQgPyB0aGlzLnJlZiA6IG51bGwsXG4gICAgICBwb3M6IG5leHRQb3MsXG4gICAgICBzdHJhbmQ6IG5leHRTdHJhbmRcbiAgICB9O1xuICB9XG5cbiAgZGVidWdTdHJpbmcoKTogc3RyaW5nIHtcbiAgICB2YXIgZiA9IHRoaXMuZ2V0RnVsbCgpO1xuXG4gICAgcmV0dXJuIGBOYW1lOiAke3RoaXMubmFtZX1cbkZMQUc6ICR7dGhpcy5nZXRGbGFnKCl9XG5Qb3NpdGlvbjogJHt0aGlzLmdldEludGVydmFsKCl9XG5DSUdBUjogJHt0aGlzLmdldENpZ2FyU3RyaW5nKCl9XG5TZXF1ZW5jZTogJHtmLnNlcX1cblF1YWxpdHk6ICAke3RoaXMuZ2V0UXVhbFBocmVkKCl9XG5UYWdzOiAke0pTT04uc3RyaW5naWZ5KGYuYXV4aWxpYXJ5LCBudWxsLCAnICAnKX1cbiAgICBgO1xuICB9XG5cbiAgc3RhdGljIHJlZmVyZW5jZUxlbmd0aEZyb21PcHMob3BzOiBDaWdhck9wW10pOiBudW1iZXIge1xuICAgIHZhciByZWZMZW5ndGggPSAwO1xuICAgIG9wcy5mb3JFYWNoKCh7b3AsIGxlbmd0aH0pID0+IHtcbiAgICAgIHN3aXRjaCAob3ApIHtcbiAgICAgICAgY2FzZSAnTSc6XG4gICAgICAgIGNhc2UgJ0QnOlxuICAgICAgICBjYXNlICdOJzpcbiAgICAgICAgY2FzZSAnPSc6XG4gICAgICAgIGNhc2UgJ1gnOlxuICAgICAgICAgIHJlZkxlbmd0aCArPSBsZW5ndGg7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlZkxlbmd0aDtcbiAgfVxufVxuXG4vLyBDb252ZXJ0IGEgc3RydWN0dXJlZCBDaWdhciBvYmplY3QgaW50byB0aGUgc3RyaW5nIGZvcm1hdCB3ZSBhbGwgbG92ZS5cbmZ1bmN0aW9uIG1ha2VDaWdhclN0cmluZyhjaWdhck9wczogQXJyYXk8e29wOnN0cmluZzsgbGVuZ3RoOm51bWJlcn0+KSB7XG4gIHJldHVybiBjaWdhck9wcy5tYXAoKHtvcCwgbGVuZ3RofSkgPT4gbGVuZ3RoICsgb3ApLmpvaW4oJycpO1xufVxuXG4vLyBDb252ZXJ0IGFuIGFycmF5IG9mIFBocmVkIHNjb3JlcyB0byBhIHByaW50YWJsZSBzdHJpbmcuXG5mdW5jdGlvbiBtYWtlQXNjaWlQaHJlZChxdWFsaXRpZXM6IG51bWJlcltdKTogc3RyaW5nIHtcbiAgaWYgKHF1YWxpdGllcy5sZW5ndGggPT09IDApIHJldHVybiAnJztcbiAgaWYgKF8uZXZlcnkocXVhbGl0aWVzLCB4ID0+IHggPT0gMjU1KSkgcmV0dXJuICcqJztcbiAgcmV0dXJuIHF1YWxpdGllcy5tYXAocSA9PiBTdHJpbmcuZnJvbUNoYXJDb2RlKDMzICsgcSkpLmpvaW4oJycpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFNhbVJlYWQ7XG4iLCIvKipcbiAqIFRoaXMgbW9kdWxlIGRlZmluZXMgYSBwYXJzZXIgZm9yIHRoZSAyYml0IGZpbGUgZm9ybWF0LlxuICogU2VlIGh0dHA6Ly9nZW5vbWUudWNzYy5lZHUvRkFRL0ZBUWZvcm1hdC5odG1sI2Zvcm1hdDdcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuLyogZXhwb3J0ZWQgUSwgQ29udGlnSW50ZXJ2YWwsIFJlbW90ZVJlcXVlc3QgKi9cbmltcG9ydCBRIGZyb20gJ3EnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCB7UmVtb3RlUmVxdWVzdH0gZnJvbSAnLi4vUmVtb3RlUmVxdWVzdCc7XG5cbmV4cG9ydCB0eXBlIFNlcXVlbmNlUmVjb3JkID0ge1xuICBuYW1lOiBzdHJpbmc7XG4gIGxlbmd0aDogbnVtYmVyO1xufVxuXG5jbGFzcyBTZXF1ZW5jZSB7XG4gIHJlbW90ZVJlcXVlc3Q6IFJlbW90ZVJlcXVlc3Q7XG4gIGNvbnRpZ0xpc3Q6IFNlcXVlbmNlUmVjb3JkW107XG5cbiAgY29uc3RydWN0b3IocmVtb3RlUmVxdWVzdDogUmVtb3RlUmVxdWVzdCwgY29udGlnTGlzdDogU2VxdWVuY2VSZWNvcmRbXSkge1xuICAgIHRoaXMucmVtb3RlUmVxdWVzdCA9IHJlbW90ZVJlcXVlc3Q7XG4gICAgdGhpcy5jb250aWdMaXN0ID0gY29udGlnTGlzdDtcbiAgfVxuXG4gICAgLy8gUmV0dXJucyBhIGxpc3Qgb2YgY29udGlnIG5hbWVzLlxuICAgIGdldENvbnRpZ05hbWVzKCk6IHN0cmluZ1tdIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbnRpZ0xpc3QubWFwKHNlcSA9PiBzZXEubmFtZSk7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJucyBhIGxpc3Qgb2YgY29udGlnIG5hbWVzLlxuICAgIGdldENvbnRpZ3MoKTogU2VxdWVuY2VSZWNvcmRbXSB7XG4gICAgICByZXR1cm4gdGhpcy5jb250aWdMaXN0O1xuICAgIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYmFzZSBwYWlycyBmb3IgY29udGlnOnN0YXJ0LXN0b3AuXG4gICAqIFRoZSByYW5nZSBpcyBpbmNsdXNpdmUgYW5kIHplcm8tYmFzZWQuXG4gICAqIFJldHVybnMgZW1wdHkgc3RyaW5nIGlmIG5vIGRhdGEgaXMgYXZhaWxhYmxlIG9uIHRoaXMgcmFuZ2UuXG4gICAqL1xuICBnZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBRLlByb21pc2U8c3RyaW5nPiB7XG4gICAgdmFyIHN0YXJ0ID0gcmFuZ2Uuc3RhcnQoKTtcbiAgICB2YXIgc3RvcCA9IHJhbmdlLnN0b3AoKTtcbiAgICBpZiAoc3RhcnQgPiBzdG9wKSB7XG4gICAgICB0aHJvdyBgUmVxdWVzdGVkIGEgcmFuZ2Ugd2l0aCBzdGFydCA+IHN0b3AgKCR7c3RhcnR9LCAke3N0b3B9KWA7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnJlbW90ZVJlcXVlc3QuZ2V0KHJhbmdlKS50aGVuKGUgPT4ge1xuICAgICAgICByZXR1cm4gZS5yZXNwb25zZTtcbiAgICB9KTtcbiAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gU2VxdWVuY2U7XG4iLCIvKipcbiAqIFRoaXMgbW9kdWxlIGRlZmluZXMgYSBwYXJzZXIgZm9yIHRoZSAyYml0IGZpbGUgZm9ybWF0LlxuICogU2VlIGh0dHA6Ly9nZW5vbWUudWNzYy5lZHUvRkFRL0ZBUWZvcm1hdC5odG1sI2Zvcm1hdDdcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUgUmVtb3RlRmlsZSBmcm9tICcuLi9SZW1vdGVGaWxlJztcblxuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBqQmluYXJ5IGZyb20gJ2piaW5hcnknO1xuXG5pbXBvcnQgdHdvQml0VHlwZXMgZnJvbSAnLi9mb3JtYXRzL3R3b0JpdFR5cGVzJztcblxudmFyIEJBU0VfUEFJUlMgPSBbXG4gICdUJywgIC8vIDA9MDBcbiAgJ0MnLCAgLy8gMT0wMVxuICAnQScsICAvLyAyPTEwXG4gICdHJyAgIC8vIDM9MTFcbl07XG5cbi8qKlxuICBUaGUgZm9sbG93aW5nIGNodW5rIHNpemVzIGFyZSBvcHRpbWl6ZWQgYWdhaW5zdFxuICB0aGUgaHVtYW4gcmVmZXJlbmNlIGdlbm9tZSAoaGcxOS4yYml0KS4gQXNzdW1pbmcgdGhhdFxuICBwaWxldXAuanMgaXMgbW9zdGx5IGJlaW5nIHVzZWQgZm9yIGh1bWFuIGdlbm9tZSxcbiAgaW5jcmVhc2luZyB0aGUgZm9sbG93aW5nIG51bWJlcnMgbWlnaHQgY2F1c2Ugbm9ubmVjZXNzYXJ5XG4gIG5ldHdvcmsgdHJhZmZpYyBhbmQgbWlnaHQgYWxzbyBicmVhayBvdXIgdW5pdCB0ZXN0c1xuICB0aGF0IG1ha2UgdXNlIG9mIG1hcHBlZCAyYml0IGZpbGVzLlxuKi9cbnZhciBGSVJTVF9IRUFERVJfQ0hVTktTSVpFID0gMTYgKiAxMDI0LCAgLy8gMTYgS0JcbiAgICBGSVJTVF9TRVFVRU5DRV9DSFVOS1NJWkUgPSAoNCAqIDEwMjQpIC0gMSwgIC8vIH4gNEtCXG4gICAgTUFYX0NIVU5LU0laRSA9IDEwMjQgKiAxMDI0OyAgLy8gMSBNQlxuXG50eXBlIEZpbGVJbmRleEVudHJ5ID0ge1xuICBuYW1lOiBzdHJpbmc7XG4gIG9mZnNldDogbnVtYmVyO1xufTtcblxudHlwZSBTZXF1ZW5jZVJlY29yZCA9IHtcbiAgbnVtQmFzZXM6IG51bWJlcjtcbiAgdW5rbm93bkJsb2NrU3RhcnRzOiBBcnJheTxudW1iZXI+OyAgLy8gbmIgdGhlc2UgbnVtYmVycyBhcmUgMC1iYXNlZFxuICB1bmtub3duQmxvY2tMZW5ndGhzOiBBcnJheTxudW1iZXI+OyAgLy8gVE9ETyhkYW52ayk6IGFkZCBhbiBpbnRlcnZhbCB0eXBlP1xuICBudW1NYXNrQmxvY2tzOiBudW1iZXI7XG4gIG1hc2tCbG9ja1N0YXJ0czogQXJyYXk8bnVtYmVyPjtcbiAgbWFza0Jsb2NrTGVuZ3RoczogQXJyYXk8bnVtYmVyPjtcbiAgZG5hT2Zmc2V0RnJvbUhlYWRlcjogbnVtYmVyOyAgLy8gIyBvZiBieXRlcyBmcm9tIHNlcXVlbmNlIGhlYWRlciB0byBwYWNrZWQgRE5BXG4gIG9mZnNldDogbnVtYmVyOyAgLy8gYnl0ZXMgZnJvbSB0aGUgc3RhcnQgb2YgdGhlIGZpbGUgYXQgd2hpY2ggdGhpcyBkYXRhIGxpdmVzLlxufVxuXG50eXBlIFR3b0JpdEhlYWRlciA9IHtcbiAgc2VxdWVuY2VDb3VudDogbnVtYmVyO1xuICBzZXF1ZW5jZXM6IEFycmF5PEZpbGVJbmRleEVudHJ5Pjtcbn1cblxuXG4vKipcbiAqIFBhcnNlcyBhIHNpbmdsZSBTZXF1ZW5jZVJlY29yZCBmcm9tIHRoZSBzdGFydCBvZiB0aGUgQXJyYXlCdWZmZXIuXG4gKiBmaWxlT2Zmc2V0IGlzIHRoZSBwb3NpdGlvbiBvZiB0aGlzIHNlcXVlbmNlIHdpdGhpbiB0aGUgMmJpdCBmaWxlLlxuICovXG5mdW5jdGlvbiBwYXJzZVNlcXVlbmNlUmVjb3JkKGJ1ZmZlcjogQXJyYXlCdWZmZXIsIGZpbGVPZmZzZXQ6IG51bWJlcik6IFNlcXVlbmNlUmVjb3JkIHtcbiAgdmFyIGpiID0gbmV3IGpCaW5hcnkoYnVmZmVyLCB0d29CaXRUeXBlcy5UWVBFX1NFVCk7XG4gIHZhciBoZWFkZXIgPSBqYi5yZWFkKCdTZXF1ZW5jZVJlY29yZCcpO1xuXG4gIHZhciBkbmFPZmZzZXQgPSBqYi50ZWxsKCkgKyA4ICogaGVhZGVyLm1hc2tCbG9ja0NvdW50ICsgNDtcblxuICByZXR1cm4ge1xuICAgIG51bUJhc2VzOiBoZWFkZXIuZG5hU2l6ZSxcbiAgICB1bmtub3duQmxvY2tTdGFydHM6IGhlYWRlci5uQmxvY2tTdGFydHMsXG4gICAgdW5rbm93bkJsb2NrTGVuZ3RoczogaGVhZGVyLm5CbG9ja1NpemVzLFxuICAgIG51bU1hc2tCbG9ja3M6IGhlYWRlci5tYXNrQmxvY2tDb3VudCxcbiAgICBtYXNrQmxvY2tTdGFydHM6IFtdLFxuICAgIG1hc2tCbG9ja0xlbmd0aHM6IFtdLFxuICAgIGRuYU9mZnNldEZyb21IZWFkZXI6IGRuYU9mZnNldCxcbiAgICBvZmZzZXQ6IGZpbGVPZmZzZXRcbiAgfTtcbn1cblxuXG5mdW5jdGlvbiBwYXJzZUhlYWRlcihidWZmZXI6IEFycmF5QnVmZmVyKTogVHdvQml0SGVhZGVyIHtcbiAgdmFyIGpiID0gbmV3IGpCaW5hcnkoYnVmZmVyLCB0d29CaXRUeXBlcy5UWVBFX1NFVCk7XG4gIHZhciBoZWFkZXIgPSBqYi5yZWFkKCdIZWFkZXInKTtcblxuICByZXR1cm4ge1xuICAgIHNlcXVlbmNlQ291bnQ6IGhlYWRlci5zZXF1ZW5jZUNvdW50LFxuICAgIHNlcXVlbmNlczogaGVhZGVyLnNlcXVlbmNlc1xuICB9O1xufVxuXG5cbi8qKlxuICogUmVhZCAyLWJpdCBlbmNvZGVkIGJhc2UgcGFpcnMgZnJvbSBhIERhdGFWaWV3IGludG8gYW4gYXJyYXkgb2YgJ0EnLCAnVCcsXG4gKiAnQycsICdHJyBzdHJpbmdzLlxuICogVGhlc2UgYXJlIHJldHVybmVkIGFzIGFuIGFycmF5IChyYXRoZXIgdGhhbiBhIHN0cmluZykgdG8gZmFjaWxpdGF0ZSBmdXJ0aGVyXG4gKiBtb2RpZmljYXRpb24uXG4gKi9cbmZ1bmN0aW9uIHVucGFja0ROQShkYXRhVmlldzogRGF0YVZpZXcsIHN0YXJ0QmFzZVBhaXI6IG51bWJlciwgbnVtQmFzZVBhaXJzOiBudW1iZXIpOiBBcnJheTxzdHJpbmc+IHtcbiAgLy8gVE9ETzogdXNlIGpCaW5hcnkgYml0ZmllbGQgZm9yIHRoaXNcbiAgdmFyIGJhc2VQYWlyczogQXJyYXk8c3RyaW5nPiA9IFtdO1xuICBiYXNlUGFpcnMubGVuZ3RoID0gZGF0YVZpZXcuYnl0ZUxlbmd0aCAqIDQ7ICAvLyBwcmUtYWxsb2NhdGVcbiAgdmFyIGJhc2VQYWlySWR4ID0gLXN0YXJ0QmFzZVBhaXI7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YVZpZXcuYnl0ZUxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHBhY2tlZCA9IGRhdGFWaWV3LmdldFVpbnQ4KGkpO1xuICAgIGZvciAodmFyIHNoaWZ0ID0gNjsgc2hpZnQgPj0gMDsgc2hpZnQgLT0gMikge1xuICAgICAgdmFyIGJwID0gQkFTRV9QQUlSU1socGFja2VkID4+IHNoaWZ0KSAmIDNdO1xuICAgICAgaWYgKHN0YXJ0QmFzZVBhaXIgPj0gMCkge1xuICAgICAgICBiYXNlUGFpcnNbYmFzZVBhaXJJZHhdID0gYnA7XG4gICAgICB9XG4gICAgICBiYXNlUGFpcklkeCsrO1xuICAgIH1cbiAgfVxuICAvLyBSZW1vdmUgYmFzZSBwYWlycyBmcm9tIHRoZSBlbmQgaWYgdGhlIHNlcXVlbmNlIHRlcm1pbmF0ZWQgbWlkLWJ5dGUuXG4gIGJhc2VQYWlycy5sZW5ndGggPSBudW1CYXNlUGFpcnM7XG4gIHJldHVybiBiYXNlUGFpcnM7XG59XG5cbi8qKlxuICogQ2hhbmdlIGJhc2UgcGFpcnMgdG8gJ04nIHdoZXJlIHRoZSBTZXF1ZW5jZVJlY29yZCBkaWN0YXRlcy5cbiAqIFRoaXMgbW9kaWZpZXMgdGhlIGJhc2VQYWlycyBhcnJheSBpbi1wbGFjZS5cbiAqL1xuZnVuY3Rpb24gbWFya1Vua25vd25ETkEoYmFzZVBhaXJzOiBBcnJheTxzdHJpbmc+LCBkbmFTdGFydEluZGV4OiBudW1iZXIsIHNlcXVlbmNlOiBTZXF1ZW5jZVJlY29yZCk6IEFycmF5PHN0cmluZz4ge1xuICB2YXIgZG5hU3RvcCA9IGRuYVN0YXJ0SW5kZXggKyBiYXNlUGFpcnMubGVuZ3RoIC0gMTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXF1ZW5jZS51bmtub3duQmxvY2tTdGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgblN0YXJ0ID0gc2VxdWVuY2UudW5rbm93bkJsb2NrU3RhcnRzW2ldLFxuICAgICAgICBuTGVuZ3RoID0gc2VxdWVuY2UudW5rbm93bkJsb2NrTGVuZ3Roc1tpXSxcbiAgICAgICAgblN0b3AgPSBuU3RhcnQgKyBuTGVuZ3RoIC0gMSxcbiAgICAgICAgaW50U3RhcnQgPSBNYXRoLm1heChuU3RhcnQsIGRuYVN0YXJ0SW5kZXgpLFxuICAgICAgICBpbnRTdG9wID0gTWF0aC5taW4oblN0b3AsIGRuYVN0b3ApO1xuICAgIGlmIChpbnRTdG9wIDwgaW50U3RhcnQpIGNvbnRpbnVlOyAgLy8gbm8gb3ZlcmxhcFxuXG4gICAgZm9yICh2YXIgaiA9IGludFN0YXJ0OyBqIDw9IGludFN0b3A7IGorKykge1xuICAgICAgYmFzZVBhaXJzW2ogLSBkbmFTdGFydEluZGV4XSA9ICdOJztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gYmFzZVBhaXJzO1xufVxuXG5cbi8qKlxuICogQW4gdW1icmVsbGEgZXJyb3IgdHlwZSB0byBkZXNjcmliZSBpc3N1ZXMgd2l0aCBwYXJzaW5nIGFuXG4gKiBpbmNvbXBsZXRlIGNodW5rIG9mIGRhdGEgd2l0aCBKQmluYXJ5J3MgcmVhZC4gSWYgdGhpcyBpcyBiZWluZ1xuICogcmFpc2VkLCB3ZSBlaXRoZXIgbmVlZCB0byBhc2sgZm9yIG1vcmUgZGF0YSAoYSBiaWdnZXIgY2h1bmspIG9yXG4gKiByZXBvcnQgdG8gdGhlIHVzZXIgdGhhdCB0aGVyZSBtaWdodCBiZSBhIHByb2JsZW0gd2l0aCB0aGUgMmJpdFxuICogZmlsZSwgc3BlY2lmaWNhbGx5IHdpdGggaXRzIGhlYWRlci5cbiAqL1xuZnVuY3Rpb24gSW5jb21wbGV0ZUNodW5rRXJyb3IobWVzc2FnZSkge1xuICAgIHRoaXMubmFtZSA9IFwiSW5jb21wbGV0ZUNodW5rRXJyb3JcIjtcbiAgICB0aGlzLm1lc3NhZ2UgPSAobWVzc2FnZSB8fCBcIlwiKTtcbn1cbkluY29tcGxldGVDaHVua0Vycm9yLnByb3RvdHlwZSA9IEVycm9yLnByb3RvdHlwZTtcblxuLyoqXG4gKiBXcmFwcyBhIHBhcnNpbmcgYXR0ZW1wdCwgY2FwdHVyZXMgZXJyb3JzIHJlbGF0ZWQgdG9cbiAqIGluY29tcGxldGUgZGF0YSBhbmQgcmUtdGhyb3dzIGEgc3BlY2lhbGl6ZWQgZXJyb3I6XG4gKiBJbmNvbXBsZXRlQ2h1bmtFcnJvci4gT3RoZXJ3aXNlLCB3aGF0ZXZlciBvdGhlciBlcnJvclxuICogaXMgYmVpbmcgcmFpc2VkIGdldHMgZXNjYWxhdGVkLlxuICovXG5mdW5jdGlvbiBwYXJzZVdpdGhFeGNlcHRpb24ocGFyc2VGdW5jOiBGdW5jdGlvbikge1xuICB0cnkge1xuICAgIHJldHVybiBwYXJzZUZ1bmMoKTtcbiAgfSBjYXRjaChlcnJvcikge1xuICAgIC8vIENocm9tZS1saWtlIGJyb3dzZXJzOiBSYW5nZUVycm9yOyBwaGFudG9tanM6IERPTUV4Y2VwdGlvblxuICAgIGlmIChlcnJvci5uYW1lID09IFwiUmFuZ2VFcnJvclwiIHx8IGVycm9yLm5hbWUgPT0gXCJJTkRFWF9TSVpFX0VSUlwiKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBFcnJvciBuYW1lOiAke2Vycm9yLm5hbWV9YCk7XG4gICAgICAgIHRocm93IG5ldyBJbmNvbXBsZXRlQ2h1bmtFcnJvcihlcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRyeSBnZXR0aW5nIGEgYmlnZ2VyIGNodW5rIG9mIHRoZSByZW1vdGUgZmlsZVxuICogdW50aWwgdGhlIEluY29tcGxldGUgQ2h1bmsgRXJyb3IgaXMgcmVzb2x2ZWQuIFRoaXMgaXMgdXNlZnVsIHdoZW4gd2UgbmVlZCB0b1xuICogcGFyc2UgdGhlIGhlYWRlciwgYnV0IHdoZW4gd2UgZG9uJ3Qga25vdyB0aGUgc2l6ZSBvZiB0aGUgaGVhZGVyIHVwIGZyb250LlxuICogSWYgdGhlIGludGlhbCByZXF1ZXN0IHJldHVybnMgYW4gaW5jb21wbGV0ZSBoZWFkZXIgYW5kIGhlbmNlIHRoZVxuICogcGFyc2luZyBmYWlscywgd2UgbmV4dCB0cnkgZG91YmxpbmcgdGhlIHJlcXVlc3RlZCBzaXplLlxuICogVGhlIHNpemUgb2YgdGhlIHJlcXVlc3QgaXMgY2FwcGVkIHdpdGggYHVudGlsU2l6ZWAgc28gdGhhdFxuICogd2UgZG9uJ3Qgc3RhcnQgYXNraW5nIGZvciBNQnMgb2YgZGF0YSBmb3Igbm8gdXNlLlxuICogSW5zdGVhZCB3ZSB3ZSB0aHJvdyBhbiBlcnJvciBpZiB3ZSByZWFjaCB0aGUgY2FwLFxuICogcG90ZW50aWFsbHkgbWVhbmluZyBhIGNvcnJ1cHRlZCAyYml0IGZpbGUuXG4qL1xuZnVuY3Rpb24gcmV0cnlSZW1vdGVHZXQocmVtb3RlRmlsZTogUmVtb3RlRmlsZSwgc3RhcnQ6IG51bWJlciwgc2l6ZTogbnVtYmVyLCB1bnRpbFNpemU6IG51bWJlciwgcHJvbWlzZWRGdW5jOiBGdW5jdGlvbikge1xuICByZXR1cm4gcmVtb3RlRmlsZS5nZXRCeXRlcyhzdGFydCwgc2l6ZSkudGhlbihwcm9taXNlZEZ1bmMpLmNhdGNoKGVycm9yID0+IHtcbiAgICBpZihlcnJvci5uYW1lID09IFwiSW5jb21wbGV0ZUNodW5rRXJyb3JcIikge1xuICAgICAgLy8gRG8gbm90IGF0dGVtcHQgdG8gZG93bmxvYWQgbW9yZSB0aGFuIGB1bnRpbFNpemVgXG4gICAgICBpZihzaXplID4gdW50aWxTaXplKSB7XG4gICAgICAgIHRocm93IGBDb3VsZG4ndCBwYXJzZSB0aGUgaGVhZGVyIGAgK1xuICAgICAgICAgICAgICBgZnJvbSB0aGUgZmlyc3QgJHtzaXplfSBieXRlcyBvZiB0aGUgZmlsZS4gYCArXG4gICAgICAgICAgICAgIGBDb3JydXB0ZWQgMmJpdCBmaWxlP2A7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmV0cnlSZW1vdGVHZXQocmVtb3RlRmlsZSwgc3RhcnQsIHNpemUqMiwgdW50aWxTaXplLCBwcm9taXNlZEZ1bmMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH0pO1xufVxuXG5jbGFzcyBUd29CaXQge1xuICByZW1vdGVGaWxlOiBSZW1vdGVGaWxlO1xuICBoZWFkZXI6IFEuUHJvbWlzZTxUd29CaXRIZWFkZXI+O1xuXG4gIGNvbnN0cnVjdG9yKHJlbW90ZUZpbGU6IFJlbW90ZUZpbGUpIHtcbiAgICB0aGlzLnJlbW90ZUZpbGUgPSByZW1vdGVGaWxlO1xuICAgIHZhciBkZWZlcnJlZEhlYWRlciA9IFEuZGVmZXIoKTtcbiAgICB0aGlzLmhlYWRlciA9IGRlZmVycmVkSGVhZGVyLnByb21pc2U7XG4gICAgcmV0cnlSZW1vdGVHZXQoXG4gICAgICB0aGlzLnJlbW90ZUZpbGUsXG4gICAgICAwLCAgLy8gQmVnaW5uaW5nIG9mIHRoZSBmaWxlXG4gICAgICBGSVJTVF9IRUFERVJfQ0hVTktTSVpFLFxuICAgICAgTUFYX0NIVU5LU0laRSxcbiAgICAgIGJ1ZmZlciA9PiB7XG4gICAgICAgIHZhciBoZWFkZXIgPSBwYXJzZVdpdGhFeGNlcHRpb24oKCkgPT4ge1xuICAgICAgICAgIHJldHVybiBwYXJzZUhlYWRlcihidWZmZXIpO1xuICAgICAgICB9KTtcbiAgICAgICAgZGVmZXJyZWRIZWFkZXIucmVzb2x2ZShoZWFkZXIpO1xuICAgICAgfSkuZG9uZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGJhc2UgcGFpcnMgZm9yIGNvbnRpZzpzdGFydC1zdG9wLlxuICAgKiBUaGUgcmFuZ2UgaXMgaW5jbHVzaXZlIGFuZCB6ZXJvLWJhc2VkLlxuICAgKiBSZXR1cm5zIGVtcHR5IHN0cmluZyBpZiBubyBkYXRhIGlzIGF2YWlsYWJsZSBvbiB0aGlzIHJhbmdlLlxuICAgKi9cbiAgZ2V0RmVhdHVyZXNJblJhbmdlKGNvbnRpZzogc3RyaW5nLCBzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpOiBRLlByb21pc2U8c3RyaW5nPiB7XG4gICAgaWYgKHN0YXJ0ID4gc3RvcCkge1xuICAgICAgdGhyb3cgYFJlcXVlc3RlZCBhIDJiaXQgcmFuZ2Ugd2l0aCBzdGFydCA+IHN0b3AgKCR7c3RhcnR9LCAke3N0b3B9KWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2dldFNlcXVlbmNlSGVhZGVyKGNvbnRpZykudGhlbihoZWFkZXIgPT4ge1xuICAgICAgdmFyIGRuYU9mZnNldCA9IGhlYWRlci5vZmZzZXQgKyBoZWFkZXIuZG5hT2Zmc2V0RnJvbUhlYWRlcjtcbiAgICAgIHZhciBvZmZzZXQgPSBNYXRoLmZsb29yKGRuYU9mZnNldCArIHN0YXJ0LzQpO1xuICAgICAgdmFyIGJ5dGVMZW5ndGggPSBNYXRoLmNlaWwoKHN0b3AgLSBzdGFydCArIDEpIC8gNCkgKyAxO1xuICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRmlsZS5nZXRCeXRlcyhvZmZzZXQsIGJ5dGVMZW5ndGgpLnRoZW4oYnVmZmVyID0+IHtcbiAgICAgICAgdmFyIGRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7XG4gICAgICAgIHJldHVybiBtYXJrVW5rbm93bkROQShcbiAgICAgICAgICAgIHVucGFja0ROQShkYXRhVmlldywgc3RhcnQgJSA0LCBzdG9wIC0gc3RhcnQgKyAxKSwgc3RhcnQsIGhlYWRlcilcbiAgICAgICAgICAgIC5qb2luKCcnKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIGxpc3Qgb2YgY29udGlnIG5hbWVzLlxuICBnZXRDb250aWdMaXN0KCk6IFEuUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIHJldHVybiB0aGlzLmhlYWRlci50aGVuKGhlYWRlciA9PiBoZWFkZXIuc2VxdWVuY2VzLm1hcChzZXEgPT4gc2VxLm5hbWUpKTtcbiAgfVxuXG4gIF9nZXRTZXF1ZW5jZUhlYWRlcihjb250aWc6IHN0cmluZyk6IFEuUHJvbWlzZTxTZXF1ZW5jZVJlY29yZD4ge1xuICAgIHJldHVybiB0aGlzLmhlYWRlci50aGVuKGhlYWRlciA9PiB7XG4gICAgICB2YXIgbWF5YmVTZXEgPSBfLmZpbmRXaGVyZShoZWFkZXIuc2VxdWVuY2VzLCB7bmFtZTogY29udGlnfSkgfHxcbiAgICAgICAgICAgICAgICAgICAgIF8uZmluZFdoZXJlKGhlYWRlci5zZXF1ZW5jZXMsIHtuYW1lOiAnY2hyJyArIGNvbnRpZ30pO1xuICAgICAgaWYgKG1heWJlU2VxID09PSBudWxsIHx8IG1heWJlU2VxID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhyb3cgJ0ludmFsaWQgY29udGlnOiAnICsgY29udGlnO1xuICAgICAgfVxuICAgICAgdmFyIHNlcSA9IG1heWJlU2VxOyAgLy8gZm9yIGZsb3csIHNlZSBmYWNlYm9vay9mbG93IzI2NlxuXG4gICAgICByZXR1cm4gcmV0cnlSZW1vdGVHZXQoXG4gICAgICAgIHRoaXMucmVtb3RlRmlsZSxcbiAgICAgICAgc2VxLm9mZnNldCxcbiAgICAgICAgRklSU1RfU0VRVUVOQ0VfQ0hVTktTSVpFLFxuICAgICAgICBNQVhfQ0hVTktTSVpFLFxuICAgICAgICBidWZmZXIgPT4ge1xuICAgICAgICAgIHJldHVybiBwYXJzZVdpdGhFeGNlcHRpb24oKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHBhcnNlU2VxdWVuY2VSZWNvcmQoYnVmZmVyLCBzZXEub2Zmc2V0KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgKTtcbiAgICB9KTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFR3b0JpdDtcbiIsIi8qKlxuICogQSB2aXJ0dWFsIG9mZnNldCBpbnRvIGEgQkFNIGZpbGUuXG4gKiBUaGlzIGNvbWJpbmVzIHRoZSBvZmZzZXQgdG8gdGhlIGJlZ2lubmluZyBvZiB0aGUgY29tcHJlc3Npb24gYmxvY2sgd2l0aCBhblxuICogb2Zmc2V0IGludG8gdGhlIGluZmxhdGVkIGRhdGEuXG4gKiBUaGVzZSBhcmUgdXN1YWxseSByZXByZXNlbnRlZCBhcyB1aW50NjRzLCB3aGljaCBhcmUgYXdrd2FyZCB0byB3b3JrIHdpdGggaW5cbiAqIEphdmFTY3JpcHQuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmNsYXNzIFZpcnR1YWxPZmZzZXQge1xuICBjb2Zmc2V0OiBudW1iZXI7XG4gIHVvZmZzZXQ6IG51bWJlcjtcblxuICBjb25zdHJ1Y3Rvcihjb2Zmc2V0OiBudW1iZXIsIHVvZmZzZXQ6IG51bWJlcikge1xuICAgIHRoaXMuY29mZnNldCA9IGNvZmZzZXQ7XG4gICAgdGhpcy51b2Zmc2V0ID0gdW9mZnNldDtcbiAgfVxuXG4gIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3RoaXMuY29mZnNldH06JHt0aGlzLnVvZmZzZXR9YDtcbiAgfVxuXG4gIGlzTGVzc1RoYW4ob3RoZXI6IFZpcnR1YWxPZmZzZXQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jb2Zmc2V0IDwgb3RoZXIuY29mZnNldCB8fFxuICAgICAgICAgICAodGhpcy5jb2Zmc2V0ID09IG90aGVyLmNvZmZzZXQgJiZcbiAgICAgICAgICAgIHRoaXMudW9mZnNldCA8IG90aGVyLnVvZmZzZXQpO1xuICB9XG5cbiAgaXNMZXNzVGhhbk9yRXF1YWwob3RoZXI6IFZpcnR1YWxPZmZzZXQpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jb2Zmc2V0IDw9IG90aGVyLmNvZmZzZXQgfHxcbiAgICAgICAgICAgKHRoaXMuY29mZnNldCA9PSBvdGhlci5jb2Zmc2V0ICYmXG4gICAgICAgICAgICB0aGlzLnVvZmZzZXQgPD0gb3RoZXIudW9mZnNldCk7XG4gIH1cblxuICBpc0VxdWFsKG90aGVyOiBWaXJ0dWFsT2Zmc2V0KTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29mZnNldCA9PSBvdGhlci5jb2Zmc2V0ICYmXG4gICAgICAgICAgIHRoaXMudW9mZnNldCA9PSBvdGhlci51b2Zmc2V0O1xuICB9XG5cbiAgLy8gUmV0dXJucyA8MCBpZiB0aGlzIDwgb3RoZXIsIDAgaWYgdGhpcyA9PSBvdGhlciwgPjAgaWYgdGhpcyA+IG90aGVyLlxuICAvLyBVc2VmdWwgZm9yIHNvcnRpbmcuXG4gIGNvbXBhcmVUbyhvdGhlcjogVmlydHVhbE9mZnNldCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY29mZnNldCAtIG90aGVyLmNvZmZzZXQgfHwgdGhpcy51b2Zmc2V0IC0gb3RoZXIudW9mZnNldDtcbiAgfVxuXG4gIGNsb25lKCk6IFZpcnR1YWxPZmZzZXQge1xuICAgIHJldHVybiBuZXcgVmlydHVhbE9mZnNldCh0aGlzLmNvZmZzZXQsIHRoaXMudW9mZnNldCk7XG4gIH1cblxuICAvLyBUaGlzIGlzIGEgZmFzdGVyIHN0YW5kLWluIGZvciBqQmluYXJ5LnJlYWQoJ1ZpcnR1YWxPZmZzZXQnKVxuICBzdGF0aWMgZnJvbUJsb2IodTg6IFVpbnQ4QXJyYXksIG9mZnNldD86IG51bWJlcik6IFZpcnR1YWxPZmZzZXQge1xuICAgIG9mZnNldCA9IG9mZnNldCB8fCAwO1xuICAgIHZhciB1b2Zmc2V0ID0gdThbb2Zmc2V0ICAgIF0gK1xuICAgICAgICAgICAgICAgICAgdThbb2Zmc2V0ICsgMV0gKiAyNTYsXG4gICAgICAgIGNvZmZzZXQgPSB1OFtvZmZzZXQgKyAyXSArXG4gICAgICAgICAgICAgICAgICB1OFtvZmZzZXQgKyAzXSAqIDI1NiArXG4gICAgICAgICAgICAgICAgICB1OFtvZmZzZXQgKyA0XSAqIDY1NTM2ICtcbiAgICAgICAgICAgICAgICAgIHU4W29mZnNldCArIDVdICogMTY3NzcyMTYgK1xuICAgICAgICAgICAgICAgICAgdThbb2Zmc2V0ICsgNl0gKiA0Mjk0OTY3Mjk2ICtcbiAgICAgICAgICAgICAgICAgIHU4W29mZnNldCArIDddICogMTA5OTUxMTYyNzc3NjtcbiAgICByZXR1cm4gbmV3IFZpcnR1YWxPZmZzZXQoY29mZnNldCwgdW9mZnNldCk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBWaXJ0dWFsT2Zmc2V0O1xuIiwiLyoqXG4gKiBUb29scyBmb3Igd29ya2luZyB3aXRoIGluZGV4ZWQgQkFNIChCQUkpIGZpbGVzLlxuICogVGhlc2UgaGF2ZSBub3RoaW5nIHRvIHNheSBhYm91dCBwYXJzaW5nIHRoZSBCQU0gZmlsZSBpdHNlbGYuIEZvciB0aGF0LCBzZWVcbiAqIGJhbS5qcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUgUmVtb3RlRmlsZSBmcm9tICcuLi9SZW1vdGVGaWxlJztcbmltcG9ydCB0eXBlIENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCB0eXBlIHtDaHVua30gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQgakJpbmFyeSBmcm9tICdqYmluYXJ5JztcbmltcG9ydCBqRGF0YVZpZXcgZnJvbSAnamRhdGF2aWV3JztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQgYmFtVHlwZXMgZnJvbSAnLi9mb3JtYXRzL2JhbVR5cGVzJztcbmltcG9ydCBWaXJ0dWFsT2Zmc2V0IGZyb20gJy4vVmlydHVhbE9mZnNldCc7XG5cblxuLy8gSW4gdGhlIGV2ZW50IHRoYXQgaW5kZXggY2h1bmtzIGFyZW4ndCBhdmFpbGFibGUgZnJvbSBhbiBleHRlcm5hbCBzb3VyY2UsIGl0XG4vLyB3aW5kcyB1cCBzYXZpbmcgdGltZSB0byBkbyBhIGZhc3QgcGFzcyBvdmVyIHRoZSBkYXRhIHRvIGNvbXB1dGUgdGhlbS4gVGhpc1xuLy8gYWxsb3dzIHVzIHRvIHBhcnNlIGEgc2luZ2xlIGNvbnRpZyBhdCBhIHRpbWUgdXNpbmcgakJpbmFyeS5cbmZ1bmN0aW9uIGNvbXB1dGVJbmRleENodW5rcyhidWZmZXIpIHtcbiAgdmFyIEJMT0NLX1NJWkUgPSA2NTUzNjtcbiAgdmFyIHZpZXcgPSBuZXcgakRhdGFWaWV3KGJ1ZmZlciwgMCwgYnVmZmVyLmJ5dGVMZW5ndGgsIHRydWUgLyogbGl0dGxlIGVuZGlhbiAqLyk7XG5cbiAgdmFyIG1pbkJsb2NrSW5kZXggPSBJbmZpbml0eTtcbiAgdmFyIGNvbnRpZ1N0YXJ0T2Zmc2V0cyA9IFtdO1xuICB2aWV3LmdldEludDMyKCk7ICAvLyBtYWdpY1xuICB2YXIgbl9yZWYgPSB2aWV3LmdldEludDMyKCk7XG4gIGZvciAodmFyIGogPSAwOyBqIDwgbl9yZWY7IGorKykge1xuICAgIGNvbnRpZ1N0YXJ0T2Zmc2V0cy5wdXNoKHZpZXcudGVsbCgpKTtcbiAgICB2YXIgbl9iaW4gPSB2aWV3LmdldEludDMyKCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuX2JpbjsgaSsrKSB7XG4gICAgICB2aWV3LmdldFVpbnQzMigpOyAgLy8gYmluIElEXG4gICAgICB2YXIgbl9jaHVuayA9IHZpZXcuZ2V0SW50MzIoKTtcbiAgICAgIHZpZXcuc2tpcChuX2NodW5rICogMTYpO1xuICAgIH1cbiAgICB2YXIgbl9pbnR2ID0gdmlldy5nZXRJbnQzMigpO1xuICAgIGlmIChuX2ludHYpIHtcbiAgICAgIHZhciBvZmZzZXQgPSBWaXJ0dWFsT2Zmc2V0LmZyb21CbG9iKHZpZXcuZ2V0Qnl0ZXMoOCksIDApLFxuICAgICAgICAgIGNvZmZzZXQgPSBvZmZzZXQuY29mZnNldCArIChvZmZzZXQudW9mZnNldCA/IEJMT0NLX1NJWkUgOiAwKTtcbiAgICAgIG1pbkJsb2NrSW5kZXggPSBjb2Zmc2V0ID8gTWF0aC5taW4oY29mZnNldCwgbWluQmxvY2tJbmRleCkgOiBCTE9DS19TSVpFO1xuICAgICAgdmlldy5za2lwKChuX2ludHYgLSAxKSAqIDgpO1xuICAgIH1cbiAgfVxuICBjb250aWdTdGFydE9mZnNldHMucHVzaCh2aWV3LnRlbGwoKSk7XG5cbiAgLy8gQXQgdGhpcyBwb2ludCwgYG1pbkJsb2NrSW5kZXhgIHNob3VsZCBiZSBub24tSW5maW5pdHkgKHNlZSAjNDA1ICYgIzQwNilcbiAgcmV0dXJuIHtcbiAgICBjaHVua3M6IF8uemlwKF8uaW5pdGlhbChjb250aWdTdGFydE9mZnNldHMpLCBfLnJlc3QoY29udGlnU3RhcnRPZmZzZXRzKSksXG4gICAgbWluQmxvY2tJbmRleFxuICB9O1xufVxuXG5cbmZ1bmN0aW9uIHJlYWRDaHVua3MoYnVmKSB7XG4gIHJldHVybiBuZXcgakJpbmFyeShidWYsIGJhbVR5cGVzLlRZUEVfU0VUKS5yZWFkKCdDaHVua3NBcnJheScpO1xufVxuXG5mdW5jdGlvbiByZWFkSW50ZXJ2YWxzKGJsb2I6IFVpbnQ4QXJyYXkpIHtcbiAgdmFyIGludGVydmFscyA9IG5ldyBBcnJheShNYXRoLmZsb29yKGJsb2IubGVuZ3RoIC8gOCkpO1xuICBmb3IgKHZhciBwb3MgPSAwOyBwb3MgPCBibG9iLmxlbmd0aCAtIDc7IHBvcyArPSA4KSB7XG4gICAgaW50ZXJ2YWxzW3BvcyA+PiAzXSA9IFZpcnR1YWxPZmZzZXQuZnJvbUJsb2IoYmxvYiwgcG9zKTtcbiAgfVxuICByZXR1cm4gaW50ZXJ2YWxzO1xufVxuXG5mdW5jdGlvbiBkb0NodW5rc092ZXJsYXAoYTogQ2h1bmssIGI6IENodW5rKSB7XG4gIHJldHVybiBhLmNodW5rX2JlZy5pc0xlc3NUaGFuT3JFcXVhbChiLmNodW5rX2VuZCkgJiZcbiAgICAgICAgIGIuY2h1bmtfYmVnLmlzTGVzc1RoYW5PckVxdWFsKGEuY2h1bmtfZW5kKTtcbn1cblxuZnVuY3Rpb24gYXJlQ2h1bmtzQWRqYWNlbnQoYTogQ2h1bmssIGI6IENodW5rKSB7XG4gIHJldHVybiBhLmNodW5rX2JlZy5pc0VxdWFsKGIuY2h1bmtfZW5kKSB8fCBhLmNodW5rX2VuZC5pc0VxdWFsKGIuY2h1bmtfYmVnKTtcbn1cblxuLy8gVGhpcyBjb2FsZXNjZXMgYWRqYWNlbnQgJiBvdmVybGFwcGluZyBjaHVua3MgdG8gbWluaW1pemUgZmV0Y2hlcy5cbi8vIEl0IGFsc28gYXBwbGllcyB0aGUgXCJsaW5lYXIgb3B0aW1pemF0aW9uXCIsIHdoaWNoIGNhbiBncmVhdGx5IHJlZHVjZSB0aGVcbi8vIG51bWJlciBvZiBuZXR3b3JrIGZldGNoZXMgbmVlZGVkIHRvIGZ1bGZpbGwgYSByZXF1ZXN0LlxuZnVuY3Rpb24gb3B0aW1pemVDaHVua0xpc3QoY2h1bmtMaXN0OiBDaHVua1tdLCBtaW5pbXVtT2Zmc2V0OiBWaXJ0dWFsT2Zmc2V0KTogQ2h1bmtbXSB7XG4gIGNodW5rTGlzdC5zb3J0KChhLCBiKSA9PiB7XG4gICAgdmFyIHJlc3VsdCA9IGEuY2h1bmtfYmVnLmNvbXBhcmVUbyhiLmNodW5rX2JlZyk7XG4gICAgaWYgKHJlc3VsdCA9PT0gMCkge1xuICAgICAgcmVzdWx0ID0gYS5jaHVua19lbmQuY29tcGFyZVRvKGIuY2h1bmtfZW5kKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSk7XG5cbiAgdmFyIG5ld0NodW5rcyA9IFtdO1xuICBjaHVua0xpc3QuZm9yRWFjaChjaHVuayA9PiB7XG4gICAgaWYgKGNodW5rLmNodW5rX2VuZC5pc0xlc3NUaGFuKG1pbmltdW1PZmZzZXQpKSB7XG4gICAgICByZXR1cm47ICAvLyBsaW5lYXIgaW5kZXggb3B0aW1pemF0aW9uXG4gICAgfVxuXG4gICAgaWYgKG5ld0NodW5rcy5sZW5ndGggPT09IDApIHtcbiAgICAgIG5ld0NodW5rcy5wdXNoKGNodW5rKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgbGFzdENodW5rID0gbmV3Q2h1bmtzW25ld0NodW5rcy5sZW5ndGggLSAxXTtcbiAgICBpZiAoIWRvQ2h1bmtzT3ZlcmxhcChsYXN0Q2h1bmssIGNodW5rKSAmJlxuICAgICAgICAhYXJlQ2h1bmtzQWRqYWNlbnQobGFzdENodW5rLCBjaHVuaykpIHtcbiAgICAgIG5ld0NodW5rcy5wdXNoKGNodW5rKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGxhc3RDaHVuay5jaHVua19lbmQuaXNMZXNzVGhhbihjaHVuay5jaHVua19lbmQpKSB7XG4gICAgICAgIGxhc3RDaHVuay5jaHVua19lbmQgPSBjaHVuay5jaHVua19lbmQ7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICByZXR1cm4gbmV3Q2h1bmtzO1xufVxuXG4vLyBUaGlzIHZlcnNpb24gb2YgQmFpRmlsZSBpcyBub3QgY29tcGxldGVseSBpbW1lZGlhdGUsIGJ1dCBpdCBkb2VzIGd1YXJhbnRlZVxuLy8gdGhhdCB0aGUgaW5kZXggY2h1bmtzIGFyZSBhdmFpbGFibGUuXG5jbGFzcyBJbW1lZGlhdGVCYWlGaWxlIHtcbiAgYnVmZmVyOiA/QXJyYXlCdWZmZXI7XG4gIHJlbW90ZUZpbGU6IFJlbW90ZUZpbGU7XG4gIGluZGV4Q2h1bmtzOiBPYmplY3Q7XG4gIGluZGV4Q2FjaGU6IFEuUHJvbWlzZTxPYmplY3Q+W107ICAvLyByZWYgSUQgLT4gcGFyc2VkIEJhaUluZGV4XG4gIGludGVydmFsc0NhY2hlOiBBcnJheTw/VmlydHVhbE9mZnNldFtdPjsgIC8vIHJlZiBJRCAtPiBsaW5lYXIgaW5kZXhcblxuICBjb25zdHJ1Y3RvcihidWZmZXI6ID9BcnJheUJ1ZmZlciwgcmVtb3RlRmlsZTogUmVtb3RlRmlsZSwgaW5kZXhDaHVua3M/OiBPYmplY3QpIHtcbiAgICB0aGlzLmJ1ZmZlciA9IGJ1ZmZlcjtcbiAgICB0aGlzLnJlbW90ZUZpbGUgPSByZW1vdGVGaWxlO1xuICAgIGlmIChidWZmZXIpIHtcbiAgICAgIHRoaXMuaW5kZXhDaHVua3MgPSBjb21wdXRlSW5kZXhDaHVua3MoYnVmZmVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGluZGV4Q2h1bmtzKSB7XG4gICAgICAgIHRoaXMuaW5kZXhDaHVua3MgPSBpbmRleENodW5rcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93ICdXaXRob3V0IGluZGV4IGNodW5rcywgdGhlIGVudGlyZSBCQUkgYnVmZmVyIG11c3QgYmUgbG9hZGVkJztcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5pbmRleENhY2hlID0gbmV3IEFycmF5KHRoaXMuaW5kZXhDaHVua3MuY2h1bmtzLmxlbmd0aCk7XG4gICAgdGhpcy5pbnRlcnZhbHNDYWNoZSA9IG5ldyBBcnJheSh0aGlzLmluZGV4Q2h1bmtzLmNodW5rcy5sZW5ndGgpO1xuICB9XG5cbiAgZ2V0Q2h1bmtzRm9ySW50ZXJ2YWwocmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj4pOiBRLlByb21pc2U8Q2h1bmtbXT4ge1xuICAgIGlmIChyYW5nZS5jb250aWcgPCAwIHx8IHJhbmdlLmNvbnRpZyA+IHRoaXMuaW5kZXhDaHVua3MuY2h1bmtzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFEucmVqZWN0KGBJbnZhbGlkIGNvbnRpZyAke3JhbmdlLmNvbnRpZ31gKTtcbiAgICB9XG5cbiAgICB2YXIgYmlucyA9IHJlZzJiaW5zKHJhbmdlLnN0YXJ0KCksIHJhbmdlLnN0b3AoKSArIDEpO1xuXG4gICAgcmV0dXJuIHRoaXMuaW5kZXhGb3JDb250aWcocmFuZ2UuY29udGlnKS50aGVuKGNvbnRpZ0luZGV4ID0+IHtcbiAgICAgIHZhciBjaHVua3MgPSBfLmNoYWluKGNvbnRpZ0luZGV4LmJpbnMpXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoYiA9PiBiaW5zLmluZGV4T2YoYi5iaW4pID49IDApXG4gICAgICAgICAgICAgICAgICAgIC5tYXAoYiA9PiByZWFkQ2h1bmtzKGIuY2h1bmtzKSlcbiAgICAgICAgICAgICAgICAgICAgLmZsYXR0ZW4oKVxuICAgICAgICAgICAgICAgICAgICAudmFsdWUoKTtcblxuICAgICAgdmFyIGxpbmVhckluZGV4ID0gdGhpcy5nZXRJbnRlcnZhbHMoY29udGlnSW5kZXguaW50ZXJ2YWxzLCByYW5nZS5jb250aWcpO1xuICAgICAgdmFyIHN0YXJ0SWR4ID0gTWF0aC5tYXgoMCwgTWF0aC5mbG9vcihyYW5nZS5zdGFydCgpIC8gMTYzODQpKTtcbiAgICAgIHZhciBtaW5pbXVtT2Zmc2V0ID0gbGluZWFySW5kZXhbc3RhcnRJZHhdO1xuXG4gICAgICBjaHVua3MgPSBvcHRpbWl6ZUNodW5rTGlzdChjaHVua3MsIG1pbmltdW1PZmZzZXQpO1xuXG4gICAgICByZXR1cm4gY2h1bmtzO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gUmV0cmlldmUgYW5kIHBhcnNlIHRoZSBpbmRleCBmb3IgYSBwYXJ0aWN1bGFyIGNvbnRpZy5cbiAgaW5kZXhGb3JDb250aWcoY29udGlnOiBudW1iZXIpOiBRLlByb21pc2U8T2JqZWN0PiB7XG4gICAgdmFyIHYgPSB0aGlzLmluZGV4Q2FjaGVbY29udGlnXTtcbiAgICBpZiAodikge1xuICAgICAgcmV0dXJuIHY7XG4gICAgfVxuXG4gICAgdmFyIFtzdGFydCwgc3RvcF0gPSB0aGlzLmluZGV4Q2h1bmtzLmNodW5rc1tjb250aWddO1xuICAgIHRoaXMuaW5kZXhDYWNoZVtjb250aWddID0gdGhpcy5nZXRTbGljZShzdGFydCwgc3RvcCkudGhlbihidWZmZXIgPT4ge1xuICAgICAgdmFyIGpiID0gbmV3IGpCaW5hcnkoYnVmZmVyLCBiYW1UeXBlcy5UWVBFX1NFVCk7XG4gICAgICByZXR1cm4gamIucmVhZCgnQmFpSW5kZXgnKTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5pbmRleENhY2hlW2NvbnRpZ107XG4gIH1cblxuICBnZXRTbGljZShzdGFydDogbnVtYmVyLCBzdG9wOiBudW1iZXIpOiBRLlByb21pc2U8QXJyYXlCdWZmZXI+IHtcbiAgICBpZiAodGhpcy5idWZmZXIpIHtcbiAgICAgIHJldHVybiBRLndoZW4odGhpcy5idWZmZXIuc2xpY2Uoc3RhcnQsIHN0b3ApKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRmlsZS5nZXRCeXRlcyhzdGFydCwgc3RvcCAtIHN0YXJ0ICsgMSk7XG4gICAgfVxuICB9XG5cbiAgLy8gQ2FjaGVkIHdyYXBwZXIgYXJvdW5kIHJlYWRJbnRlcnZhbHMoKVxuICBnZXRJbnRlcnZhbHMoYmxvYjogVWludDhBcnJheSwgcmVmSWQ6IG51bWJlcik6IFZpcnR1YWxPZmZzZXRbXSB7XG4gICAgdmFyIGxpbmVhckluZGV4ID0gdGhpcy5pbnRlcnZhbHNDYWNoZVtyZWZJZF07XG4gICAgaWYgKGxpbmVhckluZGV4KSB7XG4gICAgICByZXR1cm4gbGluZWFySW5kZXg7XG4gICAgfVxuICAgIGxpbmVhckluZGV4ID0gcmVhZEludGVydmFscyhibG9iKTtcbiAgICB0aGlzLmludGVydmFsc0NhY2hlW3JlZklkXSA9IGxpbmVhckluZGV4O1xuICAgIHJldHVybiBsaW5lYXJJbmRleDtcbiAgfVxufVxuXG5cbmNsYXNzIEJhaUZpbGUge1xuICByZW1vdGVGaWxlOiBSZW1vdGVGaWxlO1xuICBpbW1lZGlhdGU6IFEuUHJvbWlzZTxJbW1lZGlhdGVCYWlGaWxlPjtcblxuICBjb25zdHJ1Y3RvcihyZW1vdGVGaWxlOiBSZW1vdGVGaWxlLCBpbmRleENodW5rcz86IE9iamVjdCkge1xuICAgIHRoaXMucmVtb3RlRmlsZSA9IHJlbW90ZUZpbGU7XG4gICAgaWYgKGluZGV4Q2h1bmtzKSB7XG4gICAgICB0aGlzLmltbWVkaWF0ZSA9IFEud2hlbihuZXcgSW1tZWRpYXRlQmFpRmlsZShudWxsLCByZW1vdGVGaWxlLCBpbmRleENodW5rcykpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmltbWVkaWF0ZSA9IHJlbW90ZUZpbGUuZ2V0QWxsKCkudGhlbihidWYgPT4ge1xuICAgICAgICByZXR1cm4gbmV3IEltbWVkaWF0ZUJhaUZpbGUoYnVmLCByZW1vdGVGaWxlLCBpbmRleENodW5rcyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgdGhpcy5pbW1lZGlhdGUuZG9uZSgpO1xuICB9XG5cbiAgZ2V0Q2h1bmtzRm9ySW50ZXJ2YWwocmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj4pOiBRLlByb21pc2U8Q2h1bmtbXT4ge1xuICAgIHJldHVybiB0aGlzLmltbWVkaWF0ZS50aGVuKGltbWVkaWF0ZSA9PiB7XG4gICAgICByZXR1cm4gaW1tZWRpYXRlLmdldENodW5rc0ZvckludGVydmFsKHJhbmdlKTtcbiAgICB9KTtcbiAgfVxuXG4gIGdldEhlYWRlclNpemUoKTogUS5Qcm9taXNlPG51bWJlcj4ge1xuICAgIHJldHVybiB0aGlzLmltbWVkaWF0ZS50aGVuKGltbWVkaWF0ZSA9PiB7XG4gICAgICByZXR1cm4gaW1tZWRpYXRlLmluZGV4Q2h1bmtzLm1pbkJsb2NrSW5kZXg7XG4gICAgfSk7XG4gIH1cbn1cblxuXG4vLyBUaGVzZSBmdW5jdGlvbnMgY29tZSBkaXJlY3RseSBmcm9tIHRoZSBTQU0gcGFwZXJcbi8vIFNlZSBodHRwczovL3NhbXRvb2xzLmdpdGh1Yi5pby9odHMtc3BlY3MvU0FNdjEucGRmIHNlY3Rpb24gNS4zXG5cbi8vIGNhbGN1bGF0ZSB0aGUgbGlzdCBvZiBiaW5zIHRoYXQgbWF5IG92ZXJsYXAgd2l0aCByZWdpb24gW2JlZyxlbmQpICh6ZXJvLWJhc2VkKVxuZnVuY3Rpb24gcmVnMmJpbnMoYmVnLCBlbmQpIHtcbiAgdmFyIGssIGxpc3QgPSBbXTtcbiAgLS1lbmQ7XG4gIGxpc3QucHVzaCgwKTtcbiAgZm9yIChrID0gICAgMSArIChiZWc+PjI2KTsgayA8PSAgICAxICsgKGVuZD4+MjYpOyArK2spIGxpc3QucHVzaChrKTtcbiAgZm9yIChrID0gICAgOSArIChiZWc+PjIzKTsgayA8PSAgICA5ICsgKGVuZD4+MjMpOyArK2spIGxpc3QucHVzaChrKTtcbiAgZm9yIChrID0gICA3MyArIChiZWc+PjIwKTsgayA8PSAgIDczICsgKGVuZD4+MjApOyArK2spIGxpc3QucHVzaChrKTtcbiAgZm9yIChrID0gIDU4NSArIChiZWc+PjE3KTsgayA8PSAgNTg1ICsgKGVuZD4+MTcpOyArK2spIGxpc3QucHVzaChrKTtcbiAgZm9yIChrID0gNDY4MSArIChiZWc+PjE0KTsgayA8PSA0NjgxICsgKGVuZD4+MTQpOyArK2spIGxpc3QucHVzaChrKTtcbiAgcmV0dXJuIGxpc3Q7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQmFpRmlsZTtcbiIsIi8qKlxuICogVG9vbHMgZm9yIHBhcnNpbmcgQkFNIGZpbGVzLlxuICogU2VlIGh0dHBzOi8vc2FtdG9vbHMuZ2l0aHViLmlvL2h0cy1zcGVjcy9TQU12MS5wZGZcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUgUmVtb3RlRmlsZSBmcm9tICcuLi9SZW1vdGVGaWxlJztcbmltcG9ydCB0eXBlIHtDaHVuaywgSW5mbGF0ZWRCbG9ja30gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQgakJpbmFyeSBmcm9tICdqYmluYXJ5JztcbmltcG9ydCBqRGF0YVZpZXcgZnJvbSAnamRhdGF2aWV3JztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IFEgZnJvbSAncSc7XG5cbmltcG9ydCBiYW1UeXBlcyBmcm9tICcuL2Zvcm1hdHMvYmFtVHlwZXMnO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCBCYWlGaWxlIGZyb20gJy4vYmFpJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgVmlydHVhbE9mZnNldCBmcm9tICcuL1ZpcnR1YWxPZmZzZXQnO1xuaW1wb3J0IFNhbVJlYWQgZnJvbSAnLi9TYW1SZWFkJztcblxuXG4vKipcbiAqIFRoZSAnY29udGFpbmVkJyBwYXJhbWV0ZXIgY29udHJvbHMgd2hldGhlciB0aGUgYWxpZ25tZW50cyBtdXN0IGJlIGZ1bGx5XG4gKiBjb250YWluZWQgd2l0aGluIHRoZSByYW5nZSwgb3IgbmVlZCBvbmx5IG92ZXJsYXAgaXQuXG4gKi9cbmZ1bmN0aW9uIGlzQWxpZ25tZW50SW5SYW5nZShyZWFkOiBTYW1SZWFkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkeFJhbmdlOiBDb250aWdJbnRlcnZhbDxudW1iZXI+LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lZDogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAvLyBUT0RPOiBVc2UgY2lnYXIuZ2V0UmVmZXJlbmNlTGVuZ3RoKCkgaW5zdGVhZCBvZiBsX3NlcSwgbGlrZSBodHNqZGsuIFxuICB2YXIgcmVhZFJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKHJlYWQucmVmSUQsIHJlYWQucG9zLCByZWFkLnBvcyArIHJlYWQubF9zZXEgLSAxKTtcbiAgaWYgKGNvbnRhaW5lZCkge1xuICAgIHJldHVybiBpZHhSYW5nZS5jb250YWluc0ludGVydmFsKHJlYWRSYW5nZSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHJlYWRSYW5nZS5pbnRlcnNlY3RzKGlkeFJhbmdlKTtcbiAgfVxufVxuXG5cbnZhciBrTWF4RmV0Y2ggPSA2NTUzNiAqIDI7XG5cbi8vIFJlYWQgYSBzaW5nbGUgYWxpZ25tZW50XG5mdW5jdGlvbiByZWFkQWxpZ25tZW50KHZpZXc6IGpEYXRhVmlldywgcG9zOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgIG9mZnNldDogVmlydHVhbE9mZnNldCwgcmVmTmFtZTogc3RyaW5nKSB7XG4gIHZhciByZWFkTGVuZ3RoID0gdmlldy5nZXRJbnQzMihwb3MpO1xuICBwb3MgKz0gNDtcblxuICBpZiAocG9zICsgcmVhZExlbmd0aCA+IHZpZXcuYnl0ZUxlbmd0aCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdmFyIHJlYWRTbGljZSA9IHZpZXcuYnVmZmVyLnNsaWNlKHBvcywgcG9zICsgcmVhZExlbmd0aCk7XG5cbiAgdmFyIHJlYWQgPSBuZXcgU2FtUmVhZChyZWFkU2xpY2UsIG9mZnNldC5jbG9uZSgpLCByZWZOYW1lKTtcbiAgcmV0dXJuIHtcbiAgICByZWFkLFxuICAgIHJlYWRMZW5ndGg6IDQgKyByZWFkTGVuZ3RoXG4gIH07XG59XG5cbi8vIFRoaXMgdHJhY2tzIGhvdyBtYW55IGJ5dGVzIHdlcmUgcmVhZC5cbmZ1bmN0aW9uIHJlYWRBbGlnbm1lbnRzVG9FbmQoYnVmZmVyOiBBcnJheUJ1ZmZlcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVmTmFtZTogc3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHhSYW5nZTogQ29udGlnSW50ZXJ2YWw8bnVtYmVyPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVkOiBib29sZWFuLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IFZpcnR1YWxPZmZzZXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsb2NrczogSW5mbGF0ZWRCbG9ja1tdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbm1lbnRzOiBTYW1SZWFkW10pIHtcbiAgLy8gV2UgdXNlIGpEYXRhVmlldyBhbmQgQXJyYXlCdWZmZXIgZGlyZWN0bHkgZm9yIGEgc3BlZWR1cCBvdmVyIGpCaW5hcnkuXG4gIC8vIFRoaXMgcGFyc2VzIHJlYWRzIH4yLTN4IGZhc3RlciB0aGFuIHVzaW5nIFRoaW5BbGlnbm1lbnQgZGlyZWN0bHkuXG4gIHZhciBqdiA9IG5ldyBqRGF0YVZpZXcoYnVmZmVyLCAwLCBidWZmZXIuYnl0ZUxlbmd0aCwgdHJ1ZSAvKiBsaXR0bGUgZW5kaWFuICovKTtcbiAgdmFyIHNob3VsZEFib3J0ID0gZmFsc2U7XG4gIHZhciBwb3MgPSAwO1xuICBvZmZzZXQgPSBvZmZzZXQuY2xvbmUoKTtcbiAgdmFyIGJsb2NrSW5kZXggPSAwO1xuICB0cnkge1xuICAgIHdoaWxlIChwb3MgPCBidWZmZXIuYnl0ZUxlbmd0aCkge1xuICAgICAgdmFyIHJlYWREYXRhID0gcmVhZEFsaWdubWVudChqdiwgcG9zLCBvZmZzZXQsIHJlZk5hbWUpO1xuICAgICAgaWYgKCFyZWFkRGF0YSkgYnJlYWs7XG5cbiAgICAgIHZhciB7cmVhZCwgcmVhZExlbmd0aH0gPSByZWFkRGF0YTtcbiAgICAgIHBvcyArPSByZWFkTGVuZ3RoO1xuICAgICAgaWYgKGlzQWxpZ25tZW50SW5SYW5nZShyZWFkLCBpZHhSYW5nZSwgY29udGFpbmVkKSkge1xuICAgICAgICBhbGlnbm1lbnRzLnB1c2gocmVhZCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFkdmFuY2UgdGhlIFZpcnR1YWxPZmZzZXQgdG8gcmVmbGVjdCB0aGUgbmV3IHBvc2l0aW9uXG4gICAgICBvZmZzZXQudW9mZnNldCArPSByZWFkTGVuZ3RoO1xuICAgICAgdmFyIGJ1ZkxlbiA9IGJsb2Nrc1tibG9ja0luZGV4XS5idWZmZXIuYnl0ZUxlbmd0aDtcbiAgICAgIGlmIChvZmZzZXQudW9mZnNldCA+PSBidWZMZW4pIHtcbiAgICAgICAgb2Zmc2V0LnVvZmZzZXQgLT0gYnVmTGVuO1xuICAgICAgICBvZmZzZXQuY29mZnNldCArPSBibG9ja3NbYmxvY2tJbmRleF0uY29tcHJlc3NlZExlbmd0aDtcbiAgICAgICAgYmxvY2tJbmRleCsrO1xuICAgICAgfVxuXG4gICAgICAvLyBPcHRpbWl6YXRpb246IGlmIHRoZSBsYXN0IGFsaWdubWVudCBzdGFydGVkIGFmdGVyIHRoZSByZXF1ZXN0ZWQgcmFuZ2UsXG4gICAgICAvLyB0aGVuIG5vIG90aGVyIGNodW5rcyBjYW4gcG9zc2libHkgY29udGFpbiBtYXRjaGluZyBhbGlnbm1lbnRzLlxuICAgICAgLy8gVE9ETzogdXNlIGNvbnRpZ0ludGVydmFsLmlzQWZ0ZXJJbnRlcnZhbCB3aGVuIHRoYXQncyBwb3NzaWJsZS5cbiAgICAgIHZhciByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChyZWFkLnJlZklELCByZWFkLnBvcywgcmVhZC5wb3MgKyAxKTtcbiAgICAgIGlmIChyYW5nZS5jb250aWcgPiBpZHhSYW5nZS5jb250aWcgfHxcbiAgICAgICAgICAocmFuZ2UuY29udGlnID09IGlkeFJhbmdlLmNvbnRpZyAmJiByYW5nZS5zdGFydCgpID4gaWR4UmFuZ2Uuc3RvcCgpKSkge1xuICAgICAgICBzaG91bGRBYm9ydCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBDb2RlIGdldHMgaGVyZSBpZiB0aGUgY29tcHJlc3Npb24gYmxvY2sgZW5kZWQgZXhhY3RseSBhdCB0aGUgZW5kIG9mXG4gICAgLy8gYW4gQWxpZ25tZW50LlxuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gUGFydGlhbCByZWNvcmRcbiAgICBpZiAoIShlIGluc3RhbmNlb2YgUmFuZ2VFcnJvcikpIHtcbiAgICAgIHRocm93IGU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzaG91bGRBYm9ydCxcbiAgICBuZXh0T2Zmc2V0OiBvZmZzZXRcbiAgfTtcbn1cblxuLy8gRmV0Y2ggYWxpZ25tZW50cyBmcm9tIHRoZSByZW1vdGUgc291cmNlIGF0IHRoZSBsb2NhdGlvbnMgc3BlY2lmaWVkIGJ5IENodW5rcy5cbi8vIFRoaXMgY2FuIHBvdGVudGlhbGx5IHJlc3VsdCBpbiBtYW55IG5ldHdvcmsgcmVxdWVzdHMuXG4vLyBUaGUgcmV0dXJuZWQgcHJvbWlzZSBpcyBmdWxmaWxsZWQgb25jZSBpdCBjYW4gYmUgcHJvdmVkIHRoYXQgbm8gbW9yZVxuLy8gYWxpZ25tZW50cyBuZWVkIHRvIGJlIGZldGNoZWQuXG5mdW5jdGlvbiBmZXRjaEFsaWdubWVudHMocmVtb3RlRmlsZTogUmVtb3RlRmlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICByZWZOYW1lOiBzdHJpbmcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgaWR4UmFuZ2U6IENvbnRpZ0ludGVydmFsPG51bWJlcj4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVkOiBib29sZWFuLFxuICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rczogQ2h1bmtbXSk6IFEuUHJvbWlzZTxTYW1SZWFkW10+IHtcblxuICB2YXIgbnVtUmVxdWVzdHMgPSAwLFxuICAgICAgYWxpZ25tZW50cyA9IFtdLFxuICAgICAgZGVmZXJyZWQgPSBRLmRlZmVyKCk7XG5cbiAgZnVuY3Rpb24gZmV0Y2goY2h1bmtzKSB7XG4gICAgaWYgKGNodW5rcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGRlZmVycmVkLnJlc29sdmUoYWxpZ25tZW50cyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTmV2ZXIgZmV0Y2ggbW9yZSB0aGFuIDEyOGsgYXQgYSB0aW1lIC0tIHRoaXMgcmVkdWNlcyBjb250ZW50aW9uIG9uIHRoZVxuICAgIC8vIG1haW4gdGhyZWFkIGFuZCBjYW4gYXZvaWQgc2VuZGluZyB1bm5lY2Vzc2FyeSBieXRlcyBvdmVyIHRoZSBuZXR3b3JrLlxuICAgIHZhciBjaHVuayA9IGNodW5rc1swXSxcbiAgICAgICAgY2h1bmtfYmVnID0gY2h1bmsuY2h1bmtfYmVnLmNvZmZzZXQsXG4gICAgICAgIGNodW5rX2VuZCA9IGNodW5rLmNodW5rX2VuZC5jb2Zmc2V0O1xuICAgIHZhciBieXRlc1RvRmV0Y2ggPSBNYXRoLm1pbihrTWF4RmV0Y2gsIChjaHVua19lbmQgKyA2NTUzNikgLSBjaHVua19iZWcpO1xuICAgIHJlbW90ZUZpbGUuZ2V0Qnl0ZXMoY2h1bmtfYmVnLCBieXRlc1RvRmV0Y2gpLnRoZW4oYnVmZmVyID0+IHtcbiAgICAgIG51bVJlcXVlc3RzKys7XG4gICAgICBkZWZlcnJlZC5ub3RpZnkoe251bVJlcXVlc3RzfSk7XG4gICAgICB2YXIgY2FjaGVLZXkgPSB7XG4gICAgICAgIGZpbGVuYW1lOiByZW1vdGVGaWxlLnVybCxcbiAgICAgICAgaW5pdGlhbE9mZnNldDogY2h1bmtfYmVnXG4gICAgICB9O1xuICAgICAgdmFyIGJsb2NrcyA9IHV0aWxzLmluZmxhdGVDb25jYXRlbmF0ZWRHemlwKGJ1ZmZlciwgY2h1bmtfZW5kIC0gY2h1bmtfYmVnLCBjYWNoZUtleSk7XG5cbiAgICAgIC8vIElmIHRoZSBjaHVuayBoYXNuJ3QgYmVlbiBleGhhdXN0ZWQsIHJlc3VtZSBpdCBhdCBhbiBhcHByb3ByaWF0ZSBwbGFjZS5cbiAgICAgIC8vIFRoZSBsYXN0IGJsb2NrIG5lZWRzIHRvIGJlIHJlLXJlYWQsIHNpbmNlIGl0IG1heSBub3QgaGF2ZSBiZWVuIGV4aGF1c3RlZC5cbiAgICAgIHZhciBsYXN0QmxvY2sgPSBibG9ja3NbYmxvY2tzLmxlbmd0aCAtIDFdLFxuICAgICAgICAgIGxhc3RCeXRlID0gY2h1bmtfYmVnICsgbGFzdEJsb2NrLm9mZnNldCAtIDEsXG4gICAgICAgICAgbmV3Q2h1bmsgPSBudWxsO1xuICAgICAgaWYgKGJsb2Nrcy5sZW5ndGggPiAxICYmIGxhc3RCeXRlIDwgY2h1bmtfZW5kKSB7XG4gICAgICAgIG5ld0NodW5rID0ge1xuICAgICAgICAgIGNodW5rX2JlZzogbmV3IFZpcnR1YWxPZmZzZXQobGFzdEJ5dGUgKyAxLCAwKSxcbiAgICAgICAgICBjaHVua19lbmQ6IGNodW5rLmNodW5rX2VuZFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICB2YXIgYnVmZmVycyA9IGJsb2Nrcy5tYXAoeCA9PiB4LmJ1ZmZlcik7XG4gICAgICBidWZmZXJzWzBdID0gYnVmZmVyc1swXS5zbGljZShjaHVuay5jaHVua19iZWcudW9mZnNldCk7XG4gICAgICB2YXIgZGVjb21wID0gdXRpbHMuY29uY2F0QXJyYXlCdWZmZXJzKGJ1ZmZlcnMpO1xuICAgICAgaWYgKGRlY29tcC5ieXRlTGVuZ3RoID4gMCkge1xuICAgICAgICB2YXIge3Nob3VsZEFib3J0LCBuZXh0T2Zmc2V0fSA9XG4gICAgICAgICAgICByZWFkQWxpZ25tZW50c1RvRW5kKGRlY29tcCwgcmVmTmFtZSwgaWR4UmFuZ2UsIGNvbnRhaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsuY2h1bmtfYmVnLCBibG9ja3MsIGFsaWdubWVudHMpO1xuICAgICAgICBpZiAoc2hvdWxkQWJvcnQpIHtcbiAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGFsaWdubWVudHMpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmV3Q2h1bmspIHtcbiAgICAgICAgICBuZXdDaHVuay5jaHVua19iZWcgPSBuZXh0T2Zmc2V0O1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdDaHVuayA9IG51bGw7ICAvLyBUaGlzIGlzIG1vc3QgbGlrZWx5IEVPRlxuICAgICAgfVxuXG4gICAgICBmZXRjaCgobmV3Q2h1bmsgPyBbbmV3Q2h1bmtdIDogW10pLmNvbmNhdChfLnJlc3QoY2h1bmtzKSkpO1xuICAgIH0pO1xuICB9XG5cbiAgZmV0Y2goY2h1bmtzKTtcbiAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XG59XG5cbiBcbmNsYXNzIEJhbSB7XG4gIGluZGV4OiA/QmFpRmlsZTtcbiAgaGVhZGVyOiBRLlByb21pc2U8T2JqZWN0PjtcbiAgcmVtb3RlRmlsZTogUmVtb3RlRmlsZTtcbiAgaGFzSW5kZXhDaHVua3M6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IocmVtb3RlRmlsZTogUmVtb3RlRmlsZSxcbiAgICAgICAgICAgICAgcmVtb3RlSW5kZXhGaWxlPzogUmVtb3RlRmlsZSxcbiAgICAgICAgICAgICAgaW5kZXhDaHVua3M/OiBPYmplY3QpIHtcbiAgICB0aGlzLnJlbW90ZUZpbGUgPSByZW1vdGVGaWxlO1xuICAgIHRoaXMuaW5kZXggPSByZW1vdGVJbmRleEZpbGUgPyBuZXcgQmFpRmlsZShyZW1vdGVJbmRleEZpbGUsIGluZGV4Q2h1bmtzKSA6IG51bGw7XG4gICAgdGhpcy5oYXNJbmRleENodW5rcyA9ICEhaW5kZXhDaHVua3M7XG5cbiAgICB2YXIgc2l6ZVByb21pc2UgPSB0aGlzLmluZGV4ID8gdGhpcy5pbmRleC5nZXRIZWFkZXJTaXplKCkgOiBRLndoZW4oMiAqIDY1NTM1KTtcbiAgICB0aGlzLmhlYWRlciA9IHNpemVQcm9taXNlLnRoZW4oc2l6ZSA9PiB7XG4gICAgICB2YXIgZGVmID0gUS5kZWZlcigpO1xuICAgICAgLy8gVGhpcyBoYXBwZW5zIGluIHRoZSBuZXh0IGV2ZW50IGxvb3AgdG8gZ2l2ZSBsaXN0ZW5lcnMgYSBjaGFuY2UgdG8gcmVnaXN0ZXIuXG4gICAgICBRLndoZW4oKS50aGVuKCgpID0+IHsgZGVmLm5vdGlmeSh7c3RhdHVzOiAnRmV0Y2hpbmcgQkFNIGhlYWRlcid9KTsgfSk7XG4gICAgICB1dGlscy5waXBlUHJvbWlzZShcbiAgICAgICAgICBkZWYsXG4gICAgICAgICAgdGhpcy5yZW1vdGVGaWxlLmdldEJ5dGVzKDAsIHNpemUpLnRoZW4oYnVmID0+IHtcbiAgICAgICAgICAgIHZhciBkZWNvbXAgPSB1dGlscy5pbmZsYXRlR3ppcChidWYpO1xuICAgICAgICAgICAgdmFyIGpiID0gbmV3IGpCaW5hcnkoZGVjb21wLCBiYW1UeXBlcy5UWVBFX1NFVCk7XG4gICAgICAgICAgICByZXR1cm4gamIucmVhZCgnQmFtSGVhZGVyJyk7XG4gICAgICAgICAgfSkpO1xuICAgICAgcmV0dXJuIGRlZi5wcm9taXNlO1xuICAgIH0pO1xuICAgIHRoaXMuaGVhZGVyLmRvbmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkcyB0aGUgZW50aXJlIEJBTSBmaWxlIGZyb20gdGhlIHJlbW90ZSBzb3VyY2UgYW5kIHBhcnNlcyBpdC5cbiAgICogU2luY2UgQkFNIGZpbGVzIGNhbiBiZSBlbm9ybW91cyAoaHVuZHJlZHMgb2YgR0IpLCB0aGlzIGlzIG9ubHkgcmVjb21tZW5kZWRcbiAgICogZm9yIHNtYWxsIHRlc3QgaW5wdXRzLlxuICAgKi9cbiAgcmVhZEFsbCgpOiBRLlByb21pc2U8T2JqZWN0PiB7XG4gICAgcmV0dXJuIHRoaXMucmVtb3RlRmlsZS5nZXRBbGwoKS50aGVuKGJ1ZiA9PiB7XG4gICAgICB2YXIgZGVjb21wID0gdXRpbHMuaW5mbGF0ZUd6aXAoYnVmKTtcbiAgICAgIHZhciBqYiA9IG5ldyBqQmluYXJ5KGRlY29tcCwgYmFtVHlwZXMuVFlQRV9TRVQpO1xuICAgICAgdmFyIG8gPSBqYi5yZWFkKCdCYW1GaWxlJyk7XG4gICAgICAvLyBEbyBzb21lIG1pbGQgcmUtc2hhcGluZy5cbiAgICAgIHZhciB2byA9IG5ldyBWaXJ0dWFsT2Zmc2V0KDAsIDApO1xuICAgICAgdmFyIHNsaWNlID0gZnVuY3Rpb24odTg6IFVpbnQ4QXJyYXkpIHtcbiAgICAgICAgcmV0dXJuIHU4LmJ1ZmZlci5zbGljZSh1OC5ieXRlT2Zmc2V0LCB1OC5ieXRlT2Zmc2V0ICsgdTguYnl0ZUxlbmd0aCAtIDEpO1xuICAgICAgfTtcbiAgICAgIG8uYWxpZ25tZW50cyA9IG8uYWxpZ25tZW50cy5tYXAoeCA9PiB7XG4gICAgICAgIHZhciByID0gbmV3IFNhbVJlYWQoc2xpY2UoeC5jb250ZW50cyksIHZvLCAnJyk7XG4gICAgICAgIGlmIChyLnJlZklEICE9IC0xKSB7XG4gICAgICAgICAgci5yZWYgPSBvLmhlYWRlci5yZWZlcmVuY2VzW3IucmVmSURdLm5hbWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHI7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBvO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGEgc2luZ2xlIHJlYWQgYXQgdGhlIGdpdmVuIFZpcnR1YWxPZmZzZXQuXG4gICAqIFRoaXMgaXMgaW5zYW5lbHkgaW5lZmZpY2llbnQgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBvdXRzaWRlIG9mIHRlc3RpbmcuXG4gICAqL1xuICByZWFkQXRPZmZzZXQob2Zmc2V0OiBWaXJ0dWFsT2Zmc2V0KTogUS5Qcm9taXNlPFNhbVJlYWQ+IHtcbiAgICByZXR1cm4gdGhpcy5yZW1vdGVGaWxlLmdldEJ5dGVzKG9mZnNldC5jb2Zmc2V0LCBrTWF4RmV0Y2gpLnRoZW4oZ3ppcCA9PiB7XG4gICAgICB2YXIgYnVmID0gdXRpbHMuaW5mbGF0ZUd6aXAoZ3ppcCk7XG4gICAgICB2YXIganYgPSBuZXcgakRhdGFWaWV3KGJ1ZiwgMCwgYnVmLmJ5dGVMZW5ndGgsIHRydWUgLyogbGl0dGxlIGVuZGlhbiAqLyk7XG4gICAgICB2YXIgcmVhZERhdGEgPSByZWFkQWxpZ25tZW50KGp2LCBvZmZzZXQudW9mZnNldCwgb2Zmc2V0LCAnJyk7XG4gICAgICBpZiAoIXJlYWREYXRhKSB7XG4gICAgICAgIHRocm93IGBVbmFibGUgdG8gcmVhZCBhbGlnbm1lbnQgYXQgJHtvZmZzZXR9IGluICR7dGhpcy5yZW1vdGVGaWxlLnVybH1gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQXR0YWNoIHRoZSBodW1hbi1yZWFkYWJsZSByZWYgbmFtZVxuICAgICAgICB2YXIgcmVhZCA9IHJlYWREYXRhLnJlYWQ7XG4gICAgICAgIHJldHVybiB0aGlzLmhlYWRlci50aGVuKGhlYWRlciA9PiB7XG4gICAgICAgICAgcmVhZC5yZWYgPSBoZWFkZXIucmVmZXJlbmNlc1tyZWFkLnJlZklEXS5uYW1lO1xuICAgICAgICAgIHJldHVybiByZWFkO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXAgYSBjb250aWcgbmFtZSB0byBhIGNvbnRpZyBpbmRleCBhbmQgY2Fub25pY2FsIG5hbWUuXG4gICAqL1xuICBnZXRDb250aWdJbmRleChjb250aWdOYW1lOiBzdHJpbmcpOiBRLlByb21pc2U8e2lkeDogbnVtYmVyOyBuYW1lOiBzdHJpbmd9PiB7XG4gICAgcmV0dXJuIHRoaXMuaGVhZGVyLnRoZW4oaGVhZGVyID0+IHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaGVhZGVyLnJlZmVyZW5jZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIG5hbWUgPSBoZWFkZXIucmVmZXJlbmNlc1tpXS5uYW1lO1xuICAgICAgICBpZiAobmFtZSA9PSBjb250aWdOYW1lIHx8XG4gICAgICAgICAgICBuYW1lID09ICdjaHInICsgY29udGlnTmFtZSB8fFxuICAgICAgICAgICAgJ2NocicgKyBuYW1lID09IGNvbnRpZ05hbWUpIHtcbiAgICAgICAgICByZXR1cm4ge2lkeDogaSwgbmFtZTogbmFtZX07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRocm93IGBJbnZhbGlkIGNvbnRpZyBuYW1lOiAke2NvbnRpZ05hbWV9YDtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCBhbGwgdGhlIGFsaWdubWVudHMgd2hpY2ggb3ZlcmxhcCBhIHJhbmdlLlxuICAgKiBUaGUgJ2NvbnRhaW5lZCcgcGFyYW1ldGVyIGNvbnRyb2xzIHdoZXRoZXIgdGhlIGFsaWdubWVudHMgbXVzdCBiZSBmdWxseVxuICAgKiBjb250YWluZWQgd2l0aGluIHRoZSByYW5nZSwgb3IgbmVlZCBvbmx5IG92ZXJsYXAgaXQuXG4gICAqL1xuICBnZXRBbGlnbm1lbnRzSW5SYW5nZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiwgb3B0X2NvbnRhaW5lZD86IGJvb2xlYW4pOiBRLlByb21pc2U8U2FtUmVhZFtdPiB7XG4gICAgdmFyIGNvbnRhaW5lZCA9IG9wdF9jb250YWluZWQgfHwgZmFsc2U7XG4gICAgaWYgKCF0aGlzLmluZGV4KSB7XG4gICAgICB0aHJvdyAnUmFuZ2Ugc2VhcmNoZXMgYXJlIG9ubHkgc3VwcG9ydGVkIG9uIEJBTXMgd2l0aCBCQUkgaW5kaWNlcy4nO1xuICAgIH1cbiAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4O1xuXG4gICAgcmV0dXJuIHRoaXMuZ2V0Q29udGlnSW5kZXgocmFuZ2UuY29udGlnKS50aGVuKCh7aWR4LCBuYW1lfSkgPT4ge1xuICAgICAgdmFyIGRlZiA9IFEuZGVmZXIoKTtcbiAgICAgIC8vIFRoaXMgaGFwcGVucyBpbiB0aGUgbmV4dCBldmVudCBsb29wIHRvIGdpdmUgbGlzdGVuZXJzIGEgY2hhbmNlIHRvIHJlZ2lzdGVyLlxuICAgICAgUS53aGVuKCkudGhlbigoKSA9PiB7IGRlZi5ub3RpZnkoe3N0YXR1czogJ0ZldGNoaW5nIEJBTSBpbmRleCd9KTsgfSk7XG5cbiAgICAgIHZhciBpZHhSYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChpZHgsIHJhbmdlLnN0YXJ0KCksIHJhbmdlLnN0b3AoKSk7XG5cbiAgICAgIHV0aWxzLnBpcGVQcm9taXNlKFxuICAgICAgICBkZWYsXG4gICAgICAgIGluZGV4LmdldENodW5rc0ZvckludGVydmFsKGlkeFJhbmdlKS50aGVuKGNodW5rcyA9PiB7XG4gICAgICAgICAgcmV0dXJuIGZldGNoQWxpZ25tZW50cyh0aGlzLnJlbW90ZUZpbGUsIG5hbWUsIGlkeFJhbmdlLCBjb250YWluZWQsIGNodW5rcyk7XG4gICAgICAgIH0pKTtcbiAgICAgIHJldHVybiBkZWYucHJvbWlzZTtcbiAgICB9KTtcbiAgfVxuXG59XG5cbm1vZHVsZS5leHBvcnRzID0gQmFtO1xuIiwiLyogQGZsb3cgKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi4vSW50ZXJ2YWwnO1xuXG5jbGFzcyBDb2RpbmdJbnRlcnZhbCBleHRlbmRzIEludGVydmFsIHtcbiAgaXNDb2Rpbmc6IGJvb2xlYW47XG4gIGNvbnN0cnVjdG9yKHN0YXJ0OiBudW1iZXIsIHN0b3A6IG51bWJlciwgaXNDb2Rpbmc6IGJvb2xlYW4pIHtcbiAgICBzdXBlcihzdGFydCwgc3RvcCk7XG4gICAgdGhpcy5pc0NvZGluZyA9IGlzQ29kaW5nO1xuICB9XG59XG5cbi8qKlxuICogU3BsaXQgZXhvbnMgd2hpY2ggY3Jvc3MgdGhlIGNvZGluZy9ub24tY29kaW5nIGJvdW5kYXJ5IGludG8gcHVyZWx5IGNvZGluZyAmXG4gKiBub24tY29kaW5nIHBhcnRzLlxuICovXG5mdW5jdGlvbiBzcGxpdENvZGluZ0V4b25zKGV4b25zOiBJbnRlcnZhbFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RpbmdSZWdpb246IEludGVydmFsKTogQ29kaW5nSW50ZXJ2YWxbXSB7XG4gIHJldHVybiBfLmZsYXR0ZW4oZXhvbnMubWFwKGV4b24gPT4ge1xuICAgIC8vIFNwZWNpYWwgY2FzZTogdGhlIGNvZGluZyByZWdpb24gaXMgZW50aXJlbHkgY29udGFpbmVkIGJ5IHRoaXMgZXhvbi5cbiAgICBpZiAoZXhvbi5jb250YWluc0ludGVydmFsKGNvZGluZ1JlZ2lvbikpIHtcbiAgICAgIC8vIHNwbGl0IGludG8gdGhyZWUgcGFydHMuXG4gICAgICByZXR1cm4gW1xuICAgICAgICAgIG5ldyBDb2RpbmdJbnRlcnZhbChleG9uLnN0YXJ0LCBjb2RpbmdSZWdpb24uc3RhcnQgLSAxLCBmYWxzZSksXG4gICAgICAgICAgbmV3IENvZGluZ0ludGVydmFsKGNvZGluZ1JlZ2lvbi5zdGFydCwgY29kaW5nUmVnaW9uLnN0b3AsIHRydWUpLFxuICAgICAgICAgIG5ldyBDb2RpbmdJbnRlcnZhbChjb2RpbmdSZWdpb24uc3RvcCArIDEsIGV4b24uc3RvcCwgZmFsc2UpXG4gICAgICBdLmZpbHRlcihpbnRlcnZhbCA9PiBpbnRlcnZhbC5zdGFydCA8PSBpbnRlcnZhbC5zdG9wKTtcbiAgICB9XG5cbiAgICB2YXIgc3RhcnRJc0NvZGluZyA9IGNvZGluZ1JlZ2lvbi5jb250YWlucyhleG9uLnN0YXJ0KSxcbiAgICAgICAgc3RvcElzQ29kaW5nID0gY29kaW5nUmVnaW9uLmNvbnRhaW5zKGV4b24uc3RvcCk7XG4gICAgaWYgKHN0YXJ0SXNDb2RpbmcgPT0gc3RvcElzQ29kaW5nKSB7XG4gICAgICByZXR1cm4gW25ldyBDb2RpbmdJbnRlcnZhbChleG9uLnN0YXJ0LCBleG9uLnN0b3AsIHN0YXJ0SXNDb2RpbmcpXTtcbiAgICB9IGVsc2UgaWYgKHN0YXJ0SXNDb2RpbmcpIHtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIG5ldyBDb2RpbmdJbnRlcnZhbChleG9uLnN0YXJ0LCBjb2RpbmdSZWdpb24uc3RvcCwgdHJ1ZSksXG4gICAgICAgIG5ldyBDb2RpbmdJbnRlcnZhbChjb2RpbmdSZWdpb24uc3RvcCArIDEsIGV4b24uc3RvcCwgZmFsc2UpXG4gICAgICBdO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gW1xuICAgICAgICBuZXcgQ29kaW5nSW50ZXJ2YWwoZXhvbi5zdGFydCwgY29kaW5nUmVnaW9uLnN0YXJ0IC0gMSwgZmFsc2UpLFxuICAgICAgICBuZXcgQ29kaW5nSW50ZXJ2YWwoY29kaW5nUmVnaW9uLnN0YXJ0LCBleG9uLnN0b3AsIHRydWUpXG4gICAgICBdO1xuICAgIH1cbiAgfSkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtzcGxpdENvZGluZ0V4b25zLCBDb2RpbmdJbnRlcnZhbH07XG4iLCIvKipcbiAqIEJpbmFyeSBmb3JtYXRzIGZvciBCQU0gZmlsZXMuXG4gKiBTZWUgaHR0cHM6Ly9zYW10b29scy5naXRodWIuaW8vaHRzLXNwZWNzL1NBTXYxLnBkZlxuICogQGZsb3dcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBqQmluYXJ5IGZyb20gJ2piaW5hcnknO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5cbmltcG9ydCBWaXJ0dWFsT2Zmc2V0IGZyb20gJy4uL1ZpcnR1YWxPZmZzZXQnO1xuaW1wb3J0IHtudWxsU3RyaW5nLCB1aW50NjRuYXRpdmV9IGZyb20gJy4vaGVscGVycyc7XG5cbnZhciBTRVFVRU5DRV9WQUxVRVMgPSBbJz0nLCAnQScsICdDJywgJ00nLCAnRycsICdSJywgJ1MnLCAnVicsICdUJywgJ1cnLCAnWScsICdIJywgJ0snLCAnRCcsICdCJywgJ04nXTtcbnZhciBDSUdBUl9PUFMgPSBbJ00nLCAnSScsICdEJywgJ04nLCAnUycsICdIJywgJ1AnLCAnPScsICdYJ107XG5cblxuLy8gQ29yZSBhbGlnbm1lbnQgZmllbGRzIHNoYXJlZCBiZXR3ZWVuIEJhbUFsaWdubWVudCBhbmQgVGhpbkJhbUFsaWdubWVudC5cbi8vIFRPRE86IGZpZ3VyZSBvdXQgd2h5IGpCaW5hcnkncyAnZXh0ZW5kJyB0eXBlIGRvZXNuJ3Qgd29yayB3aXRoIHRoaXMgaW4gVFlQRV9TRVQuXG52YXIgVGhpbkFsaWdubWVudCA9IHtcbiAgcmVmSUQ6ICdpbnQzMicsICAgICAgICAvLyAwXG4gIHBvczogJ2ludDMyJywgICAgICAgICAgLy8gNFxuICBsX3JlYWRfbmFtZTogJ3VpbnQ4JywgIC8vIDhcbiAgTUFQUTogJ3VpbnQ4JywgICAgICAgICAvLyA5XG4gIGJpbjogJ3VpbnQxNicsICAgICAgICAgLy8gMTBcbiAgbl9jaWdhcl9vcDogJ3VpbnQxNicsICAvLyAxMlxuICBGTEFHOiAndWludDE2JywgICAgICAgIC8vIDE0XG4gIGxfc2VxOiAnaW50MzInLCAgICAgICAgLy8gMTZcbiAgbmV4dF9yZWZJRDogJ2ludDMyJywgICAvLyAyMFxuICBuZXh0X3BvczogJ2ludDMyJywgICAgIC8vIDI0XG4gIHRsZW46ICdpbnQzMicgICAgICAgICAgLy8gMjhcbiAgLy8gbGVuZ3RoIG9mIGZpeGVkLXNpemUgaGVhZGVyID0gMzIgYnl0ZXNcbn07XG5cbnZhciBGbGFncyA9IHtcbiAgUkVBRF9QQUlSRUQ6IDB4MSxcbiAgUFJPUEVSX1BBSVI6IDB4MixcbiAgUkVBRF9VTk1BUFBFRDogMHg0LFxuICBNQVRFX1VOTUFQUEVEOiAweDgsXG4gIFJFQURfU1RSQU5EOiAweDEwLFxuICBNQVRFX1NUUkFORDogMHgyMCxcbiAgRklSU1RfT0ZfUEFJUjogMHg0MCxcbiAgU0VDT05EX09GX1BBSVI6IDB4ODAsXG4gIE5PVF9QUklNQVJZX0FMSUdOTUVOVDogMHgxMDAsXG4gIFJFQURfRkFJTFNfVkVORE9SX1FVQUxJVFlfQ0hFQ0s6IDB4MjAwLFxuICBEVVBMSUNBVEVfUkVBRDogMHg0MDAsXG4gIFNVUFBMRU1FTlRBUllfQUxJR05NRU5UOiAweDgwMFxufTtcblxudmFyIFRoaWNrQWxpZ25tZW50ID0gXy5leHRlbmQoe30sIFRoaW5BbGlnbm1lbnQsIHtcbiAgcmVhZF9uYW1lOiBbbnVsbFN0cmluZywgJ2xfcmVhZF9uYW1lJ10sXG4gIGNpZ2FyOiBbJ2FycmF5JywgJ0NpZ2FyT3AnLCAnbl9jaWdhcl9vcCddLFxuICBzZXE6IFsnRm91ckJpdFNlcXVlbmNlJywgJ2xfc2VxJ10sXG4gIHF1YWw6IFsnYXJyYXknLCAndWludDgnLCAnbF9zZXEnXSwgIC8vIDI1NSA9IHVua25vd25cbiAgYXV4aWxpYXJ5OiBbJ2FycmF5Jywge1xuICAgIHRhZzogWydzdHJpbmcnLCAyXSxcbiAgICB2YWxfdHlwZTogJ2NoYXInLFxuICAgIHZhbHVlOiBbJ2lmJywgY3R4ID0+IGN0eC52YWxfdHlwZSA9PSAnQicsIHtcbiAgICAgICAgICAgICB2YWxfdHlwZTogJ2NoYXInLFxuICAgICAgICAgICAgIG51bV92YWx1ZXM6ICdpbnQzMicsXG4gICAgICAgICAgICAgdmFsdWVzOiBbJ2FycmF5JywgJ0F1eGlsaWFyeVZhbHVlJywgJ251bV92YWx1ZXMnXVxuICAgICAgICAgICAgfSwgJ0F1eGlsaWFyeVZhbHVlJ11cbiAgfV0gIC8vIGdvZXMgdW50aWwgdGhlIGVuZCBvZiB0aGUgYmxvY2tcbn0pO1xuXG52YXIgVFlQRV9TRVQ6IGFueSA9IHtcbiAgJ2pCaW5hcnkubGl0dGxlRW5kaWFuJzogdHJ1ZSxcblxuICAnQmFtSGVhZGVyJzoge1xuICAgIF9tYWdpYzogWydjb25zdCcsIFsnc3RyaW5nJywgNF0sICdCQU1cXHUwMDAxJywgdHJ1ZV0sXG4gICAgbF90ZXh0OiAnaW50MzInLFxuICAgIHRleHQ6IFsnc3RyaW5nJywgJ2xfdGV4dCddLFxuICAgIG5fcmVmOiAnaW50MzInLFxuICAgIHJlZmVyZW5jZXM6IFsnYXJyYXknLCB7XG4gICAgICBsX25hbWU6ICdpbnQzMicsXG4gICAgICBuYW1lOiBbbnVsbFN0cmluZywgJ2xfbmFtZSddLFxuICAgICAgbF9yZWY6ICdpbnQzMidcbiAgICB9LCAnbl9yZWYnXVxuICB9LFxuXG4gICdCYW1BbGlnbm1lbnQnOiB7XG4gICAgYmxvY2tfc2l6ZTogJ2ludDMyJyxcbiAgICBjb250ZW50czogWydibG9iJywgJ2Jsb2NrX3NpemUnXVxuICB9LFxuXG4gIC8vIFRPRE86IG1ha2UgYSBcImNhc2VcIiBjb25zdHJ1Y3QgZm9yIGpCaW5hcnkgJiBpbXBsZW1lbnQgdGhlIHJlc3Qgb2YgdGhlc2UuXG4gICdBdXhpbGlhcnlWYWx1ZSc6XG4gICAgWydpZicsIGN0eCA9PiBjdHgudmFsX3R5cGUgPT0gJ0EnLCAnY2hhcicsXG4gICAgWydpZicsIGN0eCA9PiBjdHgudmFsX3R5cGUgPT0gJ2MnLCAnaW50OCcsXG4gICAgWydpZicsIGN0eCA9PiBjdHgudmFsX3R5cGUgPT0gJ0MnLCAndWludDgnLFxuICAgIFsnaWYnLCBjdHggPT4gY3R4LnZhbF90eXBlID09ICdzJywgJ2ludDE2JyxcbiAgICBbJ2lmJywgY3R4ID0+IGN0eC52YWxfdHlwZSA9PSAnUycsICd1aW50MTYnLFxuICAgIFsnaWYnLCBjdHggPT4gY3R4LnZhbF90eXBlID09ICdpJywgJ2ludDMyJyxcbiAgICBbJ2lmJywgY3R4ID0+IGN0eC52YWxfdHlwZSA9PSAnSScsICd1aW50MzInLFxuICAgIFsnaWYnLCBjdHggPT4gY3R4LnZhbF90eXBlID09ICdmJywgJ2Zsb2F0MzInLFxuICAgIFsnaWYnLCBjdHggPT4gY3R4LnZhbF90eXBlID09ICdaJywgJ3N0cmluZzAnLFxuICAgIC8vIFRPRE86ICdIJyA9IGJ5dGUgYXJyYXkgaW4gaGV4IGZvcm1hdFxuICAgIFsnc2tpcCcsIDBdXV1dXV1dXV0sXG4gIF0sXG5cbiAgLy8gXCJDSUdBUjogb3AgbGVuPDw0fG9wLiDigJhNSUROU0hQPVjigJnihpLigJgwMTIzNDU2NzjigJlcIlxuICAvLyBUT0RPOiBpdCBtYXkgYmUgcG9zc2libGUgdG8gcmVhZCB0aGlzIGRlY2xhcmF0aXZlbHkgd2l0aCBhIGJpdGZpZWxkIHR5cGUuXG4gICdDaWdhck9wJzogakJpbmFyeS5UZW1wbGF0ZSh7XG4gICAgYmFzZVR5cGU6ICd1aW50MzInLFxuICAgIHJlYWQoY29udGV4dCkge1xuICAgICAgdmFyIHYgPSB0aGlzLmJhc2VSZWFkKCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBsZW5ndGg6IHYgPj4gNCxcbiAgICAgICAgb3A6IENJR0FSX09QU1t2ICYgMHhmXVxuICAgICAgfTtcbiAgICB9XG4gIH0pLFxuXG4gIC8vIFwiNC1iaXQgZW5jb2RlZCByZWFkOiDigJg9QUNNR1JTVlRXWUhLREJO4oCZ4oaSIFswLCAxNV07IG90aGVyIGNoYXJhY3RlcnMgbWFwcGVkXG4gIC8vIHRvIOKAmE7igJk7IGhpZ2ggbnliYmxlIGZpcnN0ICgxc3QgYmFzZSBpbiB0aGUgaGlnaGVzdCA0LWJpdCBvZiB0aGUgMXN0IGJ5dGUpXCJcbiAgJ0ZvdXJCaXRTZXF1ZW5jZSc6IGpCaW5hcnkuVGVtcGxhdGUoe1xuICAgIHNldFBhcmFtcyhsZW5ndGhGaWVsZCkge1xuICAgICAgdGhpcy5sZW5ndGhGaWVsZCA9IGxlbmd0aEZpZWxkO1xuICAgICAgdmFyIG51bUJ5dGVzID0gY3R4ID0+IE1hdGguZmxvb3IoKCtjdHhbbGVuZ3RoRmllbGRdICsgMSkgLyAyKTtcbiAgICAgIHRoaXMuYmFzZVR5cGUgPSBbJ2FycmF5JywgJ3VpbnQ4JywgbnVtQnl0ZXNdO1xuICAgIH0sXG4gICAgcmVhZChjdHgpIHtcbiAgICAgIHZhciBudW1CYXNlcyA9ICtjdHhbdGhpcy5sZW5ndGhGaWVsZF07XG4gICAgICB2YXIgdmFscyA9IHRoaXMuYmFzZVJlYWQoKTtcbiAgICAgIHJldHVybiB2YWxzLm1hcCgoYiwgaSkgPT4ge1xuICAgICAgICByZXR1cm4gU0VRVUVOQ0VfVkFMVUVTW2IgPj4gNF0gK1xuICAgICAgICAgICAgICAgKDIgKiBpICsgMSA8IG51bUJhc2VzID8gU0VRVUVOQ0VfVkFMVUVTW2IgJiAweGZdIDogJycpO1xuICAgICAgfSkuam9pbignJyk7XG4gICAgfVxuICB9KSxcblxuICAnQmFtRmlsZSc6IHtcbiAgICBoZWFkZXI6ICdCYW1IZWFkZXInLFxuICAgIGFsaWdubWVudHM6IFsnYXJyYXknLCAnQmFtQWxpZ25tZW50J11cbiAgfSxcblxuICAvLyBCQUkgaW5kZXggZm9ybWF0c1xuICAvLyBTZWUgaHR0cHM6Ly9zYW10b29scy5naXRodWIuaW8vaHRzLXNwZWNzL1NBTXYxLnBkZlxuICAnVmlydHVhbE9mZnNldCc6IGpCaW5hcnkuVGVtcGxhdGUoe1xuICAgIGJhc2VUeXBlOiAndWludDY0JyxcbiAgICByZWFkKCkge1xuICAgICAgLy8gUXVvdGggSGVuZyBMaTogdTY0ID0gY29mZnNldDw8MTZ8dW9mZnNldFxuICAgICAgdmFyIHU2NCA9IHRoaXMuYmFzZVJlYWQoKTtcbiAgICAgIHJldHVybiBuZXcgVmlydHVhbE9mZnNldChcbiAgICAgICAgLy8gb2Zmc2V0IG9mIGJlZ2lubmluZyBvZiBnemlwIGJsb2NrIGluIHRoZSBjb21wcmVzc2VkIGZpbGUuXG4gICAgICAgIHU2NC5oaSAqIDY1NTM2ICsgKHU2NC5sbyA+Pj4gMTYpLFxuICAgICAgICAvLyBvZmZzZXQgb2YgZGF0YSB3aXRoaW4gdGhlIGRlY29tcHJlc3NlZCBibG9ja1xuICAgICAgICB1NjQubG8gJiAweGZmZmZcbiAgICAgICk7XG4gICAgfVxuICB9KSxcblxuICAnQ2h1bmtzQXJyYXknOiBbJ2FycmF5Jywge1xuICAgIGNodW5rX2JlZzogJ1ZpcnR1YWxPZmZzZXQnLFxuICAgIGNodW5rX2VuZDogJ1ZpcnR1YWxPZmZzZXQnXG4gIH1dLFxuXG4gICdJbnRlcnZhbHNBcnJheSc6IFsnYXJyYXknLCAnVmlydHVhbE9mZnNldCddLFxuXG4gICdCYWlJbmRleCc6IHtcbiAgICBuX2JpbjogJ2ludDMyJyxcbiAgICBiaW5zOiBbJ2FycmF5Jywge1xuICAgICAgYmluOiAndWludDMyJyxcbiAgICAgIG5fY2h1bms6ICdpbnQzMicsXG4gICAgICBjaHVua3M6IFsnYmxvYicsIGN0eCA9PiAxNiAqIGN0eC5uX2NodW5rXSxcbiAgICAgIC8vIFBhcnNpbmcgaXMgZGVmZXJyZWQgYXMgYSBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24uIFRoZSB0eXBlIGlzIHJlYWxseTpcbiAgICAgIC8vIGNodW5rczogWydhcnJheScsIHtcbiAgICAgIC8vICAgY2h1bmtfYmVnOiAnVmlydHVhbE9mZnNldCcsXG4gICAgICAvLyAgIGNodW5rX2VuZDogJ1ZpcnR1YWxPZmZzZXQnXG4gICAgICAvLyB9LCAnbl9jaHVuayddXG4gICAgfSwgJ25fYmluJ10sXG4gICAgbl9pbnR2OiAnaW50MzInLFxuICAgIGludGVydmFsczogWydibG9iJywgY3R4ID0+IDggKiBjdHgubl9pbnR2XVxuICAgIC8vIFBhcnNpbmcgaXMgZGVmZXJyZWQgYXMgYSBwZXJmb3JtYW5jZSBvcHRpbWl6YXRpb24uIFRoZSB0eXBlIGlzIHJlYWxseTpcbiAgICAvLyBpbnRlcnZhbHM6IFsnYXJyYXknLCAnVmlydHVhbE9mZnNldCcsICduX2ludHYnXVxuICB9LFxuXG4gICdCYWlGaWxlJzoge1xuICAgIG1hZ2ljOiBbJ2NvbnN0JywgWydzdHJpbmcnLCA0XSwgJ0JBSVxcdTAwMDEnXSxcbiAgICBuX3JlZjogJ2ludDMyJyxcbiAgICBpbmRpY2VzOiBbJ2FycmF5JywgJ0JhaUluZGV4JywgJ25fcmVmJ10sXG4gICAgbl9ub19jb29yOiB1aW50NjRuYXRpdmUgIC8vIHNwZWMgc2F5cyBvcHRpb25hbCwgYnV0IGl0J3MgYWx3YXlzIHRoZXJlLlxuICB9XG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0ge1RZUEVfU0VULCBUaGluQWxpZ25tZW50LCBUaGlja0FsaWdubWVudCwgRmxhZ3N9O1xuIiwiLyoqXG4gKiBCQkkgaXMgdGhlIHNoYXJlZCBzdHJ1Y3R1cmUgYmV0d2VlbiBiaWdCZWQgYW5kIGJpZ1dpZy5cbiAqIFRoZXNlIHN0cnVjdHVyZXMgYXJlIGJhc2VkIG9uIFVDU0MncyBzcmMvaW5jL2JiaUZpbGUuaFxuICogQGZsb3dcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7dHlwZUF0T2Zmc2V0fSBmcm9tICcuL2hlbHBlcnMnO1xuXG52YXIgVFlQRV9TRVQgPSB7XG4gICdqQmluYXJ5LmxpdHRsZUVuZGlhbic6IHRydWUsXG5cbiAgJ0hlYWRlcic6IHtcbiAgICBfbWFnaWM6IFsnY29uc3QnLCAndWludDMyJywgMHg4Nzg5RjJFQiwgdHJ1ZV0sXG4gICAgdmVyc2lvbjogJ3VpbnQxNicsXG4gICAgem9vbUxldmVsczogJ3VpbnQxNicsXG4gICAgY2hyb21vc29tZVRyZWVPZmZzZXQ6ICd1aW50NjQnLFxuICAgIHVuem9vbWVkRGF0YU9mZnNldDogJ3VpbnQ2NCcsXG4gICAgdW56b29tZWRJbmRleE9mZnNldDogJ3VpbnQ2NCcsXG4gICAgZmllbGRDb3VudDogJ3VpbnQxNicsXG4gICAgZGVmaW5lZEZpZWxkQ291bnQ6ICd1aW50MTYnLFxuICAgIC8vIDAgaWYgbm8gYXV0b1NxbCBpbmZvcm1hdGlvblxuICAgIGF1dG9TcWxPZmZzZXQ6ICd1aW50NjQnLFxuICAgIHRvdGFsU3VtbWFyeU9mZnNldDogJ3VpbnQ2NCcsXG4gICAgLy8gU2l6ZSBvZiB1bmNvbXByZXNzaW9uIGJ1ZmZlci4gIDAgaWYgdW5jb21wcmVzc2VkLlxuICAgIHVuY29tcHJlc3NCdWZTaXplOiAndWludDMyJyxcbiAgICAvLyBPZmZzZXQgdG8gaGVhZGVyIGV4dGVuc2lvbiAwIGlmIG5vIHN1Y2ggZXh0ZW5zaW9uXG4gICAgLy8gVE9ETzogc3VwcG9ydCBleHRlbmRlZCBoZWFkZXJzIChub3QgdXNlZCBpbiBlbnNHZW5lLmJiKVxuICAgIGV4dGVuc2lvbk9mZnNldDogJ3VpbnQ2NCcsXG4gICAgem9vbUhlYWRlcnM6IFsnYXJyYXknLCAnWm9vbUhlYWRlcicsICd6b29tTGV2ZWxzJ10sXG5cbiAgICB0b3RhbFN1bW1hcnk6IHR5cGVBdE9mZnNldCgnVG90YWxTdW1tYXJ5JywgJ3RvdGFsU3VtbWFyeU9mZnNldCcpLFxuICAgIGNocm9tb3NvbWVUcmVlOiB0eXBlQXRPZmZzZXQoJ0JQbHVzVHJlZScsICdjaHJvbW9zb21lVHJlZU9mZnNldCcpXG4gIH0sXG5cbiAgJ1RvdGFsU3VtbWFyeSc6IHtcbiAgICBiYXNlc0NvdmVyZWQ6ICd1aW50NjQnLFxuICAgIG1pblZhbDogJ2Zsb2F0NjQnLCAgICAgLy8gZm9yIGJpZ0JlZCBtaW5pbXVtIGRlcHRoIG9mIGNvdmVyYWdlXG4gICAgbWF4VmFsOiAnZmxvYXQ2NCcsICAgICAvLyBmb3IgYmlnQmVkIG1heGltdW0gZGVwdGggb2YgY292ZXJhZ2VcbiAgICBzdW1EYXRhOiAnZmxvYXQ2NCcsICAgIC8vIGZvciBiaWdCZWQgc3VtIG9mIGNvdmVyYWdlXG4gICAgc3VtU3F1YXJlZDogJ2Zsb2F0NjQnICAvLyBmb3IgYmlnQmVkIHN1bSBvZiBjb3ZlcmFnZSBzcXVhcmVkXG4gIH0sXG5cbiAgJ1pvb21IZWFkZXInOiB7XG4gICAgcmVkdWN0aW9uTGV2ZWw6ICd1aW50MzInLFxuICAgIF9yZXNlcnZlZDogJ3VpbnQzMicsXG4gICAgZGF0YU9mZnNldDogJ3VpbnQ2NCcsXG4gICAgaW5kZXhPZmZzZXQ6ICd1aW50NjQnXG4gIH0sXG5cbiAgJ0JQbHVzVHJlZSc6IHtcbiAgICBtYWdpYzogWydjb25zdCcsICd1aW50MzInLCAweDc4Q0E4QzkxLCB0cnVlXSxcbiAgICAvLyBOdW1iZXIgb2YgY2hpbGRyZW4gcGVyIGJsb2NrIChub3QgYnl0ZSBzaXplIG9mIGJsb2NrKVxuICAgIGJsb2NrU2l6ZTogJ3VpbnQzMicsXG4gICAgLy8gTnVtYmVyIG9mIHNpZ25pZmljYW50IGJ5dGVzIGluIGtleVxuICAgIGtleVNpemU6ICd1aW50MzInLFxuICAgIC8vIE51bWJlciBvZiBieXRlcyBpbiB2YWx1ZVxuICAgIHZhbFNpemU6ICd1aW50MzInLFxuICAgIC8vIE51bWJlciBvZiBpdGVtcyBpbiBpbmRleFxuICAgIGl0ZW1Db3VudDogJ3VpbnQ2NCcsXG4gICAgX3Jlc2VydmVkMjogWydza2lwJywgNF0sXG4gICAgX3Jlc2VydmVkMzogWydza2lwJywgNF0sXG4gICAgbm9kZXM6ICdCUGx1c1RyZWVOb2RlJyAgLy8gWydhcnJheScsICdCUGx1c1RyZWVOb2RlJywgJ2l0ZW1Db3VudCddXG4gIH0sXG4gIFxuICAnQlBsdXNUcmVlTm9kZSc6IHtcbiAgICBpc0xlYWY6ICd1aW50OCcsICAvLyAxID0geWVzLCAwID0gbm9cbiAgICBfcmVzZXJ2ZWQ6ICd1aW50OCcsXG4gICAgY291bnQ6ICd1aW50MTYnLFxuICAgIGNvbnRlbnRzOiBbJ2FycmF5JywgWydpZicsICdpc0xlYWYnLCB7XG4gICAgICBrZXk6IFsnc3RyaW5nJywgJ2tleVNpemUnXSxcbiAgICAgIC8vIE5vdGU6IGJpZ0JlZCBhbGxvd3MgbW9yZSBnZW5lcmFsIHZhbHVlczsgdGhpcyBpcyB3aGF0IEVuc2VtYmwgdXNlcy5cbiAgICAgIC8vIHZhbHVlOiBbJ3N0cmluZycsICd2YWxTaXplJ11cbiAgICAgIGlkOiAndWludDMyJyxcbiAgICAgIHNpemU6ICd1aW50MzInXG4gICAgfSwge1xuICAgICAga2V5OiBbJ3N0cmluZycsICdrZXlTaXplJ10sXG4gICAgICBvZmZzZXQ6ICd1aW50NjQnXG4gICAgfV0sICdjb3VudCddXG4gIH0sXG5cbiAgJ0NpclRyZWUnOiB7XG4gICAgX21hZ2ljOiBbJ2NvbnN0JywgJ3VpbnQzMicsIDB4MjQ2OEFDRTAsIHRydWVdLFxuICAgIGJsb2NrU2l6ZTogJ3VpbnQzMicsXG4gICAgaXRlbUNvdW50OiAndWludDY0JyxcbiAgICBzdGFydENocm9tSXg6ICd1aW50MzInLFxuICAgIHN0YXJ0QmFzZTogJ3VpbnQzMicsXG4gICAgZW5kQ2hyb21JeDogJ3VpbnQzMicsXG4gICAgZW5kQmFzZTogJ3VpbnQzMicsXG4gICAgZmlsZVNpemU6ICd1aW50NjQnLFxuICAgIGl0ZW1zUGVyU2xvdDogJ3VpbnQzMicsXG4gICAgX3Jlc2VydmVkOiBbJ3NraXAnLCA0XSxcbiAgICBibG9ja3M6ICdDaXJOb2RlJ1xuICB9LFxuXG4gICdDaXJOb2RlJzoge1xuICAgIGlzTGVhZjogJ3VpbnQ4JywgIC8vIDEgPSB5ZXMsIDAgPSBub1xuICAgIF9yZXNlcnZlZDogJ3VpbnQ4JyxcbiAgICBjb3VudDogJ3VpbnQxNicsXG4gICAgY29udGVudHM6IFtcbiAgICAgICdhcnJheScsIFtcbiAgICAgICAgJ2lmJywgJ2lzTGVhZicsICdMZWFmRGF0YScsICdOb25MZWFmRGF0YSdcbiAgICAgIF0sXG4gICAgICAnY291bnQnXG4gICAgXVxuICB9LFxuXG4gICdMZWFmRGF0YSc6IHtcbiAgICBzdGFydENocm9tSXg6ICd1aW50MzInLFxuICAgIHN0YXJ0QmFzZTogJ3VpbnQzMicsXG4gICAgZW5kQ2hyb21JeDogJ3VpbnQzMicsXG4gICAgZW5kQmFzZTogJ3VpbnQzMicsXG4gICAgb2Zmc2V0OiAndWludDY0JyxcbiAgICBzaXplOiAndWludDY0J1xuICB9LFxuXG4gICdOb25MZWFmRGF0YSc6IHtcbiAgICBzdGFydENocm9tSXg6ICd1aW50MzInLFxuICAgIHN0YXJ0QmFzZTogJ3VpbnQzMicsXG4gICAgZW5kQ2hyb21JeDogJ3VpbnQzMicsXG4gICAgZW5kQmFzZTogJ3VpbnQzMicsXG4gICAgb2Zmc2V0OiAndWludDY0JyxcbiAgfSxcblxuICAnQmVkRW50cnknOiB7XG4gICAgJ2NocklkJzogJ3VpbnQzMicsXG4gICAgJ3N0YXJ0JzogJ3VpbnQzMicsXG4gICAgJ3N0b3AnOiAndWludDMyJyxcbiAgICAncmVzdCc6ICdzdHJpbmcwJ1xuICB9LFxuXG4gICdCZWRCbG9jayc6IFsnYXJyYXknLCAnQmVkRW50cnknXSxcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1RZUEVfU0VUfTtcbiIsIi8qKlxuICogSGVscGVycyBmb3Igc3BlY2lmeWluZyBmaWxlIGZvcm1hdHMgdXNpbmcgakJpbmFyeS5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IGpCaW5hcnkgZnJvbSAnamJpbmFyeSc7XG5cbi8vIFJlYWQgYSBqQmluYXJ5IHR5cGUgYXQgYW4gb2Zmc2V0IGluIHRoZSBidWZmZXIgc3BlY2lmaWVkIGJ5IGFub3RoZXIgZmllbGQuXG5mdW5jdGlvbiB0eXBlQXRPZmZzZXQoYmFzZVR5cGU6IGFueSwgb2Zmc2V0RmllbGROYW1lOiBzdHJpbmcpOiBhbnkge1xuICByZXR1cm4gakJpbmFyeS5UZW1wbGF0ZSh7XG4gICAgICBiYXNlVHlwZTogYmFzZVR5cGUsXG4gICAgICByZWFkOiBmdW5jdGlvbihjb250ZXh0KSB7XG4gICAgICAgIGlmICgrY29udGV4dFtvZmZzZXRGaWVsZE5hbWVdID09PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJ5LnJlYWQodGhpcy5iYXNlVHlwZSwgK2NvbnRleHRbb2Zmc2V0RmllbGROYW1lXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbn1cblxuLy8gQSBibG9jayBvZiBmaXhlZCBsZW5ndGggY29udGFpbmluZyBzb21lIG90aGVyIHR5cGUuXG4vLyBUT0RPOiB3cml0ZSB0aGlzIHVzaW5nICdiaW5hcnknIHR5cGUgKGxpa2UgbnVsbFN0cmluZykuXG52YXIgc2l6ZWRCbG9jayA9IGpCaW5hcnkuVHlwZSh7XG4gIHBhcmFtczogWydpdGVtVHlwZScsICdsZW5ndGhGaWVsZCddLFxuICByZXNvbHZlOiBmdW5jdGlvbiAoZ2V0VHlwZSkge1xuICAgIHRoaXMuaXRlbVR5cGUgPSBnZXRUeXBlKHRoaXMuaXRlbVR5cGUpO1xuICB9LFxuICByZWFkOiBmdW5jdGlvbihjb250ZXh0KSB7XG4gICAgdmFyIHBvcyA9IHRoaXMuYmluYXJ5LnRlbGwoKTtcbiAgICB2YXIgbGVuID0gK2NvbnRleHRbdGhpcy5sZW5ndGhGaWVsZF07XG4gICAgdGhpcy5iaW5hcnkuc2tpcChsZW4pO1xuICAgIHJldHVybiB0aGlzLmJpbmFyeS5zbGljZShwb3MsIHBvcyArIGxlbikucmVhZCh0aGlzLml0ZW1UeXBlKTtcbiAgfVxufSk7XG5cbi8vIEEgZml4ZWQtbGVuZ3RoIHN0cmluZyBmaWVsZCB3aGljaCBpcyBhbHNvIG51bGwtdGVybWluYXRlZC5cbi8vIFRPRE86IHNob3VsZCBiZSBbc2l6ZWRCbG9jaywgJ3N0cmluZzAnLCBsZW5ndGhGaWVsZF1cbi8vIFRPRE86IGZpbGUgYSBidWcgdXBzdHJlYW0gb24gJ3N0cmluZzAnLCB3aGljaCBzaG91bGQgZG8gd2hhdCB0aGlzIGRvZXMuXG52YXIgbnVsbFN0cmluZyA9IGpCaW5hcnkuVGVtcGxhdGUoe1xuICBzZXRQYXJhbXMobGVuZ3RoRmllbGQpIHtcbiAgICB0aGlzLmJhc2VUeXBlID0gWydiaW5hcnknLCBsZW5ndGhGaWVsZF07XG4gIH0sXG4gIHJlYWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuYmFzZVJlYWQoKS5yZWFkKCdzdHJpbmcwJyk7XG4gIH1cbn0pO1xuXG5cbi8vIExpa2UgJ3VpbnQ2NCcsIGJ1dCBhc3NlcnRzIHRoYXQgdGhlIG51bWJlciBpcyA8Ml41MyAoaS5lLiBmaXRzIHByZWNpc2VseSBpblxuLy8gYSBmbG9hdCkgYW5kIHJlYWRzIGl0IGFzIGEgcGxhaW4tb2xkLW51bWJlci4gVGhpcyBpcyBhIHBlcmZvcm1hbmNlIGFuZFxuLy8gZGVidWdnaW5nIHdpbiwgc2luY2UgcGxhaW4gbnVtYmVycyBzaG93IHVwIG1vcmUgbmljZWx5IGluIHRoZSBjb25zb2xlLlxudmFyIHVpbnQ2NG5hdGl2ZSA9IGpCaW5hcnkuVGVtcGxhdGUoe1xuICBiYXNlVHlwZTogJ3VpbnQ2NCcsXG4gIHJlYWQoKSB7XG4gICAgdmFyIG51bSA9IHRoaXMuYmFzZVJlYWQoKSxcbiAgICAgICAgdiA9ICtudW07XG4gICAgLy8gVGVzdCBmb3Igd3JhcGFyb3VuZCAmIHJvdW5kb2ZmXG4gICAgaWYgKHYgPCAwIHx8IDEgKyB2ID09IHYpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBOdW1iZXIgb3V0IG9mIHByZWNpc2UgZmxvYXRpbmcgcG9pbnQgcmFuZ2U6ICR7bnVtfWApO1xuICAgIH1cbiAgICByZXR1cm4gK251bTtcbiAgfVxufSk7XG5cblxuLy8gVHlwZSByZXR1cm5lZCBieSBsYXp5QXJyYXkgaGVscGVyLCBiZWxvdy5cbi8vIEhhcyBhIC5sZW5ndGggcHJvcGVydHksIGEgLmdldCgpIG1ldGhvZCBhbmQgYSAuZ2V0QWxsKCkgbWV0aG9kLlxuY2xhc3MgTGF6eUFycmF5IHtcbiAgYnl0ZXNQZXJJdGVtOiBudW1iZXI7XG4gIGpiOiBPYmplY3Q7XG4gIGl0ZW1UeXBlOiBPYmplY3Q7XG4gIGxlbmd0aDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKGpiLCBieXRlc1Blckl0ZW06IG51bWJlciwgaXRlbVR5cGUpIHtcbiAgICB0aGlzLmJ5dGVzUGVySXRlbSA9IGJ5dGVzUGVySXRlbTtcbiAgICB0aGlzLmpiID0gamI7XG4gICAgdGhpcy5pdGVtVHlwZSA9IGl0ZW1UeXBlO1xuICAgIHRoaXMubGVuZ3RoID0gdGhpcy5qYi52aWV3LmJ5dGVMZW5ndGggLyB0aGlzLmJ5dGVzUGVySXRlbTtcbiAgfVxuXG4gIGdldChpKSB7XG4gICAgdGhpcy5qYi5zZWVrKGkgKiB0aGlzLmJ5dGVzUGVySXRlbSk7XG4gICAgcmV0dXJuIHRoaXMuamIucmVhZCh0aGlzLml0ZW1UeXBlKTtcbiAgfVxuXG4gIGdldEFsbCgpIHtcbiAgICB0aGlzLmpiLnNlZWsoMCk7XG4gICAgcmV0dXJuIHRoaXMuamIucmVhZChbJ2FycmF5JywgdGhpcy5pdGVtVHlwZSwgdGhpcy5sZW5ndGhdKTtcbiAgfVxufVxuXG5cbi8vIExpa2UgakJpbmFyeSdzICdhcnJheScsIGJ1dCBkZWZlcnMgcGFyc2luZyBvZiBpdGVtcyB1bnRpbCB0aGV5IGFyZSBhY2Nlc3NlZC5cbi8vIFRoaXMgY2FuIHJlc3VsdCBpbiBhIGh1Z2Ugc3BlZWR1cCBmb3IgbGFyZ2UgYXJyYXlzLiBTZWUgTGF6eUFycmF5IGZvciB0aGVcbi8vIHJlc3VsdGluZyB0eXBlLlxudmFyIGxhenlBcnJheSA9IGpCaW5hcnkuVHlwZSh7XG4gIHBhcmFtczogWydpdGVtVHlwZScsICdieXRlc1Blckl0ZW0nLCAnbnVtSXRlbXMnXSxcbiAgcmVhZCgpIHtcbiAgICB2YXIgbnVtSXRlbXMgPSB0aGlzLnRvVmFsdWUodGhpcy5udW1JdGVtcyk7XG4gICAgdmFyIGJ5dGVzUGVySXRlbSA9IHRoaXMudG9WYWx1ZSh0aGlzLmJ5dGVzUGVySXRlbSk7XG4gICAgaWYgKG51bUl0ZW1zID09PSB1bmRlZmluZWQgfHwgYnl0ZXNQZXJJdGVtID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93ICdieXRlc1Blckl0ZW0gYW5kIG51bUl0ZW1zIG11c3QgYmUgc2V0IGZvciBsYXp5QXJyYXknO1xuICAgIH1cbiAgICB2YXIgcG9zID0gdGhpcy5iaW5hcnkudGVsbCgpO1xuICAgIHZhciBsZW4gPSBudW1JdGVtcyAqIGJ5dGVzUGVySXRlbTtcbiAgICB2YXIgYnVmZmVyID0gdGhpcy5iaW5hcnkuc2xpY2UocG9zLCBwb3MgKyBsZW4pO1xuICAgIHRoaXMuYmluYXJ5LnNraXAobGVuKTtcbiAgICByZXR1cm4gbmV3IExhenlBcnJheShidWZmZXIsIGJ5dGVzUGVySXRlbSwgdGhpcy5pdGVtVHlwZSk7XG4gIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHt0eXBlQXRPZmZzZXQsIHNpemVkQmxvY2ssIG51bGxTdHJpbmcsIHVpbnQ2NG5hdGl2ZSwgbGF6eUFycmF5fTtcbiIsIi8qKlxuICogVHdvQml0IGlzIGEgcGFja2VkIGdlbm9tZSBmb3JtYXQuXG4gKiBTZWUgaHR0cDovL2dlbm9tZS51Y3NjLmVkdS9GQVEvRkFRZm9ybWF0Lmh0bWwjZm9ybWF0N1xuICogQGZsb3dcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnZhciBUWVBFX1NFVCA9IHtcbiAgJ2pCaW5hcnkubGl0dGxlRW5kaWFuJzogdHJ1ZSxcblxuICAnSGVhZGVyJzoge1xuICAgIG1hZ2ljOiBbJ2NvbnN0JywgJ3VpbnQzMicsIDB4MUE0MTI3NDMsIHRydWVdLFxuICAgIHZlcnNpb246IFsnY29uc3QnLCAndWludDMyJywgMCwgdHJ1ZV0sXG4gICAgc2VxdWVuY2VDb3VudDogJ3VpbnQzMicsXG4gICAgcmVzZXJ2ZWQ6ICd1aW50MzInLFxuXG4gICAgc2VxdWVuY2VzOiBbJ2FycmF5JywgJ1NlcXVlbmNlSGVhZGVyJywgJ3NlcXVlbmNlQ291bnQnXVxuICB9LFxuXG4gICdTZXF1ZW5jZUhlYWRlcic6IHtcbiAgICBuYW1lU2l6ZTogJ3VpbnQ4JyxcbiAgICBuYW1lOiBbJ3N0cmluZycsICduYW1lU2l6ZSddLFxuICAgIG9mZnNldDogJ3VpbnQzMidcbiAgfSxcblxuICAnU2VxdWVuY2VSZWNvcmQnOiB7XG4gICAgZG5hU2l6ZTogJ3VpbnQzMicsXG4gICAgbkJsb2NrQ291bnQ6ICd1aW50MzInLFxuICAgIG5CbG9ja1N0YXJ0czogWydhcnJheScsICd1aW50MzInLCAnbkJsb2NrQ291bnQnXSxcbiAgICBuQmxvY2tTaXplczogWydhcnJheScsICd1aW50MzInLCAnbkJsb2NrQ291bnQnXSxcbiAgICAvLyBUaGUgbWFza3MgY2FuIGJlIHF1aXRlIGxhcmdlICh+Mk1CIGZvciBjaHIxKSBhbmQgd2UgbW9zdGx5IGRvbid0IGNhcmVcbiAgICAvLyBhYm91dCB0aGVtLiAgU28gd2UgaWdub3JlIHRoZW0sIGJ1dCB3ZSBkbyBuZWVkIHRvIGtub3cgdGhlaXIgbGVuZ3RoLlxuICAgIG1hc2tCbG9ja0NvdW50OiAndWludDMyJyxcbiAgICAvLyBtYXNrQmxvY2tTdGFydHM6IFsnYXJyYXknLCAndWludDMyJywgJ21hc2tCbG9ja0NvdW50J11cbiAgICAvLyBtYXNrQmxvY2tTaXplczogWydhcnJheScsICd1aW50MzInLCAnbWFza0Jsb2NrQ291bnQnXVxuICAgIC8vIHJlc2VydmVkOiAndWludDMyJ1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtUWVBFX1NFVH07XG4iLCIvKipcbiAqIEZldGNoZXIvcGFyc2VyIGZvciBWQ0YgZmlsZXMuXG4gKiBUaGlzIG1ha2VzIHZlcnkgbGl0dGxlIGVmZm9ydCB0byBwYXJzZSBvdXQgZGV0YWlscyBmcm9tIFZDRiBlbnRyaWVzLiBJdCBqdXN0XG4gKiBleHRyYWN0cyBDT05USUcsIFBPU0lUSU9OLCBSRUYgYW5kIEFMVC5cbiAqXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCB0eXBlIEFic3RyYWN0RmlsZSBmcm9tICcuLi9BYnN0cmFjdEZpbGUnO1xuaW1wb3J0IHR5cGUgUSBmcm9tICdxJztcblxuZXhwb3J0IHR5cGUgVmFyaWFudCA9IHtcbiAgY29udGlnOiBzdHJpbmc7XG4gIHBvc2l0aW9uOiBudW1iZXI7XG4gIHJlZjogc3RyaW5nO1xuICBhbHQ6IHN0cmluZztcbiAgdmNmTGluZTogc3RyaW5nO1xuICBlbmQ6IG51bWJlcjtcbn1cblxuLy8gaG9sZHMgdmFyaWFudCBhbmQgZ2Vub3R5cGUgc2FtcGxlIGlkc1xuZXhwb3J0IHR5cGUgVmFyaWFudENvbnRleHQgPSB7XG4gIHZhcmlhbnQ6IFZhcmlhbnQsXG4gIHNhbXBsZUlkczogc3RyaW5nW11cbn1cblxuLy8gVGhpcyBpcyBhIG1pbmltYWxseS1wYXJzZWQgbGluZSBmb3IgZmFjaWxpdGF0aW5nIGJpbmFyeSBzZWFyY2guXG50eXBlIExvY3VzTGluZSA9IHtcbiAgY29udGlnOiBzdHJpbmc7XG4gIHBvc2l0aW9uOiBudW1iZXI7XG4gIGxpbmU6IHN0cmluZztcbn1cblxuXG5mdW5jdGlvbiBleHRyYWN0TG9jdXNMaW5lKHZjZkxpbmU6IHN0cmluZyk6IExvY3VzTGluZSB7XG4gIHZhciB0YWIxID0gdmNmTGluZS5pbmRleE9mKCdcXHQnKSxcbiAgICAgIHRhYjIgPSB2Y2ZMaW5lLmluZGV4T2YoJ1xcdCcsIHRhYjEgKyAxKTtcblxuICByZXR1cm4ge1xuICAgIGNvbnRpZzogdmNmTGluZS5zbGljZSgwLCB0YWIxKSxcbiAgICBwb3NpdGlvbjogTnVtYmVyKHZjZkxpbmUuc2xpY2UodGFiMSArIDEsIHRhYjIpKSxcbiAgICBsaW5lOiB2Y2ZMaW5lXG4gIH07XG59XG5cblxuZnVuY3Rpb24gZXh0cmFjdFZhcmlhbnQodmNmTGluZTogc3RyaW5nKTogVmFyaWFudCB7XG4gIHZhciBwYXJ0cyA9IHZjZkxpbmUuc3BsaXQoJ1xcdCcpO1xuICB2YXIgZW5kID0gTnVtYmVyKHBhcnRzWzFdKSArIHBhcnRzWzNdLmxlbmd0aDtcbiAgaWYgKDUgPj0gcGFydHMubGVuZ3RoKSB7XG4gICAgZW5kID0gcGFydHNbNV07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBjb250aWc6IHBhcnRzWzBdLFxuICAgIHBvc2l0aW9uOiBOdW1iZXIocGFydHNbMV0pLFxuICAgIHJlZjogcGFydHNbM10sXG4gICAgYWx0OiBwYXJ0c1s0XSxcbiAgICB2Y2ZMaW5lOiB2Y2ZMaW5lLFxuICAgIGVuZDogTnVtYmVyKGVuZClcbiAgfTtcbn1cblxuXG5mdW5jdGlvbiBjb21wYXJlTG9jdXNMaW5lKGE6IExvY3VzTGluZSwgYjogTG9jdXNMaW5lKTogbnVtYmVyIHtcbiAgLy8gU29ydCBsZXhpY29ncmFwaGljYWxseSBieSBjb250aWcsIHRoZW4gbnVtZXJpY2FsbHkgYnkgcG9zaXRpb24uXG4gIGlmIChhLmNvbnRpZyA8IGIuY29udGlnKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9IGVsc2UgaWYgKGEuY29udGlnID4gYi5jb250aWcpIHtcbiAgICByZXR1cm4gKzE7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGEucG9zaXRpb24gLSBiLnBvc2l0aW9uO1xuICB9XG59XG5cblxuLy8gKGJhc2VkIG9uIHVuZGVyc2NvcmUgc291cmNlKVxuZnVuY3Rpb24gbG93ZXN0SW5kZXg8VD4oaGF5c3RhY2s6IFRbXSwgbmVlZGxlOiBULCBjb21wYXJlOiAoYTogVCwgYjogVCk9Pm51bWJlcik6IG51bWJlciB7XG4gIHZhciBsb3cgPSAwLFxuICAgICAgaGlnaCA9IGhheXN0YWNrLmxlbmd0aDtcbiAgd2hpbGUgKGxvdyA8IGhpZ2gpIHtcbiAgICB2YXIgbWlkID0gTWF0aC5mbG9vcigobG93ICsgaGlnaCkgLyAyKSxcbiAgICAgICAgYyA9IGNvbXBhcmUoaGF5c3RhY2tbbWlkXSwgbmVlZGxlKTtcbiAgICBpZiAoYyA8IDApIHtcbiAgICAgIGxvdyA9IG1pZCArIDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhpZ2ggPSBtaWQ7XG4gICAgfVxuICB9XG4gIHJldHVybiBsb3c7XG59XG5cblxuY2xhc3MgSW1tZWRpYXRlVmNmRmlsZSB7XG4gIGxpbmVzOiBMb2N1c0xpbmVbXTtcbiAgY29udGlnTWFwOiB7W2tleTpzdHJpbmddOnN0cmluZ307ICAvLyBjYW5vbmljYWwgbWFwXG5cbiAgY29uc3RydWN0b3IobGluZXM6IExvY3VzTGluZVtdKSB7XG4gICAgdGhpcy5saW5lcyA9IGxpbmVzO1xuICAgIHRoaXMuY29udGlnTWFwID0gdGhpcy5leHRyYWN0Q29udGlncygpO1xuICB9XG5cbiAgZXh0cmFjdENvbnRpZ3MoKToge1trZXk6c3RyaW5nXTpzdHJpbmd9IHtcbiAgICB2YXIgY29udGlncyA9IFtdLFxuICAgICAgICBsYXN0Q29udGlnID0gJyc7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgbGluZSA9IHRoaXMubGluZXNbaV07XG4gICAgICBpZiAobGluZS5jb250aWcgIT0gbGFzdENvbnRpZykge1xuICAgICAgICBjb250aWdzLnB1c2gobGluZS5jb250aWcpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBjb250aWdNYXAgPSB7fTtcbiAgICBjb250aWdzLmZvckVhY2goY29udGlnID0+IHtcbiAgICAgIGlmIChjb250aWcuc2xpY2UoMCwgMykgPT0gJ2NocicpIHtcbiAgICAgICAgY29udGlnTWFwW2NvbnRpZy5zbGljZSg0KV0gPSBjb250aWc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb250aWdNYXBbJ2NocicgKyBjb250aWddID0gY29udGlnO1xuICAgICAgfVxuICAgICAgY29udGlnTWFwW2NvbnRpZ10gPSBjb250aWc7XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvbnRpZ01hcDtcbiAgfVxuXG4gIGdldEZlYXR1cmVzSW5SYW5nZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IFZhcmlhbnRbXSB7XG4gICAgdmFyIGxpbmVzID0gdGhpcy5saW5lcztcbiAgICB2YXIgY29udGlnID0gdGhpcy5jb250aWdNYXBbcmFuZ2UuY29udGlnXTtcbiAgICBpZiAoIWNvbnRpZykge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHZhciBzdGFydExvY3VzID0ge1xuICAgICAgICBjb250aWc6IGNvbnRpZyxcbiAgICAgICAgcG9zaXRpb246IHJhbmdlLnN0YXJ0KCksXG4gICAgICAgIGxpbmU6ICcnXG4gICAgICB9LFxuICAgICAgZW5kTG9jdXMgPSB7XG4gICAgICAgIGNvbnRpZzogY29udGlnLFxuICAgICAgICBwb3NpdGlvbjogcmFuZ2Uuc3RvcCgpLFxuICAgICAgICBsaW5lOiAnJ1xuICAgICAgfTtcbiAgICB2YXIgc3RhcnRJbmRleCA9IGxvd2VzdEluZGV4KGxpbmVzLCBzdGFydExvY3VzLCBjb21wYXJlTG9jdXNMaW5lKTtcblxuICAgIHZhciByZXN1bHQ6IExvY3VzTGluZVtdID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gc3RhcnRJbmRleDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoY29tcGFyZUxvY3VzTGluZShsaW5lc1tpXSwgZW5kTG9jdXMpID4gMCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHJlc3VsdC5wdXNoKGxpbmVzW2ldKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0Lm1hcChsaW5lID0+IGV4dHJhY3RWYXJpYW50KGxpbmUubGluZSkpO1xuICB9XG59XG5cblxuY2xhc3MgVmNmRmlsZSB7XG4gIHJlbW90ZUZpbGU6IEFic3RyYWN0RmlsZTtcbiAgaW1tZWRpYXRlOiBRLlByb21pc2U8SW1tZWRpYXRlVmNmRmlsZT47XG5cbiAgY29uc3RydWN0b3IocmVtb3RlRmlsZTogQWJzdHJhY3RGaWxlKSB7XG4gICAgdGhpcy5yZW1vdGVGaWxlID0gcmVtb3RlRmlsZTtcblxuICAgIHRoaXMuaW1tZWRpYXRlID0gdGhpcy5yZW1vdGVGaWxlLmdldEFsbFN0cmluZygpLnRoZW4odHh0ID0+IHtcbiAgICAgIC8vIFJ1bm5pbmcgdGhpcyBvbiBhIDEyTUIgc3RyaW5nIHRha2VzIH44MG1zIG9uIG15IDIwMTQgTWFjYm9vayBQcm9cbiAgICAgIHZhciBsaW5lcyA9IHR4dC5zcGxpdCgnXFxuJylcbiAgICAgICAgICAgICAgICAgICAgIC5maWx0ZXIobGluZSA9PiAobGluZS5sZW5ndGggJiYgbGluZVswXSAhPSAnIycpKVxuICAgICAgICAgICAgICAgICAgICAgLm1hcChleHRyYWN0TG9jdXNMaW5lKTtcbiAgICAgIHJldHVybiBsaW5lcztcbiAgICB9KS50aGVuKGxpbmVzID0+IHtcbiAgICAgIC8vIFNvcnRpbmcgdGhpcyBzdHJ1Y3R1cmUgZnJvbSB0aGUgMTJNQiBWQ0YgZmlsZSB0YWtlcyB+NjBtc1xuICAgICAgbGluZXMuc29ydChjb21wYXJlTG9jdXNMaW5lKTtcbiAgICAgIHJldHVybiBuZXcgSW1tZWRpYXRlVmNmRmlsZShsaW5lcyk7XG4gICAgfSk7XG4gICAgdGhpcy5pbW1lZGlhdGUuZG9uZSgpO1xuICB9XG5cbiAgZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogUS5Qcm9taXNlPFZhcmlhbnRbXT4ge1xuICAgIHJldHVybiB0aGlzLmltbWVkaWF0ZS50aGVuKGltbWVkaWF0ZSA9PiB7XG4gICAgICByZXR1cm4gaW1tZWRpYXRlLmdldEZlYXR1cmVzSW5SYW5nZShyYW5nZSk7XG4gICAgfSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBWY2ZGaWxlO1xuIiwiLyoqXG4gKiBUaGlzIGV4cG9zZXMgdGhlIG1haW4gZW50cnkgcG9pbnQgaW50byBwaWxldXAuanMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtUcmFjaywgVmlzdWFsaXplZFRyYWNrLCBWaXpXaXRoT3B0aW9uc30gZnJvbSAnLi90eXBlcyc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuXG4vLyBEYXRhIHNvdXJjZXNcbmltcG9ydCBUd29CaXREYXRhU291cmNlIGZyb20gJy4vc291cmNlcy9Ud29CaXREYXRhU291cmNlJztcbmltcG9ydCBSZWZlcmVuY2VEYXRhU291cmNlIGZyb20gJy4vc291cmNlcy9SZWZlcmVuY2VEYXRhU291cmNlJztcbmltcG9ydCBCaWdCZWREYXRhU291cmNlIGZyb20gJy4vc291cmNlcy9CaWdCZWREYXRhU291cmNlJztcbmltcG9ydCBWY2ZEYXRhU291cmNlIGZyb20gJy4vc291cmNlcy9WY2ZEYXRhU291cmNlJztcbmltcG9ydCBWYXJpYW50RGF0YVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvVmFyaWFudERhdGFTb3VyY2UnO1xuaW1wb3J0IEJhbURhdGFTb3VyY2UgZnJvbSAnLi9zb3VyY2VzL0JhbURhdGFTb3VyY2UnO1xuaW1wb3J0IEdBNEdIRGF0YVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvR0E0R0hEYXRhU291cmNlJztcbmltcG9ydCBDb3ZlcmFnZURhdGFTb3VyY2UgZnJvbSAnLi9zb3VyY2VzL0NvdmVyYWdlRGF0YVNvdXJjZSc7XG5pbXBvcnQgRW1wdHlTb3VyY2UgZnJvbSAnLi9zb3VyY2VzL0VtcHR5U291cmNlJztcbmltcG9ydCBGZWF0dXJlRGF0YVNvdXJjZSBmcm9tICcuL3NvdXJjZXMvRmVhdHVyZURhdGFTb3VyY2UnO1xuXG4vLyBWaXN1YWxpemF0aW9uc1xuaW1wb3J0IFBpbGV1cENvdmVyYWdlVHJhY2sgZnJvbSAnLi92aXovUGlsZXVwQ292ZXJhZ2VUcmFjayc7XG5pbXBvcnQgQ292ZXJhZ2VUcmFjayBmcm9tICcuL3Zpei9Db3ZlcmFnZVRyYWNrJztcbmltcG9ydCBHZW5vbWVUcmFjayBmcm9tICcuL3Zpei9HZW5vbWVUcmFjayc7XG5pbXBvcnQgR2VuZVRyYWNrIGZyb20gJy4vdml6L0dlbmVUcmFjayc7XG5pbXBvcnQgRmVhdHVyZVRyYWNrIGZyb20gJy4vdml6L0ZlYXR1cmVUcmFjayc7XG5pbXBvcnQgTG9jYXRpb25UcmFjayBmcm9tICcuL3Zpei9Mb2NhdGlvblRyYWNrJztcbmltcG9ydCBQaWxldXBUcmFjayBmcm9tICcuL3Zpei9QaWxldXBUcmFjayc7XG5pbXBvcnQgU2NhbGVUcmFjayBmcm9tICcuL3Zpei9TY2FsZVRyYWNrJztcbmltcG9ydCBWYXJpYW50VHJhY2sgZnJvbSAnLi92aXovVmFyaWFudFRyYWNrJztcbmltcG9ydCBHZW5vdHlwZVRyYWNrIGZyb20gJy4vdml6L0dlbm90eXBlVHJhY2snO1xuaW1wb3J0IFJvb3QgZnJvbSAnLi9Sb290JztcblxudHlwZSBHZW5vbWVSYW5nZSA9IHtcbiAgY29udGlnOiBzdHJpbmc7XG4gIHN0YXJ0OiBudW1iZXI7XG4gIHN0b3A6IG51bWJlcjtcbn1cblxudHlwZSBQaWxldXAgPSB7XG4gIHNldFJhbmdlKHJhbmdlOiBHZW5vbWVSYW5nZSk6IHZvaWQ7XG4gIGdldFJhbmdlKCk6IEdlbm9tZVJhbmdlO1xuICBkZXN0cm95KCk6IHZvaWQ7XG59XG5cbnR5cGUgUGlsZXVwUGFyYW1zID0ge1xuICByYW5nZToge1xuICAgIGNvbnRpZzogc3RyaW5nLFxuICAgIHN0YXJ0OiBudW1iZXIsXG4gICAgc3RvcDogbnVtYmVyXG4gIH07XG4gIHRyYWNrczogVHJhY2tbXTtcbn1cblxuZnVuY3Rpb24gZmluZFJlZmVyZW5jZSh0cmFja3M6IFZpc3VhbGl6ZWRUcmFja1tdKTogP1Zpc3VhbGl6ZWRUcmFjayB7XG4gIHJldHVybiBfLmZpbmQodHJhY2tzLCB0ID0+ICEhdC50cmFjay5pc1JlZmVyZW5jZSk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZShlbE9ySWQ6IHN0cmluZ3xFbGVtZW50LCBwYXJhbXM6IFBpbGV1cFBhcmFtcyk6IFBpbGV1cCB7XG4gIHZhciBlbCA9IHR5cGVvZihlbE9ySWQpID09ICdzdHJpbmcnID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoZWxPcklkKSA6IGVsT3JJZDtcbiAgaWYgKCFlbCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQXR0ZW1wdGVkIHRvIGNyZWF0ZSBwaWxldXAgd2l0aCBub24tZXhpc3RlbnQgZWxlbWVudCAke2VsT3JJZH1gKTtcbiAgfVxuXG4gIHZhciB2aXpUcmFja3MgPSBwYXJhbXMudHJhY2tzLm1hcChmdW5jdGlvbih0cmFjazogVHJhY2spOiBWaXN1YWxpemVkVHJhY2sge1xuICAgIHZhciBzb3VyY2UgPSB0cmFjay5kYXRhID8gdHJhY2suZGF0YSA6IHRyYWNrLnZpei5jb21wb25lbnQuZGVmYXVsdFNvdXJjZTtcbiAgICBpZighc291cmNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBUcmFjayAnJHt0cmFjay52aXouY29tcG9uZW50LmRpc3BsYXlOYW1lfScgZG9lc24ndCBoYXZlIGEgZGVmYXVsdCBgICtcbiAgICAgICAgYGRhdGEgc291cmNlOyB5b3UgbXVzdCBzcGVjaWZ5IG9uZSB3aGVuIGluaXRpYWxpemluZyBpdC5gXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB7dmlzdWFsaXphdGlvbjogdHJhY2sudml6LCBzb3VyY2UsIHRyYWNrfTtcbiAgfSk7XG5cbiAgdmFyIHJlZmVyZW5jZVRyYWNrID0gZmluZFJlZmVyZW5jZSh2aXpUcmFja3MpO1xuICBpZiAoIXJlZmVyZW5jZVRyYWNrKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbXVzdCBpbmNsdWRlIGF0IGxlYXN0IG9uZSB0cmFjayB3aXRoIHR5cGU9cmVmZXJlbmNlJyk7XG4gIH1cblxuICB2YXIgcmVhY3RFbGVtZW50ID1cbiAgICAgIFJlYWN0RE9NLnJlbmRlcig8Um9vdCByZWZlcmVuY2VTb3VyY2U9e3JlZmVyZW5jZVRyYWNrLnNvdXJjZX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cmFja3M9e3ZpelRyYWNrc31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsUmFuZ2U9e3BhcmFtcy5yYW5nZX0gLz4sIGVsKTtcbiAgcmV0dXJuIHtcbiAgICBzZXRSYW5nZShyYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICAgIGlmIChyZWFjdEVsZW1lbnQgPT09IG51bGwpIHtcbiAgICAgICAgdGhyb3cgJ0Nhbm5vdCBjYWxsIHNldFJhbmdlIG9uIGEgZGVzdHJveWVkIHBpbGV1cCc7XG4gICAgICB9XG4gICAgICByZWFjdEVsZW1lbnQuaGFuZGxlUmFuZ2VDaGFuZ2UocmFuZ2UpO1xuICAgIH0sXG4gICAgZ2V0UmFuZ2UoKTogR2Vub21lUmFuZ2Uge1xuICAgICAgaWYgKHJlYWN0RWxlbWVudCA9PT0gbnVsbCkge1xuICAgICAgICB0aHJvdyAnQ2Fubm90IGNhbGwgc2V0UmFuZ2Ugb24gYSBkZXN0cm95ZWQgcGlsZXVwJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBfLmNsb25lKHJlYWN0RWxlbWVudC5zdGF0ZS5yYW5nZSk7XG4gICAgfSxcbiAgICBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgaWYgKCF2aXpUcmFja3MpIHtcbiAgICAgICAgdGhyb3cgJ0Nhbm5vdCBjYWxsIGRlc3Ryb3koKSB0d2ljZSBvbiB0aGUgc2FtZSBwaWxldXAnO1xuICAgICAgfVxuICAgICAgdml6VHJhY2tzLmZvckVhY2goKHtzb3VyY2V9KSA9PiB7XG4gICAgICAgIHNvdXJjZS5vZmYoKTtcbiAgICAgIH0pO1xuICAgICAgUmVhY3RET00udW5tb3VudENvbXBvbmVudEF0Tm9kZShlbCk7XG4gICAgICByZWFjdEVsZW1lbnQgPSBudWxsO1xuICAgICAgcmVmZXJlbmNlVHJhY2sgPSBudWxsO1xuICAgICAgdml6VHJhY2tzID0gbnVsbDtcbiAgICB9XG4gIH07XG59XG5cbnR5cGUgVml6T2JqZWN0ID0gKChvcHRpb25zOiA/T2JqZWN0KSA9PiBWaXpXaXRoT3B0aW9ucyk7XG5cbmZ1bmN0aW9uIG1ha2VWaXpPYmplY3QoY29tcG9uZW50OiBSZWFjdENsYXNzKTogVml6T2JqZWN0IHtcbiAgcmV0dXJuIG9wdGlvbnMgPT4ge1xuICAgIG9wdGlvbnMgPSBfLmV4dGVuZCh7fSwgY29tcG9uZW50LmRlZmF1bHRPcHRpb25zLCBvcHRpb25zKTtcbiAgICByZXR1cm4ge2NvbXBvbmVudCwgb3B0aW9uc307XG4gIH07XG59XG5cbnZhciBwaWxldXAgPSB7XG4gIGNyZWF0ZTogY3JlYXRlLFxuICBmb3JtYXRzOiB7XG4gICAgYmFtOiBCYW1EYXRhU291cmNlLmNyZWF0ZSxcbiAgICBnYTRnaDogR0E0R0hEYXRhU291cmNlLmNyZWF0ZSxcbiAgICB2Y2Y6IFZjZkRhdGFTb3VyY2UuY3JlYXRlLFxuICAgIHZhcmlhbnRzOiBWYXJpYW50RGF0YVNvdXJjZS5jcmVhdGUsXG4gICAgZmVhdHVyZXM6IEZlYXR1cmVEYXRhU291cmNlLmNyZWF0ZSxcbiAgICB0d29CaXQ6IFR3b0JpdERhdGFTb3VyY2UuY3JlYXRlLFxuICAgIHJlZmVyZW5jZTogUmVmZXJlbmNlRGF0YVNvdXJjZS5jcmVhdGUsXG4gICAgYmlnQmVkOiBCaWdCZWREYXRhU291cmNlLmNyZWF0ZSxcbiAgICBjb3ZlcmFnZTogQ292ZXJhZ2VEYXRhU291cmNlLmNyZWF0ZSxcbiAgICBlbXB0eTogRW1wdHlTb3VyY2UuY3JlYXRlXG4gIH0sXG4gIHZpejoge1xuICAgIHBpbGV1cGNvdmVyYWdlOiBtYWtlVml6T2JqZWN0KFBpbGV1cENvdmVyYWdlVHJhY2spLFxuICAgIGNvdmVyYWdlOiBtYWtlVml6T2JqZWN0KENvdmVyYWdlVHJhY2spLFxuICAgIGdlbm9tZTogICBtYWtlVml6T2JqZWN0KEdlbm9tZVRyYWNrKSxcbiAgICBnZW5lczogICAgbWFrZVZpek9iamVjdChHZW5lVHJhY2spLFxuICAgIGZlYXR1cmVzOiBtYWtlVml6T2JqZWN0KEZlYXR1cmVUcmFjayksXG4gICAgbG9jYXRpb246IG1ha2VWaXpPYmplY3QoTG9jYXRpb25UcmFjayksXG4gICAgc2NhbGU6ICAgIG1ha2VWaXpPYmplY3QoU2NhbGVUcmFjayksXG4gICAgdmFyaWFudHM6IG1ha2VWaXpPYmplY3QoVmFyaWFudFRyYWNrKSxcbiAgICBnZW5vdHlwZXM6IG1ha2VWaXpPYmplY3QoR2Vub3R5cGVUcmFjayksXG4gICAgcGlsZXVwOiAgIG1ha2VWaXpPYmplY3QoUGlsZXVwVHJhY2spXG4gIH0sXG4gIHZlcnNpb246ICcwLjYuOCdcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gcGlsZXVwO1xuXG4vLyBFeHBvcnQgYSBnbG9iYWwgdW50aWwgdGhlIGRpc3RyaWJ1dGVkIHBhY2thZ2Ugd29ya3Mgd2l0aCBDb21tb25KU1xuLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9oYW1tZXJsYWIvcGlsZXVwLmpzL2lzc3Vlcy8xMzZcbmlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICB3aW5kb3cucGlsZXVwID0gcGlsZXVwO1xufVxuIiwiLyoqXG4gKiBMaWdodHdlaWdodCByZXBsYWNlbWVudCBmb3IgZDMuc2NhbGUubGluZWFyKCkuXG4gKiBUaGlzIG9ubHkgc3VwcG9ydHMgbnVtZXJpYyBzY2FsZXMsIGUuZy4gc2NhbGUucmFuZ2UoWydyZWQnLCAnYmx1ZSddKSBpcyBpbnZhbGlkLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBsaW5lYXIoKTogYW55IHtcbiAgdmFyIGNsYW1wZWQgPSBmYWxzZSxcbiAgICAgIGRvbWFpbiA9IFswLCAxXSxcbiAgICAgIHJhbmdlID0gWzAsIDFdO1xuXG4gIHZhciBtZSA9IGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoY2xhbXBlZCkge1xuICAgICAgeCA9IE1hdGgubWF4KE1hdGgubWluKHgsIGRvbWFpblsxXSksIGRvbWFpblswXSk7XG4gICAgfVxuICAgIC8vIFRPRE86IGNvbXB1dGUgY29lZmZpY2llbnRzIG9uY2UuXG4gICAgcmV0dXJuICh4IC0gZG9tYWluWzBdKSAvIChkb21haW5bMV0gLSBkb21haW5bMF0pICogKHJhbmdlWzFdIC0gcmFuZ2VbMF0pICsgcmFuZ2VbMF07XG4gIH07XG5cbiAgbWUuY2xhbXAgPSBmdW5jdGlvbih4KSB7XG4gICAgaWYgKHggPT09IHVuZGVmaW5lZCkgcmV0dXJuIGNsYW1wZWQ7XG4gICAgY2xhbXBlZCA9IHg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIG1lLmRvbWFpbiA9IGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoeCA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZG9tYWluO1xuICAgIGRvbWFpbiA9IHg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIG1lLnJhbmdlID0gZnVuY3Rpb24oeCkge1xuICAgIGlmICh4ID09PSB1bmRlZmluZWQpIHJldHVybiByYW5nZTtcbiAgICByYW5nZSA9IHg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG4gIG1lLmludmVydCA9IGZ1bmN0aW9uKHgpIHtcbiAgICBpZiAoY2xhbXBlZCkge1xuICAgICAgdGhyb3cgYENhbid0IGludmVydCBhIGNsYW1wZWQgbGluZWFyIHNjYWxlLmA7XG4gICAgfVxuICAgIHJldHVybiAoeCAtIHJhbmdlWzBdKSAvIChyYW5nZVsxXSAtIHJhbmdlWzBdKSAqIChkb21haW5bMV0gLSBkb21haW5bMF0pICsgZG9tYWluWzBdO1xuICB9O1xuICBtZS5uaWNlID0gZnVuY3Rpb24oKSB7XG4gICAgLy8gVGhpcyBtZXRob2QgaXMgYWRhcHRlZCBkaXJlY3RseSBmcm9tIGQzJ3MgbGluZWFyIHNjYWxlIG5pY2UgbWV0aG9kLlxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWJvc3RvY2svZDMvYmxvYi81Yjk4MWExOGQvc3JjL3NjYWxlL2xpbmVhci5qcyNMOTQtTDExMlxuICAgIHZhciBtID0gMTA7XG4gICAgdmFyIGV4dGVudCA9IGRvbWFpbixcbiAgICAgICAgc3BhbiA9IE1hdGguYWJzKGV4dGVudFsxXSAtIGV4dGVudFswXSksXG4gICAgICAgIHN0ZXAgPSBNYXRoLnBvdygxMCwgTWF0aC5mbG9vcihNYXRoLmxvZyhzcGFuIC8gbSkgLyBNYXRoLkxOMTApKSxcbiAgICAgICAgZXJyID0gbSAvIHNwYW4gKiBzdGVwO1xuXG4gICAgLy8gRmlsdGVyIHRpY2tzIHRvIGdldCBjbG9zZXIgdG8gdGhlIGRlc2lyZWQgY291bnQuXG4gICAgaWYgKGVyciA8PSAwLjE1KSBzdGVwICo9IDEwO1xuICAgIGVsc2UgaWYgKGVyciA8PSAwLjM1KSBzdGVwICo9IDU7XG4gICAgZWxzZSBpZiAoZXJyIDw9IDAuNzUpIHN0ZXAgKj0gMjtcblxuICAgIHZhciBuaWNlID0ge1xuICAgICAgZmxvb3I6IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIE1hdGguZmxvb3IoeCAvIHN0ZXApICogc3RlcDsgfSxcbiAgICAgIGNlaWw6IGZ1bmN0aW9uKHgpIHsgcmV0dXJuIE1hdGguY2VpbCh4IC8gc3RlcCkgKiBzdGVwOyB9XG4gICAgfTtcblxuICAgIHZhciBpMCA9IDAsXG4gICAgICAgIGkxID0gMSxcbiAgICAgICAgeDAgPSBkb21haW5baTBdLFxuICAgICAgICB4MSA9IGRvbWFpbltpMV0sXG4gICAgICAgIGR4O1xuXG4gICAgaWYgKHgxIDwgeDApIHtcbiAgICAgIGR4ID0gaTA7IGkwID0gaTE7IGkxID0gZHg7XG4gICAgICBkeCA9IHgwOyB4MCA9IHgxOyB4MSA9IGR4O1xuICAgIH1cblxuICAgIGRvbWFpbltpMF0gPSBuaWNlLmZsb29yKHgwKTtcbiAgICBkb21haW5baTFdID0gbmljZS5jZWlsKHgxKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICByZXR1cm4gbWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0geyBsaW5lYXIgfTtcbiIsIi8qIEBmbG93ICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQge0V2ZW50c30gZnJvbSAnYmFja2JvbmUnO1xuXG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IEJhbUZpbGUgZnJvbSAnLi4vZGF0YS9iYW0nO1xuaW1wb3J0IFJlbW90ZUZpbGUgZnJvbSAnLi4vUmVtb3RlRmlsZSc7XG5cbmltcG9ydCB0eXBlIHtBbGlnbm1lbnQsIEFsaWdubWVudERhdGFTb3VyY2V9IGZyb20gJy4uL0FsaWdubWVudCc7XG5cbi8vIEdlbm9tZSByYW5nZXMgYXJlIHJvdW5kZWQgdG8gbXVsdGlwbGVzIG9mIHRoaXMgZm9yIGZldGNoaW5nLlxuLy8gVGhpcyByZWR1Y2VzIG5ldHdvcmsgYWN0aXZpdHkgd2hpbGUgZmV0Y2hpbmcuXG4vLyBUT0RPOiB0dW5lIHRoaXMgdmFsdWVcbnZhciBCQVNFX1BBSVJTX1BFUl9GRVRDSCA9IDEwMDtcblxuZnVuY3Rpb24gZXhwYW5kUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pIHtcbiAgdmFyIHJvdW5kRG93biA9IHggPT4geCAtIHggJSBCQVNFX1BBSVJTX1BFUl9GRVRDSDtcbiAgdmFyIG5ld1N0YXJ0ID0gTWF0aC5tYXgoMSwgcm91bmREb3duKHJhbmdlLnN0YXJ0KCkpKSxcbiAgICAgIG5ld1N0b3AgPSByb3VuZERvd24ocmFuZ2Uuc3RvcCgpICsgQkFTRV9QQUlSU19QRVJfRkVUQ0ggLSAxKTtcblxuICByZXR1cm4gbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZywgbmV3U3RhcnQsIG5ld1N0b3ApO1xufVxuXG5cbmZ1bmN0aW9uIGNyZWF0ZUZyb21CYW1GaWxlKHJlbW90ZVNvdXJjZTogQmFtRmlsZSk6IEFsaWdubWVudERhdGFTb3VyY2Uge1xuICB2YXIgcmVhZHM6IHtba2V5OnN0cmluZ106IEFsaWdubWVudH0gPSB7fTtcblxuICAvLyBNYXBwaW5nIGZyb20gY29udGlnIG5hbWUgdG8gY2Fub25pY2FsIGNvbnRpZyBuYW1lLlxuICB2YXIgY29udGlnTmFtZXM6IHtba2V5OnN0cmluZ106IHN0cmluZ30gPSB7fTtcblxuICAvLyBSYW5nZXMgZm9yIHdoaWNoIHdlIGhhdmUgY29tcGxldGUgaW5mb3JtYXRpb24gLS0gbm8gbmVlZCB0byBoaXQgbmV0d29yay5cbiAgdmFyIGNvdmVyZWRSYW5nZXM6IENvbnRpZ0ludGVydmFsPHN0cmluZz5bXSA9IFtdO1xuXG4gIGZ1bmN0aW9uIGFkZFJlYWQocmVhZDogQWxpZ25tZW50KSB7XG4gICAgdmFyIGtleSA9IHJlYWQuZ2V0S2V5KCk7XG4gICAgaWYgKCFyZWFkc1trZXldKSB7XG4gICAgICByZWFkc1trZXldID0gcmVhZDtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzYXZlQ29udGlnTWFwcGluZyhoZWFkZXI6IE9iamVjdCkge1xuICAgIGhlYWRlci5yZWZlcmVuY2VzLmZvckVhY2gocmVmID0+IHtcbiAgICAgIHZhciBuYW1lID0gcmVmLm5hbWU7XG4gICAgICBjb250aWdOYW1lc1tuYW1lXSA9IG5hbWU7XG4gICAgICBjb250aWdOYW1lc1snY2hyJyArIG5hbWVdID0gbmFtZTtcbiAgICAgIGlmIChuYW1lLnNsaWNlKDAsIDMpID09ICdjaHInKSB7XG4gICAgICAgIGNvbnRpZ05hbWVzW25hbWUuc2xpY2UoMyldID0gbmFtZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZldGNoKHJhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgIHZhciByZWZzUHJvbWlzZSA9ICFfLmlzRW1wdHkoY29udGlnTmFtZXMpID8gUS53aGVuKCkgOiBcbiAgICAgICAgcmVtb3RlU291cmNlLmhlYWRlci50aGVuKHNhdmVDb250aWdNYXBwaW5nKTtcblxuICAgIC8vIEZvciBCQU1zIHdpdGhvdXQgaW5kZXggY2h1bmtzLCB3ZSBuZWVkIHRvIGZldGNoIHRoZSBlbnRpcmUgQkFJIGZpbGVcbiAgICAvLyBiZWZvcmUgd2UgY2FuIGtub3cgaG93IGxhcmdlIHRoZSBCQU0gaGVhZGVyIGlzLiBJZiB0aGUgaGVhZGVyIGlzXG4gICAgLy8gcGVuZGluZywgaXQncyBhbG1vc3QgY2VydGFpbmx5IGJlY2F1c2UgdGhlIEJBSSBmaWxlIGlzIGluIGZsaWdodC5cbiAgICBRLndoZW4oKS50aGVuKCgpID0+IHtcbiAgICAgIGlmIChyZWZzUHJvbWlzZS5pc1BlbmRpbmcoKSAmJiAhcmVtb3RlU291cmNlLmhhc0luZGV4Q2h1bmtzKSB7XG4gICAgICAgIG8udHJpZ2dlcignbmV0d29ya3Byb2dyZXNzJywge1xuICAgICAgICAgIHN0YXR1czogJ0ZldGNoaW5nIEJBTSBpbmRleCAtLSB1c2UgaW5kZXggY2h1bmtzIHRvIHNwZWVkIHRoaXMgdXAnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pLmRvbmUoKTtcblxuICAgIHJldHVybiByZWZzUHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgIHZhciBjb250aWdOYW1lID0gY29udGlnTmFtZXNbcmFuZ2UuY29udGlnXTtcbiAgICAgIHZhciBpbnRlcnZhbCA9IG5ldyBDb250aWdJbnRlcnZhbChjb250aWdOYW1lLCByYW5nZS5zdGFydCwgcmFuZ2Uuc3RvcCk7XG5cbiAgICAgIC8vIENoZWNrIGlmIHRoaXMgaW50ZXJ2YWwgaXMgYWxyZWFkeSBpbiB0aGUgY2FjaGUuXG4gICAgICAvLyBJZiBub3QsIGltbWVkaWF0ZWx5IFwiY292ZXJcIiBpdCB0byBwcmV2ZW50IGR1cGxpY2F0ZSByZXF1ZXN0cy5cbiAgICAgIGlmIChpbnRlcnZhbC5pc0NvdmVyZWRCeShjb3ZlcmVkUmFuZ2VzKSkge1xuICAgICAgICByZXR1cm4gUS53aGVuKCk7XG4gICAgICB9XG5cbiAgICAgIGludGVydmFsID0gZXhwYW5kUmFuZ2UoaW50ZXJ2YWwpO1xuICAgICAgdmFyIG5ld1JhbmdlcyA9IGludGVydmFsLmNvbXBsZW1lbnRJbnRlcnZhbHMoY292ZXJlZFJhbmdlcyk7XG4gICAgICBjb3ZlcmVkUmFuZ2VzLnB1c2goaW50ZXJ2YWwpO1xuICAgICAgY292ZXJlZFJhbmdlcyA9IENvbnRpZ0ludGVydmFsLmNvYWxlc2NlKGNvdmVyZWRSYW5nZXMpO1xuXG4gICAgICByZXR1cm4gUS5hbGwobmV3UmFuZ2VzLm1hcChyYW5nZSA9PlxuICAgICAgICAgIHJlbW90ZVNvdXJjZS5nZXRBbGlnbm1lbnRzSW5SYW5nZShyYW5nZSlcbiAgICAgICAgICAgIC5wcm9ncmVzcyhwcm9ncmVzc0V2ZW50ID0+IHtcbiAgICAgICAgICAgICAgby50cmlnZ2VyKCduZXR3b3JrcHJvZ3Jlc3MnLCBwcm9ncmVzc0V2ZW50KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZWFkcyA9PiB7XG4gICAgICAgICAgICAgIHJlYWRzLmZvckVhY2gocmVhZCA9PiBhZGRSZWFkKHJlYWQpKTtcbiAgICAgICAgICAgICAgby50cmlnZ2VyKCduZXR3b3JrZG9uZScpO1xuICAgICAgICAgICAgICBvLnRyaWdnZXIoJ25ld2RhdGEnLCByYW5nZSk7XG4gICAgICAgICAgICB9KSkpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0QWxpZ25tZW50c0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBBbGlnbm1lbnRbXSB7XG4gICAgaWYgKCFyYW5nZSkgcmV0dXJuIFtdO1xuICAgIGlmIChfLmlzRW1wdHkoY29udGlnTmFtZXMpKSByZXR1cm4gW107XG5cbiAgICB2YXIgY2Fub25pY2FsUmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwoY29udGlnTmFtZXNbcmFuZ2UuY29udGlnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2Uuc3RhcnQoKSwgcmFuZ2Uuc3RvcCgpKTtcblxuICAgIHJldHVybiBfLmZpbHRlcihyZWFkcywgcmVhZCA9PiByZWFkLmludGVyc2VjdHMoY2Fub25pY2FsUmFuZ2UpKTtcbiAgfVxuXG4gIHZhciBvID0ge1xuICAgIHJhbmdlQ2hhbmdlZDogZnVuY3Rpb24obmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgICBmZXRjaChuZXdSYW5nZSkuZG9uZSgpO1xuICAgIH0sXG4gICAgZ2V0QWxpZ25tZW50c0luUmFuZ2UsXG5cbiAgICAvLyBUaGVzZSBhcmUgaGVyZSB0byBtYWtlIEZsb3cgaGFwcHkuXG4gICAgb246ICgpID0+IHt9LFxuICAgIG9uY2U6ICgpID0+IHt9LFxuICAgIG9mZjogKCkgPT4ge30sXG4gICAgdHJpZ2dlcjogKCkgPT4ge31cbiAgfTtcbiAgXy5leHRlbmQobywgRXZlbnRzKTsgIC8vIE1ha2UgdGhpcyBhbiBldmVudCBlbWl0dGVyXG5cbiAgcmV0dXJuIG87XG59XG5cbnR5cGUgQmFtU3BlYyA9IHtcbiAgdXJsOiBzdHJpbmc7XG4gIGluZGV4VXJsOiBzdHJpbmc7XG4gIGluZGV4Q2h1bmtzPzogT2JqZWN0O1xufVxuXG5mdW5jdGlvbiBjcmVhdGUoc3BlYzogQmFtU3BlYyk6IEFsaWdubWVudERhdGFTb3VyY2Uge1xuICB2YXIgdXJsID0gc3BlYy51cmw7XG4gIGlmICghdXJsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIFVSTCBmcm9tIHRyYWNrIGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkoc3BlYyl9YCk7XG4gIH1cbiAgdmFyIGluZGV4VXJsID0gc3BlYy5pbmRleFVybDtcbiAgaWYgKCFpbmRleFVybCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBpbmRleFVSTCBmcm9tIHRyYWNrIGRhdGE6ICR7SlNPTi5zdHJpbmdpZnkoc3BlYyl9YCk7XG4gIH1cblxuICAvLyBUT0RPOiB0aGlzIGlzIG92ZXJseSByZXBldGl0aXZlLCBzZWUgZmxvdyBpc3N1ZSBmYWNlYm9vay9mbG93IzQzN1xuICB2YXIgYmFtRmlsZSA9IHNwZWMuaW5kZXhDaHVua3MgP1xuICAgICAgbmV3IEJhbUZpbGUobmV3IFJlbW90ZUZpbGUodXJsKSwgbmV3IFJlbW90ZUZpbGUoaW5kZXhVcmwpLCBzcGVjLmluZGV4Q2h1bmtzKSA6XG4gICAgICBuZXcgQmFtRmlsZShuZXcgUmVtb3RlRmlsZSh1cmwpLCBuZXcgUmVtb3RlRmlsZShpbmRleFVybCkpO1xuICByZXR1cm4gY3JlYXRlRnJvbUJhbUZpbGUoYmFtRmlsZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGUsXG4gIGNyZWF0ZUZyb21CYW1GaWxlXG59O1xuIiwiLyogQGZsb3cgKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1N0cmFuZH0gZnJvbSAnLi4vQWxpZ25tZW50JztcblxuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQgUSBmcm9tICdxJztcbmltcG9ydCB7RXZlbnRzfSBmcm9tICdiYWNrYm9uZSc7XG5cbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi4vSW50ZXJ2YWwnO1xuaW1wb3J0IEJpZ0JlZCBmcm9tICcuLi9kYXRhL0JpZ0JlZCc7XG5cblxuZXhwb3J0IHR5cGUgR2VuZSA9IHtcbiAgcG9zaXRpb246IENvbnRpZ0ludGVydmFsPHN0cmluZz47XG4gIGlkOiBzdHJpbmc7ICAvLyB0cmFuc2NyaXB0IElELCBlLmcuIFwiRU5TVDAwMDAwMjY5MzA1XCJcbiAgc3RyYW5kOiBTdHJhbmQ7XG4gIGNvZGluZ1JlZ2lvbjogSW50ZXJ2YWw7ICAvLyBsb2N1cyBvZiBjb2Rpbmcgc3RhcnRcbiAgZXhvbnM6IEFycmF5PEludGVydmFsPjtcbiAgZ2VuZUlkOiBzdHJpbmc7ICAvLyBlbnNlbWJsIGdlbmUgSURcbiAgbmFtZTogc3RyaW5nOyAgLy8gaHVtYW4tcmVhZGFibGUgbmFtZSwgZS5nLiBcIlRQNTNcIlxufVxuXG4vLyBGbG93IHR5cGUgZm9yIGV4cG9ydC5cbmV4cG9ydCB0eXBlIEJpZ0JlZFNvdXJjZSA9IHtcbiAgcmFuZ2VDaGFuZ2VkOiAobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSA9PiB2b2lkO1xuICBnZXRHZW5lc0luUmFuZ2U6IChyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPikgPT4gR2VuZVtdO1xuICBvbjogKGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKSA9PiB2b2lkO1xuICBvZmY6IChldmVudDogc3RyaW5nKSA9PiB2b2lkO1xuICB0cmlnZ2VyOiAoZXZlbnQ6IHN0cmluZywgLi4uYXJnczphbnkpID0+IHZvaWQ7XG59XG5cbi8vIFRoZSBmaWVsZHMgYXJlIGRlc2NyaWJlZCBhdCBodHRwOi8vZ2Vub21lLnVjc2MuZWR1L0ZBUS9GQVFmb3JtYXQjZm9ybWF0MVxuZnVuY3Rpb24gcGFyc2VCZWRGZWF0dXJlKGYpOiBHZW5lIHtcbiAgdmFyIHBvc2l0aW9uID0gbmV3IENvbnRpZ0ludGVydmFsKGYuY29udGlnLCBmLnN0YXJ0LCBmLnN0b3ApLFxuICAgICAgeCA9IGYucmVzdC5zcGxpdCgnXFx0JyksXG4gICAgICAvLyBleG9ucyBhcnJheXMgc29tZXRpbWVzIGhhdmUgdHJhaWxpbmcgY29tbWFzXG4gICAgICBleG9uTGVuZ3RocyA9IHhbN10ucmVwbGFjZSgvLCokLywgJycpLnNwbGl0KCcsJykubWFwKE51bWJlciksXG4gICAgICBleG9uU3RhcnRzID0geFs4XS5yZXBsYWNlKC8sKiQvLCAnJykuc3BsaXQoJywnKS5tYXAoTnVtYmVyKSxcbiAgICAgIGV4b25zID0gXy56aXAoZXhvblN0YXJ0cywgZXhvbkxlbmd0aHMpXG4gICAgICAgICAgICAgICAubWFwKGZ1bmN0aW9uKFtzdGFydCwgbGVuZ3RoXSkge1xuICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEludGVydmFsKGYuc3RhcnQgKyBzdGFydCwgZi5zdGFydCArIHN0YXJ0ICsgbGVuZ3RoKTtcbiAgICAgICAgICAgICAgIH0pO1xuXG4gIHJldHVybiB7XG4gICAgcG9zaXRpb24sXG4gICAgaWQ6IHhbMF0sICAvLyBlLmcuIEVOU1QwMDAwMDM1OTU5N1xuICAgIHN0cmFuZDogeFsyXSwgIC8vIGVpdGhlciArIG9yIC1cbiAgICBjb2RpbmdSZWdpb246IG5ldyBJbnRlcnZhbChOdW1iZXIoeFszXSksIE51bWJlcih4WzRdKSksXG4gICAgZ2VuZUlkOiB4WzldLFxuICAgIG5hbWU6IHhbMTBdLFxuICAgIGV4b25zXG4gIH07XG59XG5cblxuZnVuY3Rpb24gY3JlYXRlRnJvbUJpZ0JlZEZpbGUocmVtb3RlU291cmNlOiBCaWdCZWQpOiBCaWdCZWRTb3VyY2Uge1xuICAvLyBDb2xsZWN0aW9uIG9mIGdlbmVzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gbG9hZGVkLlxuICB2YXIgZ2VuZXM6IHtba2V5OnN0cmluZ106IEdlbmV9ID0ge307XG5cbiAgLy8gUmFuZ2VzIGZvciB3aGljaCB3ZSBoYXZlIGNvbXBsZXRlIGluZm9ybWF0aW9uIC0tIG5vIG5lZWQgdG8gaGl0IG5ldHdvcmsuXG4gIHZhciBjb3ZlcmVkUmFuZ2VzOiBBcnJheTxDb250aWdJbnRlcnZhbDxzdHJpbmc+PiA9IFtdO1xuXG4gIGZ1bmN0aW9uIGFkZEdlbmUobmV3R2VuZSkge1xuICAgIGlmICghZ2VuZXNbbmV3R2VuZS5pZF0pIHtcbiAgICAgIGdlbmVzW25ld0dlbmUuaWRdID0gbmV3R2VuZTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRHZW5lc0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBHZW5lW10ge1xuICAgIGlmICghcmFuZ2UpIHJldHVybiBbXTtcbiAgICB2YXIgcmVzdWx0cyA9IFtdO1xuICAgIF8uZWFjaChnZW5lcywgZ2VuZSA9PiB7XG4gICAgICBpZiAocmFuZ2UuaW50ZXJzZWN0cyhnZW5lLnBvc2l0aW9uKSkge1xuICAgICAgICByZXN1bHRzLnB1c2goZ2VuZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICBmdW5jdGlvbiBmZXRjaChyYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICB2YXIgaW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwocmFuZ2UuY29udGlnLCByYW5nZS5zdGFydCwgcmFuZ2Uuc3RvcCk7XG5cbiAgICAvLyBDaGVjayBpZiB0aGlzIGludGVydmFsIGlzIGFscmVhZHkgaW4gdGhlIGNhY2hlLlxuICAgIGlmIChpbnRlcnZhbC5pc0NvdmVyZWRCeShjb3ZlcmVkUmFuZ2VzKSkge1xuICAgICAgcmV0dXJuIFEud2hlbigpO1xuICAgIH1cblxuICAgIGNvdmVyZWRSYW5nZXMucHVzaChpbnRlcnZhbCk7XG4gICAgY292ZXJlZFJhbmdlcyA9IENvbnRpZ0ludGVydmFsLmNvYWxlc2NlKGNvdmVyZWRSYW5nZXMpO1xuXG4gICAgcmV0dXJuIHJlbW90ZVNvdXJjZS5nZXRGZWF0dXJlQmxvY2tzT3ZlcmxhcHBpbmcoaW50ZXJ2YWwpLnRoZW4oZmVhdHVyZUJsb2NrcyA9PiB7XG4gICAgICBmZWF0dXJlQmxvY2tzLmZvckVhY2goZmIgPT4ge1xuICAgICAgICBjb3ZlcmVkUmFuZ2VzLnB1c2goZmIucmFuZ2UpO1xuICAgICAgICBjb3ZlcmVkUmFuZ2VzID0gQ29udGlnSW50ZXJ2YWwuY29hbGVzY2UoY292ZXJlZFJhbmdlcyk7XG4gICAgICAgIHZhciBnZW5lcyA9IGZiLnJvd3MubWFwKHBhcnNlQmVkRmVhdHVyZSk7XG4gICAgICAgIGdlbmVzLmZvckVhY2goZ2VuZSA9PiBhZGRHZW5lKGdlbmUpKTtcbiAgICAgICAgLy93ZSBoYXZlIG5ldyBkYXRhIGZyb20gb3VyIGludGVybmFsIGJsb2NrIHJhbmdlXG4gICAgICAgIG8udHJpZ2dlcignbmV3ZGF0YScsIGZiLnJhbmdlKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgdmFyIG8gPSB7XG4gICAgcmFuZ2VDaGFuZ2VkOiBmdW5jdGlvbihuZXdSYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICAgIGZldGNoKG5ld1JhbmdlKS5kb25lKCk7XG4gICAgfSxcbiAgICBnZXRHZW5lc0luUmFuZ2UsXG5cbiAgICAvLyBUaGVzZSBhcmUgaGVyZSB0byBtYWtlIEZsb3cgaGFwcHkuXG4gICAgb246ICgpID0+IHt9LFxuICAgIG9mZjogKCkgPT4ge30sXG4gICAgdHJpZ2dlcjogKCkgPT4ge31cbiAgfTtcbiAgXy5leHRlbmQobywgRXZlbnRzKTsgIC8vIE1ha2UgdGhpcyBhbiBldmVudCBlbWl0dGVyXG5cbiAgcmV0dXJuIG87XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZShkYXRhOiB7dXJsOnN0cmluZ30pOiBCaWdCZWRTb3VyY2Uge1xuICB2YXIgdXJsID0gZGF0YS51cmw7XG4gIGlmICghdXJsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIFVSTCBmcm9tIHRyYWNrOiAke0pTT04uc3RyaW5naWZ5KGRhdGEpfWApO1xuICB9XG5cbiAgcmV0dXJuIGNyZWF0ZUZyb21CaWdCZWRGaWxlKG5ldyBCaWdCZWQodXJsKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGUsXG4gIGNyZWF0ZUZyb21CaWdCZWRGaWxlXG59O1xuIiwiLyoqXG4gKiBSZW1vdGUgRW5kcG9pbnQgZm9yIGNvdmVyYWdlLlxuICpcbiAqIENvdmVyYWdlRGF0YVNvdXJjZSBpcyBwdXJlbHkgZm9yIGRhdGEgcGFyc2luZyBhbmQgZmV0Y2hpbmcuXG4gKiBDb3ZlcmFnZSBmb3IgQ292ZXJhZ2VEYXRhU291cmNlIGNhbiBiZSBjYWxjdWxhdGVkIGZyb20gYW55IHNvdXJjZSxcbiAqIGluY2x1ZGluZywgYnV0IG5vdCBsaW1pdGVkIHRvLCBBbGlnbm1lbnQgUmVjb3JkcyxcbiAqIHZhcmlhbnRzIG9yIGZlYXR1cmVzLlxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCB7RXZlbnRzfSBmcm9tICdiYWNrYm9uZSc7XG5pbXBvcnQge1Jlc29sdXRpb25DYWNoZX0gZnJvbSAnLi4vUmVzb2x1dGlvbkNhY2hlJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQge1JlbW90ZVJlcXVlc3R9IGZyb20gJy4uL1JlbW90ZVJlcXVlc3QnO1xuXG5leHBvcnQgdHlwZSBDb3ZlcmFnZURhdGFTb3VyY2UgPSB7XG4gIG1heENvdmVyYWdlOiAocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pID0+IG51bWJlcjtcbiAgcmFuZ2VDaGFuZ2VkOiAobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSA9PiB2b2lkO1xuICBnZXRDb3ZlcmFnZUluUmFuZ2U6IChyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPikgPT4gUG9zaXRpb25Db3VudFtdO1xuICBvbjogKGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKSA9PiB2b2lkO1xuICBvZmY6IChldmVudDogc3RyaW5nKSA9PiB2b2lkO1xuICB0cmlnZ2VyOiAoZXZlbnQ6IHN0cmluZywgLi4uYXJnczphbnkpID0+IHZvaWQ7XG59O1xuXG52YXIgQkFTRV9QQUlSU19QRVJfRkVUQ0ggPSAxMDAwO1xuXG5leHBvcnQgdHlwZSBQb3NpdGlvbkNvdW50ID0ge1xuICBjb250aWc6IHN0cmluZztcbiAgc3RhcnQ6IG51bWJlcjtcbiAgZW5kOiBudW1iZXI7XG4gIGNvdW50OiBudW1iZXI7XG59XG5cbmZ1bmN0aW9uIGtleUZ1bmN0aW9uKHA6IFBvc2l0aW9uQ291bnQpOiBzdHJpbmcge1xuICByZXR1cm4gYCR7cC5jb250aWd9OiR7cC5zdGFydH0tJHtwLmVuZH1gO1xufVxuXG5mdW5jdGlvbiBmaWx0ZXJGdW5jdGlvbihyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiwgcDogUG9zaXRpb25Db3VudCk6IGJvb2xlYW4ge1xuICByZXR1cm4gcmFuZ2UuY2hyQ29udGFpbnNMb2N1cyhwLmNvbnRpZywgcC5zdGFydCk7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyb21Db3ZlcmFnZVVybChyZW1vdGVTb3VyY2U6IFJlbW90ZVJlcXVlc3QpOiBDb3ZlcmFnZURhdGFTb3VyY2Uge1xuICB2YXIgY2FjaGU6IFJlc29sdXRpb25DYWNoZTxQb3NpdGlvbkNvdW50PiA9XG4gICAgbmV3IFJlc29sdXRpb25DYWNoZShmaWx0ZXJGdW5jdGlvbiwga2V5RnVuY3Rpb24pO1xuXG4gIGZ1bmN0aW9uIG5vdGlmeUZhaWx1cmUobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgby50cmlnZ2VyKCduZXR3b3JrZmFpbHVyZScsIG1lc3NhZ2UpO1xuICAgIG8udHJpZ2dlcignbmV0d29ya2RvbmUnKTtcbiAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gIH1cblxuICBmdW5jdGlvbiBtYXhDb3ZlcmFnZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiwgcmVzb2x1dGlvbjogP251bWJlcik6IG51bWJlciB7XG4gICAgdmFyIHBvc2l0aW9uczogbnVtYmVyW10gPSBjYWNoZS5nZXQocmFuZ2UsIHJlc29sdXRpb24pLm1hcChyID0+IHIuY291bnQpO1xuICAgIHZhciBtYXhDb3ZlcmFnZSA9IE1hdGgubWF4LmFwcGx5KE1hdGgsIHBvc2l0aW9ucyk7XG4gICAgcmV0dXJuIG1heENvdmVyYWdlO1xuICB9XG5cbiAgZnVuY3Rpb24gZmV0Y2gocmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgdmFyIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQsIHJhbmdlLnN0b3ApO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpbnRlcnZhbCBpcyBhbHJlYWR5IGluIHRoZSBjYWNoZS5cbiAgICBpZiAoY2FjaGUuY292ZXJzUmFuZ2UoaW50ZXJ2YWwpKSB7XG4gICAgICByZXR1cm4gUS53aGVuKCk7XG4gICAgfVxuXG4gICAgLy8gbW9kaWZ5IGVuZHBvaW50IHRvIGNhbGN1bGF0ZSBjb3ZlcmFnZSB1c2luZyBiaW5uaW5nXG4gICAgdmFyIHJlc29sdXRpb24gPSBSZXNvbHV0aW9uQ2FjaGUuZ2V0UmVzb2x1dGlvbihpbnRlcnZhbC5pbnRlcnZhbCk7XG4gICAgdmFyIGVuZHBvaW50TW9kaWZpZXIgPSBgYmlubmluZz0ke3Jlc29sdXRpb259YDtcblxuICAgIC8vIGdldCBhbGwgc21hbGxlciBpbnRlcnZhbHMgbm90IHlldCBjb3ZlcmVkIGluIGNhY2hlXG4gICAgdmFyIG5ld1JhbmdlcyA9IGNhY2hlLmNvbXBsZW1lbnRJbnRlcnZhbChpbnRlcnZhbCwgcmVzb2x1dGlvbik7XG5cbiAgICAvLyBDb3ZlciB0aGUgcmFuZ2UgaW1tZWRpYXRlbHkgdG8gcHJldmVudCBkdXBsaWNhdGUgZmV0Y2hlcy5cbiAgICBjYWNoZS5jb3ZlclJhbmdlKGludGVydmFsKTtcbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtwcm9ncmVzcycsIG5ld1Jhbmdlcy5sZW5ndGgpO1xuICAgIHJldHVybiBRLmFsbChuZXdSYW5nZXMubWFwKHJhbmdlID0+XG4gICAgICByZW1vdGVTb3VyY2UuZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlLCBlbmRwb2ludE1vZGlmaWVyKS50aGVuKGpzb24gPT4ge1xuICAgICAgICB2YXIgcmVzcG9uc2UgPSBqc29uLnJlc3BvbnNlO1xuICAgICAgICBpZiAoanNvbi5zdGF0dXMgPj0gNDAwKSB7XG4gICAgICAgICAgbm90aWZ5RmFpbHVyZShqc29uLnN0YXR1cyArICcgJyArIGpzb24uc3RhdHVzVGV4dCArICcgJyArIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlKSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlLmVycm9yQ29kZSkge1xuICAgICAgICAgICAgbm90aWZ5RmFpbHVyZSgnRXJyb3IgZnJvbSBDb3ZlcmFnZURhdGFTb3VyY2U6ICcgKyBKU09OLnN0cmluZ2lmeShyZXNwb25zZSkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBhZGQgbmV3IGRhdGEgdG8gY2FjaGVcbiAgICAgICAgICAgIHJlc3BvbnNlLmZvckVhY2gocCA9PiBjYWNoZS5wdXQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY29udGlnXCI6IHAuY29udGlnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwic3RhcnRcIjogcC5zdGFydCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImVuZFwiOiBwLmVuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcImNvdW50XCI6IHAuY291bnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlc29sdXRpb24pKTtcbiAgICAgICAgICAgIG8udHJpZ2dlcignbmV3ZGF0YScsIGludGVydmFsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgby50cmlnZ2VyKCduZXR3b3JrZG9uZScpO1xuICAgIH0pKSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRDb3ZlcmFnZUluUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICByZXNvbHV0aW9uOiA/bnVtYmVyKTogUG9zaXRpb25Db3VudFtdIHtcbiAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107XG4gICAgdmFyIGRhdGEgPSBjYWNoZS5nZXQocmFuZ2UsIHJlc29sdXRpb24pO1xuICAgIHZhciBzb3J0ZWQgPSBkYXRhLnNvcnQoKGEsIGIpID0+IGEuc3RhcnQgLSBiLnN0YXJ0KTtcbiAgICByZXR1cm4gc29ydGVkO1xuICB9XG5cbiAgdmFyIG8gPSB7XG4gICAgbWF4Q292ZXJhZ2UsXG4gICAgcmFuZ2VDaGFuZ2VkOiBmdW5jdGlvbihuZXdSYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICAgIGZldGNoKG5ld1JhbmdlKS5kb25lKCk7XG4gICAgfSxcbiAgICBnZXRDb3ZlcmFnZUluUmFuZ2UsXG5cbiAgICAvLyBUaGVzZSBhcmUgaGVyZSB0byBtYWtlIEZsb3cgaGFwcHkuXG4gICAgb246ICgpID0+IHt9LFxuICAgIG9mZjogKCkgPT4ge30sXG4gICAgdHJpZ2dlcjogKCkgPT4ge31cbiAgfTtcbiAgXy5leHRlbmQobywgRXZlbnRzKTtcblxuICByZXR1cm4gbztcbn1cblxuZnVuY3Rpb24gY3JlYXRlKGRhdGE6IHt1cmw/OnN0cmluZ30pOiBDb3ZlcmFnZURhdGFTb3VyY2Uge1xuICBpZiAoIWRhdGEudXJsKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIFVSTCBmcm9tIHRyYWNrOiAke0pTT04uc3RyaW5naWZ5KGRhdGEpfWApO1xuICB9XG5cbiAgdmFyIGVuZHBvaW50ID0gbmV3IFJlbW90ZVJlcXVlc3QoZGF0YS51cmwsIEJBU0VfUEFJUlNfUEVSX0ZFVENIKTtcbiAgcmV0dXJuIGNyZWF0ZUZyb21Db3ZlcmFnZVVybChlbmRwb2ludCk7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZSxcbiAgY3JlYXRlRnJvbUNvdmVyYWdlVXJsXG59O1xuIiwiLypcbiAqIFRoaXMgaXMgYSBkdW1teSBkYXRhIHNvdXJjZSB0byBiZSB1c2VkIGJ5IHRyYWNrcyB0aGF0IGRvIG5vdCBkZXBlbmQgb24gZGF0YS5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudHlwZSBFbXB0eVNvdXJjZSA9IHtcbiAgcmFuZ2VDaGFuZ2VkOiAobmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSA9PiB2b2lkO1xuICBvbjogKGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKSA9PiB2b2lkO1xuICBvZmY6IChldmVudDogc3RyaW5nKSA9PiB2b2lkO1xuICB0cmlnZ2VyOiAoZXZlbnQ6IHN0cmluZywgLi4uYXJnczphbnkpID0+IHZvaWQ7XG59XG5cbnZhciBjcmVhdGUgPSAoKTogRW1wdHlTb3VyY2UgPT4gKHtcbiAgcmFuZ2VDaGFuZ2VkOiAoKSA9PiB7fSxcbiAgb246ICgpID0+IHt9LFxuICBvZmY6ICgpID0+IHt9LFxuICB0cmlnZ2VyOiAoKSA9PiB7fVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGVcbn07XG4iLCIvKipcbiAqIFRoZSBcImdsdWVcIiBiZXR3ZWVuIFR3b0JpdC5qcyBhbmQgR2Vub21lVHJhY2suanMuXG4gKlxuICogR2Vub21lVHJhY2sgaXMgcHVyZSB2aWV3IGNvZGUgLS0gaXQgcmVuZGVycyBkYXRhIHdoaWNoIGlzIGFscmVhZHkgaW4tbWVtb3J5XG4gKiBpbiB0aGUgYnJvd3Nlci5cbiAqXG4gKiBUd29CaXQgaXMgcHVyZWx5IGZvciBkYXRhIHBhcnNpbmcgYW5kIGZldGNoaW5nLiBJdCBvbmx5IGtub3dzIGhvdyB0byByZXR1cm5cbiAqIHByb21pc2VzIGZvciB2YXJpb3VzIGdlbm9tZSBmZWF0dXJlcy5cbiAqXG4gKiBUaGlzIGNvZGUgYWN0cyBhcyBhIGJyaWRnZSBiZXR3ZWVuIHRoZSB0d28uIEl0IG1haW50YWlucyBhIGxvY2FsIHZlcnNpb24gb2ZcbiAqIHRoZSBkYXRhLCBmZXRjaGluZyByZW1vdGUgZGF0YSBhbmQgaW5mb3JtaW5nIHRoZSB2aWV3IHdoZW4gaXQgYmVjb21lc1xuICogYXZhaWxhYmxlLlxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCB7RXZlbnRzfSBmcm9tICdiYWNrYm9uZSc7XG5pbXBvcnQge1Jlc29sdXRpb25DYWNoZX0gZnJvbSAnLi4vUmVzb2x1dGlvbkNhY2hlJztcblxuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCB7UmVtb3RlUmVxdWVzdH0gZnJvbSAnLi4vUmVtb3RlUmVxdWVzdCc7XG5cbmV4cG9ydCB0eXBlIEZlYXR1cmUgPSB7XG4gIGlkOiBzdHJpbmc7XG4gIGZlYXR1cmVUeXBlOiBzdHJpbmc7XG4gIGNvbnRpZzogc3RyaW5nO1xuICBzdGFydDogbnVtYmVyO1xuICBzdG9wOiBudW1iZXI7XG4gIHNjb3JlOiBudW1iZXI7XG59XG5cbi8vIEZsb3cgdHlwZSBmb3IgZXhwb3J0LlxuZXhwb3J0IHR5cGUgRmVhdHVyZURhdGFTb3VyY2UgPSB7XG4gIHJhbmdlQ2hhbmdlZDogKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkgPT4gdm9pZDtcbiAgZ2V0RmVhdHVyZXNJblJhbmdlOiAocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pID0+IEZlYXR1cmVbXTtcbiAgb246IChldmVudDogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbikgPT4gdm9pZDtcbiAgb2ZmOiAoZXZlbnQ6IHN0cmluZykgPT4gdm9pZDtcbiAgdHJpZ2dlcjogKGV2ZW50OiBzdHJpbmcsIC4uLmFyZ3M6YW55KSA9PiB2b2lkO1xufVxuXG5cbi8vIFJlcXVlc3RzIGZvciAyYml0IHJhbmdlcyBhcmUgZXhwYW5kZWQgdG8gYmVnaW4gJiBlbmQgYXQgbXVsdGlwbGVzIG9mIHRoaXNcbi8vIGNvbnN0YW50LiBEb2luZyB0aGlzIG1lYW5zIHRoYXQgcGFubmluZyB0eXBpY2FsbHkgd29uJ3QgcmVxdWlyZVxuLy8gYWRkaXRpb25hbCBuZXR3b3JrIHJlcXVlc3RzLlxudmFyIEJBU0VfUEFJUlNfUEVSX0ZFVENIID0gMTAwMDA7XG5cbmZ1bmN0aW9uIGV4cGFuZFJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiB7XG4gIHZhciByb3VuZERvd24gPSB4ID0+IHggLSB4ICUgQkFTRV9QQUlSU19QRVJfRkVUQ0g7XG4gIHZhciBuZXdTdGFydCA9IE1hdGgubWF4KDAsIHJvdW5kRG93bihyYW5nZS5zdGFydCgpKSksXG4gICAgICBuZXdTdG9wID0gcm91bmREb3duKHJhbmdlLnN0b3AoKSArIEJBU0VfUEFJUlNfUEVSX0ZFVENIIC0gMSk7XG5cbiAgcmV0dXJuIG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIG5ld1N0YXJ0LCBuZXdTdG9wKTtcbn1cblxuZnVuY3Rpb24ga2V5RnVuY3Rpb24oZjogRmVhdHVyZSk6IHN0cmluZyB7XG4gIHJldHVybiBgJHtmLmNvbnRpZ306JHtmLnN0YXJ0fWA7XG59XG5cbmZ1bmN0aW9uIGZpbHRlckZ1bmN0aW9uKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LCBmOiBGZWF0dXJlKTogYm9vbGVhbiB7XG4gIHJldHVybiByYW5nZS5jaHJJbnRlcnNlY3RzKG5ldyBDb250aWdJbnRlcnZhbChmLmNvbnRpZywgZi5zdGFydCwgZi5zdG9wKSk7XG59XG5cblxuZnVuY3Rpb24gY3JlYXRlRnJvbUZlYXR1cmVVcmwocmVtb3RlU291cmNlOiBSZW1vdGVSZXF1ZXN0KTogRmVhdHVyZURhdGFTb3VyY2Uge1xuICB2YXIgY2FjaGU6IFJlc29sdXRpb25DYWNoZTxGZWF0dXJlPiA9XG4gICAgbmV3IFJlc29sdXRpb25DYWNoZShmaWx0ZXJGdW5jdGlvbiwga2V5RnVuY3Rpb24pO1xuXG4gIGZ1bmN0aW9uIGZldGNoKHJhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgIHZhciBpbnRlcnZhbCA9IG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIHJhbmdlLnN0YXJ0LCByYW5nZS5zdG9wKTtcblxuICAgIC8vIENoZWNrIGlmIHRoaXMgaW50ZXJ2YWwgaXMgYWxyZWFkeSBpbiB0aGUgY2FjaGUuXG4gICAgaWYgKGNhY2hlLmNvdmVyc1JhbmdlKGludGVydmFsKSkge1xuICAgICAgcmV0dXJuIFEud2hlbigpO1xuICAgIH1cblxuICAgIC8vIG1vZGlmeSBlbmRwb2ludCB0byBjYWxjdWxhdGUgY292ZXJhZ2UgdXNpbmcgYmlubmluZ1xuICAgIHZhciByZXNvbHV0aW9uID0gUmVzb2x1dGlvbkNhY2hlLmdldFJlc29sdXRpb24oaW50ZXJ2YWwuaW50ZXJ2YWwpO1xuICAgIHZhciBlbmRwb2ludE1vZGlmaWVyID0gYGJpbm5pbmc9JHtyZXNvbHV0aW9ufWA7XG5cbiAgICBpbnRlcnZhbCA9IGV4cGFuZFJhbmdlKGludGVydmFsKTtcbiAgICB2YXIgbmV3UmFuZ2VzID0gY2FjaGUuY29tcGxlbWVudEludGVydmFsKGludGVydmFsLCByZXNvbHV0aW9uKTtcblxuICAgIC8vIFwiQ292ZXJcIiB0aGUgcmFuZ2UgaW1tZWRpYXRlbHkgdG8gcHJldmVudCBkdXBsaWNhdGUgZmV0Y2hlcy5cbiAgICAvLyBCZWNhdXNlIGludGVydmFsIGlzIGV4cGFuZGVkLCBtYWtlIHN1cmUgdG8gdXNlIG9yaWdpbmFsIHJlc29sdXRpb25cbiAgICBjYWNoZS5jb3ZlclJhbmdlKGludGVydmFsLCByZXNvbHV0aW9uKTtcblxuICAgIG8udHJpZ2dlcignbmV0d29ya3Byb2dyZXNzJywgbmV3UmFuZ2VzLmxlbmd0aCk7XG4gICAgcmV0dXJuIFEuYWxsKG5ld1Jhbmdlcy5tYXAocmFuZ2UgPT5cbiAgICAgICAgcmVtb3RlU291cmNlLmdldEZlYXR1cmVzSW5SYW5nZShyYW5nZSwgZW5kcG9pbnRNb2RpZmllcilcbiAgICAgICAgICAudGhlbihlID0+IHtcbiAgICAgICAgICAgIHZhciBmZWF0dXJlcyA9IGUucmVzcG9uc2U7XG4gICAgICAgICAgICBpZiAoZmVhdHVyZXMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgZmVhdHVyZXMuZm9yRWFjaChmZWF0dXJlID0+IGNhY2hlLnB1dChmZWF0dXJlLCByZXNvbHV0aW9uKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvLnRyaWdnZXIoJ25ldHdvcmtkb25lJyk7XG4gICAgICAgICAgICBvLnRyaWdnZXIoJ25ld2RhdGEnLCByYW5nZSk7XG4gICAgICB9KSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LCByZXNvbHV0aW9uOiA/bnVtYmVyKTogRmVhdHVyZVtdIHtcbiAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107ICAvLyBYWFggd2h5IHdvdWxkIHRoaXMgaGFwcGVuP1xuICAgIHZhciBkYXRhID0gY2FjaGUuZ2V0KHJhbmdlLCByZXNvbHV0aW9uKTtcbiAgICB2YXIgc29ydGVkID0gZGF0YS5zb3J0KChhLCBiKSA9PiBhLnN0YXJ0IC0gYi5zdGFydCk7XG4gICAgcmV0dXJuIHNvcnRlZDtcbiAgfVxuXG4gIHZhciBvID0ge1xuICAgIHJhbmdlQ2hhbmdlZDogZnVuY3Rpb24obmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgICBmZXRjaChuZXdSYW5nZSkuZG9uZSgpO1xuICAgIH0sXG4gICAgZ2V0RmVhdHVyZXNJblJhbmdlLFxuXG4gICAgLy8gVGhlc2UgYXJlIGhlcmUgdG8gbWFrZSBGbG93IGhhcHB5LlxuICAgIG9uOiAoKSA9PiB7fSxcbiAgICBvZmY6ICgpID0+IHt9LFxuICAgIHRyaWdnZXI6ICgpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuXG4gIHJldHVybiBvO1xufVxuXG5mdW5jdGlvbiBjcmVhdGUoZGF0YToge3VybD86c3RyaW5nfSk6IEZlYXR1cmVEYXRhU291cmNlIHtcbiAgaWYgKCFkYXRhLnVybCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBVUkwgZnJvbSB0cmFjazogJHtKU09OLnN0cmluZ2lmeShkYXRhKX1gKTtcbiAgfVxuICB2YXIgZW5kcG9pbnQgPSBuZXcgUmVtb3RlUmVxdWVzdChkYXRhLnVybCk7XG4gIHJldHVybiBjcmVhdGVGcm9tRmVhdHVyZVVybChlbmRwb2ludCk7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZSxcbiAgY3JlYXRlRnJvbUZlYXR1cmVVcmxcbn07XG4iLCIvKipcbiAqIEEgZGF0YSBzb3VyY2Ugd2hpY2ggaW1wbGVtZW50cyB0aGUgR0E0R0ggcHJvdG9jb2wuXG4gKiBDdXJyZW50bHkgb25seSB1c2VkIHRvIGxvYWQgYWxpZ25tZW50cy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0FsaWdubWVudCwgQWxpZ25tZW50RGF0YVNvdXJjZX0gZnJvbSAnLi4vQWxpZ25tZW50JztcblxuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQge0V2ZW50c30gZnJvbSAnYmFja2JvbmUnO1xuaW1wb3J0IFEgZnJvbSAncSc7XG5cbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgR0E0R0hBbGlnbm1lbnQgZnJvbSAnLi4vR0E0R0hBbGlnbm1lbnQnO1xuXG52YXIgQUxJR05NRU5UU19QRVJfUkVRVUVTVCA9IDIwMDsgIC8vIFRPRE86IGV4cGxhaW4gdGhpcyBjaG9pY2UuXG52YXIgTUFYX0JBU0VfUEFJUlNfVE9fRkVUQ0ggPSA0MDAwMDtcblxuXG4vLyBHZW5vbWUgcmFuZ2VzIGFyZSByb3VuZGVkIHRvIG11bHRpcGxlcyBvZiB0aGlzIGZvciBmZXRjaGluZy5cbi8vIFRoaXMgcmVkdWNlcyBuZXR3b3JrIGFjdGl2aXR5IHdoaWxlIGZldGNoaW5nLlxuLy8gVE9ETzogdHVuZSB0aGlzIHZhbHVlIC0tIHNldHRpbmcgaXQgY2xvc2UgdG8gdGhlIHJlYWQgbGVuZ3RoIHdpbGwgcmVzdWx0IGluXG4vLyBsb3RzIG9mIHJlYWRzIGJlaW5nIGZldGNoZWQgdHdpY2UsIGJ1dCBzZXR0aW5nIGl0IHRvbyBsYXJnZSB3aWxsIHJlc3VsdCBpblxuLy8gYnVsa2llciByZXF1ZXN0cy5cbnZhciBCQVNFX1BBSVJTX1BFUl9GRVRDSCA9IDEwMDA7XG5cbmZ1bmN0aW9uIGV4cGFuZFJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KSB7XG4gIHZhciByb3VuZERvd24gPSB4ID0+IHggLSB4ICUgQkFTRV9QQUlSU19QRVJfRkVUQ0g7XG4gIHZhciBuZXdTdGFydCA9IE1hdGgubWF4KDEsIHJvdW5kRG93bihyYW5nZS5zdGFydCgpKSksXG4gICAgICBuZXdTdG9wID0gcm91bmREb3duKHJhbmdlLnN0b3AoKSArIEJBU0VfUEFJUlNfUEVSX0ZFVENIIC0gMSk7XG5cbiAgcmV0dXJuIG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIG5ld1N0YXJ0LCBuZXdTdG9wKTtcbn1cblxudHlwZSBHQTRHSFNwZWMgPSB7XG4gIGVuZHBvaW50OiBzdHJpbmc7XG4gIHJlYWRHcm91cElkOiBzdHJpbmc7XG4gIC8vIEhBQ0sgaWYgc2V0LCBzdHJpcHMgXCJjaHJcIiBmcm9tIHJlZmVyZW5jZSBuYW1lcy5cbiAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9nYTRnaC9zY2hlbWFzL2lzc3Vlcy8zNjJcbiAga2lsbENocjogYm9vbGVhbjtcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZShzcGVjOiBHQTRHSFNwZWMpOiBBbGlnbm1lbnREYXRhU291cmNlIHtcbiAgdmFyIHVybCA9IHNwZWMuZW5kcG9pbnQ7XG5cbiAgdmFyIHJlYWRzOiB7W2tleTpzdHJpbmddOiBBbGlnbm1lbnR9ID0ge307XG5cbiAgLy8gUmFuZ2VzIGZvciB3aGljaCB3ZSBoYXZlIGNvbXBsZXRlIGluZm9ybWF0aW9uIC0tIG5vIG5lZWQgdG8gaGl0IG5ldHdvcmsuXG4gIHZhciBjb3ZlcmVkUmFuZ2VzOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+W10gPSBbXTtcblxuICBmdW5jdGlvbiBhZGRSZWFkc0Zyb21SZXNwb25zZShyZXNwb25zZTogT2JqZWN0KSB7XG4gICAgcmVzcG9uc2UuYWxpZ25tZW50cy5mb3JFYWNoKGFsaWdubWVudCA9PiB7XG4gICAgICB0cnl7XG4gICAgICAgIC8vIG9wdGltaXphdGlvbjogZG9uJ3QgYm90aGVyIGNvbnN0cnVjdGluZyBhIEdBNEdIQWxpZ25tZW50IHVubGVzcyBpdCdzIG5ldy5cbiAgICAgICAgdmFyIGtleSA9IEdBNEdIQWxpZ25tZW50LmtleUZyb21HQTRHSFJlc3BvbnNlKGFsaWdubWVudCk7XG4gICAgICAgIGlmIChrZXkgaW4gcmVhZHMpIHJldHVybjtcblxuICAgICAgICB2YXIgZ2E0Z2hBbGlnbm1lbnQgPSBuZXcgR0E0R0hBbGlnbm1lbnQoYWxpZ25tZW50KTtcbiAgICAgICAgcmVhZHNba2V5XSA9IGdhNGdoQWxpZ25tZW50O1xuICAgICAgfSBjYXRjaChUeXBlRXJyb3Ipe1xuICAgICAgICBjb25zb2xlLmxvZyhcIkVycm9yIGluIE1hdGVwYWlyIERhdGEgU291cmNlLlwiKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJhbmdlQ2hhbmdlZChuZXdSYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICAvLyBIQUNLIEZPUiBERU1PXG4gICAgdmFyIGNvbnRpZyA9IHNwZWMua2lsbENociA/IG5ld1JhbmdlLmNvbnRpZy5yZXBsYWNlKC9eY2hyLywgJycpIDogbmV3UmFuZ2UuY29udGlnO1xuICAgIHZhciBpbnRlcnZhbCA9IG5ldyBDb250aWdJbnRlcnZhbChjb250aWcsIG5ld1JhbmdlLnN0YXJ0LCBuZXdSYW5nZS5zdG9wKTtcbiAgICBpZiAoaW50ZXJ2YWwuaXNDb3ZlcmVkQnkoY292ZXJlZFJhbmdlcykpIHJldHVybjtcblxuICAgIGludGVydmFsID0gZXhwYW5kUmFuZ2UoaW50ZXJ2YWwpO1xuXG4gICAgLy8gaWYgcmFuZ2UgaXMgdG9vIGxhcmdlLCByZXR1cm4gaW1tZWRpYXRlbHlcbiAgICBpZiAoaW50ZXJ2YWwubGVuZ3RoKCkgPiBNQVhfQkFTRV9QQUlSU19UT19GRVRDSCkge1xuICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBzZWxlY3Qgb25seSBpbnRlcnZhbHMgbm90IHlldCBsb2FkZWQgaW50byBjb3ZlcmVkUmFuZ2Vzw59cbiAgICAgIHZhciBpbnRlcnZhbHMgPSBpbnRlcnZhbC5jb21wbGVtZW50SW50ZXJ2YWxzKGNvdmVyZWRSYW5nZXMpO1xuXG4gICAgICAvLyBXZSBcImNvdmVyXCIgdGhlIGludGVydmFsIGltbWVkaWF0ZWx5IChiZWZvcmUgdGhlIHJlYWRzIGhhdmUgYXJyaXZlZCkgdG9cbiAgICAgIC8vIHByZXZlbnQgZHVwbGljYXRlIG5ldHdvcmsgcmVxdWVzdHMuXG4gICAgICBjb3ZlcmVkUmFuZ2VzLnB1c2goaW50ZXJ2YWwpO1xuICAgICAgY292ZXJlZFJhbmdlcyA9IENvbnRpZ0ludGVydmFsLmNvYWxlc2NlKGNvdmVyZWRSYW5nZXMpO1xuXG4gICAgICBpbnRlcnZhbHMuZm9yRWFjaChpID0+IHtcbiAgICAgICAgZmV0Y2hBbGlnbm1lbnRzRm9ySW50ZXJ2YWwoaSwgbnVsbCwgMSAvKiBmaXJzdCByZXF1ZXN0ICovKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG5vdGlmeUZhaWx1cmUobWVzc2FnZTogc3RyaW5nKSB7XG4gICAgby50cmlnZ2VyKCduZXR3b3JrZmFpbHVyZScsIG1lc3NhZ2UpO1xuICAgIG8udHJpZ2dlcignbmV0d29ya2RvbmUnKTtcbiAgICBjb25zb2xlLndhcm4obWVzc2FnZSk7XG4gIH1cblxuICBmdW5jdGlvbiBmZXRjaEFsaWdubWVudHNGb3JJbnRlcnZhbChyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZVRva2VuOiA/c3RyaW5nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1SZXF1ZXN0czogbnVtYmVyKSB7XG5cbiAgICB2YXIgc3BhbiA9IHJhbmdlLmxlbmd0aCgpO1xuICAgIGlmIChzcGFuID4gTUFYX0JBU0VfUEFJUlNfVE9fRkVUQ0gpIHtcbiAgICAgIHJldHVybiBRLndoZW4oKTsgIC8vIGVtcHR5IHByb21pc2VcbiAgICB9XG4gICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgdmFyIGVuZHBvaW50ID0gYCR7dXJsfS8ke3NwZWMucmVhZEdyb3VwSWR9LyR7cmFuZ2UuY29udGlnfT9zdGFydD0ke3JhbmdlLnN0YXJ0KCl9JmVuZD0ke3JhbmdlLnN0b3AoKX1gO1xuXG4gICAgeGhyLm9wZW4oJ0dFVCcsIGVuZHBvaW50KTtcbiAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24vanNvbicpO1xuXG4gICAgeGhyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbihlKSB7XG4gICAgICB2YXIgcmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlO1xuICAgICAgaWYgKHRoaXMuc3RhdHVzICE9IDIwMCkge1xuICAgICAgICBub3RpZnlGYWlsdXJlKHRoaXMuc3RhdHVzICsgJyAnICsgdGhpcy5zdGF0dXNUZXh0ICsgJyAnICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChyZXNwb25zZS5lcnJvckNvZGUpIHtcbiAgICAgICAgICBub3RpZnlGYWlsdXJlKCdFcnJvciBmcm9tIEdBNEdIIGVuZHBvaW50OiAnICsgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhZGRSZWFkc0Zyb21SZXNwb25zZShyZXNwb25zZSk7XG4gICAgICAgICAgby50cmlnZ2VyKCduZXdkYXRhJywgcmFuZ2UpOyAgLy8gZGlzcGxheSBkYXRhIGFzIGl0IGNvbWVzIGluLlxuICAgICAgICAgIGlmIChyZXNwb25zZS5uZXh0UGFnZVRva2VuKSB7XG4gICAgICAgICAgICBmZXRjaEFsaWdubWVudHNGb3JJbnRlcnZhbChyYW5nZSwgcmVzcG9uc2UubmV4dFBhZ2VUb2tlbiwgbnVtUmVxdWVzdHMgKyAxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgby50cmlnZ2VyKCduZXR3b3JrZG9uZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGZ1bmN0aW9uKGUpIHtcbiAgICAgIG5vdGlmeUZhaWx1cmUoJ1JlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzOiAnICsgdGhpcy5zdGF0dXMpO1xuICAgIH0pO1xuXG4gICAgby50cmlnZ2VyKCduZXR3b3JrcHJvZ3Jlc3MnLCB7bnVtUmVxdWVzdHN9KTtcbiAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeSh7XG4gICAgICBwYWdlVG9rZW46IHBhZ2VUb2tlbixcbiAgICAgIHBhZ2VTaXplOiBBTElHTk1FTlRTX1BFUl9SRVFVRVNULFxuICAgICAgcmVhZEdyb3VwSWRzOiBbc3BlYy5yZWFkR3JvdXBJZF0sXG4gICAgICByZWZlcmVuY2VOYW1lOiByYW5nZS5jb250aWcsXG4gICAgICBzdGFydDogcmFuZ2Uuc3RhcnQoKSxcbiAgICAgIGVuZDogcmFuZ2Uuc3RvcCgpXG4gICAgfSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0QWxpZ25tZW50c0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pOiBBbGlnbm1lbnRbXSB7XG4gICAgaWYgKCFyYW5nZSkgcmV0dXJuIFtdO1xuXG4gICAgLy8gSEFDSyBGT1IgREVNT1xuICAgIGlmIChzcGVjLmtpbGxDaHIpIHtcbiAgICAgIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZy5yZXBsYWNlKC9eY2hyLywgJycpLCByYW5nZS5zdGFydCgpLCByYW5nZS5zdG9wKCkpO1xuICAgIH1cbiAgICByZXR1cm4gXy5maWx0ZXIocmVhZHMsIHJlYWQgPT4gcmVhZC5pbnRlcnNlY3RzKHJhbmdlKSk7XG4gIH1cblxuICB2YXIgbyA9IHtcbiAgICByYW5nZUNoYW5nZWQsXG4gICAgZ2V0QWxpZ25tZW50c0luUmFuZ2UsXG5cbiAgICAvLyBUaGVzZSBhcmUgaGVyZSB0byBtYWtlIEZsb3cgaGFwcHkuXG4gICAgb246ICgpID0+IHt9LFxuICAgIG9uY2U6ICgpID0+IHt9LFxuICAgIG9mZjogKCkgPT4ge30sXG4gICAgdHJpZ2dlcjogKCkgPT4ge31cbiAgfTtcbiAgXy5leHRlbmQobywgRXZlbnRzKTsgIC8vIE1ha2UgdGhpcyBhbiBldmVudCBlbWl0dGVyXG4gIHJldHVybiBvO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlLFxuICBNQVhfQkFTRV9QQUlSU19UT19GRVRDSDogTUFYX0JBU0VfUEFJUlNfVE9fRkVUQ0hcbn07XG4iLCIvKipcbiAqIFRoZSBcImdsdWVcIiBiZXR3ZWVuIFNlcXVlbmNlLmpzIGFuZCBHZW5vbWVUcmFjay5qcy5cbiAqXG4gKiBHZW5vbWVUcmFjayBpcyBwdXJlIHZpZXcgY29kZSAtLSBpdCByZW5kZXJzIGRhdGEgd2hpY2ggaXMgYWxyZWFkeSBpbi1tZW1vcnlcbiAqIGluIHRoZSBicm93c2VyLlxuICpcbiAqU2VxdWVuY2UgaXMgcHVyZWx5IGZvciBkYXRhIHBhcnNpbmcgYW5kIGZldGNoaW5nLiBJdCBvbmx5IGtub3dzIGhvdyB0byByZXR1cm5cbiAqIHByb21pc2VzIGZvciB2YXJpb3VzIGdlbm9tZSBmZWF0dXJlcy5cbiAqXG4gKiBUaGlzIGNvZGUgYWN0cyBhcyBhIGJyaWRnZSBiZXR3ZWVuIHRoZSB0d28uIEl0IG1haW50YWlucyBhIGxvY2FsIHZlcnNpb24gb2ZcbiAqIHRoZSBkYXRhLCBmZXRjaGluZyByZW1vdGUgZGF0YSBhbmQgaW5mb3JtaW5nIHRoZSB2aWV3IHdoZW4gaXQgYmVjb21lc1xuICogYXZhaWxhYmxlLlxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IFEgZnJvbSAncSc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCB7RXZlbnRzfSBmcm9tICdiYWNrYm9uZSc7XG5cbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgU2VxdWVuY2UgZnJvbSAnLi4vZGF0YS9TZXF1ZW5jZSc7XG5pbXBvcnQgdHlwZSB7U2VxdWVuY2VSZWNvcmR9IGZyb20gJy4uL2RhdGEvU2VxdWVuY2UnO1xuaW1wb3J0IFNlcXVlbmNlU3RvcmUgZnJvbSAnLi4vU2VxdWVuY2VTdG9yZSc7XG5pbXBvcnQgdHlwZSB7VHdvQml0U291cmNlfSBmcm9tICcuL1R3b0JpdERhdGFTb3VyY2UnO1xuaW1wb3J0IHtSZW1vdGVSZXF1ZXN0fSBmcm9tICcuLi9SZW1vdGVSZXF1ZXN0JztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscyc7XG5cblxuLy8gUmVxdWVzdHMgZm9yIDJiaXQgcmFuZ2VzIGFyZSBleHBhbmRlZCB0byBiZWdpbiAmIGVuZCBhdCBtdWx0aXBsZXMgb2YgdGhpc1xuLy8gY29uc3RhbnQuIERvaW5nIHRoaXMgbWVhbnMgdGhhdCBwYW5uaW5nIHR5cGljYWxseSB3b24ndCByZXF1aXJlXG4vLyBhZGRpdGlvbmFsIG5ldHdvcmsgcmVxdWVzdHMuXG52YXIgQkFTRV9QQUlSU19QRVJfRkVUQ0ggPSAxMDAwMDtcblxudmFyIE1BWF9CQVNFX1BBSVJTX1RPX0ZFVENIID0gMTAwMDAwO1xuXG4vLyBFeHBhbmQgcmFuZ2UgdG8gYmVnaW4gYW5kIGVuZCBvbiBtdWx0aXBsZXMgb2YgQkFTRV9QQUlSU19QRVJfRkVUQ0guXG5mdW5jdGlvbiBleHBhbmRSYW5nZShyYW5nZSkge1xuICB2YXIgcm91bmREb3duID0geCA9PiB4IC0geCAlIEJBU0VfUEFJUlNfUEVSX0ZFVENIO1xuICB2YXIgbmV3U3RhcnQgPSBNYXRoLm1heCgwLCByb3VuZERvd24ocmFuZ2Uuc3RhcnQoKSkpLFxuICAgICAgbmV3U3RvcCA9IHJvdW5kRG93bihyYW5nZS5zdG9wKCkgKyBCQVNFX1BBSVJTX1BFUl9GRVRDSCAtIDEpO1xuXG4gIHJldHVybiBuZXcgQ29udGlnSW50ZXJ2YWwocmFuZ2UuY29udGlnLCBuZXdTdGFydCwgbmV3U3RvcCk7XG59XG5cbnZhciBjcmVhdGVGcm9tUmVmZXJlbmNlVXJsID0gZnVuY3Rpb24ocmVtb3RlU291cmNlOiBTZXF1ZW5jZSk6IFR3b0JpdFNvdXJjZSB7XG4gIC8vIExvY2FsIGNhY2hlIG9mIGdlbm9taWMgZGF0YS5cbiAgdmFyIGNvbnRpZ0xpc3QgPSByZW1vdGVTb3VyY2UuZ2V0Q29udGlncygpO1xuICB2YXIgc3RvcmUgPSBuZXcgU2VxdWVuY2VTdG9yZSgpO1xuXG4gIC8vIFJhbmdlcyBmb3Igd2hpY2ggd2UgaGF2ZSBjb21wbGV0ZSBpbmZvcm1hdGlvbiAtLSBubyBuZWVkIHRvIGhpdCBuZXR3b3JrLlxuICB2YXIgY292ZXJlZFJhbmdlcyA9IChbXTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPltdKTtcblxuICBmdW5jdGlvbiBmZXRjaChyYW5nZTogQ29udGlnSW50ZXJ2YWwpIHtcbiAgICB2YXIgc3BhbiA9IHJhbmdlLmxlbmd0aCgpO1xuICAgIGlmIChzcGFuID4gTUFYX0JBU0VfUEFJUlNfVE9fRkVUQ0gpIHtcbiAgICAgIHJldHVybiBRLndoZW4oKTsgIC8vIGVtcHR5IHByb21pc2VcbiAgICB9XG5cbiAgICAvLyBUT0RPIHJlbW90ZSBTb3VyY2VcbiAgICByZW1vdGVTb3VyY2UuZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlKVxuICAgICAgLnRoZW4obGV0dGVycyA9PiB7XG4gICAgICAgIGlmICghbGV0dGVycykgcmV0dXJuO1xuICAgICAgICBpZiAobGV0dGVycy5sZW5ndGggPCByYW5nZS5sZW5ndGgoKSkge1xuICAgICAgICAgIC8vIFByb2JhYmx5IGF0IEVPRlxuICAgICAgICAgIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZS5zdGFydCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhbmdlLnN0YXJ0KCkgKyBsZXR0ZXJzLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICAgIHN0b3JlLnNldFJhbmdlKHJhbmdlLCBsZXR0ZXJzKTtcbiAgICAgIH0pLnRoZW4oKCkgPT4ge1xuICAgICAgICBvLnRyaWdnZXIoJ25ld2RhdGEnLCByYW5nZSk7XG4gICAgICB9KS5kb25lKCk7XG4gIH1cblxuICAvLyBUaGlzIGVpdGhlciBhZGRzIG9yIHJlbW92ZXMgYSAnY2hyJyBhcyBuZWVkZWQuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZVJhbmdlKHJhbmdlOiBHZW5vbWVSYW5nZSk6IFEuUHJvbWlzZTxHZW5vbWVSYW5nZT4ge1xuICAgIHZhciBjb250aWdJZHggPSBfLm1hcChjb250aWdMaXN0LCBjb250aWcgPT4gY29udGlnLm5hbWUpLmluZGV4T2YocmFuZ2UuY29udGlnKTtcbiAgICBpZiAoY29udGlnSWR4ID49IDApIHtcbiAgICAgIHJldHVybiBRLlByb21pc2UucmVzb2x2ZShyYW5nZSk7XG4gICAgfVxuICAgIHZhciBhbHRDb250aWcgPSB1dGlscy5hbHRDb250aWdOYW1lKHJhbmdlLmNvbnRpZyk7XG4gICAgdmFyIGFsdElkeCA9IF8ubWFwKGNvbnRpZ0xpc3QsIGNvbnRpZyA9PiBjb250aWcubmFtZSkuaW5kZXhPZihhbHRDb250aWcpO1xuICAgIGlmIChhbHRJZHggPj0gMCkge1xuICAgICAgcmV0dXJuIFEuUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgY29udGlnOiBhbHRDb250aWcsXG4gICAgICAgIHN0YXJ0OiByYW5nZS5zdGFydCxcbiAgICAgICAgc3RvcDogcmFuZ2Uuc3RvcFxuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiBRLlByb21pc2UucmVzb2x2ZShyYW5nZSk7ICAvLyBjYXN0IGFzIHByb21pc2UgdG8gY29uZm9ybSB0byBUd29CaXREYXRhU291cmNlXG4gIH1cblxuICAvLyBSZXR1cm5zIGEge1wiY2hyMTI6MTIzXCIgLT4gXCJbQVRDR11cIn0gbWFwcGluZyBmb3IgdGhlIHJhbmdlLlxuICBmdW5jdGlvbiBnZXRSYW5nZShyYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICByZXR1cm4gc3RvcmUuZ2V0QXNPYmplY3RzKENvbnRpZ0ludGVydmFsLmZyb21HZW5vbWVSYW5nZShyYW5nZSkpO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIHN0cmluZyBvZiBiYXNlIHBhaXJzIGZvciB0aGlzIHJhbmdlLlxuICBmdW5jdGlvbiBnZXRSYW5nZUFzU3RyaW5nKHJhbmdlOiBHZW5vbWVSYW5nZSk6IHN0cmluZyB7XG4gICAgaWYgKCFyYW5nZSkgcmV0dXJuICcnO1xuICAgIHJldHVybiBzdG9yZS5nZXRBc1N0cmluZyhDb250aWdJbnRlcnZhbC5mcm9tR2Vub21lUmFuZ2UocmFuZ2UpKTtcbiAgfVxuXG4gIHZhciBvID0ge1xuICAgIC8vIFRoZSByYW5nZSBoZXJlIGlzIDAtYmFzZWQsIGluY2x1c2l2ZVxuICAgIHJhbmdlQ2hhbmdlZDogZnVuY3Rpb24obmV3UmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgICBub3JtYWxpemVSYW5nZShuZXdSYW5nZSkudGhlbihyID0+IHtcbiAgICAgICAgdmFyIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKHIuY29udGlnLCByLnN0YXJ0LCByLnN0b3ApO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGlzIGludGVydmFsIGlzIGFscmVhZHkgaW4gdGhlIGNhY2hlLlxuICAgICAgICBpZiAocmFuZ2UuaXNDb3ZlcmVkQnkoY292ZXJlZFJhbmdlcykpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByYW5nZSA9IGV4cGFuZFJhbmdlKHJhbmdlKTtcbiAgICAgICAgdmFyIG5ld1JhbmdlcyA9IHJhbmdlLmNvbXBsZW1lbnRJbnRlcnZhbHMoY292ZXJlZFJhbmdlcyk7XG4gICAgICAgIGNvdmVyZWRSYW5nZXMucHVzaChyYW5nZSk7XG4gICAgICAgIGNvdmVyZWRSYW5nZXMgPSBDb250aWdJbnRlcnZhbC5jb2FsZXNjZShjb3ZlcmVkUmFuZ2VzKTtcblxuICAgICAgICBmb3IgKHZhciBuZXdSYW5nZSBvZiBuZXdSYW5nZXMpIHtcbiAgICAgICAgICBmZXRjaChuZXdSYW5nZSk7XG4gICAgICAgIH1cbiAgICAgIH0pLmRvbmUoKTtcbiAgICB9LFxuICAgIC8vIFRoZSByYW5nZXMgcGFzc2VkIHRvIHRoZXNlIG1ldGhvZHMgYXJlIDAtYmFzZWRcbiAgICBnZXRSYW5nZSxcbiAgICBnZXRSYW5nZUFzU3RyaW5nLFxuICAgIGNvbnRpZ0xpc3Q6ICgpID0+IGNvbnRpZ0xpc3QsXG4gICAgbm9ybWFsaXplUmFuZ2UsXG5cbiAgICAvLyBUaGVzZSBhcmUgaGVyZSB0byBtYWtlIEZsb3cgaGFwcHkuXG4gICAgb246ICgpID0+IHt9LFxuICAgIG9uY2U6ICgpID0+IHt9LFxuICAgIG9mZjogKCkgPT4ge30sXG4gICAgdHJpZ2dlcjogKCkgPT4ge31cbiAgfTtcbiAgXy5leHRlbmQobywgRXZlbnRzKTsgIC8vIE1ha2UgdGhpcyBhbiBldmVudCBlbWl0dGVyXG4gIHJldHVybiBvO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlKGRhdGE6IHt1cmw6c3RyaW5nLCBjb250aWdMaXN0OiBTZXF1ZW5jZVJlY29yZFtdfSk6IFR3b0JpdFNvdXJjZSB7XG4gIHZhciB1cmxQcmVmaXggPSBkYXRhLnVybDtcbiAgdmFyIGNvbnRpZ0xpc3QgPSBkYXRhLmNvbnRpZ0xpc3Q7XG5cbiAgLy8gdmVyaWZ5IGRhdGEgd2FzIGNvcnJlY3RseSBzZXRcbiAgaWYgKCF1cmxQcmVmaXgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgVVJMIGZyb20gdHJhY2s6ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9YCk7XG4gIH1cbiAgLy8gdmVyaWZ5IGNvbnRpZ2xpc3Qgd2FzIGNvcnJlY3RseSBzZXRcbiAgaWYgKCFjb250aWdMaXN0KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIENvbnRpZ0xpc3QgZnJvbSB0cmFjazogJHtKU09OLnN0cmluZ2lmeShkYXRhKX1gKTtcbiAgfVxuICByZXR1cm4gY3JlYXRlRnJvbVJlZmVyZW5jZVVybChuZXcgU2VxdWVuY2UobmV3IFJlbW90ZVJlcXVlc3QodXJsUHJlZml4KSwgY29udGlnTGlzdCkpO1xufVxuXG4vLyBHZXR0ZXIvc2V0dGVyIGZvciBiYXNlIHBhaXJzIHBlciBmZXRjaC5cbi8vIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgdGVzdGluZy5cbmZ1bmN0aW9uIHRlc3RCYXNlUGFpcnNUb0ZldGNoKG51bT86IG51bWJlcik6IGFueSB7XG4gIGlmIChudW0pIHtcbiAgICBCQVNFX1BBSVJTX1BFUl9GRVRDSCA9IG51bTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gQkFTRV9QQUlSU19QRVJfRkVUQ0g7XG4gIH1cbn1cblxuLy8gR2V0dGVyL3NldHRlciBmb3IgYmFzZSBwYWlycyBwZXIgZmV0Y2guXG4vLyBUaGlzIHNob3VsZCBvbmx5IGJlIHVzZWQgZm9yIHRlc3RpbmcuXG5mdW5jdGlvbiB0ZXN0QmFzZVBhaXJzVG9GZXRjaChudW0/OiBudW1iZXIpOiBhbnkge1xuICBpZiAobnVtKSB7XG4gICAgQkFTRV9QQUlSU19QRVJfRkVUQ0ggPSBudW07XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIEJBU0VfUEFJUlNfUEVSX0ZFVENIO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBjcmVhdGUsXG4gIGNyZWF0ZUZyb21SZWZlcmVuY2VVcmwsXG4gIHRlc3RCYXNlUGFpcnNUb0ZldGNoXG59O1xuIiwiLyoqXG4gKiBUaGUgXCJnbHVlXCIgYmV0d2VlbiBUd29CaXQuanMgYW5kIEdlbm9tZVRyYWNrLmpzLlxuICpcbiAqIEdlbm9tZVRyYWNrIGlzIHB1cmUgdmlldyBjb2RlIC0tIGl0IHJlbmRlcnMgZGF0YSB3aGljaCBpcyBhbHJlYWR5IGluLW1lbW9yeVxuICogaW4gdGhlIGJyb3dzZXIuXG4gKlxuICogVHdvQml0IGlzIHB1cmVseSBmb3IgZGF0YSBwYXJzaW5nIGFuZCBmZXRjaGluZy4gSXQgb25seSBrbm93cyBob3cgdG8gcmV0dXJuXG4gKiBwcm9taXNlcyBmb3IgdmFyaW91cyBnZW5vbWUgZmVhdHVyZXMuXG4gKlxuICogVGhpcyBjb2RlIGFjdHMgYXMgYSBicmlkZ2UgYmV0d2VlbiB0aGUgdHdvLiBJdCBtYWludGFpbnMgYSBsb2NhbCB2ZXJzaW9uIG9mXG4gKiB0aGUgZGF0YSwgZmV0Y2hpbmcgcmVtb3RlIGRhdGEgYW5kIGluZm9ybWluZyB0aGUgdmlldyB3aGVuIGl0IGJlY29tZXNcbiAqIGF2YWlsYWJsZS5cbiAqXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCBRIGZyb20gJ3EnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQge0V2ZW50c30gZnJvbSAnYmFja2JvbmUnO1xuXG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IFR3b0JpdCBmcm9tICcuLi9kYXRhL1R3b0JpdCc7XG5pbXBvcnQgUmVtb3RlRmlsZSBmcm9tICcuLi9SZW1vdGVGaWxlJztcbmltcG9ydCBTZXF1ZW5jZVN0b3JlIGZyb20gJy4uL1NlcXVlbmNlU3RvcmUnO1xuaW1wb3J0IHR5cGUge1NlcXVlbmNlUmVjb3JkfSBmcm9tICcuLi9kYXRhL1NlcXVlbmNlJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscyc7XG5cblxuLy8gUmVxdWVzdHMgZm9yIDJiaXQgcmFuZ2VzIGFyZSBleHBhbmRlZCB0byBiZWdpbiAmIGVuZCBhdCBtdWx0aXBsZXMgb2YgdGhpc1xuLy8gY29uc3RhbnQuIERvaW5nIHRoaXMgbWVhbnMgdGhhdCBwYW5uaW5nIHR5cGljYWxseSB3b24ndCByZXF1aXJlXG4vLyBhZGRpdGlvbmFsIG5ldHdvcmsgcmVxdWVzdHMuXG52YXIgQkFTRV9QQUlSU19QRVJfRkVUQ0ggPSAxMDAwMDtcblxudmFyIE1BWF9CQVNFX1BBSVJTX1RPX0ZFVENIID0gMTAwMDAwO1xuXG5cbi8vIEZsb3cgdHlwZSBmb3IgZXhwb3J0LlxuZXhwb3J0IHR5cGUgVHdvQml0U291cmNlID0ge1xuICByYW5nZUNoYW5nZWQ6IChuZXdSYW5nZTogR2Vub21lUmFuZ2UpID0+IHZvaWQ7XG4gIGdldFJhbmdlOiAocmFuZ2U6IEdlbm9tZVJhbmdlKSA9PiB7W2tleTpzdHJpbmddOiA/c3RyaW5nfTtcbiAgZ2V0UmFuZ2VBc1N0cmluZzogKHJhbmdlOiBHZW5vbWVSYW5nZSkgPT4gc3RyaW5nO1xuICBjb250aWdMaXN0OiAoKSA9PiBTZXF1ZW5jZVJlY29yZFtdO1xuICBub3JtYWxpemVSYW5nZTogKHJhbmdlOiBHZW5vbWVSYW5nZSkgPT4gUS5Qcm9taXNlPEdlbm9tZVJhbmdlPjtcbiAgb246IChldmVudDogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbikgPT4gdm9pZDtcbiAgb25jZTogKGV2ZW50OiBzdHJpbmcsIGhhbmRsZXI6IEZ1bmN0aW9uKSA9PiB2b2lkO1xuICBvZmY6IChldmVudDogc3RyaW5nKSA9PiB2b2lkO1xuICB0cmlnZ2VyOiAoZXZlbnQ6IHN0cmluZywgLi4uYXJnczphbnkpID0+IHZvaWQ7XG59XG5cbi8vIEV4cGFuZCByYW5nZSB0byBiZWdpbiBhbmQgZW5kIG9uIG11bHRpcGxlcyBvZiBCQVNFX1BBSVJTX1BFUl9GRVRDSC5cbmZ1bmN0aW9uIGV4cGFuZFJhbmdlKHJhbmdlKSB7XG4gIHZhciByb3VuZERvd24gPSB4ID0+IHggLSB4ICUgQkFTRV9QQUlSU19QRVJfRkVUQ0g7XG4gIHZhciBuZXdTdGFydCA9IE1hdGgubWF4KDAsIHJvdW5kRG93bihyYW5nZS5zdGFydCgpKSksXG4gICAgICBuZXdTdG9wID0gcm91bmREb3duKHJhbmdlLnN0b3AoKSArIEJBU0VfUEFJUlNfUEVSX0ZFVENIIC0gMSk7XG5cbiAgcmV0dXJuIG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIG5ld1N0YXJ0LCBuZXdTdG9wKTtcbn1cblxuXG52YXIgY3JlYXRlRnJvbVR3b0JpdEZpbGUgPSBmdW5jdGlvbihyZW1vdGVTb3VyY2U6IFR3b0JpdCk6IFR3b0JpdFNvdXJjZSB7XG4gIC8vIExvY2FsIGNhY2hlIG9mIGdlbm9taWMgZGF0YS5cbiAgdmFyIGNvbnRpZ0xpc3QgPSBbXTtcbiAgdmFyIHN0b3JlID0gbmV3IFNlcXVlbmNlU3RvcmUoKTtcblxuICAvLyBSYW5nZXMgZm9yIHdoaWNoIHdlIGhhdmUgY29tcGxldGUgaW5mb3JtYXRpb24gLS0gbm8gbmVlZCB0byBoaXQgbmV0d29yay5cbiAgdmFyIGNvdmVyZWRSYW5nZXMgPSAoW106IENvbnRpZ0ludGVydmFsPHN0cmluZz5bXSk7XG5cbiAgZnVuY3Rpb24gZmV0Y2gocmFuZ2U6IENvbnRpZ0ludGVydmFsKSB7XG4gICAgdmFyIHNwYW4gPSByYW5nZS5sZW5ndGgoKTtcbiAgICBpZiAoc3BhbiA+IE1BWF9CQVNFX1BBSVJTX1RPX0ZFVENIKSB7XG4gICAgICAvL2luZm9ybSB0aGF0IHdlIHdvbid0IGZldGNoIHRoZSBkYXRhXG4gICAgICBvLnRyaWdnZXIoJ25ld2RhdGFyZWZ1c2VkJywgcmFuZ2UpO1xuICAgICAgcmV0dXJuIFEud2hlbigpOyAgLy8gZW1wdHkgcHJvbWlzZVxuICAgIH1cbiAgICAvL25vdyB3ZSBjYW4gYWRkIHJlZ2lvbiB0byBjb3ZlcmVkIHJlZ2lvbnMgXG4gICAgLy9kb2luZyBpdCBlYXJsaWVyIHdvdWxkIHByb3ZpZGUgaW5jb25zaXN0ZW5jeVxuICAgIGNvdmVyZWRSYW5nZXMucHVzaChyYW5nZSk7XG4gICAgY292ZXJlZFJhbmdlcyA9IENvbnRpZ0ludGVydmFsLmNvYWxlc2NlKGNvdmVyZWRSYW5nZXMpO1xuXG4gICAgcmVtb3RlU291cmNlLmdldEZlYXR1cmVzSW5SYW5nZShyYW5nZS5jb250aWcsIHJhbmdlLnN0YXJ0KCksIHJhbmdlLnN0b3AoKSlcbiAgICAgIC50aGVuKGxldHRlcnMgPT4ge1xuICAgICAgICBpZiAoIWxldHRlcnMpIHJldHVybjtcbiAgICAgICAgaWYgKGxldHRlcnMubGVuZ3RoIDwgcmFuZ2UubGVuZ3RoKCkpIHtcbiAgICAgICAgICAvLyBQcm9iYWJseSBhdCBFT0ZcbiAgICAgICAgICByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2Uuc3RhcnQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYW5nZS5zdGFydCgpICsgbGV0dGVycy5sZW5ndGggLSAxKTtcbiAgICAgICAgfVxuICAgICAgICBzdG9yZS5zZXRSYW5nZShyYW5nZSwgbGV0dGVycyk7XG4gICAgICB9KS50aGVuKCgpID0+IHtcbiAgICAgICAgby50cmlnZ2VyKCduZXdkYXRhJywgcmFuZ2UpO1xuICAgICAgfSkuZG9uZSgpO1xuICB9XG5cbiAgLy8gVGhpcyBlaXRoZXIgYWRkcyBvciByZW1vdmVzIGEgJ2NocicgYXMgbmVlZGVkLlxuICBmdW5jdGlvbiBub3JtYWxpemVSYW5nZVN5bmMocmFuZ2U6IEdlbm9tZVJhbmdlKTogR2Vub21lUmFuZ2Uge1xuICAgIHZhciBjb250aWdJZHggPSBfLm1hcChjb250aWdMaXN0LCBjb250aWcgPT4gY29udGlnLm5hbWUpLmluZGV4T2YocmFuZ2UuY29udGlnKTtcbiAgICBpZiAoY29udGlnSWR4ID49IDApIHtcbiAgICAgIHJldHVybiByYW5nZTtcbiAgICB9XG4gICAgdmFyIGFsdENvbnRpZyA9IHV0aWxzLmFsdENvbnRpZ05hbWUocmFuZ2UuY29udGlnKTtcbiAgICB2YXIgYWx0SWR4ID0gXy5tYXAoY29udGlnTGlzdCwgY29udGlnID0+IGNvbnRpZy5uYW1lKS5pbmRleE9mKGFsdENvbnRpZyk7XG4gICAgaWYgKGFsdElkeCA+PSAwKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBjb250aWc6IGFsdENvbnRpZyxcbiAgICAgICAgc3RhcnQ6IHJhbmdlLnN0YXJ0LFxuICAgICAgICBzdG9wOiByYW5nZS5zdG9wXG4gICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gcmFuZ2U7ICAvLyBsZXQgaXQgZmFpbCB3aXRoIHRoZSBvcmlnaW5hbCBjb250aWdcbiAgfVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZVJhbmdlKHJhbmdlOiBHZW5vbWVSYW5nZSk6IFEuUHJvbWlzZTxHZW5vbWVSYW5nZT4ge1xuICAgIHJldHVybiBjb250aWdQcm9taXNlLnRoZW4oKCkgPT4gbm9ybWFsaXplUmFuZ2VTeW5jKHJhbmdlKSk7XG4gIH1cblxuICAvLyBSZXR1cm5zIGEge1wiY2hyMTI6MTIzXCIgLT4gXCJbQVRDR11cIn0gbWFwcGluZyBmb3IgdGhlIHJhbmdlLlxuICBmdW5jdGlvbiBnZXRSYW5nZShyYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICByZXR1cm4gc3RvcmUuZ2V0QXNPYmplY3RzKENvbnRpZ0ludGVydmFsLmZyb21HZW5vbWVSYW5nZShyYW5nZSkpO1xuICB9XG5cbiAgLy8gUmV0dXJucyBhIHN0cmluZyBvZiBiYXNlIHBhaXJzIGZvciB0aGlzIHJhbmdlLlxuICBmdW5jdGlvbiBnZXRSYW5nZUFzU3RyaW5nKHJhbmdlOiBHZW5vbWVSYW5nZSk6IHN0cmluZyB7XG4gICAgaWYgKCFyYW5nZSkgcmV0dXJuICcnO1xuICAgIHJldHVybiBzdG9yZS5nZXRBc1N0cmluZyhDb250aWdJbnRlcnZhbC5mcm9tR2Vub21lUmFuZ2UocmFuZ2UpKTtcbiAgfVxuXG4gIC8vIEZldGNoIHRoZSBjb250aWcgbGlzdCBpbW1lZGlhdGVseS5cbiAgdmFyIGNvbnRpZ1Byb21pc2UgPSByZW1vdGVTb3VyY2UuZ2V0Q29udGlnTGlzdCgpLnRoZW4oYyA9PiB7XG4gICAgY29udGlnTGlzdCA9IGM7XG4gICAgby50cmlnZ2VyKCdjb250aWdzJywgY29udGlnTGlzdCk7XG4gICAgcmV0dXJuIGM7XG4gIH0pO1xuICBjb250aWdQcm9taXNlLmRvbmUoKTtcblxuICB2YXIgbyA9IHtcbiAgICAvLyBUaGUgcmFuZ2UgaGVyZSBpcyAwLWJhc2VkLCBpbmNsdXNpdmVcbiAgICByYW5nZUNoYW5nZWQ6IGZ1bmN0aW9uKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgICAgbm9ybWFsaXplUmFuZ2UobmV3UmFuZ2UpLnRoZW4ociA9PiB7XG4gICAgICAgIHZhciByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChyLmNvbnRpZywgci5zdGFydCwgci5zdG9wKTtcblxuICAgICAgICAvLyBDaGVjayBpZiB0aGlzIGludGVydmFsIGlzIGFscmVhZHkgaW4gdGhlIGNhY2hlLlxuICAgICAgICBpZiAocmFuZ2UuaXNDb3ZlcmVkQnkoY292ZXJlZFJhbmdlcykpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByYW5nZSA9IGV4cGFuZFJhbmdlKHJhbmdlKTtcbiAgICAgICAgdmFyIG5ld1JhbmdlcyA9IHJhbmdlLmNvbXBsZW1lbnRJbnRlcnZhbHMoY292ZXJlZFJhbmdlcyk7XG5cbiAgICAgICAgZm9yICh2YXIgbmV3UmFuZ2Ugb2YgbmV3UmFuZ2VzKSB7XG4gICAgICAgICAgZmV0Y2gobmV3UmFuZ2UpO1xuICAgICAgICB9XG4gICAgICB9KS5kb25lKCk7XG4gICAgfSxcbiAgICAvLyBUaGUgcmFuZ2VzIHBhc3NlZCB0byB0aGVzZSBtZXRob2RzIGFyZSAwLWJhc2VkXG4gICAgZ2V0UmFuZ2UsXG4gICAgZ2V0UmFuZ2VBc1N0cmluZyxcbiAgICBjb250aWdMaXN0OiAoKSA9PiBjb250aWdMaXN0LFxuICAgIG5vcm1hbGl6ZVJhbmdlLFxuXG4gICAgLy8gVGhlc2UgYXJlIGhlcmUgdG8gbWFrZSBGbG93IGhhcHB5LlxuICAgIG9uOiAoKSA9PiB7fSxcbiAgICBvbmNlOiAoKSA9PiB7fSxcbiAgICBvZmY6ICgpID0+IHt9LFxuICAgIHRyaWdnZXI6ICgpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuXG4gIHJldHVybiBvO1xufTtcblxuZnVuY3Rpb24gY3JlYXRlKGRhdGE6IHt1cmw6c3RyaW5nfSk6IFR3b0JpdFNvdXJjZSB7XG4gIHZhciB1cmwgPSBkYXRhLnVybDtcbiAgaWYgKCF1cmwpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE1pc3NpbmcgVVJMIGZyb20gdHJhY2s6ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9YCk7XG4gIH1cblxuICByZXR1cm4gY3JlYXRlRnJvbVR3b0JpdEZpbGUobmV3IFR3b0JpdChuZXcgUmVtb3RlRmlsZSh1cmwpKSk7XG59XG5cbi8vIEdldHRlci9zZXR0ZXIgZm9yIGJhc2UgcGFpcnMgcGVyIGZldGNoLlxuLy8gVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIGZvciB0ZXN0aW5nLlxuZnVuY3Rpb24gdGVzdEJhc2VQYWlyc1RvRmV0Y2gobnVtPzogbnVtYmVyKTogYW55IHtcbiAgaWYgKG51bSkge1xuICAgIEJBU0VfUEFJUlNfUEVSX0ZFVENIID0gbnVtO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBCQVNFX1BBSVJTX1BFUl9GRVRDSDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlLFxuICBjcmVhdGVGcm9tVHdvQml0RmlsZSxcbiAgdGVzdEJhc2VQYWlyc1RvRmV0Y2hcbn07XG4iLCIvKipcbiAqIFRoZSBcImdsdWVcIiBiZXR3ZWVuIFR3b0JpdC5qcyBhbmQgR2Vub21lVHJhY2suanMuXG4gKlxuICogR2Vub21lVHJhY2sgaXMgcHVyZSB2aWV3IGNvZGUgLS0gaXQgcmVuZGVycyBkYXRhIHdoaWNoIGlzIGFscmVhZHkgaW4tbWVtb3J5XG4gKiBpbiB0aGUgYnJvd3Nlci5cbiAqXG4gKiBUd29CaXQgaXMgcHVyZWx5IGZvciBkYXRhIHBhcnNpbmcgYW5kIGZldGNoaW5nLiBJdCBvbmx5IGtub3dzIGhvdyB0byByZXR1cm5cbiAqIHByb21pc2VzIGZvciB2YXJpb3VzIGdlbm9tZSBmZWF0dXJlcy5cbiAqXG4gKiBUaGlzIGNvZGUgYWN0cyBhcyBhIGJyaWRnZSBiZXR3ZWVuIHRoZSB0d28uIEl0IG1haW50YWlucyBhIGxvY2FsIHZlcnNpb24gb2ZcbiAqIHRoZSBkYXRhLCBmZXRjaGluZyByZW1vdGUgZGF0YSBhbmQgaW5mb3JtaW5nIHRoZSB2aWV3IHdoZW4gaXQgYmVjb21lc1xuICogYXZhaWxhYmxlLlxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1ZhcmlhbnQsIFZhcmlhbnRDb250ZXh0fSBmcm9tICcuLi9kYXRhL3ZjZic7XG5cbmltcG9ydCBRIGZyb20gJ3EnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5pbXBvcnQge0V2ZW50c30gZnJvbSAnYmFja2JvbmUnO1xuaW1wb3J0IHtSZXNvbHV0aW9uQ2FjaGV9IGZyb20gJy4uL1Jlc29sdXRpb25DYWNoZSc7XG5cbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgdHlwZSB7VmNmRGF0YVNvdXJjZX0gZnJvbSAnLi9WY2ZEYXRhU291cmNlJztcbmltcG9ydCB7UmVtb3RlUmVxdWVzdH0gZnJvbSAnLi4vUmVtb3RlUmVxdWVzdCc7XG5cbnZhciBCQVNFX1BBSVJTX1BFUl9GRVRDSCA9IDEwMDA7XG5cbmZ1bmN0aW9uIGV4cGFuZFJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KSB7XG4gIHZhciByb3VuZERvd24gPSB4ID0+IHggLSB4ICUgQkFTRV9QQUlSU19QRVJfRkVUQ0g7XG4gIHZhciBuZXdTdGFydCA9IE1hdGgubWF4KDEsIHJvdW5kRG93bihyYW5nZS5zdGFydCgpKSksXG4gICAgICBuZXdTdG9wID0gcm91bmREb3duKHJhbmdlLnN0b3AoKSArIEJBU0VfUEFJUlNfUEVSX0ZFVENIIC0gMSk7XG5cbiAgcmV0dXJuIG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIG5ld1N0YXJ0LCBuZXdTdG9wKTtcbn1cblxuZnVuY3Rpb24ga2V5RnVuY3Rpb24odmM6IFZhcmlhbnRDb250ZXh0KTogc3RyaW5nIHtcbiAgcmV0dXJuIGAke3ZjLnZhcmlhbnQuY29udGlnfToke3ZjLnZhcmlhbnQucG9zaXRpb259YDtcbn1cblxuZnVuY3Rpb24gZmlsdGVyRnVuY3Rpb24ocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sIHZjOiBWYXJpYW50Q29udGV4dCk6IGJvb2xlYW4ge1xuICByZXR1cm4gcmFuZ2UuY2hyQ29udGFpbnNMb2N1cyh2Yy52YXJpYW50LmNvbnRpZywgdmMudmFyaWFudC5wb3NpdGlvbik7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZyb21WYXJpYW50VXJsKHJlbW90ZVNvdXJjZTogUmVtb3RlUmVxdWVzdCxcbiAgc2FtcGxlcz86IHN0cmluZ1tdKTogVmNmRGF0YVNvdXJjZSB7XG5cbiAgdmFyIGNhY2hlOiBSZXNvbHV0aW9uQ2FjaGU8VmFyaWFudENvbnRleHQ+ID1cbiAgICBuZXcgUmVzb2x1dGlvbkNhY2hlKGZpbHRlckZ1bmN0aW9uLCBrZXlGdW5jdGlvbik7XG5cbiAgZnVuY3Rpb24gZmV0Y2gocmFuZ2U6IEdlbm9tZVJhbmdlKSB7XG4gICAgdmFyIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQsIHJhbmdlLnN0b3ApO1xuXG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpbnRlcnZhbCBpcyBhbHJlYWR5IGluIHRoZSBjYWNoZS5cbiAgICBpZiAoY2FjaGUuY292ZXJzUmFuZ2UoaW50ZXJ2YWwpKSB7XG4gICAgICByZXR1cm4gUS53aGVuKCk7XG4gICAgfVxuXG4gICAgLy8gbW9kaWZ5IGVuZHBvaW50IHRvIGNhbGN1bGF0ZSBjb3ZlcmFnZSB1c2luZyBiaW5uaW5nXG4gICAgdmFyIHJlc29sdXRpb24gPSBSZXNvbHV0aW9uQ2FjaGUuZ2V0UmVzb2x1dGlvbihpbnRlcnZhbC5pbnRlcnZhbCk7XG4gICAgdmFyIGVuZHBvaW50TW9kaWZpZXIgPSBgYmlubmluZz0ke3Jlc29sdXRpb259YDtcblxuICAgIGludGVydmFsID0gZXhwYW5kUmFuZ2UoaW50ZXJ2YWwpO1xuXG4gICAgLy8gZ2V0IGFsbCBzbWFsbGVyIGludGVydmFscyBub3QgeWV0IGNvdmVyZWQgaW4gY2FjaGVcbiAgICB2YXIgbmV3UmFuZ2VzID0gY2FjaGUuY29tcGxlbWVudEludGVydmFsKGludGVydmFsLCByZXNvbHV0aW9uKTtcblxuICAgIC8vIFwiQ292ZXJcIiB0aGUgcmFuZ2UgaW1tZWRpYXRlbHkgdG8gcHJldmVudCBkdXBsaWNhdGUgZmV0Y2hlcy5cbiAgICAvLyBCZWNhdXNlIGludGVydmFsIGlzIGV4cGFuZGVkLCBtYWtlIHN1cmUgdG8gdXNlIG9yaWdpbmFsIHJlc29sdXRpb25cbiAgICBjYWNoZS5jb3ZlclJhbmdlKGludGVydmFsLCByZXNvbHV0aW9uKTtcbiAgICBvLnRyaWdnZXIoJ25ldHdvcmtwcm9ncmVzcycsIG5ld1Jhbmdlcy5sZW5ndGgpO1xuICAgIHJldHVybiBRLmFsbChuZXdSYW5nZXMubWFwKHJhbmdlID0+XG4gICAgICByZW1vdGVTb3VyY2UuZ2V0RmVhdHVyZXNJblJhbmdlKHJhbmdlLCBlbmRwb2ludE1vZGlmaWVyKS50aGVuKGUgPT4ge1xuICAgICAgdmFyIHJlc3BvbnNlID0gZS5yZXNwb25zZTtcbiAgICAgIGlmIChyZXNwb25zZSAhPT0gbnVsbCkge1xuICAgICAgICAvLyBwYXJzZSBWYXJpYW50Q29udGV4dHNcbiAgICAgICAgdmFyIHZhcmlhbnRzID0gXy5tYXAocmVzcG9uc2UsIHYgPT4gSlNPTi5wYXJzZSh2KSk7XG4gICAgICAgIHZhcmlhbnRzLmZvckVhY2godiA9PiBjYWNoZS5wdXQodiwgcmVzb2x1dGlvbikpO1xuICAgICAgfVxuICAgICAgby50cmlnZ2VyKCduZXR3b3JrZG9uZScpO1xuICAgICAgby50cmlnZ2VyKCduZXdkYXRhJywgaW50ZXJ2YWwpO1xuICAgIH0pKSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRWYXJpYW50c0luUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sIHJlc29sdXRpb246ID9udW1iZXIpOiBWYXJpYW50W10ge1xuICAgIGlmICghcmFuZ2UpIHJldHVybiBbXTsgIC8vIFhYWCB3aHkgd291bGQgdGhpcyBoYXBwZW4/XG4gICAgdmFyIGRhdGEgPSBjYWNoZS5nZXQocmFuZ2UsIHJlc29sdXRpb24pO1xuICAgIHZhciBzb3J0ZWQgPSBkYXRhLnNvcnQoKGEsIGIpID0+IGEudmFyaWFudC5wb3NpdGlvbiAtIGIudmFyaWFudC5wb3NpdGlvbik7XG4gICAgcmV0dXJuIF8ubWFwKHNvcnRlZCwgcyA9PiBzLnZhcmlhbnQpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0R2Vub3R5cGVzSW5SYW5nZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPiwgcmVzb2x1dGlvbjogP251bWJlcik6IFZhcmlhbnRDb250ZXh0W10ge1xuICAgIGlmICghcmFuZ2UgfHwgIXNhbXBsZXMpIHJldHVybiBbXTsgIC8vIGlmIG5vIHNhbXBsZXMgYXJlIHNwZWNpZmllZFxuICAgIHZhciBkYXRhID0gY2FjaGUuZ2V0KHJhbmdlLCByZXNvbHV0aW9uKTtcbiAgICB2YXIgc29ydGVkID0gZGF0YS5zb3J0KChhLCBiKSA9PiBhLnZhcmlhbnQucG9zaXRpb24gLSBiLnZhcmlhbnQucG9zaXRpb24pO1xuICAgIHJldHVybiBzb3J0ZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRTYW1wbGVzKCk6IHN0cmluZ1tdIHtcbiAgICBpZiAoIXNhbXBsZXMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHNhbXBsZXMgZm9yIGdlbm90eXBlc1wiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHNhbXBsZXM7XG4gICAgfVxuICB9XG5cbiAgdmFyIG8gPSB7XG4gICAgcmFuZ2VDaGFuZ2VkOiBmdW5jdGlvbihuZXdSYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICAgIGZldGNoKG5ld1JhbmdlKS5kb25lKCk7XG4gICAgfSxcbiAgICBnZXRWYXJpYW50c0luUmFuZ2UsXG4gICAgZ2V0R2Vub3R5cGVzSW5SYW5nZSxcbiAgICBnZXRTYW1wbGVzLFxuXG4gICAgLy8gVGhlc2UgYXJlIGhlcmUgdG8gbWFrZSBGbG93IGhhcHB5LlxuICAgIG9uOiAoKSA9PiB7fSxcbiAgICBvZmY6ICgpID0+IHt9LFxuICAgIHRyaWdnZXI6ICgpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuXG4gIHJldHVybiBvO1xufVxuXG5mdW5jdGlvbiBjcmVhdGUoZGF0YToge3VybD86c3RyaW5nLCBzYW1wbGVzPzpzdHJpbmdbXX0pOiBWY2ZEYXRhU291cmNlIHtcbiAgaWYgKCFkYXRhLnVybCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBVUkwgZnJvbSB0cmFjazogJHtKU09OLnN0cmluZ2lmeShkYXRhKX1gKTtcbiAgfVxuICBpZiAoIWRhdGEuc2FtcGxlcykge1xuICAgIGNvbnNvbGUubG9nKFwibm8gZ2Vub3R5cGUgc2FtcGxlcyBwcm92aWRlZFwiKTtcbiAgfVxuICB2YXIgZW5kcG9pbnQgPSBuZXcgUmVtb3RlUmVxdWVzdChkYXRhLnVybCwgQkFTRV9QQUlSU19QRVJfRkVUQ0gpO1xuICByZXR1cm4gY3JlYXRlRnJvbVZhcmlhbnRVcmwoZW5kcG9pbnQsIGRhdGEuc2FtcGxlcyk7XG59XG5cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZSxcbiAgY3JlYXRlRnJvbVZhcmlhbnRVcmxcbn07XG4iLCIvKipcbiAqIENhY2hpbmcgJiBwcmVmZXRjaGluZyBmb3IgVkNGIHNvdXJjZXMuXG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7VmFyaWFudCwgVmFyaWFudENvbnRleHR9IGZyb20gJy4uL2RhdGEvdmNmJztcblxuaW1wb3J0IEV2ZW50cyBmcm9tICdiYWNrYm9uZSc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBRIGZyb20gJ3EnO1xuXG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IFJlbW90ZUZpbGUgZnJvbSAnLi4vUmVtb3RlRmlsZSc7XG5pbXBvcnQgTG9jYWxTdHJpbmdGaWxlIGZyb20gJy4uL0xvY2FsU3RyaW5nRmlsZSc7XG5pbXBvcnQgVmNmRmlsZSBmcm9tICcuLi9kYXRhL3ZjZic7XG5cbmV4cG9ydCB0eXBlIFZjZkRhdGFTb3VyY2UgPSB7XG4gIHJhbmdlQ2hhbmdlZDogKG5ld1JhbmdlOiBHZW5vbWVSYW5nZSkgPT4gdm9pZDtcbiAgZ2V0VmFyaWFudHNJblJhbmdlOiAocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pID0+IFZhcmlhbnRbXTtcbiAgZ2V0R2Vub3R5cGVzSW5SYW5nZTogKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KSA9PiBWYXJpYW50Q29udGV4dFtdO1xuICBnZXRTYW1wbGVzOiAoKSA9PiBzdHJpbmdbXTtcbiAgb246IChldmVudDogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbikgPT4gdm9pZDtcbiAgb2ZmOiAoZXZlbnQ6IHN0cmluZykgPT4gdm9pZDtcbiAgdHJpZ2dlcjogKGV2ZW50OiBzdHJpbmcsIC4uLmFyZ3M6YW55KSA9PiB2b2lkO1xufTtcblxuXG52YXIgQkFTRV9QQUlSU19QRVJfRkVUQ0ggPSAxMDA7XG5mdW5jdGlvbiBleHBhbmRSYW5nZShyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPikge1xuICB2YXIgcm91bmREb3duID0geCA9PiB4IC0geCAlIEJBU0VfUEFJUlNfUEVSX0ZFVENIO1xuICB2YXIgbmV3U3RhcnQgPSBNYXRoLm1heCgxLCByb3VuZERvd24ocmFuZ2Uuc3RhcnQoKSkpLFxuICAgICAgbmV3U3RvcCA9IHJvdW5kRG93bihyYW5nZS5zdG9wKCkgKyBCQVNFX1BBSVJTX1BFUl9GRVRDSCAtIDEpO1xuXG4gIHJldHVybiBuZXcgQ29udGlnSW50ZXJ2YWwocmFuZ2UuY29udGlnLCBuZXdTdGFydCwgbmV3U3RvcCk7XG59XG5cbmZ1bmN0aW9uIHZhcmlhbnRLZXkodjogVmFyaWFudCk6IHN0cmluZyB7XG4gIHJldHVybiBgJHt2LmNvbnRpZ306JHt2LnBvc2l0aW9ufWA7XG59XG5cblxuZnVuY3Rpb24gY3JlYXRlRnJvbVZjZkZpbGUocmVtb3RlU291cmNlOiBWY2ZGaWxlKTogVmNmRGF0YVNvdXJjZSB7XG4gIHZhciB2YXJpYW50czoge1trZXk6IHN0cmluZ106IFZhcmlhbnR9ID0ge307XG5cbiAgLy8gUmFuZ2VzIGZvciB3aGljaCB3ZSBoYXZlIGNvbXBsZXRlIGluZm9ybWF0aW9uIC0tIG5vIG5lZWQgdG8gaGl0IG5ldHdvcmsuXG4gIHZhciBjb3ZlcmVkUmFuZ2VzOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+W10gPSBbXTtcblxuICBmdW5jdGlvbiBhZGRWYXJpYW50KHY6IFZhcmlhbnQpIHtcbiAgICB2YXIga2V5ID0gdmFyaWFudEtleSh2KTtcbiAgICBpZiAoIXZhcmlhbnRzW2tleV0pIHtcbiAgICAgIHZhcmlhbnRzW2tleV0gPSB2O1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGZldGNoKHJhbmdlOiBHZW5vbWVSYW5nZSkge1xuICAgIHZhciBpbnRlcnZhbCA9IG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIHJhbmdlLnN0YXJ0LCByYW5nZS5zdG9wKTtcblxuICAgIC8vIENoZWNrIGlmIHRoaXMgaW50ZXJ2YWwgaXMgYWxyZWFkeSBpbiB0aGUgY2FjaGUuXG4gICAgaWYgKGludGVydmFsLmlzQ292ZXJlZEJ5KGNvdmVyZWRSYW5nZXMpKSB7XG4gICAgICByZXR1cm4gUS53aGVuKCk7XG4gICAgfVxuXG4gICAgaW50ZXJ2YWwgPSBleHBhbmRSYW5nZShpbnRlcnZhbCk7XG5cbiAgICAvLyBcIkNvdmVyXCIgdGhlIHJhbmdlIGltbWVkaWF0ZWx5IHRvIHByZXZlbnQgZHVwbGljYXRlIGZldGNoZXMuXG4gICAgY292ZXJlZFJhbmdlcy5wdXNoKGludGVydmFsKTtcbiAgICBjb3ZlcmVkUmFuZ2VzID0gQ29udGlnSW50ZXJ2YWwuY29hbGVzY2UoY292ZXJlZFJhbmdlcyk7XG4gICAgcmV0dXJuIHJlbW90ZVNvdXJjZS5nZXRGZWF0dXJlc0luUmFuZ2UoaW50ZXJ2YWwpLnRoZW4odmFyaWFudHMgPT4ge1xuICAgICAgdmFyaWFudHMuZm9yRWFjaCh2YXJpYW50ID0+IGFkZFZhcmlhbnQodmFyaWFudCkpO1xuICAgICAgby50cmlnZ2VyKCduZXdkYXRhJywgaW50ZXJ2YWwpO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VmFyaWFudHNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogVmFyaWFudFtdIHtcbiAgICBpZiAoIXJhbmdlKSByZXR1cm4gW107ICAvLyBYWFggd2h5IHdvdWxkIHRoaXMgaGFwcGVuP1xuICAgIHJldHVybiBfLmZpbHRlcih2YXJpYW50cywgdiA9PiByYW5nZS5jaHJDb250YWluc0xvY3VzKHYuY29udGlnLCB2LnBvc2l0aW9uKSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRHZW5vdHlwZXNJblJhbmdlKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogVmFyaWFudENvbnRleHRbXSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGdW5jdGlvbiBnZXRHZW5vdHlwZXNJblJhbmdlIG5vdCBpbXBsZW1lbnRlZGApO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0U2FtcGxlcygpOiBzdHJpbmdbXSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGdW5jdGlvbiBnZXRTYW1wbGVzIG5vdCBpbXBsZW1lbnRlZGApO1xuICB9XG5cbiAgdmFyIG8gPSB7XG4gICAgcmFuZ2VDaGFuZ2VkOiBmdW5jdGlvbihuZXdSYW5nZTogR2Vub21lUmFuZ2UpIHtcbiAgICAgIGZldGNoKG5ld1JhbmdlKS5kb25lKCk7XG4gICAgfSxcbiAgICBnZXRWYXJpYW50c0luUmFuZ2UsXG4gICAgZ2V0R2Vub3R5cGVzSW5SYW5nZSxcbiAgICBnZXRTYW1wbGVzLFxuXG4gICAgLy8gVGhlc2UgYXJlIGhlcmUgdG8gbWFrZSBGbG93IGhhcHB5LlxuICAgIG9uOiAoKSA9PiB7fSxcbiAgICBvZmY6ICgpID0+IHt9LFxuICAgIHRyaWdnZXI6ICgpID0+IHt9XG4gIH07XG4gIF8uZXh0ZW5kKG8sIEV2ZW50cyk7ICAvLyBNYWtlIHRoaXMgYW4gZXZlbnQgZW1pdHRlclxuXG4gIHJldHVybiBvO1xufVxuXG5mdW5jdGlvbiBjcmVhdGUoZGF0YToge3VybD86IHN0cmluZywgY29udGVudD86IHN0cmluZ30pOiBWY2ZEYXRhU291cmNlIHtcbiAgdmFyIHt1cmwsIGNvbnRlbnR9ID0gZGF0YTtcbiAgaWYgKHVybCkge1xuICAgIHJldHVybiBjcmVhdGVGcm9tVmNmRmlsZShuZXcgVmNmRmlsZShuZXcgUmVtb3RlRmlsZSh1cmwpKSk7XG4gIH0gZWxzZSBpZiAoY29udGVudCkge1xuICAgIHJldHVybiBjcmVhdGVGcm9tVmNmRmlsZShuZXcgVmNmRmlsZShuZXcgTG9jYWxTdHJpbmdGaWxlKGNvbnRlbnQpKSk7XG4gIH1cbiAgLy8gSWYgbm8gVVJMIG9yIGNvbnRlbnQgaXMgcGFzc2VkLCBmYWlsXG4gIHRocm93IG5ldyBFcnJvcihgTWlzc2luZyBVUkwgb3IgY29udGVudCBmcm9tIHRyYWNrOiAke0pTT04uc3RyaW5naWZ5KGRhdGEpfWApO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlLFxuICBjcmVhdGVGcm9tVmNmRmlsZVxufTtcbiIsIi8qKlxuICogQ2VudHJhbCBjb2xsZWN0aW9uIG9mIHN0eWxpbmcgc2V0dGluZ3MuXG4gKiBVbnRpbCB3ZSBmaWd1cmUgb3V0IGEgYmV0dGVyIHN0b3J5IGFyb3VuZCBjYW52YXMgJiBDU1MsIHRoZXkgbGl2ZSBoZXJlLlxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIC8vIENvbG9ycyBmb3IgaW5kaXZpZHVhbCBiYXNlIHBhaXJzXG4gIEJBU0VfQ09MT1JTOiB7XG4gICAgJ0EnOiAnIzUwNTBGRicsIC8vJyMxODg3MTInLFxuICAgICdHJzogJyMwMEMwMDAnLCAvLycjQzQ1QzE2JyxcbiAgICAnQyc6ICcjRTAwMDAwJywgLy8nIzA2MDBGOScsXG4gICAgJ1QnOiAnI0U2RTYwMCcsLy8gJyNGNzAwMTYnLFxuICAgICdVJzogJyNGNzAwMTYnLFxuICAgICdOJzogJ2JsYWNrJ1xuICB9LFxuXG4gIC8vIFN0eWxlcyBmb3IgYmFzZSBwYWlycyB3aGljaCBhcmUgcmVuZGVyZWQgYXMgbGV0dGVyc1xuICBMT09TRV9URVhUX1NUWUxFOiBgMjRweCAnSGVsdmV0aWNhIE5ldWUnLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmYCxcbiAgVElHSFRfVEVYVF9TVFlMRTogYGJvbGQgMTJweCAnSGVsdmV0aWNhIE5ldWUnLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmYCxcblxuICAvLyBHZW5lIHRyYWNrXG4gIEdFTkVfQVJST1dfU0laRTogNCxcbiAgR0VORV9DT0xPUjogJ2JsdWUnLCAgLy8gY29sb3Igb2YgdGhlIGdlbmUgbGluZSwgZXhvbnMsIHRleHQsIGV0Yy5cbiAgR0VORV9DT01QTEVNRU5UX0NPTE9SOiAnd2hpdGUnLCAgLy8gYSBjb2xvciB2aXNpYmxlIG9uIHRvcCBvZiBHRU5FX0NPTE9SXG4gIEdFTkVfRk9OVDogYCdIZWx2ZXRpY2EgTmV1ZScsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWZgLFxuICBHRU5FX0ZPTlRfU0laRTogMTYsXG4gIEdFTkVfVEVYVF9QQURESU5HOiA1LCAgLy8gc3BhY2UgYmV0d2VlbiBib3R0b20gb2YgY29kaW5nIGV4b24gJiB0b3Agb2YgZ2VuZSBuYW1lXG5cbiAgLy8gUGlsZXVwIHRyYWNrXG4gIEFMSUdOTUVOVF9DT0xPUjogJyNjOGM4YzgnLFxuICBBTElHTk1FTlRfTUlOVVNfU1RSQU5EX0NPTE9SOiAncmdiKDE3NiwgMTc2LCAyMzYpJyxcbiAgQUxJR05NRU5UX1BMVVNfU1RSQU5EX0NPTE9SOiAncmdiKDIzNiwgMTc2LCAxNzYpJyxcbiAgREVMRVRFX0NPTE9SOiAnYmxhY2snLFxuICBJTlNFUlRfQ09MT1I6ICdyZ2IoOTcsIDAsIDIxNiknLFxuXG4gIC8vIENvdmVyYWdlIHRyYWNrXG4gIENPVkVSQUdFX0ZPTlRfU1RZTEU6IGBib2xkIDlweCAnSGVsdmV0aWNhIE5ldWUnLCBIZWx2ZXRpY2EsIEFyaWFsLCBzYW5zLXNlcmlmYCxcbiAgQ09WRVJBR0VfRk9OVF9DT0xPUjogJ2JsYWNrJyxcbiAgQ09WRVJBR0VfVElDS19MRU5HVEg6IDUsXG4gIENPVkVSQUdFX1BBRERJTkc6IDEwLCAgLy8gc3BhY2UgYmV0d2VlbiBheGlzIHRpY2tzIGFuZCB0ZXh0XG4gIENPVkVSQUdFX1RFWFRfUEFERElORzogMywgIC8vIHNwYWNlIGJldHdlZW4gYXhpcyB0aWNrcyBhbmQgdGV4dFxuICBDT1ZFUkFHRV9URVhUX1lfT0ZGU0VUOiAzLCAgLy8gc28gdGhhdCB0aWNrcyBhbmQgdGV4dHMgYWxpZ24gYmV0dGVyXG4gIENPVkVSQUdFX0JJTl9DT0xPUjogJyNhMGEwYTAnLFxuICBDT1ZFUkFHRV9NSU5fQkFSX1dJRFRIX0ZPUl9HQVA6IDgsICAvLyBzaG93IGEgMXB4IGdhcCBiZXR3ZWVuIGJhcnMgYXQgdGhpcyByZXNvbHV0aW9uXG5cbiAgLy8gU2NhbGUgVHJhY2tcbiAgU0NBTEVfTElORV9QQURESU5HOiA0MCwgIC8vIHNwYWNlIGJldHdlZW4gbWlkIHBvaW50IGFuZCBsZWZ0L3JpZ2h0IGxpbmVzXG4gIFNDQUxFX0ZPTlRfU1RZTEU6IGBib2xkIDEycHggJ0hlbHZldGljYSBOZXVlJywgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZmAsXG4gIFNDQUxFX1RFWFRfWV9PRkZTRVQ6IDUsICAvLyBzbyB0aGF0IGxpbmVzIGFuZCB0aGUgdGV4dCBhbGlnbiBiZXR0ZXJcbiAgU0NBTEVfRk9OVF9DT0xPUjogJ2JsYWNrJyxcbiAgU0NBTEVfQVJST1dfU0laRTogNCxcblxuICAvLyBMb2NhdGlvbiB0cmFja1xuICBMT0NfVEVYVF9QQURESU5HOiA1LCAgLy8gc3BhY2UgYmV0d2VlbiBtaWQtcG9pbnQgbGFiZWwgYW5kIHRpY2tcbiAgTE9DX1RJQ0tfTEVOR1RIOiAxMCxcbiAgTE9DX1RFWFRfWV9PRkZTRVQ6IDUsICAvLyBzbyB0aGF0IHRoZSBsaW5lIGFuZCB0aGUgdGV4dCBhbGlnbiBiZXR0ZXJcbiAgTE9DX0ZPTlRfU1RZTEU6IGAxM3B4ICdIZWx2ZXRpY2EgTmV1ZScsIEhlbHZldGljYSwgQXJpYWwsIHNhbnMtc2VyaWZgLFxuICBMT0NfRk9OVF9DT0xPUjogJ2JsYWNrJyxcblxuICAvLyBWYXJpYW50IFRyYWNrXG4gIFZBUklBTlRfSEVJR0hUOiAxNCxcblxuICAvLyBHZW5vdHlwZSBUcmFja1xuICBHRU5PVFlQRV9TUEFDSU5HOiAxLFxuICBHRU5PVFlQRV9IRUlHSFQ6IDEwLFxuICBHRU5PVFlQRV9GSUxMOiAnIzk5OTk5OScsXG4gIEJBQ0tHUk9VTkRfRklMTDogJyNmMmYyZjInLFxufTtcbiIsIi8qKlxuICogR3JhYi1iYWcgb2YgdXRpbGl0eSBmdW5jdGlvbnMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtJbmZsYXRlZEJsb2NrLCBQYXJ0aWFsR2Vub21lUmFuZ2V9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHR5cGUgUSBmcm9tICdxJztcblxuaW1wb3J0IHBha28gZnJvbSAncGFrby9saWIvaW5mbGF0ZSc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcblxuaW1wb3J0IEludGVydmFsIGZyb20gJy4vSW50ZXJ2YWwnO1xuXG4vLyBDb21wYXJlIHR3byB0dXBsZXMgb2YgZXF1YWwgbGVuZ3RoLiBJcyB0MSA8PSB0Mj9cbi8vIFRPRE86IG1ha2UgdGhpcyB0dXBsZUxlc3NPckVxdWFsPFQ+IC0tIGl0IHdvcmtzIHdpdGggc3RyaW5ncyBvciBib29sZWFucywgdG9vLlxuZnVuY3Rpb24gdHVwbGVMZXNzT3JFcXVhbCh0MTogQXJyYXk8bnVtYmVyPiwgdDI6IEFycmF5PG51bWJlcj4pOiBib29sZWFuIHtcbiAgaWYgKHQxLmxlbmd0aCAhPSB0Mi5sZW5ndGgpIHRocm93IG5ldyBFcnJvcignQ29tcGFyaW5nIG5vbi1lcXVhbCBsZW5ndGggdHVwbGVzJyk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgdDEubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAodDFbaV0gPiB0MltpXSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSBpZiAodDFbaV0gPCB0MltpXSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyBEbyB0d28gcmFuZ2VzIG9mIHR1cGxlcyBvdmVybGFwP1xuLy8gVE9ETzogbWFrZSB0aGlzIHR1cGxlUmFuZ2VPdmVybGFwczxUPiAtLSBpdCB3b3JrcyB3aXRoIHN0cmluZ3Mgb3IgYm9vbGVhbnMsIHRvby5cbmZ1bmN0aW9uIHR1cGxlUmFuZ2VPdmVybGFwcyh0dXBsZVJhbmdlMTogQXJyYXk8QXJyYXk8bnVtYmVyPj4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHVwbGVSYW5nZTI6IEFycmF5PEFycmF5PG51bWJlcj4+KTogYm9vbGVhbiB7XG4gIHJldHVybiAoXG4gICAgIC8vIEFyZSB0aGUgcmFuZ2VzIG92ZXJsYXBwaW5nP1xuICAgICB0dXBsZUxlc3NPckVxdWFsKHR1cGxlUmFuZ2UxWzBdLCB0dXBsZVJhbmdlMlsxXSkgJiZcbiAgICAgdHVwbGVMZXNzT3JFcXVhbCh0dXBsZVJhbmdlMlswXSwgdHVwbGVSYW5nZTFbMV0pICYmXG4gICAgIC8vIC4uLiBhbmQgbm9uLWVtcHR5P1xuICAgICB0dXBsZUxlc3NPckVxdWFsKHR1cGxlUmFuZ2UxWzBdLCB0dXBsZVJhbmdlMVsxXSkgJiZcbiAgICAgdHVwbGVMZXNzT3JFcXVhbCh0dXBsZVJhbmdlMlswXSwgdHVwbGVSYW5nZTJbMV0pKTtcbn1cblxuLy8gUmV0dXJuIGEgbmV3IEFycmF5QnVmZmVyIGJ5IGNvbmNhdGVuYXRpbmcgYW4gYXJyYXkgb2YgQXJyYXlCdWZmZXJzLlxuZnVuY3Rpb24gY29uY2F0QXJyYXlCdWZmZXJzKGJ1ZmZlcnM6IEFycmF5QnVmZmVyW10pOiBBcnJheUJ1ZmZlciB7XG4gIHZhciB0b3RhbEJ5dGVzID0gYnVmZmVycy5tYXAoYiA9PiBiLmJ5dGVMZW5ndGgpLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApO1xuICB2YXIgb3V0cHV0ID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7XG4gIHZhciBwb3NpdGlvbiA9IDA7XG4gIGJ1ZmZlcnMuZm9yRWFjaChidWYgPT4ge1xuICAgIG91dHB1dC5zZXQobmV3IFVpbnQ4QXJyYXkoYnVmKSwgcG9zaXRpb24pO1xuICAgIHBvc2l0aW9uICs9IGJ1Zi5ieXRlTGVuZ3RoO1xuICB9KTtcbiAgcmV0dXJuIG91dHB1dC5idWZmZXI7XG59XG5cbnR5cGUgSW5mbGF0ZUNhY2hlS2V5ID0ge1xuICBmaWxlbmFtZTogc3RyaW5nO1xuICBpbml0aWFsT2Zmc2V0OiBudW1iZXI7XG59XG5cbnR5cGUgUGFrb1Jlc3VsdCA9IHtcbiAgZXJyOiBudW1iZXI7XG4gIG1zZzogc3RyaW5nO1xuICBidWZmZXI6ID9BcnJheUJ1ZmZlcjtcbiAgdG90YWxfaW46IG51bWJlcjtcbn1cbnZhciBpbmZsYXRpb25DYWNoZToge1trZXk6IHN0cmluZ106IFBha29SZXN1bHR9ID0ge307XG5cbi8vIGV4dHJhY3RlZCBmb3IgY2FjaGluZ1xuZnVuY3Rpb24gX2luZmxhdGVPbmUoYnVmZmVyLCBwb3NpdGlvbik6IFBha29SZXN1bHQge1xuICB2YXIgaW5mbGF0b3IgPSBuZXcgcGFrby5JbmZsYXRlKCk7XG4gIGluZmxhdG9yLnB1c2goYnVmZmVyLnNsaWNlKHBvc2l0aW9uKSk7XG4gIHJldHVybiB7XG4gICAgZXJyOiBpbmZsYXRvci5lcnIsXG4gICAgbXNnOiBpbmZsYXRvci5tc2csXG4gICAgYnVmZmVyOiBpbmZsYXRvci5yZXN1bHQgPyBpbmZsYXRvci5yZXN1bHQuYnVmZmVyIDogbnVsbCxcbiAgICB0b3RhbF9pbjogaW5mbGF0b3Iuc3RybS50b3RhbF9pblxuICB9O1xufVxuXG5mdW5jdGlvbiBjYWNoZWRJbmZsYXRlT25lKGJ1ZmZlciwgcG9zaXRpb24sIGNhY2hlPzogSW5mbGF0ZUNhY2hlS2V5KSB7XG4gIGlmICghY2FjaGUpIHtcbiAgICByZXR1cm4gX2luZmxhdGVPbmUoYnVmZmVyLCBwb3NpdGlvbik7XG4gIH1cbiAgdmFyIGNhY2hlS2V5ID0gY2FjaGUuZmlsZW5hbWUgKyAnOicgKyAoY2FjaGUuaW5pdGlhbE9mZnNldCArIHBvc2l0aW9uKTtcbiAgdmFyIHYgPSBpbmZsYXRpb25DYWNoZVtjYWNoZUtleV07XG4gIGlmICh2ICYmIChwb3NpdGlvbiArIHYudG90YWxfaW4gPiBidWZmZXIuYnl0ZUxlbmd0aCkpIHtcbiAgICAvLyBJdCBzaG91bGQgZmFpbC5cbiAgICByZXR1cm4gX2luZmxhdGVPbmUoYnVmZmVyLCBwb3NpdGlvbik7XG4gIH1cblxuICBpZiAoIXYpIHtcbiAgICB2ID0gX2luZmxhdGVPbmUoYnVmZmVyLCBwb3NpdGlvbik7XG4gIH1cbiAgaWYgKCF2LmVyciAmJiB2LmJ1ZmZlcikge1xuICAgIGluZmxhdGlvbkNhY2hlW2NhY2hlS2V5XSA9IHY7XG4gIH1cbiAgcmV0dXJuIHY7XG59XG5cbi8qKlxuICogQkFNIGZpbGVzIGFyZSB3cml0dGVuIGluIFwiQkdaRlwiIGZvcm1hdCwgd2hpY2ggY29uc2lzdHMgb2YgbWFueSBjb25jYXRlbmF0ZWRcbiAqIGd6aXAgYmxvY2tzLiBndW56aXAgY29uY2F0ZW5hdGVzIGFsbCB0aGUgaW5mbGF0ZWQgYmxvY2tzLCBidXQgcGFrbyBvbmx5XG4gKiBpbmZsYXRlcyBvbmUgYmxvY2sgYXQgYSB0aW1lLiBUaGlzIHdyYXBwZXIgbWFrZXMgcGFrbyBiZWhhdmUgbGlrZSBndW56aXAuXG4gKiBJZiBzcGVjaWZpZWQsIGxhc3RCbG9ja1N0YXJ0IHdpbGwgc3RvcCBpbmZsYXRpb24gYmVmb3JlIGFsbCB0aGUgYmxvY2tzXG4gKiBoYXZlIGJlZW4gcHJvY2Vzc2VkLlxuICovXG5mdW5jdGlvbiBpbmZsYXRlQ29uY2F0ZW5hdGVkR3ppcChidWZmZXI6IEFycmF5QnVmZmVyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdEJsb2NrU3RhcnQ/OiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZT86IEluZmxhdGVDYWNoZUtleSk6IEluZmxhdGVkQmxvY2tbXSB7XG4gIHZhciBwb3NpdGlvbiA9IDAsXG4gICAgICBibG9ja3MgPSBbXTtcbiAgaWYgKGxhc3RCbG9ja1N0YXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICBsYXN0QmxvY2tTdGFydCA9IGJ1ZmZlci5ieXRlTGVuZ3RoO1xuICB9XG4gIGRvIHtcbiAgICB2YXIgcmVzdWx0ID0gY2FjaGVkSW5mbGF0ZU9uZShidWZmZXIsIHBvc2l0aW9uLCBjYWNoZSk7XG5cbiAgICBpZiAocmVzdWx0LmVycikge1xuICAgICAgdGhyb3cgJ0d6aXAgZXJyb3I6ICcgKyByZXN1bHQubXNnO1xuICAgIH1cbiAgICBpZiAocmVzdWx0LmJ1ZmZlcikge1xuICAgICAgYmxvY2tzLnB1c2goe1xuICAgICAgICBvZmZzZXQ6IHBvc2l0aW9uLFxuICAgICAgICBjb21wcmVzc2VkTGVuZ3RoOiByZXN1bHQudG90YWxfaW4sXG4gICAgICAgIGJ1ZmZlcjogcmVzdWx0LmJ1ZmZlclxuICAgICAgfSk7XG4gICAgfVxuICAgIHBvc2l0aW9uICs9IHJlc3VsdC50b3RhbF9pbjtcbiAgfSB3aGlsZSAocG9zaXRpb24gPD0gbGFzdEJsb2NrU3RhcnQgJiYgcG9zaXRpb24gPCBidWZmZXIuYnl0ZUxlbmd0aCk7XG4gIHJldHVybiBibG9ja3M7XG59XG5cbi8qKlxuICogSW5mbGF0ZSBvbmUgb3IgbW9yZSBnemlwIGJsb2NrcyBpbiB0aGUgYnVmZmVyLlxuICogUmV0dXJucyB0aGUgY29uY2F0ZW5hdGlvbiBvZiBhbGwgaW5mbGF0ZWQgYmxvY2tzLlxuICogVGhpcyBtaXJyb3JzIHRoZSBiZWhhdmlvciBvZiBnemlwKDEpLlxuICovXG5mdW5jdGlvbiBpbmZsYXRlR3ppcChidWZmZXI6IEFycmF5QnVmZmVyKTogQXJyYXlCdWZmZXIge1xuICByZXR1cm4gY29uY2F0QXJyYXlCdWZmZXJzKGluZmxhdGVDb25jYXRlbmF0ZWRHemlwKGJ1ZmZlcikubWFwKHggPT4geC5idWZmZXIpKTtcbn1cblxuLy8gR2l2ZW4gJ2NocjknLCByZXR1cm4gJzknLiBHaXZlbiAnOScsIHJldHVybiAnY2hyOScuXG5mdW5jdGlvbiBhbHRDb250aWdOYW1lKGNvbnRpZzogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKGNvbnRpZy5zbGljZSgwLCAzKSA9PSAnY2hyJykge1xuICAgIHJldHVybiBjb250aWcuc2xpY2UoMyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICdjaHInICsgY29udGlnO1xuICB9XG59XG5cbi8vIEFyZSB0d28gc3RyaW5ncyBlcXVhbCBtb2R1bGUgYSAnY2hyJyBwcmVmaXg/XG4vLyBlLmcuIGlzQ2hyTWF0Y2goJzE3JywgJ2NocjE3JykgPT0gdHJ1ZVxuZnVuY3Rpb24gaXNDaHJNYXRjaChhOiBzdHJpbmcsIGI6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gYSA9PSBiIHx8ICdjaHInICsgYSA9PSBiIHx8IGEgPT0gJ2NocicgKyBiO1xufVxuXG4vKipcbiAqIFBpcGUgYWxsIHByb21pc2UgZXZlbnRzIHRocm91Z2ggYSBkZWZlcnJlZCBvYmplY3QuXG4gKiBUaGlzIGlzIHNpbWlsYXIgdG8gZGVmZXJyZWQucmVzb2x2ZShwcm9taXNlKSwgZXhjZXB0IHRoYXQgaXQgYWxsb3dzIHByb2dyZXNzXG4gKiBub3RpZmljYXRpb25zIGZyb20gdGhlIHByb21pc2UgdG8gYnViYmxlIHRocm91Z2guXG4gKi9cbmZ1bmN0aW9uIHBpcGVQcm9taXNlPFQ+KGRlZmVycmVkOiBRLkRlZmVycmVkPFQ+LCBwcm9taXNlOiBRLlByb21pc2U8VD4pIHtcbiAgcHJvbWlzZS50aGVuKGRlZmVycmVkLnJlc29sdmUsIGRlZmVycmVkLnJlamVjdCwgZGVmZXJyZWQubm90aWZ5KTtcbn1cblxuLyoqXG4gKiBTY2FsZSB0aGUgcmFuZ2UgYnkgYGZhY3RvcmAgYWJvdXQgaXRzIGNlbnRlci5cbiAqIGZhY3RvciAyLjAgd2lsbCBwcm9kdWNlIGEgcmFuZ2Ugd2l0aCB0d2ljZSB0aGUgc3BhbiwgMC41IHdpdGggaGFsZi5cbiAqIEFuIGludmFyaWFudCBpcyB0aGF0IHRoZSBjZW50ZXIgdmFsdWUgd2lsbCBiZSBpZGVudGljYWwgYmVmb3JlIGFuZCBhZnRlci5cbiAqL1xuZnVuY3Rpb24gc2NhbGVSYW5nZShyYW5nZTogSW50ZXJ2YWwsIGZhY3RvcjogbnVtYmVyKTogSW50ZXJ2YWwge1xuICB2YXIgc3BhbiA9IHJhbmdlLnN0b3AgLSByYW5nZS5zdGFydCxcbiAgICAgIGNlbnRlciA9IE1hdGguZmxvb3IoKHJhbmdlLnN0YXJ0ICsgcmFuZ2Uuc3RvcCkgLyAyKSxcbiAgICAgIG5ld1NwYW4gPSBNYXRoLnJvdW5kKGZhY3RvciAqIHNwYW4gLyAyKSAqIDIsXG4gICAgICBzdGFydCA9IGNlbnRlciAtIG5ld1NwYW4gLyAyLFxuICAgICAgc3RvcCA9IGNlbnRlciArIG5ld1NwYW4gLyAyOyAgLy8gVE9ETzogY2xhbXBcblxuICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgLy8gU2hpZnQgdG8gdGhlIHJpZ2h0IHNvIHRoYXQgdGhlIHJhbmdlIHN0YXJ0cyBhdCB6ZXJvLlxuICAgIHN0b3AgLT0gc3RhcnQ7XG4gICAgc3RhcnQgPSAwO1xuICB9XG4gIHJldHVybiBuZXcgSW50ZXJ2YWwoc3RhcnQsIHN0b3ApO1xufVxuXG4vKipcbiAqIFBhcnNlIGEgdXNlci1zcGVjaWZpZWQgcmFuZ2UgaW50byBhIHJhbmdlLlxuICogT25seSB0aGUgc3BlY2lmaWVkIHBvcnRpb25zIG9mIHRoZSByYW5nZSB3aWxsIGJlIGZpbGxlZCBvdXQgaW4gdGhlIHJldHVybmVkIG9iamVjdC5cbiAqIEZvciBleGFtcGxlOlxuICogJ2NocjE3JyAtLT4ge2NvbnRpZzonY2hyMTcnfVxuICogJzEwLTIwJyAtLT4ge3N0YXJ0OiAxMCwgc3RvcDogMjB9XG4gKiAnMTc6MTAtMjAnIC0tPiB7Y29udGlnOiAnMTcnLCBzdGFydDogMTAsIHN0b3A6IDIwfVxuICogUmV0dXJucyBudWxsIGlmIHRoZSByYW5nZSBjYW4ndCBiZSBwYXJzZWQuXG4gKi9cbmZ1bmN0aW9uIHBhcnNlUmFuZ2UocmFuZ2U6IHN0cmluZyk6ID9QYXJ0aWFsR2Vub21lUmFuZ2Uge1xuICAvLyBGaXJzdCB0cnkgJ2NvbnRpZzpzdGFydC1zdG9wJ1xuICB2YXIgbSA9IC9eKFteIDpdKyk6KFswLTksXSspLShbMC05LF0rKSQvLmV4ZWMocmFuZ2UpO1xuICBpZiAobSkge1xuICAgIHJldHVybiB7XG4gICAgICBjb250aWc6IG1bMV0sXG4gICAgICBzdGFydDogcGFyc2VOdW1iZXJXaXRoQ29tbWFzKG1bMl0pLFxuICAgICAgc3RvcDogcGFyc2VOdW1iZXJXaXRoQ29tbWFzKG1bM10pXG4gICAgfTtcbiAgfVxuICBcbiAgLy8gVGhlbiBjb250aWc6bnVtYmVyXG4gIG0gPSAvXihbXiA6XSspOihbMC05LF0rKSQvLmV4ZWMocmFuZ2UpO1xuICBpZiAobSkge1xuICAgIHJldHVybiB7XG4gICAgICBjb250aWc6IG1bMV0sXG4gICAgICBzdGFydDogcGFyc2VOdW1iZXJXaXRoQ29tbWFzKG1bMl0pLFxuICAgIH07XG4gIH1cblxuICAvLyBUaGVuICdzdGFydDpzdG9wJ1xuICBtID0gL14oWzAtOSxdKyktKFswLTksXSspJC8uZXhlYyhyYW5nZSk7XG4gIGlmIChtKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0OiBwYXJzZU51bWJlcldpdGhDb21tYXMobVsxXSksXG4gICAgICBzdG9wOiBwYXJzZU51bWJlcldpdGhDb21tYXMobVsyXSlcbiAgICB9O1xuICB9XG5cbiAgLy8gVGhlbiAnY29udGlnOicgb3Igbm9uLW51bWVyaWMgJ2NvbnRpZydcbiAgbSA9IC9eKFteIDpdKyk6JC8uZXhlYyhyYW5nZSkgfHwgL14oW14wLTldW14gOl0rKSQvLmV4ZWMocmFuZ2UpO1xuICBpZiAobSkge1xuICAgIHJldHVybiB7IGNvbnRpZzogbVsxXSB9O1xuICB9XG5cbiAgLy8gVGhlbiBwbGFpbi1vbGQgbnVtYmVycy5cbiAgbSA9IC9eKFswLTksXSspJC8uZXhlYyhyYW5nZSk7XG4gIGlmIChtKSB7XG4gICAgcmV0dXJuIHsgc3RhcnQ6IHBhcnNlTnVtYmVyV2l0aENvbW1hcyhtWzFdKSB9O1xuICB9XG5cblxuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gZm9ybWF0SW50ZXJ2YWwoaXY6IEludGVydmFsKTogc3RyaW5nIHtcbiAgcmV0dXJuIG51bWJlcldpdGhDb21tYXMoaXYuc3RhcnQpICsgJy0nICsgbnVtYmVyV2l0aENvbW1hcyhpdi5zdG9wKTtcbn1cblxuLy8gU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI5MDEyOTgvMzg4OTUxXG5mdW5jdGlvbiBudW1iZXJXaXRoQ29tbWFzKHg6IG51bWJlcik6IHN0cmluZyB7XG4gIHJldHVybiB4LnRvU3RyaW5nKCkucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZywgXCIsXCIpO1xufVxuXG5mdW5jdGlvbiBwYXJzZU51bWJlcldpdGhDb21tYXMoeDogc3RyaW5nKTogbnVtYmVyIHtcbiAgcmV0dXJuIHBhcnNlSW50KHgucmVwbGFjZSgvLC9nLCAnJyksIDEwKTtcbn1cblxuZnVuY3Rpb24gZmxhdE1hcDxULCBSPihhcnJheTogVFtdLCBmbjogKHQ6IFQpPT5SW10pOiBSW10ge1xuICByZXR1cm4gXy5mbGF0dGVuKGFycmF5Lm1hcChmbiksIHRydWUgLyogc2hhbGxvdyAqLyk7XG59XG5cbi8qKlxuICogRGV0ZXJtaW5lIHRoZSBwZXJjZW50aWxlLXRoIGVsZW1lbnQgb2YgeHMuXG4gKiBwZXJjZW50aWxlIHNob3VsZCBiZSBhbiBpbnRlZ2VyIGZyb20gMSB0byA5OS5cbiAqIFRoaXMgd2lsbCBzb3J0IHRoZSB4cy5cbiAqL1xuZnVuY3Rpb24gY29tcHV0ZVBlcmNlbnRpbGUoeHM6IG51bWJlcltdLCBwZXJjZW50aWxlOiBudW1iZXIpOiBudW1iZXIge1xuICBpZiAoeHMubGVuZ3RoID09PSAwKSByZXR1cm4gMDsgIC8vIHBsYWNlaG9sZGVyIHZhbHVlXG5cbiAgeHMuc29ydCgoYSwgYikgPT4gYSAtIGIpO1xuICB2YXIgaWR4ID0gKHhzLmxlbmd0aCAtIDEpICogcGVyY2VudGlsZSAvIDEwMCxcbiAgICAgIGxvID0gTWF0aC5mbG9vcihpZHgpLFxuICAgICAgaGkgPSBNYXRoLmNlaWwoaWR4KTtcblxuICBpZiAobG8gPT0gaGkpIHtcbiAgICByZXR1cm4geHNbbG9dO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB4c1tsb10gKiAoaWR4IC0gbG8pICsgeHNbaGldICogKGhpIC0gaWR4KTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgdHVwbGVMZXNzT3JFcXVhbCxcbiAgdHVwbGVSYW5nZU92ZXJsYXBzLFxuICBjb25jYXRBcnJheUJ1ZmZlcnMsXG4gIGluZmxhdGVDb25jYXRlbmF0ZWRHemlwLFxuICBpbmZsYXRlR3ppcCxcbiAgYWx0Q29udGlnTmFtZSxcbiAgcGlwZVByb21pc2UsXG4gIHNjYWxlUmFuZ2UsXG4gIHBhcnNlUmFuZ2UsXG4gIGZvcm1hdEludGVydmFsLFxuICBpc0Nock1hdGNoLFxuICBmbGF0TWFwLFxuICBjb21wdXRlUGVyY2VudGlsZVxufTtcbiIsIi8qKlxuICogRGF0YSBtYW5hZ2VtZW50IGZvciBQaWxldXBDb3ZlcmFnZVRyYWNrLlxuICpcbiAqIFRoaXMgY2xhc3MgdHJhY2tzIGNvdW50cyBhbmQgbWlzbWF0Y2hlcyBhdCBlYWNoIGxvY3VzLlxuICpcbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1N0cmFuZCwgQWxpZ25tZW50LCBBbGlnbm1lbnREYXRhU291cmNlfSBmcm9tICcuLi9BbGlnbm1lbnQnO1xuaW1wb3J0IHR5cGUge1R3b0JpdFNvdXJjZX0gZnJvbSAnLi4vc291cmNlcy9Ud29CaXREYXRhU291cmNlJztcbmltcG9ydCB0eXBlIHtCYXNlUGFpciwgT3BJbmZvfSBmcm9tICcuL3BpbGV1cHV0aWxzJztcbmltcG9ydCB0eXBlIENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCB0eXBlIEludGVydmFsIGZyb20gJy4uL0ludGVydmFsJztcblxuaW1wb3J0IHtnZXRPcEluZm99IGZyb20gJy4vcGlsZXVwdXRpbHMnO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzJztcblxuZXhwb3J0IHR5cGUgQmluU3VtbWFyeSA9IHtcbiAgY291bnQ6IG51bWJlcjtcbiAgLy8gVGhlc2UgcHJvcGVydGllcyB3aWxsIG9ubHkgYmUgcHJlc2VudCB3aGVuIHRoZXJlIGFyZSBtaXNtYXRjaGVzLlxuICBtaXNtYXRjaGVzPzoge1trZXk6IHN0cmluZ106IG51bWJlcn07XG4gIHJlZj86IHN0cmluZzsgIC8vIHdoYXQgZG9lcyB0aGUgcmVmZXJlbmNlIGhhdmUgaGVyZT9cbn07XG5cbi8vIFRoaXMgY2xhc3MgcHJvdmlkZXMgZGF0YSBtYW5hZ2VtZW50IGZvciB0aGUgdmlzdWFsaXphdGlvbiwgZ3JvdXBpbmcgcGFpcmVkXG4vLyByZWFkcyBhbmQgbWFuYWdpbmcgdGhlIHBpbGV1cC5cbmNsYXNzIENvdmVyYWdlQ2FjaGUge1xuICAvLyBtYXBzIGdyb3VwS2V5IHRvIFZpc3VhbEdyb3VwXG4gIHJlYWRzOiB7W2tleTogc3RyaW5nXTogQWxpZ25tZW50fTtcbiAgLy8gcmVmIC0tPiBwb3NpdGlvbiAtLT4gQmluU3VtbWFyeVxuICByZWZUb0NvdW50czoge1trZXk6IHN0cmluZ106IHtba2V5OiBudW1iZXJdOiBCaW5TdW1tYXJ5fX07XG4gIHJlZlRvTWF4Q292ZXJhZ2U6IHtba2V5OiBzdHJpbmddOiBudW1iZXJ9O1xuICByZWZlcmVuY2VTb3VyY2U6IFR3b0JpdFNvdXJjZTtcblxuICBjb25zdHJ1Y3RvcihyZWZlcmVuY2VTb3VyY2U6IFR3b0JpdFNvdXJjZSkge1xuICAgIHRoaXMucmVhZHMgPSB7fTtcbiAgICB0aGlzLnJlZlRvQ291bnRzID0ge307XG4gICAgdGhpcy5yZWZUb01heENvdmVyYWdlID0ge307XG4gICAgdGhpcy5yZWZlcmVuY2VTb3VyY2UgPSByZWZlcmVuY2VTb3VyY2U7XG4gIH1cblxuICAvLyBMb2FkIGEgbmV3IHJlYWQgaW50byB0aGUgdmlzdWFsaXphdGlvbiBjYWNoZS5cbiAgLy8gQ2FsbGluZyB0aGlzIG11bHRpcGxlIHRpbWVzIHdpdGggdGhlIHNhbWUgcmVhZCBpcyBhIG5vLW9wLlxuICBhZGRBbGlnbm1lbnQocmVhZDogQWxpZ25tZW50KSB7XG4gICAgdmFyIGtleSA9IHJlYWQuZ2V0S2V5KCk7XG4gICAgaWYgKGtleSBpbiB0aGlzLnJlYWRzKSByZXR1cm47ICAvLyB3ZSd2ZSBhbHJlYWR5IHNlZW4gdGhpcyBvbmUuXG4gICAgdGhpcy5yZWFkc1trZXldID0gcmVhZDtcblxuICAgIHZhciBvcEluZm8gPSBnZXRPcEluZm8ocmVhZCwgdGhpcy5yZWZlcmVuY2VTb3VyY2UpO1xuXG4gICAgdGhpcy5hZGRSZWFkVG9Db3ZlcmFnZShyZWFkLCBvcEluZm8pO1xuICB9XG5cbiAgLy8gVXBkYXRlcyByZWZlcmVuY2UgbWlzbWF0Y2ggaW5mb3JtYXRpb24gZm9yIHByZXZpb3VzbHktbG9hZGVkIHJlYWRzLlxuICB1cGRhdGVNaXNtYXRjaGVzKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KSB7XG4gICAgdmFyIHJlZiA9IHRoaXMuX2Nhbm9uaWNhbFJlZihyYW5nZS5jb250aWcpO1xuICAgIHRoaXMucmVmVG9Db3VudHNbcmVmXSA9IHt9OyAgLy8gVE9ETzogY291bGQgYmUgbW9yZSBlZmZpY2llbnRcbiAgICB0aGlzLnJlZlRvTWF4Q292ZXJhZ2VbcmVmXSA9IDA7XG4gICAgZm9yICh2YXIgayBpbiB0aGlzLnJlYWRzKSB7XG4gICAgICB2YXIgcmVhZCA9IHRoaXMucmVhZHNba107XG4gICAgICBpZiAocmVhZC5nZXRJbnRlcnZhbCgpLmNock9uQ29udGlnKHJhbmdlLmNvbnRpZykpIHtcbiAgICAgICAgdmFyIG9wSW5mbyA9IGdldE9wSW5mbyhyZWFkLCB0aGlzLnJlZmVyZW5jZVNvdXJjZSk7XG4gICAgICAgIHRoaXMuYWRkUmVhZFRvQ292ZXJhZ2UocmVhZCwgb3BJbmZvKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhZGRSZWFkVG9Db3ZlcmFnZShyZWFkOiBBbGlnbm1lbnQsIG9wSW5mbzogT3BJbmZvKSB7XG4gICAgLy8gQWRkIGNvdmVyYWdlL21pc21hdGNoIGluZm9ybWF0aW9uXG4gICAgdmFyIHJlZiA9IHRoaXMuX2Nhbm9uaWNhbFJlZihyZWFkLnJlZik7XG4gICAgaWYgKCEocmVmIGluIHRoaXMucmVmVG9Db3VudHMpKSB7XG4gICAgICB0aGlzLnJlZlRvQ291bnRzW3JlZl0gPSB7fTtcbiAgICAgIHRoaXMucmVmVG9NYXhDb3ZlcmFnZVtyZWZdID0gMDtcbiAgICB9XG4gICAgdmFyIGNvdW50cyA9IHRoaXMucmVmVG9Db3VudHNbcmVmXSxcbiAgICAgICAgbWF4ID0gdGhpcy5yZWZUb01heENvdmVyYWdlW3JlZl0sXG4gICAgICAgIHJhbmdlID0gcmVhZC5nZXRJbnRlcnZhbCgpLFxuICAgICAgICBzdGFydCA9IHJhbmdlLnN0YXJ0KCksXG4gICAgICAgIHN0b3AgPSByYW5nZS5zdG9wKCk7XG4gICAgZm9yICh2YXIgcG9zID0gc3RhcnQ7IHBvcyA8PSBzdG9wOyBwb3MrKykge1xuICAgICAgbGV0IGMgPSBjb3VudHNbcG9zXTtcbiAgICAgIGlmICghYykge1xuICAgICAgICBjb3VudHNbcG9zXSA9IGMgPSB7Y291bnQ6IDB9O1xuICAgICAgfVxuICAgICAgYy5jb3VudCArPSAxO1xuICAgICAgaWYgKGMuY291bnQgPiBtYXgpIG1heCA9IGMuY291bnQ7XG4gICAgfVxuICAgIGZvciAodmFyIG1tIG9mIG9wSW5mby5taXNtYXRjaGVzKSB7XG4gICAgICB2YXIgYmluID0gY291bnRzW21tLnBvc107XG4gICAgICB2YXIgbWlzbWF0Y2hlcztcbiAgICAgIGlmIChiaW4ubWlzbWF0Y2hlcykge1xuICAgICAgICBtaXNtYXRjaGVzID0gYmluLm1pc21hdGNoZXM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBtaXNtYXRjaGVzID0gYmluLm1pc21hdGNoZXMgPSB7fTtcbiAgICAgICAgYmluLnJlZiA9IHRoaXMucmVmZXJlbmNlU291cmNlLmdldFJhbmdlQXNTdHJpbmcoe1xuICAgICAgICAgIGNvbnRpZzogcmVmLCBzdGFydDogbW0ucG9zLCBzdG9wOiBtbS5wb3N9KTtcbiAgICAgIH1cbiAgICAgIGxldCBjID0gbWlzbWF0Y2hlc1ttbS5iYXNlUGFpcl0gfHwgMDtcbiAgICAgIG1pc21hdGNoZXNbbW0uYmFzZVBhaXJdID0gMSArIGM7XG4gICAgfVxuXG4gICAgdGhpcy5yZWZUb01heENvdmVyYWdlW3JlZl0gPSBtYXg7XG4gIH1cblxuICBtYXhDb3ZlcmFnZUZvclJlZihyZWY6IHN0cmluZyk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMucmVmVG9NYXhDb3ZlcmFnZVtyZWZdIHx8XG4gICAgICAgIHRoaXMucmVmVG9NYXhDb3ZlcmFnZVt1dGlscy5hbHRDb250aWdOYW1lKHJlZildIHx8XG4gICAgICAgIDA7XG4gIH1cblxuICBiaW5zRm9yUmVmKHJlZjogc3RyaW5nKToge1trZXk6IG51bWJlcl06IEJpblN1bW1hcnl9IHtcbiAgICByZXR1cm4gdGhpcy5yZWZUb0NvdW50c1tyZWZdIHx8XG4gICAgICAgIHRoaXMucmVmVG9Db3VudHNbdXRpbHMuYWx0Q29udGlnTmFtZShyZWYpXSB8fFxuICAgICAgICB7fTtcbiAgfVxuXG4gIC8vIFJldHVybnMgd2hpY2hldmVyIGZvcm0gb2YgdGhlIHJlZiAoXCJjaHIxN1wiLCBcIjE3XCIpIGhhcyBiZWVuIHNlZW4uXG4gIF9jYW5vbmljYWxSZWYocmVmOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLnJlZlRvQ291bnRzW3JlZl0pIHJldHVybiByZWY7XG4gICAgdmFyIGFsdCA9IHV0aWxzLmFsdENvbnRpZ05hbWUocmVmKTtcbiAgICBpZiAodGhpcy5yZWZUb0NvdW50c1thbHRdKSByZXR1cm4gYWx0O1xuICAgIHJldHVybiByZWY7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBDb3ZlcmFnZUNhY2hlO1xuIiwiLyoqXG4gKiBDb3ZlcmFnZSB2aXN1YWxpemF0aW9uIG9mIEFsaWdubWVudCBzb3VyY2VzLlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5pbXBvcnQgdHlwZSB7VHdvQml0U291cmNlfSBmcm9tICcuLi9zb3VyY2VzL1R3b0JpdERhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge0RhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCB0eXBlIHtTY2FsZX0gZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCB0eXBlIHtDb3ZlcmFnZURhdGFTb3VyY2V9IGZyb20gJy4uL3NvdXJjZXMvQ292ZXJhZ2VEYXRhU291cmNlJztcbmltcG9ydCB0eXBlIHtWaXpQcm9wc30gZnJvbSAnLi4vVmlzdWFsaXphdGlvbldyYXBwZXInO1xuaW1wb3J0IFJlbW90ZVJlcXVlc3QgZnJvbSAnLi4vUmVtb3RlUmVxdWVzdCc7XG5pbXBvcnQgdHlwZSB7UG9zaXRpb25Db3VudH0gZnJvbSAnLi4vc291cmNlcy9Db3ZlcmFnZURhdGFTb3VyY2UnO1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHNjYWxlIGZyb20gJy4uL3NjYWxlJztcbmltcG9ydCBzaGFsbG93RXF1YWxzIGZyb20gJ3NoYWxsb3ctZXF1YWxzJztcbmltcG9ydCBkM3V0aWxzIGZyb20gJy4vZDN1dGlscyc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBkYXRhQ2FudmFzIGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCBjYW52YXNVdGlscyBmcm9tICcuL2NhbnZhcy11dGlscyc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi4vc3R5bGUnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBUaWxlZENhbnZhcyBmcm9tICcuL1RpbGVkQ2FudmFzJztcbmltcG9ydCB0eXBlIHtTdGF0ZSwgTmV0d29ya1N0YXR1c30gZnJvbSAnLi9waWxldXB1dGlscyc7XG5cblxuY2xhc3MgQ292ZXJhZ2VUaWxlZENhbnZhcyBleHRlbmRzIFRpbGVkQ2FudmFzIHtcbiAgaGVpZ2h0OiBudW1iZXI7XG4gIG9wdGlvbnM6IE9iamVjdDtcbiAgc291cmNlOiBDb3ZlcmFnZURhdGFTb3VyY2U7XG5cbiAgY29uc3RydWN0b3Ioc291cmNlOiBDb3ZlcmFnZURhdGFTb3VyY2UsIGhlaWdodDogbnVtYmVyLCBvcHRpb25zOiBPYmplY3QpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIHRoaXMuaGVpZ2h0ID0gTWF0aC5tYXgoMSwgaGVpZ2h0KTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgaGVpZ2h0Rm9yUmVmKHJlZjogc3RyaW5nKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5oZWlnaHQ7XG4gIH1cblxuICB1cGRhdGUoaGVpZ2h0OiBudW1iZXIsIG9wdGlvbnM6IE9iamVjdCkge1xuICAgIC8vIHdvcmthcm91bmQgZm9yIGFuIGlzc3VlIGluIFBoYW50b21KUyB3aGVyZSBoZWlnaHQgYWx3YXlzIGNvbWVzIG91dCB0byB6ZXJvLlxuICAgIHRoaXMuaGVpZ2h0ID0gTWF0aC5tYXgoMSwgaGVpZ2h0KTtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICB9XG5cbiAgeVNjYWxlRm9yUmVmKHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LCByZXNvbHV0aW9uOiA/bnVtYmVyKTogKHk6IG51bWJlcikgPT4gbnVtYmVyIHtcbiAgICB2YXIgbWF4Q292ZXJhZ2UgPSB0aGlzLnNvdXJjZS5tYXhDb3ZlcmFnZShyYW5nZSwgcmVzb2x1dGlvbik7XG5cbiAgICByZXR1cm4gc2NhbGUubGluZWFyKClcbiAgICAgIC5kb21haW4oW21heENvdmVyYWdlLCAwXSlcbiAgICAgIC5yYW5nZShbc3R5bGUuQ09WRVJBR0VfUEFERElORywgdGhpcy5oZWlnaHQgLSBzdHlsZS5DT1ZFUkFHRV9QQURESU5HXSlcbiAgICAgIC5uaWNlKCk7XG4gIH1cblxuICAvLyBUaGlzIGlzIGNhbGxlZCBieSBUaWxlZENhbnZhcyBvdmVyIGFsbCB0aWxlcyBpbiBhIHJhbmdlXG4gIHJlbmRlcihjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICB4U2NhbGU6ICh4OiBudW1iZXIpPT5udW1iZXIsXG4gICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPixcbiAgICAgICAgIG9yaWdpbmFsUmFuZ2U6ID9Db250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgcmVzb2x1dGlvbjogP251bWJlcikge1xuICAgIHZhciByZWxheGVkUmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwoXG4gICAgICAgcmFuZ2UuY29udGlnLCBNYXRoLm1heCgxLCByYW5nZS5zdGFydCgpIC0gMSksIHJhbmdlLnN0b3AoKSArIDEpO1xuICAgIHZhciBiaW5zID0gdGhpcy5zb3VyY2UuZ2V0Q292ZXJhZ2VJblJhbmdlKHJlbGF4ZWRSYW5nZSwgcmVzb2x1dGlvbik7XG5cbiAgICAvLyBpZiBvcmlnaW5hbCByYW5nZSBpcyBub3Qgc2V0LCB1c2UgdGlsZWQgcmFuZ2Ugd2hpY2ggaXMgYSBzdWJzZXQgb2Ygb3JpZ2luYWxSYW5nZVxuICAgIGlmICghb3JpZ2luYWxSYW5nZSkge1xuICAgICAgb3JpZ2luYWxSYW5nZSA9IHJhbmdlO1xuICAgIH1cblxuICAgIHZhciB5U2NhbGUgPSB0aGlzLnlTY2FsZUZvclJlZihvcmlnaW5hbFJhbmdlLCByZXNvbHV0aW9uKTtcbiAgICByZW5kZXJCYXJzKGN0eCwgeFNjYWxlLCB5U2NhbGUsIHJlbGF4ZWRSYW5nZSwgYmlucywgcmVzb2x1dGlvbiwgdGhpcy5vcHRpb25zKTtcbiAgfVxufVxuXG5cbi8vIERyYXcgY292ZXJhZ2UgYmluc1xuZnVuY3Rpb24gcmVuZGVyQmFycyhjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICAgICAgICAgICAgIHhTY2FsZTogKG51bTogbnVtYmVyKSA9PiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIHlTY2FsZTogKG51bTogbnVtYmVyKSA9PiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgICAgICAgICAgICBiaW5zOiBQb3NpdGlvbkNvdW50W10sXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdXRpb246ID9udW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IE9iamVjdCkge1xuICBpZiAoXy5pc0VtcHR5KGJpbnMpKSByZXR1cm47XG5cbiAgLy8gbWFrZSBzdXJlIGJpbnMgYXJlIHNvcnRlZCBieSBwb3NpdGlvblxuICBiaW5zID0gXy5zb3J0QnkoYmlucywgeCA9PiB4LnN0YXJ0KTtcblxuICB2YXIgYmFyV2lkdGggPSB4U2NhbGUoMSkgLSB4U2NhbGUoMCk7XG4gIHZhciBzaG93UGFkZGluZyA9IChiYXJXaWR0aCA+IHN0eWxlLkNPVkVSQUdFX01JTl9CQVJfV0lEVEhfRk9SX0dBUCk7XG4gIHZhciBwYWRkaW5nID0gc2hvd1BhZGRpbmcgPyAxIDogMDtcblxuICB2YXIgYmluUG9zID0gZnVuY3Rpb24ocHM6IFBvc2l0aW9uQ291bnQpIHtcbiAgICAvLyBSb3VuZCB0byBpbnRlZ2VyIGNvb3JkaW5hdGVzIGZvciBjcmlzcCBsaW5lcywgd2l0aG91dCBhbGlhc2luZy5cbiAgICB2YXIgYmFyWDEgPSBNYXRoLnJvdW5kKHhTY2FsZShwcy5zdGFydCkpLFxuICAgICAgICBiYXJYMiA9IE1hdGgubWF4KGJhclgxICsgMiwgTWF0aC5yb3VuZCh4U2NhbGUocHMuZW5kKSkgLSBwYWRkaW5nKSwgIC8vIG1ha2Ugc3VyZSBiYXIgaXMgPj0gMXB4XG4gICAgICAgIGJhclkgPSBNYXRoLnJvdW5kKHlTY2FsZShwcy5jb3VudCkpO1xuICAgIHJldHVybiB7YmFyWDEsIGJhclgyLCBiYXJZfTtcbiAgfTtcblxuICB2YXIgdkJhc2VQb3NZID0geVNjYWxlKDApOyAgLy8gdGhlIHZlcnkgYm90dG9tIG9mIHRoZSBjYW52YXNcblxuICAvLyBnbyB0byB0aGUgZmlyc3QgYmluIGluIGRhdGFzZXQgKHNwZWNpZmllZCBieSB0aGUgc21hbGxlc3Qgc3RhcnQgcG9zaXRpb24pXG4gIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5DT1ZFUkFHRV9CSU5fQ09MT1I7XG4gIGN0eC5iZWdpblBhdGgoKTtcblxuICBiaW5zLmZvckVhY2goYmluID0+IHtcbiAgICBjdHgucHVzaE9iamVjdChiaW4pO1xuICAgIGxldCB7YmFyWDEsIGJhclgyLCBiYXJZfSA9IGJpblBvcyhiaW4pO1xuICAgIGN0eC5tb3ZlVG8oYmFyWDEsIHZCYXNlUG9zWSk7ICAvLyBzdGFydCBhdCBib3R0b20gbGVmdCBvZiBiYXJcbiAgICBjdHgubGluZVRvKGJhclgxLCBiYXJZKTsgICAgICAgLy8gbGVmdCBlZGdlIG9mIGJhclxuICAgIGN0eC5saW5lVG8oYmFyWDIsIGJhclkpOyAgICAgICAvLyB0b3Agb2YgYmFyXG4gICAgY3R4LmxpbmVUbyhiYXJYMiwgdkJhc2VQb3NZKTsgIC8vIHJpZ2h0IGVkZ2Ugb2YgdGhlIHJpZ2h0IGJhci5cblxuICAgIGN0eC5wb3BPYmplY3QoKTtcbiAgfSk7XG4gIGN0eC5jbG9zZVBhdGgoKTtcbiAgY3R4LmZpbGwoKTtcbn1cblxuY2xhc3MgQ292ZXJhZ2VUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHByb3BzOiBWaXpQcm9wcyAmIHsgc291cmNlOiBDb3ZlcmFnZURhdGFTb3VyY2UgfTtcbiAgc3RhdGU6IFN0YXRlO1xuICBzdGF0aWMgZGVmYXVsdE9wdGlvbnM6IE9iamVjdDtcbiAgdGlsZXM6IENvdmVyYWdlVGlsZWRDYW52YXM7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFZpelByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBuZXR3b3JrU3RhdHVzOiBudWxsXG4gICAgfTtcbiAgfVxuXG4gIHJlbmRlcigpOiBhbnkge1xuICAgIC8vIFRoZXNlIHN0eWxlcyBhbGxvdyB2ZXJ0aWNhbCBzY3JvbGxpbmcgdG8gc2VlIHRoZSBmdWxsIHBpbGV1cC5cbiAgICAvLyBBZGRpbmcgYSB2ZXJ0aWNhbCBzY3JvbGxiYXIgc2hyaW5rcyB0aGUgdmlzaWJsZSBhcmVhLCBidXQgd2UgaGF2ZSB0byBhY3RcbiAgICAvLyBhcyB0aG91Z2ggaXQgZG9lc24ndCwgc2luY2UgYWRqdXN0aW5nIHRoZSBzY2FsZSB3b3VsZCBwdXQgaXQgb3V0IG9mIHN5bmNcbiAgICAvLyB3aXRoIG90aGVyIHRyYWNrcy5cbiAgICB2YXIgY29udGFpbmVyU3R5bGVzID0ge1xuICAgICAgJ2hlaWdodCc6ICcxMDAlJ1xuICAgIH07XG4gICAgdmFyIHN0YXR1c0VsID0gbnVsbCxcbiAgICAgICAgbmV0d29ya1N0YXR1cyA9IHRoaXMuc3RhdGUubmV0d29ya1N0YXR1cztcbiAgICBpZiAobmV0d29ya1N0YXR1cykge1xuICAgICAgc3RhdHVzRWwgPSAoXG4gICAgICAgIDxkaXYgcmVmPSdzdGF0dXMnIGNsYXNzTmFtZT0nbmV0d29yay1zdGF0dXMnPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSduZXR3b3JrLXN0YXR1cy1tZXNzYWdlJz5cbiAgICAgICAgICAgIExvYWRpbmcgY292ZXJhZ2XigKZcbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICApO1xuICAgIH1cblxuICAgIHZhciByYW5nZUxlbmd0aCA9IHRoaXMucHJvcHMucmFuZ2Uuc3RvcCAtIHRoaXMucHJvcHMucmFuZ2Uuc3RhcnQ7XG4gICAgLy8gSWYgcmFuZ2UgaXMgdG9vIGxhcmdlLCBkbyBub3QgcmVuZGVyICdjYW52YXMnXG4gICAgaWYgKHJhbmdlTGVuZ3RoID4gUmVtb3RlUmVxdWVzdC5NT05TVEVSX1JFUVVFU1QpIHtcbiAgICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NlbnRlcic+XG4gICAgICAgICAgICAgIFpvb20gaW4gdG8gc2VlIGNvdmVyYWdlXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxjYW52YXMgb25DbGljaz17dGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpfSAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAge3N0YXR1c0VsfVxuICAgICAgICAgIDxkaXYgcmVmPSdjb250YWluZXInIHN0eWxlPXtjb250YWluZXJTdHlsZXN9PlxuICAgICAgICAgICAgPGNhbnZhcyByZWY9J2NhbnZhcycgb25DbGljaz17dGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpfSAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgZ2V0U2NhbGUoKTogU2NhbGUge1xuICAgIHJldHVybiBkM3V0aWxzLmdldFRyYWNrU2NhbGUodGhpcy5wcm9wcy5yYW5nZSwgdGhpcy5wcm9wcy53aWR0aCk7XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnRpbGVzID0gbmV3IENvdmVyYWdlVGlsZWRDYW52YXModGhpcy5wcm9wcy5zb3VyY2UsIHRoaXMucHJvcHMuaGVpZ2h0LCB0aGlzLnByb3BzLm9wdGlvbnMpO1xuXG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ld2RhdGEnLCByYW5nZSA9PiB7XG4gICAgICB2YXIgb2xkTWF4ID0gdGhpcy5wcm9wcy5zb3VyY2UubWF4Q292ZXJhZ2UocmFuZ2UpO1xuICAgICAgdGhpcy5wcm9wcy5zb3VyY2UuZ2V0Q292ZXJhZ2VJblJhbmdlKHJhbmdlKTtcbiAgICAgIHZhciBuZXdNYXggPSB0aGlzLnByb3BzLnNvdXJjZS5tYXhDb3ZlcmFnZShyYW5nZSk7XG5cbiAgICAgIGlmIChvbGRNYXggIT0gbmV3TWF4KSB7XG4gICAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZUFsbCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlUmFuZ2UocmFuZ2UpO1xuICAgICAgfVxuICAgICAgdGhpcy52aXN1YWxpemVDb3ZlcmFnZSgpO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXdkYXRhJywgcmFuZ2UgPT4ge1xuICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlUmFuZ2UocmFuZ2UpO1xuICAgICAgdGhpcy52aXN1YWxpemVDb3ZlcmFnZSgpO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXR3b3JrcHJvZ3Jlc3MnLCBlID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe25ldHdvcmtTdGF0dXM6IGV9KTtcbiAgICB9KTtcbiAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV0d29ya2RvbmUnLCBlID0+IHtcbiAgICAgIHRoaXMuc2V0U3RhdGUoe25ldHdvcmtTdGF0dXM6IG51bGx9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IGFueSwgcHJldlN0YXRlOiBhbnkpIHtcbiAgICBpZiAoIXNoYWxsb3dFcXVhbHModGhpcy5wcm9wcywgcHJldlByb3BzKSB8fFxuICAgICAgICAhc2hhbGxvd0VxdWFscyh0aGlzLnN0YXRlLCBwcmV2U3RhdGUpKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5oZWlnaHQgIT0gcHJldlByb3BzLmhlaWdodCB8fFxuICAgICAgICAgIHRoaXMucHJvcHMub3B0aW9ucyAhPSBwcmV2UHJvcHMub3B0aW9ucykge1xuICAgICAgICB0aGlzLnRpbGVzLnVwZGF0ZSh0aGlzLnByb3BzLmhlaWdodCwgdGhpcy5wcm9wcy5vcHRpb25zKTtcbiAgICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlQWxsKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnZpc3VhbGl6ZUNvdmVyYWdlKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0Q29udGV4dCgpOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQge1xuICAgIHZhciBjYW52YXMgPSAodGhpcy5yZWZzLmNhbnZhcyA6IEhUTUxDYW52YXNFbGVtZW50KTtcbiAgICAvLyBUaGUgdHlwZWNhc3QgdGhyb3VnaCBgYW55YCBpcyBiZWNhdXNlIGdldENvbnRleHQgY291bGQgcmV0dXJuIGEgV2ViR0wgY29udGV4dC5cbiAgICB2YXIgY3R4ID0gKChjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSA6IGFueSkgOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpO1xuICAgIHJldHVybiBjdHg7XG4gIH1cblxuICAvLyBEcmF3IHRocmVlIHRpY2tzIG9uIHRoZSBsZWZ0IHRvIHNldCB0aGUgc2NhbGUgZm9yIHRoZSB1c2VyXG4gIHJlbmRlclRpY2tzKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgeVNjYWxlOiAobnVtOiBudW1iZXIpPT5udW1iZXIpIHtcbiAgICB2YXIgYXhpc01heCA9IHlTY2FsZS5kb21haW4oKVswXTtcbiAgICBbMCwgTWF0aC5yb3VuZChheGlzTWF4IC8gMiksIGF4aXNNYXhdLmZvckVhY2godGljayA9PiB7XG4gICAgICAvLyBEcmF3IGEgbGluZSBpbmRpY2F0aW5nIHRoZSB0aWNrXG4gICAgICBjdHgucHVzaE9iamVjdCh7dmFsdWU6IHRpY2ssIHR5cGU6ICd0aWNrJ30pO1xuICAgICAgdmFyIHRpY2tQb3NZID0gTWF0aC5yb3VuZCh5U2NhbGUodGljaykpO1xuICAgICAgY3R4LnN0cm9rZVN0eWxlID0gc3R5bGUuQ09WRVJBR0VfRk9OVF9DT0xPUjtcbiAgICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgMCwgdGlja1Bvc1ksIHN0eWxlLkNPVkVSQUdFX1RJQ0tfTEVOR1RILCB0aWNrUG9zWSk7XG4gICAgICBjdHgucG9wT2JqZWN0KCk7XG5cbiAgICAgIGlmICh0aWNrID4gMCkge1xuICAgICAgICAgIHZhciB0aWNrTGFiZWwgPSB0aWNrICsgJ1gnO1xuICAgICAgICAgIGN0eC5wdXNoT2JqZWN0KHt2YWx1ZTogdGljaywgbGFiZWw6IHRpY2tMYWJlbCwgdHlwZTogJ2xhYmVsJ30pO1xuICAgICAgICAgIC8vIE5vdyBwcmludCB0aGUgY292ZXJhZ2UgaW5mb3JtYXRpb25cbiAgICAgICAgICBjdHguZm9udCA9IHN0eWxlLkNPVkVSQUdFX0ZPTlRfU1RZTEU7XG4gICAgICAgICAgdmFyIHRleHRQb3NYID0gc3R5bGUuQ09WRVJBR0VfVElDS19MRU5HVEggKyBzdHlsZS5DT1ZFUkFHRV9URVhUX1BBRERJTkcsXG4gICAgICAgICAgICAgIHRleHRQb3NZID0gdGlja1Bvc1kgKyBzdHlsZS5DT1ZFUkFHRV9URVhUX1lfT0ZGU0VUO1xuICAgICAgICAgIC8vIFRoZSBzdHJva2UgY3JlYXRlcyBhIGJvcmRlciBhcm91bmQgdGhlIHRleHQgdG8gbWFrZSBpdCBsZWdpYmxlIG92ZXIgdGhlIGJhcnMuXG4gICAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gJ3doaXRlJztcbiAgICAgICAgICBjdHgubGluZVdpZHRoID0gMjtcbiAgICAgICAgICBjdHguc3Ryb2tlVGV4dCh0aWNrTGFiZWwsIHRleHRQb3NYLCB0ZXh0UG9zWSk7XG4gICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7XG4gICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHN0eWxlLkNPVkVSQUdFX0ZPTlRfQ09MT1I7XG4gICAgICAgICAgY3R4LmZpbGxUZXh0KHRpY2tMYWJlbCwgdGV4dFBvc1gsIHRleHRQb3NZKTtcbiAgICAgICAgICBjdHgucG9wT2JqZWN0KCk7XG4gICAgICB9XG5cbiAgICB9KTtcbiAgfVxuXG4gIHZpc3VhbGl6ZUNvdmVyYWdlKCkge1xuICAgIHZhciBjYW52YXMgPSAodGhpcy5yZWZzLmNhbnZhcyA6IEhUTUxDYW52YXNFbGVtZW50KSxcbiAgICAgICAgd2lkdGggPSB0aGlzLnByb3BzLndpZHRoLFxuICAgICAgICBoZWlnaHQgPSB0aGlzLnByb3BzLmhlaWdodCxcbiAgICAgICAgcmFuZ2UgPSBDb250aWdJbnRlcnZhbC5mcm9tR2Vub21lUmFuZ2UodGhpcy5wcm9wcy5yYW5nZSk7XG5cbiAgICAvLyBIb2xkIG9mZiB1bnRpbCBoZWlnaHQgJiB3aWR0aCBhcmUga25vd24uXG4gICAgaWYgKHdpZHRoID09PSAwIHx8IHR5cGVvZiBjYW52YXMgPT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcbiAgICBkM3V0aWxzLnNpemVDYW52YXMoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgIHZhciBjdHggPSBkYXRhQ2FudmFzLmdldERhdGFDb250ZXh0KHRoaXMuZ2V0Q29udGV4dCgpKTtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5yZXNldCgpO1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgdmFyIHlTY2FsZSA9IHRoaXMudGlsZXMueVNjYWxlRm9yUmVmKHJhbmdlKTtcblxuICAgIHRoaXMudGlsZXMucmVuZGVyVG9TY3JlZW4oY3R4LCByYW5nZSwgdGhpcy5nZXRTY2FsZSgpKTtcbiAgICB0aGlzLnJlbmRlclRpY2tzKGN0eCwgeVNjYWxlKTtcblxuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cblxuICBoYW5kbGVDbGljayhyZWFjdEV2ZW50OiBhbnkpIHtcbiAgICB2YXIgZXYgPSByZWFjdEV2ZW50Lm5hdGl2ZUV2ZW50LFxuICAgICAgICB4ID0gZXYub2Zmc2V0WDtcblxuICAgIC8vIEl0J3Mgc2ltcGxlIHRvIGZpZ3VyZSBvdXQgd2hpY2ggcG9zaXRpb24gd2FzIGNsaWNrZWQgdXNpbmcgdGhlIHgtc2NhbGUuXG4gICAgLy8gTm8gbmVlZCB0byByZW5kZXIgdGhlIHNjZW5lIHRvIGRldGVybWluZSB3aGF0IHdhcyBjbGlja2VkLlxuICAgIHZhciByYW5nZSA9IENvbnRpZ0ludGVydmFsLmZyb21HZW5vbWVSYW5nZSh0aGlzLnByb3BzLnJhbmdlKSxcbiAgICAgICAgeFNjYWxlID0gdGhpcy5nZXRTY2FsZSgpLFxuICAgICAgICBiaW5zID0gdGhpcy5wcm9wcy5zb3VyY2UuZ2V0Q292ZXJhZ2VJblJhbmdlKHJhbmdlKSxcbiAgICAgICAgcG9zID0gTWF0aC5mbG9vcih4U2NhbGUuaW52ZXJ0KHgpKSAtIDEsXG4gICAgICAgIGJpbiA9IGJpbnNbcG9zXTtcblxuICAgIHZhciBhbGVydCA9IHdpbmRvdy5hbGVydCB8fCBjb25zb2xlLmxvZztcbiAgICBpZiAoYmluKSB7XG4gICAgICAvLyBDb25zdHJ1Y3QgYSBKU09OIG9iamVjdCB0byBzaG93IHRoZSB1c2VyLlxuICAgICAgdmFyIG1lc3NhZ2VPYmplY3QgPSBfLmV4dGVuZChcbiAgICAgICAge1xuICAgICAgICAgICdwb3NpdGlvbic6IHJhbmdlLmNvbnRpZyArICc6JyArICgxICsgcG9zKSxcbiAgICAgICAgICAncmVhZCBkZXB0aCc6IGJpbi5jb3VudFxuICAgICAgICB9KTtcbiAgICAgIGFsZXJ0KEpTT04uc3RyaW5naWZ5KG1lc3NhZ2VPYmplY3QsIG51bGwsICcgICcpKTtcbiAgICB9XG4gIH1cbn1cblxuQ292ZXJhZ2VUcmFjay5kaXNwbGF5TmFtZSA9ICdjb3ZlcmFnZSc7XG5cbm1vZHVsZS5leHBvcnRzID0gQ292ZXJhZ2VUcmFjaztcbiIsIi8qKlxuICogSW5kaXZpZHVhbCBiYXNlIHBhaXJzIGFyZSByZW5kZXJlZCBkaWZmZXJlbnRseSBkZXBlbmRpbmcgb24gdGhlIHNjYWxlLlxuICogVGhpcyBlbnVtICYgYXNzb2NpYXRlZCBmdW5jdGlvbnMgaGVscCB0cmFjayB0aGVzZSB0cmFuc2l0aW9ucy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxudmFyIERpc3BsYXlNb2RlID0ge1xuICBMT09TRTogMSwgICAvLyBMb3RzIG9mIHNwYWNlIC0tIGEgYmlnIGZvbnQgaXMgT0suXG4gIFRJR0hUOiAyLCAgIC8vIExldHRlcnMgbmVlZCB0byBiZSBzaHJ1bmsgdG8gZml0LlxuICBCTE9DS1M6IDMsICAvLyBDaGFuZ2UgZnJvbSBsZXR0ZXJzIHRvIGJsb2NrcyBvZiBjb2xvclxuICBISURERU46IDQsXG5cbiAgZ2V0RGlzcGxheU1vZGUocHhQZXJMZXR0ZXI6IG51bWJlcik6IG51bWJlciB7XG4gICAgaWYgKHB4UGVyTGV0dGVyID49IDI1KSB7XG4gICAgICByZXR1cm4gRGlzcGxheU1vZGUuTE9PU0U7XG4gICAgfSBlbHNlIGlmIChweFBlckxldHRlciA+PSAxMCkge1xuICAgICAgcmV0dXJuIERpc3BsYXlNb2RlLlRJR0hUO1xuICAgIH0gZWxzZSBpZiAocHhQZXJMZXR0ZXIgPj0gMSkge1xuICAgICAgcmV0dXJuIERpc3BsYXlNb2RlLkJMT0NLUztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIERpc3BsYXlNb2RlLkhJRERFTjtcbiAgICB9XG4gIH0sXG5cbiAgaXNUZXh0KG1vZGU6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiAobW9kZSA9PSBEaXNwbGF5TW9kZS5MT09TRSB8fCBtb2RlID09IERpc3BsYXlNb2RlLlRJR0hUKTtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSBEaXNwbGF5TW9kZTtcbiIsIi8qKlxuICogVmlzdWFsaXphdGlvbiBvZiBmZWF0dXJlcywgaW5jbHVkaW5nIGV4b25zIGFuZCBjb2RpbmcgcmVnaW9ucy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge0ZlYXR1cmUsIEZlYXR1cmVEYXRhU291cmNlfSBmcm9tICcuLi9zb3VyY2VzL0ZlYXR1cmVEYXRhU291cmNlJztcbmltcG9ydCB0eXBlIHtEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBmcm9tICdkYXRhLWNhbnZhcyc7XG5cbmltcG9ydCB0eXBlIHtWaXpQcm9wc30gZnJvbSAnLi4vVmlzdWFsaXphdGlvbldyYXBwZXInO1xuaW1wb3J0IHR5cGUge1NjYWxlfSBmcm9tICcuL2QzdXRpbHMnO1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHNoYWxsb3dFcXVhbHMgZnJvbSAnc2hhbGxvdy1lcXVhbHMnO1xuaW1wb3J0IF8gZnJvbSAndW5kZXJzY29yZSc7XG5cbmltcG9ydCBkM3V0aWxzIGZyb20gJy4vZDN1dGlscyc7XG5pbXBvcnQgUmVtb3RlUmVxdWVzdCBmcm9tICcuLi9SZW1vdGVSZXF1ZXN0JztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgY2FudmFzVXRpbHMgZnJvbSAnLi9jYW52YXMtdXRpbHMnO1xuaW1wb3J0IFRpbGVkQ2FudmFzIGZyb20gJy4vVGlsZWRDYW52YXMnO1xuaW1wb3J0IGRhdGFDYW52YXMgZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IHN0eWxlIGZyb20gJy4uL3N0eWxlJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscyc7XG5pbXBvcnQgdHlwZSB7U3RhdGUsIE5ldHdvcmtTdGF0dXN9IGZyb20gJy4vcGlsZXVwdXRpbHMnO1xuXG5jbGFzcyBGZWF0dXJlVGlsZWRDYW52YXMgZXh0ZW5kcyBUaWxlZENhbnZhcyB7XG4gIG9wdGlvbnM6IE9iamVjdDtcbiAgc291cmNlOiBGZWF0dXJlRGF0YVNvdXJjZTtcblxuICBjb25zdHJ1Y3Rvcihzb3VyY2U6IEZlYXR1cmVEYXRhU291cmNlLCBvcHRpb25zOiBPYmplY3QpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICB1cGRhdGUobmV3T3B0aW9uczogT2JqZWN0KSB7XG4gICAgdGhpcy5vcHRpb25zID0gbmV3T3B0aW9ucztcbiAgfVxuXG4gIC8vIFRPRE86IGNhbiB1cGRhdGUgdG8gaGFuZGxlIG92ZXJsYXBwaW5nIGZlYXR1cmVzXG4gIGhlaWdodEZvclJlZihyZWY6IHN0cmluZyk6IG51bWJlciB7XG4gICAgcmV0dXJuIHN0eWxlLlZBUklBTlRfSEVJR0hUO1xuICB9XG5cbiAgcmVuZGVyKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgIHNjYWxlOiAoeDogbnVtYmVyKT0+bnVtYmVyLFxuICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICBvcmlnaW5hbFJhbmdlOiA/Q29udGlnSW50ZXJ2YWw8c3RyaW5nPixcbiAgICAgICAgIHJlc29sdXRpb246ID9udW1iZXIpIHtcbiAgICB2YXIgcmVsYXhlZFJhbmdlID1cbiAgICAgICAgbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQoKSAtIDEsIHJhbmdlLnN0b3AoKSArIDEpO1xuICAgIHZhciB2RmVhdHVyZXMgPSB0aGlzLnNvdXJjZS5nZXRGZWF0dXJlc0luUmFuZ2UocmVsYXhlZFJhbmdlLCByZXNvbHV0aW9uKTtcbiAgICByZW5kZXJGZWF0dXJlcyhjdHgsIHNjYWxlLCByZWxheGVkUmFuZ2UsIHZGZWF0dXJlcyk7XG4gIH1cbn1cblxuLy8gRHJhdyBmZWF0dXJlc1xuZnVuY3Rpb24gcmVuZGVyRmVhdHVyZXMoY3R4OiBEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgICAgICAgICAgICAgICAgICBzY2FsZTogKG51bTogbnVtYmVyKSA9PiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlczogRmVhdHVyZVtdKSB7XG5cbiAgICBjdHguZm9udCA9IGAke3N0eWxlLkdFTkVfRk9OVF9TSVpFfXB4ICR7c3R5bGUuR0VORV9GT05UfWA7XG4gICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xuXG4gICAgZmVhdHVyZXMuZm9yRWFjaChmZWF0dXJlID0+IHtcbiAgICAgIHZhciBwb3NpdGlvbiA9IG5ldyBDb250aWdJbnRlcnZhbChmZWF0dXJlLmNvbnRpZywgZmVhdHVyZS5zdGFydCwgZmVhdHVyZS5zdG9wKTtcbiAgICAgIGlmICghcG9zaXRpb24uY2hySW50ZXJzZWN0cyhyYW5nZSkpIHJldHVybjtcbiAgICAgIGN0eC5wdXNoT2JqZWN0KGZlYXR1cmUpO1xuICAgICAgY3R4LmxpbmVXaWR0aCA9IDE7XG4gICAgICBjdHguZmlsbFN0eWxlID0gJ2JsYWNrJztcblxuICAgICAgdmFyIHggPSBNYXRoLnJvdW5kKHNjYWxlKGZlYXR1cmUuc3RhcnQpKTtcbiAgICAgIHZhciB3aWR0aCA9IE1hdGguY2VpbChzY2FsZShmZWF0dXJlLnN0b3ApIC0gc2NhbGUoZmVhdHVyZS5zdGFydCkpO1xuICAgICAgY3R4LmZpbGxSZWN0KHggLSAwLjUsIDAsIHdpZHRoLCBzdHlsZS5WQVJJQU5UX0hFSUdIVCk7XG4gICAgICBjdHgucG9wT2JqZWN0KCk7XG4gICAgfSk7XG59XG5cbmNsYXNzIEZlYXR1cmVUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHByb3BzOiBWaXpQcm9wcyAmIHsgc291cmNlOiBGZWF0dXJlRGF0YVNvdXJjZSB9O1xuICBzdGF0ZTogU3RhdGU7XG4gIHRpbGVzOiBGZWF0dXJlVGlsZWRDYW52YXM7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFZpelByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBuZXR3b3JrU3RhdHVzOiBudWxsXG4gICAgfTtcbiAgfVxuXG4gIHJlbmRlcigpOiBhbnkge1xuICAgIHZhciBzdGF0dXNFbCA9IG51bGwsXG4gICAgICAgIG5ldHdvcmtTdGF0dXMgPSB0aGlzLnN0YXRlLm5ldHdvcmtTdGF0dXM7XG4gICAgaWYgKG5ldHdvcmtTdGF0dXMpIHtcbiAgICAgIHN0YXR1c0VsID0gKFxuICAgICAgICA8ZGl2IHJlZj0nc3RhdHVzJyBjbGFzc05hbWU9J25ldHdvcmstc3RhdHVzLXNtYWxsJz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbmV0d29yay1zdGF0dXMtbWVzc2FnZS1zbWFsbCc+XG4gICAgICAgICAgICBMb2FkaW5nIGZlYXR1cmVz4oCmXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG4gICAgdmFyIHJhbmdlTGVuZ3RoID0gdGhpcy5wcm9wcy5yYW5nZS5zdG9wIC0gdGhpcy5wcm9wcy5yYW5nZS5zdGFydDtcbiAgICAvLyBJZiByYW5nZSBpcyB0b28gbGFyZ2UsIGRvIG5vdCByZW5kZXIgJ2NhbnZhcydcbiAgICBpZiAocmFuZ2VMZW5ndGggPiBSZW1vdGVSZXF1ZXN0Lk1PTlNURVJfUkVRVUVTVCkge1xuICAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nY2VudGVyJz5cbiAgICAgICAgICAgICAgWm9vbSBpbiB0byBzZWUgZmVhdHVyZXNcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGNhbnZhcyBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyl9IC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICB7c3RhdHVzRWx9XG4gICAgICAgICAgPGRpdiByZWY9J2NvbnRhaW5lcic+XG4gICAgICAgICAgICA8Y2FudmFzIHJlZj0nY2FudmFzJyBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyl9IC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnRpbGVzID0gbmV3IEZlYXR1cmVUaWxlZENhbnZhcyh0aGlzLnByb3BzLnNvdXJjZSwgdGhpcy5wcm9wcy5vcHRpb25zKTtcblxuICAgIC8vIFZpc3VhbGl6ZSBuZXcgcmVmZXJlbmNlIGRhdGEgYXMgaXQgY29tZXMgaW4gZnJvbSB0aGUgbmV0d29yay5cbiAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV3ZGF0YScsIChyYW5nZSkgPT4ge1xuICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlUmFuZ2UocmFuZ2UpO1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ldHdvcmtwcm9ncmVzcycsIGUgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7bmV0d29ya1N0YXR1czogZX0pO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXR3b3JrZG9uZScsIGUgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7bmV0d29ya1N0YXR1czogbnVsbH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gIH1cblxuICBnZXRTY2FsZSgpOiBTY2FsZSB7XG4gICAgcmV0dXJuIGQzdXRpbHMuZ2V0VHJhY2tTY2FsZSh0aGlzLnByb3BzLnJhbmdlLCB0aGlzLnByb3BzLndpZHRoKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IGFueSwgcHJldlN0YXRlOiBhbnkpIHtcbiAgICBpZiAoIXNoYWxsb3dFcXVhbHModGhpcy5wcm9wcywgcHJldlByb3BzKSB8fFxuICAgICAgICAhc2hhbGxvd0VxdWFscyh0aGlzLnN0YXRlLCBwcmV2U3RhdGUpKSB7XG4gICAgICAgIHRoaXMudGlsZXMudXBkYXRlKHRoaXMucHJvcHMub3B0aW9ucyk7XG4gICAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZUFsbCgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVWaXN1YWxpemF0aW9uKCkge1xuICAgIHZhciBjYW52YXMgPSAodGhpcy5yZWZzLmNhbnZhcyA6IEhUTUxDYW52YXNFbGVtZW50KSxcbiAgICAgICAge3dpZHRoLCBoZWlnaHR9ID0gdGhpcy5wcm9wcyxcbiAgICAgICAgZ2Vub21lUmFuZ2UgPSB0aGlzLnByb3BzLnJhbmdlO1xuXG4gICAgdmFyIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKGdlbm9tZVJhbmdlLmNvbnRpZywgZ2Vub21lUmFuZ2Uuc3RhcnQsIGdlbm9tZVJhbmdlLnN0b3ApO1xuXG4gICAgLy8gSG9sZCBvZmYgdW50aWwgaGVpZ2h0ICYgd2lkdGggYXJlIGtub3duLlxuICAgIGlmICh3aWR0aCA9PT0gMCB8fCB0eXBlb2YgY2FudmFzID09ICd1bmRlZmluZWQnKSByZXR1cm47XG4gICAgZDN1dGlscy5zaXplQ2FudmFzKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG5cbiAgICB2YXIgY3R4ID0gZGF0YUNhbnZhcy5nZXREYXRhQ29udGV4dChjYW52YXNVdGlscy5nZXRDb250ZXh0KGNhbnZhcykpO1xuICAgIGN0eC5yZXNldCgpO1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgdGhpcy50aWxlcy5yZW5kZXJUb1NjcmVlbihjdHgsIHJhbmdlLCB0aGlzLmdldFNjYWxlKCkpO1xuICAgIGN0eC5yZXN0b3JlKCk7XG5cbiAgfVxuXG4gIGhhbmRsZUNsaWNrKHJlYWN0RXZlbnQ6IGFueSkge1xuICAgIHZhciBldiA9IHJlYWN0RXZlbnQubmF0aXZlRXZlbnQsXG4gICAgICAgIHggPSBldi5vZmZzZXRYO1xuXG4gICAgdmFyIGdlbm9tZVJhbmdlID0gdGhpcy5wcm9wcy5yYW5nZSxcbiAgICAgICAgLy8gYWxsb3cgc29tZSBidWZmZXJpbmcgc28gY2xpY2sgaXNuJ3Qgc28gc2Vuc2l0aXZlXG4gICAgICAgIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKGdlbm9tZVJhbmdlLmNvbnRpZywgZ2Vub21lUmFuZ2Uuc3RhcnQtMSwgZ2Vub21lUmFuZ2Uuc3RvcCsxKSxcbiAgICAgICAgc2NhbGUgPSB0aGlzLmdldFNjYWxlKCksXG4gICAgICAgIC8vIGxlYXZlIHBhZGRpbmcgb2YgMnB4IHRvIHJlZHVjZSBjbGljayBzcGVjaWZpY2l0eVxuICAgICAgICBjbGlja1N0YXJ0ID0gTWF0aC5mbG9vcihzY2FsZS5pbnZlcnQoeCkpIC0gMixcbiAgICAgICAgY2xpY2tFbmQgPSBjbGlja1N0YXJ0ICsgMixcbiAgICAgICAgLy8gSWYgY2xpY2stdHJhY2tpbmcgZ2V0cyBzbG93LCB0aGlzIHJhbmdlIGNvdWxkIGJlIG5hcnJvd2VkIHRvIG9uZVxuICAgICAgICAvLyBjbG9zZXIgdG8gdGhlIGNsaWNrIGNvb3JkaW5hdGUsIHJhdGhlciB0aGFuIHRoZSB3aG9sZSB2aXNpYmxlIHJhbmdlLlxuICAgICAgICB2RmVhdHVyZXMgPSB0aGlzLnByb3BzLnNvdXJjZS5nZXRGZWF0dXJlc0luUmFuZ2UocmFuZ2UpO1xuICAgIHZhciBmZWF0dXJlID0gXy5maW5kKHZGZWF0dXJlcywgZiA9PiB1dGlscy50dXBsZVJhbmdlT3ZlcmxhcHMoW1tmLnN0YXJ0XSwgW2Yuc3RvcF1dLCBbW2NsaWNrU3RhcnRdLCBbY2xpY2tFbmRdXSkpO1xuICAgIHZhciBhbGVydCA9IHdpbmRvdy5hbGVydCB8fCBjb25zb2xlLmxvZztcbiAgICBpZiAoZmVhdHVyZSkge1xuICAgICAgLy8gQ29uc3RydWN0IGEgSlNPTiBvYmplY3QgdG8gc2hvdyB0aGUgdXNlci5cbiAgICAgIHZhciBtZXNzYWdlT2JqZWN0ID0gXy5leHRlbmQoXG4gICAgICAgIHtcbiAgICAgICAgICAnaWQnOiBmZWF0dXJlLmlkLFxuICAgICAgICAgICdyYW5nZSc6IGAke2ZlYXR1cmUuY29udGlnfToke2ZlYXR1cmUuc3RhcnR9LSR7ZmVhdHVyZS5zdG9wfWAsXG4gICAgICAgICAgJ3Njb3JlJzogZmVhdHVyZS5zY29yZVxuICAgICAgICB9KTtcbiAgICAgIGFsZXJ0KEpTT04uc3RyaW5naWZ5KG1lc3NhZ2VPYmplY3QsIG51bGwsICcgICcpKTtcbiAgICB9XG4gIH1cbn1cblxuRmVhdHVyZVRyYWNrLmRpc3BsYXlOYW1lID0gJ2ZlYXR1cmVzJztcblxubW9kdWxlLmV4cG9ydHMgPSBGZWF0dXJlVHJhY2s7XG4iLCIvKipcbiAqIFZpc3VhbGl6YXRpb24gb2YgZ2VuZXMsIGluY2x1ZGluZyBleG9ucyBhbmQgY29kaW5nIHJlZ2lvbnMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtTdHJhbmR9IGZyb20gJy4uL0FsaWdubWVudCc7XG5pbXBvcnQgdHlwZSB7R2VuZSwgQmlnQmVkU291cmNlfSBmcm9tICcuLi9zb3VyY2VzL0JpZ0JlZERhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge1ZpelByb3BzfSBmcm9tICcuLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5pbXBvcnQgdHlwZSB7U2NhbGV9IGZyb20gJy4vZDN1dGlscyc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IHNoYWxsb3dFcXVhbHMgZnJvbSAnc2hhbGxvdy1lcXVhbHMnO1xuXG5pbXBvcnQgYmVkdG9vbHMgZnJvbSAnLi4vZGF0YS9iZWR0b29scyc7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi4vSW50ZXJ2YWwnO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCBzY2FsZSBmcm9tICcuLi9zY2FsZSc7XG5pbXBvcnQgQ29udGlnSW50ZXJ2YWwgZnJvbSAnLi4vQ29udGlnSW50ZXJ2YWwnO1xuaW1wb3J0IGNhbnZhc1V0aWxzIGZyb20gJy4vY2FudmFzLXV0aWxzJztcbmltcG9ydCBkYXRhQ2FudmFzIGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCBzdHlsZSBmcm9tICcuLi9zdHlsZSc7XG5cblxuLy8gRHJhdyBhbiBhcnJvdyBpbiB0aGUgbWlkZGxlIG9mIHRoZSB2aXNpYmxlIHBvcnRpb24gb2YgcmFuZ2UuXG5mdW5jdGlvbiBkcmF3QXJyb3coY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICAgICAgICAgICAgY2xhbXBlZFNjYWxlOiAoeDogbnVtYmVyKT0+bnVtYmVyLFxuICAgICAgICAgICAgICAgICAgIHJhbmdlOiBJbnRlcnZhbCxcbiAgICAgICAgICAgICAgICAgICB0aXBZOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgc3RyYW5kOiBTdHJhbmQpIHtcbiAgdmFyIHgxID0gY2xhbXBlZFNjYWxlKDEgKyByYW5nZS5zdGFydCksXG4gICAgICB4MiA9IGNsYW1wZWRTY2FsZSgxICsgcmFuZ2Uuc3RvcCk7XG5cbiAgLy8gaXQncyBvZmYtc2NyZWVuIG9yIHRoZXJlJ3Mgbm90IGVub3VnaCByb29tIHRvIGRyYXcgaXQgbGVnaWJseS5cbiAgaWYgKHgyIC0geDEgPD0gMiAqIHN0eWxlLkdFTkVfQVJST1dfU0laRSkgcmV0dXJuO1xuXG4gIHZhciBjeCA9ICh4MSArIHgyKSAvIDI7XG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgaWYgKHN0cmFuZCA9PSAnLScpIHtcbiAgICBjdHgubW92ZVRvKGN4ICsgc3R5bGUuR0VORV9BUlJPV19TSVpFLCB0aXBZIC0gc3R5bGUuR0VORV9BUlJPV19TSVpFKTtcbiAgICBjdHgubGluZVRvKGN4LCB0aXBZKTtcbiAgICBjdHgubGluZVRvKGN4ICsgc3R5bGUuR0VORV9BUlJPV19TSVpFLCB0aXBZICsgc3R5bGUuR0VORV9BUlJPV19TSVpFKTtcbiAgfSBlbHNlIHtcbiAgICBjdHgubW92ZVRvKGN4IC0gc3R5bGUuR0VORV9BUlJPV19TSVpFLCB0aXBZIC0gc3R5bGUuR0VORV9BUlJPV19TSVpFKTtcbiAgICBjdHgubGluZVRvKGN4LCB0aXBZKTtcbiAgICBjdHgubGluZVRvKGN4IC0gc3R5bGUuR0VORV9BUlJPV19TSVpFLCB0aXBZICsgc3R5bGUuR0VORV9BUlJPV19TSVpFKTtcbiAgfVxuICBjdHguc3Ryb2tlKCk7XG59XG5cbmZ1bmN0aW9uIGRyYXdHZW5lTmFtZShjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICAgICBjbGFtcGVkU2NhbGU6ICh4OiBudW1iZXIpPT5udW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgZ2VuZUxpbmVZOiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgICAgZ2VuZTogR2VuZSxcbiAgICAgICAgICAgICAgICAgICAgICB0ZXh0SW50ZXJ2YWxzOiBJbnRlcnZhbFtdKSB7XG4gIHZhciBwID0gZ2VuZS5wb3NpdGlvbixcbiAgICAgIGNlbnRlclggPSAwLjUgKiAoY2xhbXBlZFNjYWxlKDEgKyBwLnN0YXJ0KCkpICsgY2xhbXBlZFNjYWxlKDEgKyBwLnN0b3AoKSkpO1xuICB2YXIgbmFtZSA9IGdlbmUubmFtZSB8fCBnZW5lLmlkO1xuICB2YXIgdGV4dFdpZHRoID0gY3R4Lm1lYXN1cmVUZXh0KG5hbWUpLndpZHRoO1xuICB2YXIgdGV4dEludGVydmFsID0gbmV3IEludGVydmFsKGNlbnRlclggLSAwLjUgKiB0ZXh0V2lkdGgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2VudGVyWCArIDAuNSAqIHRleHRXaWR0aCk7XG4gIGlmICghXy5hbnkodGV4dEludGVydmFscywgaXYgPT4gdGV4dEludGVydmFsLmludGVyc2VjdHMoaXYpKSkge1xuICAgIHRleHRJbnRlcnZhbHMucHVzaCh0ZXh0SW50ZXJ2YWwpO1xuICAgIHZhciBiYXNlbGluZVkgPSBnZW5lTGluZVkgKyBzdHlsZS5HRU5FX0ZPTlRfU0laRSArIHN0eWxlLkdFTkVfVEVYVF9QQURESU5HO1xuICAgIGN0eC5maWxsVGV4dChuYW1lLCBjZW50ZXJYLCBiYXNlbGluZVkpO1xuICB9XG59XG5cbmNsYXNzIEdlbmVUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHByb3BzOiBWaXpQcm9wcyAmIHsgc291cmNlOiBCaWdCZWRTb3VyY2UgfTtcbiAgc3RhdGU6IHtnZW5lczogR2VuZVtdfTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogVml6UHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIGdlbmVzOiBbXVxuICAgIH07XG4gIH1cblxuICByZW5kZXIoKTogYW55IHtcbiAgICByZXR1cm4gPGNhbnZhcyAvPjtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIC8vIFZpc3VhbGl6ZSBuZXcgcmVmZXJlbmNlIGRhdGEgYXMgaXQgY29tZXMgaW4gZnJvbSB0aGUgbmV0d29yay5cbiAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV3ZGF0YScsIChyYW5nZSkgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIGdlbmVzOiB0aGlzLnByb3BzLnNvdXJjZS5nZXRHZW5lc0luUmFuZ2UocmFuZ2UpXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgZ2V0U2NhbGUoKTogU2NhbGUge1xuICAgIHJldHVybiBkM3V0aWxzLmdldFRyYWNrU2NhbGUodGhpcy5wcm9wcy5yYW5nZSwgdGhpcy5wcm9wcy53aWR0aCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBhbnksIHByZXZTdGF0ZTogYW55KSB7XG4gICAgaWYgKCFzaGFsbG93RXF1YWxzKHByZXZQcm9wcywgdGhpcy5wcm9wcykgfHxcbiAgICAgICAgIXNoYWxsb3dFcXVhbHMocHJldlN0YXRlLCB0aGlzLnN0YXRlKSkge1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlVmlzdWFsaXphdGlvbigpIHtcbiAgICB2YXIgY2FudmFzID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcyksXG4gICAgICAgIHt3aWR0aCwgaGVpZ2h0fSA9IHRoaXMucHJvcHMsXG4gICAgICAgIGdlbm9tZVJhbmdlID0gdGhpcy5wcm9wcy5yYW5nZTtcblxuICAgIHZhciByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChnZW5vbWVSYW5nZS5jb250aWcsIGdlbm9tZVJhbmdlLnN0YXJ0LCBnZW5vbWVSYW5nZS5zdG9wKTtcblxuICAgIC8vIEhvbGQgb2ZmIHVudGlsIGhlaWdodCAmIHdpZHRoIGFyZSBrbm93bi5cbiAgICBpZiAod2lkdGggPT09IDApIHJldHVybjtcblxuICAgIHZhciBzYyA9IHRoaXMuZ2V0U2NhbGUoKSxcbiAgICAgICAgLy8gV2UgY2FuJ3QgY2xhbXAgc2NhbGUgZGlyZWN0bHkgYmVjYXVzZSBvZiBvZmZzZXRQeC5cbiAgICAgICAgY2xhbXBlZFNjYWxlID0gc2NhbGUubGluZWFyKClcbiAgICAgICAgICAgIC5kb21haW4oW3NjLmludmVydCgwKSwgc2MuaW52ZXJ0KHdpZHRoKV0pXG4gICAgICAgICAgICAucmFuZ2UoWzAsIHdpZHRoXSlcbiAgICAgICAgICAgIC5jbGFtcCh0cnVlKTtcblxuICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyhjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgdmFyIGN0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQoY2FudmFzVXRpbHMuZ2V0Q29udGV4dChjYW52YXMpKTtcbiAgICBjdHgucmVzZXQoKTtcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcblxuICAgIHZhciBnZW5lTGluZVkgPSBNYXRoLnJvdW5kKGhlaWdodCAvIDQpO1xuICAgIHZhciB0ZXh0SW50ZXJ2YWxzID0gW107ICAvLyB4LWludGVydmFscyB3aXRoIHJlbmRlcmVkIGdlbmUgbmFtZXMsIHRvIGF2b2lkIG92ZXItZHJhd2luZy5cbiAgICAvLyBUT0RPOiBkb24ndCBwdWxsIGluIGdlbmVzIHZpYSBzdGF0ZS5cbiAgICBjdHguZm9udCA9IGAke3N0eWxlLkdFTkVfRk9OVF9TSVpFfXB4ICR7c3R5bGUuR0VORV9GT05UfWA7XG4gICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgIHRoaXMuc3RhdGUuZ2VuZXMuZm9yRWFjaChnZW5lID0+IHtcbiAgICAgIGlmICghZ2VuZS5wb3NpdGlvbi5jaHJJbnRlcnNlY3RzKHJhbmdlKSkgcmV0dXJuO1xuICAgICAgY3R4LnB1c2hPYmplY3QoZ2VuZSk7XG4gICAgICBjdHgubGluZVdpZHRoID0gMTtcbiAgICAgIGN0eC5zdHJva2VTdHlsZSA9IHN0eWxlLkdFTkVfQ09MT1I7XG4gICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuR0VORV9DT0xPUjtcblxuICAgICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCBjbGFtcGVkU2NhbGUoMSArIGdlbmUucG9zaXRpb24uc3RhcnQoKSksIGdlbmVMaW5lWSArIDAuNSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhbXBlZFNjYWxlKDEgKyBnZW5lLnBvc2l0aW9uLnN0b3AoKSksIGdlbmVMaW5lWSArIDAuNSk7XG5cbiAgICAgIC8vIFRPRE86IG9ubHkgY29tcHV0ZSBhbGwgdGhlc2UgaW50ZXJ2YWxzIHdoZW4gZGF0YSBiZWNvbWVzIGF2YWlsYWJsZS5cbiAgICAgIHZhciBleG9ucyA9IGJlZHRvb2xzLnNwbGl0Q29kaW5nRXhvbnMoZ2VuZS5leG9ucywgZ2VuZS5jb2RpbmdSZWdpb24pO1xuICAgICAgZXhvbnMuZm9yRWFjaChleG9uID0+IHtcbiAgICAgICAgY3R4LmZpbGxSZWN0KHNjKDEgKyBleG9uLnN0YXJ0KSxcbiAgICAgICAgICAgICAgICAgICAgIGdlbmVMaW5lWSAtIDMgKiAoZXhvbi5pc0NvZGluZyA/IDIgOiAxKSxcbiAgICAgICAgICAgICAgICAgICAgIHNjKGV4b24uc3RvcCArIDIpIC0gc2MoMSArIGV4b24uc3RhcnQpLFxuICAgICAgICAgICAgICAgICAgICAgNiAqIChleG9uLmlzQ29kaW5nID8gMiA6IDEpKTtcbiAgICAgIH0pO1xuXG4gICAgICB2YXIgaW50cm9ucyA9IGdlbmUucG9zaXRpb24uaW50ZXJ2YWwuY29tcGxlbWVudEludGVydmFscyhnZW5lLmV4b25zKTtcbiAgICAgIGludHJvbnMuZm9yRWFjaChyYW5nZSA9PiB7XG4gICAgICAgIGRyYXdBcnJvdyhjdHgsIGNsYW1wZWRTY2FsZSwgcmFuZ2UsIGdlbmVMaW5lWSArIDAuNSwgZ2VuZS5zdHJhbmQpO1xuICAgICAgfSk7XG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSBzdHlsZS5HRU5FX0NPTVBMRU1FTlRfQ09MT1I7XG4gICAgICBjdHgubGluZVdpZHRoID0gMjtcbiAgICAgIGdlbmUuZXhvbnMuZm9yRWFjaChyYW5nZSA9PiB7XG4gICAgICAgIGRyYXdBcnJvdyhjdHgsIGNsYW1wZWRTY2FsZSwgcmFuZ2UsIGdlbmVMaW5lWSArIDAuNSwgZ2VuZS5zdHJhbmQpO1xuICAgICAgfSk7XG5cbiAgICAgIGRyYXdHZW5lTmFtZShjdHgsIGNsYW1wZWRTY2FsZSwgZ2VuZUxpbmVZLCBnZW5lLCB0ZXh0SW50ZXJ2YWxzKTtcblxuICAgICAgY3R4LnBvcE9iamVjdCgpO1xuICAgIH0pO1xuICB9XG59XG5cbkdlbmVUcmFjay5kaXNwbGF5TmFtZSA9ICdnZW5lcyc7XG5cbm1vZHVsZS5leHBvcnRzID0gR2VuZVRyYWNrO1xuIiwiLyoqXG4gKiBBIHRyYWNrIHdoaWNoIGRpc3BsYXlzIGEgcmVmZXJlbmNlIGdlbm9tZS5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1ZpelByb3BzfSBmcm9tICcuLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5pbXBvcnQgdHlwZSB7VHdvQml0U291cmNlfSBmcm9tICcuLi9zb3VyY2VzL1R3b0JpdERhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge0RhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9IGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCB0eXBlIHtTY2FsZX0gZnJvbSAnLi9kM3V0aWxzJztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IHNoYWxsb3dFcXVhbHMgZnJvbSAnc2hhbGxvdy1lcXVhbHMnO1xuXG5pbXBvcnQgY2FudmFzVXRpbHMgZnJvbSAnLi9jYW52YXMtdXRpbHMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBkYXRhQ2FudmFzIGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCBkM3V0aWxzIGZyb20gJy4vZDN1dGlscyc7XG5pbXBvcnQgRGlzcGxheU1vZGUgZnJvbSAnLi9EaXNwbGF5TW9kZSc7XG5pbXBvcnQgVGlsZWRDYW52YXMgZnJvbSAnLi9UaWxlZENhbnZhcyc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi4vc3R5bGUnO1xuXG5cbmZ1bmN0aW9uIHJlbmRlckdlbm9tZShjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICAgICAgICAgICAgICAgc2NhbGU6IChudW06IG51bWJlcikgPT4gbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgICAgICAgICAgICAgIGJhc2VQYWlyczogc3RyaW5nKSB7XG4gIHZhciBweFBlckxldHRlciA9IHNjYWxlKDEpIC0gc2NhbGUoMCk7XG4gIHZhciBtb2RlID0gRGlzcGxheU1vZGUuZ2V0RGlzcGxheU1vZGUocHhQZXJMZXR0ZXIpO1xuICB2YXIgc2hvd1RleHQgPSBEaXNwbGF5TW9kZS5pc1RleHQobW9kZSk7XG4gIGlmIChtb2RlICE9IERpc3BsYXlNb2RlLkhJRERFTikge1xuICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcbiAgICBpZiAobW9kZSA9PSBEaXNwbGF5TW9kZS5MT09TRSkge1xuICAgICAgY3R4LmZvbnQgPSBzdHlsZS5MT09TRV9URVhUX1NUWUxFO1xuICAgIH0gZWxzZSBpZiAobW9kZSA9PSBEaXNwbGF5TW9kZS5USUdIVCkge1xuICAgICAgY3R4LmZvbnQgPSBzdHlsZS5USUdIVF9URVhUX1NUWUxFO1xuICAgIH1cblxuICAgIHZhciBwcmV2aW91c0Jhc2UgPSBudWxsO1xuICAgIHZhciBzdGFydCA9IHJhbmdlLnN0YXJ0KCksXG4gICAgICAgIHN0b3AgPSByYW5nZS5zdG9wKCk7XG4gICAgZm9yICh2YXIgcG9zID0gc3RhcnQ7IHBvcyA8PSBzdG9wOyBwb3MrKykge1xuICAgICAgdmFyIGxldHRlciA9IGJhc2VQYWlyc1twb3MgLSBzdGFydF07XG4gICAgICBpZiAobGV0dGVyID09ICcuJykgY29udGludWU7ICAvLyBub3QgeWV0IGtub3duXG5cbiAgICAgIGN0eC5zYXZlKCk7XG4gICAgICBjdHgucHVzaE9iamVjdCh7cG9zLCBsZXR0ZXJ9KTtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5CQVNFX0NPTE9SU1tsZXR0ZXJdO1xuICAgICAgaWYgKHNob3dUZXh0KSB7XG4gICAgICAgIC8vIFdlIG9ubHkgcHVzaCBvYmplY3RzIGluIHRoZSB0ZXh0IGNhc2UgYXMgaXQgaW52b2x2ZXMgY3JlYXRpbmcgYVxuICAgICAgICAvLyBuZXcgb2JqZWN0ICYgY2FuIGJlY29tZSBhIHBlcmZvcm1hbmNlIGlzc3VlLlxuICAgICAgICAvLyAwLjUgPSBjZW50ZXJlZFxuICAgICAgICBjdHguZmlsbFRleHQobGV0dGVyLCBzY2FsZSgxICsgMC41ICsgcG9zKSwgaGVpZ2h0IC0gMSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocHhQZXJMZXR0ZXIgPj0gc3R5bGUuQ09WRVJBR0VfTUlOX0JBUl9XSURUSF9GT1JfR0FQKSB7XG4gICAgICAgICAgLy8gV2Ugd2FudCBhIHdoaXRlIHNwYWNlIGJldHdlZW4gYmxvY2tzIGF0IHRoaXMgc2l6ZSwgc28gd2UgY2FuIHNlZVxuICAgICAgICAgIC8vIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gYmFzZXMuXG4gICAgICAgICAgY3R4LmZpbGxSZWN0KHNjYWxlKDEgKyBwb3MpICsgMC41LCAwLCAgcHhQZXJMZXR0ZXIgLSAxLjUsIGhlaWdodCk7XG4gICAgICAgIH0gZWxzZSBpZiAocHJldmlvdXNCYXNlID09PSBsZXR0ZXIpIHtcbiAgICAgICAgICAvLyBPdGhlcndpc2UsIHdlIHdhbnQgcnVucyBvZiBjb2xvcnMgdG8gYmUgY29tcGxldGVseSBzb2xpZCAuLi5cbiAgICAgICAgICBjdHguZmlsbFJlY3Qoc2NhbGUoMSArIHBvcykgLSAxLjUsIDAsIHB4UGVyTGV0dGVyICsgMS41LCBoZWlnaHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIC4uLiBhbmQgbWluaW1pemUgdGhlIGFtb3VudCBvZiBzbXVkZ2luZyBhbmQgd2hpdGVzcGFjZSBiZXR3ZWVuXG4gICAgICAgICAgLy8gYmFzZXMuXG4gICAgICAgICAgY3R4LmZpbGxSZWN0KHNjYWxlKDEgKyBwb3MpIC0gMC41LCAwLCAgcHhQZXJMZXR0ZXIgKyAxLjUsIGhlaWdodCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY3R4LnBvcE9iamVjdCgpO1xuICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICAgIHByZXZpb3VzQmFzZSA9IGxldHRlcjtcbiAgICB9XG4gIH1cbn1cblxuXG5jbGFzcyBHZW5vbWVUaWxlZENhbnZhcyBleHRlbmRzIFRpbGVkQ2FudmFzIHtcbiAgc291cmNlOiBUd29CaXRTb3VyY2U7XG4gIGhlaWdodDogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHNvdXJjZTogVHdvQml0U291cmNlLCBoZWlnaHQ6IG51bWJlcikge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gICAgLy8gd29ya2Fyb3VuZCBmb3IgYW4gaXNzdWUgaW4gUGhhbnRvbUpTIHdoZXJlIGhlaWdodCBhbHdheXMgY29tZXMgb3V0IHRvIHplcm8uXG4gICAgdGhpcy5oZWlnaHQgPSBNYXRoLm1heCgxLCBoZWlnaHQpO1xuICB9XG5cbiAgcmVuZGVyKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgIHNjYWxlOiAoeDogbnVtYmVyKT0+bnVtYmVyLFxuICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pIHtcbiAgICAvLyBUaGUgKy8tMSBlbnN1cmVzIHRoYXQgcGFydGlhbGx5LXZpc2libGUgYmFzZXMgb24gdGhlIGVkZ2UgYXJlIHJlbmRlcmVkLlxuICAgIHZhciBnZW5vbWVSYW5nZSA9IHtcbiAgICAgIGNvbnRpZzogcmFuZ2UuY29udGlnLFxuICAgICAgc3RhcnQ6IE1hdGgubWF4KDAsIChyYW5nZS5zdGFydCgpIC0gMSkpLFxuICAgICAgc3RvcDogcmFuZ2Uuc3RvcCgpICsgMVxuICAgIH07XG4gICAgdmFyIGJhc2VQYWlycyA9IHRoaXMuc291cmNlLmdldFJhbmdlQXNTdHJpbmcoZ2Vub21lUmFuZ2UpO1xuICAgIHJlbmRlckdlbm9tZShjdHgsIHNjYWxlLCB0aGlzLmhlaWdodCwgQ29udGlnSW50ZXJ2YWwuZnJvbUdlbm9tZVJhbmdlKGdlbm9tZVJhbmdlKSwgYmFzZVBhaXJzKTtcbiAgfVxuXG4gIGhlaWdodEZvclJlZihyZWY6IHN0cmluZyk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuaGVpZ2h0O1xuICB9XG5cbiAgdXBkYXRlSGVpZ2h0KGhlaWdodDogbnVtYmVyKSB7XG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gIH1cbn1cblxuXG5jbGFzcyBHZW5vbWVUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHByb3BzOiBWaXpQcm9wcyAmIHtzb3VyY2U6IFR3b0JpdFNvdXJjZX07XG4gIHN0YXRlOiB2b2lkOyAgLy8gbm8gc3RhdGVcbiAgdGlsZXM6IEdlbm9tZVRpbGVkQ2FudmFzO1xuXG4gIHJlbmRlcigpOiBhbnkge1xuICAgIHJldHVybiA8Y2FudmFzIC8+O1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy50aWxlcyA9IG5ldyBHZW5vbWVUaWxlZENhbnZhcyh0aGlzLnByb3BzLnNvdXJjZSwgdGhpcy5wcm9wcy5oZWlnaHQpO1xuXG4gICAgLy8gVmlzdWFsaXplIG5ldyByZWZlcmVuY2UgZGF0YSBhcyBpdCBjb21lcyBpbiBmcm9tIHRoZSBuZXR3b3JrLlxuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXdkYXRhJywgcmFuZ2UgPT4ge1xuICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlUmFuZ2UocmFuZ2UpO1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgfVxuXG4gIGdldFNjYWxlKCk6IFNjYWxlIHtcbiAgICByZXR1cm4gZDN1dGlscy5nZXRUcmFja1NjYWxlKHRoaXMucHJvcHMucmFuZ2UsIHRoaXMucHJvcHMud2lkdGgpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogYW55LCBwcmV2U3RhdGU6IGFueSkge1xuICAgIGlmICghc2hhbGxvd0VxdWFscyhwcmV2UHJvcHMsIHRoaXMucHJvcHMpIHx8XG4gICAgICAgICFzaGFsbG93RXF1YWxzKHByZXZTdGF0ZSwgdGhpcy5zdGF0ZSkpIHtcbiAgICAgIGlmICh0aGlzLnByb3BzLmhlaWdodCAhPSBwcmV2UHJvcHMuaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMudGlsZXMudXBkYXRlSGVpZ2h0KHRoaXMucHJvcHMuaGVpZ2h0KTtcbiAgICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlQWxsKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVWaXN1YWxpemF0aW9uKCkge1xuICAgIHZhciBjYW52YXMgPSBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKSxcbiAgICAgICAge3dpZHRoLCBoZWlnaHQsIHJhbmdlfSA9IHRoaXMucHJvcHM7XG5cbiAgICAvLyBIb2xkIG9mZiB1bnRpbCBoZWlnaHQgJiB3aWR0aCBhcmUga25vd24uXG4gICAgaWYgKHdpZHRoID09PSAwKSByZXR1cm47XG4gICAgZDN1dGlscy5zaXplQ2FudmFzKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG5cbiAgICB2YXIgY3R4ID0gZGF0YUNhbnZhcy5nZXREYXRhQ29udGV4dChjYW52YXNVdGlscy5nZXRDb250ZXh0KGNhbnZhcykpO1xuICAgIGN0eC5yZXNldCgpO1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuICAgIHRoaXMudGlsZXMucmVuZGVyVG9TY3JlZW4oY3R4LCBDb250aWdJbnRlcnZhbC5mcm9tR2Vub21lUmFuZ2UocmFuZ2UpLCB0aGlzLmdldFNjYWxlKCkpO1xuICB9XG59XG5cbkdlbm9tZVRyYWNrLmRpc3BsYXlOYW1lID0gJ3JlZmVyZW5jZSc7XG5cbm1vZHVsZS5leHBvcnRzID0gR2Vub21lVHJhY2s7XG4iLCIvKipcbiAqIFZpc3VhbGl6YXRpb24gb2YgZ2Vub3R5cGVzXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtWY2ZEYXRhU291cmNlfSBmcm9tICcuLi9zb3VyY2VzL1ZjZkRhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge1ZhcmlhbnRDb250ZXh0fSBmcm9tICcuLi9kYXRhL3ZjZic7XG5pbXBvcnQgdHlwZSB7RGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IHR5cGUge1ZpelByb3BzfSBmcm9tICcuLi9WaXN1YWxpemF0aW9uV3JhcHBlcic7XG5pbXBvcnQgdHlwZSB7U2NhbGV9IGZyb20gJy4vZDN1dGlscyc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcblxuXG5pbXBvcnQgZDN1dGlscyBmcm9tICcuL2QzdXRpbHMnO1xuaW1wb3J0IHNoYWxsb3dFcXVhbHMgZnJvbSAnc2hhbGxvdy1lcXVhbHMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBjYW52YXNVdGlscyBmcm9tICcuL2NhbnZhcy11dGlscyc7XG5pbXBvcnQgVGlsZWRDYW52YXMgZnJvbSAnLi9UaWxlZENhbnZhcyc7XG5pbXBvcnQgZGF0YUNhbnZhcyBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi4vc3R5bGUnO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB0eXBlIHtTdGF0ZSwgTmV0d29ya1N0YXR1c30gZnJvbSAnLi9waWxldXB1dGlscyc7XG5cbnZhciBNT05TVEVSX1JFUVVFU1QgPSAxMDAwMDtcbnZhciBMQUJFTF9XSURUSCA9IDEwMDtcblxuY2xhc3MgR2Vub3R5cGVUaWxlZENhbnZhcyBleHRlbmRzIFRpbGVkQ2FudmFzIHtcbiAgb3B0aW9uczogT2JqZWN0O1xuICBzb3VyY2U6IFZjZkRhdGFTb3VyY2U7XG4gIHNhbXBsZUlkczogc3RyaW5nW107XG5cbiAgY29uc3RydWN0b3Ioc291cmNlOiBWY2ZEYXRhU291cmNlLCBzYW1wbGVJZHM6IHN0cmluZ1tdLCBvcHRpb25zOiBPYmplY3QpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5zYW1wbGVJZHMgPSBzYW1wbGVJZHM7XG4gIH1cblxuICB1cGRhdGUobmV3T3B0aW9uczogT2JqZWN0KSB7XG4gICAgdGhpcy5vcHRpb25zID0gbmV3T3B0aW9ucztcbiAgfVxuXG4gIGhlaWdodEZvclJlZihyZWY6IHN0cmluZyk6IG51bWJlciB7XG4gICAgcmV0dXJuIHlGb3JSb3codGhpcy5zYW1wbGVJZHMubGVuZ3RoKTtcbiAgfVxuXG4gIHJlbmRlcihjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICBzY2FsZTogKHg6IG51bWJlcik9Pm51bWJlcixcbiAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgb3JpZ2luYWxSYW5nZTogP0NvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICByZXNvbHV0aW9uOiA/bnVtYmVyKSB7XG4gICAgdmFyIHJlbGF4ZWRSYW5nZSA9XG4gICAgICAgIG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIHJhbmdlLnN0YXJ0KCkgLSAxLCByYW5nZS5zdG9wKCkgKyAxKTtcblxuICAgIC8vIHJlbGF4ZWQgcmFuZ2UgaXMganVzdCBmb3IgdGhpcyB0aWxlLiBtYWtlIHN1cmUgdG8gZ2V0IHJlc29sdXRpb24gZm9yIHdob2xlXG4gICAgLy8gdmlld2luZyBhcmVhXG4gICAgdmFyIHZHZW5vdHlwZXMgPSB0aGlzLnNvdXJjZS5nZXRHZW5vdHlwZXNJblJhbmdlKHJlbGF4ZWRSYW5nZSwgcmVzb2x1dGlvbik7XG4gICAgcmVuZGVyR2Vub3R5cGVzKGN0eCwgc2NhbGUsIHJlbGF4ZWRSYW5nZSwgdkdlbm90eXBlcywgdGhpcy5zYW1wbGVJZHMpO1xuICB9XG59XG4vLyBEcmF3IGdlbm90eXBlc1xuZnVuY3Rpb24gcmVuZGVyR2Vub3R5cGVzKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IChudW06IG51bWJlcikgPT4gbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPixcbiAgICAgICAgICAgICAgICAgICAgZ2Vub3R5cGVzOiBWYXJpYW50Q29udGV4dFtdLFxuICAgICAgICAgICAgICAgICAgICBzYW1wbGVJZHMpIHtcbiAgICAvLyBkcmF3IGdlbm90eXBlc1xuICAgIGdlbm90eXBlcy5mb3JFYWNoKGdlbm90eXBlID0+IHtcbiAgICAgICAgdmFyIHZhcmlhbnQgPSBnZW5vdHlwZS52YXJpYW50O1xuICAgICAgICB2YXIga2V5cyA9IGdlbm90eXBlLnNhbXBsZUlkcztcbiAgICAgICAgY3R4LnB1c2hPYmplY3QodmFyaWFudCk7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5HRU5PVFlQRV9GSUxMO1xuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSBzdHlsZS5HRU5PVFlQRV9GSUxMO1xuICAgICAgICB2YXIgeCA9IE1hdGgucm91bmQoc2NhbGUodmFyaWFudC5wb3NpdGlvbikpO1xuICAgICAgICB2YXIgd2lkdGggPSBNYXRoLnJvdW5kKHNjYWxlKHZhcmlhbnQuZW5kKSkgLSB4O1xuICAgICAgICBrZXlzLmZvckVhY2goc2FtcGxlSWQgPT4ge1xuICAgICAgICAgIHZhciB5ID0geUZvclJvdyhzYW1wbGVJZHMuaW5kZXhPZihzYW1wbGVJZCkpO1xuICAgICAgICAgIGN0eC5maWxsUmVjdCh4IC0gMC4yLCB5LCB3aWR0aCwgc3R5bGUuR0VOT1RZUEVfSEVJR0hUKTtcbiAgICAgICAgICBjdHguc3Ryb2tlUmVjdCh4IC0gMC4yLCB5LCB3aWR0aCwgc3R5bGUuR0VOT1RZUEVfSEVJR0hUKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGN0eC5wb3BPYmplY3QoKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24geUZvclJvdyhyb3cpIHtcbiAgcmV0dXJuIHJvdyAqIChzdHlsZS5HRU5PVFlQRV9IRUlHSFQgKyBzdHlsZS5HRU5PVFlQRV9TUEFDSU5HKTtcbn1cblxuY2xhc3MgR2Vub3R5cGVUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHByb3BzOiBWaXpQcm9wcyAmIHtzb3VyY2U6IFZjZkRhdGFTb3VyY2V9O1xuICBzdGF0ZTogU3RhdGU7XG4gIHRpbGVzOiBHZW5vdHlwZVRpbGVkQ2FudmFzO1xuICBzYW1wbGVJZHM6IHN0cmluZ1tdO1xuXG4gIGNvbnN0cnVjdG9yKHByb3BzOiBPYmplY3QpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG5ldHdvcmtTdGF0dXM6IG51bGxcbiAgICB9O1xuICAgIHRoaXMuc2FtcGxlSWRzID0gcHJvcHMuc291cmNlLmdldFNhbXBsZXMoKTtcbiAgfVxuXG4gIHJlbmRlcigpOiBhbnkge1xuICAgIC8vIFRoZXNlIHN0eWxlcyBhbGxvdyB2ZXJ0aWNhbCBzY3JvbGxpbmcgdG8gc2VlIHRoZSBmdWxsIHBpbGV1cC5cbiAgICAvLyBBZGRpbmcgYSB2ZXJ0aWNhbCBzY3JvbGxiYXIgc2hyaW5rcyB0aGUgdmlzaWJsZSBhcmVhLCBidXQgd2UgaGF2ZSB0byBhY3RcbiAgICAvLyBhcyB0aG91Z2ggaXQgZG9lc24ndCwgc2luY2UgYWRqdXN0aW5nIHRoZSBzY2FsZSB3b3VsZCBwdXQgaXQgb3V0IG9mIHN5bmNcbiAgICAvLyB3aXRoIG90aGVyIHRyYWNrcy5cbiAgICB2YXIgY29udGFpbmVyU3R5bGVzID0ge1xuICAgICAgJ2hlaWdodCc6ICcxMDAlJ1xuICAgIH07XG5cbiAgICB2YXIgbGFiZWxTdHlsZXMgPSB7XG4gICAgICAnZmxvYXQnOiAnbGVmdCcsXG4gICAgICAnb3ZlcmZsb3cnOiAnaGlkZGVuJyxcbiAgICAgICd3aWR0aDonOiBgJHsgTEFCRUxfV0lEVEggfXB4YFxuICAgIH07XG5cbiAgICB2YXIgY2FudmFzU3R5bGVzID0ge1xuICAgICAgJ292ZXJmbG93JzogJ2hpZGRlbidcbiAgICB9O1xuXG4gICAgdmFyIHN0YXR1c0VsID0gbnVsbCxcbiAgICAgICAgbmV0d29ya1N0YXR1cyA9IHRoaXMuc3RhdGUubmV0d29ya1N0YXR1cztcbiAgICBpZiAobmV0d29ya1N0YXR1cykge1xuICAgICAgc3RhdHVzRWwgPSAoXG4gICAgICAgIDxkaXYgcmVmPSdzdGF0dXMnIGNsYXNzTmFtZT0nbmV0d29yay1zdGF0dXMtc21hbGwnPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSduZXR3b3JrLXN0YXR1cy1tZXNzYWdlLXNtYWxsJz5cbiAgICAgICAgICAgIExvYWRpbmcgR2Vub3R5cGVz4oCmXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG4gICAgdmFyIHJhbmdlTGVuZ3RoID0gdGhpcy5wcm9wcy5yYW5nZS5zdG9wIC0gdGhpcy5wcm9wcy5yYW5nZS5zdGFydDtcbiAgICAvLyBJZiByYW5nZSBpcyB0b28gbGFyZ2UsIGRvIG5vdCByZW5kZXIgJ2NhbnZhcydcbiAgICBpZiAocmFuZ2VMZW5ndGggPj0gTU9OU1RFUl9SRVFVRVNUKSB7XG4gICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjZW50ZXInPlxuICAgICAgICAgICAgICBab29tIGluIHRvIHNlZSBnZW5vdHlwZXNcbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPGNhbnZhcyBvbkNsaWNrPXt0aGlzLmhhbmRsZUNsaWNrLmJpbmQodGhpcyl9IC8+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICB7c3RhdHVzRWx9XG4gICAgICAgICAgPGRpdiByZWY9J2NvbnRhaW5lcicgc3R5bGU9e2NvbnRhaW5lclN0eWxlc30+XG4gICAgICAgICAgICA8ZGl2IHN0eWxlPXtsYWJlbFN0eWxlc30gPjxjYW52YXMgcmVmPSdsYWJlbENhbnZhcycgLz48L2Rpdj5cbiAgICAgICAgICAgIDxkaXYgc3R5bGU9e2NhbnZhc1N0eWxlc30+PGNhbnZhcyByZWY9J2NhbnZhcycgb25DbGljaz17dGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpfSAvPjwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgICAgIHRoaXMudGlsZXMgPSBuZXcgR2Vub3R5cGVUaWxlZENhbnZhcyh0aGlzLnByb3BzLnNvdXJjZSxcbiAgICAgICAgdGhpcy5zYW1wbGVJZHMsIHRoaXMucHJvcHMub3B0aW9ucyk7XG5cbiAgICAgICAgLy8gVmlzdWFsaXplIG5ldyBkYXRhIGFzIGl0IGNvbWVzIGluIGZyb20gdGhlIG5ldHdvcmsuXG4gICAgICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXdkYXRhJywgKHJhbmdlKSA9PiB7XG4gICAgICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlUmFuZ2UocmFuZ2UpO1xuICAgICAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ldHdvcmtwcm9ncmVzcycsIGUgPT4ge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe25ldHdvcmtTdGF0dXM6IGV9KTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXR3b3JrZG9uZScsIGUgPT4ge1xuICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe25ldHdvcmtTdGF0dXM6IG51bGx9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gIH1cblxuICBnZXRTY2FsZSgpOiBTY2FsZSB7XG4gICAgcmV0dXJuIGQzdXRpbHMuZ2V0VHJhY2tTY2FsZSh0aGlzLnByb3BzLnJhbmdlLCB0aGlzLnByb3BzLndpZHRoIC0gTEFCRUxfV0lEVEgpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogYW55LCBwcmV2U3RhdGU6IGFueSkge1xuICAgIGlmICghc2hhbGxvd0VxdWFscyhwcmV2UHJvcHMsIHRoaXMucHJvcHMpIHx8XG4gICAgICAgICFzaGFsbG93RXF1YWxzKHByZXZTdGF0ZSwgdGhpcy5zdGF0ZSkpIHtcbiAgICAgICAgICB0aGlzLnRpbGVzLnVwZGF0ZSh0aGlzLnByb3BzLm9wdGlvbnMpO1xuICAgICAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZUFsbCgpO1xuICAgICAgICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICAgIH1cbiAgfVxuXG4gIC8vIGRyYXdzIGdlbm90eXBlIGxpbmVzIHRvIHZpc3VhbGx5IHNlcGFyYXRlIGdlbm90eXBlIHJvd3NcbiAgZHJhd0xpbmVzKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgIHZhciB3aWR0aCA9IHRoaXMucHJvcHMud2lkdGg7XG5cbiAgICAvLyBkcmF3IGJhY2tncm91bmQgZm9yIGVhY2ggcm93XG4gICAgaWYgKHRoaXMuc2FtcGxlSWRzICE9PSBudWxsKSB7XG4gICAgICBjdHguZm9udCA9IFwiOXB4IEFyaWFsXCI7XG4gICAgICB0aGlzLnNhbXBsZUlkcy5mb3JFYWNoKHNhbXBsZUlkID0+IHtcbiAgICAgICAgY3R4LnB1c2hPYmplY3Qoc2FtcGxlSWQpO1xuICAgICAgICB2YXIgeSA9IHlGb3JSb3codGhpcy5zYW1wbGVJZHMuaW5kZXhPZihzYW1wbGVJZCkpO1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuQkFDS0dST1VORF9GSUxMO1xuICAgICAgICBjdHguZmlsbFJlY3QoMCwgeSwgd2lkdGgsIHN0eWxlLkdFTk9UWVBFX0hFSUdIVCk7XG4gICAgICAgIGN0eC5wb3BPYmplY3QoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIGRyYXdzIHNhbXBsZSBuYW1lcyBvbiBzaWRlIGJhci4gVGhpcyBuZWVkcyB0byBiZSBvbmx5IHJlbmRlcmVkIG9uY2UuXG4gIGRyYXdMYWJlbHMoKSB7XG4gICAgLy8gaWYgYWxyZWFkeSBkcmF3biwgcmV0dXJuXG4gICAgdmFyIGxhYmVsQ2FudmFzID0gKHRoaXMucmVmcy5sYWJlbENhbnZhcyA6IEhUTUxDYW52YXNFbGVtZW50KSxcbiAgICAgICAgd2lkdGggPSB0aGlzLnByb3BzLndpZHRoO1xuXG4gICAgLy8gSG9sZCBvZmYgdW50aWwgaGVpZ2h0ICYgd2lkdGggYXJlIGtub3duLlxuICAgIGlmICh3aWR0aCA9PT0gMCB8fCB0eXBlb2YgbGFiZWxDYW52YXMgPT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcblxuICAgIHZhciBoZWlnaHQgPSB5Rm9yUm93KHRoaXMuc2FtcGxlSWRzLmxlbmd0aCk7XG5cblxuICAgIC8vIG9ubHkgcmVuZGVyIG9uY2Ugb24gbG9hZC5cbiAgICBpZiAobGFiZWxDYW52YXMuY2xpZW50SGVpZ2h0ICE9IGhlaWdodCkge1xuICAgICAgdmFyIGxhYmVsQ3R4ID0gZGF0YUNhbnZhcy5nZXREYXRhQ29udGV4dChjYW52YXNVdGlscy5nZXRDb250ZXh0KGxhYmVsQ2FudmFzKSk7XG4gICAgICBkM3V0aWxzLnNpemVDYW52YXMobGFiZWxDYW52YXMsIExBQkVMX1dJRFRILCBoZWlnaHQpO1xuXG4gICAgICAvLyBkcmF3IGxhYmVsIGZvciBlYWNoIHJvd1xuICAgICAgaWYgKHRoaXMuc2FtcGxlSWRzICE9PSBudWxsKSB7XG4gICAgICAgIGxhYmVsQ3R4LmZvbnQgPSBcIjlweCBBcmlhbFwiO1xuICAgICAgICB0aGlzLnNhbXBsZUlkcy5mb3JFYWNoKHNhbXBsZUlkID0+IHtcbiAgICAgICAgICBsYWJlbEN0eC5wdXNoT2JqZWN0KHNhbXBsZUlkKTtcbiAgICAgICAgICB2YXIgeSA9IHlGb3JSb3codGhpcy5zYW1wbGVJZHMuaW5kZXhPZihzYW1wbGVJZCkpO1xuICAgICAgICAgIGxhYmVsQ3R4LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcbiAgICAgICAgICBsYWJlbEN0eC5maWxsVGV4dChzYW1wbGVJZCwgMCwgeStzdHlsZS5HRU5PVFlQRV9IRUlHSFQpO1xuICAgICAgICAgIGxhYmVsQ3R4LnBvcE9iamVjdCgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB1cGRhdGVWaXN1YWxpemF0aW9uKCkge1xuICAgIHZhciBjYW52YXMgPSAodGhpcy5yZWZzLmNhbnZhcyA6IEhUTUxDYW52YXNFbGVtZW50KSxcbiAgICAgICAgd2lkdGggPSB0aGlzLnByb3BzLndpZHRoO1xuXG4gICAgLy8gSG9sZCBvZmYgdW50aWwgaGVpZ2h0ICYgd2lkdGggYXJlIGtub3duLlxuICAgIGlmICh3aWR0aCA9PT0gMCB8fCB0eXBlb2YgY2FudmFzID09ICd1bmRlZmluZWQnKSByZXR1cm47XG5cbiAgICB2YXIgaGVpZ2h0ID0geUZvclJvdyh0aGlzLnNhbXBsZUlkcy5sZW5ndGgpO1xuICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyhjYW52YXMsIHdpZHRoIC0gTEFCRUxfV0lEVEgsIGhlaWdodCk7XG5cbiAgICB2YXIgY3R4ID0gZGF0YUNhbnZhcy5nZXREYXRhQ29udGV4dChjYW52YXNVdGlscy5nZXRDb250ZXh0KGNhbnZhcykpO1xuICAgIHRoaXMuZHJhd0xhYmVscygpO1xuICAgIHRoaXMucmVuZGVyU2NlbmUoY3R4KTtcbiAgfVxuXG4gIHJlbmRlclNjZW5lKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgIHZhciByYW5nZSA9IHRoaXMucHJvcHMucmFuZ2UsXG4gICAgICAgIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQsIHJhbmdlLnN0b3ApLFxuICAgICAgICBzY2FsZSA9IHRoaXMuZ2V0U2NhbGUoKTtcblxuICAgIGN0eC5yZXNldCgpO1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgLy8gcmVuZGVyIGxpbmVzIGFmdGVyIHJlY3RhbmdsZSBoYXMgYmVlbiBjbGVhcmVkXG4gICAgdGhpcy5kcmF3TGluZXMoY3R4KTtcblxuICAgIHRoaXMudGlsZXMucmVuZGVyVG9TY3JlZW4oY3R4LCBpbnRlcnZhbCwgc2NhbGUpO1xuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cblxuICBoYW5kbGVDbGljayhyZWFjdEV2ZW50OiBhbnkpIHtcbiAgICB2YXIgZXYgPSByZWFjdEV2ZW50Lm5hdGl2ZUV2ZW50LFxuICAgICAgICB4ID0gZXYub2Zmc2V0WDtcblxuICAgIHZhciBnZW5vbWVSYW5nZSA9IHRoaXMucHJvcHMucmFuZ2UsXG4gICAgICAgIC8vIGFsbG93IHNvbWUgYnVmZmVyaW5nIHNvIGNsaWNrIGlzbid0IHNvIHNlbnNpdGl2ZVxuICAgICAgICByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChnZW5vbWVSYW5nZS5jb250aWcsIGdlbm9tZVJhbmdlLnN0YXJ0LTEsIGdlbm9tZVJhbmdlLnN0b3ArMSksXG4gICAgICAgIHNjYWxlID0gdGhpcy5nZXRTY2FsZSgpLFxuICAgICAgICAvLyBsZWF2ZSBwYWRkaW5nIG9mIDJweCB0byByZWR1Y2UgY2xpY2sgc3BlY2lmaWNpdHlcbiAgICAgICAgY2xpY2tTdGFydCA9IE1hdGguZmxvb3Ioc2NhbGUuaW52ZXJ0KHgpKSAtIDIsXG4gICAgICAgIGNsaWNrRW5kID0gY2xpY2tTdGFydCArIDIsXG4gICAgICAgIC8vIElmIGNsaWNrLXRyYWNraW5nIGdldHMgc2xvdywgdGhpcyByYW5nZSBjb3VsZCBiZSBuYXJyb3dlZCB0byBvbmVcbiAgICAgICAgLy8gY2xvc2VyIHRvIHRoZSBjbGljayBjb29yZGluYXRlLCByYXRoZXIgdGhhbiB0aGUgd2hvbGUgdmlzaWJsZSByYW5nZS5cbiAgICAgICAgdkdlbm90eXBlcyA9IHRoaXMucHJvcHMuc291cmNlLmdldEdlbm90eXBlc0luUmFuZ2UocmFuZ2UsIDEpO1xuXG4gICAgdmFyIGdlbm90eXBlID0gXy5maW5kKHZHZW5vdHlwZXMsIGYgPT4gdXRpbHMudHVwbGVSYW5nZU92ZXJsYXBzKFtbZi52YXJpYW50LnBvc2l0aW9uXSwgW2YudmFyaWFudC5lbmRdXSwgW1tjbGlja1N0YXJ0XSwgW2NsaWNrRW5kXV0pKTtcbiAgICB2YXIgYWxlcnQgPSB3aW5kb3cuYWxlcnQgfHwgY29uc29sZS5sb2c7XG4gICAgaWYgKGdlbm90eXBlKSB7XG4gICAgICB2YXIgdmFyaWFudFN0cmluZyA9IGB2YXJpYW50OiAke0pTT04uc3RyaW5naWZ5KGdlbm90eXBlLnZhcmlhbnQpfWA7XG4gICAgICB2YXIgc2FtcGxlcyA9IGBzYW1wbGVzIHdpdGggdmFyaWFudDogJHtKU09OLnN0cmluZ2lmeShnZW5vdHlwZS5zYW1wbGVJZHMpfWA7XG4gICAgICBhbGVydChgJHt2YXJpYW50U3RyaW5nfVxcbiR7c2FtcGxlc31gKTtcbiAgICB9XG4gIH1cbn1cblxuR2Vub3R5cGVUcmFjay5kaXNwbGF5TmFtZSA9ICdnZW5vdHlwZXMnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEdlbm90eXBlVHJhY2s7XG4iLCIvKipcbiAqIEEgdHJhY2sgd2hpY2ggc2hvd3MgdGhlIGxvY2F0aW9uIG9mIHRoZSBiYXNlIGluIHRoZSBtaWRkbGUgb2YgdGhlIHZpZXcuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtWaXpQcm9wc30gZnJvbSAnLi4vVmlzdWFsaXphdGlvbldyYXBwZXInO1xuaW1wb3J0IHR5cGUge1NjYWxlfSBmcm9tICcuL2QzdXRpbHMnO1xuXG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IFJlYWN0RE9NIGZyb20gJ3JlYWN0LWRvbSc7XG5pbXBvcnQgRW1wdHlTb3VyY2UgZnJvbSAnLi4vc291cmNlcy9FbXB0eVNvdXJjZSc7XG5pbXBvcnQgY2FudmFzVXRpbHMgZnJvbSAnLi9jYW52YXMtdXRpbHMnO1xuaW1wb3J0IGRhdGFDYW52YXMgZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IHN0eWxlIGZyb20gJy4uL3N0eWxlJztcbmltcG9ydCBkM3V0aWxzIGZyb20gJy4vZDN1dGlscyc7XG5cbmNsYXNzIExvY2F0aW9uVHJhY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBwcm9wczogVml6UHJvcHM7XG4gIHN0YXRlOiB2b2lkOyAgLy8gbm8gc3RhdGVcbiAgc3RhdGljIGRlZmF1bHRTb3VyY2U6IE9iamVjdDtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogT2JqZWN0KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICB9XG5cbiAgZ2V0U2NhbGUoKTogU2NhbGUge1xuICAgIHJldHVybiBkM3V0aWxzLmdldFRyYWNrU2NhbGUodGhpcy5wcm9wcy5yYW5nZSwgdGhpcy5wcm9wcy53aWR0aCk7XG4gIH1cblxuICByZW5kZXIoKTogYW55IHtcbiAgICByZXR1cm4gPGNhbnZhcyAvPjtcbiAgfVxuXG4gIGNvbXBvbmVudERpZE1vdW50KCkge1xuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogYW55LCBwcmV2U3RhdGU6IGFueSkge1xuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgdXBkYXRlVmlzdWFsaXphdGlvbigpIHtcbiAgICB2YXIgY2FudmFzID0gUmVhY3RET00uZmluZERPTU5vZGUodGhpcyksXG4gICAgICAgIHtyYW5nZSwgd2lkdGgsIGhlaWdodH0gPSB0aGlzLnByb3BzLFxuICAgICAgICBzY2FsZSA9IHRoaXMuZ2V0U2NhbGUoKTtcblxuICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyhjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgdmFyIGN0eCA9IGRhdGFDYW52YXMuZ2V0RGF0YUNvbnRleHQoY2FudmFzVXRpbHMuZ2V0Q29udGV4dChjYW52YXMpKTtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5yZXNldCgpO1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgdmFyIG1pZFBvaW50ID0gTWF0aC5mbG9vcigocmFuZ2Uuc3RvcCArIHJhbmdlLnN0YXJ0KSAvIDIpLFxuICAgICAgICByaWdodExpbmVYID0gTWF0aC5yb3VuZChzY2FsZShtaWRQb2ludCArIDEpKSxcbiAgICAgICAgbGVmdExpbmVYID0gTWF0aC5yb3VuZChzY2FsZShtaWRQb2ludCkpO1xuXG4gICAgLy8gTGVmdCBsaW5lXG4gICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCBsZWZ0TGluZVggLSAwLjUsIDAsIGxlZnRMaW5lWCAtIDAuNSwgaGVpZ2h0KTtcblxuICAgIC8vIFJpZ2h0IGxpbmVcbiAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIHJpZ2h0TGluZVggLSAwLjUsIDAsIHJpZ2h0TGluZVggLSAwLjUsIGhlaWdodCk7XG5cbiAgICAvLyBNaWQgbGFiZWxcbiAgICB2YXIgbWlkWSA9IGhlaWdodCAvIDI7XG5cbiAgICBjdHguZmlsbFN0eWxlID0gc3R5bGUuTE9DX0ZPTlRfQ09MT1I7XG4gICAgY3R4LmZvbnQgPSBzdHlsZS5MT0NfRk9OVF9TVFlMRTtcbiAgICBjdHguZmlsbFRleHQobWlkUG9pbnQudG9Mb2NhbGVTdHJpbmcoKSArICcgYnAnLFxuICAgICAgICAgICAgICAgICByaWdodExpbmVYICsgc3R5bGUuTE9DX1RJQ0tfTEVOR1RIICsgc3R5bGUuTE9DX1RFWFRfUEFERElORyxcbiAgICAgICAgICAgICAgICAgbWlkWSArIHN0eWxlLkxPQ19URVhUX1lfT0ZGU0VUKTtcblxuICAgIC8vIENvbm5lY3QgbGFiZWwgd2l0aCB0aGUgcmlnaHQgbGluZVxuICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgcmlnaHRMaW5lWCAtIDAuNSwgbWlkWSAtIDAuNSwgcmlnaHRMaW5lWCArIHN0eWxlLkxPQ19USUNLX0xFTkdUSCAtIDAuNSwgbWlkWSAtIDAuNSk7XG5cbiAgICAvLyBjbGVhbiB1cFxuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cbn1cblxuTG9jYXRpb25UcmFjay5kaXNwbGF5TmFtZSA9ICdsb2NhdGlvbic7XG5Mb2NhdGlvblRyYWNrLmRlZmF1bHRTb3VyY2UgPSBFbXB0eVNvdXJjZS5jcmVhdGUoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBMb2NhdGlvblRyYWNrO1xuIiwiLyoqXG4gKiBEYXRhIG1hbmFnZW1lbnQgZm9yIFBpbGV1cFRyYWNrLlxuICpcbiAqIFRoaXMgY2xhc3MgZ3JvdXBzIHBhaXJlZCByZWFkcyBhbmQgcGlsZXMgdGhlbSB1cC5cbiAqXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtTdHJhbmQsIEFsaWdubWVudCwgQWxpZ25tZW50RGF0YVNvdXJjZX0gZnJvbSAnLi4vQWxpZ25tZW50JztcbmltcG9ydCB0eXBlIHtUd29CaXRTb3VyY2V9IGZyb20gJy4uL3NvdXJjZXMvVHdvQml0RGF0YVNvdXJjZSc7XG5pbXBvcnQgdHlwZSB7QmFzZVBhaXJ9IGZyb20gJy4vcGlsZXVwdXRpbHMnO1xuXG5pbXBvcnQgXyBmcm9tICd1bmRlcnNjb3JlJztcbmltcG9ydCBDb250aWdJbnRlcnZhbCBmcm9tICcuLi9Db250aWdJbnRlcnZhbCc7XG5pbXBvcnQgSW50ZXJ2YWwgZnJvbSAnLi4vSW50ZXJ2YWwnO1xuaW1wb3J0IHthZGRUb1BpbGV1cCwgZ2V0T3BJbmZvfSBmcm9tICcuL3BpbGV1cHV0aWxzJztcbmltcG9ydCB1dGlscyBmcm9tICcuLi91dGlscyc7XG5cbi8vIFRoaXMgYnVuZGxlcyBldmVyeXRoaW5nIGludHJpbnNpYyB0byB0aGUgYWxpZ25tZW50IHRoYXQgd2UgbmVlZCB0byBkaXNwbGF5XG4vLyBpdCwgaS5lLiBldmVyeXRoaW5nIG5vdCBkZXBlbmRlbmQgb24gc2NhbGUvdmlld3BvcnQuXG5leHBvcnQgdHlwZSBWaXN1YWxBbGlnbm1lbnQgPSB7XG4gIHJlYWQ6IEFsaWdubWVudDtcbiAgc3RyYW5kOiBTdHJhbmQ7XG4gIHJlZkxlbmd0aDogbnVtYmVyOyAgLy8gc3BhbiBvbiB0aGUgcmVmZXJlbmNlIChhY2NvdW50aW5nIGZvciBpbmRlbHMpXG4gIG1pc21hdGNoZXM6IEFycmF5PEJhc2VQYWlyPjtcbiAgb3BzOiBPYmplY3RbXTtcbn07XG5cbi8vIFRoaXMgaXMgdHlwaWNhbGx5IGEgcmVhZCBwYWlyLCBidXQgbWF5IGJlIGEgc2luZ2xlIHJlYWQgaW4gc29tZSBzaXR1YXRpb25zLlxuZXhwb3J0IHR5cGUgVmlzdWFsR3JvdXAgPSB7XG4gIGtleTogc3RyaW5nO1xuICByb3c6IG51bWJlcjsgIC8vIHBpbGV1cCByb3cuXG4gIHNwYW46IENvbnRpZ0ludGVydmFsPHN0cmluZz47ICAvLyB0aXAtdG8tdGlwIHNwYW4gZm9yIHRoZSByZWFkIGdyb3VwXG4gIGluc2VydDogP0ludGVydmFsOyAgLy8gaW50ZXJ2YWwgZm9yIHRoZSBjb25uZWN0b3IsIGlmIGFwcGxpY2FibGUuXG4gIGFsaWdubWVudHM6IFZpc3VhbEFsaWdubWVudFtdO1xufTtcblxuLy8gSW5zZXJ0IHNpemVzIHdpdGhpbiB0aGlzIHBlcmNlbnRpbGUgcmFuZ2Ugd2lsbCBiZSBjb25zaWRlcmVkIFwibm9ybWFsXCIuXG5jb25zdCBNSU5fT1VUTElFUl9QRVJDRU5USUxFID0gMC41O1xuY29uc3QgTUFYX09VVExJRVJfUEVSQ0VOVElMRSA9IDk5LjU7XG5jb25zdCBNQVhfSU5TRVJUX1NJWkUgPSAzMDAwMDsgIC8vIGlnbm9yZSBpbnNlcnRzIGxhcmdlciB0aGFuIHRoaXMgaW4gY2FsY3VsYXRpb25zXG5jb25zdCBNSU5fUkVBRFNfRk9SX09VVExJRVJTID0gNTAwOyAgLy8gbWluaW11bSByZWFkcyBmb3IgcmVsaWFibGUgc3RhdHNcblxuZXhwb3J0IHR5cGUgSW5zZXJ0U3RhdHMgPSB7XG4gIG1pbk91dGxpZXJTaXplOiBudW1iZXI7XG4gIG1heE91dGxpZXJTaXplOiBudW1iZXI7XG59O1xuXG4vLyBUaGlzIGNsYXNzIHByb3ZpZGVzIGRhdGEgbWFuYWdlbWVudCBmb3IgdGhlIHZpc3VhbGl6YXRpb24sIGdyb3VwaW5nIHBhaXJlZFxuLy8gcmVhZHMgYW5kIG1hbmFnaW5nIHRoZSBwaWxldXAuXG5jbGFzcyBQaWxldXBDYWNoZSB7XG4gIC8vIG1hcHMgZ3JvdXBLZXkgdG8gVmlzdWFsR3JvdXBcbiAgZ3JvdXBzOiB7W2tleTogc3RyaW5nXTogVmlzdWFsR3JvdXB9O1xuICByZWZUb1BpbGV1cDoge1trZXk6IHN0cmluZ106IEFycmF5PEludGVydmFsW10+fTtcbiAgcmVmZXJlbmNlU291cmNlOiBUd29CaXRTb3VyY2U7XG4gIHZpZXdBc1BhaXJzOiBib29sZWFuO1xuICBfaW5zZXJ0U3RhdHM6ID9JbnNlcnRTdGF0cztcblxuICBjb25zdHJ1Y3RvcihyZWZlcmVuY2VTb3VyY2U6IFR3b0JpdFNvdXJjZSwgdmlld0FzUGFpcnM6IGJvb2xlYW4pIHtcbiAgICB0aGlzLmdyb3VwcyA9IHt9O1xuICAgIHRoaXMucmVmVG9QaWxldXAgPSB7fTtcbiAgICB0aGlzLnJlZmVyZW5jZVNvdXJjZSA9IHJlZmVyZW5jZVNvdXJjZTtcbiAgICB0aGlzLnZpZXdBc1BhaXJzID0gdmlld0FzUGFpcnM7XG4gICAgdGhpcy5faW5zZXJ0U3RhdHMgPSBudWxsO1xuICB9XG5cbiAgLy8gcmVhZCBuYW1lIHdvdWxkIG1ha2UgYSBnb29kIGtleSwgYnV0IHBhaXJlZCByZWFkcyBmcm9tIGRpZmZlcmVudCBjb250aWdzXG4gIC8vIHNob3VsZG4ndCBiZSBncm91cGVkIHZpc3VhbGx5LiBIZW5jZSB3ZSB1c2UgcmVhZCBuYW1lICsgY29udGlnLlxuICBncm91cEtleShyZWFkOiBBbGlnbm1lbnQpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLnZpZXdBc1BhaXJzKSB7XG4gICAgICByZXR1cm4gYCR7cmVhZC5uYW1lfToke3JlYWQucmVmfWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZWFkLmdldEtleSgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIExvYWQgYSBuZXcgcmVhZCBpbnRvIHRoZSB2aXN1YWxpemF0aW9uIGNhY2hlLlxuICAvLyBDYWxsaW5nIHRoaXMgbXVsdGlwbGUgdGltZXMgd2l0aCB0aGUgc2FtZSByZWFkIGlzIGEgbm8tb3AuXG4gIGFkZEFsaWdubWVudChyZWFkOiBBbGlnbm1lbnQpIHtcbiAgICB0aGlzLl9pbnNlcnRTdGF0cyA9IG51bGw7ICAvLyBpbnZhbGlkYXRlXG4gICAgdmFyIGtleSA9IHRoaXMuZ3JvdXBLZXkocmVhZCksXG4gICAgICAgIHJhbmdlID0gcmVhZC5nZXRJbnRlcnZhbCgpO1xuXG4gICAgaWYgKCEoa2V5IGluIHRoaXMuZ3JvdXBzKSkge1xuICAgICAgdGhpcy5ncm91cHNba2V5XSA9IHtcbiAgICAgICAga2V5OiBrZXksXG4gICAgICAgIHJvdzogLTEsICAvLyBUQkRcbiAgICAgICAgaW5zZXJ0OiBudWxsLCAgLy8gVEJEXG4gICAgICAgIHNwYW46IHJhbmdlLFxuICAgICAgICBhbGlnbm1lbnRzOiBbXVxuICAgICAgfTtcbiAgICB9XG4gICAgdmFyIGdyb3VwID0gdGhpcy5ncm91cHNba2V5XTtcblxuICAgIGlmIChfLmZpbmQoZ3JvdXAuYWxpZ25tZW50cywgYSA9PiBhLnJlYWQgPT0gcmVhZCkpIHtcbiAgICAgIHJldHVybjsgIC8vIHdlJ3ZlIGFscmVhZHkgZ290IGl0LlxuICAgIH1cblxuICAgIHZhciBvcEluZm8gPSBnZXRPcEluZm8ocmVhZCwgdGhpcy5yZWZlcmVuY2VTb3VyY2UpO1xuICAgIHZhciB2aXN1YWxBbGlnbm1lbnQgPSB7XG4gICAgICByZWFkLFxuICAgICAgc3RyYW5kOiByZWFkLmdldFN0cmFuZCgpLFxuICAgICAgcmVmTGVuZ3RoOiByYW5nZS5sZW5ndGgoKSxcbiAgICAgIG9wczogb3BJbmZvLm9wcyxcbiAgICAgIG1pc21hdGNoZXM6IG9wSW5mby5taXNtYXRjaGVzXG4gICAgfTtcbiAgICBncm91cC5hbGlnbm1lbnRzLnB1c2godmlzdWFsQWxpZ25tZW50KTtcblxuICAgIHZhciBtYXRlSW50ZXJ2YWwgPSBudWxsO1xuICAgIGlmIChncm91cC5hbGlnbm1lbnRzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAvLyBUaGlzIGlzIHRoZSBmaXJzdCByZWFkIGluIHRoZSBncm91cC4gSW5mZXIgaXRzIHNwYW4gZnJvbSBpdHMgbWF0ZSBwcm9wZXJ0aWVzLlxuICAgICAgLy8gVE9ETzogaWYgdGhlIG1hdGUgQWxpZ25tZW50IGlzIGFsc28gYXZhaWxhYmxlLCBpdCB3b3VsZCBiZSBiZXR0ZXIgdG8gdXNlIHRoYXQuXG4gICAgICBpZiAodGhpcy52aWV3QXNQYWlycykge1xuICAgICAgICB2YXIgbWF0ZVByb3BzID0gcmVhZC5nZXRNYXRlUHJvcGVydGllcygpO1xuICAgICAgICB2YXIgaW50ZXJ2YWxzID0gW3JhbmdlXTtcbiAgICAgICAgaWYgKG1hdGVQcm9wcyAmJiBtYXRlUHJvcHMucmVmICYmIG1hdGVQcm9wcy5yZWYgPT0gcmVhZC5yZWYpIHtcbiAgICAgICAgICBtYXRlSW50ZXJ2YWwgPSBuZXcgQ29udGlnSW50ZXJ2YWwobWF0ZVByb3BzLnJlZiwgbWF0ZVByb3BzLnBvcywgbWF0ZVByb3BzLnBvcyArIHJhbmdlLmxlbmd0aCgpKTtcbiAgICAgICAgICBpbnRlcnZhbHMucHVzaChtYXRlSW50ZXJ2YWwpO1xuICAgICAgICB9XG4gICAgICAgIGdyb3VwID0gXy5leHRlbmQoZ3JvdXAsIHNwYW5BbmRJbnNlcnQoaW50ZXJ2YWxzKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBncm91cC5zcGFuID0gcmFuZ2U7XG4gICAgICB9XG5cbiAgICAgIGlmICghKHJlYWQucmVmIGluIHRoaXMucmVmVG9QaWxldXApKSB7XG4gICAgICAgIHRoaXMucmVmVG9QaWxldXBbcmVhZC5yZWZdID0gW107XG4gICAgICB9XG4gICAgICB2YXIgcGlsZXVwID0gdGhpcy5yZWZUb1BpbGV1cFtyZWFkLnJlZl07XG4gICAgICBncm91cC5yb3cgPSBhZGRUb1BpbGV1cChncm91cC5zcGFuLmludGVydmFsLCBwaWxldXApO1xuICAgIH0gZWxzZSBpZiAoZ3JvdXAuYWxpZ25tZW50cy5sZW5ndGggPT0gMikge1xuICAgICAgLy8gUmVmaW5lIHRoZSBjb25uZWN0b3JcbiAgICAgIG1hdGVJbnRlcnZhbCA9IGdyb3VwLmFsaWdubWVudHNbMF0ucmVhZC5nZXRJbnRlcnZhbCgpO1xuICAgICAgdmFyIHtzcGFuLCBpbnNlcnR9ID0gc3BhbkFuZEluc2VydChbcmFuZ2UsIG1hdGVJbnRlcnZhbF0pO1xuICAgICAgZ3JvdXAuaW5zZXJ0ID0gaW5zZXJ0O1xuICAgICAgaWYgKGluc2VydCkge1xuICAgICAgICBncm91cC5zcGFuID0gc3BhbjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdGhpcyBtdXN0IGJlIGEgY2hpbWVyaWMgcmVhZC5cbiAgICB9XG4gIH1cblxuICAvLyBVcGRhdGVzIHJlZmVyZW5jZSBtaXNtYXRjaCBpbmZvcm1hdGlvbiBmb3IgcHJldmlvdXNseS1sb2FkZWQgcmVhZHMuXG4gIHVwZGF0ZU1pc21hdGNoZXMocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pIHtcbiAgICBmb3IgKHZhciBrIGluIHRoaXMuZ3JvdXBzKSB7XG4gICAgICB2YXIgcmVhZHMgPSB0aGlzLmdyb3Vwc1trXS5hbGlnbm1lbnRzO1xuICAgICAgZm9yICh2YXIgdlJlYWQgb2YgcmVhZHMpIHtcbiAgICAgICAgdmFyIHJlYWQgPSB2UmVhZC5yZWFkO1xuICAgICAgICBpZiAocmVhZC5nZXRJbnRlcnZhbCgpLmNockludGVyc2VjdHMocmFuZ2UpKSB7XG4gICAgICAgICAgdmFyIG9wSW5mbyA9IGdldE9wSW5mbyhyZWFkLCB0aGlzLnJlZmVyZW5jZVNvdXJjZSk7XG4gICAgICAgICAgdlJlYWQubWlzbWF0Y2hlcyA9IG9wSW5mby5taXNtYXRjaGVzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcGlsZXVwRm9yUmVmKHJlZjogc3RyaW5nKTogQXJyYXk8SW50ZXJ2YWxbXT4ge1xuICAgIGlmIChyZWYgaW4gdGhpcy5yZWZUb1BpbGV1cCkge1xuICAgICAgcmV0dXJuIHRoaXMucmVmVG9QaWxldXBbcmVmXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGFsdCA9IHV0aWxzLmFsdENvbnRpZ05hbWUocmVmKTtcbiAgICAgIGlmIChhbHQgaW4gdGhpcy5yZWZUb1BpbGV1cCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWZUb1BpbGV1cFthbHRdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEhvdyBtYW55IHJvd3MgdGFsbCBpcyB0aGUgcGlsZXVwIGZvciBhIGdpdmVuIHJlZj8gVGhpcyBpcyByZWxhdGVkIHRvIHRoZVxuICAvLyBtYXhpbXVtIHJlYWQgZGVwdGguIFRoaXMgaXMgJ2NocictYWdub3N0aWMuXG4gIHBpbGV1cEhlaWdodEZvclJlZihyZWY6IHN0cmluZyk6IG51bWJlciB7XG4gICAgdmFyIHBpbGV1cCA9IHRoaXMucGlsZXVwRm9yUmVmKHJlZik7XG4gICAgcmV0dXJuIHBpbGV1cCA/IHBpbGV1cC5sZW5ndGggOiAwO1xuICB9XG5cbiAgLy8gRmluZCBncm91cHMgb3ZlcmxhcHBpbmcgdGhlIHJhbmdlLiBUaGlzIGlzICdjaHInLWFnbm9zdGljLlxuICBnZXRHcm91cHNPdmVybGFwcGluZyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IFZpc3VhbEdyb3VwW10ge1xuICAgIC8vIFRPRE86IHNwZWVkIHRoaXMgdXAgdXNpbmcgYW4gaW50ZXJ2YWwgdHJlZVxuICAgIHJldHVybiBfLmZpbHRlcih0aGlzLmdyb3VwcywgZ3JvdXAgPT4gZ3JvdXAuc3Bhbi5jaHJJbnRlcnNlY3RzKHJhbmdlKSk7XG4gIH1cblxuICAvLyBEZXRlcm1pbmUgdGhlIG51bWJlciBvZiBncm91cHMgYXQgYSBsb2N1cy5cbiAgLy8gTGlrZSBnZXRHcm91cHNPdmVybGFwcGluZyhyYW5nZSkubGVuZ3RoID4gMCwgYnV0IG1vcmUgZWZmaWNpZW50LlxuICBhbnlHcm91cHNPdmVybGFwcGluZyhyYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPik6IGJvb2xlYW4ge1xuICAgIGZvciAodmFyIGsgaW4gdGhpcy5ncm91cHMpIHtcbiAgICAgIHZhciBncm91cCA9IHRoaXMuZ3JvdXBzW2tdO1xuICAgICAgaWYgKGdyb3VwLnNwYW4uY2hySW50ZXJzZWN0cyhyYW5nZSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIFJlLXNvcnQgdGhlIHBpbGV1cCBzbyB0aGF0IHJlYWRzIG92ZXJsYXBwaW5nIHRoZSBsb2N1cyBhcmUgb24gdG9wLlxuICBzb3J0UmVhZHNBdChjb250aWc6IHN0cmluZywgcG9zaXRpb246IG51bWJlcikge1xuICAgIC8vIFN0cmF0ZWd5OiBGb3IgZWFjaCBwaWxldXAgcm93LCBkZXRlcm1pbmUgd2hldGhlciBpdCBvdmVybGFwcyB0aGUgbG9jdXMuXG4gICAgLy8gVGhlbiBzb3J0IHRoZSBhcnJheSBpbmRpY2VzIHRvIGdldCBhIHBlcm11dGF0aW9uLlxuICAgIC8vIEJ1aWxkIGEgbmV3IHBpbGV1cCBieSBwZXJtdXRpbmcgdGhlIG9sZCBwaWxldXBcbiAgICAvLyBVcGRhdGUgYWxsIHRoZSBgcm93YCBwcm9wZXJ0aWVzIG9mIHRoZSByZWxldmFudCB2aXN1YWwgZ3JvdXBzXG5cbiAgICBjb25zdCBwaWxldXAgPSB0aGlzLnBpbGV1cEZvclJlZihjb250aWcpO1xuXG4gICAgLy8gRmluZCB0aGUgZ3JvdXBzIGZvciB3aGljaCBhbiBhbGlnbm1lbnQgb3ZlcmxhcHMgdGhlIGxvY3VzLlxuICAgIHZhciBncm91cHMgPSBfLmZpbHRlcih0aGlzLmdyb3VwcyxcbiAgICAgICAgICBncm91cCA9PiBfLmFueShncm91cC5hbGlnbm1lbnRzLFxuICAgICAgICAgICAgICBhID0+IGEucmVhZC5nZXRJbnRlcnZhbCgpLmNockNvbnRhaW5zTG9jdXMoY29udGlnLCBwb3NpdGlvbikpKTtcblxuICAgIC8vIEZvciBlYWNoIHJvdywgZmluZCB0aGUgbGVmdC1tb3N0IHBvaW50IChmb3Igc29ydGluZykuXG4gICAgdmFyIHJvd3NPdmVybGFwcGluZyA9XG4gICAgICAgIF8ubWFwT2JqZWN0KF8uZ3JvdXBCeShncm91cHMsIGcgPT4gZy5yb3cpLFxuICAgICAgICAgICAgICAgICAgICBncyA9PiBfLm1pbihncywgZz0+Zy5zcGFuLnN0YXJ0KCkpLnNwYW4uc3RhcnQoKSk7XG5cbiAgICAvLyBTb3J0IGdyb3VwcyBieSB3aGV0aGVyIHRoZXkgb3ZlcmxhcCwgdGhlbiBieSB0aGVpciBzdGFydC5cbiAgICAvLyBUT0RPOiBpcyB0aGVyZSBhbiBlYXNpZXIgd2F5IHRvIGNvbnN0cnVjdCB0aGUgZm9yd2FyZCBtYXAgZGlyZWN0bHk/XG4gICAgdmFyIHBlcm11dGF0aW9uID0gXy5zb3J0QnkoXy5yYW5nZSgwLCBwaWxldXAubGVuZ3RoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHggPT4gcm93c092ZXJsYXBwaW5nW2lkeF0gfHwgSW5maW5pdHkpO1xuICAgIHZhciBvbGRUb05ldyA9IChbXTogbnVtYmVyW10pO1xuICAgIHBlcm11dGF0aW9uLmZvckVhY2goKG9sZEluZGV4LCBuZXdJbmRleCkgPT4geyBvbGRUb05ld1tvbGRJbmRleF0gPSBuZXdJbmRleDsgfSk7XG4gICAgdmFyIG5ld1BpbGV1cCA9IF8ucmFuZ2UoMCwgcGlsZXVwLmxlbmd0aCkubWFwKGkgPT4gcGlsZXVwW29sZFRvTmV3W2ldXSk7XG5cbiAgICB2YXIgbm9ybVJlZiA9IGNvbnRpZyBpbiB0aGlzLnJlZlRvUGlsZXVwID8gY29udGlnIDogdXRpbHMuYWx0Q29udGlnTmFtZShjb250aWcpO1xuICAgIHRoaXMucmVmVG9QaWxldXBbbm9ybVJlZl0gPSBuZXdQaWxldXA7XG5cbiAgICBfLmVhY2godGhpcy5ncm91cHMsIGcgPT4ge1xuICAgICAgaWYgKGcuc3Bhbi5jaHJPbkNvbnRpZyhjb250aWcpKSB7XG4gICAgICAgIGcucm93ID0gb2xkVG9OZXdbZy5yb3ddO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZ2V0SW5zZXJ0U3RhdHMoKTogSW5zZXJ0U3RhdHMge1xuICAgIGlmICh0aGlzLl9pbnNlcnRTdGF0cykgcmV0dXJuIHRoaXMuX2luc2VydFN0YXRzO1xuICAgIHZhciBpbnNlcnRzID0gXy5tYXAodGhpcy5ncm91cHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBnID0+IGcuYWxpZ25tZW50c1swXS5yZWFkLmdldEluZmVycmVkSW5zZXJ0U2l6ZSgpKVxuICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoeCA9PiB4IDwgTUFYX0lOU0VSVF9TSVpFKTtcbiAgICBjb25zdCBpbnNlcnRTdGF0cyA9IGluc2VydHMubGVuZ3RoID49IE1JTl9SRUFEU19GT1JfT1VUTElFUlMgPyB7XG4gICAgICBtaW5PdXRsaWVyU2l6ZTogdXRpbHMuY29tcHV0ZVBlcmNlbnRpbGUoaW5zZXJ0cywgTUlOX09VVExJRVJfUEVSQ0VOVElMRSksXG4gICAgICBtYXhPdXRsaWVyU2l6ZTogdXRpbHMuY29tcHV0ZVBlcmNlbnRpbGUoaW5zZXJ0cywgTUFYX09VVExJRVJfUEVSQ0VOVElMRSlcbiAgICB9IDoge1xuICAgICAgbWluT3V0bGllclNpemU6IDAsXG4gICAgICBtYXhPdXRsaWVyU2l6ZTogSW5maW5pdHlcbiAgICB9O1xuXG4gICAgdGhpcy5faW5zZXJ0U3RhdHMgPSBpbnNlcnRTdGF0cztcbiAgICByZXR1cm4gaW5zZXJ0U3RhdHM7XG4gIH1cbn1cblxuLy8gSGVscGVyIG1ldGhvZCBmb3IgYWRkUmVhZC5cbi8vIEdpdmVuIDEtMiBpbnRlcnZhbHMsIGNvbXB1dGUgdGhlaXIgc3BhbiBhbmQgaW5zZXJ0IChpbnRlcnZhbCBiZXR3ZWVuIHRoZW0pLlxuLy8gRm9yIG9uZSBpbnRlcnZhbCwgdGhlc2UgYXJlIGJvdGggdHJpdmlhbC5cbi8vIFRPRE86IHdoYXQgdGhpcyBjYWxscyBhbiBcImluc2VydFwiIGlzIG5vdCB3aGF0IG1vc3QgcGVvcGxlIG1lYW4gYnkgdGhhdC5cbmZ1bmN0aW9uIHNwYW5BbmRJbnNlcnQoaW50ZXJ2YWxzOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+W10pIHtcbiAgaWYgKGludGVydmFscy5sZW5ndGggPT0gMSkge1xuICAgIHJldHVybiB7aW5zZXJ0OiBudWxsLCBzcGFuOiBpbnRlcnZhbHNbMF19O1xuICB9IGVsc2UgaWYgKGludGVydmFscy5sZW5ndGggIT0yKSB7XG4gICAgdGhyb3cgYENhbGxlZCBzcGFuQW5kSW5zZXJ0IHdpdGggJHtpbnRlcnZhbHMubGVuZ3RofSBcXG5vdGluIFsxLCAyXWA7XG4gIH1cblxuICBpZiAoIWludGVydmFsc1swXS5jaHJPbkNvbnRpZyhpbnRlcnZhbHNbMV0uY29udGlnKSkge1xuICAgIHJldHVybiBzcGFuQW5kSW5zZXJ0KFtpbnRlcnZhbHNbMF1dKTtcbiAgfVxuICB2YXIgaXYxID0gaW50ZXJ2YWxzWzBdLmludGVydmFsLFxuICAgICAgaXYyID0gaW50ZXJ2YWxzWzFdLmludGVydmFsLFxuICAgICAgaW5zZXJ0ID0gaXYxLnN0YXJ0IDwgaXYyLnN0YXJ0ID9cbiAgICAgICAgICBuZXcgSW50ZXJ2YWwoaXYxLnN0b3AsIGl2Mi5zdGFydCkgOlxuICAgICAgICAgIG5ldyBJbnRlcnZhbChpdjIuc3RvcCwgaXYxLnN0YXJ0KTtcblxuICB2YXIgc3BhbiA9IEludGVydmFsLmJvdW5kaW5nSW50ZXJ2YWwoW2l2MSwgaXYyXSk7XG4gIHJldHVybiB7XG4gICAgaW5zZXJ0LFxuICAgIHNwYW46IG5ldyBDb250aWdJbnRlcnZhbChpbnRlcnZhbHNbMF0uY29udGlnLCBzcGFuLnN0YXJ0LCBzcGFuLnN0b3ApXG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gUGlsZXVwQ2FjaGU7XG4iLCIvKipcbiAqIENvdmVyYWdlIHZpc3VhbGl6YXRpb24gb2YgQWxpZ25tZW50IHNvdXJjZXMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtBbGlnbm1lbnQsIEFsaWdubWVudERhdGFTb3VyY2V9IGZyb20gJy4uL0FsaWdubWVudCc7XG5pbXBvcnQgdHlwZSBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5pbXBvcnQgR0E0R0hEYXRhU291cmNlIGZyb20gJy4uL3NvdXJjZXMvR0E0R0hEYXRhU291cmNlJztcbmltcG9ydCB0eXBlIHtUd29CaXRTb3VyY2V9IGZyb20gJy4uL3NvdXJjZXMvVHdvQml0RGF0YVNvdXJjZSc7XG5pbXBvcnQgdHlwZSB7RGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IHR5cGUge0JpblN1bW1hcnl9IGZyb20gJy4vQ292ZXJhZ2VDYWNoZSc7XG5pbXBvcnQgdHlwZSB7U2NhbGV9IGZyb20gJy4vZDN1dGlscyc7XG5cbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgc2NhbGUgZnJvbSAnLi4vc2NhbGUnO1xuaW1wb3J0IHNoYWxsb3dFcXVhbHMgZnJvbSAnc2hhbGxvdy1lcXVhbHMnO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuaW1wb3J0IGRhdGFDYW52YXMgZnJvbSAnZGF0YS1jYW52YXMnO1xuaW1wb3J0IGNhbnZhc1V0aWxzIGZyb20gJy4vY2FudmFzLXV0aWxzJztcbmltcG9ydCBDb3ZlcmFnZUNhY2hlIGZyb20gJy4vQ292ZXJhZ2VDYWNoZSc7XG5pbXBvcnQgVGlsZWRDYW52YXMgZnJvbSAnLi9UaWxlZENhbnZhcyc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi4vc3R5bGUnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcblxuLy8gQmFzaWMgc2V0dXAgKFRPRE86IG1ha2UgdGhpcyBjb25maWd1cmFibGUgYnkgdGhlIHVzZXIpXG5jb25zdCBTSE9XX01JU01BVENIRVMgPSB0cnVlO1xuXG4vLyBPbmx5IHNob3cgbWlzbWF0Y2ggaW5mb3JtYXRpb24gd2hlbiB0aGVyZSBhcmUgbW9yZSB0aGFuIHRoaXMgbWFueVxuLy8gcmVhZHMgc3VwcG9ydGluZyB0aGF0IG1pc21hdGNoLlxuY29uc3QgTUlTTUFUQ0hfVEhSRVNIT0xEID0gMTtcblxuXG5jbGFzcyBDb3ZlcmFnZVRpbGVkQ2FudmFzIGV4dGVuZHMgVGlsZWRDYW52YXMge1xuICBoZWlnaHQ6IG51bWJlcjtcbiAgb3B0aW9uczogT2JqZWN0O1xuICBjYWNoZTogQ292ZXJhZ2VDYWNoZTtcblxuICBjb25zdHJ1Y3RvcihjYWNoZTogQ292ZXJhZ2VDYWNoZSwgaGVpZ2h0OiBudW1iZXIsIG9wdGlvbnM6IE9iamVjdCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLmNhY2hlID0gY2FjaGU7XG4gICAgdGhpcy5oZWlnaHQgPSBNYXRoLm1heCgxLCBoZWlnaHQpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICBoZWlnaHRGb3JSZWYocmVmOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmhlaWdodDtcbiAgfVxuXG4gIHVwZGF0ZShoZWlnaHQ6IG51bWJlciwgb3B0aW9uczogT2JqZWN0KSB7XG4gICAgLy8gd29ya2Fyb3VuZCBmb3IgYW4gaXNzdWUgaW4gUGhhbnRvbUpTIHdoZXJlIGhlaWdodCBhbHdheXMgY29tZXMgb3V0IHRvIHplcm8uXG4gICAgdGhpcy5oZWlnaHQgPSBNYXRoLm1heCgxLCBoZWlnaHQpO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICB5U2NhbGVGb3JSZWYocmVmOiBzdHJpbmcpOiAoeTogbnVtYmVyKSA9PiBudW1iZXIge1xuICAgIHZhciBtYXhDb3ZlcmFnZSA9IHRoaXMuY2FjaGUubWF4Q292ZXJhZ2VGb3JSZWYocmVmKTtcblxuICAgIHZhciBwYWRkaW5nID0gMTA7ICAvLyBUT0RPOiBtb3ZlIGludG8gc3R5bGVcbiAgICByZXR1cm4gc2NhbGUubGluZWFyKClcbiAgICAgIC5kb21haW4oW21heENvdmVyYWdlLCAwXSlcbiAgICAgIC5yYW5nZShbcGFkZGluZywgdGhpcy5oZWlnaHQgLSBwYWRkaW5nXSlcbiAgICAgIC5uaWNlKCk7XG4gIH1cblxuICByZW5kZXIoY3R4OiBEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgICAgICAgeFNjYWxlOiAoeDogbnVtYmVyKT0+bnVtYmVyLFxuICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pIHtcbiAgICB2YXIgYmlucyA9IHRoaXMuY2FjaGUuYmluc0ZvclJlZihyYW5nZS5jb250aWcpO1xuICAgIHZhciB5U2NhbGUgPSB0aGlzLnlTY2FsZUZvclJlZihyYW5nZS5jb250aWcpO1xuICAgIHZhciByZWxheGVkUmFuZ2UgPSBuZXcgQ29udGlnSW50ZXJ2YWwoXG4gICAgICAgIHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQoKSAtIDEsIHJhbmdlLnN0b3AoKSArIDEpO1xuICAgIHJlbmRlckJhcnMoY3R4LCB4U2NhbGUsIHlTY2FsZSwgcmVsYXhlZFJhbmdlLCBiaW5zLCB0aGlzLm9wdGlvbnMpO1xuICB9XG59XG5cblxuLy8gRHJhdyBjb3ZlcmFnZSBiaW5zICYgbWlzbWF0Y2hlc1xuZnVuY3Rpb24gcmVuZGVyQmFycyhjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICAgICAgICAgICAgIHhTY2FsZTogKG51bTogbnVtYmVyKSA9PiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIHlTY2FsZTogKG51bTogbnVtYmVyKSA9PiBudW1iZXIsXG4gICAgICAgICAgICAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+LFxuICAgICAgICAgICAgICAgICAgICBiaW5zOiB7W2tleTogbnVtYmVyXTogQmluU3VtbWFyeX0sXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IE9iamVjdCkge1xuICBpZiAoXy5pc0VtcHR5KGJpbnMpKSByZXR1cm47XG5cbiAgdmFyIGJhcldpZHRoID0geFNjYWxlKDEpIC0geFNjYWxlKDApO1xuICB2YXIgc2hvd1BhZGRpbmcgPSAoYmFyV2lkdGggPiBzdHlsZS5DT1ZFUkFHRV9NSU5fQkFSX1dJRFRIX0ZPUl9HQVApO1xuICB2YXIgcGFkZGluZyA9IHNob3dQYWRkaW5nID8gMSA6IDA7XG5cbiAgdmFyIGJpblBvcyA9IGZ1bmN0aW9uKHBvczogbnVtYmVyLCBjb3VudDogbnVtYmVyKSB7XG4gICAgLy8gUm91bmQgdG8gaW50ZWdlciBjb29yZGluYXRlcyBmb3IgY3Jpc3AgbGluZXMsIHdpdGhvdXQgYWxpYXNpbmcuXG4gICAgdmFyIGJhclgxID0gTWF0aC5yb3VuZCh4U2NhbGUoMSArIHBvcykpLFxuICAgICAgICBiYXJYMiA9IE1hdGgucm91bmQoeFNjYWxlKDIgKyBwb3MpKSAtIHBhZGRpbmcsXG4gICAgICAgIGJhclkgPSBNYXRoLnJvdW5kKHlTY2FsZShjb3VudCkpO1xuICAgIHJldHVybiB7YmFyWDEsIGJhclgyLCBiYXJZfTtcbiAgfTtcblxuICB2YXIgbWlzbWF0Y2hCaW5zID0gKHt9IDoge1trZXk6bnVtYmVyXTogQmluU3VtbWFyeX0pOyAgLy8ga2VlcCB0cmFjayBvZiB3aGljaCBvbmVzIGhhdmUgbWlzbWF0Y2hlc1xuICB2YXIgdkJhc2VQb3NZID0geVNjYWxlKDApOyAgLy8gdGhlIHZlcnkgYm90dG9tIG9mIHRoZSBjYW52YXNcbiAgdmFyIHN0YXJ0ID0gcmFuZ2Uuc3RhcnQoKSxcbiAgICAgIHN0b3AgPSByYW5nZS5zdG9wKCk7XG4gIGxldCB7YmFyWDF9ID0gYmluUG9zKHN0YXJ0LCAoc3RhcnQgaW4gYmlucykgPyBiaW5zW3N0YXJ0XS5jb3VudCA6IDApO1xuICBjdHguZmlsbFN0eWxlID0gc3R5bGUuQ09WRVJBR0VfQklOX0NPTE9SO1xuICBjdHguYmVnaW5QYXRoKCk7XG4gIGN0eC5tb3ZlVG8oYmFyWDEsIHZCYXNlUG9zWSk7XG4gIGZvciAodmFyIHBvcyA9IHN0YXJ0OyBwb3MgPCBzdG9wOyBwb3MrKykge1xuICAgIHZhciBiaW4gPSBiaW5zW3Bvc107XG4gICAgaWYgKCFiaW4pIGNvbnRpbnVlO1xuICAgIGN0eC5wdXNoT2JqZWN0KGJpbik7XG4gICAgbGV0IHtiYXJYMSwgYmFyWDIsIGJhcll9ID0gYmluUG9zKHBvcywgYmluLmNvdW50KTtcbiAgICBjdHgubGluZVRvKGJhclgxLCBiYXJZKTtcbiAgICBjdHgubGluZVRvKGJhclgyLCBiYXJZKTtcbiAgICBpZiAoc2hvd1BhZGRpbmcpIHtcbiAgICAgIGN0eC5saW5lVG8oYmFyWDIsIHZCYXNlUG9zWSk7XG4gICAgICBjdHgubGluZVRvKGJhclgyICsgMSwgdkJhc2VQb3NZKTtcbiAgICB9XG5cbiAgICBpZiAoU0hPV19NSVNNQVRDSEVTICYmICFfLmlzRW1wdHkoYmluLm1pc21hdGNoZXMpKSB7XG4gICAgICBtaXNtYXRjaEJpbnNbcG9zXSA9IGJpbjtcbiAgICB9XG5cbiAgICBjdHgucG9wT2JqZWN0KCk7XG4gIH1cbiAgbGV0IHtiYXJYMn0gPSBiaW5Qb3Moc3RvcCwgKHN0b3AgaW4gYmlucykgPyBiaW5zW3N0b3BdLmNvdW50IDogMCk7XG4gIGN0eC5saW5lVG8oYmFyWDIsIHZCYXNlUG9zWSk7ICAvLyByaWdodCBlZGdlIG9mIHRoZSByaWdodCBiYXIuXG4gIGN0eC5jbG9zZVBhdGgoKTtcbiAgY3R4LmZpbGwoKTtcblxuICAvLyBOb3cgcmVuZGVyIHRoZSBtaXNtYXRjaGVzXG4gIF8uZWFjaChtaXNtYXRjaEJpbnMsIChiaW4sIHBvcykgPT4ge1xuICAgIGlmICghYmluLm1pc21hdGNoZXMpIHJldHVybjsgIC8vIHRoaXMgaXMgaGVyZSBmb3IgRmxvdzsgaXQgY2FuJ3QgcmVhbGx5IGhhcHBlbi5cbiAgICBjb25zdCBtaXNtYXRjaGVzID0gXy5jbG9uZShiaW4ubWlzbWF0Y2hlcyk7XG4gICAgcG9zID0gTnVtYmVyKHBvcyk7ICAvLyBvYmplY3Qga2V5cyBhcmUgc3RyaW5ncywgbm90IG51bWJlcnMuXG5cbiAgICAvLyBJZiB0aGlzIGlzIGEgaGlnaC1mcmVxdWVuY3kgdmFyaWFudCwgYWRkIGluIHRoZSByZWZlcmVuY2UuXG4gICAgdmFyIG1pc21hdGNoQ291bnQgPSBfLnJlZHVjZShtaXNtYXRjaGVzLCAoeCwgeSkgPT4geCArIHkpO1xuICAgIHZhciBtb3N0RnJlcXVlbnRNaXNtYXRjaCA9IF8ubWF4KG1pc21hdGNoZXMpO1xuICAgIGlmIChtb3N0RnJlcXVlbnRNaXNtYXRjaCA+IE1JU01BVENIX1RIUkVTSE9MRCAmJlxuICAgICAgICBtaXNtYXRjaENvdW50ID4gb3B0aW9ucy52YWZDb2xvclRocmVzaG9sZCAqIGJpbi5jb3VudCAmJlxuICAgICAgICBtaXNtYXRjaENvdW50IDwgYmluLmNvdW50KSB7XG4gICAgICBpZiAoYmluLnJlZikgeyAgLy8gaGVyZSBmb3IgZmxvdzsgY2FuJ3QgcmVhbHkgaGFwcGVuXG4gICAgICAgIG1pc21hdGNoZXNbYmluLnJlZl0gPSBiaW4uY291bnQgLSBtaXNtYXRjaENvdW50O1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCB7YmFyWDEsIGJhclgyfSA9IGJpblBvcyhwb3MsIGJpbi5jb3VudCk7XG4gICAgY3R4LnB1c2hPYmplY3QoYmluKTtcbiAgICB2YXIgY291bnRTb0ZhciA9IDA7XG4gICAgXy5jaGFpbihtaXNtYXRjaGVzKVxuICAgICAgLm1hcCgoY291bnQsIGJhc2UpID0+ICh7Y291bnQsIGJhc2V9KSkgIC8vIHB1bGwgYmFzZSBpbnRvIHRoZSBvYmplY3RcbiAgICAgIC5maWx0ZXIoKHtjb3VudH0pID0+IGNvdW50ID4gTUlTTUFUQ0hfVEhSRVNIT0xEKVxuICAgICAgLnNvcnRCeSgoe2NvdW50fSkgPT4gLWNvdW50KSAgLy8gdGhlIG1vc3QgY29tbW9uIG1pc21hdGNoIGF0IHRoZSBib3R0b21cbiAgICAgIC5lYWNoKCh7Y291bnQsIGJhc2V9KSA9PiB7XG4gICAgICAgIHZhciBtaXNNYXRjaE9iaiA9IHtwb3NpdGlvbjogMSArIHBvcywgY291bnQsIGJhc2V9O1xuICAgICAgICBjdHgucHVzaE9iamVjdChtaXNNYXRjaE9iaik7ICAvLyBmb3IgZGVidWdnaW5nIGFuZCBjbGljay10cmFja2luZ1xuXG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5CQVNFX0NPTE9SU1tiYXNlXTtcbiAgICAgICAgdmFyIHkgPSB5U2NhbGUoY291bnRTb0Zhcik7XG4gICAgICAgIGN0eC5maWxsUmVjdChiYXJYMSxcbiAgICAgICAgICAgICAgICAgICAgIHksXG4gICAgICAgICAgICAgICAgICAgICBNYXRoLm1heCgxLCBiYXJYMiAtIGJhclgxKSwgIC8vIG1pbiB3aWR0aCBvZiAxcHhcbiAgICAgICAgICAgICAgICAgICAgIHlTY2FsZShjb3VudFNvRmFyICsgY291bnQpIC0geSk7XG4gICAgICAgIGNvdW50U29GYXIgKz0gY291bnQ7XG5cbiAgICAgICAgY3R4LnBvcE9iamVjdCgpO1xuICAgICAgfSk7XG4gICAgY3R4LnBvcE9iamVjdCgpO1xuICB9KTtcbn1cblxudHlwZSBQcm9wcyA9IHtcbiAgd2lkdGg6IG51bWJlcjtcbiAgaGVpZ2h0OiBudW1iZXI7XG4gIHJhbmdlOiBHZW5vbWVSYW5nZTtcbiAgc291cmNlOiBBbGlnbm1lbnREYXRhU291cmNlO1xuICByZWZlcmVuY2VTb3VyY2U6IFR3b0JpdFNvdXJjZTtcbiAgb3B0aW9uczoge1xuICAgIHZhZkNvbG9yVGhyZXNob2xkOiBudW1iZXJcbiAgfVxufTtcblxuY2xhc3MgUGlsZXVwQ292ZXJhZ2VUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHByb3BzOiBQcm9wcztcbiAgc3RhdGU6IHZvaWQ7XG4gIGNhY2hlOiBDb3ZlcmFnZUNhY2hlO1xuICB0aWxlczogQ292ZXJhZ2VUaWxlZENhbnZhcztcbiAgc3RhdGljIGRlZmF1bHRPcHRpb25zOiBPYmplY3Q7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IFByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgdmFyIHJhbmdlTGVuZ3RoID0gdGhpcy5wcm9wcy5yYW5nZS5zdG9wIC0gdGhpcy5wcm9wcy5yYW5nZS5zdGFydDtcbiAgICAvLyBSZW5kZXIgY292ZXJhZ2UgaWYgYmFzZSBwYWlycyBpcyBsZXNzIHRoYW4gdGhyZXNob2xkXG4gICAgaWYgKHJhbmdlTGVuZ3RoIDw9IEdBNEdIRGF0YVNvdXJjZS5NQVhfQkFTRV9QQUlSU19UT19GRVRDSCkge1xuICAgICAgcmV0dXJuIDxjYW52YXMgcmVmPSdjYW52YXMnIG9uQ2xpY2s9e3RoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKX0gLz47XG4gICAgfSBlbHNlIHJldHVybiA8ZGl2PjwvZGl2PjtcbiAgfVxuXG4gIGdldFNjYWxlKCk6IFNjYWxlIHtcbiAgICByZXR1cm4gZDN1dGlscy5nZXRUcmFja1NjYWxlKHRoaXMucHJvcHMucmFuZ2UsIHRoaXMucHJvcHMud2lkdGgpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy5jYWNoZSA9IG5ldyBDb3ZlcmFnZUNhY2hlKHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlKTtcbiAgICB0aGlzLnRpbGVzID0gbmV3IENvdmVyYWdlVGlsZWRDYW52YXModGhpcy5jYWNoZSwgdGhpcy5wcm9wcy5oZWlnaHQsIHRoaXMucHJvcHMub3B0aW9ucyk7XG5cbiAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV3ZGF0YScsIHJhbmdlID0+IHtcbiAgICAgIHZhciBvbGRNYXggPSB0aGlzLmNhY2hlLm1heENvdmVyYWdlRm9yUmVmKHJhbmdlLmNvbnRpZyk7XG4gICAgICB0aGlzLnByb3BzLnNvdXJjZS5nZXRBbGlnbm1lbnRzSW5SYW5nZShyYW5nZSlcbiAgICAgICAgICAgICAgICAgICAgICAgLmZvckVhY2gocmVhZCA9PiB0aGlzLmNhY2hlLmFkZEFsaWdubWVudChyZWFkKSk7XG4gICAgICB2YXIgbmV3TWF4ID0gdGhpcy5jYWNoZS5tYXhDb3ZlcmFnZUZvclJlZihyYW5nZS5jb250aWcpO1xuXG4gICAgICBpZiAob2xkTWF4ICE9IG5ld01heCkge1xuICAgICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVBbGwoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZVJhbmdlKHJhbmdlKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudmlzdWFsaXplQ292ZXJhZ2UoKTtcbiAgICB9KTtcblxuICAgIHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLm9uKCduZXdkYXRhJywgcmFuZ2UgPT4ge1xuICAgICAgdGhpcy5jYWNoZS51cGRhdGVNaXNtYXRjaGVzKHJhbmdlKTtcbiAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZVJhbmdlKHJhbmdlKTtcbiAgICAgIHRoaXMudmlzdWFsaXplQ292ZXJhZ2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IGFueSwgcHJldlN0YXRlOiBhbnkpIHtcbiAgICBpZiAoIXNoYWxsb3dFcXVhbHModGhpcy5wcm9wcywgcHJldlByb3BzKSB8fFxuICAgICAgICAhc2hhbGxvd0VxdWFscyh0aGlzLnN0YXRlLCBwcmV2U3RhdGUpKSB7XG4gICAgICBpZiAodGhpcy5wcm9wcy5oZWlnaHQgIT0gcHJldlByb3BzLmhlaWdodCB8fFxuICAgICAgICAgIHRoaXMucHJvcHMub3B0aW9ucyAhPSBwcmV2UHJvcHMub3B0aW9ucykge1xuICAgICAgICB0aGlzLnRpbGVzLnVwZGF0ZSh0aGlzLnByb3BzLmhlaWdodCwgdGhpcy5wcm9wcy5vcHRpb25zKTtcbiAgICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlQWxsKCk7XG4gICAgICB9XG4gICAgICB0aGlzLnZpc3VhbGl6ZUNvdmVyYWdlKCk7XG4gICAgfVxuICB9XG5cbiAgZ2V0Q29udGV4dCgpOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQge1xuICAgIHZhciBjYW52YXMgPSAodGhpcy5yZWZzLmNhbnZhcyA6IEhUTUxDYW52YXNFbGVtZW50KTtcbiAgICAvLyBUaGUgdHlwZWNhc3QgdGhyb3VnaCBgYW55YCBpcyBiZWNhdXNlIGdldENvbnRleHQgY291bGQgcmV0dXJuIGEgV2ViR0wgY29udGV4dC5cbiAgICB2YXIgY3R4ID0gKChjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSA6IGFueSkgOiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpO1xuICAgIHJldHVybiBjdHg7XG4gIH1cblxuICAvLyBEcmF3IHRocmVlIHRpY2tzIG9uIHRoZSBsZWZ0IHRvIHNldCB0aGUgc2NhbGUgZm9yIHRoZSB1c2VyXG4gIHJlbmRlclRpY2tzKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgeVNjYWxlOiAobnVtOiBudW1iZXIpPT5udW1iZXIpIHtcbiAgICB2YXIgYXhpc01heCA9IHlTY2FsZS5kb21haW4oKVswXTtcbiAgICBbMCwgTWF0aC5yb3VuZChheGlzTWF4IC8gMiksIGF4aXNNYXhdLmZvckVhY2godGljayA9PiB7XG4gICAgICAvLyBEcmF3IGEgbGluZSBpbmRpY2F0aW5nIHRoZSB0aWNrXG4gICAgICBjdHgucHVzaE9iamVjdCh7dmFsdWU6IHRpY2ssIHR5cGU6ICd0aWNrJ30pO1xuICAgICAgdmFyIHRpY2tQb3NZID0gTWF0aC5yb3VuZCh5U2NhbGUodGljaykpKzEwO1xuICAgICAgY3R4LnN0cm9rZVN0eWxlID0gc3R5bGUuQ09WRVJBR0VfRk9OVF9DT0xPUjtcbiAgICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgMCwgdGlja1Bvc1ksIHN0eWxlLkNPVkVSQUdFX1RJQ0tfTEVOR1RILCB0aWNrUG9zWSk7XG4gICAgICBjdHgucG9wT2JqZWN0KCk7XG5cbiAgICAgIGlmICh0aWNrID4gMCkge1xuICAgICAgICB2YXIgdGlja0xhYmVsID0gdGljayArICdYJztcbiAgICAgICAgY3R4LnB1c2hPYmplY3Qoe3ZhbHVlOiB0aWNrLCBsYWJlbDogdGlja0xhYmVsLCB0eXBlOiAnbGFiZWwnfSk7XG4gICAgICAgIC8vIE5vdyBwcmludCB0aGUgY292ZXJhZ2UgaW5mb3JtYXRpb25cbiAgICAgICAgY3R4LmZvbnQgPSBzdHlsZS5DT1ZFUkFHRV9GT05UX1NUWUxFO1xuICAgICAgICB2YXIgdGV4dFBvc1ggPSBzdHlsZS5DT1ZFUkFHRV9USUNLX0xFTkdUSCArIHN0eWxlLkNPVkVSQUdFX1RFWFRfUEFERElORyxcbiAgICAgICAgICAgIHRleHRQb3NZID0gdGlja1Bvc1kgKyBzdHlsZS5DT1ZFUkFHRV9URVhUX1lfT0ZGU0VUO1xuICAgICAgICAvLyBUaGUgc3Ryb2tlIGNyZWF0ZXMgYSBib3JkZXIgYXJvdW5kIHRoZSB0ZXh0IHRvIG1ha2UgaXQgbGVnaWJsZSBvdmVyIHRoZSBiYXJzLlxuICAgICAgICBjdHguc3Ryb2tlU3R5bGUgPSAnd2hpdGUnO1xuICAgICAgICBjdHgubGluZVdpZHRoID0gMjtcbiAgICAgICAgY3R4LnN0cm9rZVRleHQodGlja0xhYmVsLCB0ZXh0UG9zWCwgdGV4dFBvc1kpO1xuICAgICAgICBjdHgubGluZVdpZHRoID0gMTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHN0eWxlLkNPVkVSQUdFX0ZPTlRfQ09MT1I7XG4gICAgICAgIGN0eC5maWxsVGV4dCh0aWNrTGFiZWwsIHRleHRQb3NYLCB0ZXh0UG9zWSk7XG4gICAgICAgIGN0eC5wb3BPYmplY3QoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIHZpc3VhbGl6ZUNvdmVyYWdlKCkge1xuICAgIHZhciBjYW52YXMgPSAodGhpcy5yZWZzLmNhbnZhcyA6IEhUTUxDYW52YXNFbGVtZW50KSxcbiAgICAgICAgd2lkdGggPSB0aGlzLnByb3BzLndpZHRoLFxuICAgICAgICBoZWlnaHQgPSB0aGlzLnByb3BzLmhlaWdodCxcbiAgICAgICAgcmFuZ2UgPSBDb250aWdJbnRlcnZhbC5mcm9tR2Vub21lUmFuZ2UodGhpcy5wcm9wcy5yYW5nZSk7XG5cbiAgICAvLyBIb2xkIG9mZiB1bnRpbCBoZWlnaHQgJiB3aWR0aCBhcmUga25vd24uXG4gICAgaWYgKHdpZHRoID09PSAwIHx8IHR5cGVvZiBjYW52YXMgPT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcbiAgICBkM3V0aWxzLnNpemVDYW52YXMoY2FudmFzLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgIHZhciBjdHggPSBkYXRhQ2FudmFzLmdldERhdGFDb250ZXh0KHRoaXMuZ2V0Q29udGV4dCgpKTtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5yZXNldCgpO1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuXG4gICAgdmFyIHlTY2FsZSA9IHRoaXMudGlsZXMueVNjYWxlRm9yUmVmKHJhbmdlLmNvbnRpZyk7XG5cbiAgICB0aGlzLnRpbGVzLnJlbmRlclRvU2NyZWVuKGN0eCwgcmFuZ2UsIHRoaXMuZ2V0U2NhbGUoKSk7XG4gICAgdGhpcy5yZW5kZXJUaWNrcyhjdHgsIHlTY2FsZSk7XG5cbiAgICBjdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgaGFuZGxlQ2xpY2socmVhY3RFdmVudDogYW55KSB7XG4gICAgdmFyIGV2ID0gcmVhY3RFdmVudC5uYXRpdmVFdmVudCxcbiAgICAgICAgeCA9IGV2Lm9mZnNldFg7XG5cbiAgICAvLyBJdCdzIHNpbXBsZSB0byBmaWd1cmUgb3V0IHdoaWNoIHBvc2l0aW9uIHdhcyBjbGlja2VkIHVzaW5nIHRoZSB4LXNjYWxlLlxuICAgIC8vIE5vIG5lZWQgdG8gcmVuZGVyIHRoZSBzY2VuZSB0byBkZXRlcm1pbmUgd2hhdCB3YXMgY2xpY2tlZC5cbiAgICB2YXIgcmFuZ2UgPSBDb250aWdJbnRlcnZhbC5mcm9tR2Vub21lUmFuZ2UodGhpcy5wcm9wcy5yYW5nZSksXG4gICAgICAgIHhTY2FsZSA9IHRoaXMuZ2V0U2NhbGUoKSxcbiAgICAgICAgYmlucyA9IHRoaXMuY2FjaGUuYmluc0ZvclJlZihyYW5nZS5jb250aWcpLFxuICAgICAgICBwb3MgPSBNYXRoLmZsb29yKHhTY2FsZS5pbnZlcnQoeCkpIC0gMSxcbiAgICAgICAgYmluID0gYmluc1twb3NdO1xuXG4gICAgdmFyIGFsZXJ0ID0gd2luZG93LmFsZXJ0IHx8IGNvbnNvbGUubG9nO1xuICAgIGlmIChiaW4pIHtcbiAgICAgIHZhciBtbUNvdW50ID0gYmluLm1pc21hdGNoZXMgPyBfLnJlZHVjZShiaW4ubWlzbWF0Y2hlcywgKGEsIGIpID0+IGEgKyBiKSA6IDA7XG4gICAgICB2YXIgcmVmID0gYmluLnJlZiB8fCB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5nZXRSYW5nZUFzU3RyaW5nKFxuICAgICAgICAgIHtjb250aWc6IHJhbmdlLmNvbnRpZywgc3RhcnQ6IHBvcywgc3RvcDogcG9zfSk7XG5cbiAgICAgIC8vIENvbnN0cnVjdCBhIEpTT04gb2JqZWN0IHRvIHNob3cgdGhlIHVzZXIuXG4gICAgICB2YXIgbWVzc2FnZU9iamVjdCA9IF8uZXh0ZW5kKFxuICAgICAgICB7XG4gICAgICAgICAgJ3Bvc2l0aW9uJzogcmFuZ2UuY29udGlnICsgJzonICsgKDEgKyBwb3MpLFxuICAgICAgICAgICdyZWFkIGRlcHRoJzogYmluLmNvdW50XG4gICAgICAgIH0sXG4gICAgICAgIGJpbi5taXNtYXRjaGVzKTtcbiAgICAgIG1lc3NhZ2VPYmplY3RbcmVmXSA9IGJpbi5jb3VudCAtIG1tQ291bnQ7XG4gICAgICBhbGVydChKU09OLnN0cmluZ2lmeShtZXNzYWdlT2JqZWN0LCBudWxsLCAnICAnKSk7XG4gICAgfVxuICB9XG59XG5cblBpbGV1cENvdmVyYWdlVHJhY2suZGlzcGxheU5hbWUgPSAnY292ZXJhZ2UnO1xuUGlsZXVwQ292ZXJhZ2VUcmFjay5kZWZhdWx0T3B0aW9ucyA9IHtcbiAgLy8gQ29sb3IgdGhlIHJlZmVyZW5jZSBiYXNlIGluIHRoZSBiYXIgY2hhcnQgd2hlbiB0aGUgVmFyaWFudCBBbGxlbGUgRnJhY3Rpb25cbiAgLy8gZXhjZWVkcyB0aGlzIGFtb3VudC4gV2hlbiB0aGVyZSBhcmUgPj0yIGFncmVlaW5nIG1pc21hdGNoZXMsIHRoZXkgYXJlXG4gIC8vIGFsd2F5cyByZW5kZXJlZC4gQnV0IGZvciBtaXNtYXRjaGVzIGJlbG93IHRoaXMgdGhyZXNob2xkLCB0aGUgcmVmZXJlbmNlIGlzXG4gIC8vIG5vdCBjb2xvcmVkIGluIHRoZSBiYXIgY2hhcnQuIFRoaXMgZHJhd3MgYXR0ZW50aW9uIHRvIGhpZ2gtVkFGIG1pc21hdGNoZXMuXG4gIHZhZkNvbG9yVGhyZXNob2xkOiAwLjJcbn07XG5cblxubW9kdWxlLmV4cG9ydHMgPSBQaWxldXBDb3ZlcmFnZVRyYWNrO1xuIiwiLyoqXG4gKiBQaWxldXAgdmlzdWFsaXphdGlvbiBvZiBCQU0gc291cmNlcy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHR5cGUge1N0cmFuZCwgQWxpZ25tZW50LCBBbGlnbm1lbnREYXRhU291cmNlfSBmcm9tICcuLi9BbGlnbm1lbnQnO1xuaW1wb3J0IEdBNEdIRGF0YVNvdXJjZSBmcm9tICcuLi9zb3VyY2VzL0dBNEdIRGF0YVNvdXJjZSc7XG5pbXBvcnQgdHlwZSB7VHdvQml0U291cmNlfSBmcm9tICcuLi9zb3VyY2VzL1R3b0JpdERhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge1Zpc3VhbEFsaWdubWVudCwgVmlzdWFsR3JvdXAsIEluc2VydFN0YXRzfSBmcm9tICcuL1BpbGV1cENhY2hlJztcbmltcG9ydCB0eXBlIHtEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgdHlwZSBJbnRlcnZhbCBmcm9tICcuLi9JbnRlcnZhbCc7XG5pbXBvcnQgdHlwZSB7Vml6UHJvcHN9IGZyb20gJy4uL1Zpc3VhbGl6YXRpb25XcmFwcGVyJztcbmltcG9ydCB0eXBlIHtTY2FsZX0gZnJvbSAnLi9kM3V0aWxzJztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBzaGFsbG93RXF1YWxzIGZyb20gJ3NoYWxsb3ctZXF1YWxzJztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuXG5pbXBvcnQgc2NhbGUgZnJvbSAnLi4vc2NhbGUnO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi9kM3V0aWxzJztcbmltcG9ydCB0eXBlIHtCYXNlUGFpciwgU3RhdGUsIE5ldHdvcmtTdGF0dXN9IGZyb20gJy4vcGlsZXVwdXRpbHMnO1xuaW1wb3J0IHtDaWdhck9wLCBmb3JtYXRTdGF0dXN9IGZyb20gJy4vcGlsZXVwdXRpbHMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBEaXNwbGF5TW9kZSBmcm9tICcuL0Rpc3BsYXlNb2RlJztcbmltcG9ydCBQaWxldXBDYWNoZSBmcm9tICcuL1BpbGV1cENhY2hlJztcbmltcG9ydCBUaWxlZENhbnZhcyBmcm9tICcuL1RpbGVkQ2FudmFzJztcbmltcG9ydCBjYW52YXNVdGlscyBmcm9tICcuL2NhbnZhcy11dGlscyc7XG5pbXBvcnQgZGF0YUNhbnZhcyBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi4vc3R5bGUnO1xuXG5cbnZhciBSRUFEX0hFSUdIVCA9IDEzO1xudmFyIFJFQURfU1BBQ0lORyA9IDI7ICAvLyB2ZXJ0aWNhbCBwaXhlbHMgYmV0d2VlbiByZWFkc1xudmFyIE1BWF9ST1dTID0gMTAwMDsgLy8gbWF4IHJvd3MgdG8gcHJpbnQgcGlsZXVwXG5cbmZ1bmN0aW9uIHBpbGV1cEhlaWdodChyb3dzOiBudW1iZXIpOiBudW1iZXIge1xuICB2YXIgbW9kaWZpZWRfcm93cyA9IE1hdGgubWluKE1BWF9ST1dTLCByb3dzKTtcbiAgcmV0dXJuIG1vZGlmaWVkX3Jvd3MgKiAoUkVBRF9IRUlHSFQgKyBSRUFEX1NQQUNJTkcpO1xufVxuXG52YXIgUkVBRF9TVFJBTkRfQVJST1dfV0lEVEggPSA1O1xuXG4vLyBQaGFudG9tSlMgZG9lcyBub3Qgc3VwcG9ydCBzZXRMaW5lRGFzaC5cbi8vIE5vZGUgZG9lc24ndCBldmVuIGtub3cgYWJvdXQgdGhlIHN5bWJvbC5cbnZhciBTVVBQT1JUU19EQVNIRVMgPSB0eXBlb2YoQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgICAgICAgICAgICAgICAhIUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRC5wcm90b3R5cGUuc2V0TGluZURhc2g7XG5cbmNsYXNzIFBpbGV1cFRpbGVkQ2FudmFzIGV4dGVuZHMgVGlsZWRDYW52YXMge1xuICBjYWNoZTogUGlsZXVwQ2FjaGU7XG4gIG9wdGlvbnM6IE9iamVjdDtcblxuICBjb25zdHJ1Y3RvcihjYWNoZTogUGlsZXVwQ2FjaGUsIG9wdGlvbnM6IE9iamVjdCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5jYWNoZSA9IGNhY2hlO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICB1cGRhdGUobmV3T3B0aW9uczogT2JqZWN0KSB7XG4gICAgdGhpcy5vcHRpb25zID0gbmV3T3B0aW9ucztcbiAgfVxuXG4gIGhlaWdodEZvclJlZihyZWY6IHN0cmluZyk6IG51bWJlciB7XG4gICAgcmV0dXJuIHBpbGV1cEhlaWdodCh0aGlzLmNhY2hlLnBpbGV1cEhlaWdodEZvclJlZihyZWYpKTtcbiAgfVxuXG4gIHJlbmRlcihjdHg6IERhdGFDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsXG4gICAgICAgICBzY2FsZTogKHg6IG51bWJlcik9Pm51bWJlcixcbiAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KSB7XG4gICAgdmFyIHJlbGF4ZWRSYW5nZSA9XG4gICAgICAgIG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIHJhbmdlLnN0YXJ0KCkgLSAxLCByYW5nZS5zdG9wKCkgKyAxKTtcbiAgICB2YXIgdkdyb3VwcyA9IHRoaXMuY2FjaGUuZ2V0R3JvdXBzT3ZlcmxhcHBpbmcocmVsYXhlZFJhbmdlKTtcbiAgICB2YXIgaW5zZXJ0U3RhdHMgPSB0aGlzLm9wdGlvbnMuY29sb3JCeUluc2VydCA/IHRoaXMuY2FjaGUuZ2V0SW5zZXJ0U3RhdHMoKSA6IG51bGw7XG4gICAgcmVuZGVyUGlsZXVwKGN0eCwgc2NhbGUsIHJlbGF4ZWRSYW5nZSwgaW5zZXJ0U3RhdHMsIHRoaXMub3B0aW9ucy5jb2xvckJ5U3RyYW5kLCB2R3JvdXBzKTtcbiAgfVxufVxuXG5cbi8vIFNob3VsZCB0aGUgQ2lnYXIgb3AgYmUgcmVuZGVyZWQgdG8gdGhlIHNjcmVlbj9cbmZ1bmN0aW9uIGlzUmVuZGVyZWQob3ApIHtcbiAgcmV0dXJuIChvcC5vcCA9PSBDaWdhck9wLk1BVENIIHx8XG4gICAgICAgICAgb3Aub3AgPT0gQ2lnYXJPcC5ERUxFVEUgfHxcbiAgICAgICAgICBvcC5vcCA9PSBDaWdhck9wLklOU0VSVCk7XG59XG5cbi8vIFJlbmRlciBhIHBvcnRpb24gb2YgdGhlIHBpbGV1cCBpbnRvIHRoZSBjYW52YXMuXG5mdW5jdGlvbiByZW5kZXJQaWxldXAoY3R4OiBEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELFxuICAgICAgICAgICAgICAgICAgICAgIHNjYWxlOiAobnVtOiBudW1iZXIpID0+IG51bWJlcixcbiAgICAgICAgICAgICAgICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPixcbiAgICAgICAgICAgICAgICAgICAgICBpbnNlcnRTdGF0czogP0luc2VydFN0YXRzLFxuICAgICAgICAgICAgICAgICAgICAgIGNvbG9yQnlTdHJhbmQ6IGJvb2xlYW4sXG4gICAgICAgICAgICAgICAgICAgICAgdkdyb3VwczogVmlzdWFsR3JvdXBbXSkge1xuICAvLyBTaG91bGQgbWlzbWF0Y2hlZCBiYXNlIHBhaXJzIGJlIHNob3duIGFzIGJsb2NrcyBvZiBjb2xvciBvciBhcyBsZXR0ZXJzP1xuICB2YXIgcHhQZXJMZXR0ZXIgPSBzY2FsZSgxKSAtIHNjYWxlKDApLFxuICAgICAgbW9kZSA9IERpc3BsYXlNb2RlLmdldERpc3BsYXlNb2RlKHB4UGVyTGV0dGVyKSxcbiAgICAgIHNob3dUZXh0ID0gRGlzcGxheU1vZGUuaXNUZXh0KG1vZGUpO1xuXG4gIGZ1bmN0aW9uIGRyYXdBcnJvdyhwb3M6IG51bWJlciwgcmVmTGVuZ3RoOiBudW1iZXIsIHRvcDogbnVtYmVyLCBkaXJlY3Rpb246ICdMJyB8ICdSJykge1xuICAgIHZhciBsZWZ0ID0gc2NhbGUocG9zICsgMSksXG4gICAgICAgIHJpZ2h0ID0gc2NhbGUocG9zICsgcmVmTGVuZ3RoICsgMSksXG4gICAgICAgIGJvdHRvbSA9IHRvcCArIFJFQURfSEVJR0hULFxuICAgICAgICAvLyBBcnJvd2hlYWRzIGJlY29tZSBhIGRpc3RyYWN0aW9uIGFzIHlvdSB6b29tIG91dCBhbmQgdGhlIHJlYWRzIGdldFxuICAgICAgICAvLyBzaG9ydGVyLiBUaGV5IHNob3VsZCBuZXZlciBiZSBtb3JlIHRoYW4gMS82IHRoZSByZWFkIGxlbmd0aC5cbiAgICAgICAgYXJyb3dTaXplID0gTWF0aC5taW4oUkVBRF9TVFJBTkRfQVJST1dfV0lEVEgsIChyaWdodCAtIGxlZnQpIC8gNik7XG5cbiAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgaWYgKGRpcmVjdGlvbiA9PSAnUicpIHtcbiAgICAgIGN0eC5tb3ZlVG8obGVmdCwgdG9wKTtcbiAgICAgIGN0eC5saW5lVG8ocmlnaHQgLSBhcnJvd1NpemUsIHRvcCk7XG4gICAgICBjdHgubGluZVRvKHJpZ2h0LCAodG9wICsgYm90dG9tKSAvIDIpO1xuICAgICAgY3R4LmxpbmVUbyhyaWdodCAtIGFycm93U2l6ZSwgYm90dG9tKTtcbiAgICAgIGN0eC5saW5lVG8obGVmdCwgYm90dG9tKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY3R4Lm1vdmVUbyhyaWdodCwgdG9wKTtcbiAgICAgIGN0eC5saW5lVG8obGVmdCArIGFycm93U2l6ZSwgdG9wKTtcbiAgICAgIGN0eC5saW5lVG8obGVmdCwgKHRvcCArIGJvdHRvbSkgLyAyKTtcbiAgICAgIGN0eC5saW5lVG8obGVmdCArIGFycm93U2l6ZSwgYm90dG9tKTtcbiAgICAgIGN0eC5saW5lVG8ocmlnaHQsIGJvdHRvbSk7XG4gICAgfVxuICAgIGN0eC5maWxsKCk7XG4gIH1cblxuICBmdW5jdGlvbiBkcmF3U2VnbWVudChvcCwgeSwgdlJlYWQpIHtcbiAgICBzd2l0Y2ggKG9wLm9wKSB7XG4gICAgICBjYXNlIENpZ2FyT3AuTUFUQ0g6XG4gICAgICAgIGlmIChvcC5hcnJvdykge1xuICAgICAgICAgIGRyYXdBcnJvdyhvcC5wb3MsIG9wLmxlbmd0aCwgeSwgb3AuYXJyb3cpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciB4ID0gc2NhbGUob3AucG9zICsgMSk7XG4gICAgICAgICAgY3R4LmZpbGxSZWN0KHgsIHksIHNjYWxlKG9wLnBvcyArIG9wLmxlbmd0aCArIDEpIC0geCwgUkVBRF9IRUlHSFQpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIENpZ2FyT3AuREVMRVRFOlxuICAgICAgICB2YXIgeDEgPSBzY2FsZShvcC5wb3MgKyAxKSxcbiAgICAgICAgICAgIHgyID0gc2NhbGUob3AucG9zICsgMSArIG9wLmxlbmd0aCksXG4gICAgICAgICAgICB5cCA9IHkgKyBSRUFEX0hFSUdIVCAvIDIgLSAwLjU7XG4gICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5ERUxFVEVfQ09MT1I7XG4gICAgICAgIGN0eC5maWxsUmVjdCh4MSwgeXAsIHgyIC0geDEsIDEpO1xuICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSBDaWdhck9wLklOU0VSVDpcbiAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHN0eWxlLklOU0VSVF9DT0xPUjtcbiAgICAgICAgdmFyIHgwID0gc2NhbGUob3AucG9zICsgMSkgLSAyLCAgLy8gdG8gY292ZXIgYSBiaXQgb2YgdGhlIHByZXZpb3VzIHNlZ21lbnRcbiAgICAgICAgICAgIHkxID0geSAtIDEsXG4gICAgICAgICAgICB5MiA9IHkgKyBSRUFEX0hFSUdIVCArIDI7XG4gICAgICAgIGN0eC5maWxsUmVjdCh4MCwgeTEsIDEsIHkyIC0geTEpO1xuICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkcmF3QWxpZ25tZW50KHZSZWFkOiBWaXN1YWxBbGlnbm1lbnQsIHk6IG51bWJlcikge1xuICAgIGN0eC5wdXNoT2JqZWN0KHZSZWFkKTtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGlmIChjb2xvckJ5U3RyYW5kKSB7XG4gICAgICBjdHguZmlsbFN0eWxlID0gdlJlYWQuc3RyYW5kID09ICcrJyA/XG4gICAgICAgICAgc3R5bGUuQUxJR05NRU5UX1BMVVNfU1RSQU5EX0NPTE9SIDpcbiAgICAgICAgICBzdHlsZS5BTElHTk1FTlRfTUlOVVNfU1RSQU5EX0NPTE9SO1xuICAgIH1cbiAgICB2UmVhZC5vcHMuZm9yRWFjaChvcCA9PiB7XG4gICAgICBpZiAoaXNSZW5kZXJlZChvcCkpIHtcbiAgICAgICAgZHJhd1NlZ21lbnQob3AsIHksIHZSZWFkKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICB2UmVhZC5taXNtYXRjaGVzLmZvckVhY2goYnAgPT4gcmVuZGVyTWlzbWF0Y2goYnAsIHkpKTtcbiAgICBjdHgucmVzdG9yZSgpO1xuICAgIGN0eC5wb3BPYmplY3QoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRyYXdHcm91cCh2R3JvdXA6IFZpc3VhbEdyb3VwKSB7XG4gICAgY3R4LnNhdmUoKTtcbiAgICBpZiAoaW5zZXJ0U3RhdHMgJiYgdkdyb3VwLmluc2VydCkge1xuICAgICAgdmFyIGxlbiA9IHZHcm91cC5zcGFuLmxlbmd0aCgpO1xuICAgICAgaWYgKGxlbiA8IGluc2VydFN0YXRzLm1pbk91dGxpZXJTaXplKSB7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAnYmx1ZSc7XG4gICAgICB9IGVsc2UgaWYgKGxlbiA+IGluc2VydFN0YXRzLm1heE91dGxpZXJTaXplKSB7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSAncmVkJztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5BTElHTk1FTlRfQ09MT1I7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5BTElHTk1FTlRfQ09MT1I7XG4gICAgfVxuICAgIGlmICh2R3JvdXAucm93IDw9IE1BWF9ST1dTKSB7XG4gICAgICB2YXIgeSA9IHlGb3JSb3codkdyb3VwLnJvdyk7XG4gICAgICBjdHgucHVzaE9iamVjdCh2R3JvdXApO1xuICAgICAgaWYgKHZHcm91cC5pbnNlcnQpIHtcbiAgICAgICAgdmFyIHNwYW4gPSB2R3JvdXAuaW5zZXJ0LFxuICAgICAgICAgICAgeDEgPSBzY2FsZShzcGFuLnN0YXJ0ICsgMSksXG4gICAgICAgICAgICB4MiA9IHNjYWxlKHNwYW4uc3RvcCArIDEpO1xuICAgICAgICBjdHguZmlsbFJlY3QoeDEsIHkgKyBSRUFEX0hFSUdIVCAvIDIgLSAwLjUsIHgyIC0geDEsIDEpO1xuICAgICAgfVxuICAgICAgdkdyb3VwLmFsaWdubWVudHMuZm9yRWFjaCh2UmVhZCA9PiBkcmF3QWxpZ25tZW50KHZSZWFkLCB5KSk7XG4gICAgICBjdHgucG9wT2JqZWN0KCk7XG4gICAgICBjdHgucmVzdG9yZSgpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbmRlck1pc21hdGNoKGJwOiBCYXNlUGFpciwgeTogbnVtYmVyKSB7XG4gICAgLy8gVGhpcyBjYW4gaGFwcGVuIGlmIHRoZSBtaXNtYXRjaCBpcyBpbiBhIGRpZmZlcmVudCB0aWxlLCBmb3IgZXhhbXBsZS5cbiAgICBpZiAoIXJhbmdlLmludGVydmFsLmNvbnRhaW5zKGJwLnBvcykpIHJldHVybjtcblxuICAgIGN0eC5wdXNoT2JqZWN0KGJwKTtcbiAgICBjdHguc2F2ZSgpO1xuICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5CQVNFX0NPTE9SU1ticC5iYXNlUGFpcl07XG4gICAgY3R4Lmdsb2JhbEFscGhhID0gb3BhY2l0eUZvclF1YWxpdHkoYnAucXVhbGl0eSk7XG4gICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgIGlmIChzaG93VGV4dCkge1xuICAgICAgLy8gMC41ID0gY2VudGVyZWRcbiAgICAgIGN0eC5maWxsVGV4dChicC5iYXNlUGFpciwgc2NhbGUoMSArIDAuNSArIGJwLnBvcyksIHkgKyBSRUFEX0hFSUdIVCAtIDIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjdHguZmlsbFJlY3Qoc2NhbGUoMSArIGJwLnBvcyksIHksICBweFBlckxldHRlciAtIDEsIFJFQURfSEVJR0hUKTtcbiAgICB9XG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgICBjdHgucG9wT2JqZWN0KCk7XG4gIH1cblxuICBjdHguZm9udCA9IHN0eWxlLlRJR0hUX1RFWFRfU1RZTEU7XG4gIHZHcm91cHMuZm9yRWFjaCh2R3JvdXAgPT4gZHJhd0dyb3VwKHZHcm91cCkpO1xufVxuXG5cbmZ1bmN0aW9uIHlGb3JSb3cocm93KSB7XG4gIHJldHVybiByb3cgKiAoUkVBRF9IRUlHSFQgKyBSRUFEX1NQQUNJTkcpO1xufVxuXG4vLyBUaGlzIGlzIGFkYXB0ZWQgZnJvbSBJR1YuXG52YXIgTUlOX1EgPSA1LCAgLy8gdGhlc2UgYXJlIFBocmVkLXNjYWxlZCBzY29yZXNcbiAgICBNQVhfUSA9IDIwLFxuICAgIFFfU0NBTEUgPSBzY2FsZS5saW5lYXIoKVxuICAgICAgICAgICAgICAgICAgIC5kb21haW4oW01JTl9RLCBNQVhfUV0pXG4gICAgICAgICAgICAgICAgICAgLnJhbmdlKFswLjEsIDAuOV0pXG4gICAgICAgICAgICAgICAgICAgLmNsYW1wKHRydWUpOyAgLy8gY2xhbXAgb3V0cHV0IHRvIFswLjEsIDAuOV1cbmZ1bmN0aW9uIG9wYWNpdHlGb3JRdWFsaXR5KHF1YWxpdHk6IG51bWJlcik6IG51bWJlciB7XG4gIHZhciBhbHBoYSA9IFFfU0NBTEUocXVhbGl0eSk7XG5cbiAgLy8gUm91bmQgYWxwaGEgdG8gbmVhcmVzdCAwLjFcbiAgYWxwaGEgPSBNYXRoLnJvdW5kKGFscGhhICogMTAgKyAwLjUpIC8gMTAuMDtcbiAgcmV0dXJuIE1hdGgubWluKDEuMCwgYWxwaGEpO1xufVxuXG5jbGFzcyBQaWxldXBUcmFjayBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XG4gIHByb3BzOiBWaXpQcm9wcyAmIHsgc291cmNlOiBBbGlnbm1lbnREYXRhU291cmNlIH07XG4gIHN0YXRlOiBTdGF0ZTtcbiAgY2FjaGU6IFBpbGV1cENhY2hlO1xuICB0aWxlczogUGlsZXVwVGlsZWRDYW52YXM7XG4gIHN0YXRpYyBkZWZhdWx0T3B0aW9uczogeyB2aWV3QXNQYWlyczogYm9vbGVhbiB9O1xuICBzdGF0aWMgZ2V0T3B0aW9uc01lbnU6IChvcHRpb25zOiBPYmplY3QpID0+IGFueTtcbiAgc3RhdGljIGhhbmRsZVNlbGVjdE9wdGlvbjogKGtleTogc3RyaW5nLCBvbGRPcHRpb25zOiBPYmplY3QpID0+IE9iamVjdDtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogVml6UHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgIG5ldHdvcmtTdGF0dXM6IG51bGxcbiAgICB9O1xuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgLy8gVGhlc2Ugc3R5bGVzIGFsbG93IHZlcnRpY2FsIHNjcm9sbGluZyB0byBzZWUgdGhlIGZ1bGwgcGlsZXVwLlxuICAgIC8vIEFkZGluZyBhIHZlcnRpY2FsIHNjcm9sbGJhciBzaHJpbmtzIHRoZSB2aXNpYmxlIGFyZWEsIGJ1dCB3ZSBoYXZlIHRvIGFjdFxuICAgIC8vIGFzIHRob3VnaCBpdCBkb2Vzbid0LCBzaW5jZSBhZGp1c3RpbmcgdGhlIHNjYWxlIHdvdWxkIHB1dCBpdCBvdXQgb2Ygc3luY1xuICAgIC8vIHdpdGggb3RoZXIgdHJhY2tzLlxuICAgIHZhciBjb250YWluZXJTdHlsZXMgPSB7XG4gICAgICAnaGVpZ2h0JzogJzEwMCUnXG4gICAgfTtcblxuICAgIHZhciBzdGF0dXNFbCA9IG51bGwsXG4gICAgICAgIG5ldHdvcmtTdGF0dXMgPSB0aGlzLnN0YXRlLm5ldHdvcmtTdGF0dXM7XG4gICAgaWYgKG5ldHdvcmtTdGF0dXMpIHtcbiAgICAgIHZhciBtZXNzYWdlID0gZm9ybWF0U3RhdHVzKG5ldHdvcmtTdGF0dXMpO1xuICAgICAgc3RhdHVzRWwgPSAoXG4gICAgICAgIDxkaXYgcmVmPSdzdGF0dXMnIGNsYXNzTmFtZT0nbmV0d29yay1zdGF0dXMnPlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSduZXR3b3JrLXN0YXR1cy1tZXNzYWdlJz5cbiAgICAgICAgICAgIExvYWRpbmcgYWxpZ25tZW50c+KApiAoe21lc3NhZ2V9KVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuXG4gICAgdmFyIHJhbmdlTGVuZ3RoID0gdGhpcy5wcm9wcy5yYW5nZS5zdG9wIC0gdGhpcy5wcm9wcy5yYW5nZS5zdGFydDtcbiAgICAvLyBJZiByYW5nZSBpcyB0b28gbGFyZ2UsIGRvIG5vdCByZW5kZXIgJ2NhbnZhcydcbiAgICBpZiAocmFuZ2VMZW5ndGggPiAgR0E0R0hEYXRhU291cmNlLk1BWF9CQVNFX1BBSVJTX1RPX0ZFVENIKSB7XG4gICAgICAgcmV0dXJuIChcbiAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdjZW50ZXInPlxuICAgICAgICAgICAgICBab29tIGluIHRvIHNlZSBhbGlnbm1lbnRzXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxjYW52YXMgb25DbGljaz17dGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpfSAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAge3N0YXR1c0VsfVxuICAgICAgICAgIDxkaXYgcmVmPSdjb250YWluZXInIHN0eWxlPXtjb250YWluZXJTdHlsZXN9PlxuICAgICAgICAgICAgPGNhbnZhcyByZWY9J2NhbnZhcycgb25DbGljaz17dGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpfSAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuICB9XG5cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLmNhY2hlID0gbmV3IFBpbGV1cENhY2hlKHRoaXMucHJvcHMucmVmZXJlbmNlU291cmNlLCB0aGlzLnByb3BzLm9wdGlvbnMudmlld0FzUGFpcnMpO1xuICAgIHRoaXMudGlsZXMgPSBuZXcgUGlsZXVwVGlsZWRDYW52YXModGhpcy5jYWNoZSwgdGhpcy5wcm9wcy5vcHRpb25zKTtcblxuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXdkYXRhJywgcmFuZ2UgPT4ge1xuICAgICAgdGhpcy51cGRhdGVSZWFkcyhyYW5nZSk7XG4gICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVSYW5nZShyYW5nZSk7XG4gICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9KTtcbiAgICB0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZS5vbignbmV3ZGF0YScsIHJhbmdlID0+IHtcbiAgICAgIHRoaXMuY2FjaGUudXBkYXRlTWlzbWF0Y2hlcyhyYW5nZSk7XG4gICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVSYW5nZShyYW5nZSk7XG4gICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9KTtcbiAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV0d29ya3Byb2dyZXNzJywgZSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtuZXR3b3JrU3RhdHVzOiBlfSk7XG4gICAgfSk7XG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ldHdvcmtkb25lJywgZSA9PiB7XG4gICAgICB0aGlzLnNldFN0YXRlKHtuZXR3b3JrU3RhdHVzOiBudWxsfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgfVxuXG4gIGdldFNjYWxlKCk6IFNjYWxlIHtcbiAgICByZXR1cm4gZDN1dGlscy5nZXRUcmFja1NjYWxlKHRoaXMucHJvcHMucmFuZ2UsIHRoaXMucHJvcHMud2lkdGgpO1xuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogYW55LCBwcmV2U3RhdGU6IGFueSkge1xuICAgIHZhciBzaG91bGRVcGRhdGUgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5wcm9wcy5vcHRpb25zICE9IHByZXZQcm9wcy5vcHRpb25zKSB7XG4gICAgICB0aGlzLmhhbmRsZU9wdGlvbnNDaGFuZ2UocHJldlByb3BzLm9wdGlvbnMpO1xuICAgICAgc2hvdWxkVXBkYXRlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoIXNoYWxsb3dFcXVhbHModGhpcy5wcm9wcywgcHJldlByb3BzKSB8fFxuICAgICAgICAhc2hhbGxvd0VxdWFscyh0aGlzLnN0YXRlLCBwcmV2U3RhdGUpIHx8XG4gICAgICAgIHNob3VsZFVwZGF0ZSkge1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlT3B0aW9uc0NoYW5nZShvbGRPcHRzOiBPYmplY3QpIHtcbiAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVBbGwoKTtcblxuICAgIGlmIChvbGRPcHRzLnZpZXdBc1BhaXJzICE9IHRoaXMucHJvcHMub3B0aW9ucy52aWV3QXNQYWlycykge1xuICAgICAgdGhpcy5jYWNoZSA9IG5ldyBQaWxldXBDYWNoZSh0aGlzLnByb3BzLnJlZmVyZW5jZVNvdXJjZSwgdGhpcy5wcm9wcy5vcHRpb25zLnZpZXdBc1BhaXJzKTtcbiAgICAgIHRoaXMudGlsZXMgPSBuZXcgUGlsZXVwVGlsZWRDYW52YXModGhpcy5jYWNoZSwgdGhpcy5wcm9wcy5vcHRpb25zKTtcbiAgICAgIHRoaXMudXBkYXRlUmVhZHMoQ29udGlnSW50ZXJ2YWwuZnJvbUdlbm9tZVJhbmdlKHRoaXMucHJvcHMucmFuZ2UpKTtcbiAgICB9IGVsc2UgaWYgKG9sZE9wdHMuY29sb3JCeUluc2VydCAhPSB0aGlzLnByb3BzLm9wdGlvbnMuY29sb3JCeUluc2VydCkge1xuICAgICAgdGhpcy50aWxlcy51cGRhdGUodGhpcy5wcm9wcy5vcHRpb25zKTtcbiAgICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZUFsbCgpO1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfVxuXG4gICAgaWYgKG9sZE9wdHMuc29ydCAhPSB0aGlzLnByb3BzLm9wdGlvbnMuc29ydCkge1xuICAgICAgdGhpcy5oYW5kbGVTb3J0KCk7XG4gICAgfVxuICB9XG5cbiAgLy8gTG9hZCBuZXcgcmVhZHMgaW50byB0aGUgdmlzdWFsaXphdGlvbiBjYWNoZS5cbiAgdXBkYXRlUmVhZHMocmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4pIHtcbiAgICB2YXIgYW55QmVmb3JlID0gdGhpcy5jYWNoZS5hbnlHcm91cHNPdmVybGFwcGluZyhyYW5nZSk7XG4gICAgdmFyIHIgPSB0aGlzLnByb3BzLnNvdXJjZS5nZXRBbGlnbm1lbnRzSW5SYW5nZShyYW5nZSk7XG4gICAgci5mb3JFYWNoKHJlYWQgPT4gdGhpcy5jYWNoZS5hZGRBbGlnbm1lbnQocmVhZCkpO1xuXG4gICAgaWYgKCFhbnlCZWZvcmUgJiYgdGhpcy5jYWNoZS5hbnlHcm91cHNPdmVybGFwcGluZyhyYW5nZSkpIHtcbiAgICAgIC8vIElmIHRoZXNlIGFyZSB0aGUgZmlyc3QgcmVhZHMgdG8gYmUgc2hvd24gaW4gdGhlIHZpc2libGUgcmFuZ2UsXG4gICAgICAvLyB0aGVuIHNvcnQgdGhlbSB0byBoaWdobGlnaHQgcmVhZHMgaW4gdGhlIGNlbnRlci5cbiAgICAgIHRoaXMuaGFuZGxlU29ydCgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFVwZGF0ZSB0aGUgdmlzdWFsaXphdGlvbiB0byByZWZsZWN0IHRoZSBjYWNoZWQgcmVhZHMgJlxuICAvLyBjdXJyZW50bHktdmlzaWJsZSByYW5nZS5cbiAgdXBkYXRlVmlzdWFsaXphdGlvbigpIHtcbiAgICB2YXIgY2FudmFzID0gdGhpcy5yZWZzLmNhbnZhcyxcbiAgICAgICAgd2lkdGggPSB0aGlzLnByb3BzLndpZHRoO1xuXG4gICAgLy8gSG9sZCBvZmYgdW50aWwgY2FudmFzLCBoZWlnaHQgJiB3aWR0aCBhcmUga25vd24uXG4gICAgaWYgKHdpZHRoID09PSAwIHx8IHR5cGVvZiBjYW52YXMgPT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcblxuICAgIC8vIEhlaWdodCBjYW4gb25seSBiZSBjb21wdXRlZCBhZnRlciB0aGUgcGlsZXVwIGhhcyBiZWVuIHVwZGF0ZWQuXG4gICAgdmFyIGhlaWdodCA9IHlGb3JSb3codGhpcy50aWxlcy5oZWlnaHRGb3JSZWYodGhpcy5wcm9wcy5yYW5nZS5jb250aWcpKTtcblxuICAgIGQzdXRpbHMuc2l6ZUNhbnZhcyhjYW52YXMsIHdpZHRoLCBoZWlnaHQpO1xuXG4gICAgLy8gaWYgcmFuZ2UgaXMgdG9vIGxhcmdlLCByZW1vdmUgYWxsIHJlYWRzXG4gICAgdmFyIGN0eCA9IGNhbnZhc1V0aWxzLmdldENvbnRleHQoY2FudmFzKTtcbiAgICB2YXIgZHR4ID0gZGF0YUNhbnZhcy5nZXREYXRhQ29udGV4dChjdHgpO1xuICAgIHRoaXMucmVuZGVyU2NlbmUoZHR4KTtcbiAgfVxuXG4gIHJlbmRlclNjZW5lKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgIHZhciBnZW5vbWVSYW5nZSA9IHRoaXMucHJvcHMucmFuZ2UsXG4gICAgICAgIHJhbmdlID0gbmV3IENvbnRpZ0ludGVydmFsKGdlbm9tZVJhbmdlLmNvbnRpZywgZ2Vub21lUmFuZ2Uuc3RhcnQsIGdlbm9tZVJhbmdlLnN0b3ApLFxuICAgICAgICBzY2FsZSA9IHRoaXMuZ2V0U2NhbGUoKTtcblxuICAgIGN0eC5yZXNldCgpO1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuICAgIHRoaXMudGlsZXMucmVuZGVyVG9TY3JlZW4oY3R4LCByYW5nZSwgc2NhbGUpO1xuXG4gICAgLy8gVE9ETzogdGhlIGNlbnRlciBsaW5lIHNob3VsZCBnbyBhYm92ZSBhbGlnbm1lbnRzLCBidXQgYmVsb3cgbWlzbWF0Y2hlc1xuICAgIHRoaXMucmVuZGVyQ2VudGVyTGluZShjdHgsIHJhbmdlLCBzY2FsZSk7XG5cbiAgICAvLyBUaGlzIGlzIGEgaGFjayB0byBtaXRpZ2F0ZSAjMzUwXG4gICAgdmFyIGVsID0gZDN1dGlscy5maW5kUGFyZW50KHRoaXMucmVmcy5jYW52YXMsICd0cmFjay1jb250ZW50Jyk7XG4gICAgaWYgKGVsKSBlbC5zY3JvbGxMZWZ0ID0gMDtcbiAgfVxuXG4gIC8vIERyYXcgdGhlIGNlbnRlciBsaW5lKHMpLCB3aGljaCBvcmllbnQgdGhlIHVzZXJcbiAgcmVuZGVyQ2VudGVyTGluZShjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPixcbiAgICAgICAgICAgICAgICAgICBzY2FsZTogKG51bTogbnVtYmVyKSA9PiBudW1iZXIpIHtcbiAgICB2YXIgbWlkUG9pbnQgPSBNYXRoLmZsb29yKChyYW5nZS5zdG9wKCkgKyByYW5nZS5zdGFydCgpKSAvIDIpLFxuICAgICAgICByaWdodExpbmVYID0gTWF0aC5jZWlsKHNjYWxlKG1pZFBvaW50ICsgMSkpLFxuICAgICAgICBsZWZ0TGluZVggPSBNYXRoLmZsb29yKHNjYWxlKG1pZFBvaW50KSksXG4gICAgICAgIGhlaWdodCA9IGN0eC5jYW52YXMuaGVpZ2h0O1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LmxpbmVXaWR0aCA9IDE7XG4gICAgaWYgKFNVUFBPUlRTX0RBU0hFUykge1xuICAgICAgY3R4LnNldExpbmVEYXNoKFs1LCA1XSk7XG4gICAgfVxuICAgIGlmIChyaWdodExpbmVYIC0gbGVmdExpbmVYIDwgMykge1xuICAgICAgLy8gSWYgdGhlIGxpbmVzIGFyZSB2ZXJ5IGNsb3NlLCB0aGVuIGp1c3QgZHJhdyBhIGNlbnRlciBsaW5lLlxuICAgICAgdmFyIG1pZFggPSBNYXRoLnJvdW5kKChsZWZ0TGluZVggKyByaWdodExpbmVYKSAvIDIpO1xuICAgICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCBtaWRYIC0gMC41LCAwLCBtaWRYIC0gMC41LCBoZWlnaHQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIGxlZnRMaW5lWCAtIDAuNSwgMCwgbGVmdExpbmVYIC0gMC41LCBoZWlnaHQpO1xuICAgICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCByaWdodExpbmVYIC0gMC41LCAwLCByaWdodExpbmVYIC0gMC41LCBoZWlnaHQpO1xuICAgIH1cbiAgICBjdHgucmVzdG9yZSgpO1xuICB9XG5cbiAgaGFuZGxlU29ydCgpIHtcbiAgICB2YXIge3N0YXJ0LCBzdG9wfSA9IHRoaXMucHJvcHMucmFuZ2UsXG4gICAgICAgIG1pZGRsZSA9IChzdGFydCArIHN0b3ApIC8gMjtcbiAgICB0aGlzLmNhY2hlLnNvcnRSZWFkc0F0KHRoaXMucHJvcHMucmFuZ2UuY29udGlnLCBtaWRkbGUpO1xuICAgIHRoaXMudGlsZXMuaW52YWxpZGF0ZUFsbCgpO1xuICAgIHRoaXMudXBkYXRlVmlzdWFsaXphdGlvbigpO1xuICB9XG5cbiAgaGFuZGxlQ2xpY2socmVhY3RFdmVudDogYW55KSB7XG4gICAgdmFyIGV2ID0gcmVhY3RFdmVudC5uYXRpdmVFdmVudCxcbiAgICAgICAgeCA9IGV2Lm9mZnNldFgsXG4gICAgICAgIHkgPSBldi5vZmZzZXRZO1xuICAgIHZhciBjdHggPSBjYW52YXNVdGlscy5nZXRDb250ZXh0KHRoaXMucmVmcy5jYW52YXMpO1xuICAgIHZhciB0cmFja2luZ0N0eCA9IG5ldyBkYXRhQ2FudmFzLkNsaWNrVHJhY2tpbmdDb250ZXh0KGN0eCwgeCwgeSk7XG5cbiAgICB2YXIgZ2Vub21lUmFuZ2UgPSB0aGlzLnByb3BzLnJhbmdlLFxuICAgICAgICByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChnZW5vbWVSYW5nZS5jb250aWcsIGdlbm9tZVJhbmdlLnN0YXJ0LCBnZW5vbWVSYW5nZS5zdG9wKSxcbiAgICAgICAgc2NhbGUgPSB0aGlzLmdldFNjYWxlKCksXG4gICAgICAgIC8vIElmIGNsaWNrLXRyYWNraW5nIGdldHMgc2xvdywgdGhpcyByYW5nZSBjb3VsZCBiZSBuYXJyb3dlZCB0byBvbmVcbiAgICAgICAgLy8gY2xvc2VyIHRvIHRoZSBjbGljayBjb29yZGluYXRlLCByYXRoZXIgdGhhbiB0aGUgd2hvbGUgdmlzaWJsZSByYW5nZS5cbiAgICAgICAgdkdyb3VwcyA9IHRoaXMuY2FjaGUuZ2V0R3JvdXBzT3ZlcmxhcHBpbmcocmFuZ2UpO1xuXG4gICAgcmVuZGVyUGlsZXVwKHRyYWNraW5nQ3R4LCBzY2FsZSwgcmFuZ2UsIG51bGwsIGZhbHNlLCB2R3JvdXBzKTtcbiAgICB2YXIgdlJlYWQgPSBfLmZpbmQodHJhY2tpbmdDdHguaGl0c1swXSwgaGl0ID0+IGhpdC5yZWFkKTtcbiAgICB2YXIgYWxlcnQgPSB3aW5kb3cuYWxlcnQgfHwgY29uc29sZS5sb2c7XG4gICAgaWYgKHZSZWFkKSB7XG4gICAgICBhbGVydCh2UmVhZC5yZWFkLm5hbWUpO1xuICAgIH1cbiAgfVxufVxuXG5QaWxldXBUcmFjay5kaXNwbGF5TmFtZSA9ICdwaWxldXAnO1xuUGlsZXVwVHJhY2suZGVmYXVsdE9wdGlvbnMgPSB7XG4gIHZpZXdBc1BhaXJzOiBmYWxzZSxcbiAgY29sb3JCeUluc2VydDogdHJ1ZSxcbiAgY29sb3JCeVN0cmFuZDogZmFsc2Vcbn07XG5cblBpbGV1cFRyYWNrLmdldE9wdGlvbnNNZW51ID0gZnVuY3Rpb24ob3B0aW9uczogT2JqZWN0KTogYW55IHtcbiAgcmV0dXJuIFtcbiAgICB7a2V5OiAndmlldy1wYWlycycsIGxhYmVsOiAnVmlldyBhcyBwYWlycycsIGNoZWNrZWQ6IG9wdGlvbnMudmlld0FzUGFpcnN9LFxuICAgICctJyxcbiAgICB7a2V5OiAnY29sb3ItaW5zZXJ0JywgbGFiZWw6ICdDb2xvciBieSBpbnNlcnQgc2l6ZScsIGNoZWNrZWQ6IG9wdGlvbnMuY29sb3JCeUluc2VydH0sXG4gICAge2tleTogJ2NvbG9yLXN0cmFuZCcsIGxhYmVsOiAnQ29sb3IgYnkgc3RyYW5kJywgY2hlY2tlZDogb3B0aW9ucy5jb2xvckJ5U3RyYW5kfSxcbiAgICAnLScsXG4gICAge2tleTogJ3NvcnQnLCBsYWJlbDogJ1NvcnQgYWxpZ25tZW50cyd9XG4gIF07XG59O1xuXG52YXIgbWVzc2FnZUlkID0gMTtcblxuUGlsZXVwVHJhY2suaGFuZGxlU2VsZWN0T3B0aW9uID0gZnVuY3Rpb24oa2V5OiBzdHJpbmcsIG9sZE9wdGlvbnM6IE9iamVjdCk6IE9iamVjdCB7XG4gIHZhciBvcHRzID0gXy5jbG9uZShvbGRPcHRpb25zKTtcbiAgaWYgKGtleSA9PSAndmlldy1wYWlycycpIHtcbiAgICBvcHRzLnZpZXdBc1BhaXJzID0gIW9wdHMudmlld0FzUGFpcnM7XG4gICAgcmV0dXJuIG9wdHM7XG4gIH0gZWxzZSBpZiAoa2V5ID09ICdjb2xvci1pbnNlcnQnKSB7XG4gICAgb3B0cy5jb2xvckJ5SW5zZXJ0ID0gIW9wdHMuY29sb3JCeUluc2VydDtcbiAgICBpZiAob3B0cy5jb2xvckJ5SW5zZXJ0KSBvcHRzLmNvbG9yQnlTdHJhbmQgPSBmYWxzZTtcbiAgICByZXR1cm4gb3B0cztcbiAgfSBlbHNlIGlmIChrZXkgPT0gJ2NvbG9yLXN0cmFuZCcpIHtcbiAgICBvcHRzLmNvbG9yQnlTdHJhbmQgPSAhb3B0cy5jb2xvckJ5U3RyYW5kO1xuICAgIGlmIChvcHRzLmNvbG9yQnlTdHJhbmQpIG9wdHMuY29sb3JCeUluc2VydCA9IGZhbHNlO1xuICAgIHJldHVybiBvcHRzO1xuICB9IGVsc2UgaWYgKGtleSA9PSAnc29ydCcpIHtcbiAgICBvcHRzLnNvcnQgPSAobWVzc2FnZUlkKyspO1xuICAgIHJldHVybiBvcHRzO1xuICB9XG4gIHJldHVybiBvbGRPcHRpb25zOyAgLy8gbm8gY2hhbmdlXG59O1xuXG5cbm1vZHVsZS5leHBvcnRzID0gUGlsZXVwVHJhY2s7XG4iLCIvKipcbiAqIEEgdHJhY2sgd2hpY2ggc2hvd3MgYSBzY2FsZSBwcm9wb3J0aW9uYWwgdG8gc2xpY2Ugb2YgdGhlIGdlbm9tZSBiZWluZ1xuICogc2hvd24gYnkgdGhlIHJlZmVyZW5jZSB0cmFjay4gVGhpcyB0cmFjayB0cmllcyB0byBzaG93IGEgc2NhbGUgaW4ga2JwLFxuICogbWJwIG9yIGdicCBkZXBlbmRpbmcgb24gdGhlIHNpemUgb2YgdGhlIHZpZXcgYW5kIGFsc28gdHJpZXMgdG8gcm91bmQgdGhlXG4gKiBzY2FsZSBzaXplIChlLmcuIHByZWZlcnMgXCIxLDAwMCBicFwiLCBcIjEsMDAwIGticFwiIG92ZXIgXCIxIGticFwiIGFuZCBcIjEgbWJwXCIpXG4gKlxuICogICAgICAgICAgIDwtLS0tLS0tLS0tIDMwIGJwIC0tLS0tLS0tLS0+XG4gKlxuICogQGZsb3dcbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgdHlwZSB7Vml6UHJvcHN9IGZyb20gJy4uL1Zpc3VhbGl6YXRpb25XcmFwcGVyJztcbmltcG9ydCB0eXBlIHtTY2FsZX0gZnJvbSAnLi9kM3V0aWxzJztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBSZWFjdERPTSBmcm9tICdyZWFjdC1kb20nO1xuaW1wb3J0IEVtcHR5U291cmNlIGZyb20gJy4uL3NvdXJjZXMvRW1wdHlTb3VyY2UnO1xuaW1wb3J0IGNhbnZhc1V0aWxzIGZyb20gJy4vY2FudmFzLXV0aWxzJztcbmltcG9ydCBkYXRhQ2FudmFzIGZyb20gJ2RhdGEtY2FudmFzJztcbmltcG9ydCBzdHlsZSBmcm9tICcuLi9zdHlsZSc7XG5pbXBvcnQgZDN1dGlscyBmcm9tICcuL2QzdXRpbHMnO1xuXG5jbGFzcyBTY2FsZVRyYWNrIGV4dGVuZHMgUmVhY3QuQ29tcG9uZW50IHtcbiAgcHJvcHM6IFZpelByb3BzO1xuICBzdGF0ZTogdm9pZDsgIC8vIG5vIHN0YXRlXG4gIHN0YXRpYyBkZWZhdWx0U291cmNlOiBPYmplY3Q7XG5cbiAgY29uc3RydWN0b3IocHJvcHM6IE9iamVjdCkge1xuICAgIHN1cGVyKHByb3BzKTtcbiAgfVxuXG4gIGdldFNjYWxlKCk6IFNjYWxlIHtcbiAgICByZXR1cm4gZDN1dGlscy5nZXRUcmFja1NjYWxlKHRoaXMucHJvcHMucmFuZ2UsIHRoaXMucHJvcHMud2lkdGgpO1xuICB9XG5cbiAgcmVuZGVyKCk6IGFueSB7XG4gICAgcmV0dXJuIDxjYW52YXMgcmVmPSdjYW52YXMnIC8+O1xuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gIH1cblxuICBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzOiBhbnksIHByZXZTdGF0ZTogYW55KSB7XG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gIH1cblxuICBnZXRET01Ob2RlKCk6IGFueSB7XG4gICAgcmV0dXJuIFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpO1xuICB9XG5cbiAgdXBkYXRlVmlzdWFsaXphdGlvbigpIHtcbiAgICB2YXIgY2FudmFzID0gdGhpcy5nZXRET01Ob2RlKCksXG4gICAgICAgIHtyYW5nZSwgd2lkdGgsIGhlaWdodH0gPSB0aGlzLnByb3BzO1xuXG4gICAgZDN1dGlscy5zaXplQ2FudmFzKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG5cbiAgICB2YXIgY3R4ID0gZGF0YUNhbnZhcy5nZXREYXRhQ29udGV4dChjYW52YXNVdGlscy5nZXRDb250ZXh0KGNhbnZhcykpO1xuICAgIGN0eC5zYXZlKCk7XG4gICAgY3R4LnJlc2V0KCk7XG4gICAgY3R4LmNsZWFyUmVjdCgwLCAwLCBjdHguY2FudmFzLndpZHRoLCBjdHguY2FudmFzLmhlaWdodCk7XG5cbiAgICB2YXIgdmlld1NpemUgPSByYW5nZS5zdG9wIC0gcmFuZ2Uuc3RhcnQgKyAxLFxuICAgICAgICBtaWRYID0gTWF0aC5yb3VuZCh3aWR0aCAvIDIpLFxuICAgICAgICBtaWRZID0gTWF0aC5yb3VuZChoZWlnaHQgLyAyKTtcblxuICAgIC8vIE1pZCBsYWJlbFxuICAgIHZhciB7cHJlZml4LCB1bml0fSA9IGQzdXRpbHMuZm9ybWF0UmFuZ2Uodmlld1NpemUpO1xuICAgIGN0eC5saW5lV2lkdGggPSAxO1xuICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5TQ0FMRV9GT05UX0NPTE9SO1xuICAgIGN0eC5mb250ID0gc3R5bGUuU0NBTEVfRk9OVF9TVFlMRTtcbiAgICBjdHgudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcbiAgICBjdHguZmlsbFRleHQocHJlZml4ICsgXCIgXCIgKyB1bml0LFxuICAgICAgICAgICAgICAgICBtaWRYLFxuICAgICAgICAgICAgICAgICBtaWRZICsgc3R5bGUuU0NBTEVfVEVYVF9ZX09GRlNFVCk7XG5cbiAgICAvLyBMZWZ0IGxpbmVcbiAgICBjYW52YXNVdGlscy5kcmF3TGluZShjdHgsIDAuNSwgbWlkWSAtIDAuNSwgbWlkWCAtIHN0eWxlLlNDQUxFX0xJTkVfUEFERElORyAtIDAuNSwgbWlkWSAtIDAuNSk7XG4gICAgLy8gTGVmdCBhcnJvd1xuICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICBjdHgubW92ZVRvKDAuNSArIHN0eWxlLlNDQUxFX0FSUk9XX1NJWkUsIG1pZFkgLSBzdHlsZS5TQ0FMRV9BUlJPV19TSVpFIC0gMC41KTtcbiAgICBjdHgubGluZVRvKDAuNSwgbWlkWSAtIDAuNSk7XG4gICAgY3R4LmxpbmVUbygwLjUgKyBzdHlsZS5TQ0FMRV9BUlJPV19TSVpFLCBtaWRZICsgc3R5bGUuU0NBTEVfQVJST1dfU0laRSAtIDAuNSk7XG4gICAgY3R4LmNsb3NlUGF0aCgpO1xuICAgIGN0eC5maWxsKCk7XG4gICAgY3R4LnN0cm9rZSgpO1xuXG4gICAgLy8gUmlnaHQgbGluZVxuICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgbWlkWCArIHN0eWxlLlNDQUxFX0xJTkVfUEFERElORyAtIDAuNSwgbWlkWSAtIDAuNSwgd2lkdGggLSAwLjUsIG1pZFkgLSAwLjUpO1xuICAgIC8vIFJpZ2h0IGFycm93XG4gICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgIGN0eC5tb3ZlVG8od2lkdGggLSBzdHlsZS5TQ0FMRV9BUlJPV19TSVpFIC0gMC41LCBtaWRZIC0gc3R5bGUuU0NBTEVfQVJST1dfU0laRSAtIDAuNSk7XG4gICAgY3R4LmxpbmVUbyh3aWR0aCAtIDAuNSwgbWlkWSAtIDAuNSk7XG4gICAgY3R4LmxpbmVUbyh3aWR0aCAtIHN0eWxlLlNDQUxFX0FSUk9XX1NJWkUgLSAwLjUsIG1pZFkgKyBzdHlsZS5TQ0FMRV9BUlJPV19TSVpFIC0gMC41KTtcbiAgICBjdHguY2xvc2VQYXRoKCk7XG4gICAgY3R4LmZpbGwoKTtcbiAgICBjdHguc3Ryb2tlKCk7XG5cbiAgICAvLyBDbGVhbiB1cCBhZnRlcndhcmRzXG4gICAgY3R4LnJlc3RvcmUoKTtcbiAgfVxufVxuXG5TY2FsZVRyYWNrLmRpc3BsYXlOYW1lID0gJ3NjYWxlJztcblNjYWxlVHJhY2suZGVmYXVsdFNvdXJjZSA9IEVtcHR5U291cmNlLmNyZWF0ZSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNjYWxlVHJhY2s7XG4iLCIvKipcbiAqIEEgY2FudmFzIHdoaWNoIG1haW50YWlucyBhIGNhY2hlIG9mIHByZXZpb3VzbHktcmVuZGVyZWQgdGlsZXMuXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBmcm9tICdkYXRhLWNhbnZhcyc7XG5cbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuXG5pbXBvcnQgc2NhbGUgZnJvbSAnLi4vc2NhbGUnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCB7UmVzb2x1dGlvbkNhY2hlfSBmcm9tICcuLi9SZXNvbHV0aW9uQ2FjaGUnO1xuaW1wb3J0IEludGVydmFsIGZyb20gJy4uL0ludGVydmFsJztcbmltcG9ydCBjYW52YXNVdGlscyBmcm9tICcuL2NhbnZhcy11dGlscyc7XG5pbXBvcnQgZGF0YUNhbnZhcyBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgdXRpbHMgZnJvbSAnLi4vdXRpbHMnO1xuaW1wb3J0IGQzdXRpbHMgZnJvbSAnLi9kM3V0aWxzJztcblxudHlwZSBUaWxlID0ge1xuICBwaXhlbHNQZXJCYXNlOiBudW1iZXI7XG4gIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+O1xuICBvcmlnaW5hbFJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+O1xuICBidWZmZXI6IEhUTUxDYW52YXNFbGVtZW50O1xufTtcblxuY29uc3QgRVBTSUxPTiA9IDFlLTY7XG5jb25zdCBNSU5fUFhfUEVSX0JVRkZFUiA9IDUwMDtcblxuY29uc3QgREVCVUdfUkVOREVSX1RJTEVfRURHRVMgPSBmYWxzZTtcblxuY2xhc3MgVGlsZWRDYW52YXMge1xuICB0aWxlQ2FjaGU6IFRpbGVbXTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLnRpbGVDYWNoZSA9IFtdO1xuICB9XG5cbiAgcmVuZGVyVGlsZSh0aWxlOiBUaWxlKSB7XG4gICAgdmFyIHJhbmdlID0gdGlsZS5yYW5nZSxcbiAgICAgICAgaGVpZ2h0ID0gdGhpcy5oZWlnaHRGb3JSZWYocmFuZ2UuY29udGlnKSxcbiAgICAgICAgd2lkdGggPSBNYXRoLnJvdW5kKHRpbGUucGl4ZWxzUGVyQmFzZSAqIHJhbmdlLmxlbmd0aCgpKTtcbiAgICAvLyBUT0RPOiBkb2VzIGl0IG1ha2Ugc2Vuc2UgdG8gcmUtdXNlIGNhbnZhc2VzP1xuICAgIHRpbGUuYnVmZmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgZDN1dGlscy5zaXplQ2FudmFzKHRpbGUuYnVmZmVyLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgIC8vIFRoZSBmYXIgcmlnaHQgZWRnZSBvZiB0aGUgdGlsZSBpcyB0aGUgc3RhcnQgb2YgdGhlIF9uZXh0XyByYW5nZSdzIGJhc2VcbiAgICAvLyBwYWlyLCBub3QgdGhlIHN0YXJ0IG9mIHRoZSBsYXN0IG9uZSBpbiB0aGlzIHRpbGUuXG4gICAgdmFyIHNjID0gc2NhbGUubGluZWFyKCkuZG9tYWluKFtyYW5nZS5zdGFydCgpLCByYW5nZS5zdG9wKCkgKyAxXSkucmFuZ2UoWzAsIHdpZHRoXSk7XG4gICAgdmFyIGN0eCA9IGNhbnZhc1V0aWxzLmdldENvbnRleHQodGlsZS5idWZmZXIpO1xuICAgIHZhciBkdHggPSBkYXRhQ2FudmFzLmdldERhdGFDb250ZXh0KGN0eCk7XG5cblxuICAgIHZhciByZXNvbHV0aW9uICA9IFJlc29sdXRpb25DYWNoZS5nZXRSZXNvbHV0aW9uKHRpbGUub3JpZ2luYWxSYW5nZS5pbnRlcnZhbCk7XG4gICAgdGhpcy5yZW5kZXIoZHR4LCBzYywgcmFuZ2UsIHRpbGUub3JpZ2luYWxSYW5nZSwgcmVzb2x1dGlvbik7XG4gIH1cblxuICAvLyBDcmVhdGUgKGFuZCByZW5kZXIpIG5ldyB0aWxlcyB0byBmaWxsIHRoZSBnYXBzLlxuICBtYWtlTmV3VGlsZXMoZXhpc3RpbmdUaWxlczogSW50ZXJ2YWxbXSxcbiAgICAgICAgICAgICAgIHBpeGVsc1BlckJhc2U6IG51bWJlcixcbiAgICAgICAgICAgICAgIHJhbmdlOiBDb250aWdJbnRlcnZhbDxzdHJpbmc+KTogVGlsZVtdIHtcbiAgICB2YXIgbmV3SW50ZXJ2YWxzID0gVGlsZWRDYW52YXMuZ2V0TmV3VGlsZVJhbmdlcyhcbiAgICAgICAgICBleGlzdGluZ1RpbGVzLCByYW5nZS5pbnRlcnZhbCwgcGl4ZWxzUGVyQmFzZSk7XG5cbiAgICB2YXIgbmV3VGlsZXMgPSBuZXdJbnRlcnZhbHMubWFwKGl2ID0+ICh7XG4gICAgICBwaXhlbHNQZXJCYXNlLFxuICAgICAgcmFuZ2U6IG5ldyBDb250aWdJbnRlcnZhbChyYW5nZS5jb250aWcsIGl2LnN0YXJ0LCBpdi5zdG9wKSxcbiAgICAgIG9yaWdpbmFsUmFuZ2U6IHJhbmdlLFxuICAgICAgYnVmZmVyOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKVxuICAgIH0pKTtcblxuICAgIC8vIFRPRE86IGl0IHdvdWxkIGJlIGJldHRlciB0byB3cmFwIHRoZXNlIGNhbGxzIGluIHJlcXVlc3RBbmltYXRpb25GcmFtZSxcbiAgICAvLyBzbyB0aGF0IHJlbmRlcmluZyBpcyBkb25lIG9mZiB0aGUgbWFpbiBldmVudCBsb29wLlxuICAgIG5ld1RpbGVzLmZvckVhY2godGlsZSA9PiB0aGlzLnJlbmRlclRpbGUodGlsZSkpO1xuICAgIHRoaXMudGlsZUNhY2hlID0gdGhpcy50aWxlQ2FjaGUuY29uY2F0KG5ld1RpbGVzKTtcbiAgICB0aGlzLnRpbGVDYWNoZS5zb3J0KChhLCBiKSA9PiBDb250aWdJbnRlcnZhbC5jb21wYXJlKGEucmFuZ2UsIGIucmFuZ2UpKTtcbiAgICByZXR1cm4gbmV3VGlsZXM7XG4gIH1cblxuICByZW5kZXJUb1NjcmVlbihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICAgICAgICAgIHNjYWxlOiAobnVtOiBudW1iZXIpID0+IG51bWJlcikge1xuICAgIHZhciBwaXhlbHNQZXJCYXNlID0gc2NhbGUoMSkgLSBzY2FsZSgwKTtcbiAgICB2YXIgdGlsZXNBdFJlcyA9IHRoaXMudGlsZUNhY2hlLmZpbHRlcih0aWxlID0+IE1hdGguYWJzKHRpbGUucGl4ZWxzUGVyQmFzZSAtIHBpeGVsc1BlckJhc2UpIDwgRVBTSUxPTiAmJiByYW5nZS5jaHJPbkNvbnRpZyh0aWxlLnJhbmdlLmNvbnRpZykpO1xuICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodEZvclJlZihyYW5nZS5jb250aWcpO1xuXG4gICAgdmFyIGV4aXN0aW5nSW50ZXJ2YWxzID0gdGlsZXNBdFJlcy5tYXAodGlsZSA9PiB0aWxlLnJhbmdlLmludGVydmFsKTtcbiAgICBpZiAoIXJhbmdlLmludGVydmFsLmlzQ292ZXJlZEJ5KGV4aXN0aW5nSW50ZXJ2YWxzKSkge1xuICAgICAgdGlsZXNBdFJlcyA9IHRpbGVzQXRSZXMuY29uY2F0KHRoaXMubWFrZU5ld1RpbGVzKGV4aXN0aW5nSW50ZXJ2YWxzLCBwaXhlbHNQZXJCYXNlLCByYW5nZSkpO1xuICAgIH1cblxuICAgIHZhciB0aWxlcyA9IHRpbGVzQXRSZXMuZmlsdGVyKHRpbGUgPT4gcmFuZ2UuY2hySW50ZXJzZWN0cyh0aWxlLnJhbmdlKSk7XG5cbiAgICB0aWxlcy5mb3JFYWNoKHRpbGUgPT4ge1xuICAgICAgdmFyIGxlZnQgPSBNYXRoLnJvdW5kKHNjYWxlKHRpbGUucmFuZ2Uuc3RhcnQoKSkpLFxuICAgICAgICAgIG5leHRMZWZ0ID0gTWF0aC5yb3VuZChzY2FsZSh0aWxlLnJhbmdlLnN0b3AoKSArIDEpKSxcbiAgICAgICAgICB3aWR0aCA9IG5leHRMZWZ0IC0gbGVmdDtcbiAgICAgIC8vIERyYXdpbmcgYSAwcHggdGFsbCBjYW52YXMgdGhyb3dzIGluIEZpcmVmb3ggYW5kIFBoYW50b21KUy5cbiAgICAgIGlmICh0aWxlLmJ1ZmZlci5oZWlnaHQgPT09IDApIHJldHVybjtcbiAgICAgIC8vIFdlIGNhbid0IGp1c3QgdGhyb3cgdGhlIGltYWdlcyBvbiB0aGUgc2NyZWVuIHdpdGhvdXQgc2NhbGluZyBkdWUgdG9cbiAgICAgIC8vIHJvdW5kaW5nIGlzc3Vlcywgd2hpY2ggY2FuIHJlc3VsdCBpbiAxcHggZ2FwcyBvciBvdmVyZHJhd2luZy5cbiAgICAgIC8vIFdlIGFsd2F5cyBoYXZlOlxuICAgICAgLy8gICB3aWR0aCAtIHRpbGUuYnVmZmVyLndpZHRoIFxcaW4gey0xLCAwLCArMX1cbiAgICAgIGN0eC5kcmF3SW1hZ2UodGlsZS5idWZmZXIsIFxuICAgICAgICAgICAgICAgICAgICAwLCAwLCB0aWxlLmJ1ZmZlci53aWR0aCwgdGlsZS5idWZmZXIuaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBsZWZ0LCAwLCB3aWR0aCwgdGlsZS5idWZmZXIuaGVpZ2h0KTtcblxuICAgICAgaWYgKERFQlVHX1JFTkRFUl9USUxFX0VER0VTKSB7XG4gICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgIGN0eC5zdHJva2VTdHlsZSA9ICdibGFjayc7XG4gICAgICAgIGNhbnZhc1V0aWxzLmRyYXdMaW5lKGN0eCwgbGVmdCAtIDAuNSwgMCwgbGVmdCAtIDAuNSwgaGVpZ2h0KTtcbiAgICAgICAgY2FudmFzVXRpbHMuZHJhd0xpbmUoY3R4LCBuZXh0TGVmdCAtIDAuNSwgMCwgbmV4dExlZnQgLSAwLjUsIGhlaWdodCk7XG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBpbnZhbGlkYXRlQWxsKCkge1xuICAgIHRoaXMudGlsZUNhY2hlID0gW107XG4gIH1cblxuICBpbnZhbGlkYXRlUmFuZ2UocmFuZ2U6IENvbnRpZ0ludGVydmFsKSB7XG4gICAgdGhpcy50aWxlQ2FjaGUgPSB0aGlzLnRpbGVDYWNoZS5maWx0ZXIodGlsZSA9PiAhdGlsZS5yYW5nZS5jaHJJbnRlcnNlY3RzKHJhbmdlKSk7XG4gIH1cblxuICBoZWlnaHRGb3JSZWYocmVmOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHRocm93ICdOb3QgaW1wbGVtZW50ZWQnO1xuICB9XG5cbiAgcmVuZGVyKGR0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgIHNjYWxlOiAoeDogbnVtYmVyKT0+bnVtYmVyLFxuICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICBvcmlnaW5hbFJhbmdlOiA/Q29udGlnSW50ZXJ2YWw8c3RyaW5nPixcbiAgICAgICAgIHJlc29sdXRpb246ID9udW1iZXIpOiB2b2lkIHtcbiAgICB0aHJvdyAnTm90IGltcGxlbWVudGVkJztcbiAgfVxuXG4gIC8vIHJlcXVpcmVzIHRoYXQgZXhpc3RpbmdJbnRlcnZhbHMgYmUgc29ydGVkLlxuICBzdGF0aWMgZ2V0TmV3VGlsZVJhbmdlcyhleGlzdGluZ0ludGVydmFsczogSW50ZXJ2YWxbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IEludGVydmFsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBwaXhlbHNQZXJCYXNlOiBudW1iZXIpOiBJbnRlcnZhbFtdIHtcbiAgICB2YXIgaXZXaWR0aCA9IE1hdGguY2VpbChNSU5fUFhfUEVSX0JVRkZFUiAvIHBpeGVsc1BlckJhc2UpO1xuICAgIHZhciBmaXJzdFN0YXJ0ID0gTWF0aC5mbG9vcihyYW5nZS5zdGFydCAvIGl2V2lkdGgpICogaXZXaWR0aDtcbiAgICB2YXIgaXZzID0gXy5yYW5nZShmaXJzdFN0YXJ0LCByYW5nZS5zdG9wLCBpdldpZHRoKVxuICAgICAgICAgICAgICAgLm1hcChzdGFydCA9PiBuZXcgSW50ZXJ2YWwoc3RhcnQsIHN0YXJ0ICsgaXZXaWR0aCAtIDEpKVxuICAgICAgICAgICAgICAgLmZpbHRlcihpdiA9PiAhaXYuaXNDb3ZlcmVkQnkoZXhpc3RpbmdJbnRlcnZhbHMpKTtcblxuICAgIHJldHVybiB1dGlscy5mbGF0TWFwKGl2cywgaXYgPT4gaXYuY29tcGxlbWVudEludGVydmFscyhleGlzdGluZ0ludGVydmFscykpXG4gICAgICAgICAgICAgICAgLmZpbHRlcihpdiA9PiBpdi5pbnRlcnNlY3RzKHJhbmdlKSk7XG4gIH1cblxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFRpbGVkQ2FudmFzO1xuIiwiLyoqXG4gKiBWaXN1YWxpemF0aW9uIG9mIHZhcmlhbnRzXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtWY2ZEYXRhU291cmNlfSBmcm9tICcuLi9zb3VyY2VzL1ZjZkRhdGFTb3VyY2UnO1xuaW1wb3J0IHR5cGUge1ZhcmlhbnR9IGZyb20gJy4uL2RhdGEvdmNmJztcbmltcG9ydCB0eXBlIHtEYXRhQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgdHlwZSB7Vml6UHJvcHN9IGZyb20gJy4uL1Zpc3VhbGl6YXRpb25XcmFwcGVyJztcbmltcG9ydCB0eXBlIHtTY2FsZX0gZnJvbSAnLi9kM3V0aWxzJztcblxuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBfIGZyb20gJ3VuZGVyc2NvcmUnO1xuXG5pbXBvcnQgZDN1dGlscyBmcm9tICcuL2QzdXRpbHMnO1xuaW1wb3J0IHNoYWxsb3dFcXVhbHMgZnJvbSAnc2hhbGxvdy1lcXVhbHMnO1xuaW1wb3J0IENvbnRpZ0ludGVydmFsIGZyb20gJy4uL0NvbnRpZ0ludGVydmFsJztcbmltcG9ydCBjYW52YXNVdGlscyBmcm9tICcuL2NhbnZhcy11dGlscyc7XG5pbXBvcnQgVGlsZWRDYW52YXMgZnJvbSAnLi9UaWxlZENhbnZhcyc7XG5pbXBvcnQgZGF0YUNhbnZhcyBmcm9tICdkYXRhLWNhbnZhcyc7XG5pbXBvcnQgc3R5bGUgZnJvbSAnLi4vc3R5bGUnO1xuaW1wb3J0IHV0aWxzIGZyb20gJy4uL3V0aWxzJztcbmltcG9ydCB0eXBlIHtTdGF0ZSwgTmV0d29ya1N0YXR1c30gZnJvbSAnLi9waWxldXB1dGlscyc7XG5cbnZhciBNT05TVEVSX1JFUVVFU1QgPSA1MDAwMDA7XG5cbmNsYXNzIFZhcmlhbnRUaWxlZENhbnZhcyBleHRlbmRzIFRpbGVkQ2FudmFzIHtcbiAgb3B0aW9uczogT2JqZWN0O1xuICBzb3VyY2U6IFZjZkRhdGFTb3VyY2U7XG5cbiAgY29uc3RydWN0b3Ioc291cmNlOiBWY2ZEYXRhU291cmNlLCBvcHRpb25zOiBPYmplY3QpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICB1cGRhdGUobmV3T3B0aW9uczogT2JqZWN0KSB7XG4gICAgdGhpcy5vcHRpb25zID0gbmV3T3B0aW9ucztcbiAgfVxuXG4gIC8vIFRPRE86IGNhbiB1cGRhdGUgdG8gaGFuZGxlIG92ZXJsYXBwaW5nIGZlYXR1cmVzXG4gIGhlaWdodEZvclJlZihyZWY6IHN0cmluZyk6IG51bWJlciB7XG4gICAgcmV0dXJuIHN0eWxlLlZBUklBTlRfSEVJR0hUO1xuICB9XG5cbiAgcmVuZGVyKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgIHNjYWxlOiAoeDogbnVtYmVyKT0+bnVtYmVyLFxuICAgICAgICAgcmFuZ2U6IENvbnRpZ0ludGVydmFsPHN0cmluZz4sXG4gICAgICAgICBvcmlnaW5hbFJhbmdlOiA/Q29udGlnSW50ZXJ2YWw8c3RyaW5nPixcbiAgICAgICAgIHJlc29sdXRpb246ID9udW1iZXIpIHtcbiAgICB2YXIgcmVsYXhlZFJhbmdlID1cbiAgICAgICAgbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQoKSAtIDEsIHJhbmdlLnN0b3AoKSArIDEpO1xuXG4gICAgLy8gcmVsYXhlZCByYW5nZSBpcyBqdXN0IGZvciB0aGlzIHRpbGUuIG1ha2Ugc3VyZSB0byBnZXQgcmVzb2x1dGlvbiBmb3Igd2hvbGVcbiAgICAvLyB2aWV3aW5nIGFyZWFcbiAgICB2YXIgdlZhcmlhbnRzID0gdGhpcy5zb3VyY2UuZ2V0VmFyaWFudHNJblJhbmdlKHJlbGF4ZWRSYW5nZSwgcmVzb2x1dGlvbik7XG4gICAgcmVuZGVyVmFyaWFudHMoY3R4LCBzY2FsZSwgcmVsYXhlZFJhbmdlLCB2VmFyaWFudHMpO1xuICB9XG59XG5cbi8vIERyYXcgdmFyaWFudHNcbmZ1bmN0aW9uIHJlbmRlclZhcmlhbnRzKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCxcbiAgICAgICAgICAgICAgICAgICAgc2NhbGU6IChudW06IG51bWJlcikgPT4gbnVtYmVyLFxuICAgICAgICAgICAgICAgICAgICByYW5nZTogQ29udGlnSW50ZXJ2YWw8c3RyaW5nPixcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFudHM6IFZhcmlhbnRbXSkge1xuXG4gICAgY3R4LmZvbnQgPSBgJHtzdHlsZS5HRU5FX0ZPTlRfU0laRX1weCAke3N0eWxlLkdFTkVfRk9OVH1gO1xuICAgIGN0eC50ZXh0QWxpZ24gPSAnY2VudGVyJztcblxuICAgIHZhcmlhbnRzLmZvckVhY2godmFyaWFudCA9PiB7XG4gICAgICBjdHgucHVzaE9iamVjdCh2YXJpYW50KTtcbiAgICAgIGN0eC5maWxsU3R5bGUgPSBzdHlsZS5CQVNFX0NPTE9SU1t2YXJpYW50LmFsdF07XG4gICAgICBjdHguc3Ryb2tlU3R5bGUgPSBzdHlsZS5CQVNFX0NPTE9SU1t2YXJpYW50LnJlZl07XG4gICAgICB2YXIgeCA9IE1hdGgucm91bmQoc2NhbGUodmFyaWFudC5wb3NpdGlvbikpO1xuICAgICAgdmFyIHdpZHRoID0gTWF0aC5yb3VuZChzY2FsZSh2YXJpYW50LmVuZCkpIC0geDtcbiAgICAgIGN0eC5maWxsUmVjdCh4IC0gMC4yLCAwLCB3aWR0aCwgc3R5bGUuVkFSSUFOVF9IRUlHSFQpO1xuICAgICAgY3R4LnN0cm9rZVJlY3QoeCAtIDAuMiwgMCwgd2lkdGgsIHN0eWxlLlZBUklBTlRfSEVJR0hUKTtcbiAgICAgIGN0eC5wb3BPYmplY3QoKTtcbiAgICB9KTtcblxufVxuXG5jbGFzcyBWYXJpYW50VHJhY2sgZXh0ZW5kcyBSZWFjdC5Db21wb25lbnQge1xuICBwcm9wczogVml6UHJvcHMgJiB7c291cmNlOiBWY2ZEYXRhU291cmNlfTtcbiAgc3RhdGU6IFN0YXRlOyAgLy8gbm8gc3RhdGVcbiAgdGlsZXM6IFZhcmlhbnRUaWxlZENhbnZhcztcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogT2JqZWN0KSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBuZXR3b3JrU3RhdHVzOiBudWxsXG4gICAgfTtcbiAgfVxuXG4gIHJlbmRlcigpOiBhbnkge1xuICAgIHZhciBzdGF0dXNFbCA9IG51bGwsXG4gICAgICAgIG5ldHdvcmtTdGF0dXMgPSB0aGlzLnN0YXRlLm5ldHdvcmtTdGF0dXM7XG4gICAgaWYgKG5ldHdvcmtTdGF0dXMpIHtcbiAgICAgIHN0YXR1c0VsID0gKFxuICAgICAgICA8ZGl2IHJlZj0nc3RhdHVzJyBjbGFzc05hbWU9J25ldHdvcmstc3RhdHVzLXNtYWxsJz5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nbmV0d29yay1zdGF0dXMtbWVzc2FnZS1zbWFsbCc+XG4gICAgICAgICAgICBMb2FkaW5nIFZhcmlhbnRz4oCmXG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgKTtcbiAgICB9XG4gICAgdmFyIHJhbmdlTGVuZ3RoID0gdGhpcy5wcm9wcy5yYW5nZS5zdG9wIC0gdGhpcy5wcm9wcy5yYW5nZS5zdGFydDtcbiAgICAvLyBJZiByYW5nZSBpcyB0b28gbGFyZ2UsIGRvIG5vdCByZW5kZXIgJ2NhbnZhcydcbiAgICBpZiAocmFuZ2VMZW5ndGggPiBNT05TVEVSX1JFUVVFU1QpIHtcbiAgICAgICByZXR1cm4gKFxuICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2NlbnRlcic+XG4gICAgICAgICAgICAgIFpvb20gaW4gdG8gc2VlIHZhcmlhbnRzXG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDxjYW52YXMgb25DbGljaz17dGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpfSAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIDxkaXY+XG4gICAgICAgICAge3N0YXR1c0VsfVxuICAgICAgICAgIDxkaXYgcmVmPSdjb250YWluZXInPlxuICAgICAgICAgICAgPGNhbnZhcyByZWY9J2NhbnZhcycgb25DbGljaz17dGhpcy5oYW5kbGVDbGljay5iaW5kKHRoaXMpfSAvPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgICk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkTW91bnQoKSB7XG4gICAgdGhpcy50aWxlcyA9IG5ldyBWYXJpYW50VGlsZWRDYW52YXModGhpcy5wcm9wcy5zb3VyY2UsIHRoaXMucHJvcHMub3B0aW9ucyk7XG5cbiAgICAvLyBWaXN1YWxpemUgbmV3IGRhdGEgYXMgaXQgY29tZXMgaW4gZnJvbSB0aGUgbmV0d29yay5cbiAgICB0aGlzLnByb3BzLnNvdXJjZS5vbignbmV3ZGF0YScsIChyYW5nZSkgPT4ge1xuICAgICAgdGhpcy50aWxlcy5pbnZhbGlkYXRlUmFuZ2UocmFuZ2UpO1xuICAgICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5wcm9wcy5zb3VyY2Uub24oJ25ldHdvcmtwcm9ncmVzcycsIGUgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7bmV0d29ya1N0YXR1czogZX0pO1xuICAgIH0pO1xuICAgIHRoaXMucHJvcHMuc291cmNlLm9uKCduZXR3b3JrZG9uZScsIGUgPT4ge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7bmV0d29ya1N0YXR1czogbnVsbH0pO1xuICAgIH0pO1xuXG4gICAgdGhpcy51cGRhdGVWaXN1YWxpemF0aW9uKCk7XG4gIH1cblxuICBnZXRTY2FsZSgpOiBTY2FsZSB7XG4gICAgcmV0dXJuIGQzdXRpbHMuZ2V0VHJhY2tTY2FsZSh0aGlzLnByb3BzLnJhbmdlLCB0aGlzLnByb3BzLndpZHRoKTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHM6IGFueSwgcHJldlN0YXRlOiBhbnkpIHtcbiAgICBpZiAoIXNoYWxsb3dFcXVhbHMocHJldlByb3BzLCB0aGlzLnByb3BzKSB8fFxuICAgICAgICAhc2hhbGxvd0VxdWFscyhwcmV2U3RhdGUsIHRoaXMuc3RhdGUpKSB7XG4gICAgICAgICAgdGhpcy50aWxlcy51cGRhdGUodGhpcy5wcm9wcy5vcHRpb25zKTtcbiAgICAgICAgICB0aGlzLnRpbGVzLmludmFsaWRhdGVBbGwoKTtcbiAgICAgICAgICB0aGlzLnVwZGF0ZVZpc3VhbGl6YXRpb24oKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVWaXN1YWxpemF0aW9uKCkge1xuICAgIHZhciBjYW52YXMgPSAodGhpcy5yZWZzLmNhbnZhcyA6IEhUTUxDYW52YXNFbGVtZW50KSxcbiAgICAgICAge3dpZHRoLCBoZWlnaHR9ID0gdGhpcy5wcm9wcztcblxuICAgIC8vIEhvbGQgb2ZmIHVudGlsIGhlaWdodCAmIHdpZHRoIGFyZSBrbm93bi5cbiAgICBpZiAod2lkdGggPT09IDB8fCB0eXBlb2YgY2FudmFzID09ICd1bmRlZmluZWQnKSByZXR1cm47XG4gICAgZDN1dGlscy5zaXplQ2FudmFzKGNhbnZhcywgd2lkdGgsIGhlaWdodCk7XG5cbiAgICB2YXIgY3R4ID0gZGF0YUNhbnZhcy5nZXREYXRhQ29udGV4dChjYW52YXNVdGlscy5nZXRDb250ZXh0KGNhbnZhcykpO1xuICAgIHRoaXMucmVuZGVyU2NlbmUoY3R4KTtcbiAgfVxuXG4gIHJlbmRlclNjZW5lKGN0eDogRGF0YUNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgIHZhciByYW5nZSA9IHRoaXMucHJvcHMucmFuZ2UsXG4gICAgICAgIGludGVydmFsID0gbmV3IENvbnRpZ0ludGVydmFsKHJhbmdlLmNvbnRpZywgcmFuZ2Uuc3RhcnQsIHJhbmdlLnN0b3ApLFxuICAgICAgICBzY2FsZSA9IHRoaXMuZ2V0U2NhbGUoKTtcblxuICAgIGN0eC5yZXNldCgpO1xuICAgIGN0eC5jbGVhclJlY3QoMCwgMCwgY3R4LmNhbnZhcy53aWR0aCwgY3R4LmNhbnZhcy5oZWlnaHQpO1xuICAgIHRoaXMudGlsZXMucmVuZGVyVG9TY3JlZW4oY3R4LCBpbnRlcnZhbCwgc2NhbGUpO1xuICAgIGN0eC5yZXN0b3JlKCk7XG4gIH1cblxuICBoYW5kbGVDbGljayhyZWFjdEV2ZW50OiBhbnkpIHtcbiAgICB2YXIgZXYgPSByZWFjdEV2ZW50Lm5hdGl2ZUV2ZW50LFxuICAgICAgICB4ID0gZXYub2Zmc2V0WDtcblxuICAgIHZhciBnZW5vbWVSYW5nZSA9IHRoaXMucHJvcHMucmFuZ2UsXG4gICAgICAgIC8vIGFsbG93IHNvbWUgYnVmZmVyaW5nIHNvIGNsaWNrIGlzbid0IHNvIHNlbnNpdGl2ZVxuICAgICAgICByYW5nZSA9IG5ldyBDb250aWdJbnRlcnZhbChnZW5vbWVSYW5nZS5jb250aWcsIGdlbm9tZVJhbmdlLnN0YXJ0LTEsIGdlbm9tZVJhbmdlLnN0b3ArMSksXG4gICAgICAgIHNjYWxlID0gdGhpcy5nZXRTY2FsZSgpLFxuICAgICAgICAvLyBsZWF2ZSBwYWRkaW5nIG9mIDJweCB0byByZWR1Y2UgY2xpY2sgc3BlY2lmaWNpdHlcbiAgICAgICAgY2xpY2tTdGFydCA9IE1hdGguZmxvb3Ioc2NhbGUuaW52ZXJ0KHgpKSAtIDIsXG4gICAgICAgIGNsaWNrRW5kID0gY2xpY2tTdGFydCArIDIsXG4gICAgICAgIC8vIElmIGNsaWNrLXRyYWNraW5nIGdldHMgc2xvdywgdGhpcyByYW5nZSBjb3VsZCBiZSBuYXJyb3dlZCB0byBvbmVcbiAgICAgICAgLy8gY2xvc2VyIHRvIHRoZSBjbGljayBjb29yZGluYXRlLCByYXRoZXIgdGhhbiB0aGUgd2hvbGUgdmlzaWJsZSByYW5nZS5cbiAgICAgICAgdlZhcmlhbnRzID0gdGhpcy5wcm9wcy5zb3VyY2UuZ2V0VmFyaWFudHNJblJhbmdlKHJhbmdlKTtcblxuICAgIHZhciB2YXJpYW50ID0gXy5maW5kKHZWYXJpYW50cywgZiA9PiB1dGlscy50dXBsZVJhbmdlT3ZlcmxhcHMoW1tmLnBvc2l0aW9uXSwgW2YuZW5kXV0sIFtbY2xpY2tTdGFydF0sIFtjbGlja0VuZF1dKSk7XG4gICAgdmFyIGFsZXJ0ID0gd2luZG93LmFsZXJ0IHx8IGNvbnNvbGUubG9nO1xuICAgIGlmICh2YXJpYW50KSB7XG4gICAgICBhbGVydChKU09OLnN0cmluZ2lmeSh2YXJpYW50KSk7XG4gICAgfVxuICB9XG59XG5cblZhcmlhbnRUcmFjay5kaXNwbGF5TmFtZSA9ICd2YXJpYW50cyc7XG5cbm1vZHVsZS5leHBvcnRzID0gVmFyaWFudFRyYWNrO1xuIiwiLyoqXG4gKiBVdGlsaXR5IGNvZGUgZm9yIHdvcmtpbmcgd2l0aCB0aGUgSFRNTCBjYW52YXMgZWxlbWVudC5cbiAqXG4gKiBAZmxvd1xuICovXG4ndXNlIHN0cmljdCc7XG5cbi8vIFJldHVybiB0aGUgMkQgY29udGV4dCBmb3IgYSBjYW52YXMuIFRoaXMgaXMgaGVscGZ1bCBmb3IgdHlwZSBzYWZldHkuXG5mdW5jdGlvbiBnZXRDb250ZXh0KGVsOiBFbGVtZW50KTogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEIHtcbiAgLy8gVGhlIHR5cGVjYXN0cyB0aHJvdWdoIGBhbnlgIGFyZSB0byBmb29sIGZsb3cuXG4gIHZhciBjYW52YXMgPSAoKGVsIDogYW55KSA6IEhUTUxDYW52YXNFbGVtZW50KTtcbiAgdmFyIGN0eCA9ICgoY2FudmFzLmdldENvbnRleHQoJzJkJykgOiBhbnkpIDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTtcbiAgcmV0dXJuIGN0eDtcbn1cblxuLy8gU3Ryb2tlIGEgbGluZSBiZXR3ZWVuIHR3byBwb2ludHNcbmZ1bmN0aW9uIGRyYXdMaW5lKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCB4MTogbnVtYmVyLCB5MTogbnVtYmVyLCB4MjogbnVtYmVyLCB5MjogbnVtYmVyKSB7XG4gIGN0eC5iZWdpblBhdGgoKTtcbiAgY3R4Lm1vdmVUbyh4MSwgeTEpO1xuICBjdHgubGluZVRvKHgyLCB5Mik7XG4gIGN0eC5zdHJva2UoKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdldENvbnRleHQsXG4gIGRyYXdMaW5lXG59O1xuIiwiLyoqXG4gKiBEMy9ET00tcmVsYXRlZCB1dGlsaXR5IGZ1bmN0aW9ucy5cbiAqIEBmbG93XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHNjYWxlIGZyb20gJy4uL3NjYWxlJztcblxuLy8gU3VidHlwZSBvZiBHZW5vbWVSYW5nZVxudHlwZSBSYW5nZSA9IHtcbiAgc3RhcnQ6IG51bWJlcjtcbiAgc3RvcDogbnVtYmVyO1xufTtcblxuZXhwb3J0IHR5cGUgU2NhbGUgPSAobnVtOiBudW1iZXIpID0+IG51bWJlcjtcblxuLyoqXG4gKiBTaGFyZWQgeC1heGlzIHNjYWxpbmcgbG9naWMgZm9yIHRyYWNrc1xuICovXG5mdW5jdGlvbiBnZXRUcmFja1NjYWxlKHJhbmdlOiBSYW5nZSwgd2lkdGg6IG51bWJlcik6IGFueSB7XG4gIGlmICghcmFuZ2UpIHJldHVybiBzY2FsZS5saW5lYXIoKTtcbiAgdmFyIG9mZnNldFB4ID0gcmFuZ2Uub2Zmc2V0UHggfHwgMDtcbiAgcmV0dXJuIHNjYWxlLmxpbmVhcigpXG4gICAgICAgICAgLmRvbWFpbihbcmFuZ2Uuc3RhcnQsIHJhbmdlLnN0b3AgKyAxXSkgIC8vIDEgYnAgd2lkZVxuICAgICAgICAgIC5yYW5nZShbLW9mZnNldFB4LCB3aWR0aCAtIG9mZnNldFB4XSk7XG59XG5cbnZhciBmb3JtYXRQcmVmaXhlcyA9IFtcIlwiLFwia1wiLFwiTVwiLFwiR1wiLFwiVFwiLFwiUFwiLFwiRVwiLFwiWlwiLFwiWVwiXTtcblxuLy8gUmV0dXJucyB0aGUgU0ktcHJlZml4IGZvciBudW0sIGFsYSBkMy5mb3JtYXRQcmVmaXguXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL21ib3N0b2NrL2QzL2Jsb2IvNWI5ODFhMTgvc3JjL2Zvcm1hdC9mb3JtYXRQcmVmaXguanNcbmZ1bmN0aW9uIGZvcm1hdFByZWZpeCh2YWx1ZTogbnVtYmVyKSB7XG4gIHZhciBpID0gMDtcbiAgaWYgKHZhbHVlKSB7XG4gICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgKj0gLTE7XG4gICAgaSA9IDEgKyBNYXRoLmZsb29yKDFlLTEyICsgTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjEwKTtcbiAgICBpID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMjQsIE1hdGguZmxvb3IoKGkgLSAxKSAvIDMpICogMykpO1xuICB9XG4gIHZhciBrID0gTWF0aC5wb3coMTAsIGkpO1xuICByZXR1cm4ge1xuICAgIHN5bWJvbDogZm9ybWF0UHJlZml4ZXNbaSAvIDNdLFxuICAgIHNjYWxlOiBkID0+IGQgLyBrXG4gIH07XG59XG5cbi8qKlxuICogRm9ybWF0cyB0aGUgc2l6ZSBvZiBhIHZpZXcgYW5kIGluZmVycyB3aGF0IHByZWZpeC91bml0IHRvIHNob3cuXG4gKiBUaGlzIGZvcm1hdHRpbmcgZm9sbG93cyBJR1YncyBjb252ZW50aW9ucyByZWdhcmRpbmcgcmFuZ2UgZGlzcGxheTpcbiAqICBcIjEgYnBcIiwgXCIxMDEgYnBcIiwgXCIxLDAwMSBicFwiLCBcIjEsMDAxIGticFwiLCAuLi5cbiAqL1xuZnVuY3Rpb24gZm9ybWF0UmFuZ2Uodmlld1NpemU6IG51bWJlcik6IHtwcmVmaXg6IHN0cmluZywgdW5pdDogc3RyaW5nfSB7XG4gIHZhciB0bXBWaWV3U2l6ZSA9IHZpZXdTaXplIC8gMTAwMCxcbiAgICAgIGZwcmVmaXggPSBmb3JtYXRQcmVmaXgoTWF0aC5tYXgoMSwgdG1wVmlld1NpemUpKSxcbiAgICAgIHVuaXQgPSBmcHJlZml4LnN5bWJvbCArIFwiYnBcIiwgIC8vIGJwLCBrYnAsIE1icCwgR2JwXG4gICAgICBwcmVmaXggPSBNYXRoLnJvdW5kKGZwcmVmaXguc2NhbGUodmlld1NpemUpKS50b0xvY2FsZVN0cmluZygpO1xuICByZXR1cm4ge3ByZWZpeCwgdW5pdH07XG59XG5cbi8qKlxuICogU2l6ZXMgYSBjYW52YXMgYXBwcm9wcmlhdGVseSBmb3IgdGhpcyBkZXZpY2UuXG4gKi9cbmZ1bmN0aW9uIHNpemVDYW52YXMoZWw6IEhUTUxDYW52YXNFbGVtZW50LCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlcikge1xuICAvLyBIb2xkIG9mZiB1bnRpbCBlbCBpcyBkZWZpbmVkXG4gIGlmICghZWwpIHJldHVybjtcbiAgdmFyIHJhdGlvID0gd2luZG93LmRldmljZVBpeGVsUmF0aW87XG4gIGVsLndpZHRoID0gd2lkdGggKiByYXRpbztcbiAgZWwuaGVpZ2h0ID0gaGVpZ2h0ICogcmF0aW87XG4gIGVsLnN0eWxlLndpZHRoID0gd2lkdGggKyAncHgnO1xuICBlbC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xuICB2YXIgY3R4ID0gZWwuZ2V0Q29udGV4dCgnMmQnKTtcbiAgaWYgKGN0eCAhPT0gbnVsbCAmJiBjdHggaW5zdGFuY2VvZiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQpIHtcbiAgICBjdHguc2NhbGUocmF0aW8sIHJhdGlvKTtcbiAgfVxufVxuXG4vKipcbiAqIEZpbmQgdGhlIGNsb3Nlc3QgcGFyZW50IHdpdGggYSBnaXZlbiBjbGFzcyBuYW1lLlxuICovXG5mdW5jdGlvbiBmaW5kUGFyZW50KGluRWw6IEVsZW1lbnQsIGNsYXNzTmFtZTogc3RyaW5nKTogP0VsZW1lbnQge1xuICB2YXIgZWwgPSBpbkVsOyAgLy8gdGhpcyBpcyBmb3IgRmxvdy5cbiAgZG8ge1xuICAgIGlmIChlbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkgcmV0dXJuIGVsO1xuICAgIGVsID0gZWwucGFyZW50RWxlbWVudDtcbiAgfSB3aGlsZSAoZWwpO1xuICByZXR1cm4gbnVsbDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGZvcm1hdFJhbmdlLFxuICBnZXRUcmFja1NjYWxlLFxuICBzaXplQ2FudmFzLFxuICBmaW5kUGFyZW50XG59O1xuIiwiLyoqIEBmbG93ICovXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIFNhbVJlYWQgZnJvbSAnLi4vZGF0YS9TYW1SZWFkJztcbmltcG9ydCB0eXBlIHtBbGlnbm1lbnQsIENpZ2FyU3ltYm9sfSBmcm9tICcuLi9BbGlnbm1lbnQnO1xuaW1wb3J0IHR5cGUgSW50ZXJ2YWwgZnJvbSAnLi4vSW50ZXJ2YWwnO1xuXG4vKipcbiAqIEdpdmVuIGEgbGlzdCBvZiBJbnRlcnZhbHMsIHJldHVybiBhIHBhcmFsbGVsIGxpc3Qgb2Ygcm93IG51bWJlcnMgZm9yIGVhY2guXG4gKiBBc3N1bWluZyByb3dzID0gcGlsZXVwKHJlYWRzKSwgdGhlbiB5b3VyIGd1YXJhbnRlZSBpcyB0aGF0XG4gKiByb3dzW2ldID09IHJvd3Nbal0gPT4gIXJlYWRzW2ldLmludGVyc2VjdHMocmVhZHNbal0pXG4gKi9cbmZ1bmN0aW9uIHBpbGV1cChyZWFkczogSW50ZXJ2YWxbXSk6IG51bWJlcltdIHtcbiAgdmFyIHJvd3MgPSBuZXcgQXJyYXkocmVhZHMubGVuZ3RoKSxcbiAgICAgIGxhc3RSZWFkcyA9IFtdOyAgLy8gcm93IG51bWJlciAtLT4gbGFzdCBJbnRlcnZhbCBpbiB0aGF0IHJvd1xuXG4gIC8vIEZvciBlYWNoIHJlYWQsIGZpbmQgdGhlIGZpcnN0IHJvdyB0aGF0IGl0IHdpbGwgZml0IGluLlxuICAvLyBUaGlzIGlzIHBvdGVudGlhbGx5IE8obl4yKSBpbiB0aGUgbnVtYmVyIG9mIHJlYWRzOyB0aGVyZSdzIHByb2JhYmx5IGFcbiAgLy8gYmV0dGVyIHdheS5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCByZWFkcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciByID0gcmVhZHNbaV07XG4gICAgdmFyIHJvd051bSA9IGxhc3RSZWFkcy5sZW5ndGg7XG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBsYXN0UmVhZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgIGlmICghci5pbnRlcnNlY3RzKGxhc3RSZWFkc1tqXSkpIHtcbiAgICAgICAgcm93TnVtID0gajtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICAgIHJvd3NbaV0gPSByb3dOdW07XG4gICAgbGFzdFJlYWRzW3Jvd051bV0gPSByO1xuICB9XG5cbiAgcmV0dXJuIHJvd3M7XG59XG5cbi8qKlxuICogQWRkIGEgcmVhZCB0byBhbiBleGlzdGluZyBwaWxldXAuXG4gKiBwaWxldXAgbWFwcyB7cm93IC0tPiByZWFkcyBpbiB0aGF0IHJvd31cbiAqIFRoaXMgbW9kaWZpZXMgcGlsZXVwIGJ5IGluc2VydGluZyB0aGUgcmVhZCBpbiB0aGUgYXBwcm9wcmlhdGUgcm93LlxuICogUmV0dXJucyB0aGUgY2hvc2VuIHJvdyBudW1iZXIuXG4gKi9cbmZ1bmN0aW9uIGFkZFRvUGlsZXVwKHJlYWQ6IEludGVydmFsLCBwaWxldXA6IEFycmF5PEludGVydmFsW10+KTogbnVtYmVyIHtcbiAgdmFyIGNob3NlblJvdyA9IC0xO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHBpbGV1cC5sZW5ndGg7IGkrKykge1xuICAgIHZhciByZWFkcyA9IHBpbGV1cFtpXTtcbiAgICB2YXIgb2sgPSB0cnVlO1xuICAgIGZvciAodmFyIGogPSAwOyBqIDwgcmVhZHMubGVuZ3RoOyBqKyspIHtcbiAgICAgIGlmIChyZWFkc1tqXS5pbnRlcnNlY3RzKHJlYWQpKSB7XG4gICAgICAgIG9rID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvaykge1xuICAgICAgY2hvc2VuUm93ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGlmIChjaG9zZW5Sb3cgPT0gLTEpIHtcbiAgICBjaG9zZW5Sb3cgPSBwaWxldXAubGVuZ3RoO1xuICAgIHBpbGV1cFtjaG9zZW5Sb3ddID0gW107ICAvLyBnbyBkZWVwZXJcbiAgfVxuXG4gIHBpbGV1cFtjaG9zZW5Sb3ddLnB1c2gocmVhZCk7XG4gIHJldHVybiBjaG9zZW5Sb3c7XG59XG5cbmV4cG9ydCB0eXBlIEJhc2VQYWlyID0ge1xuICBwb3M6IG51bWJlcjtcbiAgYmFzZVBhaXI6IHN0cmluZztcbiAgcXVhbGl0eTogbnVtYmVyO1xufVxuXG5mdW5jdGlvbiBmaW5kTWlzbWF0Y2hlcyhyZWZlcmVuY2U6IHN0cmluZywgc2VxOiBzdHJpbmcsIHJlZlBvczogbnVtYmVyLCBzY29yZXM6IG51bWJlcltdKTogQmFzZVBhaXJbXSB7XG4gIHZhciBvdXQgPSBbXTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZXEubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgcG9zID0gcmVmUG9zICsgaSxcbiAgICAgICAgcmVmID0gcmVmZXJlbmNlLmNoYXJBdChpKSxcbiAgICAgICAgYmFzZVBhaXIgPSBzZXEuY2hhckF0KGkpO1xuICAgIGlmIChyZWYgIT0gYmFzZVBhaXIgJiYgcmVmICE9ICcuJykge1xuICAgICAgb3V0LnB1c2goe1xuICAgICAgICBwb3MsXG4gICAgICAgIGJhc2VQYWlyLFxuICAgICAgICBxdWFsaXR5OiBzY29yZXNbaV1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0O1xufVxuXG4vLyBEZXRlcm1pbmUgd2hpY2ggYWxpZ25tZW50IHNlZ21lbnQgdG8gcmVuZGVyIGFzIGFuIGFycm93LlxuLy8gVGhpcyBpcyBlaXRoZXIgdGhlIGZpcnN0IG9yIGxhc3QgJ00nIHNlY3Rpb24sIGV4Y2x1ZGluZyBzb2Z0IGNsaXBwaW5nLlxuZnVuY3Rpb24gZ2V0QXJyb3dJbmRleChyZWFkOiBBbGlnbm1lbnQpOiBudW1iZXIge1xuICB2YXIgaSwgb3AsIG9wcyA9IHJlYWQuY2lnYXJPcHM7XG4gIGlmIChyZWFkLmdldFN0cmFuZCgpID09ICctJykge1xuICAgIGZvciAoaSA9IDA7IGkgPCBvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIG9wID0gb3BzW2ldO1xuICAgICAgaWYgKG9wLm9wID09ICdTJykgY29udGludWU7XG4gICAgICBpZiAob3Aub3AgPT0gJ00nKSByZXR1cm4gaTtcbiAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZm9yIChpID0gb3BzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICBvcCA9IG9wc1tpXTtcbiAgICAgIGlmIChvcC5vcCA9PSAnUycpIGNvbnRpbnVlO1xuICAgICAgaWYgKG9wLm9wID09ICdNJykgcmV0dXJuIGk7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxuLy8gVGhlIGNvbW1lbnRzIGJlbG93IGNvbWUgZnJvbSB0aGUgU0FNIHNwZWNcbnZhciBDaWdhck9wID0ge1xuICBNQVRDSDogJ00nLCAgLy8gYWxpZ25tZW50IG1hdGNoIChjYW4gYmUgYSBzZXF1ZW5jZSBtYXRjaCBvciBtaXNtYXRjaClcbiAgSU5TRVJUOiAnSScsICAvLyBpbnNlcnRpb24gdG8gdGhlIHJlZmVyZW5jZVxuICBERUxFVEU6ICdEJywgIC8vIGRlbGV0aW9uIGZyb20gdGhlIHJlZmVyZW5jZVxuICBTS0lQOiAnTicsICAvLyBza2lwcGVkIHJlZ2lvbiBmcm9tIHRoZSByZWZlcmVuY2VcbiAgU09GVENMSVA6ICdTJywgIC8vIHNvZnQgY2xpcHBpbmcgKGNsaXBwZWQgc2VxdWVuY2VzIHByZXNlbnQgaW4gU0VRKVxuICBIQVJEQ0xJUDogJ0gnLCAgLy8gaGFyZCBjbGlwcGluZyAoY2xpcHBlZCBzZXF1ZW5jZXMgTk9UIHByZXNlbnQgaW4gU0VRKVxuICBQQURESU5HOiAnUCcsICAvLyBwYWRkaW5nIChzaWxlbnQgZGVsZXRpb24gZnJvbSBwYWRkZWQgcmVmZXJlbmNlKVxuICBTRVFNQVRDSDogJz0nLCAgLy8gc2VxdWVuY2UgbWF0Y2hcbiAgU0VRTUlTTUFUQ0g6ICdYJyAgLy8gc2VxdWVuY2UgbWlzbWF0Y2hcbn07XG5cbnR5cGUgT3AgPSB7XG4gIG9wOiBDaWdhclN5bWJvbDtcbiAgbGVuZ3RoOiBudW1iZXI7XG4gIHBvczogbnVtYmVyO1xuICBhcnJvdzogPygnTCd8J1InKTtcbn1cblxuZXhwb3J0IHR5cGUgT3BJbmZvID0ge1xuICBvcHM6IE9wW10sXG4gIG1pc21hdGNoZXM6IEJhc2VQYWlyW11cbn1cblxuLy8gQnJlYWtzIHRoZSByZWFkIGRvd24gaW50byBDaWdhciBPcHMgc3VpdGFibGUgZm9yIGRpc3BsYXlcbmZ1bmN0aW9uIGdldE9wSW5mbyhyZWFkOiBBbGlnbm1lbnQsIHJlZmVyZW5jZVNvdXJjZTogT2JqZWN0KTogT3BJbmZvIHtcbiAgdmFyIG9wcyA9IHJlYWQuY2lnYXJPcHM7XG4gIC8vIGNvbnNvbGUubG9nKHJlYWQpO1xuICBcbiAgdmFyIHJhbmdlID0gcmVhZC5nZXRJbnRlcnZhbCgpLFxuICAgICAgc3RhcnQgPSByYW5nZS5zdGFydCgpLFxuICAgICAgc2VxID0gcmVhZC5nZXRTZXF1ZW5jZSgpLFxuICAgICAgc2NvcmVzID0gcmVhZC5nZXRRdWFsaXR5U2NvcmVzKCksXG4gICAgICBzZXFQb3MgPSAwLFxuICAgICAgcmVmUG9zID0gc3RhcnQsXG4gICAgICBhcnJvd0luZGV4ID0gZ2V0QXJyb3dJbmRleChyZWFkKTtcblxuICB2YXIgcmVzdWx0ID0gW107XG4gIHZhciBtaXNtYXRjaGVzID0gKFtdOiBCYXNlUGFpcltdKTtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBvcHMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgb3AgPSBvcHNbaV07XG4gICAgaWYgKG9wLm9wID09ICdNJykge1xuICAgICAgdmFyIHJlZiA9IHJlZmVyZW5jZVNvdXJjZS5nZXRSYW5nZUFzU3RyaW5nKHtcbiAgICAgICAgY29udGlnOiByYW5nZS5jb250aWcsXG4gICAgICAgIHN0YXJ0OiByZWZQb3MsXG4gICAgICAgIHN0b3A6IHJlZlBvcyArIG9wLmxlbmd0aCAtIDFcbiAgICAgIH0pO1xuICAgICAgLy8gY29uc29sZS5sb2coc2VxKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKFwic2VxUG9zOlwiK3NlcVBvcyk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhcIm9wLmxlbmd0aDpcIitvcC5sZW5ndGgpO1xuICAgICAgdmFyIG1TZXEgPSBzZXEuc2xpY2Uoc2VxUG9zLCBzZXFQb3MgKyBvcC5sZW5ndGgpO1xuICAgICAgLy8gY29uc29sZS5sb2cobVNlcSlcbiAgICAgIG1pc21hdGNoZXMgPSBtaXNtYXRjaGVzLmNvbmNhdChmaW5kTWlzbWF0Y2hlcyhyZWYsIG1TZXEsIHJlZlBvcywgc2NvcmVzKSk7XG4gICAgfVxuXG4gICAgcmVzdWx0LnB1c2goe1xuICAgICAgb3A6IG9wLm9wLFxuICAgICAgbGVuZ3RoOiBvcC5sZW5ndGgsXG4gICAgICBwb3M6IHJlZlBvcyxcbiAgICAgIGFycm93OiBudWxsXG4gICAgfSk7XG5cbiAgICAvLyBUaGVzZSBhcmUgdGhlIGNpZ2FyIG9wZXJhdGlvbnMgd2hpY2ggYWR2YW5jZSBwb3NpdGlvbiBpbiB0aGUgcmVmZXJlbmNlXG4gICAgc3dpdGNoIChvcC5vcCkge1xuICAgICAgY2FzZSBDaWdhck9wLk1BVENIOlxuICAgICAgY2FzZSBDaWdhck9wLkRFTEVURTpcbiAgICAgIGNhc2UgQ2lnYXJPcC5TS0lQOlxuICAgICAgY2FzZSBDaWdhck9wLlNFUU1BVENIOlxuICAgICAgY2FzZSBDaWdhck9wLlNFUU1JU01BVENIOlxuICAgICAgICByZWZQb3MgKz0gb3AubGVuZ3RoO1xuICAgIH1cblxuICAgIC8vIFRoZXNlIGFyZSB0aGUgY2lnYXIgb3BlcmF0aW9ucyB3aGljaCBhZHZhbmNlIHRoZSBwZXItYWxpZ25tZW50IHNlcXVlbmNlLlxuICAgIHN3aXRjaCAob3Aub3ApIHtcbiAgICAgIGNhc2UgQ2lnYXJPcC5NQVRDSDpcbiAgICAgIGNhc2UgQ2lnYXJPcC5JTlNFUlQ6XG4gICAgICBjYXNlIENpZ2FyT3AuU09GVENMSVA6XG4gICAgICBjYXNlIENpZ2FyT3AuU0VRTUFUQ0g6XG4gICAgICBjYXNlIENpZ2FyT3AuU0VRTUlTTUFUQ0g6XG4gICAgICAgIHNlcVBvcyArPSBvcC5sZW5ndGg7XG4gICAgfVxuXG4gIH1cblxuICBpZiAoYXJyb3dJbmRleCA+PSAwKSB7XG4gICAgcmVzdWx0W2Fycm93SW5kZXhdLmFycm93ID0gcmVhZC5nZXRTdHJhbmQoKSA9PSAnLScgPyAnTCcgOiAnUic7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIG9wczogcmVzdWx0LFxuICAgIG1pc21hdGNoZXNcbiAgfTtcbn1cblxuLy8gU3RhdGUgaW5mb3JtYXRpb24uIFVzZWQgaW4gdml6XG5leHBvcnQgdHlwZSBOZXR3b3JrU3RhdHVzID0ge251bVJlcXVlc3RzPzogbnVtYmVyLCBzdGF0dXM/OiBzdHJpbmd9O1xuZXhwb3J0IHR5cGUgU3RhdGUgPSB7XG4gIG5ldHdvcmtTdGF0dXM6ID9OZXR3b3JrU3RhdHVzO1xufTtcblxuZnVuY3Rpb24gZm9ybWF0U3RhdHVzKHN0YXR1czogTmV0d29ya1N0YXR1cyk6IHN0cmluZyB7XG4gIGlmIChzdGF0dXMubnVtUmVxdWVzdHMpIHtcbiAgICB2YXIgcGx1cmFsUyA9IHN0YXR1cy5udW1SZXF1ZXN0cyA+IDEgPyAncycgOiAnJztcbiAgICByZXR1cm4gYGlzc3VlZCAke3N0YXR1cy5udW1SZXF1ZXN0c30gcmVxdWVzdCR7cGx1cmFsU31gO1xuICB9IGVsc2UgaWYgKHN0YXR1cy5zdGF0dXMpIHtcbiAgICByZXR1cm4gc3RhdHVzLnN0YXR1cztcbiAgfVxuICB0aHJvdyAnaW52YWxpZCc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBwaWxldXAsXG4gIGFkZFRvUGlsZXVwLFxuICBnZXRPcEluZm8sXG4gIGZvcm1hdFN0YXR1cyxcbiAgQ2lnYXJPcFxufTtcbiJdfQ==
